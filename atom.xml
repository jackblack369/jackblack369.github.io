<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>source is the essence</title>
  
  
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2024-06-02T09:40:33.732Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>brook</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>oauth2 practise</title>
    <link href="http://yoursite.com/2024/05/31/oauth2/"/>
    <id>http://yoursite.com/2024/05/31/oauth2/</id>
    <published>2024-05-31T10:04:12.000Z</published>
    <updated>2024-06-02T09:40:33.732Z</updated>
    
    <content type="html"><![CDATA[<h2 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h2><h3 id="OAuth-2-0-terminology"><a href="#OAuth-2-0-terminology" class="headerlink" title="OAuth 2.0 terminology"></a>OAuth 2.0 terminology</h3><ul><li><strong>Resource Owner</strong>: Entity that can grant access to a protected resource. Typically, this is the end-user.</li><li><strong>Client</strong>: Application requesting access to a protected resource on behalf of the Resource Owner.</li><li><strong>Resource Server</strong>: Server hosting the protected resources. This is the API you want to access.</li><li><strong>Authorization Server</strong>: Server that authenticates the Resource Owner and issues Access Tokens after getting proper authorization. In this case, Auth0.</li><li><strong>User Agent</strong>: Agent used by the Resource Owner to interact with the Client (for example, a browser or a native application).</li></ul><p><img src="/images/security/user-journey-oauth.webp" alt="user-journey-oauth"></p><p>The best practice for implementing OAuth2 in a web application with a separate frontend and backend is to use the Backend for Frontend (BFF) pattern. Here’s how it works:</p><p>The frontend (e.g. a Single Page Application) initiates the OAuth2 flow by redirecting the user to the OAuth2 provider’s authorization endpoint. The provider then authenticates the user and redirects back to the frontend with an authorization code.</p><p>The frontend then sends this authorization code to the backend over a secure channel (e.g. HTTPS). The backend acts as a confidential client and exchanges the authorization code with the OAuth2 provider for an access token and refresh token.[1][3]</p><p>The backend stores the tokens securely and returns an opaque session cookie or token to the frontend. This session identifier represents the authenticated user session.[1]</p><p>For subsequent API requests, the frontend includes the session cookie/token. The backend validates the session and retrieves the access token, using it to authenticate the request to the backend API or other third-party APIs on behalf of the user.[1][3]</p><p>This pattern has several advantages:</p><ol><li><p>The access token is never exposed to the frontend, mitigating the risk of token theft.[1][3]</p></li><li><p>The backend can securely store and manage the refresh of access tokens without involving the frontend.[3]</p></li><li><p>The backend can act as a gatekeeper, validating requests and enforcing authorization rules before proxying to third-party APIs.[3]</p></li><li><p>The frontend only needs to handle the initial OAuth2 redirect and session management, simplifying its code.[1]</p></li></ol><p>To implement this, the backend must be registered as a confidential OAuth2 client with the provider. The frontend can use libraries like Auth0 or Google’s client-side libraries to initiate the OAuth2 flow.[1][4] The backend handles the code exchange and token management, often using server-side OAuth2 libraries or middleware.[1]</p><p>Citations:<br>[1] <a href="https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/">https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/</a><br>[2] <a href="https://community.qlik.com/t5/New-to-Qlik-Analytics/How-to-Secure-Backend-API-Endpoints-on-the-Front-End-Best/td-p/2423853">https://community.qlik.com/t5/New-to-Qlik-Analytics/How-to-Secure-Backend-API-Endpoints-on-the-Front-End-Best/td-p/2423853</a><br>[3] <a href="https://auth0.com/blog/the-backend-for-frontend-pattern-bff/">https://auth0.com/blog/the-backend-for-frontend-pattern-bff/</a><br>[4] <a href="https://infisical.com/blog/guide-to-implementing-oauth2">https://infisical.com/blog/guide-to-implementing-oauth2</a><br>[5] <a href="https://www.reddit.com/r/node/comments/skmjjn/0auth_implemented_on_frontend_or_backend/">https://www.reddit.com/r/node/comments/skmjjn/0auth_implemented_on_frontend_or_backend/</a></p><hr><p>reference</p><ul><li><a href="https://auth0.com/docs/get-started/authentication-and-authorization-flow/which-oauth-2-0-flow-should-i-use">https://auth0.com/docs/get-started/authentication-and-authorization-flow/which-oauth-2-0-flow-should-i-use</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;overview&quot;&gt;&lt;a href=&quot;#overview&quot; class=&quot;headerlink&quot; title=&quot;overview&quot;&gt;&lt;/a&gt;overview&lt;/h2&gt;&lt;h3 id=&quot;OAuth-2-0-terminology&quot;&gt;&lt;a href=&quot;#OAuth-2-</summary>
      
    
    
    
    <category term="oauth2" scheme="http://yoursite.com/categories/oauth2/"/>
    
    
    <category term="pracise" scheme="http://yoursite.com/tags/pracise/"/>
    
  </entry>
  
  <entry>
    <title>python pytest</title>
    <link href="http://yoursite.com/2024/05/20/python%20pytest/"/>
    <id>http://yoursite.com/2024/05/20/python%20pytest/</id>
    <published>2024-05-20T07:21:43.000Z</published>
    <updated>2024-05-20T07:21:50.391Z</updated>
    
    <content type="html"><![CDATA[<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><ul><li><p>测试信息打印</p><blockquote><p>默认情况下，pytest 会捕获所有的输出。这意味着在测试运行期间， <code>print</code> 语句的输出不会显示在控制台上。</p><p>如果想看到 <code>print</code> 语句的输出，需要使用 <code>-s</code> 选项来告诉 pytest 不要捕获输出</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -s test_web_base.py</span><br></pre></td></tr></table></figure></li><li><p>测试指定方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest tests/unit_tests/document_loaders/test_web_base.py::类名::方法名</span><br></pre></td></tr></table></figure></li><li><p>测试被标记的方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.finished</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_func1</span>():</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -m finished tests/test-function/test_with_mark.py</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;test&quot;&gt;&lt;a href=&quot;#test&quot; class=&quot;headerlink&quot; title=&quot;test&quot;&gt;&lt;/a&gt;test&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;测试信息打印&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;默认情况下，pytest 会捕获所有的输出。这意味着</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="pytest" scheme="http://yoursite.com/tags/pytest/"/>
    
  </entry>
  
  <entry>
    <title>llm ollama</title>
    <link href="http://yoursite.com/2024/04/22/llm%20ollama/"/>
    <id>http://yoursite.com/2024/04/22/llm%20ollama/</id>
    <published>2024-04-22T08:31:01.000Z</published>
    <updated>2024-04-22T08:31:11.318Z</updated>
    
    
    
    
    <category term="llm" scheme="http://yoursite.com/categories/llm/"/>
    
    
    <category term="ollama" scheme="http://yoursite.com/tags/ollama/"/>
    
  </entry>
  
  <entry>
    <title>python fire</title>
    <link href="http://yoursite.com/2024/04/15/python%20pkg%20fire/"/>
    <id>http://yoursite.com/2024/04/15/python%20pkg%20fire/</id>
    <published>2024-04-15T04:02:38.000Z</published>
    <updated>2024-04-15T04:02:44.134Z</updated>
    
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="fire" scheme="http://yoursite.com/tags/fire/"/>
    
  </entry>
  
  <entry>
    <title>github copilot</title>
    <link href="http://yoursite.com/2024/03/13/github%20copilot/"/>
    <id>http://yoursite.com/2024/03/13/github%20copilot/</id>
    <published>2024-03-13T02:00:52.000Z</published>
    <updated>2024-03-13T03:03:26.175Z</updated>
    
    <content type="html"><![CDATA[<h1 id="keywords"><a href="#keywords" class="headerlink" title="keywords"></a>keywords</h1><ul><li><p>提示内容写入 ➡️</p></li><li><p>下一个提示 <code>option + ]</code>，上一个提示 <code>option + [</code></p></li><li><p>接收一行<code>command + 右方向</code> ，多行 <code>control/fn + command + 右方向</code></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;keywords&quot;&gt;&lt;a href=&quot;#keywords&quot; class=&quot;headerlink&quot; title=&quot;keywords&quot;&gt;&lt;/a&gt;keywords&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;提示内容写入 ➡️&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下一个提示 &lt;cod</summary>
      
    
    
    
    <category term="github" scheme="http://yoursite.com/categories/github/"/>
    
    
    <category term="assistant" scheme="http://yoursite.com/tags/assistant/"/>
    
  </entry>
  
  <entry>
    <title>GPU learn</title>
    <link href="http://yoursite.com/2024/03/08/GPU%20learn/"/>
    <id>http://yoursite.com/2024/03/08/GPU%20learn/</id>
    <published>2024-03-08T02:08:49.000Z</published>
    <updated>2024-03-08T02:28:58.252Z</updated>
    
    <content type="html"><![CDATA[<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><ul><li><p>查看卡的数量</p><p><code>nvidia-smi -L</code></p></li><li><p>查看显卡上运行的程序，以及所占内存情况</p><p><code>nvidia-smi --query-compute-apps=pid,process_name,used_memory,gpu_uuid --format=csv</code></p></li><li><p>查看显卡所剩内存</p><p><code>nvidia-smi --query-gpu=memory.free --format=csv,noheader,nounits</code></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;命令&quot;&gt;&lt;a href=&quot;#命令&quot; class=&quot;headerlink&quot; title=&quot;命令&quot;&gt;&lt;/a&gt;命令&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;查看卡的数量&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nvidia-smi -L&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看显</summary>
      
    
    
    
    <category term="GPU" scheme="http://yoursite.com/categories/GPU/"/>
    
    
    <category term="learn" scheme="http://yoursite.com/tags/learn/"/>
    
  </entry>
  
  <entry>
    <title>python pydantic</title>
    <link href="http://yoursite.com/2024/03/05/python%20pkg%20pydantic/"/>
    <id>http://yoursite.com/2024/03/05/python%20pkg%20pydantic/</id>
    <published>2024-03-05T03:44:46.000Z</published>
    <updated>2024-04-16T06:22:49.151Z</updated>
    
    <content type="html"><![CDATA[<h2 id="model-validator"><a href="#model-validator" class="headerlink" title="model_validator"></a>model_validator</h2><blockquote><p><code>model_validator</code> 是 Pydantic 库提供的一个装饰器，用于定义模型验证器函数。模型验证器函数是一种特殊的方法，用于在创建模型实例或更新模型属性时执行自定义的验证逻辑。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@model_validator(<span class="params">mode=<span class="string">&quot;after&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_engine_and_run_func</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> self.search_engine <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        self.search_engine = SearchEngine.from_search_config(self.config.search, proxy=self.config.proxy)</span><br><span class="line">    <span class="keyword">return</span> self</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@model_validator(<span class="params">mode=<span class="string">&quot;before&quot;</span></span>)</span></span><br><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_google</span>(<span class="params">cls, values: <span class="built_in">dict</span></span>) -&gt; <span class="built_in">dict</span>:</span></span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">其中values 是实例化对象的所有参数</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;model-validator&quot;&gt;&lt;a href=&quot;#model-validator&quot; class=&quot;headerlink&quot; title=&quot;model_validator&quot;&gt;&lt;/a&gt;model_validator&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="pydantic" scheme="http://yoursite.com/tags/pydantic/"/>
    
  </entry>
  
  <entry>
    <title>llm agent</title>
    <link href="http://yoursite.com/2024/01/24/llm%20agent/"/>
    <id>http://yoursite.com/2024/01/24/llm%20agent/</id>
    <published>2024-01-24T04:21:30.000Z</published>
    <updated>2024-03-12T02:09:24.219Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Agent = Large Language Model (LLM) + Observation + Thought + Action + Memory</p><p>MultiAgent = Agents + Environment + Standard Operating Procedure (SOP) + Communication + Economy</p><p>ReAct<a href="https://learnprompting.org/zh-Hans/docs/advanced_applications/react#fn-1">1</a>(reason, act) 是一种使用自然语言推理解决复杂任务的语言模型范例，ReAct旨在用于允许LLM执行某些操作的任务</p></blockquote><hr><p><strong>reference</strong></p><ul><li><a href="https://www.ionio.ai/blog/what-is-llm-agent-ultimate-guide-to-llm-agent-with-technical-breakdown">https://www.ionio.ai/blog/what-is-llm-agent-ultimate-guide-to-llm-agent-with-technical-breakdown</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Agent = Large Language Model (LLM) + Observation + Thought + Action + Memory&lt;/p&gt;
&lt;p&gt;MultiAgent = Agents + Environment + Stan</summary>
      
    
    
    
    <category term="llm" scheme="http://yoursite.com/categories/llm/"/>
    
    
    <category term="agent" scheme="http://yoursite.com/tags/agent/"/>
    
  </entry>
  
  <entry>
    <title>raycast awesome</title>
    <link href="http://yoursite.com/2024/01/22/raycast/"/>
    <id>http://yoursite.com/2024/01/22/raycast/</id>
    <published>2024-01-22T05:20:28.000Z</published>
    <updated>2024-03-01T03:46:06.585Z</updated>
    
    <content type="html"><![CDATA[<h2 id="extension"><a href="#extension" class="headerlink" title="extension"></a>extension</h2><h2 id="cake"><a href="#cake" class="headerlink" title="cake"></a>cake</h2><ul><li><p>庆祝彩纸</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confetti</span><br></pre></td></tr></table></figure></li><li><p>弹跳窗口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toggle Bounce Animation</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;extension&quot;&gt;&lt;a href=&quot;#extension&quot; class=&quot;headerlink&quot; title=&quot;extension&quot;&gt;&lt;/a&gt;extension&lt;/h2&gt;&lt;h2 id=&quot;cake&quot;&gt;&lt;a href=&quot;#cake&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
    <category term="raycast" scheme="http://yoursite.com/tags/raycast/"/>
    
  </entry>
  
  <entry>
    <title>keyboard</title>
    <link href="http://yoursite.com/2024/01/19/keyboards/"/>
    <id>http://yoursite.com/2024/01/19/keyboards/</id>
    <published>2024-01-19T05:58:08.000Z</published>
    <updated>2024-03-13T03:10:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="niz-plum"><a href="#niz-plum" class="headerlink" title="niz plum"></a>niz plum</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对照</span><br><span class="line">ctrl -&gt; control</span><br><span class="line">win/lock -&gt; option</span><br><span class="line">alt -&gt; command</span><br></pre></td></tr></table></figure><ul><li><p>锁定键盘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">右Fn + Esc</span><br></pre></td></tr></table></figure></li><li><p>电源与蓝牙切换</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fn + F11键</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>屏幕移动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl + win(option)</span><br></pre></td></tr></table></figure></li><li><p>win / alt 按键切换 （匹配win/mac系统）</p><p>```<br>Fn + Alt 三秒</p></li></ul><hr><ul><li><p>reference</p><p><a href="https://blog.csdn.net/qq_43528451/article/details/113357550">https://blog.csdn.net/qq_43528451/article/details/113357550</a></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;niz-plum&quot;&gt;&lt;a href=&quot;#niz-plum&quot; class=&quot;headerlink&quot; title=&quot;niz plum&quot;&gt;&lt;/a&gt;niz plum&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t</summary>
      
    
    
    
    <category term="keyboard" scheme="http://yoursite.com/categories/keyboard/"/>
    
    
    <category term="tool" scheme="http://yoursite.com/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>finite state machine</title>
    <link href="http://yoursite.com/2024/01/19/finite%20state%20machine/"/>
    <id>http://yoursite.com/2024/01/19/finite%20state%20machine/</id>
    <published>2024-01-19T03:13:16.000Z</published>
    <updated>2024-05-28T10:02:45.542Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>The FSM can change from one state to another in response to some inputs; the change from one state to another is called a <em>transition</em>.</p></blockquote><p><img src="./images/fsm/Automata_theory.png"></p><hr><p><strong>reference</strong></p><ul><li><a href="https://en.wikipedia.org/wiki/Finite-state_machine">https://en.wikipedia.org/wiki/Finite-state_machine</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;The FSM can change from one state to another in response to some inputs; the change from one state to another is called a &lt;e</summary>
      
    
    
    
    <category term="fsm" scheme="http://yoursite.com/categories/fsm/"/>
    
    
    <category term="fsm" scheme="http://yoursite.com/tags/fsm/"/>
    
  </entry>
  
  <entry>
    <title>openai learn</title>
    <link href="http://yoursite.com/2024/01/19/openai%20learn/"/>
    <id>http://yoursite.com/2024/01/19/openai%20learn/</id>
    <published>2024-01-19T02:07:04.000Z</published>
    <updated>2024-03-12T02:07:10.964Z</updated>
    
    <content type="html"><![CDATA[<h1 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h1><h1 id="request"><a href="#request" class="headerlink" title="request"></a>request</h1><h3 id="conversion"><a href="#conversion" class="headerlink" title="conversion"></a>conversion</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl POST https://chat.openai.com/backend-api/conversation</span><br></pre></td></tr></table></figure></li><li><p>payload</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;action&quot;</span>: <span class="string">&quot;next&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;messages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;aaa25811-d62c-4f23-963a-77c6eb90b899&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;content_type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;parts&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;你是如何带上上下文进行问答的，用python代码说下示例&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;metadata&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;conversation_id&quot;</span>: <span class="string">&quot;0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parent_message_id&quot;</span>: <span class="string">&quot;36d4ff94-fb3f-4f9b-beeb-d9c93f5752fe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;text-davinci-002-render-sha&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;timezone_offset_min&quot;</span>: <span class="number">-480</span>,</span><br><span class="line">  <span class="attr">&quot;suggestions&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;history_and_training_disabled&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;arkose_token&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">&quot;conversation_mode&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;primary_assistant&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;force_paragen&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;force_rate_limit&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ces-v1-t"><a href="#ces-v1-t" class="headerlink" title="ces/v1/t"></a>ces/v1/t</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chat.openai.com/ces/v1/t</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-01-19T08:35:53.805Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;integrations&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;Segment.io&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;userId&quot;</span>: <span class="string">&quot;user-EyJTf0sEV6sYCFhgOwqCHGD2&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;anonymousId&quot;</span>: <span class="string">&quot;dafc8561-54d1-4cb8-9cdf-91e5e4f7162e&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;event&quot;</span>: <span class="string">&quot;View Template Prompt Ignore Suggestions&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;track&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;origin&quot;</span>: <span class="string">&quot;chat&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;openai_app&quot;</span>: <span class="string">&quot;API&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;context&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;page&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;referrer&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;search&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;feel&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://chat.openai.com/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;userAgent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;locale&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;library&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;analytics.js&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;npm:next-1.56.0&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;userAgentData&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;brands&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Not_A Brand&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;8&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Chromium&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;120&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Google Chrome&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;120&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;mobile&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;platform&quot;</span>: <span class="string">&quot;macOS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;messageId&quot;</span>: <span class="string">&quot;ajs-next-c0f7b6265ed3eab440b0d44f21f53ffa&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;sentAt&quot;</span>: <span class="string">&quot;2024-01-19T08:35:54.068Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bundled&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;Segment.io&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;unbundled&quot;</span>: [],</span><br><span class="line">    <span class="attr">&quot;bundledIds&quot;</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="rgstr"><a href="#rgstr" class="headerlink" title="rgstr"></a>rgstr</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://events.statsigapi.net/v1/rgstr</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;events&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;eventName&quot;</span>: <span class="string">&quot;chatgpt_prompt_ignore_suggestions&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;userID&quot;</span>: <span class="string">&quot;user-EyJTf0sEV6sYCFhgOwqCHGD2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;custom&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;is_paid&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">&quot;workspace_id&quot;</span>: <span class="string">&quot;b27c1f77-bb94-4e8f-a6d3-4b30a0eec927&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;locale&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;statsigEnvironment&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;tier&quot;</span>: <span class="string">&quot;production&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;value&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;metadata&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;time&quot;</span>: <span class="number">1705653353804</span>,</span><br><span class="line">      <span class="attr">&quot;statsigMetadata&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;currentPage&quot;</span>: <span class="string">&quot;https://chat.openai.com/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;statsigMetadata&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;sdkType&quot;</span>: <span class="string">&quot;js-client&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;sdkVersion&quot;</span>: <span class="string">&quot;4.39.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;stableID&quot;</span>: <span class="string">&quot;f0eaa0cd-f15f-4d71-ab51-8a91e92aea53&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="backend-lat-r"><a href="#backend-lat-r" class="headerlink" title="backend/lat/r"></a>backend/lat/r</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chat.openai.com/backend-api/lat/r</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;server_request_id&quot;</span>: <span class="string">&quot;847dbf366a92408c-SIN&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;text-davinci-002-render-sha&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;preflight_time_ms&quot;</span>: <span class="number">0.09999990463256836</span>,</span><br><span class="line">  <span class="attr">&quot;count_tokens&quot;</span>: <span class="number">472</span>,</span><br><span class="line">  <span class="attr">&quot;ts_first_token_ms&quot;</span>: <span class="number">1548.7000000476837</span>,</span><br><span class="line">  <span class="attr">&quot;ts_max_token_time_ms&quot;</span>: <span class="number">764</span>,</span><br><span class="line">  <span class="attr">&quot;ts_mean_token_without_first_ms&quot;</span>: <span class="number">30.007855625922005</span>,</span><br><span class="line">  <span class="attr">&quot;ts_median_token_without_first_ms&quot;</span>: <span class="number">21.799999952316284</span>,</span><br><span class="line">  <span class="attr">&quot;ts_min_token_time_ms&quot;</span>: <span class="number">0.09999990463256836</span>,</span><br><span class="line">  <span class="attr">&quot;ts_p95_token_without_first_ms&quot;</span>: <span class="number">88.99999988079071</span>,</span><br><span class="line">  <span class="attr">&quot;ts_p99_token_without_first_ms&quot;</span>: <span class="number">139.65999991893773</span>,</span><br><span class="line">  <span class="attr">&quot;ts_std_dev_token_ms&quot;</span>: <span class="number">44.98320283392762</span>,</span><br><span class="line">  <span class="attr">&quot;ts_total_request_ms&quot;</span>: <span class="number">15695.399999856949</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="client-chat-completions-create"><a href="#client-chat-completions-create" class="headerlink" title="client.chat.completions.create"></a>client.chat.completions.create</h2><ul><li><p>request</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">response = client.chat.completions.create(</span><br><span class="line">           model=<span class="string">&quot;gpt-3.5-turbo-1106&quot;</span>,</span><br><span class="line">           messages=[</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>,</span><br><span class="line">                   <span class="attr">&quot;content&quot;</span>: prompt_str,</span><br><span class="line">               &#125;,</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">                   <span class="attr">&quot;content&quot;</span>: user_input.question,</span><br><span class="line">               &#125;,</span><br><span class="line">           ],</span><br><span class="line">       )</span><br></pre></td></tr></table></figure></li><li><p>response</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;chatcmpl-8ify2KU1ANzQPQyD8WVMp6rZWgYtj&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;choices&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;finish_reason&quot;</span>: <span class="string">&quot;stop&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;index&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;logprobs&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;function_call&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;tool_calls&quot;</span>: <span class="literal">null</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;created&quot;</span>: <span class="number">1705658446</span>,</span><br><span class="line">    <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;gpt-3.5-turbo-1106&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;chat.completion&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;system_fingerprint&quot;</span>: <span class="string">&quot;fp_c596c86df9&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;usage&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;completion_tokens&quot;</span>: <span class="number">51</span>,</span><br><span class="line">        <span class="attr">&quot;prompt_tokens&quot;</span>: <span class="number">1068</span>,</span><br><span class="line">        <span class="attr">&quot;total_tokens&quot;</span>: <span class="number">1119</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;UI&quot;&gt;&lt;a href=&quot;#UI&quot; class=&quot;headerlink&quot; title=&quot;UI&quot;&gt;&lt;/a&gt;UI&lt;/h1&gt;&lt;h1 id=&quot;request&quot;&gt;&lt;a href=&quot;#request&quot; class=&quot;headerlink&quot; title=&quot;request&quot;&gt;&lt;/</summary>
      
    
    
    
    <category term="fragment" scheme="http://yoursite.com/categories/fragment/"/>
    
    
    <category term="snippet" scheme="http://yoursite.com/tags/snippet/"/>
    
  </entry>
  
  <entry>
    <title>llm snippet</title>
    <link href="http://yoursite.com/2024/01/10/llm%20snippet/"/>
    <id>http://yoursite.com/2024/01/10/llm%20snippet/</id>
    <published>2024-01-10T07:03:53.000Z</published>
    <updated>2024-03-12T02:09:20.031Z</updated>
    
    <content type="html"><![CDATA[<h2 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h2><ul><li>大模型往往含有大量的参数和复杂的神经网络结构，需要高度的并行处理能力和大的内存带宽来有效地训练和运行。GPU在这些方面的优势让它成为运行大型AI模型的首选硬件。但这不意味着CPU完全无法运行这些模型，只是相对来说CPU运行起来效率低，可能会非常慢，因此在实际应用中通常选择GPU来进行深度学习任务。</li></ul><h2 id="Fine-tuning-vs-Embedding"><a href="#Fine-tuning-vs-Embedding" class="headerlink" title="Fine-tuning vs Embedding"></a>Fine-tuning vs Embedding</h2><ul><li>If you are trying to “teach” the model new information, embeddings is the way to go. If you want to change the structure or way it response, then use fine-tuning.</li></ul><hr><ul><li><strong>Fine-tuning:</strong> Teach the model <em>how</em> to answer a question (e.g. structure/format, personality, etc)</li><li><strong>Embedding:</strong> Provide the model with new/specific information with which to answer questions.</li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;GPU&quot;&gt;&lt;a href=&quot;#GPU&quot; class=&quot;headerlink&quot; title=&quot;GPU&quot;&gt;&lt;/a&gt;GPU&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;大模型往往含有大量的参数和复杂的神经网络结构，需要高度的并行处理能力和大的内存带宽来有效地训练和运行。GPU在这些方面的</summary>
      
    
    
    
    <category term="llm" scheme="http://yoursite.com/categories/llm/"/>
    
    
    <category term="sinppet" scheme="http://yoursite.com/tags/sinppet/"/>
    
  </entry>
  
  <entry>
    <title>jupyter</title>
    <link href="http://yoursite.com/2024/01/09/python%20jupyter/"/>
    <id>http://yoursite.com/2024/01/09/python%20jupyter/</id>
    <published>2024-01-09T03:48:17.000Z</published>
    <updated>2024-02-23T01:45:33.679Z</updated>
    
    <content type="html"><![CDATA[<h2 id="魔法指令"><a href="#魔法指令" class="headerlink" title="魔法指令"></a>魔法指令</h2><table><thead><tr><th>魔法指令</th><th>功能说明</th></tr></thead><tbody><tr><td><code>%pwd</code></td><td>查看当前工作目录</td></tr><tr><td><code>%ls</code></td><td>列出当前或指定文件夹下的内容</td></tr><tr><td><code>%cat</code></td><td>查看指定文件的内容</td></tr><tr><td><code>%hist</code></td><td>查看输入历史</td></tr><tr><td><code>%matplotlib inline</code></td><td>设置在页面中嵌入matplotlib输出的统计图表</td></tr><tr><td><code>%config Inlinebackend.figure_format=&#39;svg&#39;</code></td><td>设置统计图表使用SVG格式（矢量图）</td></tr><tr><td><code>%run</code></td><td>运行指定的程序</td></tr><tr><td><code>%load</code></td><td>加载指定的文件到单元格中</td></tr><tr><td><code>%quickref</code></td><td>显示IPython的快速参考</td></tr><tr><td><code>%timeit</code></td><td>多次运行代码并统计代码执行时间</td></tr><tr><td><code>%prun</code></td><td>用<code>cProfile.run</code>运行代码并显示分析器的输出</td></tr><tr><td><code>%who</code> / <code>%whos</code></td><td>显示命名空间中的变量</td></tr><tr><td><code>%xdel</code></td><td>删除一个对象并清理所有对它的引用</td></tr></tbody></table><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><p>JupyterLab 的快捷键可以分为<strong>命令模式</strong>下的快捷键和<strong>编辑模式</strong>下的快捷键，</p><p>所谓编辑模式就是处于输入代码或撰写文档状态的模式，在编辑模式下按<code>Esc</code>可以回到命令模式，在命令模式下按<code>Enter</code>可以进入编辑模式。</p><ul><li>命令模式下的快捷键：</li></ul><table><thead><tr><th>快捷键</th><th>功能说明</th></tr></thead><tbody><tr><td><code>Alt</code> + <code>Enter</code></td><td>运行当前单元格并在下面插入新的单元格</td></tr><tr><td><code>Shift</code> + <code>Enter</code></td><td>运行当前单元格并选中下方的单元格</td></tr><tr><td><code>Ctrl</code> + <code>Enter</code></td><td>运行当前单元格</td></tr><tr><td><code>j</code> / <code>k</code>、<code>Shift</code> + <code>j</code> / <code>Shift</code> + <code>k</code></td><td>选中下方/上方单元格、连续选中下方/上方单元格</td></tr><tr><td><code>a</code> / <code>b</code></td><td>在下方/上方插入新的单元格</td></tr><tr><td><code>c</code> / <code>x</code></td><td>复制单元格 / 剪切单元格</td></tr><tr><td><code>v</code> / <code>Shift</code> + <code>v</code></td><td>在下方/上方粘贴单元格</td></tr><tr><td><code>dd</code> / <code>z</code></td><td>删除单元格 / 恢复删除的单元格</td></tr><tr><td><code>Shift</code> + <code>l</code></td><td>显示或隐藏当前/所有单元格行号</td></tr><tr><td><code>Space</code> / <code>Shift</code> + <code>Space</code></td><td>向下/向上滚动页面</td></tr></tbody></table><ul><li>编辑模式下的快捷键：</li></ul><table><thead><tr><th>快捷键</th><th>功能说明</th></tr></thead><tbody><tr><td><code>Shift</code> + <code>Tab</code></td><td>获得提示信息</td></tr><tr><td><code>Ctrl</code> + <code>]</code>/ <code>Ctrl</code> + <code>[</code></td><td>增加/减少缩进</td></tr><tr><td><code>Alt</code> + <code>Enter</code></td><td>运行当前单元格并在下面插入新的单元格</td></tr><tr><td><code>Shift</code> + <code>Enter</code></td><td>运行当前单元格并选中下方的单元格</td></tr><tr><td><code>Ctrl</code> + <code>Enter</code></td><td>运行当前单元格</td></tr><tr><td><code>Ctrl</code> + <code>Left</code> / <code>Right</code></td><td>光标移到行首/行尾</td></tr><tr><td><code>Ctrl</code> + <code>Up</code> / <code>Down</code></td><td>光标移动代码开头/结尾处</td></tr><tr><td><code>Up</code> / <code>Down</code></td><td>光标上移/下移一行或移到上/下一个单元格</td></tr></tbody></table><blockquote><p><strong>说明</strong>：对于 macOS 系统可以将<code>Alt</code>键替换成<code>Option</code>键，将<code>Ctrl</code>键替换成<code>Command</code>键。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;魔法指令&quot;&gt;&lt;a href=&quot;#魔法指令&quot; class=&quot;headerlink&quot; title=&quot;魔法指令&quot;&gt;&lt;/a&gt;魔法指令&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;魔法指令&lt;/th&gt;
&lt;th&gt;功能说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;</summary>
      
    
    
    
    <category term="jupyter" scheme="http://yoursite.com/categories/jupyter/"/>
    
    
    <category term="ide" scheme="http://yoursite.com/tags/ide/"/>
    
  </entry>
  
  <entry>
    <title>deep learning</title>
    <link href="http://yoursite.com/2024/01/09/deep%20learning/"/>
    <id>http://yoursite.com/2024/01/09/deep%20learning/</id>
    <published>2024-01-09T02:56:34.000Z</published>
    <updated>2024-01-09T02:56:35.755Z</updated>
    
    
    
    
    <category term="deep learning" scheme="http://yoursite.com/categories/deep-learning/"/>
    
    
    <category term="learn" scheme="http://yoursite.com/tags/learn/"/>
    
  </entry>
  
  <entry>
    <title>java jenv</title>
    <link href="http://yoursite.com/2023/12/29/java%20jenv/"/>
    <id>http://yoursite.com/2023/12/29/java%20jenv/</id>
    <published>2023-12-29T08:50:48.000Z</published>
    <updated>2023-12-29T08:52:24.760Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Jenv"><a href="#Jenv" class="headerlink" title="Jenv"></a>Jenv</h2><h3 id="列出已安装的Java版本："><a href="#列出已安装的Java版本：" class="headerlink" title="列出已安装的Java版本："></a><strong>列出已安装的Java版本：</strong></h3><p>运行以下命令列出已安装的Java版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv versions</span><br></pre></td></tr></table></figure><p>这会显示所有已安装的Java版本。</p><h3 id="5-设置全局Java版本："><a href="#5-设置全局Java版本：" class="headerlink" title="5. 设置全局Java版本："></a>5. <strong>设置全局Java版本：</strong></h3><p>你可以选择设置一个全局的Java版本，该版本会被默认使用。运行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv global &lt;jdk_version&gt;</span><br></pre></td></tr></table></figure><p>将 <code>&lt;jdk_version&gt;</code> 替换为你想要设置为默认的Java版本。</p><h3 id="6-设置项目特定的Java版本："><a href="#6-设置项目特定的Java版本：" class="headerlink" title="6. 设置项目特定的Java版本："></a>6. <strong>设置项目特定的Java版本：</strong></h3><p>如果你想在特定的项目中使用不同的Java版本，可以进入到项目的目录，然后运行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv local &lt;jdk_version&gt;</span><br></pre></td></tr></table></figure><p>这会在项目目录下创建一个 <code>.java-version</code> 文件，指定项目特定的Java版本。</p><h3 id="7-验证Java版本："><a href="#7-验证Java版本：" class="headerlink" title="7. 验证Java版本："></a>7. <strong>验证Java版本：</strong></h3><p>在终端中运行以下命令验证当前系统使用的Java版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>确保输出显示的是你所期望的Java版本信息。</p><p>通过以上步骤，你可以使用 <code>jenv</code> 管理多个Java版本，并且在不同的项目中切换使用不同的Java版本。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Jenv&quot;&gt;&lt;a href=&quot;#Jenv&quot; class=&quot;headerlink&quot; title=&quot;Jenv&quot;&gt;&lt;/a&gt;Jenv&lt;/h2&gt;&lt;h3 id=&quot;列出已安装的Java版本：&quot;&gt;&lt;a href=&quot;#列出已安装的Java版本：&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
    <category term="jenv" scheme="http://yoursite.com/tags/jenv/"/>
    
  </entry>
  
  <entry>
    <title>python ASGI</title>
    <link href="http://yoursite.com/2023/12/19/python%20ASGI/"/>
    <id>http://yoursite.com/2023/12/19/python%20ASGI/</id>
    <published>2023-12-18T17:14:27.000Z</published>
    <updated>2024-01-24T02:30:37.197Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>the Asynchronous Server Gateway Interface.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;the Asynchronous Server Gateway Interface.&lt;/p&gt;
&lt;/blockquote&gt;
</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="ASGI" scheme="http://yoursite.com/tags/ASGI/"/>
    
  </entry>
  
  <entry>
    <title>python conda</title>
    <link href="http://yoursite.com/2023/12/18/python%20env%20conda/"/>
    <id>http://yoursite.com/2023/12/18/python%20env%20conda/</id>
    <published>2023-12-18T06:10:58.000Z</published>
    <updated>2024-01-29T07:39:18.939Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>conda相当于虚拟机，在里面安装python和依赖</p></blockquote><ul><li><p>查看环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure></li><li><p>新建环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name your_env_name</span><br></pre></td></tr></table></figure><p>指定python版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name xxx python=3.10</span><br></pre></td></tr></table></figure></li><li><p>激活环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate xxx</span><br></pre></td></tr></table></figure></li><li><p>删除环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name xxx --all</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;conda相当于虚拟机，在里面安装python和依赖&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;查看环境&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="conda" scheme="http://yoursite.com/tags/conda/"/>
    
  </entry>
  
  <entry>
    <title>SSO (single sign-on) keycloak</title>
    <link href="http://yoursite.com/2023/12/16/SSO%20keycloak/"/>
    <id>http://yoursite.com/2023/12/16/SSO%20keycloak/</id>
    <published>2023-12-16T02:57:00.000Z</published>
    <updated>2024-01-16T09:34:07.931Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> SSO (single sign-on)</p></blockquote><blockquote><p><a href="https://ninjaauth.com/sso-single-sign-on">https://ninjaauth.com/sso-single-sign-on</a></p></blockquote><h2 id="keycloak"><a href="#keycloak" class="headerlink" title="keycloak"></a>keycloak</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul><li>需要jdk9以上环境</li></ul><h3 id="config-server"><a href="#config-server" class="headerlink" title="config server"></a>config server</h3><ul><li><p>编辑 <code>/conf/keycloak.conf </code>，配置mysql连接信息 (mysql创建keycloak库)</p></li><li><p>配置 <code>admin cli </code>环境变量 （方便直接命令操作，等同于界面操作）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> keycloak</span></span><br><span class="line">export KCADM=&quot;/Users/dongwei/Applications/keycloak-23.0.3/bin/kcadm.sh&quot;</span><br><span class="line">export HOST_FOR_KCADM=localhost</span><br></pre></td></tr></table></figure></li></ul><h3 id="bootstrap"><a href="#bootstrap" class="headerlink" title="bootstrap"></a>bootstrap</h3><ul><li><p>首次启动</p><p><code>KEYCLOAK_ADMIN=admin KEYCLOAK_ADMIN_PASSWORD=xxxxxx ./bin/kc.sh start-dev</code></p></li><li><p>后续启动</p><p><code>./bin/kc.sh start-dev</code></p></li><li><p>生效 <code>KCADM</code></p><p><code>$KCADM config credentials --server http://localhost:8080 --realm master --user admin</code></p><p>提示输入密码即可 (1sou2sou)</p></li></ul><p>​        验证 <code>$KCADM get serverinfo</code></p><h3 id="config-realm"><a href="#config-realm" class="headerlink" title="config realm"></a>config realm</h3><ul><li><p>创建新的realm</p><p><code>$KCADM create realms -s realm=&quot;jarvex&quot; -s enabled=true</code></p></li></ul><h3 id="config-clients"><a href="#config-clients" class="headerlink" title="config clients"></a>config clients</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">KCADM create clients -r jarvex -s clientId=<span class="string">&quot;jarvex-client-test-1&quot;</span> -s enabled=<span class="literal">true</span> -s name=<span class="string">&quot;test Client 1&quot;</span> -s protocol=openid-connect -s publicClient=<span class="literal">true</span> -s standardFlowEnabled=<span class="literal">true</span> -s <span class="string">&#x27;redirectUris=[&quot;http://127.0.0.1:8001/app/*&quot;]&#x27;</span> -s baseUrl=<span class="string">&quot;http://127.0.0.1:8001/app/&quot;</span> -s <span class="string">&#x27;webOrigins=[&quot;*&quot;]&#x27;</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt; SSO (single sign-on)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://ninjaauth.com/sso-single-sign-on&quot;&gt;https://ninjaauth</summary>
      
    
    
    
    <category term="sso" scheme="http://yoursite.com/categories/sso/"/>
    
    
    <category term="keycloak" scheme="http://yoursite.com/tags/keycloak/"/>
    
  </entry>
  
  <entry>
    <title>python auth - fastapi jwt auth</title>
    <link href="http://yoursite.com/2023/12/15/python%20auth%20-%20fastapi%20jwt%20auth/"/>
    <id>http://yoursite.com/2023/12/15/python%20auth%20-%20fastapi%20jwt%20auth/</id>
    <published>2023-12-15T02:46:58.000Z</published>
    <updated>2023-12-15T02:58:11.036Z</updated>
    
    <content type="html"><![CDATA[<p>在 FastAPI JWT Auth 中，Refresh Token（刷新令牌）和 Access Token（访问令牌）是两种不同的令牌，用于实现认证和授权机制。</p><ol><li>Access Token（访问令牌）：Access Token 是一个短期的令牌，用于验证用户的身份并授权用户访问受保护的资源。Access Token 是通过用户提供的凭证（如用户名和密码）进行身份验证后生成的，通常具有较短的有效期（例如几分钟或几小时）。客户端在每次请求受保护的资源时，需要在请求的头部或请求参数中携带 Access Token，以证明其有权访问该资源。</li><li>Refresh Token（刷新令牌）：Refresh Token 是一个长期有效的令牌，用于在 Access Token 过期后重新获取新的 Access Token。当 Access Token 过期时，客户端可以使用 Refresh Token 向服务器发送请求来获取新的 Access Token，而无需重新提供用户名和密码等凭证。通常情况下，Refresh Token 的有效期要比 Access Token 更长。</li></ol><p>使用 Refresh Token 的主要目的是增强安全性和减少频繁的身份验证操作。通过将 Access Token 的有效期设置较短，可以降低令牌泄露的风险。当 Access Token 过期时，使用 Refresh Token 获取新的 Access Token，这样可以减少频繁地要求用户重新提供凭证的情况。</p><p>一般的流程是，客户端在进行身份验证后会收到一个 Access Token 和一个 Refresh Token。客户端使用 Access Token 来访问受保护的资源，当 Access Token 过期时，客户端使用 Refresh Token 向服务器请求新的 Access Token。</p><p>FastAPI JWT Auth 提供了相应的功能和装饰器来处理 Access Token 和 Refresh Token 的生成、验证和刷新等操作，以方便实现 JWT 认证和授权。</p><p>refresh tokens <strong>cannot access</strong> an endpoint that is protected with <strong>jwt_required()</strong>, <strong>jwt_optional()</strong>, and <strong>fresh_jwt_required()</strong> </p><p>access tokens <strong>cannot access</strong> an endpoint that is protected with <strong>jwt_refresh_token_required()</strong>.</p><h2 id="Refresh-Tokens"><a href="#Refresh-Tokens" class="headerlink" title="Refresh Tokens"></a>Refresh Tokens</h2><p>These are long-lived tokens which can be used to create a new access tokens once an old access token has expired. </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在 FastAPI JWT Auth 中，Refresh Token（刷新令牌）和 Access Token（访问令牌）是两种不同的令牌，用于实现认证和授权机制。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Access Token（访问令牌）：Access Token 是一个短期的令牌，用</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="auth" scheme="http://yoursite.com/tags/auth/"/>
    
  </entry>
  
</feed>
