<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>docker image mysql</title>
      <link href="/2021/12/17/docker%20image%20mysql/"/>
      <url>/2021/12/17/docker%20image%20mysql/</url>
      <content type="html"><![CDATA[<h2 id="mysqlé•œåƒåˆ¶ä½œ"><a href="#mysqlé•œåƒåˆ¶ä½œ" class="headerlink" title="mysqlé•œåƒåˆ¶ä½œ"></a>mysqlé•œåƒåˆ¶ä½œ</h2><ol><li><p>éœ€è¦å¤‡ä»½å½“å‰éœ€è¦åŒæ­¥çš„å…¨é‡æ•°æ®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it dlabel_mysql mysqldump -uroot -p123456 dls &gt; /path/to/backup.sql</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>å…¶ä¸­dlabel_mysqlï¼Œæ˜¯åœ¨ç¬¬äºŒæ­¥ä¸­è®¾ç½®çš„nameçš„åç§°</p><p>/path/to/backup.sqlæ˜¯å¯¼å‡ºsqlçš„åœ°å€è·¯å¾„ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒï¼Œéœ€è¦è‡ªè¡Œæ›´æ”¹</p><p>å‡å®šä»¥ä¸‹æ“ä½œæ˜¯åœ¨/path/toçš„ç›®å½•ä¸‹</p></blockquote></li></ol><ol start="2"><li><p>åœ¨/path/toç›®å½•ä¸‹åˆ›å»ºDockerfileæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Derived from official mysql image (our base image)</span><br><span class="line">FROM mysql:5.7.30</span><br><span class="line"><span class="meta">#</span> Add the content of the sql-scripts/ directory to your image</span><br><span class="line"><span class="meta">#</span> All scripts in docker-entrypoint-initdb.d/ are automatically</span><br><span class="line"><span class="meta">#</span> executed during container startup</span><br><span class="line">COPY ./backup.sql /docker-entrypoint-initdb.d/</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„COPYæŒ‡ä»¤ä¸­ï¼Œbackup.sqléœ€è¦å’Œæ“ä½œ1ä¸­çš„å¯¼å‡ºæ–‡ä»¶åä¿æŒä¸€è‡´</p></blockquote></li><li><p>åˆ›å»ºé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dlabel:mysql20211216 .</span><br></pre></td></tr></table></figure><blockquote><p>dlabel:mysql20211216æ˜¯ REPOSITORY:TAGæ ¼å¼ï¼Œå¯è‡ªè¡Œæ›´æ”¹</p></blockquote></li><li><p>ç™»å½•è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login hostAddress</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºï¼Œè¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç Harbor12345</p></li><li><p>æ˜ å°„è¿œç¨‹ä»“åº“REPOSITORY:TAG</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag dlabel:mysql20211216 hostAddress/dlabel/service:mysql20211216</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­dlabel:mysql20211216å’Œæ“ä½œ3ä¸­ä¿æŒä¸€è‡´</p><p>hostAddress/dlabel/service:mysql20211216ï¼Œæ ¼å¼ä¸ºhostAddress/library/REPOSITORY:TAGï¼Œå…¶ä¸­å¯è‡ªè¡Œä¿®æ”¹service:mysql20211216åç§°</p></blockquote></li><li><p>æ¨é€å½“åœ°é•œåƒåˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push hostAddress/dlabel/service:mysql20211216</span><br></pre></td></tr></table></figure></li><li><p>ç™»å½•<strong><a href="http://hostAddress" target="_blank" rel="noopener">http://hostAddress</a></strong>æŸ¥çœ‹é•œåƒä¸Šä¼ æƒ…å†µ</p></li><li><p>åœ¨é•œåƒè¯¦æƒ…ç•Œé¢ï¼Œç‚¹å‡»â€œæ‹‰å–å‘½åâ€æŒ‰é’®è¿›è¡Œå‘½ä»¤å¤åˆ¶ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤å³å¯æ‹‰å–è¯¥é•œåƒ</p></li></ol>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker es</title>
      <link href="/2021/12/17/docker%20image%20es/"/>
      <url>/2021/12/17/docker%20image%20es/</url>
      <content type="html"><![CDATA[<blockquote><p>æ–‡ä¸­hostAddresséœ€è¦æ›¿æ¢å…·ä½“çš„ipåœ°å€</p></blockquote><h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><blockquote><p>æŸ¥çœ‹ç°æœ‰ç¯å¢ƒç›¸å…³å‚æ•°ulimit -a</p></blockquote><ul><li><p>è®¾ç½®æ–‡ä»¶å¥æŸ„æ•°ï¼Œåœ¨<strong>/etc/security/limits.conf</strong>ä¸­è®¾ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># End of file</span><br><span class="line">* hard nofile 65536</span><br><span class="line">* soft nofile 65536</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹max user processesè¿›ç¨‹æ•°ï¼Œåœ¨<strong>/etc/security/limits.conf</strong>ä¸­è®¾ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* soft nproc 65536</span><br><span class="line">* hard nproc 65536</span><br></pre></td></tr></table></figure></li><li><p>è°ƒæ•´vm.max_map_countçš„å¤§å°ï¼Œè¯¥å‚æ•°ä¼šé™åˆ¶ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰çš„VMA(è™šæ‹Ÿå†…å­˜åŒºåŸŸ)çš„æ•°é‡</p><p>é€šè¿‡ä¿®æ”¹<strong>/etc/sysctl.conf</strong>å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.max_map_count=655360</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ<code>sysctl -p</code></p></li><li><p>è°ƒæ•´stack sizeçš„å¤§å°ï¼ˆå¯é€‰ï¼‰ï¼Œåœ¨<strong>/etc/security/limits.conf</strong>ä¸­è®¾ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* soft stack 1024</span><br><span class="line">* hard stack 1024</span><br></pre></td></tr></table></figure></li></ul><h3 id="manual-init-data"><a href="#manual-init-data" class="headerlink" title="manual init data"></a>manual init data</h3><ul><li><p>create index</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H 'Content-Type: application/json' -d '@/data/es_mapping.json' -X PUT 'http://localhost:9200/indexName'</span><br></pre></td></tr></table></figure></li><li><p>import data</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H 'Content-Type: application/json' --data-binary '@/data/es_init_data.txt' 'http://localhost:9200/_bulk'</span><br></pre></td></tr></table></figure></li><li><p>æ‹‰å–è¿œç¨‹ä»“åº“é•œåƒæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d --name es_origin -e ES_JAVA_POTS="-Xms6g -Xmx6g" -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:7.16.1</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ¶ä½œelasticsearché•œåƒ"><a href="#åˆ¶ä½œelasticsearché•œåƒ" class="headerlink" title="åˆ¶ä½œelasticsearché•œåƒ"></a>åˆ¶ä½œelasticsearché•œåƒ</h3><ol><li>å¯¼å‡ºESçš„å·²æœ‰ç´¢å¼•å’Œæ•°æ®</li></ol><ul><li><p>ç¯å¢ƒå‡†å¤‡</p><ul><li>å®‰è£…nodejsï¼Œå®‰è£…æ–‡ä»¶åœ°å€<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">nodejs</a></li><li>å®‰è£…elasticdumpï¼Œå®‰è£…å‘½ä»¤<code>npm install -g elasticdump</code></li></ul></li><li><p>å¯¼å‡ºesç´¢å¼•æ–‡ä»¶<strong>es_mapping.json</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/$nodejs_home/lib/node_modules/elasticdump/bin/elasticdump \               --input=http://127.0.0.1:9200/indexName \</span><br><span class="line">  --output=/data/es_mapping.json \</span><br><span class="line">  --type=mapping</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š$nodejs_homeä»£è¡¨nodejsçš„å®‰è£…ç›®å½•</p></blockquote></li><li><p>å¯¼å‡ºesæ•°æ®<strong>es_init_data.txt</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/$nodejs_home/lib/node_modules/elasticdump/bin/elasticdump \           </span><br><span class="line">  --input=http://127.0.0.1:9200/indexName \</span><br><span class="line">  --output=/data/es_init_data.txt \</span><br><span class="line">  --searchBody '&#123;"query":&#123;"match_all":&#123; &#125;&#125;&#125;'</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><p>ç¼–å†™esæ•°æ®åˆå§‹åŒ–è„šæœ¬ <strong>initEs.sh</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>create index</span><br><span class="line">curl -H 'Content-Type: application/json' -d '@/data/es_mapping.json' -X PUT 'http://127.0.0.1:9200/indexName'</span><br><span class="line"><span class="meta">#</span>import data</span><br><span class="line">curl -H 'Content-Type: application/json' --data-binary '@/data/es_init_data.txt' 'http://127.0.0.1:9200/_bulk'</span><br></pre></td></tr></table></figure><blockquote><p>initEs.shæ–‡ä»¶åŒ1,2æ“ä½œä¸­çš„æ–‡ä»¶å­˜æ”¾è·¯å¾„ä¿æŒä¸€è‡´ï¼Œå‡æ”¾åœ¨/dataç›®å½•ä¸‹</p></blockquote></li><li><p>åœ¨/dataç›®å½•ä¸‹åˆ›å»ºDockerfileæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM elasticsearch:7.16.1</span><br><span class="line">COPY ./data/* /data/</span><br><span class="line">RUN chown -R elasticsearch:root /data </span><br><span class="line">USER elasticsearch</span><br><span class="line">RUN elasticsearch -E discovery.type=single-node -p /tmp/epid &amp; /bin/bash /data/wait-for-it.sh -t 0 localhost:9200 -- /data/initEs.sh; kill $(cat /tmp/epid) &amp;&amp; wait $(cat /tmp/epid); exit 0;</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>åˆ›å»ºé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dlabel:elasticsearch .</span><br></pre></td></tr></table></figure><blockquote><p>dlabel:esæ˜¯ REPOSITORY:TAGæ ¼å¼ï¼Œå¯è‡ªè¡Œæ›´æ”¹</p></blockquote></li><li><p>ç™»å½•è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login hostAddress</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºï¼Œè¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç Harbor12345</p></li><li><p>æ˜ å°„è¿œç¨‹ä»“åº“REPOSITORY:TAG</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag dlabel:elasticsearch hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­dlabel:elasticsearchå’Œæ“ä½œ3ä¸­ä¿æŒä¸€è‡´</p></blockquote></li><li><p>æ¨é€å½“åœ°é•œåƒåˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker compose</title>
      <link href="/2021/12/17/docker%20compose/"/>
      <url>/2021/12/17/docker%20compose/</url>
      <content type="html"><![CDATA[<h3 id="Docker-File-vs-Docker-Compose"><a href="#Docker-File-vs-Docker-Compose" class="headerlink" title="Docker File vs Docker Compose"></a>Docker File vs Docker Compose</h3><p>Dockerfile is whatâ€™s used to create a container image, and a Compose file is whatâ€™s used to deploy an instance of that image as a container.</p><blockquote><p>Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚</p></blockquote><h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4><p>Dockerfile the predecessor of a container image. You build an image from a Dockerfile. A typical Dockerfile contains special build instructions, commands like <code>RUN</code>, <code>ADD</code>, <code>COPY</code>, <code>ENTRYPOINT</code>, etc.</p><h4 id="Compose-file"><a href="#Compose-file" class="headerlink" title="Compose file"></a>Compose file</h4><p>Compose files are used in two types of deployments: in the non-cluster deployment with <code>docker-compose</code> and a cluster deployment with <code>docker swarm</code>.</p><p>Compose files are used in two types of deployments: in the non-cluster deployment with <code>docker-compose</code> and a cluster deployment with <code>docker swarm</code>.</p><p>To distinguish the two types, Iâ€™m going to address the compose file responsible for cluster deployment as stack files. Iâ€™ll talk about stack files in a moment.</p><p>Compose files are part of a tool called <code>docker-compose</code>. Itâ€™s a client application to the docker daemon server, kind of like the <code>docker</code> CLI client, but instead of typing the whole <code>run</code> commands every time, with <code>docker-compose</code> you can re-use the same YAML file over and over again, and deploy the same container with the same configuration as you did in the first time.</p><p>Itâ€™s more readable, more maintainable, more intuitive. A single compose file can contain multiple container deployment configurations.</p><ul><li><p>æ‰§è¡Œ<code>docker-compose up</code>ï¼ŒæŠ¥é”™</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Couldnâ€™t connect to Docker daemon at http+docker:<span class="comment">//localhost - is it running?</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>docker-compose.yml</code>ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.7"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  web:</span></span><br><span class="line"><span class="attr">    build:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"5000:5000"</span></span><br><span class="line"><span class="attr">  redis:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">"redis:alpine"</span></span><br></pre></td></tr></table></figure><ul><li><p>è§£å†³ï¼Œä½¿ç”¨sudoæƒé™</p><ol><li><p>Add user to docker group (if not already added)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure></li><li><p>create a symbolic link to /usr/bin using the following command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure></li><li><p>Restart docker service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure></li><li><p>execute</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up</span><br></pre></td></tr></table></figure></li></ol></li></ul></li></ul><p>è¿è¡Œdocker compose upæˆ–docker compose up -d(åå°è¿è¡Œ)è¿è¡Œæ‚¨çš„æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ <code>æ³¨æ„ï¼šæ¯æ¬¡ä¿®æ”¹ä»»ä¸€é…ç½®æ–‡ä»¶åï¼Œéƒ½è¦ä½¿ç”¨ docker-compose up --build é‡æ–°æ„å»º</code></p><blockquote><p>æœ‰äº†docker-composeï¼Œå½“æˆ‘ä»¬æƒ³å¯åŠ¨å¤šä¸ªæœåŠ¡æ—¶ï¼Œæ— éœ€å†ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œdocker runæ“ä½œï¼Œè€Œåªéœ€è¦ç¼–å†™docker-compose.ymlé…ç½®æ–‡ä»¶ï¼Œå³å¯ä¸€æ¬¡è¿è¡Œä½ çš„å…¨éƒ¨æœåŠ¡ã€‚</p></blockquote><hr><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>docker-compose build</td><td>(æ„å»ºymlä¸­æŸä¸ªæœåŠ¡çš„é•œåƒ)</td></tr><tr><td>docker-compose ps</td><td>(æŸ¥çœ‹å·²ç»å¯åŠ¨çš„æœåŠ¡çŠ¶æ€ï¼‰</td></tr><tr><td>docker-compose kill</td><td>(åœæ­¢æŸä¸ªæœåŠ¡ï¼‰</td></tr><tr><td>docker-compose logs</td><td>(å¯ä»¥æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„logï¼‰</td></tr><tr><td>docker-compose port</td><td>(æ‰“å°ç»‘å®šçš„public portï¼‰</td></tr><tr><td>docker-compose pull</td><td>(pullæœåŠ¡é•œåƒ)</td></tr><tr><td>docker-compose up</td><td>(å¯åŠ¨ymlå®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose stop</td><td>(åœæ­¢ymlä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose start</td><td>(å¯åŠ¨è¢«åœæ­¢çš„ymlä¸­çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose kill</td><td>(å¼ºè¡Œåœæ­¢ymlä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose rm</td><td>ï¼ˆåˆ é™¤ymlä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose restart</td><td>(é‡å¯ymlä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼‰</td></tr><tr><td>docker-compose scale</td><td>(æ‰©å±•æŸä¸ªæœåŠ¡çš„ä¸ªæ•°ï¼Œå¯ä»¥å‘ä¸Šæˆ–å‘ä¸‹ï¼‰</td></tr><tr><td>docker-compose version</td><td>ï¼ˆæŸ¥çœ‹composeçš„ç‰ˆæœ¬ï¼‰</td></tr></tbody></table><p>æ—¥å¿—è¾“å‡º  </p><p>ç»ˆç«¯è¾“å‡ºï¼š<code>docker-compose --verbose up $service_name</code></p><p>æˆ–è€…docker-compose.ymlé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stdin_open: true</span><br><span class="line">tty: true</span><br></pre></td></tr></table></figure><h3 id="é•œåƒé‡æ–°ç¼–è¯‘"><a href="#é•œåƒé‡æ–°ç¼–è¯‘" class="headerlink" title="é•œåƒé‡æ–°ç¼–è¯‘"></a>é•œåƒé‡æ–°ç¼–è¯‘</h3><p>å¦‚æœä¿®æ”¹äº† Dockerfileå†…å®¹é‡Œé¢ç›¸å…³çš„ä¿¡æ¯ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘é•œåƒï¼Œå¦‚æœä½¿ç”¨docker composeï¼Œåˆ™éœ€è¦ä½¿ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up --build</span><br></pre></td></tr></table></figure><h3 id="åå°è¿è¡Œ"><a href="#åå°è¿è¡Œ" class="headerlink" title="åå°è¿è¡Œ"></a>åå°è¿è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dockerFile</title>
      <link href="/2021/12/17/dockerFile/"/>
      <url>/2021/12/17/dockerFile/</url>
      <content type="html"><![CDATA[<ul><li><p><strong>RUN</strong> is executed while the image is being build</p><p>while <strong>ENTRYPOINT</strong> is executed after the image has been built.</p></li></ul>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker migration</title>
      <link href="/2021/12/14/docker%20migration/"/>
      <url>/2021/12/14/docker%20migration/</url>
      <content type="html"><![CDATA[<p>reference </p><p><a href="https://bobcares.com/blog/move-docker-container-to-another-host/" target="_blank" rel="noopener">5 ways to move Docker container to another host</a></p><p><a href="https://morioh.com/p/d8d9e7732952" target="_blank" rel="noopener">Build a Docker Image with MySQL Database</a></p><h2 id="Plan-A"><a href="#Plan-A" class="headerlink" title="Plan A"></a>Plan A</h2><h3 id="Step1-create-an-Image-From-a-Container"><a href="#Step1-create-an-Image-From-a-Container" class="headerlink" title="Step1    create an Image From a Container"></a>Step1    create an Image From a Container</h3><blockquote><p>Create a new image from a containerâ€™s changes</p><p><a href="https://docs.docker.com/engine/reference/commandline/commit/" target="_blank" rel="noopener">commit command</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><ul><li><p>options</p><p>| Name, shorthand    | Default | Description                                       |<br>| â€”â€”â€”â€”â€”â€” | â€”â€”- | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- |<br>| <code>--author</code> , <code>-a</code>  |         | Author (e.g., â€œwill brookâ€)                       |<br>| <code>--change</code> , <code>-c</code>  |         | Apply Dockerfile instruction to the created image |<br>| <code>--message</code> , <code>-m</code> |         | Commit message                                    |<br>| <code>--pause</code> , <code>-p</code>   | <code>true</code>  | Pause container during commit                     |</p></li></ul><h3 id="Step-2-export-the-image-to-a-file"><a href="#Step-2-export-the-image-to-a-file" class="headerlink" title="Step 2    export the image to a file"></a>Step 2    export the image to a file</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker save -o /path/to/your_image.tar your_image_name</span><br></pre></td></tr></table></figure><h3 id="Step-3-load-the-Docker-image-file"><a href="#Step-3-load-the-Docker-image-file" class="headerlink" title="Step 3 load the Docker image file"></a>Step 3 load the Docker image file</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker load -i your_image.tar</span><br></pre></td></tr></table></figure><hr><h2 id="Plan-B"><a href="#Plan-B" class="headerlink" title="Plan B"></a>Plan B</h2><h3 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>First save the new image by finding the container ID (using <a href="https://docs.docker.com/engine/reference/commandline/ps/" target="_blank" rel="noopener"><code>docker container ls</code></a>) and then committing it to a new image name. Note that only <code>a-z0-9-_.</code> are allowed when naming images:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> create image from container</span><br><span class="line">docker container commit c16378f943fe rhel-httpd:latest</span><br></pre></td></tr></table></figure><h3 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h3><p> tag the image with the host name or IP address, and the port of the registry:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> re-tag repository:tag info about image</span><br><span class="line">docker image tag rhel-httpd:latest registry-host:5000/myadmin/rhel-httpd:latest</span><br><span class="line">or</span><br><span class="line">docker tag 0e5574283393 registry-host:5000/myadmin/rhel-httpd:latest</span><br></pre></td></tr></table></figure><h3 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h3><p>log in from Docker client:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login &lt;harbor_address&gt;</span><br></pre></td></tr></table></figure><h3 id="Step-4"><a href="#Step-4" class="headerlink" title="Step 4"></a>Step 4</h3><p>push the image to the registry using the image ID. </p><p>In this example the registry is on host named <code>registry-host</code> and listening on port <code>5000</code>. (harboré»˜è®¤é…ç½®ç«¯å£80ï¼Œè¯¦è§harbor.yml)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> push repository:tag,</span><br><span class="line">docker image push registry-host:5000/myadmin/rhel-httpd:latest</span><br><span class="line">or</span><br><span class="line">docker push registry-host:5000/myname/myimage</span><br></pre></td></tr></table></figure><h2 id="Pull-Image-from-Harbor"><a href="#Pull-Image-from-Harbor" class="headerlink" title="Pull Image from Harbor"></a>Pull Image from Harbor</h2><p><a href="https://goharbor.io/docs/2.0.0/install-config/run-installer-script/#connect-http" target="_blank" rel="noopener">Connecting to Harbor via HTTP</a></p><h3 id="Step-1-1"><a href="#Step-1-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>add the option <code>--insecure-registry</code> to your clientâ€™s Docker daemon. By default, the daemon file is located at <code>/etc/docker/daemon.json</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">"insecure-registries" : ["ip:port", "0.0.0.0"] #å¦‚æœportä¸º80ï¼Œåˆ™å¯çœç•¥</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Restart Docker Engine.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="Step-2-1"><a href="#Step-2-1" class="headerlink" title="Step 2"></a>Step 2</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hostAddress/library/REPOSITORY:TAG</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker container</title>
      <link href="/2021/12/13/docker%20container/"/>
      <url>/2021/12/13/docker%20container/</url>
      <content type="html"><![CDATA[<h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹æ­£åœ¨è¿è¡Œ</span><br><span class="line">docker ps</span><br><span class="line">æŸ¥çœ‹æ‰€æœ‰</span><br><span class="line">docker ps -a</span><br><span class="line">å¯åŠ¨</span><br><span class="line">docker start å®¹å™¨åæˆ–å®¹å™¨id</span><br><span class="line">ç»ˆæ­¢</span><br><span class="line">docker stop [NAME]/[CONTAINER ID]:å°†å®¹å™¨é€€å‡ºã€‚</span><br><span class="line">docker kill [NAME]/[CONTAINER ID]:å¼ºåˆ¶åœæ­¢ä¸€ä¸ªå®¹å™¨ã€‚</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å®¹å™¨ç«¯å£</span><br><span class="line">docker port å®¹å™¨åæˆ–å®¹å™¨id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åˆ é™¤</span><br><span class="line">docker rm -f å®¹å™¨id</span><br><span class="line">å¯¼å‡º</span><br><span class="line">docker export å®¹å™¨id &gt; xxx.tar</span><br><span class="line">å¯¼å…¥</span><br><span class="line">docker import - test/xxx:v1</span><br><span class="line">é‡å¯</span><br><span class="line">docker restart $container_id</span><br><span class="line">æ—¥å¿—</span><br><span class="line">docker logs $container_id</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹containerç°åœ¨å·¥ä½œç½‘ç»œæ¨¡å¼"><a href="#æŸ¥çœ‹containerç°åœ¨å·¥ä½œç½‘ç»œæ¨¡å¼" class="headerlink" title="æŸ¥çœ‹containerç°åœ¨å·¥ä½œç½‘ç»œæ¨¡å¼"></a>æŸ¥çœ‹containerç°åœ¨å·¥ä½œç½‘ç»œæ¨¡å¼</h3><ul><li><p>åˆ—å‡ºdockerçš„æ‰€æœ‰ç½‘ç»œæ¨¡å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure></li><li><p>é’ˆå¯¹bridgeå’Œhoståˆ†åˆ«æŸ¥æ‰¾æœ‰å“ªäº›containeråœ¨å…¶ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network inspect bridge</span><br><span class="line">docker network inspect host</span><br></pre></td></tr></table></figure></li><li><p>ç›´æ¥æŸ¥çœ‹containerçš„ä¿¡æ¯ï¼Œæ‰¾åˆ°networkæ®µæŸ¥çœ‹ã€‚æˆ–è€…ç”¨grepç­›é€‰å‡ºnetworkã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker inspect å®¹å™¨å/å®¹å™¨ID</span><br><span class="line">docker inspect å®¹å™¨å/å®¹å™¨ID | grep -i â€œnetworkâ€ # å…¶ä¸­grepçš„â€œ-iâ€è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ã€‚</span><br></pre></td></tr></table></figure></li></ul><h4 id="Exit-Codes"><a href="#Exit-Codes" class="headerlink" title="Exit Codes"></a>Exit Codes</h4><p>Common exit codes associated with docker containers are:</p><ul><li><strong>Exit Code 0</strong>: Absence of an attached foreground process</li><li><strong>Exit Code 1</strong>: Indicates failure due to application error</li><li><strong>Exit Code 137</strong>: Indicates failure as container received SIGKILL (Manual intervention or â€˜oom-killerâ€™ [OUT-OF-MEMORY])</li><li><strong>Exit Code 139</strong>: Indicates failure as container received SIGSEGV</li><li><p><strong>Exit Code 143</strong>: Indicates failure as container received SIGTERM</p></li><li><p><strong>Exit Code 126</strong>: Permission problem or command is not executable</p></li><li><strong>Exit Code 127</strong>: Possible typos in shell script with unrecognizable characters</li></ul><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ul><li><p>å¯†ç 123456</p></li><li><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql-server -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">-d:è®©å®¹å™¨åœ¨åå°è¿è¡Œ</span><br><span class="line">-P(å¤§å†™):æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£</span><br><span class="line">-p(å°å†™):æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£ç»‘å®šåˆ°æŒ‡å®šçš„ä¸»æœºç«¯å£</span><br></pre></td></tr></table></figure></li><li><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql-server /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®</p><p><code>docker exec -it mysql-server mysql -uroot -p</code></p></li><li><p>ä¿®æ”¹root å¯ä»¥é€šè¿‡ä»»ä½•å®¢æˆ·ç«¯è¿æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';</span><br></pre></td></tr></table></figure></li><li><p>ä»å¤–éƒ¨è®¿é—®docker mysql-server</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h127.0.0.1 -P3306 -uroot -p</span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥sqlæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å…ˆå°†æ–‡ä»¶å¯¼å…¥åˆ°å®¹å™¨</span><br><span class="line">#docker cp **.sql å®¹å™¨å:/root/</span><br><span class="line">è¿›å…¥å®¹å™¨</span><br><span class="line">#docker exec -ti å®¹å™¨åæˆ–ID sh</span><br><span class="line">ç™»å½•æ•°æ®åº“</span><br><span class="line"># mysql -uroot -p </span><br><span class="line">å°†æ–‡ä»¶å¯¼å…¥æ•°æ®åº“</span><br><span class="line">source æ•°æ®åº“å &lt; /root/***.sql</span><br></pre></td></tr></table></figure></li><li><p>å¯¼å‡ºæ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it  mysql-serverï¼ˆå®¹å™¨åï¼‰ mysqldump -uroot -p123456 æ•°æ®åº“åç§° &gt; /opt/sql_bak/test_db.sqlï¼ˆå¯¼å‡ºè¡¨æ ¼è·¯å¾„ï¼‰</span><br></pre></td></tr></table></figure></li></ul><h3 id="portainer"><a href="#portainer" class="headerlink" title="portainer"></a>portainer</h3><ul><li><p>å¯†ç é‡ç½®</p><ul><li><p>ä¸‹è½½å¸®åŠ©é•œåƒportainer/helper-reset-password</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/helper-reset-password</span><br></pre></td></tr></table></figure></li><li><p>åœæ­¢è¿è¡Œçš„portainer</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop "id-portainer-container"</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œé‡ç½®å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -v portainer_data:/data portainer/helper-reset-password</span><br></pre></td></tr></table></figure></li><li><p>ç»“æœ</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>/<span class="number">06</span>/<span class="number">04</span> <span class="number">00</span>:<span class="number">13</span>:<span class="number">58</span> Password successfully updated <span class="keyword">for</span> user: admin</span><br><span class="line"><span class="number">2020</span>/<span class="number">06</span>/<span class="number">04</span> <span class="number">00</span>:<span class="number">13</span>:<span class="number">58</span> Use the following password to login: &amp;<span class="number">_4</span>#\<span class="number">3</span>^<span class="number">5</span>V8vLTd)E<span class="string">"NWiJBs26G*9HPl1</span></span><br></pre></td></tr></table></figure></li><li><p>é‡æ–°è¿è¡Œportainer,å¯†ç  ä¸ºğŸ‘†é‡ç½®çš„ &amp;_4#\3^5V8vLTd)Eâ€NWiJBs26G*9HPl1</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start "id-portainer-container"</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç°åœ¨å¯†ç ä¸º admin/admin</p></li></ul><ul><li><p>é‡æ–°å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -p 8000:8000 -p 9443:9443 --name portainer \</span><br><span class="line">    --restart=always \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    -v portainer_data:/data \</span><br><span class="line">    cr.portainer.io/portainer/portainer-ce:2.9.3</span><br></pre></td></tr></table></figure></li></ul><h3 id="nacos"><a href="#nacos" class="headerlink" title="nacos"></a>nacos</h3><ul><li><p>run</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nacos -p 8848:8848 -e PREFER_HOST_MODE=hostname -e MODE=standalone nacos/nacos-server</span><br></pre></td></tr></table></figure><ul><li><p>Linux memory is insufficient</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e JVM_XMS=256m -e JVM_XMX=256m --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><blockquote><p>ä½¿ç”¨docker-compose up rediså¯åŠ¨å®¹å™¨æ—¶ï¼Œå¦‚æœé…ç½®è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ redis.confï¼Œéœ€è¦è®¾ç½®</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bind 0.0.0.0</span><br><span class="line">daemonize no</span><br></pre></td></tr></table></figure><blockquote><p>docker-compose.ymlæ–‡ä»¶å†…å®¹</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.7"</span>                                                                            <span class="attr">services:</span></span><br><span class="line"><span class="attr">  redis:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">"redis:alpine"</span></span><br><span class="line"><span class="attr">    stdin_open:</span> <span class="literal">true</span> <span class="comment">#æ‰“å¼€æ ‡å‡†è¾“å…¥ï¼Œå¯ä»¥æ¥å—å¤–éƒ¨è¾“å…¥ã€‚</span></span><br><span class="line"><span class="attr">    tty:</span> <span class="literal">true</span>  <span class="comment">#æ¨¡æ‹Ÿä¸€ä¸ªä¼ªç»ˆç«¯ã€‚</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">/docker/projects/test/redis.conf:/data/redis.conf</span> <span class="comment"># ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„</span></span><br><span class="line">    <span class="comment">#   - /docker/projects/test/redis/data:/data</span></span><br><span class="line">    <span class="comment">#   - /docker/projects/test/redis/logs:/logs</span></span><br><span class="line"><span class="attr">    command:</span> <span class="string">redis-server</span> <span class="bullet">--include</span> <span class="string">/data/redis.conf</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨ docker-compose â€“verbose up rediså¯åŠ¨ï¼Œå¯æŸ¥çœ‹å¯åŠ¨è¯¦æƒ…</p></blockquote><h3 id="ä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„"><a href="#ä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„" class="headerlink" title="ä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„"></a>ä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„</h3><ol><li><p>åœæ­¢å®¹å™¨ </p></li><li><p>åœæ­¢dockeræœåŠ¡(systemctl stop docker) </p></li><li><p>ä¿®æ”¹è¿™ä¸ªå®¹å™¨çš„hostconfig.jsonæ–‡ä»¶ä¸­çš„ç«¯å£ï¼ˆåŸå¸–æœ‰äººæåˆ°ï¼Œå¦‚æœconfig.v2.jsoné‡Œé¢ä¹Ÿè®°å½•äº†ç«¯å£ï¼Œä¹Ÿè¦ä¿®æ”¹ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/docker/3b6ef264a040* #è¿™é‡Œæ˜¯CONTAINER ID</span><br><span class="line">vi hostconfig.json</span><br><span class="line">å¦‚æœä¹‹å‰æ²¡æœ‰ç«¯å£æ˜ å°„, åº”è¯¥æœ‰è¿™æ ·çš„ä¸€æ®µ:</span><br><span class="line">"PortBindings":&#123;&#125;</span><br><span class="line">å¢åŠ ä¸€ä¸ªæ˜ å°„, è¿™æ ·å†™:</span><br><span class="line">"PortBindings":&#123;"3306/tcp":[&#123;"HostIp":"","HostPort":"3307"&#125;]&#125;</span><br><span class="line">å‰ä¸€ä¸ªæ•°å­—æ˜¯å®¹å™¨ç«¯å£, åä¸€ä¸ªæ˜¯å®¿ä¸»æœºç«¯å£. </span><br><span class="line">è€Œä¿®æ”¹ç°æœ‰ç«¯å£æ˜ å°„æ›´ç®€å•, æŠŠç«¯å£å·æ”¹æ‰å°±è¡Œ.</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨dockeræœåŠ¡(systemctl start docker) </p></li><li><p>å¯åŠ¨å®¹å™¨</p></li></ol><h3 id="é…ç½®å®¹å™¨çš„é•œåƒæºï¼ˆå®‰è£…vimï¼‰"><a href="#é…ç½®å®¹å™¨çš„é•œåƒæºï¼ˆå®‰è£…vimï¼‰" class="headerlink" title="é…ç½®å®¹å™¨çš„é•œåƒæºï¼ˆå®‰è£…vimï¼‰"></a>é…ç½®å®¹å™¨çš„é•œåƒæºï¼ˆå®‰è£…vimï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"></span><br><span class="line">echo "deb http://mirrors.163.com/debian/ jessie main non-free contrib" &gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo "deb http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib" &gt;&gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo "deb-src http://mirrors.163.com/debian/ jessie main non-free contrib" &gt;&gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo "deb-src http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib" &gt;&gt;/etc/apt/sources.list </span><br><span class="line"><span class="meta">#</span>æ›´æ–°å®‰è£…æº </span><br><span class="line">apt-get update </span><br><span class="line"><span class="meta">#</span>å¦‚æœä¸‹è½½è¿‡ç¨‹ä¸­å¡åœ¨[waiting for headers] åˆ é™¤/var/cache/apt/archives/ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ </span><br><span class="line"><span class="meta">#</span>å®‰è£…vim </span><br><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jconsole snippet</title>
      <link href="/2021/12/11/jconsole%20snippet/"/>
      <url>/2021/12/11/jconsole%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="jconsoleé…ç½®è¿œç¨‹ç›‘æ§"><a href="#jconsoleé…ç½®è¿œç¨‹ç›‘æ§" class="headerlink" title="jconsoleé…ç½®è¿œç¨‹ç›‘æ§"></a>jconsoleé…ç½®è¿œç¨‹ç›‘æ§</h3><ul><li><p>è¿œç¨‹jvmè¿›ç¨‹éœ€é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">env.java.opts: </span><br><span class="line">-Dcom.sun.management.jmxremote </span><br><span class="line">-Dcom.sun.management.jmxremote.port=9999</span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=false </span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=false</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­9999ä¸ºæŒ‡å®šç›‘æ§ç«¯å£</p></blockquote></li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ignite issue</title>
      <link href="/2021/12/09/ignite%20issue/"/>
      <url>/2021/12/09/ignite%20issue/</url>
      <content type="html"><![CDATA[<p>### </p><h3 id="BinaryObjectException-Conflicting-enum-values"><a href="#BinaryObjectException-Conflicting-enum-values" class="headerlink" title="BinaryObjectException: Conflicting enum values"></a>BinaryObjectException: Conflicting enum values</h3><ul><li><p>åŸå› </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å­˜å…¥igniteçš„æ•°æ®æ ¼å¼</span><br><span class="line">key: String , value: Map&lt;Enum, BigDecimal&gt;</span><br><span class="line">Enumç±»å‹åŒ…å«</span><br><span class="line">&#123;A,B,C&#125;</span><br><span class="line"></span><br><span class="line">åœ¨ä¹‹åç”±äºä¸šåŠ¡å˜æ›´ï¼Œéœ€è¦æ–°å¢æ–°çš„enumé¡¹ç›®ï¼Œå¹¶æ·»åŠ Dåœ¨Aä¸Bä¹‹é—´</span><br><span class="line">&#123;A,D,B,C&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ†æ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”±äºåœ¨æ•°æ®å­˜å…¥igniteä¹‹åï¼Œigniteä¼šä¿å­˜æ•°æ®ç›¸å…³çš„schemaä¿¡æ¯,æ­¤æ—¶åœ¨enumé¡¹ç›®ä¹‹é—´ä¿®æ”¹itemï¼Œä¼šæ‰“ä¹±ä¹‹å‰çš„index</span><br></pre></td></tr></table></figure></li><li><p>è§£å†³ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line">æ›´æ”¹enumç±»çš„åç§°ï¼Œä¸å†ä½¿ç”¨åŸæœ‰çš„schemaä¿¡æ¯</span><br><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line">enumç±»æ–°å¢é¡¹ç›®æ—¶ï¼Œéœ€è¦åœ¨æœ€åé¢æ·»åŠ ï¼Œé¿å…æ‰“ä¹±å·²æœ‰çš„schemaç´¢å¼•</span><br><span class="line">æ–¹æ³•ä¸‰ï¼ˆæœªéªŒè¯ï¼‰ï¼š</span><br><span class="line">åˆ é™¤ $IGNITE_HOME/work/binary_meta/Nodexé‡Œé¢çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure></li><li><p>å®˜æ–¹è¯´æ˜</p><blockquote><ul><li>You cannot change the types of existing fields.</li><li>You cannot change the order of enum values or add new constants at the beginning or in the middle of the list of enumâ€™s values. You can add new constants to the end of the list though.</li></ul></blockquote></li></ul><ul><li><strong>å¤„ç†conflict enum values, éœ€è¦æ¸…é™¤æ•°æ®</strong></li></ul><blockquote><p>éœ€è¦æ¸…ç† $IGNITE_HOME/work/dbç›®å½•ä¸‹çš„ binary_metaã€marshaller</p><p>éœ€è¦éªŒè¯æ˜¯å¦æ¸…ç† storagePathã€walPathã€walArchivePath</p></blockquote><h3 id="gc"><a href="#gc" class="headerlink" title="gc"></a>gc</h3><p><img src="img/ignite/gc_collect.png" alt=""></p><blockquote><p>3sè¿›è¡Œgc  (110060-52672)/1024=56.04G</p></blockquote><p><img src="img/ignite/gc_2.png" alt=""></p><blockquote><p>17sè¿›è¡Œgc (109952-52658)/1024=55.95G</p></blockquote><h3 id="IgniteCacheException"><a href="#IgniteCacheException" class="headerlink" title="IgniteCacheException"></a>IgniteCacheException</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ERROR org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.spi</span><span class="variable">.communication</span><span class="variable">.tcp</span><span class="variable">.TcpCommunicationSpi</span>  [] - Failed to send message to remote node [node=ZookeeperClusterNode [id=<span class="number">1</span>c8a032d-<span class="number">042</span>e-<span class="number">4386</span>-<span class="number">9</span>ce8-<span class="number">2605</span>c0699304, addrs=[<span class="number">17</span><span class="variable">.9</span><span class="variable">.11</span><span class="variable">.11</span>], order=<span class="number">1</span>, loc=false, client=false], msg=GridIoMessage [plc=<span class="number">2</span>, topic=TOPIC_CACHE, topicOrd=<span class="number">8</span>, ordered=false, timeout=<span class="number">0</span>, skipOnTimeout=false, msg=GridNearLockRequest [topVer=AffinityTopologyVersion [topVer=<span class="number">358</span>, minorTopVer=<span class="number">0</span>], miniId=<span class="number">1</span>, dhtVers=GridCacheVersion[] [<span class="literal">null</span>], subjId=a5dbdc1d-e76e-<span class="number">49</span>c2-<span class="number">85</span>d7-ed7f1c7db7bd, taskNameHash=<span class="number">0</span>, createTtl=-<span class="number">1</span>, accessTtl=-<span class="number">1</span>, flags=<span class="number">3</span>, txLbl=<span class="literal">null</span>, filter=<span class="literal">null</span>, <span class="keyword">super</span>=GridDistributedLockRequest [nodeId=a5dbdc1d-e76e-<span class="number">49</span>c2-<span class="number">85</span>d7-ed7f1c7db7bd, nearXidVer=GridCacheVersion [topVer=<span class="number">245500806</span>, order=<span class="number">1638786801426</span>, nodeOrder=<span class="number">336</span>], threadId=<span class="number">11960694</span>, futId=<span class="number">96</span>c1bf42d71-<span class="number">90702925</span>-<span class="number">3</span>ef9-<span class="number">4</span>c70-b7a7-<span class="number">4</span>be2fb6d75ba, timeout=<span class="number">0</span>, isInTx=true, isInvalidate=false, isRead=true, isolation=REPEATABLE_READ, retVals=[true], txSize=<span class="number">0</span>, flags=<span class="number">0</span>, keysCnt=<span class="number">1</span>, <span class="keyword">super</span>=GridDistributedBaseMessage [ver=GridCacheVersion [topVer=<span class="number">245500806</span>, order=<span class="number">1638786801426</span>, nodeOrder=<span class="number">336</span>], committedVers=<span class="literal">null</span>, rolledbackVers=<span class="literal">null</span>, cnt=<span class="number">1</span>, <span class="keyword">super</span>=GridCacheIdMessage [cacheId=-<span class="number">182240380</span>, <span class="keyword">super</span>=GridCacheMessage [msgId=<span class="number">1360862</span>, depInfo=<span class="literal">null</span>, lastAffChangedTopVer=AffinityTopologyVersion [topVer=<span class="number">336</span>, minorTopVer=<span class="number">0</span>], err=<span class="literal">null</span>, skipPrepare=false]]]]]]]</span><br><span class="line"></span><br><span class="line">org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Failed to connect to node due to unrecoverable exception (is node still alive?). Make sure that each ComputeTask <span class="keyword">and</span> cache Transaction has a timeout set in order to prevent parties from waiting <span class="keyword">forever</span> in <span class="keyword">case</span> of network issues [nodeId=d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895, addrs=[x/x<span class="variable">.x</span><span class="variable">.x</span><span class="variable">.x</span>:<span class="number">47100</span>], err= <span class="keyword">class</span> org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Remote node does <span class="keyword">not</span> observe current node in topology : d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895]</span><br><span class="line">    </span><br><span class="line">Caused by: org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Remote node does <span class="keyword">not</span> observe current node in topology : d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895</span><br></pre></td></tr></table></figure><ul><li>gcçš„ç­–ç•¥</li><li>ignite clientçš„å¼‚å¸¸æ•è·</li><li></li></ul>]]></content>
      
      <categories>
          
          <category> ignite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> issue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Elastic Stack learn</title>
      <link href="/2021/12/03/elasticstatic/"/>
      <url>/2021/12/03/elasticstatic/</url>
      <content type="html"><![CDATA[<p><strong>ELK</strong></p><blockquote><p>Elasticsearch æ˜¯ä¸€ä¸ªæœç´¢å’Œåˆ†æå¼•æ“ã€‚Logstash æ˜¯æœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†ç®¡é“ï¼Œèƒ½å¤ŸåŒæ—¶ä»å¤šä¸ªæ¥æºé‡‡é›†æ•°æ®ï¼Œè½¬æ¢æ•°æ®ï¼Œç„¶åå°†æ•°æ®å‘é€åˆ°è¯¸å¦‚ Elasticsearch ç­‰â€œå­˜å‚¨åº“â€ä¸­ã€‚Kibana åˆ™å¯ä»¥è®©ç”¨æˆ·åœ¨ Elasticsearch ä¸­ä½¿ç”¨å›¾å½¢å’Œå›¾è¡¨å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–ã€‚</p></blockquote><p>Elasticsearch is the living heart of what is todayâ€™s the most popular log analytics platform â€” the ELK Stack (Elasticsearch, Logstash and Kibana). Elasticsearchâ€™s role is so central that it has become synonymous with the name of the stack itself.</p><p>Elasticsearch behaves like a REST API, so you can use either the <code>POST</code> or the <code>PUT</code> method to add data to it. You use <code>PUT</code> when you know the or want to specify the <code>id</code> of the data item, or <code>POST</code> if you want Elasticsearch to generate an <code>id</code> for the data item:</p><h3 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h3><h4 id="max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535"><a href="#max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535" class="headerlink" title="max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]"></a>max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]</h4><p>If you want to increase the limit shown by <code>ulimit -n</code>, you should:</p><ul><li><p>Modify <code>/etc/systemd/user.conf</code> and <code>/etc/systemd/system.conf</code> with the following line (this takes care of graphical login):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefaultLimitNOFILE=65535</span><br></pre></td></tr></table></figure></li><li><p>Modify <code>/etc/security/limits.conf</code> with the following lines (this takes care of non-GUI login):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* hard nofile 65535</span><br><span class="line">* soft nofile 65535</span><br></pre></td></tr></table></figure></li><li><p>Reboot your computer for changes to take effect.</p></li><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ulimit -Hn</span><br><span class="line">ulimit -Sn</span><br></pre></td></tr></table></figure></li></ul><h4 id="max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><a href="#max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144" class="headerlink" title="max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]"></a>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</h4><ul><li><p><code>vim /etc/sysctl.conf</code></p><p>æ–°å¢<strong>vm.max_map_count=655360</strong></p></li><li><p><code>sysctl -p</code></p></li></ul><h4 id="the-default-discovery-settings-are-unsuitable-for-production-use-at-least-one-of-discovery-seed-hosts-discovery-seed-providers-cluster-initial-master-nodes-must-be-configured"><a href="#the-default-discovery-settings-are-unsuitable-for-production-use-at-least-one-of-discovery-seed-hosts-discovery-seed-providers-cluster-initial-master-nodes-must-be-configured" class="headerlink" title="the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured"></a>the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</h4><p>in short, if you are running Elasticsearch locally(single node) or just with a single node on the cloud then just use below config in your <code>elasticsearch.yml</code> to avoid the production check, and to make it work, more info about this config in <a href="https://stackoverflow.com/a/60426167/4039431" target="_blank" rel="noopener">this SO</a> answer:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">discovery.type:</span> <span class="string">single-node</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Elasticsearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kubernetes learn</title>
      <link href="/2021/12/02/Kubernetes%20snippet/"/>
      <url>/2021/12/02/Kubernetes%20snippet/</url>
      <content type="html"><![CDATA[<p>Kubernetes is pronounced <strong>coo-ber-net-ees</strong>, not coo-ber-neats. People also use the shortened version k8s a lot. Please donâ€™t pronounce that one k-eightsâ€”it is still coo-ber-net-ees.</p><h3 id="Difference-between-Docker-and-Kubernetes"><a href="#Difference-between-Docker-and-Kubernetes" class="headerlink" title="Difference between Docker and Kubernetes"></a>Difference between Docker and Kubernetes</h3><blockquote><p>Docker is a containerization platform, and Kubernetes is a container orchestrator for container platforms like Docker. </p></blockquote><h3 id="Docker-Container-Problems"><a href="#Docker-Container-Problems" class="headerlink" title="Docker Container Problems:"></a>Docker Container Problems:</h3><ul><li>How would all of these containers be coordinated and scheduled? </li><li>How do you seamlessly upgrade an application without any interruption of service? </li><li>How do you monitor the health of an application, know when something goes wrong and seamlessly restart it? </li></ul><p>When most people talk about â€œKubernetes vs. Docker,â€ what they really mean is â€œKubernetes vs. Docker Swarm.â€ </p><h3 id="Kubernetes-architecture-and-its-components"><a href="#Kubernetes-architecture-and-its-components" class="headerlink" title="Kubernetes architecture and its components"></a>Kubernetes architecture and its components</h3><p>We can break down the components into three main parts.</p><ol><li>The Control Plane - The Master.</li><li>Nodes - Where pods get scheduled.</li><li>Pods - Holds containers.</li></ol><p><img src="./img/kubernetes_cluster.png" alt=""></p><p>Docker is a platform and tool for building, distributing, and running Docker containers. It offers its own native clustering tool that can be used to orchestrate and schedule containers on machine clusters. Kubernetes is a container orchestration system for Docker containers that is more extensive than Docker Swarm and is meant to coordinate clusters of nodes at scale in production in an efficient manner. It works around the concept of pods, which are scheduling units (and can contain one or more containers) in the Kubernetes ecosystem, and they are distributed among nodes to provide high availability. One can easily run a Docker build on a Kubernetes cluster, but Kubernetes itself is not a complete solution and is meant to include custom plugins.</p>]]></content>
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nacos snippet</title>
      <link href="/2021/12/01/nacos%20snippet/"/>
      <url>/2021/12/01/nacos%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><ul><li><p>2.0.3ç‰ˆæœ¬å¯åŠ¨ï¼Œéœ€è¦æ·»åŠ  -må±æ€§</p><p><code>./startup.sh -m standalone</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> spring cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>postgresql snippet</title>
      <link href="/2021/12/01/postgresql%20snippet/"/>
      <url>/2021/12/01/postgresql%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="ç»ˆç«¯ç™»å½•pg"><a href="#ç»ˆç«¯ç™»å½•pg" class="headerlink" title="ç»ˆç«¯ç™»å½•pg"></a>ç»ˆç«¯ç™»å½•pg</h3><ul><li><p>å¦‚æœä¹‹å‰æ²¡æœ‰ç™»å½•è¿‡ï¼Œéœ€è¦è®¾ç½®å½“å‰ç”¨æˆ·è¿›è¡Œç™»å½•æ“ä½œ</p><p>There is no default username and password without you creating one. The simplest possible setup is to follow these steps to set up your own user as a superuser.</p><p>At a terminal prompt, create a postgres user with your own username</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres createuser --superuser $USER# $USERæ— é¡»æ›¿æ¢</span><br></pre></td></tr></table></figure><p>Start the postgresql command prompt as your username but running as root since you didnâ€™t set a password yet;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><p>At the postgresql prompt, set your password;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\password $USER    # å…¶ä¸­$USERéœ€è¦æ›¿æ¢æˆå½“å‰ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>After that, you should be able to log on just fine.</p></li></ul><ul><li><p>å¦‚æœä¹‹å‰è®¾ç½®äº†ä¸Šé¢çš„æ­¥éª¤ï¼Œå¯ç›´æ¥è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql postgres</span><br></pre></td></tr></table></figure></li></ul><h3 id="å¯¼å…¥æ–‡ä»¶"><a href="#å¯¼å…¥æ–‡ä»¶" class="headerlink" title="å¯¼å…¥æ–‡ä»¶"></a>å¯¼å…¥æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">psql postgres# login command</span><br><span class="line">\c some_database# choose database</span><br><span class="line">\i \path\TO\file_name.sql# execute sql</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æŒ‡å®šschema"><a href="#è¿æ¥æŒ‡å®šschema" class="headerlink" title="è¿æ¥æŒ‡å®šschema"></a>è¿æ¥æŒ‡å®šschema</h3><ul><li><p>å¦‚æœä¸æŒ‡å®šschemaçš„è¯ï¼Œä¼šé»˜è®¤è®¿é—®publicçš„schema</p></li><li><p>æŒ‡å®šschema</p><p><code>jdbc:postgresql://localhost:5432/mydatabase?currentSchema=myschema</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> fragment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>gradle snippet</title>
      <link href="/2021/11/23/gradle/"/>
      <url>/2021/11/23/gradle/</url>
      <content type="html"><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ol><li><strong>Process â€˜command â€˜/opt/jdk8/bin/javaâ€™â€™ finished with non-zero exit value 1</strong></li></ol>]]></content>
      
      <categories>
          
          <category> tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntu snippet</title>
      <link href="/2021/10/08/ubuntu%20snippet/"/>
      <url>/2021/10/08/ubuntu%20snippet/</url>
      <content type="html"><![CDATA[<h2 id="ç£ç›˜æŒ‚è½½"><a href="#ç£ç›˜æŒ‚è½½" class="headerlink" title="ç£ç›˜æŒ‚è½½"></a>ç£ç›˜æŒ‚è½½</h2><ol><li><p>Get the UUID of the partition</p><p><code>sudo blkid</code></p></li><li><p>Add partition to fstab</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /data was on /dev/sda3</span></span><br><span class="line">UUID=0009091A00027E42 /data            ntfs   defaults,iocharset=utf8,fmask=111,dmask=002        0       2</span><br></pre></td></tr></table></figure></li></ol><h2 id="deepin-wine"><a href="#deepin-wine" class="headerlink" title="deepin wine"></a>deepin wine</h2><h2 id="ç™¾åº¦ç½‘ç›˜id"><a href="#ç™¾åº¦ç½‘ç›˜id" class="headerlink" title="ç™¾åº¦ç½‘ç›˜id"></a>ç™¾åº¦ç½‘ç›˜id</h2><ul><li><p>ä¸€ç›´åœç•™åœ¨ç™»å½•ç•Œé¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤ã€€ï½/baidunetdiskæ–‡ä»¶å¤¹ï¼Œå†æ¬¡å¯åŠ¨å³å¯</span><br></pre></td></tr></table></figure></li></ul><h2 id="å…‰é©±ç›¸å…³"><a href="#å…‰é©±ç›¸å…³" class="headerlink" title="å…‰é©±ç›¸å…³"></a>å…‰é©±ç›¸å…³</h2><p>CDROM, DVD è¿™äº›è®¾å¤‡ç°åœ¨æ¥è¯´éƒ½æ˜¯å±äºå¤è‘£äº†ï¼Œä½†å› ä¸ºæœ‰äº›ç¬¬ä¸‰æ–¹è½¯ä»¶æ˜¯ä»¥CDROMçš„å½¢å¼æä¾›çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™è¿˜ä¼šé‡åˆ°å¦‚ä½•æŒ‚è½½çš„é—®é¢˜?</p><p>åœ¨Ubuntu Server 18.04ä¸­ï¼Œè¦æŒ‚è½½ CDROM(DVD)å¯ä»¥éµå¾ªä»¥ä¸‹æ­¥éª¤:</p><h4 id="æŒ‚è½½-CDROM-DVD"><a href="#æŒ‚è½½-CDROM-DVD" class="headerlink" title="æŒ‚è½½ CDROM(DVD)"></a>æŒ‚è½½ CDROM(DVD)</h4><ol><li>ç¡®è®¤è®¾å¤‡æ–‡ä»¶å, è¿›å…¥ dev ç›®å½•ï¼Œ æ‰§è¡Œï¼š</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /dev</span><br><span class="line">ls -lt | less</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿæ˜¾ç¤ºä¸€ä¸ªè®¾å¤‡åˆ—è¡¨ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸¤ä¸ªç‰¹åˆ«çš„ï¼Œåˆ†åˆ«æ˜¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdrom -&gt; sr0</span><br><span class="line">dvd -&gt; sr0</span><br></pre></td></tr></table></figure><p>è¯´æ˜ç³»ç»Ÿå·²ç»å°† cdrom, dvd å‘½åä¸º sr0 çš„åˆ«åï¼Œå…¶å®æ˜¯åŒä¸€ä¸ªè®¾å¤‡ã€‚</p><ol><li>æ‰§è¡Œ mount å‘½ä»¤æŒ‚è½½cdrom, å› ä¸º ubuntu server 18.04ä¸­ï¼Œå·²ç»åœ¨æ ¹ç›®å½•ä¸‹å»ºäº†ä¸€ä¸ªåä¸º cdrom çš„ç›®å½•ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªç›®å½•æ¥æŒ‚è½½ï¼Œæ‰§è¡Œ:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount /dev/cdrom /cdrom</span><br></pre></td></tr></table></figure><h4 id="å¸è½½-CDROM-DVD"><a href="#å¸è½½-CDROM-DVD" class="headerlink" title="å¸è½½ CDROM (DVD)"></a>å¸è½½ CDROM (DVD)</h4><p>è¦æƒ³å¸è½½ CDROM, å¯ä»¥ç®€å•çš„æ‰§è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /cdrom</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯æƒ³æ¨å‡ºå½“å‰çš„å…‰ç›˜ï¼Œåˆ™å¯ä»¥æ‰§è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo eject /cdrom</span><br></pre></td></tr></table></figure><h3 id="postgre"><a href="#postgre" class="headerlink" title="postgre"></a>postgre</h3><p>åœ¨æœ¬æœºå®‰è£…ï¼Œédockerï¼Œuser: postgres     pw:postgres </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><h4 id="æ›´æ”¹-Ubuntu-18-04-ç™»é™†èƒŒæ™¯"><a href="#æ›´æ”¹-Ubuntu-18-04-ç™»é™†èƒŒæ™¯" class="headerlink" title="æ›´æ”¹ Ubuntu 18.04 ç™»é™†èƒŒæ™¯"></a>æ›´æ”¹ Ubuntu 18.04 ç™»é™†èƒŒæ™¯</h4><ol><li><p><code>sudo vi /etc/alternatives/gdm3.css</code></p></li><li><p>ä¿®æ”¹ CSS æ–‡ä»¶å†…å®¹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#lockDialogGroup</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">url</span>(/*è‡ªå·±å–œæ¬¢çš„å›¾ç‰‡çš„è·¯å¾„ã€‚æ³¨æ„ï¼Œä¸éœ€è¦resource://å¼€å¤´*/);</span><br><span class="line"><span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line"><span class="attribute">background-size</span>: cover;</span><br><span class="line"><span class="attribute">background-position</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="é…åˆelectron-ssrè¿›è¡Œç»ˆç«¯å¤–ç½‘è®¿é—®"><a href="#é…åˆelectron-ssrè¿›è¡Œç»ˆç«¯å¤–ç½‘è®¿é—®" class="headerlink" title="é…åˆelectron-ssrè¿›è¡Œç»ˆç«¯å¤–ç½‘è®¿é—®"></a>é…åˆelectron-ssrè¿›è¡Œç»ˆç«¯å¤–ç½‘è®¿é—®</h4><p>åœ¨<code>/etc/profile</code>ä¸­æ·»åŠ é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&quot;http://127.0.0.1:12333&quot;</span><br><span class="line">export https_proxy=&quot;http://127.0.0.1:12333&quot;</span><br></pre></td></tr></table></figure><p>ç„¶å<code>source /etc/profile</code>å³å¯</p>]]></content>
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ansible snippet</title>
      <link href="/2021/09/26/ansible%20snippet/"/>
      <url>/2021/09/26/ansible%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="roles"><a href="#roles" class="headerlink" title="roles"></a>roles</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaultså‚æ•°</span><br><span class="line">taskså¯åŠ¨è„šæœ¬</span><br><span class="line">templatesé…ç½®æ–‡æ¡£</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ansible </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>github skill</title>
      <link href="/2021/09/26/github%20skill/"/>
      <url>/2021/09/26/github%20skill/</url>
      <content type="html"><![CDATA[<h4 id="Issues-æœç´¢"><a href="#Issues-æœç´¢" class="headerlink" title="Issues æœç´¢"></a>Issues æœç´¢</h4><p><code>searchKeyWord is:issue is:closed repo:Alamofire/Alamofire</code> </p><p>è¿™æ¡æœç´¢ï¼ŒsearchKeyWordæ˜¯æœç´¢å…³é”®å­—, <code>is:issue</code> è¡¨ç¤ºæˆ‘ä»¬è¦æœç´¢ issueï¼Œ <code>is:closed</code> è¡¨ç¤ºå·²ç»å…³é—­çš„ issueï¼Œ <code>repo:Alamofire/Alamofire</code> è¡¨ç¤ºæˆ‘ä»¬åªæœç´¢è¿™ä¸ªä»“åº“èŒƒå›´çš„ issue</p>]]></content>
      
      <categories>
          
          <category> github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JVM Learn</title>
      <link href="/2021/09/01/JVM%20learn/"/>
      <url>/2021/09/01/JVM%20learn/</url>
      <content type="html"><![CDATA[<h2 id="å †å†…ä¸å †å¤–"><a href="#å †å†…ä¸å †å¤–" class="headerlink" title="å †å†…ä¸å †å¤–"></a>å †å†…ä¸å †å¤–</h2><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><ul><li><p>å¸¸è¯´çš„å †ï¼ŒæŒ‡çš„æ˜¯å †å†…å†…å­˜ï¼Œç”±JVMã€Œæ‰˜ç®¡ã€çš„å†…å­˜åŒºåŸŸã€‚å¯¹åº”çš„è‹±æ–‡æ˜¯ï¼šon-heap Memoryã€‚æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯æ”¾åœ¨å †ä¸­ã€‚</p></li><li><p>å †çš„ç‰¹ç‚¹ï¼š</p></li><li><ul><li>ç”±GCç®¡ç†ï¼Œä¸€æ—¦å †å¤§å°å¤§äº1GBä¼šå‡ºç°æ¯”è¾ƒæ˜æ˜¾çš„æš‚åœã€‚</li><li>å¯¹è±¡å­˜å‚¨åˆ°GCä¸­æ— éœ€è¿›è¡Œåºåˆ—åŒ–ã€ååºåˆ—åŒ–çš„ã€‚</li></ul></li></ul><h3 id="å †å¤–"><a href="#å †å¤–" class="headerlink" title="å †å¤–"></a>å †å¤–</h3><ul><li><p>å †å¤–å°±æ˜¯JVMå¼€è¾Ÿå‡ºæ¥çš„ï¼Œå †ä»¥å¤–çš„ä¸€å—ã€Œéæ‰˜ç®¡ã€å†…å­˜åŒºåŸŸã€‚å¯¹åº”çš„è‹±æ–‡æ˜¯ï¼šoff-heap Memoryã€‚å †å¤–å†…å­˜ä¹Ÿæ˜¯ JVM è¿›ç¨‹å¼€è¾Ÿçš„ä¸€å—å†…å­˜ç©ºé—´ã€‚åªä¸è¿‡ï¼ŒGCä¸ä¼šã€Œå…‰é¡¾ã€è¿™é‡Œã€‚</p></li><li><p>å †å¤–çš„ç‰¹ç‚¹ï¼š</p></li><li><ul><li>ç”±æ“ä½œç³»ç»Ÿç›´æ¥ç®¡ç†ã€‚åˆ«çš„è¿›ç¨‹èƒ½å¤Ÿç›´æ¥è®¿é—®ã€‚</li><li>ç‰¹åˆ«é€‚åˆåˆ†é…æ¬¡æ•°å°‘ï¼Œè¯»å†™éå¸¸é¢‘ç¹çš„åœºæ™¯ã€‚</li><li>å¯ä»¥é¿å…åœ¨åˆ†é…GBçº§åˆ«çš„å†…å­˜è€Œé€ æˆGCå¼€é”€ã€‚</li></ul></li><li><p>å †å¤–çš„ç¼ºç‚¹ï¼š</p></li><li><ul><li>å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼Œéš¾ä»¥æ’æŸ¥ã€‚</li><li>å¯¹è±¡çš„å­˜å‚¨éœ€è¦åºåˆ—åŒ–ã€å’Œååºåˆ—åŒ–ã€‚</li></ul></li></ul><p>å› ä¸ºå †å¤–å†…å­˜ç”±æ­¤ç‰¹ç‚¹ï¼Œå¾ˆå¤šé«˜æ€§èƒ½çš„åº”ç”¨ç»„ä»¶åŸºäºoff-heapæ¥æé«˜æ€§èƒ½ã€‚</p><h4 id="å †å¤–å†…å­˜å¸¸é…åˆä½¿ç”¨System-GC"><a href="#å †å¤–å†…å­˜å¸¸é…åˆä½¿ç”¨System-GC" class="headerlink" title="å †å¤–å†…å­˜å¸¸é…åˆä½¿ç”¨System GC"></a>å †å¤–å†…å­˜å¸¸é…åˆä½¿ç”¨System GC</h4><blockquote><p>å †å¤–å†…å­˜ä¸»è¦é’ˆå¯¹java.nio.DirectByteBufferï¼Œè¿™äº›å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¼šé€šè¿‡Unsafeæ¥å£ç›´æ¥é€šè¿‡os::mallocæ¥åˆ†é…å†…å­˜ï¼Œç„¶åå°†å†…å­˜çš„èµ·å§‹åœ°å€å’Œå¤§å°å­˜åˆ°java.nio.DirectByteBufferå¯¹è±¡é‡Œï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æ“ä½œè¿™äº›å†…å­˜ã€‚è¿™äº›å†…å­˜åªæœ‰åœ¨DirectByteBufferå›æ”¶æ‰ä¹‹åæ‰æœ‰æœºä¼šè¢«å›æ”¶ï¼Œå› æ­¤å¦‚æœè¿™äº›å¯¹è±¡å¤§éƒ¨åˆ†éƒ½ç§»åˆ°äº†oldï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰è§¦å‘CMS GCæˆ–è€…Full GCï¼Œé‚£ä¹ˆæ‚²å‰§å°†ä¼šå‘ç”Ÿï¼Œå› ä¸ºä½ çš„ç‰©ç†å†…å­˜è¢«ä»–ä»¬è€—å°½äº†ï¼Œå› æ­¤ä¸ºäº†é¿å…è¿™ç§æ‚²å‰§çš„å‘ç”Ÿï¼Œé€šè¿‡-XX:MaxDirectMemorySizeæ¥æŒ‡å®šæœ€å¤§çš„å †å¤–å†…å­˜å¤§å°ï¼Œå½“ä½¿ç”¨è¾¾åˆ°äº†é˜ˆå€¼çš„æ—¶å€™å°†è°ƒç”¨System.gcæ¥åšä¸€æ¬¡full gcï¼Œä»¥æ­¤æ¥å›æ”¶æ‰æ²¡æœ‰è¢«ä½¿ç”¨çš„å †å¤–å†…å­˜ã€‚</p></blockquote><h3 id="System-gcå¸¸è¯†"><a href="#System-gcå¸¸è¯†" class="headerlink" title="System.gcå¸¸è¯†"></a>System.gcå¸¸è¯†</h3><ul><li>system.gcå…¶å®æ˜¯åšä¸€æ¬¡full gc</li><li>system.gcä¼šæš‚åœæ•´ä¸ªè¿›ç¨‹</li><li>system.gcä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¦ç¦æ‰ï¼Œä½¿ç”¨-XX:+DisableExplicitGC</li><li>system.gcåœ¨cms gcä¸‹æˆ‘ä»¬é€šè¿‡-XX:+ExplicitGCInvokesConcurrentæ¥åšä¸€æ¬¡ç¨å¾®é«˜æ•ˆç‚¹çš„GC(æ•ˆæœæ¯”Full GCè¦å¥½äº›)</li><li>system.gcæœ€å¸¸è§çš„åœºæ™¯æ˜¯RMI/NIOä¸‹çš„å †å¤–å†…å­˜åˆ†é…ç­‰</li></ul><h1 id="jvmå¸¸ç”¨å‚æ•°çš„è®¾ç½®å’Œå«ä¹‰"><a href="#jvmå¸¸ç”¨å‚æ•°çš„è®¾ç½®å’Œå«ä¹‰" class="headerlink" title="jvmå¸¸ç”¨å‚æ•°çš„è®¾ç½®å’Œå«ä¹‰"></a>jvmå¸¸ç”¨å‚æ•°çš„è®¾ç½®å’Œå«ä¹‰</h1><p><strong>1.è®¾ç½®å †çš„æœ€å¤§å’Œæœ€å°å€¼</strong><br> -Xmx20M(æœ€å¤§å€¼) ,-Xms20M(æœ€å°å€¼)ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Xmså’Œ-Xmxå®é™…ä¸Šæ˜¯ -XX:InitialHeapSize å’Œ-XX:MaxHeapSize çš„ç¼©å†™</span><br></pre></td></tr></table></figure><p><strong>2.è®¾ç½®æ ˆçš„å¤§å°</strong><br> -Xss128kï¼š è®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1Mï¼Œä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256Kã€‚æ›´å…·åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œè°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†… å­˜ä¸‹ï¼Œå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨3000~5000å·¦å³ã€‚</p><p>åŠŸèƒ½å¼€å…³:</p><table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼æˆ–é™åˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-XX:-AllowUserSignalHandlers</td><td>é™äºLinuxå’ŒSolarisï¼Œé»˜è®¤ä¸å¯ç”¨</td><td>å…è®¸ä¸ºjavaè¿›ç¨‹å®‰è£…ä¿¡å·å¤„ç†å™¨,ä¿¡å·å¤„ç†å‚è§ç±»:sun.misc.Signal, sun.misc.SignalHandler</td></tr><tr><td>-XX:+DisableExplicitGC</td><td>é»˜è®¤å¯ç”¨</td><td>ç¦æ­¢åœ¨è¿è¡ŒæœŸæ˜¾å¼åœ°è°ƒç”¨System.gc()</td></tr><tr><td>-XX:+FailOverToOldVerifier</td><td>Java6æ–°å¼•å…¥é€‰é¡¹ï¼Œé»˜è®¤å¯ç”¨</td><td>å¦‚æœæ–°çš„Classæ ¡éªŒå™¨æ£€æŸ¥å¤±è´¥ï¼Œåˆ™ä½¿ç”¨è€çš„æ ¡éªŒå™¨(å¤±è´¥åŸå› :å› ä¸ºJDK6æœ€é«˜å‘ä¸‹å…¼å®¹åˆ°JDK1.2ï¼Œè€ŒJDK1.2çš„class info ä¸JDK6çš„infoå­˜åœ¨è¾ƒå¤§çš„å·®å¼‚ï¼Œæ‰€ä»¥æ–°æ ¡éªŒå™¨å¯èƒ½ä¼šå‡ºç°æ ¡éªŒå¤±è´¥çš„æƒ…å†µ)</td></tr><tr><td>-XX:+HandlePromotionFailure</td><td>java5ä»¥å‰æ˜¯é»˜è®¤ä¸å¯ç”¨ï¼Œjava6é»˜è®¤å¯ç”¨</td><td>å…³é—­æ–°ç”Ÿä»£æ”¶é›†æ‹…ä¿</td></tr><tr><td>-XX:+MaxFDLimit</td><td>é™äºSolarisï¼Œé»˜è®¤å¯ç”¨</td><td>è®¾ç½®javaè¿›ç¨‹å¯ç”¨æ–‡ä»¶æè¿°ç¬¦ä¸ºæ“ä½œç³»ç»Ÿå…è®¸çš„æœ€å¤§å€¼ã€‚</td></tr><tr><td>-XX:PreBlockSpin=10</td><td>-XX:+UseSpinning å¿…é¡»å…ˆå¯ç”¨ï¼Œå¯¹äºjava6æ¥è¯´å·²ç»é»˜è®¤å¯ç”¨äº†ï¼Œè¿™é‡Œé»˜è®¤è‡ªæ—‹10æ¬¡</td><td>æ§åˆ¶å¤šçº¿ç¨‹è‡ªæ—‹é”ä¼˜åŒ–çš„è‡ªæ—‹æ¬¡æ•°</td></tr><tr><td>-XX:-RelaxAccessControlCheck</td><td>é»˜è®¤ä¸å¯ç”¨</td><td>åœ¨Classæ ¡éªŒå™¨ä¸­ï¼Œæ”¾æ¾å¯¹è®¿é—®æ§åˆ¶çš„æ£€æŸ¥,ä½œç”¨ä¸reflectioné‡Œçš„setAccessibleç±»ä¼¼</td></tr><tr><td>-XX:+ScavengeBeforeFullGC</td><td>é»˜è®¤å¯ç”¨</td><td>åœ¨Full GCå‰è§¦å‘ä¸€æ¬¡Minor GC</td></tr><tr><td>-XX:+UseAltSigs</td><td>é™äºSolarisï¼Œé»˜è®¤å¯ç”¨</td><td>ä¸ºäº†é˜²æ­¢ä¸å…¶ä»–å‘é€ä¿¡å·çš„åº”ç”¨ç¨‹åºå†²çªï¼Œå…è®¸ä½¿ç”¨å€™è¡¥ä¿¡å·æ›¿ä»£ SIGUSR1å’ŒSIGUSR2</td></tr><tr><td>-XX:+UseBoundThreads</td><td>é™äºSolaris, é»˜è®¤å¯ç”¨</td><td>ç»‘å®šæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹åˆ°å†…æ ¸çº¿ç¨‹, å‡å°‘çº¿ç¨‹è¿›å…¥é¥¥é¥¿çŠ¶æ€ï¼ˆå¾—ä¸åˆ°ä»»ä½•cpu timeï¼‰çš„æ¬¡æ•°</td></tr><tr><td>-XX:-UseConcMarkSweepGC</td><td>é»˜è®¤ä¸å¯ç”¨</td><td>å¯ç”¨CMSä½åœé¡¿åƒåœ¾æ”¶é›†å™¨,å‡å°‘FGCçš„æš‚åœæ—¶é—´</td></tr><tr><td>-XX:+UseGCOverheadLimit</td><td>é»˜è®¤å¯ç”¨</td><td>é™åˆ¶GCçš„è¿è¡Œæ—¶é—´ã€‚å¦‚æœGCè€—æ—¶è¿‡é•¿ï¼Œå°±æŠ›OOM</td></tr><tr><td>-XX:+UseLWPSynchronization</td><td>é™äºsolarisï¼Œé»˜è®¤å¯ç”¨</td><td>ä½¿ç”¨è½»é‡çº§è¿›ç¨‹ï¼ˆå†…æ ¸çº¿ç¨‹ï¼‰æ›¿æ¢çº¿ç¨‹åŒæ­¥</td></tr><tr><td>-XX:-UseParallelGC</td><td>-serveræ—¶å¯ç”¨,å…¶ä»–æƒ…å†µä¸‹ï¼Œé»˜è®¤ä¸å¯ç”¨</td><td>ç­–ç•¥ä¸ºæ–°ç”Ÿä»£ä½¿ç”¨å¹¶è¡Œæ¸…é™¤ï¼Œå¹´è€ä»£ä½¿ç”¨å•çº¿ç¨‹Mark-Sweep-Compactçš„åƒåœ¾æ”¶é›†å™¨</td></tr><tr><td>-XX:-UseParallelOldGC</td><td>é»˜è®¤ä¸å¯ç”¨</td><td>ç­–ç•¥ä¸ºè€å¹´ä»£å’Œæ–°ç”Ÿä»£éƒ½ä½¿ç”¨å¹¶è¡Œæ¸…é™¤çš„åƒåœ¾æ”¶é›†å™¨</td></tr><tr><td>-XX:-UseSerialGC</td><td>-clientæ—¶å¯ç”¨,å…¶ä»–æƒ…å†µä¸‹ï¼Œé»˜è®¤ä¸å¯ç”¨</td><td>ä½¿ç”¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨</td></tr><tr><td>-XX:-UseSpinning</td><td>java1.4.2å’Œ1.5éœ€è¦æ‰‹åŠ¨å¯ç”¨, java6é»˜è®¤å·²å¯ç”¨</td><td>å¯ç”¨å¤šçº¿ç¨‹è‡ªæ—‹é”ä¼˜åŒ–</td></tr><tr><td>-XX:+UseTLAB</td><td>1.4.2ä»¥å‰å’Œä½¿ç”¨-clienté€‰é¡¹æ—¶ï¼Œé»˜è®¤ä¸å¯ç”¨ï¼Œå…¶ä½™ç‰ˆæœ¬é»˜è®¤å¯ç”¨</td><td>å¯ç”¨çº¿ç¨‹æœ¬åœ°ç¼“å­˜åŒº</td></tr><tr><td>-XX:+UseSplitVerifier</td><td>java5é»˜è®¤ä¸å¯ç”¨, java6é»˜è®¤å¯ç”¨</td><td>ä½¿ç”¨æ–°çš„Classç±»å‹æ ¡éªŒå™¨</td></tr><tr><td>-XX:+UseThreadPriorities</td><td>é»˜è®¤å¯ç”¨</td><td>ä½¿ç”¨æœ¬åœ°çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td>-XX:+UseVMInterruptibleIO</td><td>é™äºsolarisï¼Œé»˜è®¤å¯ç”¨</td><td>åœ¨solarisä¸­ï¼Œå…è®¸è¿è¡Œæ—¶ä¸­æ–­çº¿ç¨‹</td></tr></tbody></table><p>æ€§èƒ½å‚æ•°:</p><table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼æˆ–é™åˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-XX:+AggressiveOpts</td><td>JDK 5 update 6åå¼•å…¥ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¯ç”¨, JDK6é»˜è®¤å¯ç”¨</td><td>å¯ç”¨JVMå¼€å‘å›¢é˜Ÿæœ€æ–°çš„è°ƒä¼˜æˆæœã€‚ä¾‹å¦‚ç¼–è¯‘ä¼˜åŒ–ï¼Œåå‘é”ï¼Œå¹¶è¡Œå¹´è€ä»£æ”¶é›†ç­‰</td></tr><tr><td>-XX:CompileThreshold=10000</td><td>1000</td><td>é€šè¿‡JITç¼–è¯‘å™¨ï¼Œå°†æ–¹æ³•ç¼–è¯‘æˆæœºå™¨ç çš„è§¦å‘é˜€å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºè°ƒç”¨æ–¹æ³•çš„æ¬¡æ•°ï¼Œä¾‹å¦‚è°ƒ1000æ¬¡ï¼Œå°†æ–¹æ³•ç¼–è¯‘ä¸ºæœºå™¨ç </td></tr><tr><td>-XX:LargePageSizeInBytes=4m</td><td>é»˜è®¤4m, amd64ä½ï¼š2m</td><td>è®¾ç½®å †å†…å­˜çš„å†…å­˜é¡µå¤§å°</td></tr><tr><td>-XX:MaxHeapFreeRatio=70</td><td>70</td><td>GCåï¼Œå¦‚æœå‘ç°ç©ºé—²å †å†…å­˜å åˆ°æ•´ä¸ªé¢„ä¼°ä¸Šé™å€¼çš„70%ï¼Œåˆ™æ”¶ç¼©é¢„ä¼°ä¸Šé™å€¼</td></tr><tr><td>-XX:MaxNewSize=size</td><td>1.3.1 Sparc: 32m, 1.3.1 x86: 2.5m</td><td>æ–°ç”Ÿä»£å æ•´ä¸ªå †å†…å­˜çš„æœ€å¤§å€¼</td></tr><tr><td>-XX:MaxPermSize=64m</td><td>5.0ä»¥å: 64 bit VMsä¼šå¢å¤§é¢„è®¾å€¼çš„30%, 1.4 amd64: 96m, 1.3.1 -client: 32m, å…¶ä»–é»˜è®¤ 64m</td><td>Permï¼ˆä¿—ç§°æ–¹æ³•åŒºï¼‰å æ•´ä¸ªå †å†…å­˜çš„æœ€å¤§å€¼</td></tr><tr><td>-XX:MinHeapFreeRatio=40</td><td>40</td><td>GCåï¼Œå¦‚æœå‘ç°ç©ºé—²å †å†…å­˜å åˆ°æ•´ä¸ªé¢„ä¼°ä¸Šé™å€¼çš„40%ï¼Œåˆ™å¢å¤§ä¸Šé™å€¼</td></tr><tr><td>-XX:NewRatio=2</td><td>Sparc -client: 8, x86 -server: 8, x86 -client: 12, -client: 4 (1.3), 8 (1.3.1+), x86: 12, å…¶ä»–é»˜è®¤ 2</td><td>æ–°ç”Ÿä»£å’Œå¹´è€ä»£çš„å †å†…å­˜å ç”¨æ¯”ä¾‹, ä¾‹å¦‚2è¡¨ç¤ºæ–°ç”Ÿä»£å å¹´è€ä»£çš„1/2ï¼Œå æ•´ä¸ªå †å†…å­˜çš„1/3</td></tr><tr><td>-XX:NewSize=2.125m</td><td>5.0ä»¥å: 64 bit Vms ä¼šå¢å¤§é¢„è®¾å€¼çš„30%, x86: 1m, x86, 5.0ä»¥å: 640k, å…¶ä»–é»˜è®¤ 2.125m</td><td>æ–°ç”Ÿä»£é¢„ä¼°ä¸Šé™çš„é»˜è®¤å€¼</td></tr><tr><td>-XX:ReservedCodeCacheSize=32m</td><td>Solaris 64-bit, amd64, -server x86: 48m, 1.5.0_06ä¹‹å‰, Solaris 64-bit amd64: 1024m, å…¶ä»–é»˜è®¤ 32m</td><td>è®¾ç½®ä»£ç ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œç¼–è¯‘æ—¶ç”¨</td></tr><tr><td>-XX:SurvivorRatio=8</td><td>Solaris amd64: 6, Sparc in 1.3.1: 25, Solaris platforms 5.0ä»¥å‰: 32, å…¶ä»–é»˜è®¤ 8</td><td>Edenä¸Survivorçš„å ç”¨æ¯”ä¾‹ã€‚ä¾‹å¦‚8è¡¨ç¤ºï¼Œä¸€ä¸ªsurvivoråŒºå ç”¨ 1/8 çš„Edenå†…å­˜ï¼Œå³1/10çš„æ–°ç”Ÿä»£å†…å­˜ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯1/9ï¼Ÿ å› ä¸ºæˆ‘ä»¬çš„æ–°ç”Ÿä»£æœ‰2ä¸ªsurvivorï¼Œå³S0å’ŒS1ã€‚æ‰€ä»¥survivoræ€»å…±æ˜¯å ç”¨æ–°ç”Ÿä»£å†…å­˜çš„ 2/10ï¼ŒEdenä¸æ–°ç”Ÿä»£çš„å æ¯”åˆ™ä¸º 8/10</td></tr><tr><td>-XX:TargetSurvivorRatio=50</td><td>50</td><td>å®é™…ä½¿ç”¨çš„survivorç©ºé—´å¤§å°å æ¯”ã€‚é»˜è®¤æ˜¯50%ï¼Œæœ€é«˜90%</td></tr><tr><td>-XX:ThreadStackSize=512</td><td>Sparc: 512, Solaris x86: 320 (5.0ä»¥å‰ 256), Sparc 64 bit: 1024, Linux amd64: 1024 (5.0 ä»¥å‰ 0), å…¶ä»–é»˜è®¤ 512.</td><td>çº¿ç¨‹å †æ ˆå¤§å°</td></tr><tr><td>-XX:+UseBiasedLocking</td><td>JDK 5 update 6åå¼•å…¥ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¯ç”¨, JDK6é»˜è®¤å¯ç”¨</td><td>å¯ç”¨åå‘é”</td></tr><tr><td>-XX:+UseFastAccessorMethods</td><td>é»˜è®¤å¯ç”¨</td><td>ä¼˜åŒ–åŸå§‹ç±»å‹çš„getteræ–¹æ³•æ€§èƒ½(get/set:Primitive Type)</td></tr><tr><td>-XX:-UseISM</td><td>é»˜è®¤å¯ç”¨</td><td>å¯ç”¨solarisçš„ISM</td></tr><tr><td>-XX:+UseLargePages</td><td>JDK 5 update 5åå¼•å…¥ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¯ç”¨, JDK6é»˜è®¤å¯ç”¨</td><td>å¯ç”¨å¤§å†…å­˜åˆ†é¡µ</td></tr><tr><td>-XX:+UseMPSS</td><td>1.4.1 ä¹‹å‰: ä¸å¯ç”¨, å…¶ä½™ç‰ˆæœ¬é»˜è®¤å¯ç”¨</td><td>å¯ç”¨solarisçš„MPSSï¼Œä¸èƒ½ä¸ISMåŒæ—¶ä½¿ç”¨</td></tr><tr><td>-XX:+UseStringCache</td><td>é»˜è®¤å¼€å¯</td><td>å¯ç”¨ç¼“å­˜å¸¸ç”¨çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>-XX:AllocatePrefetchLines=1</td><td>1</td><td>Number of cache lines to load after the last object allocation using prefetch instructions generated in JIT compiled code. Default values are 1 if the last allocated object was an instance and 3 if it was an array.</td></tr><tr><td>-XX:AllocatePrefetchStyle=1</td><td>1</td><td>Generated code style for prefetch instructions. 0 â€“ no prefetch instructions are generate<em>d</em>, 1 â€“ execute prefetch instructions after each allocation, 2 â€“ use TLAB allocation watermark pointer to gate when prefetch instructions are executed.</td></tr><tr><td>-XX:+UseCompressedStrings</td><td>Java 6 update 21æœ‰ä¸€é€‰é¡¹</td><td>å…¶ä¸­ï¼Œå¯¹äºä¸éœ€è¦16ä½å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨byte[] è€Œéchar[]ã€‚å¯¹äºè®¸å¤šåº”ç”¨ï¼Œè¿™å¯ä»¥èŠ‚çœå†…å­˜ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ï¼ˆ5ï¼…-10ï¼…ï¼‰</td></tr><tr><td>-XX:+OptimizeStringConcat</td><td>åœ¨Java 6æ›´æ–°20ä¸­å¼•å…¥</td><td>ä¼˜åŒ–å­—ç¬¦ä¸²è¿æ¥æ“ä½œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹</td></tr></tbody></table><p>è°ƒè¯•å‚æ•°:</p><table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼æˆ–é™åˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-XX:-CITime</td><td></td><td>æ‰“å°å‘è´¹åœ¨JITç¼–è¯‘ä¸Šçš„æ—¶é—´</td></tr><tr><td>-XX:ErrorFile=./hs_err_pid<pid>.log</pid></td><td>JDK6ä¸­å¼•å…¥</td><td>é”™è¯¯æ–‡ä»¶</td></tr><tr><td>-XX:-ExtendedDTraceProbes</td><td>JDK6ä¸­å¼•å…¥ä»…åœ¨Solaris</td><td>å¯ç”¨æ€§èƒ½çš„å½±å“DTraceæ¢æµ‹å™¨</td></tr><tr><td>-XX:HeapDumpPath=./java_pid<pid>.hprof</pid></td><td>1.4.2 update 12, 5.0 update 7</td><td>æŒ‡å®šHeapDumpçš„æ–‡ä»¶è·¯å¾„æˆ–ç›®å½•</td></tr><tr><td>-XX:-HeapDumpOnOutOfMemoryError</td><td>1.4.2 update 12, 5.0 update 7</td><td>å½“æŠ›å‡ºOOMæ—¶è¿›è¡ŒHeapDump</td></tr><tr><td>-XX:OnError=â€<cmd args="">;<cmd args="">â€</cmd></cmd></td><td>1.4.2 update 9</td><td>å½“å‘ç”Ÿé”™è¯¯æ—¶æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„å‘½ä»¤</td></tr><tr><td>-XX:OnOutOfMemoryError=â€<cmd args="">; <cmd args="">â€</cmd></cmd></td><td>1.4.2 update 12, 6</td><td>å½“å‘ç”ŸOOMæ—¶æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„å‘½ä»¤</td></tr><tr><td>-XX:-PrintClassHistogram</td><td>1.4.2</td><td>å½“Ctrl+Breakå‘ç”Ÿæ—¶æ‰“å°Classå®ä¾‹ä¿¡æ¯,ä¸jmap -histoç›¸åŒ</td></tr><tr><td>-XX:-PrintConcurrentLocks</td><td>6</td><td>å½“Ctrl+Breakå‘ç”Ÿæ—¶æ‰“å°java.util.concurrentçš„é”ä¿¡æ¯, ä¸jstack -lç›¸åŒ</td></tr><tr><td>-XX:-PrintCommandLineFlags</td><td>5</td><td>æ‰“å°å‘½ä»¤è¡Œä¸Šçš„æ ‡è®°</td></tr><tr><td>-XX:-PrintCompilation</td><td></td><td>å½“æ–¹æ³•è¢«ç¼–è¯‘æ—¶æ‰“å°ä¿¡æ¯</td></tr><tr><td>-XX:-PrintGC</td><td></td><td>å½“GCå‘ç”Ÿæ—¶æ‰“å°ä¿¡æ¯</td></tr><tr><td>-XX:-PrintGCDetails</td><td>1.4.0</td><td>æ‰“å°GCè¯¦ç»†ä¿¡æ¯</td></tr><tr><td>-XX:-PrintGCTimeStamps</td><td>1.4.0</td><td>æ‰“å°GCç”¨æ—¶</td></tr><tr><td>-XX:-PrintTenuringDistribution</td><td></td><td>æ‰“å°Tenuringå¹´é¾„ä¿¡æ¯</td></tr><tr><td>-XX:-TraceClassLoading</td><td></td><td>è·Ÿè¸ªç±»åŠ è½½</td></tr><tr><td>-XX:-TraceClassLoadingPreorder</td><td>1.4.2</td><td>è·Ÿè¸ªæ‰€æœ‰åŠ è½½çš„å¼•ç”¨ç±»</td></tr><tr><td>-XX:-TraceClassResolution</td><td>1.4.2</td><td>è·Ÿè¸ªå¸¸é‡æ± çš„å˜åŒ–</td></tr><tr><td>-XX:-TraceClassUnloading</td><td></td><td>è·Ÿè¸ªç±»çš„å¸è½½</td></tr><tr><td>-XX:-TraceLoaderConstraints</td><td>6</td><td>Trace recording of loader constraints</td></tr><tr><td>-XX:+PerfSaveDataToFile</td><td></td><td>é€€å‡ºæ—¶ä¿å­˜jvmstatäºŒè¿›åˆ¶æ–‡ä»¶</td></tr><tr><td>-XX:ParallelGCThreads=</td><td></td><td>è®¾ç½®æ–°ç”Ÿä»£ä¸è€å¹´ä»£å¹¶è¡Œåƒåœ¾å›æ”¶å™¨çš„çº¿ç¨‹æ•°</td></tr><tr><td>-XX:+UseCompressedOops</td><td></td><td>Enables the use of compressed pointers (object references represented as 32 bit offsets instead of 64-bit pointers) for optimized 64-bit performance with Java heap sizes less than 32gb.</td></tr><tr><td>-XX:+AlwaysPreTouch</td><td></td><td>Pre-touch the Java heap during JVM initialization. Every page of the heap is thus demand-zeroed during initialization rather than incrementally during application execution.</td></tr><tr><td>-XX:AllocatePrefetchDistance=</td><td></td><td>Sets the prefetch distance for object allocation. Memory about to be written with the value of new objects is prefetched into cache at this distance (in bytes) beyond the address of the last allocated object. Each Java thread has its own allocation point. The default value varies with the platform on which the JVM is running.</td></tr><tr><td>-XX:InlineSmallCode=</td><td></td><td>å½“ç¼–è¯‘çš„ä»£ç å°äºæŒ‡å®šçš„å€¼æ—¶,å†…è”ç¼–è¯‘çš„ä»£ç </td></tr><tr><td>-XX:MaxInlineSize=35</td><td></td><td>å†…è”æ–¹æ³•çš„æœ€å¤§å­—èŠ‚æ•°</td></tr><tr><td>-XX:FreqInlineSize=</td><td></td><td>å†…è”é¢‘ç¹æ‰§è¡Œçš„æ–¹æ³•çš„æœ€å¤§å­—èŠ‚ç å¤§å°</td></tr><tr><td>-XX:LoopUnrollLimit=</td><td></td><td>Unroll loop bodies with server compiler intermediate representation node count less than this value. The limit used by the server compiler is a function of this value, not the actual value. The default value varies with the platform on which the JVM is running.</td></tr><tr><td>-XX:InitialTenuringThreshold=7</td><td></td><td>è®¾ç½®åˆå§‹çš„å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­æœ€å¤§å­˜æ´»æ¬¡æ•°</td></tr><tr><td>-XX:MaxTenuringThreshold=</td><td></td><td>è®¾ç½®å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­æœ€å¤§çš„å­˜æ´»æ¬¡æ•°,æœ€å¤§å€¼15,å¹¶è¡Œå›æ”¶æœºåˆ¶é»˜è®¤ä¸º15,CMSé»˜è®¤ä¸º4</td></tr></tbody></table><h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><blockquote><p>æŸ¥çœ‹æœåŠ¡è®¾ç½®çš„jvm</p><p>jps -v</p><p>æŸ¥çœ‹æœåŠ¡jvmçš„é»˜è®¤å‚æ•°</p><p>jinfo -flags PID</p></blockquote><ul><li><p>å‚è€ƒkafkaæœåŠ¡çš„è¿è¡Œå‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-server</span><br><span class="line">-XX:+UseG1GC</span><br><span class="line">-XX:MaxGCPauseMillis=20</span><br><span class="line">-XX:InitiatingHeapOccupancyPercent=35</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent</span><br></pre></td></tr></table></figure><p><strong>-XX:MaxGCPauseMillis=200</strong></p><p>ä¸ºæ‰€éœ€çš„æœ€é•¿æš‚åœæ—¶é—´è®¾ç½®ç›®æ ‡å€¼ã€‚é»˜è®¤å€¼æ˜¯ 200 æ¯«ç§’ã€‚è¿™ä¸ªæ•°å€¼æ˜¯ä¸€ä¸ªè½¯ç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´JVMä¼šå°½ä¸€åˆ‡èƒ½åŠ›æ»¡è¶³è¿™ä¸ªæš‚åœè¦æ±‚ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ¯æ¬¡æš‚åœä¸€å®šåœ¨è¿™ä¸ªè¦æ±‚ä¹‹å†…ã€‚</p><p>æ ¹æ®æµ‹è¯•å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™ä¸ªå€¼è®¾å®šæˆ50æ¯«ç§’æˆ–è€…æ›´ä½çš„è¯ï¼ŒJVMä¸ºäº†è¾¾åˆ°è¿™ä¸ªè¦æ±‚ä¼šå°†å¹´è½»ä»£å†…å­˜ç©ºé—´è®¾å®šçš„éå¸¸å°ï¼Œä»è€Œå¯¼è‡´youngGCçš„é¢‘ç‡å¤§å¤§å¢é«˜ã€‚æ‰€ä»¥æˆ‘ä»¬å¹¶ä¸è®¾å®šè¿™ä¸ªå‚æ•°ã€‚</p><p><strong>-XX:InitiatingHeapOccupancyPercent=45</strong></p><p>è®¾ç½®è§¦å‘æ ‡è®°å‘¨æœŸçš„ Java å †å ç”¨ç‡é˜ˆå€¼ã€‚é»˜è®¤å ç”¨ç‡æ˜¯æ•´ä¸ª Java å †çš„ 45%ã€‚å°±æ˜¯è¯´å½“ä½¿ç”¨å†…å­˜å åˆ°å †æ€»å¤§å°çš„45%çš„æ—¶å€™ï¼ŒG1å°†å¼€å§‹<strong>å¹¶å‘æ ‡è®°é˜¶æ®µã€‚</strong>ä¸ºæ··åˆGCåšå‡†å¤‡ï¼Œè¿™ä¸ªæ•°å€¼åœ¨æµ‹è¯•çš„æ—¶å€™æˆ‘æƒ³è®©æ··åˆGCæ™šä¸€äº›å¤„ç†æ‰€ä»¥è®¾å®šæˆäº†70%ï¼Œç»è¿‡è§‚å¯Ÿå‘ç°å¦‚æœè¿™ä¸ªæ•°å€¼è®¾å®šè¿‡å¤§ä¼šå¯¼è‡´JVMæ— æ³•å¯åŠ¨å¹¶å‘æ ‡è®°ï¼Œç›´æ¥è¿›è¡ŒFullGCå¤„ç†ã€‚</p><p>G1çš„FullGCæ˜¯å•çº¿ç¨‹ï¼Œä¸€ä¸ª22Gçš„å¯¹GCå®Œæˆéœ€è¦8Sçš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼åœ¨è°ƒä¼˜çš„æ—¶å€™å†™çš„45%</p></li></ul><blockquote><p>ä¹‹å‰æŸ¥çœ‹igniteï¼Œ12ç§’å›æ”¶äº†71G</p></blockquote>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ‰“å¡</title>
      <link href="/2021/04/16/$%E6%89%93%E5%8D%A1/"/>
      <url>/2021/04/16/$%E6%89%93%E5%8D%A1/</url>
      <content type="html"><![CDATA[<blockquote><p>é‡‘é’±æ¢ä¸æ¥çš„ä¸œè¥¿æ‰ç®—çè´µï¼Œæ¯”å¦‚æ—¶é—´ã€å¥åº·ã€çŸ¥è¯†</p></blockquote><p>âœ”ï¸ </p><h3 id="èº«ä½“æ˜¯æœ¬é’±"><a href="#èº«ä½“æ˜¯æœ¬é’±" class="headerlink" title="èº«ä½“æ˜¯æœ¬é’±"></a>èº«ä½“æ˜¯æœ¬é’±</h3><h3 id="è‹±è¯­æ˜¯ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€è¯­è¨€"><a href="#è‹±è¯­æ˜¯ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€è¯­è¨€" class="headerlink" title="è‹±è¯­æ˜¯ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€è¯­è¨€"></a>è‹±è¯­æ˜¯ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€è¯­è¨€</h3><pre><code>April   2021</code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td><a href="#41">1</a></td><td><a href="#42">2</a></td><td><a href="#43">3</a></td><td></td></tr><tr><td> <a href="#44">4</a></td><td><a href="#45">5</a></td><td><a href="#46">6</a></td><td><a href="#47">7</a></td><td><a href="#48">8</a></td><td><a href="#49">9</a></td><td><a href="#410">10</a></td><td></td></tr><tr><td> <a href="#411">11</a></td><td><a href="#412">12</a></td><td><a href="#413">13</a></td><td><a href="#414">14</a></td><td><a href="#415">15</a></td><td><a href="#416">16</a> âœ”ï¸</td><td><a href="#417">17</a></td><td></td></tr><tr><td> <a href="#418">18</a></td><td><a href="#419">19</a></td><td><a href="#420">20</a></td><td><a href="#421">21</a></td><td><a href="#422">22</a></td><td><a href="#423">23</a></td><td><a href="#424">24</a></td><td></td></tr><tr><td> <a href="#425">25</a></td><td><a href="#426">26</a></td><td><a href="#427">27</a></td><td><a href="#428">28</a></td><td><a href="#429">29</a></td><td><a href="#430">30</a></td><td></td></tr></tbody></table><pre><code>June   2021          </code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat </th></tr></thead><tbody><tr><td></td><td></td><td><a href="#61">1</a></td><td><a href="#62">2</a></td><td><a href="#63">3</a></td><td><a href="#64">4</a></td><td><a href="#65">5</a></td><td></td></tr><tr><td> <a href="#66">6</a></td><td><a href="#67">7</a></td><td><a href="#68">8</a></td><td><a href="#69">9</a></td><td><a href="#610">10</a></td><td><a href="#611">11</a></td><td><a href="#612">12</a></td><td></td></tr><tr><td> <a href="#613">13</a></td><td><a href="#614">14</a></td><td><a href="#615">15</a></td><td><a href="#616">16</a></td><td><a href="#617">17</a></td><td><a href="#618">18</a></td><td><a href="#619">19</a></td><td></td></tr><tr><td> <a href="#620">20</a></td><td><a href="#621">21</a></td><td><a href="#622">22</a></td><td><a href="#623">23</a></td><td><a href="#624">24</a></td><td><a href="#625">25</a></td><td><a href="#626">26</a></td><td></td></tr><tr><td> <a href="#627">27</a></td><td><a href="#628">28</a></td><td><a href="#629">29</a>âœ”ï¸</td><td><a href="#630">30</a>âœ”ï¸</td><td></td></tr></tbody></table><pre><code>July   2021          </code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat </th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td><a href="#2021å¹´07æœˆ01æ—¥">1</a></td><td><a href="#72">2</a></td><td><a href="#73">3</a></td><td></td></tr><tr><td> <a href="#74">4</a></td><td><a href="#75">5</a></td><td><a href="#76">6</a></td><td><a href="#77">7</a></td><td><a href="#78">8</a></td><td><a href="#79">9</a></td><td><a href="#710">10</a></td><td></td></tr><tr><td> <a href="#711">11</a></td><td><a href="#712">12</a></td><td><a href="#713">13</a></td><td><a href="#714">14</a></td><td><a href="#715">15</a></td><td><a href="#716">16</a></td><td><a href="#717">17</a></td><td></td></tr><tr><td> <a href="#718">18</a></td><td><a href="#719">19</a></td><td><a href="#720">20</a></td><td><a href="#721">21</a></td><td><a href="#722">22</a></td><td><a href="#723">23</a></td><td><a href="#724">24</a></td><td></td></tr><tr><td> <a href="#725">25</a></td><td><a href="#726">26</a></td><td><a href="#727">27</a></td><td><a href="#728">28</a></td><td><a href="#729">29</a></td><td><a href="#730">30</a></td><td><a href="#731">31</a></td><td></td></tr></tbody></table><h1 id="2021å¹´07æœˆ01æ—¥"><a href="#2021å¹´07æœˆ01æ—¥" class="headerlink" title="2021å¹´07æœˆ01æ—¥"></a>2021å¹´07æœˆ01æ—¥</h1><p>æµ‹è¯•é“¾æ¥<br>åé¢å¯ä»¥ä¿®æ”¹è¿æ¥å¤„æ ‡é¢˜ç”±71æ”¹ä¸º2021å¹´07æœˆ01æ—¥</p>]]></content>
      
      <categories>
          
          <category> will </category>
          
      </categories>
      
      
        <tags>
            
            <tag> record </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Daily&amp;Flag</title>
      <link href="/2021/04/14/$Daily/"/>
      <url>/2021/04/14/$Daily/</url>
      <content type="html"><![CDATA[<h3 id="2021-04-14"><a href="#2021-04-14" class="headerlink" title="2021-04-14"></a>2021-04-14</h3><p>ä»Šå¤©è®°å½•äº†ä¸€ä¸ªigniteé—®é¢˜ï¼Œå¹¶æ›´æ–°äºpostï¼Œæäº¤åˆ°githubï¼Œæ‰“å¼€githubå‘ç°2020å¹´åªæœ‰å››ä¸ªç»¿ç‚¹ã€‚<br>2021å¹´ä»¥åçš„æ—¶é—´ï¼Œäº‰å–ä¸€ä¸ªå‘¨å¯ä»¥æœ‰ä¸€ä¸ªç»¿ç‚¹å§</p><h3 id="2021-04-16"><a href="#2021-04-16" class="headerlink" title="2021-04-16"></a>2021-04-16</h3>]]></content>
      
      <categories>
          
          <category> will </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flag </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Awareness</title>
      <link href="/2021/04/14/$Awareness/"/>
      <url>/2021/04/14/$Awareness/</url>
      <content type="html"><![CDATA[<ul><li><p>è¡ŒåŠ¨ä¸ºç‹ï¼Œæ€æƒ³ä¸ºå¦ƒ</p></li><li><p>è‡ªå¾‹ä¸”ä¸“æ³¨</p></li></ul>]]></content>
      
      <categories>
          
          <category> will </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Awareness </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Output</title>
      <link href="/2021/04/14/$Output/"/>
      <url>/2021/04/14/$Output/</url>
      <content type="html"><![CDATA[<blockquote><p>çŸ¥è¯†çš„æˆé•¿å‘¨æœŸï¼Œåªæœ‰è¾“å…¥ï¼Œæ²¡æœ‰è¾“å‡ºï¼Œé‚£ä¹ˆè¾“å…¥å°±å¤±å»äº†æ„ä¹‰ï¼Œè¾“å…¥çš„ä¸œè¥¿ç”Ÿå‘½ä¹Ÿä¸ä¼šé•¿ä¹…ï¼Œå¹¶ä¸”æµªè´¹äº†ä¹‹å‰ä»˜å‡ºçš„æ—¶é—´ã€‚<br>è¾“å‡ºï¼Œä¸é™äºåšä¸€ä»¶äº‹æƒ…ï¼Œè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œè¿˜å¯èƒ½åªæ˜¯ä¸€è¡Œæ–‡å­—ï¼Œä¸€ç‚¹é¢†æ‚Ÿã€‚</p></blockquote>]]></content>
      
      <categories>
          
          <category> will </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Output </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zookeeper learn</title>
      <link href="/2020/10/08/zookeeper%20learn/"/>
      <url>/2020/10/08/zookeeper%20learn/</url>
      <content type="html"><![CDATA[<h3 id="æ–°å¢—èŠ‚ç‚¹"><a href="#æ–°å¢—èŠ‚ç‚¹" class="headerlink" title="æ–°å¢—èŠ‚ç‚¹"></a>æ–°å¢—èŠ‚ç‚¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create [-s] [-e] path data #å…¶ä¸­-s ä¸ºæœ‰åºèŠ‚ç‚¹ï¼Œ-eä¸´æ—¶èŠ‚ç‚¹ã€‚ä¸å†™ -s/-e é»˜è®¤ä¸ºåˆ›å»ºæŒä¹…åŒ–èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹èŠ‚ç‚¹"><a href="#æŸ¥çœ‹èŠ‚ç‚¹" class="headerlink" title="æŸ¥çœ‹èŠ‚ç‚¹"></a>æŸ¥çœ‹èŠ‚ç‚¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get path</span><br></pre></td></tr></table></figure><p><img src="./img/zkInfo.png" alt=""></p><ul><li><p>æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat path  #è¿”å›ç»“æœå’Œgetå‘½ä»¤ç±»ä¼¼ï¼Œä½†ä¸ä¼šè¿”å›èŠ‚ç‚¹æ•°æ®å†…å®¹ã€‚</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä¿®æ”¹èŠ‚ç‚¹"><a href="#ä¿®æ”¹èŠ‚ç‚¹" class="headerlink" title="ä¿®æ”¹èŠ‚ç‚¹"></a>ä¿®æ”¹èŠ‚ç‚¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set path data [dataVersion]</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨setå‘½ä»¤ä¿®æ”¹èŠ‚ç‚¹æ•°æ®ã€‚ä¹Ÿå¯ä»¥åŸºäºç‰ˆæœ¬å·è¿›è¡Œä¿®æ”¹ï¼Œå½“ä¼ å…¥çš„dataVersionä¸å½“å‰ç‰ˆæœ¬å·ä¸ä¸€è‡´æ—¶ï¼Œzookeeperä¼šæ‹’ç»ä¿®æ”¹ã€‚</p><p><img src="./img/ä¿®æ”¹èŠ‚ç‚¹.png" alt=""></p><h3 id="è¿”å›èŠ‚ç‚¹åˆ—è¡¨"><a href="#è¿”å›èŠ‚ç‚¹åˆ—è¡¨" class="headerlink" title="è¿”å›èŠ‚ç‚¹åˆ—è¡¨"></a>è¿”å›èŠ‚ç‚¹åˆ—è¡¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls   path</span><br><span class="line">ls2  path</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete path [dataVersion]</span><br></pre></td></tr></table></figure><p> ä¸æ›´æ–°èŠ‚ç‚¹ç±»ä¼¼ï¼Œåˆ é™¤ä¹Ÿå¯ä»¥ä¼ å…¥ç‰ˆæœ¬å·ï¼Œå½“ä¼ å…¥çš„dataVersionä¸å½“å‰ç‰ˆæœ¬å·ä¸ä¸€è‡´æ—¶ï¼Œzookeeperä¼šæ‹’ç»åˆ é™¤ã€‚</p><ul><li><p>è¦æƒ³åˆ é™¤æŸä¸ªèŠ‚ç‚¹åŠå…¶åä»£èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’åˆ é™¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmr path</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> zookeeper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javaæ€§èƒ½è°ƒä¼˜å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/11/11/java%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/11/11/java%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h2 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ã€‚</p><p>å­¦ä¼šé€è¿‡ç°è±¡çœ‹æœ¬è´¨</p><p><strong>1. æ‰å®çš„è®¡ç®—æœºåŸºç¡€</strong></p><blockquote><p>æˆ‘ä»¬éœ€è¦å‚¨å¤‡è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿã€ç½‘ç»œåè®®ä»¥åŠæ•°æ®åº“ç­‰åŸºç¡€çŸ¥è¯†ã€‚å…·ä½“çš„æ€§èƒ½é—®é¢˜å¾€å¾€è¿˜ä¸ä¼ è¾“ã€è®¡ç®—ã€å­˜å‚¨æ•°æ®ç­‰ç›¸å…³ï¼Œé‚£æˆ‘ä»¬è¿˜éœ€è¦å‚¨å¤‡æ•°æ®ç»“æ„ã€ç®—æ³•ä»¥åŠæ•°å­¦ç­‰åŸºç¡€çŸ¥è¯†ã€‚</p></blockquote><p><strong>2. ä¹ æƒ¯é€è¿‡æºç äº†è§£æŠ€æœ¯æœ¬è´¨</strong></p><blockquote><p>æˆ‘ä»¬éœ€è¦æ·±å…¥æºç ï¼Œé€šè¿‡åˆ†ææ¥å­¦ä¹ ã€æ€»ç»“ä¸€é¡¹æŠ€æœ¯çš„å®ç°åŸç†å’Œä¼˜ç¼ºç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ›´å®¢è§‚åœ°å»å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ï¼Œè¿˜èƒ½é€è¿‡æºç æ¥å­¦ä¹ ç‰›äººçš„æ€ç»´æ–¹å¼ï¼Œæ”¶è·æ›´å¥½çš„ç¼–ç å®ç°æ–¹å¼ã€‚</p></blockquote><p><strong>3. å–„äºè¿½é—®å’Œæ€»ç»“</strong></p><blockquote><p>â€œçŸ¥å…¶ç„¶ä¸”çŸ¥æ‰€ä»¥ç„¶â€æ‰æ˜¯æˆ‘ä»¬ç§¯ç´¯ç»éªŒçš„å…³é”®ã€‚çŸ¥é“äº†ä¸€é¡¹æŠ€æœ¯èƒŒåçš„å®ç°åŸç†ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œåšåˆ°è§¦ç±»æ—é€šã€‚</p></blockquote><h2 id="è°ƒä¼˜æ”¿ç­–"><a href="#è°ƒä¼˜æ”¿ç­–" class="headerlink" title="è°ƒä¼˜æ”¿ç­–"></a>è°ƒä¼˜æ”¿ç­–</h2><ul><li>åˆ†ææŸ¥æ‰¾é—®é¢˜æ˜¯ä¸€ä¸ªå¤æ‚è€Œåˆç»†è‡´çš„è¿‡ç¨‹ï¼ŒæŸä¸ªæ€§èƒ½é—®é¢˜å¯èƒ½æ˜¯ä¸€ä¸ªåŸå› å¯¼è‡´çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯å‡ ä¸ªåŸå› å…±åŒå¯¼è‡´çš„ç»“æœã€‚æˆ‘ä»¬åˆ†ææŸ¥æ‰¾é—®é¢˜å¯ä»¥é‡‡ç”¨è‡ªä¸‹è€Œä¸Šçš„æ–¹å¼ï¼Œè€Œæˆ‘ä»¬è§£å†³ç³»ç»Ÿæ€§èƒ½é—®é¢˜ï¼Œåˆ™å¯ä»¥é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„æ–¹å¼é€çº§ä¼˜åŒ–ã€‚</li></ul><p><strong>1. ä¼˜åŒ–ä»£ç </strong></p><p><strong>2. ä¼˜åŒ–è®¾è®¡</strong></p><p><strong>3. ä¼˜åŒ–ç®—æ³•</strong></p><p><strong>4. æ—¶é—´æ¢ç©ºé—´</strong></p><p><strong>5. ç©ºé—´æ¢æ—¶é—´</strong></p><p><strong>6. å‚æ•°è°ƒä¼˜</strong></p><p><strong>7. å…œåº•ç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§</strong></p><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><p><strong>æ•°ç»„</strong>ï¼šé‡‡ç”¨ä¸€æ®µè¿ç»­çš„å­˜å‚¨å•å…ƒæ¥å­˜å‚¨æ•°æ®ã€‚å¯¹äºæŒ‡å®šä¸‹æ ‡çš„æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œä½†åœ¨æ•°ç»„ä¸­é—´ä»¥åŠå¤´éƒ¨æ’å…¥æ•°æ®æ—¶ï¼Œéœ€è¦å¤åˆ¶ç§»åŠ¨åé¢çš„å…ƒç´ ã€‚</p><p><strong>é“¾è¡¨</strong>ï¼šä¸€ç§åœ¨ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­ã€éé¡ºåºçš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥æ¬¡åºå®ç°çš„ã€‚ç”±äºé“¾è¡¨ä¸ç”¨å¿…é¡»æŒ‰é¡ºåºå­˜å‚¨ï¼Œæ‰€ä»¥é“¾è¡¨åœ¨æ’å…¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ° O(1) çš„å¤æ‚åº¦ï¼Œä½†æŸ¥æ‰¾ä¸€ä¸ªç»“ç‚¹æˆ–è€…è®¿é—®ç‰¹å®šç¼–å·çš„ç»“ç‚¹éœ€è¦ O(n) çš„æ—¶é—´ã€‚</p><p><strong>å“ˆå¸Œè¡¨</strong>ï¼šæ ¹æ®å…³é”®ç å€¼ï¼ˆKey valueï¼‰ç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚é€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšå“ˆå¸Œå‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å°±å«åšå“ˆå¸Œè¡¨ã€‚</p><p><strong>æ ‘</strong>ï¼šç”± nï¼ˆnâ‰¥1ï¼‰ä¸ªæœ‰é™ç»“ç‚¹ç»„æˆçš„ä¸€ä¸ªå…·æœ‰å±‚æ¬¡å…³ç³»çš„é›†åˆï¼Œå°±åƒæ˜¯ä¸€æ£µå€’æŒ‚çš„æ ‘ã€‚</p><h3 id="å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–"><a href="#å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–"></a>å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–</h3><p><a href="https://imgchr.com/i/MGD7wV" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/13/MGD7wV.md.jpg" alt="MGD7wV.md.jpg"></a></p><ul><li><p>ä¸€ä¸ª char å­—ç¬¦å  16 ä½ï¼Œ2 ä¸ªå­—èŠ‚ã€‚è¿™ä¸ªæƒ…å†µä¸‹ï¼Œå­˜å‚¨å•å­—èŠ‚ç¼–ç å†…çš„å­—ç¬¦ï¼ˆå ä¸€ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼‰å°±æ˜¾å¾—éå¸¸æµªè´¹ã€‚JDK1.9 çš„ String ç±»ä¸ºäº†èŠ‚çº¦å†…å­˜ç©ºé—´ï¼Œäºæ˜¯ä½¿ç”¨äº†å  8 ä½ï¼Œ1 ä¸ªå­—èŠ‚çš„ byte æ•°ç»„æ¥å­˜æ”¾å­—ç¬¦ä¸²</p></li><li><p>String å¯¹è±¡çš„ä¸å¯å˜æ€§</p></li><li><p>å¯¹è±¡å’Œå¯¹è±¡å¼•ç”¨</p></li><li><p>ä½¿ç”¨ String.intern æ¥èŠ‚çœå†…å­˜ç©ºé—´ï¼Œä»è€Œä¼˜åŒ– String å¯¹è±¡çš„å­˜å‚¨</p><blockquote><p>å…·ä½“åšæ³•å°±æ˜¯ï¼Œåœ¨æ¯æ¬¡èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨ String çš„ intern æ–¹æ³•ï¼Œå¦‚æœå¸¸é‡æ± ä¸­æœ‰ç›¸åŒå€¼ï¼Œå°±ä¼šé‡å¤ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡å¼•ç”¨ï¼Œè¿™æ ·ä¸€å¼€å§‹çš„å¯¹è±¡å°±å¯ä»¥è¢«å›æ”¶æ‰ã€‚è¿™ç§æ–¹å¼å¯ä»¥ä½¿é‡å¤æ€§éå¸¸é«˜çš„åœ°å€ä¿¡æ¯å­˜å‚¨å¤§å°ä» 20G é™åˆ°å‡ ç™¾å…†ã€‚</p><p>å¦‚æœè°ƒç”¨ intern æ–¹æ³•ï¼Œä¼šå»æŸ¥çœ‹å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦æœ‰ç­‰äºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±åœ¨å¸¸é‡æ± ä¸­æ–°å¢è¯¥å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ï¼›å¦‚æœæœ‰ï¼Œå°±è¿”å›å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²å¼•ç”¨ã€‚å †å†…å­˜ä¸­åŸæœ‰çš„å¯¹è±¡ç”±äºæ²¡æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼Œå°†ä¼šé€šè¿‡åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String a =<span class="keyword">new</span> String(<span class="string">"abc"</span>).intern();</span><br><span class="line">String b = <span class="keyword">new</span> String(<span class="string">"abc"</span>).intern();</span><br><span class="line">      </span><br><span class="line"><span class="keyword">if</span>(a==b) &#123;<span class="comment">// a å’Œ b å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</span></span><br><span class="line">    System.out.print(<span class="string">"a==b"</span>);<span class="comment">//æ­£å¸¸è¾“å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”¨ String.indexOf() æ–¹æ³•ä»£æ›¿ Split() æ–¹æ³•å®Œæˆå­—ç¬¦ä¸²çš„åˆ†å‰² </p></li></ul><h3 id="æ…é‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ…é‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ…é‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>æ…é‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h3><p><a href="https://imgchr.com/i/MGDWWQ" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/13/MGDWWQ.md.jpg" alt="MGDWWQ.md.jpg"></a></p><blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªç”¨æ­£åˆ™ç¬¦å·å†™å‡ºçš„å…¬å¼ï¼Œç¨‹åºå¯¹è¿™ä¸ªå…¬å¼è¿›è¡Œè¯­æ³•åˆ†æï¼Œå»ºç«‹ä¸€ä¸ªè¯­æ³•åˆ†ææ ‘ï¼Œå†æ ¹æ®è¿™ä¸ªåˆ†ææ ‘ç»“åˆæ­£åˆ™è¡¨è¾¾å¼çš„å¼•æ“ç”Ÿæˆæ‰§è¡Œç¨‹åºï¼ˆè¿™ä¸ªæ‰§è¡Œç¨‹åºæˆ‘ä»¬æŠŠå®ƒç§°ä½œçŠ¶æ€æœºï¼Œä¹Ÿå«çŠ¶æ€è‡ªåŠ¨æœºï¼‰ï¼Œç”¨äºå­—ç¬¦åŒ¹é…ã€‚</p><p>å¦‚æœä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼èƒ½ä½¿ä½ çš„ä»£ç ç®€æ´æ–¹ä¾¿ï¼Œé‚£ä¹ˆåœ¨åšå¥½æ€§èƒ½æ’æŸ¥çš„å‰æä¸‹ï¼Œå¯ä»¥å»ä½¿ç”¨ï¼›å¦‚æœä¸èƒ½ï¼Œé‚£ä¹ˆæ­£åˆ™è¡¨è¾¾å¼èƒ½ä¸ç”¨å°±ä¸ç”¨ï¼Œä»¥æ­¤é¿å…é€ æˆæ›´å¤šçš„æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><h3 id="ArrayList-VS-LinkedList"><a href="#ArrayList-VS-LinkedList" class="headerlink" title="ArrayList VS LinkedList"></a>ArrayList VS LinkedList</h3><ul><li>ç”±äº ArrayList æ˜¯æ•°ç»„å®ç°çš„ï¼Œè€Œæ•°ç»„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåœ¨æ·»åŠ å…ƒç´ åˆ°æ•°ç»„å¤´éƒ¨çš„æ—¶å€™ï¼Œéœ€è¦å¯¹å¤´éƒ¨ä»¥åçš„æ•°æ®è¿›è¡Œå¤åˆ¶é‡æ’ï¼Œæ‰€ä»¥æ•ˆç‡å¾ˆä½ï¼›è€Œ LinkedList æ˜¯åŸºäºé“¾è¡¨å®ç°ï¼Œåœ¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šé€šè¿‡å¾ªç¯æŸ¥æ‰¾åˆ°æ·»åŠ å…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœè¦æ·»åŠ çš„ä½ç½®å¤„äº List çš„å‰åŠæ®µï¼Œå°±ä»å‰å¾€åæ‰¾ï¼›è‹¥å…¶ä½ç½®å¤„äºååŠæ®µï¼Œå°±ä»åå¾€å‰æ‰¾ã€‚å› æ­¤ LinkedList æ·»åŠ å…ƒç´ åˆ°å¤´éƒ¨æ˜¯éå¸¸é«˜æ•ˆçš„ã€‚</li><li>LinkedList çš„ for å¾ªç¯æ€§èƒ½æ˜¯æœ€å·®çš„ï¼Œè€Œ ArrayList çš„ for å¾ªç¯æ€§èƒ½æ˜¯æœ€å¥½çš„ã€‚</li></ul><h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><p><a href="https://imgchr.com/i/MY0E6A" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/14/MY0E6A.md.jpg" alt="MY0E6A.md.jpg"></a></p>]]></content>
      
      <categories>
          
          <category> course </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ignite snippet</title>
      <link href="/2019/11/01/ignite_snippet/"/>
      <url>/2019/11/01/ignite_snippet/</url>
      <content type="html"><![CDATA[<h3 id="ignite-2-7-0"><a href="#ignite-2-7-0" class="headerlink" title="ignite-2.7.0"></a>ignite-2.7.0</h3><ul><li><p>ç¼–è¯‘ignite-coreæ¨¡å—çš„æ—¶å€™éœ€è¦ä½¿ç”¨jdk8ï¼Œå› ä¸ºä¼šæŠ¥jdk.internal.misc.SharedSecretsæ‰¾ä¸åˆ°çš„é”™è¯¯</p><p>åŸå› ï¼šä¼°è®¡æ˜¯åœ¨GridUnsafe.javaä¸­çš„miscPackageæ–¹æ³•ä»¥åŠjavaNioAccessObjectçš„<code>Class&lt;?&gt; cls = Class.forName(pkgName + &quot;.misc.SharedSecrets&quot;);</code>å‡ºç°çš„é—®é¢˜ï¼Œjdk11ä¸­SharedSecretså‡ºç°çš„ä½ç½®æ˜¯<code>jdk.internal.access.SharedSecrets</code></p></li></ul><h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h3><ul><li>Igniteçš„åŸç”ŸæŒä¹…åŒ–ä¼šåœ¨ç£ç›˜ä¸Šå­˜å‚¨ä¸€ä¸ªæ•°æ®çš„è¶…é›†ï¼Œä»¥åŠæ ¹æ®å®¹é‡åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€ä¸ªå­é›†ã€‚æ¯”å¦‚ï¼Œå¦‚æœæœ‰100ä¸ªæ¡ç›®ï¼Œç„¶åå†…å­˜åªèƒ½å­˜å‚¨20æ¡ï¼Œé‚£ä¹ˆç£ç›˜ä¸Šä¼šå­˜å‚¨æ‰€æœ‰çš„100æ¡ï¼Œç„¶åä¸ºäº†æé«˜æ€§èƒ½åœ¨å†…å­˜ä¸­ç¼“å­˜20æ¡ã€‚</li><li>å’Œçº¯å†…å­˜çš„ä½¿ç”¨åœºæ™¯ä¸€æ ·ï¼Œå½“æ‰“å¼€æŒä¹…åŒ–æ—¶ï¼Œæ¯ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹åªä¼šæŒä¹…åŒ–æ•°æ®çš„ä¸€ä¸ªå­é›†ï¼Œä¸ç®¡æ˜¯ä¸»è¿˜æ˜¯å¤‡èŠ‚ç‚¹ï¼Œéƒ½æ˜¯åªåŒ…æ‹¬èŠ‚ç‚¹æ‰€å±çš„åˆ†åŒºçš„æ•°æ®ï¼Œæ€»çš„æ¥è¯´ï¼Œæ•´ä¸ªé›†ç¾¤åŒ…æ‹¬äº†å®Œæ•´çš„æ•°æ®é›†ã€‚</li><li>åœ¨å¼€å‘åº”ç”¨æ—¶å¯èƒ½éœ€è¦ä¿®æ”¹è‡ªå®šä¹‰å¯¹è±¡å­—æ®µçš„ç±»å‹ã€‚ä¾‹å¦‚å‡è®¾å¯¹è±¡Açš„å­—æ®µç±»å‹<code>A.range</code>ä¸º<code>int</code>ç±»å‹ï¼Œç„¶åå†³å®šå°†<code>A.range</code>çš„ç±»å‹ä¿®æ”¹ä¸º<code>long</code>ç±»å‹ã€‚ä¹‹åä¼šå‘ç°é›†ç¾¤æˆ–åº”ç”¨å°†æ— æ³•é‡å¯ï¼Œå› ä¸ºIgniteä¸æ”¯æŒå­—æ®µ/åˆ—ç±»å‹çš„æ›´æ”¹ã€‚</li><li>æ— æ³•å˜æ›´æšä¸¾å€¼çš„é¡ºåºï¼Œä¹Ÿæ— æ³•åœ¨æšä¸¾å€¼åˆ—è¡¨çš„å¼€å§‹æˆ–è€…ä¸­éƒ¨æ·»åŠ æ–°çš„å¸¸é‡ï¼Œä½†æ˜¯å¯ä»¥åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ–°çš„å¸¸é‡ã€‚</li></ul><h3 id="ZooKeeper-Discovery"><a href="#ZooKeeper-Discovery" class="headerlink" title="ZooKeeper Discovery"></a>ZooKeeper Discovery</h3><p>ZooKeeper Discoveryæ˜¯ä¸ºéœ€è¦ä¿æŒæ˜“æ‰©å±•æ€§å’Œçº¿æ€§æ€§èƒ½çš„å¤§è§„æ¨¡éƒ¨ç½²è€Œè®¾è®¡çš„ã€‚ç„¶è€Œï¼ŒåŒæ—¶ä½¿ç”¨Igniteå’ŒZooKeeperéœ€è¦é…ç½®å’Œç®¡ç†ä¸¤ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½ åªæœ‰åœ¨è®¡åˆ’æ‰©å±•åˆ°100ä¸ªæˆ–1000ä¸ªèŠ‚ç‚¹æ—¶æ‰ä½¿ç”¨ZooKeeper Discoveryã€‚å¦åˆ™ï¼Œæœ€å¥½ä½¿ç”¨TCP/IPå‘ç°ã€‚</p><hr><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><ul><li><p>marshaller</p><blockquote><p> $IGNITE_HOME/work/db/marshaller    ç±»classpathä¿¡æ¯</p></blockquote></li><li><p>binary_meta</p><blockquote><p>$IGNITE_HOME/work/db/binary_meta    ç±»çš„å…ƒç´ ä¿¡æ¯</p></blockquote></li></ul><p><strong>ä¸‹é¢ä¸‰ä¸ªé…ç½®é¡¹æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></p><ul><li><p>storagePath</p><blockquote><p>$RDX_HOME/data/ignite/persistent    æŒä¹…åŒ–æ–‡ä»¶</p></blockquote></li><li><p>walPath</p><blockquote><p>$RDX_HOME/data/ignite/wal_store    æŒä¹…åŒ–æ•°æ®çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆç±»åã€å…ƒç´ åã€ä½ç½®ï¼‰</p></blockquote><ul><li>walPathå’ŒstoragePathå­˜å‚¨çš„æ•°æ®çš„å…³è”</li></ul></li><li><p>walArchivePath</p><blockquote><p>$RDX_HOME/data/ignite/wal_archive</p></blockquote><ul><li>å’ŒwalPathå­˜å‚¨çš„æ•°æ®ç»“æ„ä¸€æ ·ï¼ŒäºŒè€…çš„å…³ç³»</li></ul></li></ul><hr>]]></content>
      
      <categories>
          
          <category> ignite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>idea keymap</title>
      <link href="/2019/09/16/idea%20keymap/"/>
      <url>/2019/09/16/idea%20keymap/</url>
      <content type="html"><![CDATA[<h3 id="å¸¸ç”¨"><a href="#å¸¸ç”¨" class="headerlink" title="å¸¸ç”¨"></a>å¸¸ç”¨</h3><ul><li>ctrl + P<br>åˆ—å‡ºå‚æ•°åˆ—è¡¨ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>ctrl + shift + enter<br>å½“åœ¨æ‹¬å·é‡Œè¾“å…¥å®Œæœ€åä¸€ä¸ªå‚æ•°æ—¶å€™ä»–ä¼šç›´æ¥å…‰æ ‡è·³åˆ°æœ€åå¹¶ä¸”æ·»åŠ åˆ†å·ï¼Œä¸éœ€è¦è‡ªå·±æŒ‰å‘å·¦é”®ç§»åŠ¨å…‰æ ‡ã€‚ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰<br>ctrl + enter å‘ä¸‹æ’å…¥ä¸€è¡Œï¼Œå…‰æ ‡ä½ç½®ä¸å˜</li><li>shift + enter<br>å‘ä¸‹æ’å…¥ä¸€è¡Œã€‚å…‰æ ‡ä½ç½®è¿›å…¥ä¸‹ä¸€è¡Œï¼ˆå¯ä»¥åœ¨ä¸€è¡Œçš„ä»»ä½•ä½ç½®æ¢è¡Œï¼Œè€Œä¸å¿…å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼Œä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>ctrl+left/right<br>åœ¨å•è¯é—´è·³åŠ¨å…‰æ ‡ï¼ŒåŸºæœ¬åœ¨æ‰€æœ‰çš„ç¼–è¾‘å™¨ä¸­éƒ½æ˜¯é€‚ç”¨ ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>ctr+shitf+left/right<br>å¿«é€Ÿé€‰ä¸­ï¼ŒåŸºæœ¬åœ¨æ‰€æœ‰çš„ç¼–è¾‘å™¨ä¸­éƒ½æ˜¯é€‚ç”¨ï¼ˆshifté€‰ä¸­ï¼Œctrl+left/rightåœ¨å•è¯ä¸­å¿«é€Ÿè·³åŠ¨ï¼Œä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>Alt+left/rightï¼Œåˆ‡æ¢ä»£ç è§†å›¾ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>Alt+Up/Downï¼Œåœ¨æ–¹æ³•é—´å¿«é€Ÿç§»åŠ¨å®šä½ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>F2 æˆ– Shift+F2ï¼Œé«˜äº®é”™è¯¯æˆ–è­¦å‘Šå¿«é€Ÿå®šä½ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>Ctrl+Alt+T<br>å¯ä»¥æŠŠä»£ç åŒ…åœ¨ä¸€ä¸ªå—å†…ï¼Œä¾‹å¦‚ï¼štry/catchï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>Ctrl+Fï¼Œå¤„äºæŸ¥æ‰¾çŠ¶æ€ä¸‹æŒ‰downå‘ä¸‹æŸ¥æ‰¾ï¼Œupå‘ä¸ŠæŸ¥æ‰¾ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>Ctrl+F12ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æ„ï¼ˆå¿«é€ŸæŸ¥æ‰¾å½“å‰ç±»ä¸­æŸä¸ªæ–¹æ³•ï¼Œä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>Ctrl+Shift+Wï¼Œå–æ¶ˆé€‰æ‹©å…‰æ ‡æ‰€åœ¨è¯ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>Ctrl+[ OR ]ï¼Œå¯ä»¥è·‘åˆ°å¤§æ‹¬å·çš„å¼€å¤´ä¸ç»“å°¾</li><li>Ctrl+Shift +[ OR ]ï¼Œé€‰æ‹©å¤§æ‹¬å·ä¸­çš„å†…å®¹</li><li>alt + 1 åŒä¸Šï¼ˆåœ¨å·¥ç¨‹ç›®å½•å’Œç¼–è¾‘é¡µé¢é—´åˆ‡æ¢ï¼Œä½¿ç”¨æ¯”è¾ƒå¤šï¼‰</li><li>Ctrl+Alt+Oï¼Œä¼˜åŒ–å¯¼å…¥çš„ç±»å’ŒåŒ…(å»æ‰æ²¡æœ‰ä½¿ç”¨çš„importï¼Œä½¿ç”¨æ¯”è¾ƒå¤š )</li><li>Shift+F6ï¼Œé‡æ„ - é‡å‘½åï¼ˆä½¿ç”¨æ¯”è¾ƒå¤š ï¼‰</li><li>Ctrl+Gï¼Œå®šä½è¡Œ</li><li>Ctrl+Hï¼Œæ˜¾ç¤ºç±»ç»“æ„å›¾ï¼ˆç±»çš„ç»§æ‰¿å±‚æ¬¡ï¼‰</li><li>Ctrl+Uï¼Œè½¬åˆ°çˆ¶ç±»</li><li>Ctrl+â€+/-â€œï¼Œå½“å‰æ–¹æ³•å±•å¼€ã€æŠ˜å </li><li>Ctrl+Shift+â€+/-â€œï¼Œå…¨éƒ¨å±•å¼€ã€æŠ˜å </li><li>Ctrl+Shift+Jï¼Œæ•´åˆä¸¤è¡Œ</li><li>ctrl + shift + space<br>å½“new ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå·²ç»å†™äº†å˜é‡ç±»å‹ï¼Œæ‰“äº†ç­‰å·ä¹‹åæŒ‰è¿™ä¸ªå¯ä»¥å¿«é€Ÿå®Œæˆã€‚</li></ul><hr><h2 id="Compile-and-Run"><a href="#Compile-and-Run" class="headerlink" title="Compile and Run"></a>Compile and Run</h2><p><a href="https://imgchr.com/i/nRX0JI" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRX0JI.jpg" alt="nRX0JI.jpg"></a></p><h2 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h2><p><a href="https://imgchr.com/i/nRXhYn" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXhYn.jpg" alt="nRXhYn.jpg"></a></p><h2 id="Editing"><a href="#Editing" class="headerlink" title="Editing"></a>Editing</h2><p><a href="https://imgchr.com/i/nRXwFA" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXwFA.jpg" alt="nRXwFA.jpg"></a></p><h2 id="General"><a href="#General" class="headerlink" title="General"></a>General</h2><p><a href="https://imgchr.com/i/nRX2wQ" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRX2wQ.jpg" alt="nRX2wQ.jpg"></a></p><h2 id="Live-Templates"><a href="#Live-Templates" class="headerlink" title="Live Templates"></a>Live Templates</h2><p><a href="https://imgchr.com/i/nRXRoj" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXRoj.jpg" alt="nRXRoj.jpg"></a></p><h2 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h2><p><a href="https://imgchr.com/i/nRXBWt" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXBWt.jpg" alt="nRXBWt.jpg"></a></p><h2 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h2><p><a href="https://imgchr.com/i/nRXsQf" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXsQf.jpg" alt="nRXsQf.jpg"></a></p><h2 id="Search-Replace"><a href="#Search-Replace" class="headerlink" title="Search/Replace"></a>Search/Replace</h2><p><a href="https://imgchr.com/i/nRXrSP" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXrSP.jpg" alt="nRXrSP.jpg"></a></p><h2 id="Usage-Search"><a href="#Usage-Search" class="headerlink" title="Usage Search"></a>Usage Search</h2><p><a href="https://imgchr.com/i/nRXyy8" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRXyy8.jpg" alt="nRXyy8.jpg"></a></p><h2 id="VCS-Local-History"><a href="#VCS-Local-History" class="headerlink" title="VCS/Local History"></a>VCS/Local History</h2><p><a href="https://imgchr.com/i/nRX6OS" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/16/nRX6OS.jpg" alt="nRX6OS.jpg"></a></p>]]></content>
      
      <categories>
          
          <category> tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keymap </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker solution</title>
      <link href="/2019/08/16/docker%20solution/"/>
      <url>/2019/08/16/docker%20solution/</url>
      <content type="html"><![CDATA[<h2 id="Manage-Docker-as-a-non-root-user"><a href="#Manage-Docker-as-a-non-root-user" class="headerlink" title="Manage Docker as a non-root user"></a>Manage Docker as a non-root user</h2><ol><li><p>Create the <code>docker</code> group.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo groupadd docker</span><br></pre></td></tr></table></figure></li><li><p>Add your user to the <code>docker</code> group.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure></li><li><p>Log out and log back in so that your group membership is re-evaluated.</p><p>If testing on a virtual machine, it may be necessary to restart the virtual machine for changes to take effect.</p><p>On a desktop Linux environment such as X Windows, log out of your session completely and then log back in.</p><p>On Linux, you can also run the following command to activate the changes to groups:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ newgrp docker</span><br></pre></td></tr></table></figure></li><li><p>Verify that you can run <code>docker</code> commands without <code>sudo</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run hello-world</span><br></pre></td></tr></table></figure></li></ol><h4 id="Failed-to-load-listeners-no-sockets-found-via-socket-activation-make-sure-the-service-was-started-by-systemd"><a href="#Failed-to-load-listeners-no-sockets-found-via-socket-activation-make-sure-the-service-was-started-by-systemd" class="headerlink" title="Failed to load listeners: no sockets found via socket activation: make sure the service was started by systemd"></a>Failed to load listeners: no sockets found via socket activation: make sure the service was started by systemd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">edit the dockerâ€™s systemd unit file and change the ExecStart:</span><br><span class="line">sudo systemctl edit docker.service</span><br><span class="line"></span><br><span class="line">edite The value ExecStart, change fd:// to unix://:</span><br><span class="line">[Service]</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/usr/bin/dockerd -H unix://</span><br></pre></td></tr></table></figure><h4 id="Error-creating-default-â€œbridgeâ€-network-cannot-create-network-docker0-conflicts-with-network-docker0-networks-have-same-bridge-name"><a href="#Error-creating-default-â€œbridgeâ€-network-cannot-create-network-docker0-conflicts-with-network-docker0-networks-have-same-bridge-name" class="headerlink" title="Error creating default â€œbridgeâ€ network: cannot create network (docker0): conflicts with network (docker0): networks have same bridge name"></a>Error creating default â€œbridgeâ€ network: cannot create network (docker0): conflicts with network (docker0): networks have same bridge name</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /var/lib/docker/network</span><br><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker image</title>
      <link href="/2019/08/16/docker%20image/"/>
      <url>/2019/08/16/docker%20image/</url>
      <content type="html"><![CDATA[<h4 id="Docker-åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ"><a href="#Docker-åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Docker åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ:"></a>Docker åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ:</h4><ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šDocker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</li><li><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong>ï¼šä»“åº“å¯çœ‹ç€ä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚</li></ul><h3 id="æ“ä½œé•œåƒ"><a href="#æ“ä½œé•œåƒ" class="headerlink" title="æ“ä½œé•œåƒ"></a>æ“ä½œé•œåƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾</span><br><span class="line">docker search xxx</span><br><span class="line">æ‹‰å–</span><br><span class="line">docker pull xxx</span><br><span class="line">è¿è¡Œ(å®¹å™¨)</span><br><span class="line">docker run xxx</span><br><span class="line">åˆ é™¤</span><br><span class="line">docker rmi xxx</span><br><span class="line"></span><br><span class="line">docker images : åˆ—å‡ºæœ¬åœ°é•œåƒã€‚</span><br><span class="line"></span><br><span class="line">è¯­æ³•</span><br><span class="line">docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line">OPTIONSè¯´æ˜ï¼š</span><br><span class="line">-a :åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æ‰ä¸­é—´æ˜ åƒå±‚ï¼‰ï¼›</span><br><span class="line">â€“digests :æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼›</span><br><span class="line">-f :æ˜¾ç¤ºæ»¡è¶³æ¡ä»¶çš„é•œåƒï¼›</span><br><span class="line">â€“format :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ï¼›</span><br><span class="line">â€“no-trunc :æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯ï¼›</span><br><span class="line">-q :åªæ˜¾ç¤ºé•œåƒIDã€‚</span><br></pre></td></tr></table></figure><ul><li><p>å¯¼å‡ºé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker save $REPOSITORY:$TAG &gt; $PATH/$NAME.tar</span><br><span class="line"><span class="meta">#</span> æ³¨æ„$åé¢çš„å˜é‡éœ€è¦æ›¿æ¢</span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load --input $PATH/$NAME.tar</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é•œåƒä¸­è¿è¡Œå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -p 8899:8899 --name test $REPOSITORY:$TAG</span><br><span class="line"></span><br><span class="line">-itï¼šè¡¨ç¤ºäº¤äº’å¼ç»ˆç«¯çš„å®¹å™¨ï¼Œéå¯åŠ¨åç«‹åˆ»ç»“æŸçš„å®¹å™¨</span><br><span class="line">--name testï¼šç»™å®¹å™¨å–ä¸ªåå­—ï¼Œå«Œéº»çƒ¦å¯ä»¥çœå»</span><br><span class="line"><span class="meta">$</span>REPOSITORY:$TAGï¼šå®¹å™¨æ˜¯ç”¨å“ªä¸ªé•œåƒå¯åŠ¨çš„ï¼ˆä¸€ä¸ªå®¹å™¨ï¼Œå¿…é¡»ä¾èµ–ä¸€ä¸ªé•œåƒå¯åŠ¨ï¼‰</span><br><span class="line">-v æŒ‡å®šäº†å®¿ä¸»æœºä¸Šçš„ç›®å½•ç”¨æ¥ä½œä¸ºdockerä»“åº“çš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œregistryé•œåƒé‡å¯ä¹‹åä¼šä¸¢å¤±å·²ç»å­˜å‚¨åœ¨æœ¬åœ°ä»“åº“çš„é•œåƒæ–‡ä»¶</span><br><span class="line">-p hostPort:containerPort</span><br><span class="line">-v hostVolume:containerVolume è¿™ä¸¤ä¸ªåœ°å€å¦‚æœä¸å­˜åœ¨éƒ½ä¼šåˆ›å»ºï¼Œä¸€æ—¦å®¹å™¨è¿è¡Œï¼Œä¸¤éƒ¨åˆ†ä¼šå®Œå…¨åŒæ­¥</span><br></pre></td></tr></table></figure><h4 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h4></li></ul><blockquote><p>Docker Imageå¯ä»¥ç†è§£æˆå¤šä¸ªåªè¯»æ–‡ä»¶å åŠ è€Œæˆï¼Œå› æ­¤Docker Imageæ˜¯åªè¯»çš„ã€‚</p><p>å½“æˆ‘ä»¬å°†å…¶è¿è¡Œèµ·æ¥ï¼Œå°±ç›¸å½“äºåœ¨åªè¯»çš„Imageå¤–åŒ…è£¹äº†ä¸€å±‚è¯»å†™å±‚å˜æˆäº†å®¹å™¨ã€‚</p><p>å½“ä½ åˆ é™¤å®¹å™¨ä¹‹åï¼Œä½¿ç”¨è¿™ä¸ªé•œåƒé‡æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œæ­¤æ—¶çš„é•œåƒçš„åªè¯»å±‚è¿˜å’ŒåŸæ¥çš„ä¸€æ ·ï¼Œä½†æ˜¯ä½ åœ¨è¯»å†™å±‚çš„ä¿®æ”¹å…¨éƒ¨éƒ½ä¼šä¸¢å¤±ï¼ˆæ²¡æœ‰ä½¿ç”¨åŸæœ‰volumeçš„å‰æä¸‹ï¼‰ã€‚</p><p> dockerä½¿ç”¨volumeå®ç°æ•°æ®çš„æŒä¹…åŒ–ï¼Œä¸ä»…å¦‚æ­¤volumeè¿˜èƒ½å¸®åŠ©å®¹å™¨å’Œå®¹å™¨ä¹‹é—´ï¼Œå®¹å™¨å’Œhostä¹‹é—´å…±äº«æ•°æ®ã€‚</p></blockquote><ul><li><p>è¿›å…¥è¿è¡Œçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it $CONTAINER_ID /bin/bash</span><br></pre></td></tr></table></figure><ul><li><p>æ³¨æ„</p><p>å‘½ä»¤ä¸­çš„/bin/bashæ˜¯æ ¹æ®<code>docker inspect $image_id</code>ï¼Œæ ¹æ®â€Cmdâ€é…ç½®é¡¹å†³å®šçš„</p></li></ul></li></ul><h3 id="æŠŠjaråŒ…ç¨‹åºåˆ¶ä½œæˆé•œåƒ"><a href="#æŠŠjaråŒ…ç¨‹åºåˆ¶ä½œæˆé•œåƒ" class="headerlink" title="æŠŠjaråŒ…ç¨‹åºåˆ¶ä½œæˆé•œåƒ"></a>æŠŠjaråŒ…ç¨‹åºåˆ¶ä½œæˆé•œåƒ</h3><p>ç¼–è¾‘dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span>  openjdk:<span class="number">8</span>-jre</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="keyword">WORKDIR</span> /data/justMicroservice/learning-cloudalibaba</span><br><span class="line"></span><br><span class="line">ARG JAR_FILE=nacos-provider/target/nacos-provider-0.0.1-SNAPSHOT.jar</span><br><span class="line"># å¤åˆ¶jaræ–‡ä»¶åˆ°è·¯å¾„</span><br><span class="line">COPY $&#123;JAR_FILE&#125; nacos-provider.jar</span><br><span class="line"># å¯åŠ¨ç½‘å…³æœåŠ¡</span><br><span class="line">ENTRYPOINT ["java","-jar","nacos-provider.jar"]</span><br></pre></td></tr></table></figure><p>åœ¨$pathçš„ä¸€çº§ç›®å½•æ‰§è¡Œï¼ˆæ¯”å¦‚dockerfileä½ç½®/a/b/dockerfileï¼Œé‚£å‘½ä»¤åœ¨aç›®å½•ä¸‹æ‰§è¡Œï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t $repository -f $path/dockerfile .</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsä¸­çš„this</title>
      <link href="/2019/08/14/js%E4%B8%AD%E7%9A%84this/"/>
      <url>/2019/08/14/js%E4%B8%AD%E7%9A%84this/</url>
      <content type="html"><![CDATA[<p>æ–‡å­—è½¬è½½è‡ª<a href="https://juejin.im/post/5d51feaef265da039005219e#heading-5" target="_blank" rel="noopener">JS ä¸­ this åœ¨å„ä¸ªåœºæ™¯ä¸‹çš„æŒ‡å‘</a></p><h2 id="1-this-çš„å¥¥ç§˜"><a href="#1-this-çš„å¥¥ç§˜" class="headerlink" title="1. this çš„å¥¥ç§˜"></a>1. this çš„å¥¥ç§˜</h2><p>å¾ˆå¤šæ—¶å€™, JS ä¸­çš„ <code>this</code> å¯¹äºå’±ä»¬çš„åˆå­¦è€…å¾ˆå®¹æ˜“äº§ç”Ÿå›°æƒ‘ä¸è§£ã€‚ <code>this</code> çš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†éœ€è¦ä¸€å®šä»˜å‡ºæ‰èƒ½æ…¢æ…¢ç†è§£å®ƒã€‚</p><p>å¯¹Javaã€PHPæˆ–å…¶ä»–æ ‡å‡†è¯­è¨€æ¥çœ‹ï¼Œ<code>this</code> è¡¨ç¤ºç±»æ–¹æ³•ä¸­å½“å‰å¯¹è±¡çš„å®ä¾‹ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>this</code>ä¸èƒ½åœ¨æ–¹æ³•ä¹‹å¤–ä½¿ç”¨ï¼Œè¿™æ ·å°±æ¯”è¾ƒä¸ä¼šé€ æˆæ··æ·†ã€‚</p><p>åœ¨Jè¦ä¸­æƒ…å†µå°±æœ‰æ‰€ä¸åŒ: <code>this</code>è¡¨ç¤ºå‡½æ•°çš„å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒJS ä¸­å‡½æ•°è°ƒç”¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><ul><li>å‡½æ•°è°ƒç”¨: <code>alert(&#39;Hello World!&#39;)</code></li><li>æ–¹æ³•è°ƒç”¨: <code>console.log(&#39;Hello World!&#39;)</code></li><li>æ„é€ å‡½æ•°: <code>new RegExp(&#39;\\d&#39;)</code></li><li>éšå¼è°ƒç”¨: <code>alert.call(undefined, &#39;Hello World!&#39;)</code></li></ul><p>æ¯ç§è°ƒç”¨ç±»å‹ä»¥è‡ªå·±çš„æ–¹å¼å®šä¹‰ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥å°±å¾ˆå®¹æ˜“äº§ç”Ÿæ··æ·†ã€‚</p><p>æ­¤å¤–ï¼Œä¸¥æ ¼æ¨¡å¼ä¹Ÿä¼šå½±å“æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><p>ç†è§£<code>this</code>å…³é”®æ˜¯è¦æ¸…æ¥šçš„çŸ¥é“å‡½æ•°è°ƒç”¨åŠå…¶å¦‚ä½•å½±å“ä¸Šä¸‹æ–‡ã€‚</p><p>æœ¬æ–‡ä¸»è¦è¯´æ˜å‡½æ•°çš„è°ƒç”¨æ–¹å¼åŠå¦‚ä½•å½±å“ <code>this</code>ï¼Œå¹¶ä¸”è¯´æ˜æ‰§è¡Œä¸Šä¸‹æ–‡çš„å¸¸è§é™·é˜±ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆçŸ¥é“å‡ ä¸ªæœ¯è¯­ï¼š</p><p>è°ƒç”¨å‡½æ•°æ­£åœ¨æ‰§è¡Œåˆ›å»ºå‡½æ•°ä½“çš„ä»£ç ï¼Œæˆ–è€…åªæ˜¯è°ƒç”¨å‡½æ•°ã€‚ ä¾‹å¦‚ï¼ŒparseIntå‡½æ•°è°ƒç”¨æ˜¯parseIntï¼ˆâ€™15â€™ï¼‰ã€‚</p><ul><li><strong>å‡½æ•°è°ƒç”¨</strong>ï¼šæ‰§è¡Œæ„æˆå‡½æ•°ä¸»ä½“çš„ä»£ç ï¼šä¾‹å¦‚ï¼Œ<code>parseInt</code>å‡½æ•°è°ƒç”¨æ˜¯<code>parseInt(&#39;15&#39;)</code>ã€‚</li><li><strong>è°ƒç”¨çš„ä¸Šä¸‹æ–‡</strong>ï¼šæŒ‡ <code>this</code> åœ¨å‡½æ•°ä½“å†…çš„å€¼ã€‚ ä¾‹å¦‚ï¼Œ<code>map.set(&#39;key&#39;, &#39;value&#39;)</code>çš„è°ƒç”¨ä¸Šä¸‹æ–‡æ˜¯ <code>map</code>ã€‚</li><li><strong>å‡½æ•°çš„ä½œç”¨åŸŸ</strong>ï¼šæ˜¯åœ¨å‡½æ•°ä½“ä¸­å¯è®¿é—®çš„å˜é‡ã€å¯¹è±¡å’Œå‡½æ•°çš„é›†åˆã€‚</li></ul><h2 id="2-å‡½æ•°è°ƒç”¨"><a href="#2-å‡½æ•°è°ƒç”¨" class="headerlink" title="2.å‡½æ•°è°ƒç”¨"></a>2.å‡½æ•°è°ƒç”¨</h2><p>å½“ä¸€ä¸ªè¡¨è¾¾å¼ä¸ºå‡½æ•°æ¥ç€ä¸€ä¸ª<code>(</code>ï¼Œä¸€äº›ç”¨é€—å·åˆ†éš”çš„å‚æ•°ä»¥åŠä¸€ä¸ª<code>ï¼‰</code>æ—¶ï¼Œå‡½æ•°è°ƒç”¨è¢«æ‰§è¡Œï¼Œä¾‹å¦‚<code>parseInt(&#39;18&#39;)</code>ã€‚</p><p>å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ä¸èƒ½æ˜¯å±æ€§æ–¹å¼çš„è°ƒç”¨ï¼Œå¦‚ <code>obj.myFunc()</code>ï¼Œè¿™ç§æ˜¯åˆ›å»ºä¸€ä¸ªæ–¹æ³•è°ƒç”¨ã€‚å†å¦‚ <code>[1,5].join(&#39;,&#39;)</code>ä¸æ˜¯å‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯æ–¹æ³•è°ƒç”¨ï¼Œ<strong>è¿™ç§åŒºåˆ«éœ€è¦è®°ä½å“ˆï¼Œå¾ˆé‡è¦æ»´</strong>ã€‚</p><p>å‡½æ•°è°ƒç”¨çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function hello(name) &#123;</span><br><span class="line">  return &apos;Hello &apos; + name + &apos;!&apos;;</span><br><span class="line">&#125;</span><br><span class="line">// å‡½æ•°è°ƒç”¨</span><br><span class="line">const message = hello(&apos;World&apos;);</span><br><span class="line">console.log(message); // =&gt; &apos;Hello World!&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>hello(&#39;World&#39;)</code>æ˜¯å‡½æ•°è°ƒç”¨: <code>hello</code>è¡¨è¾¾å¼ç­‰ä»·äºä¸€ä¸ªå‡½æ•°ï¼Œè·Ÿåœ¨å®ƒåé¢çš„æ˜¯ä¸€å¯¹æ‹¬å·ä»¥åŠ<code>&#39;World&#39;</code>å‚æ•°ã€‚</p><p>ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­æ˜¯<strong>IIFE</strong>(ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const message = (function(name) &#123;</span><br><span class="line">   return &apos;Hello &apos; + name + &apos;!&apos;;</span><br><span class="line">&#125;)(&apos;World&apos;);</span><br><span class="line">console.log(message) // =&gt; &apos;Hello World!&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><strong>IIFE</strong>ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨:ç¬¬ä¸€å¯¹åœ†æ‹¬å·<code>(function(name) {...})</code>æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒçš„è®¡ç®—ç»“æœæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œåé¢è·Ÿç€ä¸€å¯¹åœ†æ‹¬å·ï¼Œåœ†æ‹¬å·çš„å‚æ•°æ˜¯<code>â€œWorldâ€</code>ã€‚</p><h4 id="2-1-åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„this"><a href="#2-1-åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„this" class="headerlink" title="2.1. åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„this"></a>2.1. åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„this</h4><blockquote><p>this åœ¨å‡½æ•°è°ƒç”¨ä¸­æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡</p></blockquote><p>å±€å¯¹è±¡ç”±æ‰§è¡Œç¯å¢ƒå†³å®šã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œ<code>this</code>æ˜¯ <code>window</code> å¯¹è±¡ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884b811a409ab?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>åœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å…¨å±€å¯¹è±¡ã€‚</p><p>å†æ¥çœ‹çœ‹ä¸‹é¢å‡½æ•°ä¸­çš„ä¸Šä¸‹æ–‡åˆæ˜¯ä»€ä¹ˆé¬¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function sum(a, b) &#123;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">   this.myNumber = 20; // å°†&apos;myNumber&apos;å±æ€§æ·»åŠ åˆ°å…¨å±€å¯¹è±¡</span><br><span class="line">   return a + b;</span><br><span class="line">&#125;</span><br><span class="line">// sum() is invoked as a function</span><br><span class="line">// sum() ä¸­çš„ `this` æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰</span><br><span class="line">sum(15, 16);     // =&gt; 31</span><br><span class="line">window.myNumber; // =&gt; 20</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨<code>sum(15,16)</code>æ—¶ï¼ŒJS è‡ªåŠ¨å°†<code>this</code>è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¯¥å¯¹è±¡æ˜¯<code>window</code>ã€‚</p><p>å½“<code>this</code>åœ¨ä»»ä½•å‡½æ•°ä½œç”¨åŸŸ(æœ€é¡¶å±‚ä½œç”¨åŸŸ:å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡)ä¹‹å¤–ä½¿ç”¨ï¼Œ<code>this</code> è¡¨ç¤º <code>window</code> å¯¹è±¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.log(this === window); // =&gt; true</span><br><span class="line">this.myString = &apos;Hello World!&apos;;</span><br><span class="line">console.log(window.myString); // =&gt; &apos;Hello World!&apos;</span><br><span class="line"></span><br><span class="line">&lt;!-- In an html file --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="2-2-ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨-this-åˆæ˜¯ä»€ä¹ˆæ ·çš„"><a href="#2-2-ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨-this-åˆæ˜¯ä»€ä¹ˆæ ·çš„" class="headerlink" title="2.2 ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨ this åˆæ˜¯ä»€ä¹ˆæ ·çš„"></a>2.2 ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨ this åˆæ˜¯ä»€ä¹ˆæ ·çš„</h4><blockquote><p><code>this</code> åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨ä¸­ä¸º <strong>undefined</strong></p></blockquote><p>ä¸¥æ ¼æ¨¡å¼æ˜¯åœ¨ ECMAScript 5.1ä¸­å¼•å…¥çš„ï¼Œå®ƒæä¾›äº†æ›´å¥½çš„å®‰å…¨æ€§å’Œæ›´å¼ºçš„é”™è¯¯æ£€æŸ¥ã€‚</p><p>è¦å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå‡½æ•°å¤´éƒ¨å†™å…¥<code>use strict</code> å³å¯ã€‚</p><p>å¯ç”¨åï¼Œä¸¥æ ¼æ¨¡å¼ä¼šå½±å“æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ<code>this</code> åœ¨å¸¸è§„å‡½æ•°è°ƒç”¨ä¸­å€¼ä¸º<code>undefined</code>ã€‚ ä¸ä¸Šè¿°æƒ…å†µ<code>2.1</code>ç›¸åï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¸å†æ˜¯å…¨å±€å¯¹è±¡ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884ceb97a4874?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>ä¸¥æ ¼æ¨¡å¼å‡½æ•°è°ƒç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function multiply(a, b) &#123;</span><br><span class="line">  &apos;use strict&apos;; // å¯ç”¨ä¸¥æ ¼æ¨¡å¼</span><br><span class="line">  console.log(this === undefined); // =&gt; true</span><br><span class="line">  return a * b;</span><br><span class="line">&#125;</span><br><span class="line">multiply(2, 5); // =&gt; 10</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>å½“<code>multiply(2,5)</code>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>this</code>æ˜¯<code>undefined</code>ã€‚</p><p>ä¸¥æ ¼æ¨¡å¼ä¸ä»…åœ¨å½“å‰ä½œç”¨åŸŸä¸­æœ‰æ•ˆï¼Œåœ¨å†…éƒ¨ä½œç”¨åŸŸä¸­ä¹Ÿæ˜¯æœ‰æ•ˆçš„(å¯¹äºåœ¨å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å‡½æ•°):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function execute() &#123;</span><br><span class="line">   &apos;use strict&apos;; // å¼€å¯ä¸¥æ ¼æ¨¡å¼  </span><br><span class="line">   function concat(str1, str2) &#123;</span><br><span class="line">     // ä¸¥æ ¼æ¨¡å¼ä»ç„¶æœ‰æ•ˆ  </span><br><span class="line">     console.log(this === undefined); // =&gt; true</span><br><span class="line">     return str1 + str2;</span><br><span class="line">   &#125;</span><br><span class="line">   // concat() åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä½œä¸ºå‡½æ•°è°ƒç”¨</span><br><span class="line">   // this in concat() is undefined</span><br><span class="line">   concat(&apos;Hello&apos;, &apos; World!&apos;); // =&gt; &quot;Hello World!&quot;</span><br><span class="line">&#125;</span><br><span class="line">execute();</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>&#39;use strict&#39;</code>è¢«æ’å…¥åˆ°æ‰§è¡Œä½“çš„é¡¶éƒ¨ï¼Œåœ¨å…¶ä½œç”¨åŸŸå†…å¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ å› ä¸ºå‡½æ•°<code>concat</code>æ˜¯åœ¨æ‰§è¡Œçš„ä½œç”¨åŸŸä¸­å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒç»§æ‰¿äº†ä¸¥æ ¼æ¨¡å¼ã€‚</p><p>å•ä¸ªJSæ–‡ä»¶å¯èƒ½åŒ…å«ä¸¥æ ¼å’Œéä¸¥æ ¼æ¨¡å¼ã€‚ å› æ­¤ï¼Œå¯¹äºç›¸åŒçš„è°ƒç”¨ç±»å‹ï¼Œå¯ä»¥åœ¨å•ä¸ªè„šæœ¬ä¸­å…·æœ‰ä¸åŒçš„ä¸Šä¸‹æ–‡è¡Œä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function nonStrictSum(a, b) &#123;</span><br><span class="line">  // éä¸¥æ ¼æ¨¡å¼</span><br><span class="line">  console.log(this === window); // =&gt; true</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;</span><br><span class="line">function strictSum(a, b) &#123;</span><br><span class="line">  &apos;use strict&apos;;</span><br><span class="line">  // å¯ç”¨ä¸¥æ ¼æ¨¡å¼</span><br><span class="line">  console.log(this === undefined); // =&gt; true</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nonStrictSum(5, 6); // =&gt; 11</span><br><span class="line">strictSum(8, 12); // =&gt; 20</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="2-3-é™·é˜±-this-åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„æ—¶å€™"><a href="#2-3-é™·é˜±-this-åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„æ—¶å€™" class="headerlink" title="2.3 é™·é˜±:this åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„æ—¶å€™"></a>2.3 é™·é˜±:<code>this</code> åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„æ—¶å€™</h4><p>å‡½æ•°è°ƒç”¨çš„ä¸€ä¸ªå¸¸è§é™·é˜±æ˜¯ï¼Œè®¤ä¸º<code>this</code>åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„æƒ…å†µä¸å¤–éƒ¨å‡½æ•°ä¸­çš„æƒ…å†µç›¸åŒã€‚</p><p>æ­£ç¡®åœ°è¯´ï¼Œå†…éƒ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡åªä¾èµ–äºå®ƒçš„è°ƒç”¨ç±»å‹ï¼Œè€Œä¸ä¾èµ–äºå¤–éƒ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚</p><p>è¦å°† <code>this</code> è®¾ç½®ä¸ºæ‰€éœ€çš„å€¼ï¼Œå¯ä»¥é€šè¿‡ <code>.call()</code>æˆ–<code>.apply()</code>ä¿®æ”¹å†…éƒ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡æˆ–ä½¿ç”¨<code>.bind()</code>åˆ›å»ºç»‘å®šå‡½æ•°ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ˜¯è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     function calculate() &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; false</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     return calculate();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; NaN</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>sum()</code>æ˜¯å¯¹è±¡ä¸Šçš„æ–¹æ³•è°ƒç”¨ï¼Œæ‰€ä»¥<code>sum</code>ä¸­çš„ä¸Šä¸‹æ–‡æ˜¯<code>numbers</code>å¯¹è±¡ã€‚<code>calculate</code>å‡½æ•°æ˜¯åœ¨<code>sum</code>ä¸­å®šä¹‰çš„ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨<code>calculate()</code>ä¸­<code>this</code>ä¹Ÿè¡¨ç¤º<code>number</code>å¯¹è±¡ã€‚</p><p><code>calculate()</code>æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨(ä¸æ˜¯æ–¹æ³•è°ƒç”¨)ï¼Œå®ƒå°†<code>this</code>ä½œä¸ºå…¨å±€å¯¹è±¡<code>window</code>(éä¸¥æ ¼æ¨¡ä¸‹)ã€‚å³ä½¿å¤–éƒ¨å‡½æ•°<code>sum</code>å°†ä¸Šä¸‹æ–‡ä½œä¸º<code>number</code>å¯¹è±¡ï¼Œå®ƒåœ¨<code>calculate</code>é‡Œé¢æ²¡æœ‰å½±å“ã€‚</p><p><code>sum()</code>çš„è°ƒç”¨ç»“æœæ˜¯<code>NaN</code>ï¼Œä¸æ˜¯é¢„æœŸçš„ç»“æœ<code>5 + 10 = 15</code>ï¼Œè¿™éƒ½æ˜¯å› ä¸ºæ²¡æœ‰æ­£ç¡®è°ƒç”¨<code>calculate</code>ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>calculate</code>å‡½æ•°ä¸­ä¸Šä¸‹æ–‡åº”è¯¥ä¸ <code>sum</code> ä¸­çš„ä¸€æ ·ï¼Œä»¥ä¾¿å¯ä»¥è®¿é—®<code>numberA</code>å’Œ<code>numberB</code>å±æ€§ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡è°ƒç”¨<code>calculator.call(this)</code>æ‰‹åŠ¨å°†<code>calculate</code>ä¸Šä¸‹æ–‡æ›´æ”¹ä¸ºæ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     function calculate() &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; true</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     // ä½¿ç”¨ .call() æ–¹æ³•ä¿®æ”¹ä¸Šä¸‹æ–‡</span><br><span class="line">     return calculate.call(this);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; 15</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>call(this)</code>åƒå¾€å¸¸ä¸€æ ·æ‰§è¡Œ<code>calculate</code>å‡½æ•°ï¼Œä½† <code>call</code> ä¼šæŠŠä¸Šä¸‹æ–‡ä¿®æ”¹ä¸ºæŒ‡å®šä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚</p><p>ç°åœ¨<code>this.numberA</code> + <code>this.numberB</code>ç›¸å½“äº<code>numbers.numberA + numbers.numberB</code>ã€‚ è¯¥å‡½æ•°è¿”å›é¢„æœŸç»“æœ<code>5 + 10 = 15</code>ã€‚</p><p>å¦ä¸€ç§å°±æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     const calculate = () =&gt; &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; true</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     return calculate();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; 15</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h2 id="3-æ–¹æ³•è°ƒç”¨"><a href="#3-æ–¹æ³•è°ƒç”¨" class="headerlink" title="3.æ–¹æ³•è°ƒç”¨"></a>3.æ–¹æ³•è°ƒç”¨</h2><p>æ–¹æ³•æ˜¯å­˜å‚¨åœ¨å¯¹è±¡å±æ€§ä¸­çš„å‡½æ•°ã€‚ä¾‹å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const myObject = &#123;</span><br><span class="line">  // helloFunction æ˜¯ä¸€ä¸ªæ–¹æ³•</span><br><span class="line">  helloFunction: function() &#123;</span><br><span class="line">    return &apos;Hello World!&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const message = myObject.helloFunction();</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>helloFunction</code>æ˜¯<code>myObject</code>çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¦è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·å­è°ƒç”¨ :<code>myObject.helloFunction</code>ã€‚</p><p>å½“ä¸€ä¸ªè¡¨è¾¾å¼ä»¥å±æ€§è®¿é—®çš„å½¢å¼æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œçš„æ˜¯æ–¹æ³•è°ƒç”¨ï¼Œå®ƒç›¸å½“äºä»¥ä¸ªå‡½æ•°æ¥ç€(ï¼Œä¸€ç»„ç”¨é€—å·åˆ†éš”çš„å‚æ•°ä»¥åŠ)ã€‚</p><p>åˆ©ç”¨å‰é¢çš„ä¾‹å­ï¼Œ<code>myObject.helloFunction()</code>æ˜¯å¯¹è±¡<code>myObject</code>ä¸Šçš„ä¸€ä¸ª<code>helloFunction</code>çš„æ–¹æ³•è°ƒç”¨ã€‚<code>[1, 2].join(&#39;,&#39;)</code> æˆ–<code>/\s/.test(&#39;beautiful world&#39;)</code>ä¹Ÿè¢«è®¤ä¸ºæ˜¯æ–¹æ³•è°ƒç”¨ã€‚</p><p>åŒºåˆ†å‡½æ•°è°ƒç”¨å’Œæ–¹æ³•è°ƒç”¨éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸åŒçš„ç±»å‹ã€‚ä¸»è¦åŒºåˆ«åœ¨äºæ–¹æ³•è°ƒç”¨éœ€è¦ä¸€ä¸ªå±æ€§è®¿é—®å™¨å½¢å¼æ¥è°ƒç”¨å‡½æ•°(<code>obj.myFunc()</code>æˆ–<code>obj[&#39;myFunc&#39;]()</code>)ï¼Œè€Œå‡½æ•°è°ƒç”¨ä¸éœ€è¦(<code>myFunc()</code>)ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&apos;Hello&apos;, &apos;World&apos;].join(&apos;, &apos;); // æ–¹æ³•è°ƒç”¨</span><br><span class="line">(&#123; ten: function() &#123; return 10; &#125; &#125;).ten(); // æ–¹æ³•è°ƒç”¨</span><br><span class="line">const obj = &#123;&#125;;</span><br><span class="line">obj.myFunction = function() &#123;</span><br><span class="line">  return new Date().toString();</span><br><span class="line">&#125;;</span><br><span class="line">obj.myFunction(); // æ–¹æ³•è°ƒç”¨</span><br><span class="line"></span><br><span class="line">const otherFunction = obj.myFunction;</span><br><span class="line">otherFunction();     // å‡½æ•°è°ƒç”¨</span><br><span class="line">parseFloat(&apos;16.60&apos;); // å‡½æ•°è°ƒç”¨</span><br><span class="line">isNaN(0);            // å‡½æ•°è°ƒç”¨</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>ç†è§£å‡½æ•°è°ƒç”¨å’Œæ–¹æ³•è°ƒç”¨ä¹‹é—´çš„åŒºåˆ«æœ‰åŠ©äºæ­£ç¡®è¯†åˆ«ä¸Šä¸‹æ–‡ã€‚</p><h4 id="3-1-æ–¹æ³•è°ƒç”¨ä¸­-this-æ˜¯è‚¿ä¹ˆæ ·"><a href="#3-1-æ–¹æ³•è°ƒç”¨ä¸­-this-æ˜¯è‚¿ä¹ˆæ ·" class="headerlink" title="3.1 æ–¹æ³•è°ƒç”¨ä¸­ this æ˜¯è‚¿ä¹ˆæ ·"></a>3.1 æ–¹æ³•è°ƒç”¨ä¸­ this æ˜¯è‚¿ä¹ˆæ ·</h4><blockquote><p>åœ¨æ–¹æ³•è°ƒç”¨ä¸­ï¼Œ<code>this</code>æ˜¯æ‹¥æœ‰è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡</p></blockquote><p>å½“è°ƒç”¨å¯¹è±¡ä¸Šçš„æ–¹æ³•æ—¶ï¼Œ<code>this</code>å°±å˜æˆäº†å¯¹è±¡æœ¬èº«ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884d308092da0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ªé€’å¢æ•°å­—çš„æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const calc = &#123;</span><br><span class="line">  num: 0,</span><br><span class="line">  increment: function() &#123;</span><br><span class="line">    console.log(this === calc); // =&gt; true</span><br><span class="line">    this.num += 1;</span><br><span class="line">    return this.num;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// method invocation. this is calc</span><br><span class="line">calc.increment(); // =&gt; 1</span><br><span class="line">calc.increment(); // =&gt; 2</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>è°ƒç”¨<code>calc.increment()</code>ä½¿<code>increment</code>å‡½æ•°çš„ä¸Šä¸‹æ–‡æˆä¸º<code>calc</code>å¯¹è±¡ã€‚æ‰€ä»¥ä½¿ç”¨<code>this.num</code>æ¥å¢åŠ <code>num</code>å±æ€§æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>å†æ¥çœ‹çœ‹å¦ä¸€ä¸ªä¾‹å­ã€‚JSå¯¹è±¡ä»åŸå‹ç»§æ‰¿ä¸€ä¸ªæ–¹æ³•ï¼Œå½“åœ¨å¯¹è±¡ä¸Šè°ƒç”¨ç»§æ‰¿çš„æ–¹æ³•æ—¶ï¼Œè°ƒç”¨çš„ä¸Šä¸‹æ–‡ä»ç„¶æ˜¯å¯¹è±¡æœ¬èº«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const myDog = Object.create(&#123;</span><br><span class="line">  sayName: function() &#123;</span><br><span class="line">     console.log(this === myDog); // =&gt; true</span><br><span class="line">     return this.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myDog.name = &apos;Milo&apos;;</span><br><span class="line">// æ–¹æ³•è°ƒç”¨ this æŒ‡å‘ myDog</span><br><span class="line">myDog.sayName(); // =&gt; &apos;Milo&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>Object.create()</code>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡<code>myDog</code>ï¼Œå¹¶æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®å…¶åŸå‹ã€‚<code>myDog</code>å¯¹è±¡ç»§æ‰¿<code>sayName</code>æ–¹æ³•ã€‚</p><p>æ‰§è¡Œ<code>myDog. sayname()</code>æ—¶ï¼Œ<code>myDog</code>æ˜¯è°ƒç”¨çš„ä¸Šä¸‹æ–‡ã€‚</p><p>åœ¨EC6 <code>class</code> è¯­æ³•ä¸­ï¼Œæ–¹æ³•è°ƒç”¨ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯å®ä¾‹æœ¬èº«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Planet &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this.name = name;    </span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    console.log(this === earth); // =&gt; true</span><br><span class="line">    return this.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var earth = new Planet(&apos;Earth&apos;);</span><br><span class="line">// method invocation. the context is earth</span><br><span class="line">earth.getName(); // =&gt; &apos;Earth&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="3-2-é™·é˜±-å°†æ–¹æ³•ä¸å…¶å¯¹è±¡åˆ†ç¦»"><a href="#3-2-é™·é˜±-å°†æ–¹æ³•ä¸å…¶å¯¹è±¡åˆ†ç¦»" class="headerlink" title="3.2 é™·é˜±:å°†æ–¹æ³•ä¸å…¶å¯¹è±¡åˆ†ç¦»"></a>3.2 é™·é˜±:å°†æ–¹æ³•ä¸å…¶å¯¹è±¡åˆ†ç¦»</h4><p>æ–¹æ³•å¯ä»¥ä»å¯¹è±¡ä¸­æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„å˜é‡<code>const alone = myObj.myMethod</code>ã€‚å½“æ–¹æ³•å•ç‹¬è°ƒç”¨æ—¶ï¼Œä¸åŸå§‹å¯¹è±¡<code>alone()</code>åˆ†ç¦»ï¼Œä½ å¯èƒ½è®¤ä¸ºå½“å‰çš„<code>this</code>å°±æ˜¯å®šä¹‰æ–¹æ³•çš„å¯¹è±¡<code>myObject</code>ã€‚</p><p>å¦‚æœæ–¹æ³•åœ¨æ²¡æœ‰å¯¹è±¡çš„æƒ…å†µä¸‹è°ƒç”¨ï¼Œé‚£ä¹ˆå‡½æ•°è°ƒç”¨å°±ä¼šå‘ç”Ÿï¼Œæ­¤æ—¶çš„<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡<code>window</code>ä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯<code>undefined</code>ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†<code>Animal</code>æ„é€ å‡½æ•°å¹¶åˆ›å»ºäº†å®ƒçš„ä¸€ä¸ªå®ä¾‹:<code>myCat</code>ã€‚ç„¶å<code>setTimout()</code>åœ¨1ç§’åæ‰“å°<code>myCat</code>å¯¹è±¡ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = function() &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; false</span><br><span class="line">    console.log(&apos;The &apos; + this.type + &apos; has &apos; + this.legs + &apos; legs&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&apos;Cat&apos;, 4);</span><br><span class="line">// The undefined has undefined legs</span><br><span class="line">setTimeout(myCat.logInfo, 1000);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½è®¤ä¸º<code>setTimout</code>è°ƒç”¨<code>myCat.loginfo()</code>æ—¶ï¼Œå®ƒåº”è¯¥æ‰“å°å…³äº<code>myCat</code>å¯¹è±¡çš„ä¿¡æ¯ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œæ–¹æ³•åœ¨ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ä¸å¯¹è±¡æ˜¯åˆ†ç¦»ï¼Œ<code>setTimout(myCat.logInfo)</code>ä»¥ä¸‹æƒ…å†µæ˜¯ç­‰æ•ˆçš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimout(myCat.logInfo);</span><br><span class="line">// ç­‰ä»·äº</span><br><span class="line">const extractedLogInfo = myCat.logInfo;</span><br><span class="line">setTimout(extractedLogInfo);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>å°†åˆ†ç¦»çš„<code>logInfo</code>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>this</code>æ˜¯å…¨å±€ <code>window</code>,æ‰€ä»¥å¯¹è±¡ä¿¡æ¯æ²¡æœ‰æ­£ç¡®åœ°æ‰“å°ã€‚</p><p>å‡½æ•°å¯ä»¥ä½¿ç”¨<code>.bind()</code>æ–¹æ³•ä¸å¯¹è±¡ç»‘å®š,å°±å¯ä»¥è§£å†³ <code>this</code> æŒ‡å‘çš„é—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = function() &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; true</span><br><span class="line">    console.log(&apos;The &apos; + this.type + &apos; has &apos; + this.legs + &apos; legs&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&apos;Cat&apos;, 4);</span><br><span class="line">// logs &quot;The Cat has 4 legs&quot;</span><br><span class="line">setTimeout(myCat.logInfo.bind(myCat), 1000);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>myCat.logInfo.bind(myCat)</code>è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå®ƒçš„æ‰§è¡Œæ–¹å¼ä¸<code>logInfo</code>å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯æ­¤æ—¶çš„ <code>this</code> æŒ‡å‘ <code>myCat</code>ï¼Œå³ä½¿åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å°†<code>logInfo()</code>æ–¹æ³•å®šä¹‰ä¸ºä¸€ä¸ªç®­å¤´å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = () =&gt; &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; true</span><br><span class="line">    console.log(&apos;The &apos; + this.type + &apos; has &apos; + this.legs + &apos; legs&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&apos;Cat&apos;, 4);</span><br><span class="line">// logs &quot;The Cat has 4 legs&quot;</span><br><span class="line">setTimeout(myCat.logInfo, 1000);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h2 id="4-æ„é€ å‡½æ•°è°ƒç”¨"><a href="#4-æ„é€ å‡½æ•°è°ƒç”¨" class="headerlink" title="4. æ„é€ å‡½æ•°è°ƒç”¨"></a>4. æ„é€ å‡½æ•°è°ƒç”¨</h2><p>å½“<code>new</code>å…³é”®è¯ç´§æ¥ç€å‡½æ•°å¯¹è±¡,(,ä¸€ç»„é€—å·åˆ†éš”çš„å‚æ•°ä»¥åŠ)æ—¶è¢«è°ƒç”¨ï¼Œæ‰§è¡Œçš„æ˜¯æ„é€ å‡½æ•°è°ƒç”¨å¦‚<code>new RegExp(&#39;\\d&#39;)</code>ã€‚</p><p>å£°æ˜äº†ä¸€ä¸ª<code>Country</code>å‡½æ•°ï¼Œå¹¶ä¸”å°†å®ƒä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°è°ƒç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Country(name, traveled) &#123;</span><br><span class="line">   this.name = name ? name : &apos;United Kingdom&apos;;</span><br><span class="line">   this.traveled = Boolean(traveled);</span><br><span class="line">&#125;</span><br><span class="line">Country.prototype.travel = function() &#123;</span><br><span class="line">  this.traveled = true;</span><br><span class="line">&#125;;</span><br><span class="line">// æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="line">const france = new Country(&apos;France&apos;, false);</span><br><span class="line">// æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="line">const unitedKingdom = new Country;</span><br><span class="line"></span><br><span class="line">france.travel(); // Travel to France</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>new Country(&#39;France&#39;, false)</code>æ˜¯<code>Country</code>å‡½æ•°çš„æ„é€ å‡½æ•°è°ƒç”¨ã€‚å®ƒçš„æ‰§è¡Œç»“æœæ˜¯ä¸€ä¸ª<code>name</code>å±æ€§ä¸º<code>&#39;France&#39;</code>çš„æ–°çš„å¯¹è±¡ã€‚ å¦‚æœè¿™ä¸ªæ„é€ å‡½æ•°è°ƒç”¨æ—¶ä¸éœ€è¦å‚æ•°ï¼Œé‚£ä¹ˆæ‹¬å·å¯ä»¥çœç•¥ï¼š<code>new Country</code>ã€‚</p><p>ä»ES6å¼€å§‹ï¼ŒJS å…è®¸ç”¨<code>class</code>å…³é”®è¯æ¥å®šä¹‰æ„é€ å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class City &#123;</span><br><span class="line">  constructor(name, traveled) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.traveled = false;</span><br><span class="line">  &#125;</span><br><span class="line">  travel() &#123;</span><br><span class="line">    this.traveled = true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const paris = new City(&apos;Paris&apos;, false);</span><br><span class="line">paris.travel();</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>new City(&#39;Paris&#39;)</code>æ˜¯æ„é€ å‡½æ•°è°ƒç”¨ã€‚è¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–ç”±è¿™ä¸ªç±»ä¸­ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•<code>constructor</code>æ¥å¤„ç†ã€‚å…¶ä¸­ï¼Œ<code>this</code>æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p><p>æ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©ºçš„å¯¹è±¡ï¼Œå®ƒä»æ„é€ å‡½æ•°çš„åŸå‹ç»§æ‰¿äº†å±æ€§ã€‚æ„é€ å‡½æ•°çš„ä½œç”¨å°±æ˜¯å»åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚ å¯èƒ½ä½ å·²ç»çŸ¥é“äº†ï¼Œåœ¨è¿™ç§ç±»å‹çš„è°ƒç”¨ä¸­ï¼Œä¸Šä¸‹æ–‡æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹ã€‚</p><p>å½“å±æ€§è®¿é—®<code>myObject.myFunction</code>å‰é¢æœ‰ä¸€ä¸ª<code>new</code>å…³é”®è¯æ—¶ï¼ŒJSä¼šæ‰§è¡Œæ„é€ å‡½æ•°è°ƒç”¨è€Œä¸æ˜¯åŸæ¥çš„æ–¹æ³•è°ƒç”¨ã€‚</p><p>ä¾‹å¦‚<code>new myObject.myFunction()</code>ï¼šå®ƒç›¸å½“äºå…ˆç”¨å±æ€§è®¿é—®æŠŠæ–¹æ³•æå–å‡ºæ¥<code>extractedFunction = myObject.myFunction</code>ï¼Œç„¶ååˆ©ç”¨æŠŠå®ƒä½œä¸ºæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š <code>new extractedFunction()</code>ã€‚</p><h2 id="4-1-æ„é€ å‡½æ•°ä¸­çš„-this"><a href="#4-1-æ„é€ å‡½æ•°ä¸­çš„-this" class="headerlink" title="4.1. æ„é€ å‡½æ•°ä¸­çš„ this"></a>4.1. æ„é€ å‡½æ•°ä¸­çš„ this</h2><blockquote><p>åœ¨æ„é€ å‡½æ•°è°ƒç”¨ä¸­ this æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡</p></blockquote><p>æ„é€ å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å®ƒåˆ©ç”¨æ„é€ å‡½æ•°çš„å‚æ•°åˆå§‹åŒ–æ–°çš„å¯¹è±¡ï¼Œè®¾å®šå±æ€§çš„åˆå§‹å€¼ï¼Œæ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ç­‰ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884d774863ecb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>æ¥çœ‹çœ‹ä¸‹é¢ç¤ºä¾‹ä¸­çš„ä¸Šä¸‹æ–‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Foo () &#123;</span><br><span class="line">  console.log(this instanceof Foo); // =&gt; true</span><br><span class="line">  this.property = &apos;Default Value&apos;;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const fooInstance = new Foo();</span><br><span class="line">fooInstance.property; // =&gt; &apos;Default Value&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>new Foo()</code> æ­£åœ¨è¿›è¡Œæ„é€ å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­ä¸Šä¸‹æ–‡æ˜¯<code>fooInstance</code>ã€‚ åœ¨<code>Foo</code>å†…éƒ¨åˆå§‹åŒ–å¯¹è±¡ï¼š<code>this.property</code>è¢«èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚</p><p>åŒæ ·çš„æƒ…å†µåœ¨ç”¨<code>class</code>è¯­æ³•ï¼ˆä»ES6èµ·ï¼‰æ—¶ä¹Ÿä¼šå‘ç”Ÿï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯åˆå§‹åŒ–åœ¨<code>constructor</code>æ–¹æ³•ä¸­è¿›è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Bar &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    console.log(this instanceof Bar); // =&gt; true</span><br><span class="line">    this.property = &apos;Default Value&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const barInstance = new Bar();</span><br><span class="line">barInstance.property; // =&gt; &apos;Default Value&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="4-2-é™·é˜±-å¿˜äº†ä½¿ç”¨-new"><a href="#4-2-é™·é˜±-å¿˜äº†ä½¿ç”¨-new" class="headerlink" title="4.2. é™·é˜±: å¿˜äº†ä½¿ç”¨ new"></a>4.2. é™·é˜±: å¿˜äº†ä½¿ç”¨ new</h4><p>æœ‰äº›JSå‡½æ•°ä¸æ˜¯åªåœ¨ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ä¹Ÿä¼šï¼Œä¾‹å¦‚<code>RegExp</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var reg1 = new RegExp(&apos;\\w+&apos;);</span><br><span class="line">var reg2 = RegExp(&apos;\\w+&apos;);</span><br><span class="line"></span><br><span class="line">reg1 instanceof RegExp;      // =&gt; true</span><br><span class="line">reg2 instanceof RegExp;      // =&gt; true</span><br><span class="line">reg1.source === reg2.source; // =&gt; true</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>å½“æ‰§è¡Œçš„ <code>new RegExp(&#39;\\w+&#39;)</code>å’Œ<code>RegExp(&#39;\\w+&#39;)</code>æ—¶ï¼ŒJS ä¼šåˆ›å»ºç­‰ä»·çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</p><p>ä½¿ç”¨å‡½æ•°è°ƒç”¨æ¥åˆ›å»ºå¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜(ä¸åŒ…æ‹¬å·¥å‚æ¨¡å¼)ï¼Œå› ä¸ºä¸€äº›æ„é€ å‡½æ•°å¯èƒ½ä¼šå¿½ç•¥åœ¨ç¼ºå°‘<code>new</code>å…³é”®å­—æ—¶åˆå§‹åŒ–å¯¹è±¡çš„é€»è¾‘ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Vehicle(type, wheelsCount) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.wheelsCount = wheelsCount;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">// å¿˜è®°ä½¿ç”¨ new</span><br><span class="line">const car = Vehicle(&apos;Car&apos;, 4);</span><br><span class="line">car.type;       // =&gt; &apos;Car&apos;</span><br><span class="line">car.wheelsCount // =&gt; 4</span><br><span class="line">car === window  // =&gt; true</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>Vehicle</code>æ˜¯ä¸€ä¸ªåœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸Šè®¾ç½®<code>type</code>å’Œ<code>wheelsCount</code>å±æ€§çš„å‡½æ•°ã€‚</p><p>å½“æ‰§è¡Œ<code>Vehicle(&#39;Car&#39;ï¼Œ 4)</code>æ—¶ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡<code>Car</code>ï¼Œå®ƒå…·æœ‰æ­£ç¡®çš„å±æ€§:<code>Car.type</code> ä¸º <code>Car</code>å’Œ<code>Car.wheelsCount</code> ä¸º<code>4</code>ï¼Œä½ å¯èƒ½è®¤ä¸ºå®ƒå¾ˆé€‚åˆåˆ›å»ºå’Œåˆå§‹åŒ–æ–°å¯¹è±¡ã€‚</p><p>ç„¶è€Œï¼Œåœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œ<code>this</code>æ˜¯<code>window</code>å¯¹è±¡ ï¼Œå› æ­¤ <code>Vehicleï¼ˆ&#39;Car&#39;ï¼Œ4ï¼‰</code>åœ¨ <code>window</code> å¯¹è±¡ä¸Šè®¾ç½®å±æ€§ã€‚ æ˜¾ç„¶è¿™æ˜¯é”™è¯¯ï¼Œå®ƒå¹¶æ²¡æœ‰åˆ›å»ºæ–°å¯¹è±¡ã€‚</p><p>å½“ä½ å¸Œæœ›è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œç¡®ä¿ä½ ä½¿ç”¨äº†<code>new</code>æ“ä½œç¬¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Vehicle(type, wheelsCount) &#123;</span><br><span class="line">  if (!(this instanceof Vehicle)) &#123;</span><br><span class="line">    throw Error(&apos;Error: Incorrect invocation&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.wheelsCount = wheelsCount;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const car = new Vehicle(&apos;Car&apos;, 4);</span><br><span class="line">car.type               // =&gt; &apos;Car&apos;</span><br><span class="line">car.wheelsCount        // =&gt; 4</span><br><span class="line">car instanceof Vehicle // =&gt; true</span><br><span class="line"></span><br><span class="line">// Function invocation. Throws an error.</span><br><span class="line">const brokenCar = Vehicle(&apos;Broken Car&apos;, 3);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>new Vehicle(&#39;Car&#39;ï¼Œ4)</code> è¿è¡Œæ­£å¸¸ï¼šåˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå› ä¸ºæ„é€ å‡½æ•°è°ƒç”¨ä¸­æ—¶ä½¿ç”¨äº†<code>new</code>å…³é”®å­—ã€‚</p><p>åœ¨æ„é€ å‡½æ•°é‡Œæ·»åŠ äº†ä¸€ä¸ªéªŒè¯<code>this instanceof Vehicle</code>æ¥ç¡®ä¿æ‰§è¡Œçš„ä¸Šä¸‹æ–‡æ˜¯æ­£ç¡®çš„å¯¹è±¡ç±»å‹ã€‚å¦‚æœ<code>this</code>ä¸æ˜¯<code>Vehicle</code>ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ã€‚è¿™æ ·ï¼Œå¦‚æœæ‰§è¡Œ<code>Vehicle(&#39;Broken Car&#39;, 3)</code>(æ²¡æœ‰<code>new</code>)ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼š<code>Error: Incorrect invocation</code>ã€‚</p><h2 id="5-éšå¼è°ƒç”¨"><a href="#5-éšå¼è°ƒç”¨" class="headerlink" title="5. éšå¼è°ƒç”¨"></a>5. éšå¼è°ƒç”¨</h2><p>ä½¿ç”¨<code>myFun.call()</code>æˆ–<code>myFun.apply()</code>æ–¹æ³•è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ‰§è¡Œçš„æ˜¯éšå¼è°ƒç”¨ã€‚</p><p>JSä¸­çš„å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å‡½æ•°å°±æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„ç±»å‹ä¸º<code>Function</code>ã€‚ä»å‡½æ•°å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨ä¸­ï¼Œ<code>.call()</code>å’Œ<code>.apply()</code>ç”¨äºè°ƒç”¨å…·æœ‰å¯é…ç½®ä¸Šä¸‹æ–‡çš„å‡½æ•°ã€‚</p><ul><li>æ–¹æ³• <code>.call(thisArg[, arg1[, arg2[, ...]]])</code>å°†æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>thisArg</code>ä½œä¸ºè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œ<code>arg1, arg2, ...</code>è¿™äº›åˆ™ä½œä¸ºå‚æ•°ä¼ å…¥è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</li><li>æ–¹æ³•<code>.apply(thisArg, [args])</code>å°†æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>thisArg</code>ä½œä¸ºè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ¥å—å¦ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡<code>[arg1, arg2, ...]</code>ä½œä¸ºè¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚</li></ul><p>ä¸‹é¢æ˜¯éšå¼è°ƒç”¨çš„ä¾‹å­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function increment(number) &#123;</span><br><span class="line">  return ++number;  </span><br><span class="line">&#125;</span><br><span class="line">increment.call(undefined, 10);    // =&gt; 11</span><br><span class="line">increment.apply(undefined, [10]); // =&gt; 11</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>increment.call()</code>å’Œ<code>increment.apply()</code>éƒ½ç”¨å‚æ•°<code>10</code>è°ƒç”¨äº†è¿™ä¸ªè‡ªå¢å‡½æ•°ã€‚</p><p>ä¸¤è€…çš„åŒºåˆ«æ˜¯<code>.call()</code>æ¥å—ä¸€ç»„å‚æ•°ï¼Œä¾‹å¦‚<code>myFunction.call(thisValue, &#39;value1&#39;, &#39;value2&#39;)</code>ã€‚è€Œ<code>.apply()</code>æ¥å—çš„ä¸€ç»„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä¾‹å¦‚<code>myFunction.apply(thisValue, [&#39;value1&#39;, &#39;value2&#39;]</code>)ã€‚</p><h4 id="5-1-éšå¼è°ƒç”¨ä¸­çš„this"><a href="#5-1-éšå¼è°ƒç”¨ä¸­çš„this" class="headerlink" title="5.1. éšå¼è°ƒç”¨ä¸­çš„this"></a>5.1. éšå¼è°ƒç”¨ä¸­çš„this</h4><blockquote><p>åœ¨éšå¼è°ƒç”¨.call()æˆ–.apply()ä¸­ï¼Œthisæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</p></blockquote><p>å¾ˆæ˜æ˜¾ï¼Œåœ¨éšå¼è°ƒç”¨ä¸­ï¼Œ<code>this</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<code>.call()</code>æˆ–<code>.apply()</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var rabbit = &#123; name: &apos;White Rabbit&apos; &#125;;</span><br><span class="line">function concatName(string) &#123;</span><br><span class="line">  console.log(this === rabbit); // =&gt; true</span><br><span class="line">  return string + this.name;</span><br><span class="line">&#125;</span><br><span class="line">concatName.call(rabbit, &apos;Hello &apos;);  // =&gt; &apos;Hello White Rabbit&apos;</span><br><span class="line">concatName.apply(rabbit, [&apos;Bye &apos;]); // =&gt; &apos;Bye White Rabbit&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>å½“åº”è¯¥ä½¿ç”¨ç‰¹å®šä¸Šä¸‹æ–‡æ‰§è¡Œå‡½æ•°æ—¶ï¼Œéšå¼è°ƒç”¨éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ä¸ºäº†è§£å†³æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ<code>this</code>æ€»æ˜¯<code>window</code>æˆ–ä¸¥æ ¼æ¨¡å¼ä¸‹çš„<code>undefined</code>çš„ä¸Šä¸‹æ–‡é—®é¢˜ã€‚éšå¼è°ƒç”¨å¯ä»¥ç”¨äºæ¨¡æ‹Ÿåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨æŸä¸ªæ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Runner(name) &#123;</span><br><span class="line">  console.log(this instanceof Rabbit); // =&gt; true</span><br><span class="line">  this.name = name;  </span><br><span class="line">&#125;</span><br><span class="line">function Rabbit(name, countLegs) &#123;</span><br><span class="line">  console.log(this instanceof Rabbit); // =&gt; true</span><br><span class="line">  Runner.call(this, name);</span><br><span class="line">  this.countLegs = countLegs;</span><br><span class="line">&#125;</span><br><span class="line">const myRabbit = new Rabbit(&apos;White Rabbit&apos;, 4);</span><br><span class="line">myRabbit; // &#123; name: &apos;White Rabbit&apos;, countLegs: 4 &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>Rabbit</code>ä¸­çš„<code>Runner.call(this, name)</code>éšå¼è°ƒç”¨äº†çˆ¶ç±»çš„å‡½æ•°æ¥åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚</p><h2 id="6-ç»‘å®šå‡½æ•°"><a href="#6-ç»‘å®šå‡½æ•°" class="headerlink" title="6. ç»‘å®šå‡½æ•°"></a>6. ç»‘å®šå‡½æ•°</h2><p>ç»‘å®šå‡½æ•°æ˜¯ä¸å¯¹è±¡è¿æ¥çš„å‡½æ•°ã€‚é€šå¸¸ä½¿ç”¨<code>.bind()</code>æ–¹æ³•ä»åŸå§‹å‡½æ•°åˆ›å»ºã€‚åŸå§‹å‡½æ•°å’Œç»‘å®šå‡½æ•°å…±äº«ç›¸åŒçš„ä»£ç å’Œä½œç”¨åŸŸï¼Œä½†æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡ä¸åŒã€‚</p><p>æ–¹æ³• <code>myFunc.bind(thisArg[, arg1[, arg2[, ...]]])</code>æ¥å—ç¬¬ä¸€ä¸ªå‚æ•°<code>thisArg</code>ä½œä¸ºç»‘å®šå‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å®ƒæ¥å—ä¸€ç»„å¯é€‰çš„å‚æ•° <code>arg1, arg2, ...</code>ä½œä¸ºè¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªç»‘å®šäº†<code>thisArg</code>çš„æ–°å‡½æ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function multiply(number) &#123;</span><br><span class="line">  &apos;use strict&apos;;</span><br><span class="line">  return this * number;</span><br><span class="line">&#125;</span><br><span class="line">const double = multiply.bind(2);</span><br><span class="line"></span><br><span class="line">double(3);  // =&gt; 6</span><br><span class="line">double(10); // =&gt; 20</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>bind(2)</code>è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡<code>double</code>ï¼Œ<code>double</code> ç»‘å®šäº†æ•°å­—<code>2</code>ã€‚<code>multiply</code>å’Œ<code>double</code>å…·æœ‰ç›¸åŒçš„ä»£ç å’Œä½œç”¨åŸŸã€‚</p><p>ä¸<code>.apply()</code>å’Œ<code>.call()</code> æ–¹æ³•ç›¸åï¼Œå®ƒä¸ä¼šç«‹å³è°ƒç”¨è¯¥å‡½æ•°ï¼Œ<code>.bind()</code>æ–¹æ³•åªè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œåœ¨ä¹‹åè¢«è°ƒç”¨ï¼Œåªæ˜¯this<code>å·²ç»</code>è¢«æå‰è®¾ç½®å¥½äº†ã€‚</p><h4 id="6-1-ç»‘å®šå‡½æ•°ä¸­çš„this"><a href="#6-1-ç»‘å®šå‡½æ•°ä¸­çš„this" class="headerlink" title="6.1. ç»‘å®šå‡½æ•°ä¸­çš„this"></a>6.1. ç»‘å®šå‡½æ•°ä¸­çš„this</h4><blockquote><p>åœ¨è°ƒç”¨ç»‘å®šå‡½æ•°æ—¶ï¼Œ<code>this</code>æ˜¯<code>.bind()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p></blockquote><p><code>.bind()</code>çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå°†ä¸Šä¸‹æ–‡ä½œä¸ºä¼ é€’ç»™<code>.bind()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å®ƒæ˜¯ä¸€ç§å¼ºå¤§çš„æŠ€æœ¯ï¼Œä½¿å’±ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå®šä¹‰äº†<code>this</code>å€¼çš„å‡½æ•°ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884dceeb04418?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>æ¥çœ‹çœ‹ï¼Œå¦‚ä½•åœ¨å¦‚ä½•åœ¨ç»‘å®šå‡½æ•°è®¾ç½® <code>this</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">  array: [3, 5, 10],</span><br><span class="line">  getNumbers: function() &#123;</span><br><span class="line">    return this.array;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const boundGetNumbers = numbers.getNumbers.bind(numbers);</span><br><span class="line">boundGetNumbers(); // =&gt; [3, 5, 10]</span><br><span class="line">// Extract method from object</span><br><span class="line">const simpleGetNumbers = numbers.getNumbers;</span><br><span class="line">simpleGetNumbers(); // =&gt; undefined (ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>numbers.getNumbers.bind(numbers)</code>è¿”å›ç»‘å®š<code>numbers</code>å¯¹è±¡<code>boundGetNumbers</code>å‡½æ•°ã€‚<code>boundGetNumbers()</code>è°ƒç”¨æ—¶çš„<code>this</code>æ˜¯<code>number</code>å¯¹è±¡ï¼Œå¹¶èƒ½å¤Ÿè¿”å›æ­£ç¡®çš„æ•°ç»„å¯¹è±¡ã€‚</p><p>å¯ä»¥å°†å‡½æ•°<code>numbers.getNumbers</code>æå–åˆ°å˜é‡<code>simpleGetNumbers</code>ä¸­è€Œä¸è¿›è¡Œç»‘å®šã€‚åœ¨ä¹‹åçš„å‡½æ•°è°ƒç”¨ä¸­<code>simpleGetNumbers()</code>çš„<code>this</code>æ˜¯<code>window</code>(ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º<code>undefined</code>)ï¼Œä¸æ˜¯<code>number</code>å¯¹è±¡ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œ<code>simpleGetNumbers()</code>ä¸ä¼šæ­£ç¡®è¿”å›æ•°ç»„ã€‚</p><h4 id="6-2-ç´§å¯†çš„ä¸Šä¸‹æ–‡ç»‘å®š"><a href="#6-2-ç´§å¯†çš„ä¸Šä¸‹æ–‡ç»‘å®š" class="headerlink" title="6.2 ç´§å¯†çš„ä¸Šä¸‹æ–‡ç»‘å®š"></a>6.2 ç´§å¯†çš„ä¸Šä¸‹æ–‡ç»‘å®š</h4><p><code>.bind()</code>åˆ›å»ºä¸€ä¸ªæ°¸ä¹…çš„ä¸Šä¸‹æ–‡é“¾æ¥ï¼Œå¹¶å§‹ç»ˆä¿æŒå®ƒã€‚ ä¸€ä¸ªç»‘å®šå‡½æ•°ä¸èƒ½é€šè¿‡<code>.call()</code>æˆ–è€…<code>.apply()</code>æ¥æ”¹å˜å®ƒçš„ä¸Šä¸‹æ–‡ï¼Œç”šè‡³æ˜¯å†æ¬¡ç»‘å®šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆä½œç”¨ã€‚</p><p>åªæœ‰ç»‘å®šå‡½æ•°çš„æ„é€ å‡½æ•°è°ƒç”¨æ‰èƒ½æ›´æ”¹å·²ç»ç»‘å®šçš„ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯å¾ˆä¸æ¨èçš„åšæ³•(æ„é€ å‡½æ•°è°ƒç”¨å¿…é¡»ä½¿ç”¨å¸¸è§„çš„éç»‘å®šå‡½æ•°)ã€‚</p><p>ä¸‹é¢ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªç»‘å®šå‡½æ•°ï¼Œç„¶åå°è¯•æ›´æ”¹å…¶å·²é¢„å…ˆå®šä¹‰å¥½çš„ä¸Šä¸‹æ–‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function getThis() &#123;</span><br><span class="line">  &apos;use strict&apos;;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">const one = getThis.bind(1);</span><br><span class="line">// ç»‘å®šå‡½æ•°è°ƒç”¨</span><br><span class="line">one(); // =&gt; 1</span><br><span class="line">// ä½¿ç”¨å¸¦æœ‰.apply()å’Œ.call()çš„ç»‘å®šå‡½æ•°</span><br><span class="line">one.call(2);  // =&gt; 1</span><br><span class="line">one.apply(2); // =&gt; 1</span><br><span class="line">// å†æ¬¡ç»‘å®š</span><br><span class="line">one.bind(2)(); // =&gt; 1</span><br><span class="line">// ä»¥æ„é€ å‡½æ•°çš„å½¢å¼è°ƒç”¨ç»‘å®šå‡½æ•°</span><br><span class="line">new one(); // =&gt; Object</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>åªæœ‰<code>new one()</code>æ”¹å˜äº†ç»‘å®šå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œå…¶ä»–æ–¹å¼çš„è°ƒç”¨ä¸­<code>this</code>æ€»æ˜¯ç­‰äº1ã€‚</p><h2 id="7-ç®­å¤´å‡½æ•°"><a href="#7-ç®­å¤´å‡½æ•°" class="headerlink" title="7. ç®­å¤´å‡½æ•°"></a>7. ç®­å¤´å‡½æ•°</h2><p>ç®­å¤´å‡½æ•°ç”¨äºä»¥æ›´çŸ­çš„å½¢å¼å£°æ˜å‡½æ•°ï¼Œå¹¶åœ¨è¯æ³•ä¸Šç»‘å®šä¸Šä¸‹æ–‡ã€‚å®ƒå¯ä»¥è¿™æ ·ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const hello = (name) =&gt; &#123;</span><br><span class="line">  return &apos;Hello &apos; + name;</span><br><span class="line">&#125;;</span><br><span class="line">hello(&apos;World&apos;); // =&gt; &apos;Hello World&apos;</span><br><span class="line">// Keep only even numbers</span><br><span class="line">[1, 2, 5, 6].filter(item =&gt; item % 2 === 0); // =&gt; [2, 6]</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°è¯­æ³•ç®€å•ï¼Œæ²¡æœ‰å†—é•¿çš„<code>function</code> å…³é”®å­—ã€‚å½“ç®­å¤´å‡½æ•°åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œç”šè‡³å¯ä»¥çœç•¥<code>return</code>å…³é”®å­—ã€‚</p><p>ç®­å¤´å‡½æ•°æ˜¯åŒ¿åçš„ï¼Œè¿™æ„å‘³ç€<code>name</code>å±æ€§æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²<code>&#39;&#39;</code>ã€‚è¿™æ ·å®ƒå°±æ²¡æœ‰è¯æ³•ä¸Šå‡½æ•°å(å‡½æ•°åå¯¹äºé€’å½’ã€åˆ†ç¦»äº‹ä»¶å¤„ç†ç¨‹åºéå¸¸æœ‰ç”¨)</p><p>åŒæ—¶ï¼Œè·Ÿå¸¸è§„å‡½æ•°ç›¸åï¼Œå®ƒä¹Ÿä¸æä¾›<code>arguments</code>å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œè¿™åœ¨ES6ä¸­é€šè¿‡<code>rest parameters</code>ä¿®å¤äº†:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const sumArguments = (...args) =&gt; &#123;</span><br><span class="line">   console.log(typeof arguments); // =&gt; &apos;undefined&apos;</span><br><span class="line">   return args.reduce((result, item) =&gt; result + item);</span><br><span class="line">&#125;;</span><br><span class="line">sumArguments.name      // =&gt; &apos;&apos;</span><br><span class="line">sumArguments(5, 5, 6); // =&gt; 16</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="7-1-ç®­å¤´å‡½æ•°ä¸­çš„this"><a href="#7-1-ç®­å¤´å‡½æ•°ä¸­çš„this" class="headerlink" title="7.1. ç®­å¤´å‡½æ•°ä¸­çš„this"></a>7.1. ç®­å¤´å‡½æ•°ä¸­çš„this</h4><blockquote><p>this å®šä¹‰ç®­å¤´å‡½æ•°çš„å°é—­ä¸Šä¸‹æ–‡</p></blockquote><p>ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ä»å®šä¹‰å®ƒçš„å¤–éƒ¨å‡½æ•°ä¸­è·å– <code>this</code>ã€‚ æ¢å¥è¯è¯´ï¼Œç®­å¤´å‡½æ•°åœ¨è¯æ±‡ä¸Šç»‘å®š <code>this</code>ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884dfd5bf33de?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸ªä¸Šä¸‹æ–‡é€æ˜çš„ç‰¹æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Point &#123;</span><br><span class="line">  constructor(x, y) &#123;</span><br><span class="line">    this.x = x;</span><br><span class="line">    this.y = y;</span><br><span class="line">  &#125;</span><br><span class="line">  log() &#123;</span><br><span class="line">    console.log(this === myPoint); // =&gt; true</span><br><span class="line">    setTimeout(()=&gt; &#123;</span><br><span class="line">      console.log(this === myPoint);      // =&gt; true</span><br><span class="line">      console.log(this.x + &apos;:&apos; + this.y); // =&gt; &apos;95:165&apos;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const myPoint = new Point(95, 165);</span><br><span class="line">myPoint.log();</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>setTimeout</code>ä½¿ç”¨ä¸<code>log()</code>æ–¹æ³•ç›¸åŒçš„ä¸Šä¸‹æ–‡(<code>myPoint</code>å¯¹è±¡)è°ƒç”¨ç®­å¤´å‡½æ•°ã€‚æ­£å¦‚æ‰€è§ï¼Œç®­å¤´å‡½æ•°ä»å®šä¹‰å®ƒçš„å‡½æ•°ç»§æ‰¿ä¸Šä¸‹æ–‡ã€‚</p><p>å¦‚æœåœ¨è¿™ä¸ªä¾‹å­é‡Œå°è¯•ç”¨å¸¸è§„å‡½æ•°,å®ƒåˆ›å»ºè‡ªå·±çš„ä¸Šä¸‹æ–‡(<code>window</code>æˆ–ä¸¥æ ¼æ¨¡å¼ä¸‹çš„<code>undefined</code>)ã€‚å› æ­¤ï¼Œè¦ä½¿ç›¸åŒçš„ä»£ç æ­£ç¡®åœ°ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œéœ€è¦æ‰‹åŠ¨ç»‘å®šä¸Šä¸‹æ–‡:<code>setTimeout(function(){â€¦}.bind(this))</code>ã€‚è¿™å¾ˆå†—é•¿ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°æ˜¯ä¸€ç§æ›´ç®€æ´ã€æ›´çŸ­çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>å¦‚æœç®­å¤´å‡½æ•°åœ¨æœ€é¡¶å±‚çš„ä½œç”¨åŸŸä¸­å®šä¹‰ï¼ˆåœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–ï¼‰ï¼Œåˆ™ä¸Šä¸‹æ–‡å§‹ç»ˆæ˜¯å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­çš„ windowï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onst getContext = () =&gt; &#123;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">   return this;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(getContext() === window); // =&gt; true</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°ä¸€åŠ³æ°¸é€¸åœ°ä¸è¯æ±‡ä¸Šä¸‹æ–‡ç»‘å®šã€‚ å³ä½¿ä¿®æ”¹ä¸Šä¸‹æ–‡ï¼Œ<code>this</code>ä¹Ÿä¸èƒ½è¢«æ”¹å˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2];</span><br><span class="line">(function() &#123;  </span><br><span class="line">  const get = () =&gt; &#123;</span><br><span class="line">    console.log(this === numbers); // =&gt; true</span><br><span class="line">    return this;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(this === numbers); // =&gt; true</span><br><span class="line">  get(); // =&gt; [1, 2]</span><br><span class="line">  // Use arrow function with .apply() and .call()</span><br><span class="line">  get.call([0]);  // =&gt; [1, 2]</span><br><span class="line">  get.apply([0]); // =&gt; [1, 2]</span><br><span class="line">  // Bind</span><br><span class="line">  get.bind([0])(); // =&gt; [1, 2]</span><br><span class="line">&#125;).call(numbers);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>æ— è®ºå¦‚ä½•è°ƒç”¨ç®­å¤´å‡½æ•°<code>get</code>ï¼Œå®ƒæ€»æ˜¯ä¿ç•™è¯æ±‡ä¸Šä¸‹æ–‡<code>numbers</code>ã€‚ ç”¨å…¶ä»–ä¸Šä¸‹æ–‡çš„éšå¼è°ƒç”¨(é€šè¿‡ <code>get.call([0])</code>æˆ–<code>get.apply([0])</code>)æˆ–è€…é‡æ–°ç»‘å®š(é€šè¿‡<code>.bind()</code>)éƒ½ä¸ä¼šèµ·ä½œç”¨ã€‚</p><p>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚ å°†å®ƒä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨(<code>new get()</code>)ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š<code>TypeError: get is not a constructor</code>ã€‚</p><h4 id="7-2-é™·é˜±-ç”¨ç®­å¤´å‡½æ•°å®šä¹‰æ–¹æ³•"><a href="#7-2-é™·é˜±-ç”¨ç®­å¤´å‡½æ•°å®šä¹‰æ–¹æ³•" class="headerlink" title="7.2. é™·é˜±: ç”¨ç®­å¤´å‡½æ•°å®šä¹‰æ–¹æ³•"></a>7.2. é™·é˜±: ç”¨ç®­å¤´å‡½æ•°å®šä¹‰æ–¹æ³•</h4><p>ä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å£°æ˜ä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚ç®­å¤´å‡½æ•°çš„å®šä¹‰ç›¸æ¯”äºå‡½æ•°è¡¨è¾¾å¼çŸ­å¾—å¤šï¼š<code>(param) =&gt; {...} instead of function(param) {..}</code>ã€‚</p><p>æ¥çœ‹çœ‹ä¾‹å­ï¼Œç”¨ç®­å¤´å‡½æ•°åœ¨Periodç±»ä¸Šå®šä¹‰äº†<code>format()</code>æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Period (hours, minutes) &#123;  </span><br><span class="line">  this.hours = hours;</span><br><span class="line">  this.minutes = minutes;</span><br><span class="line">&#125;</span><br><span class="line">Period.prototype.format = () =&gt; &#123;</span><br><span class="line">  console.log(this === window); // =&gt; true</span><br><span class="line">  return this.hours + &apos; hours and &apos; + this.minutes + &apos; minutes&apos;;</span><br><span class="line">&#125;;</span><br><span class="line">const walkPeriod = new Period(2, 30);  </span><br><span class="line">walkPeriod.format(); // =&gt; &apos;undefined hours and undefined minutes&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>ç”±äº<code>format</code>æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¹¶ä¸”åœ¨å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆæœ€é¡¶å±‚çš„ä½œç”¨åŸŸï¼‰ä¸­å®šä¹‰ï¼Œå› æ­¤ <code>this</code> æŒ‡å‘<code>window</code>å¯¹è±¡ã€‚</p><p>å³ä½¿<code>format</code>ä½œä¸ºæ–¹æ³•åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè¢«è°ƒç”¨å¦‚<code>walkPeriod.format()</code>ï¼Œ<code>window</code>ä»ç„¶æ˜¯è¿™æ¬¡è°ƒç”¨çš„ä¸Šä¸‹æ–‡ã€‚ä¹‹æ‰€ä»¥ä¼šè¿™æ ·æ˜¯å› ä¸ºç®­å¤´å‡½æ•°æœ‰é™æ€çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸ä¼šéšç€è°ƒç”¨æ–¹å¼çš„æ”¹å˜è€Œæ”¹å˜ã€‚</p><p>è¯¥æ–¹æ³•è¿”å›<code>&#39;undefined hourså’Œundefined minutes&#39;</code>ï¼Œè¿™ä¸æ˜¯å’±ä»¬æƒ³è¦çš„ç»“æœã€‚</p><p>å‡½æ•°è¡¨è¾¾å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¸¸è§„å‡½æ•°ç¡®å®èƒ½æ ¹æ®å®é™…è°ƒç”¨æ”¹å˜å®ƒçš„ä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Period (hours, minutes) &#123;  </span><br><span class="line">  this.hours = hours;</span><br><span class="line">  this.minutes = minutes;</span><br><span class="line">&#125;</span><br><span class="line">Period.prototype.format = function() &#123;</span><br><span class="line">  console.log(this === walkPeriod); // =&gt; true</span><br><span class="line">  return this.hours + &apos; hours and &apos; + this.minutes + &apos; minutes&apos;;</span><br><span class="line">&#125;;</span><br><span class="line">const walkPeriod = new Period(2, 30);  </span><br><span class="line">walkPeriod.format(); // =&gt; &apos;2 hours and 30 minutes&apos;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><code>walkPeriod.format()</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ–¹æ³•è°ƒç”¨ï¼Œå®ƒçš„ä¸Šä¸‹æ–‡æ˜¯<code>walkPeriod</code>å¯¹è±¡ã€‚<code>this.hours</code>ç­‰äº<code>2</code>ï¼Œ<code>this.minutes</code>ç­‰äº<code>30</code>ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¿”å›äº†æ­£ç¡®çš„ç»“æœï¼š<code>&#39;2 hours and 30 minutes&#39;</code>ã€‚</p><p><strong>åŸæ–‡ï¼šdmitripavlutin.com/gentle-explâ€¦</strong></p><p><strong>ä»£ç éƒ¨ç½²åå¯èƒ½å­˜åœ¨çš„BUGæ²¡æ³•å®æ—¶çŸ¥é“ï¼Œäº‹åä¸ºäº†è§£å†³è¿™äº›BUGï¼ŒèŠ±äº†å¤§é‡çš„æ—¶é—´è¿›è¡Œlog è°ƒè¯•ï¼Œè¿™è¾¹é¡ºä¾¿ç»™å¤§å®¶æ¨èä¸€ä¸ªå¥½ç”¨çš„BUGç›‘æ§å·¥å…· Fundebugã€‚</strong></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸ºå‡½æ•°è°ƒç”¨å¯¹<code>this</code>å½±å“æœ€å¤§ï¼Œä»ç°åœ¨å¼€å§‹ä¸è¦é—®è‡ªå·±ï¼š</p><blockquote><p>this æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿ</p></blockquote><p>è€Œæ˜¯è¦çœ‹çœ‹</p><blockquote><p>å‡½æ•°æ˜¯æ€ä¹ˆè¢«è°ƒç”¨çš„ï¼Ÿ</p></blockquote><p>å¯¹äºç®­å¤´å‡½æ•°ï¼Œéœ€è¦æƒ³æƒ³</p><blockquote><p>åœ¨è¿™ä¸ªç®­å¤´å‡½æ•°è¢«å®šä¹‰çš„åœ°æ–¹ï¼Œthisæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>è¿™æ˜¯å¤„ç†<code>this</code>æ—¶çš„æ­£ç¡®æƒ³æ³•ï¼Œå®ƒä»¬å¯ä»¥è®©ä½ å…äºå¤´ç—›ã€‚</p>]]></content>
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æŒ–çŸ¿ç¨‹åº</title>
      <link href="/2019/07/31/%E6%8C%96%E7%9F%BF%E7%A8%8B%E5%BA%8F/"/>
      <url>/2019/07/31/%E6%8C%96%E7%9F%BF%E7%A8%8B%E5%BA%8F/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config.json ï¼ˆæŒ–çŸ¿é…ç½®ï¼‰ã€</span><br><span class="line">sysupdate ï¼ˆXMR æŒ–çŸ¿è½¯ä»¶ï¼‰ã€</span><br><span class="line">update.sh ï¼ˆæœ¬è„šæœ¬ï¼‰ã€</span><br><span class="line">networkservice(scanneræ‰«æå¹¶å…¥ä¾µå…¶ä»–çš„ä¸»æœº)ã€</span><br><span class="line">sysguard(watchdog ç”¨äºç›‘æ§å¹¶ä¿è¯ç—…æ¯’çš„æ­£å¸¸è¿è¡Œä»¥åŠæ›´æ–°) å¹¶ä¿è¯ä»–ä»¬ä»¥ root æƒé™è¿è¡Œã€‚</span><br></pre></td></tr></table></figure><ol><li><p>æŸ¥çœ‹ç—…æ¯’çš„ PID å·</p></li><li><p>è·å–ç»å¯¹è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /proc/&#123;pid å·&#125;/exe</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤/tmpæ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶</p></li><li><p>æ£€æŸ¥ä¸‹å®šæ—¶ä»»åŠ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l æˆ–è€… cat /var/spool/cron/will</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„willä¸ºå½“å‰ç”¨æˆ·å</p><p>æŸ¥çœ‹å®šæ—¶ä»»åŠ¡çš„æ—¥å¿—</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more /var/<span class="built_in">log</span>/cron <span class="built_in">log</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤å®šæ—¶ä»»åŠ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /var/spool/cron/root æˆ–è€… crontab -r åˆ é™¤å®šæ—¶ä»»åŠ¡</span><br></pre></td></tr></table></figure></li><li><p>kill å‘½ä»¤å°†ç›¸å…³è¿›ç¨‹å¹²æ‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysupdate</span><br><span class="line">networkservice</span><br><span class="line">sysguard</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java io</title>
      <link href="/2019/07/10/java%20io/"/>
      <url>/2019/07/10/java%20io/</url>
      <content type="html"><![CDATA[<h2 id="æµ"><a href="#æµ" class="headerlink" title="æµ"></a>æµ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æµåŒ…æ‹¬å­—ç¬¦æµå’Œå­—èŠ‚æµï¼Œæµä»æ¦‚å¿µä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªè¿ç»­çš„æ•°æ®æµã€‚å½“ç¨‹åºéœ€è¦è¯»æ•°æ®çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¾“å…¥æµè¯»å–æ•°æ®ï¼Œå½“éœ€è¦å¾€å¤–å†™æ•°æ®çš„æ—¶å€™å°±éœ€è¦è¾“å‡ºæµ</span><br></pre></td></tr></table></figure><ul><li><p>å­—èŠ‚æµï¼šå­—èŠ‚æµä¸»è¦ç”¨æ¥å¤„ç†å­—èŠ‚æˆ–äºŒè¿›åˆ¶å¯¹è±¡<code>InputStreamã€OutputStreamï¼Œ</code></p><blockquote><p>åœ¨ä½¿ç”¨å­—èŠ‚æµçš„æ—¶å€™ï¼ŒInputStreamå’ŒOutputStreaméƒ½æ˜¯æŠ½è±¡ç±»ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–çš„éƒ½æ˜¯ä»–ä»¬çš„å­ç±»ï¼Œæ¯ä¸€ä¸ªå­ç±»éƒ½æœ‰è‡ªå·±çš„ä½œç”¨èŒƒå›´</p></blockquote><p><img src="https://i.imgur.com/s39Xj3r.png" alt=""></p></li><li><p>å­—ç¬¦æµï¼šå­—ç¬¦æµç”¨æ¥å¤„ç†å­—ç¬¦æ–‡æœ¬æˆ–å­—ç¬¦ä¸²<code>Readerã€Writer</code></p><blockquote><p>åœ¨ä½¿ç”¨å­—ç¬¦æµçš„æ—¶å€™ä¹Ÿæ˜¯ï¼ŒReaderå’ŒWriteréƒ½æ˜¯æŠ½è±¡ç±»ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–çš„éƒ½æ˜¯ä»–ä»¬çš„å­ç±»ï¼Œæ¯ä¸€ä¸ªå­ç±»éƒ½æœ‰è‡ªå·±çš„ä½œç”¨èŒƒå›´</p></blockquote><p><img src="https://i.imgur.com/RMD0koG.png" alt=""></p></li><li><p>å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµ</p><blockquote><p>ä½¿ç”¨<code>InputStreamReaderã€OutputStreamWriter</code>å¯ä»¥å°†è¾“å…¥å­—èŠ‚æµè½¬åŒ–ä¸ºè¾“å…¥å­—ç¬¦æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; Reader reader  =  <span class="keyword">new</span> InputStreamReader(inputStream);</span><br><span class="line">&gt; Writer writer = <span class="keyword">new</span> OutputStreamWriter(outputStream)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote></li></ul><p>è¾“å…¥å­—èŠ‚æµï¼š<strong>InputStream</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"D:/a.txt"</span>);</span><br><span class="line">    InputStream inputStream = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">    inputStream.read(bytes);</span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(bytes));</span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å…¥å­—ç¬¦æµï¼š<strong>Reader</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"D:/a.txt"</span>);</span><br><span class="line">    Reader reader = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">    <span class="keyword">char</span>[] bytes = <span class="keyword">new</span> <span class="keyword">char</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">    reader.read(bytes);</span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(bytes));</span><br><span class="line">    reader.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå­—èŠ‚æµï¼š<strong>OutputStream</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    String var = <span class="string">"hai this is a test"</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"D:/b.txt"</span>);</span><br><span class="line">    OutputStream outputStream = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">    outputStream.write(var.getBytes());</span><br><span class="line">    outputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå­—ç¬¦æµï¼š<strong>Writer</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    String var = <span class="string">"hai this is a test"</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"D:/b.txt"</span>);</span><br><span class="line">    Writer writer = <span class="keyword">new</span> FileWriter(file);</span><br><span class="line">    writer.write(var);</span><br><span class="line">    writer.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>BufferedInputStream</strong></p><blockquote><p>åœ¨ä½¿ç”¨InputStreamçš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è¯»æˆ–å†™ï¼Œè€ŒBufferedInputStreamä¸ºè¾“å…¥å­—èŠ‚æµæä¾›äº†ç¼“å†²åŒºï¼Œè¯»æ•°æ®çš„æ—¶å€™ä¼šä¸€æ¬¡è¯»å–ä¸€å—æ•°æ®æ”¾åˆ°ç¼“å†²åŒºé‡Œï¼Œå½“ç¼“å†²åŒºé‡Œçš„æ•°æ®è¢«è¯»å®Œä¹‹åï¼Œè¾“å…¥æµä¼šå†æ¬¡å¡«å……æ•°æ®ç¼“å†²åŒºï¼Œç›´åˆ°è¾“å…¥æµè¢«è¯»å®Œï¼Œæœ‰äº†ç¼“å†²åŒºå°±èƒ½å¤Ÿæé«˜å¾ˆå¤šioé€Ÿåº¦</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * inputStream è¾“å…¥æµ</span></span><br><span class="line"><span class="comment"> * 1024 å†…éƒ¨ç¼“å†²åŒºå¤§å°ä¸º1024byte</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(inputStream,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedOutputStream</strong></p><blockquote><p>BufferedOutputStreamå¯ä»¥ä¸ºè¾“å‡ºå­—èŠ‚æµæä¾›ç¼“å†²åŒºï¼Œä½œç”¨ä¸BufferedInputStreamç±»ä¼¼ï¼Œä½¿ç”¨æ–¹å¼å°†è¾“å‡ºæµåŒ…è£…åˆ°BufferedOutputStreamä¸­</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * outputStream è¾“å‡ºæµ</span></span><br><span class="line"><span class="comment"> * 1024 å†…éƒ¨ç¼“å†²åŒºå¤§å°ä¸º1024byte</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(outputStream,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedReader</strong></p><blockquote><p>ä¸ºè¾“å…¥å­—ç¬¦æµæä¾›ç¼“å†²åŒº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(reader,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedWriter</strong></p><blockquote><p>ä¸ºè¾“å‡ºå­—ç¬¦æµæä¾›ç¼“å†²åŒº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(writer,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><h2 id="ioæ¨¡å‹"><a href="#ioæ¨¡å‹" class="headerlink" title="ioæ¨¡å‹"></a>ioæ¨¡å‹</h2><h3 id="bio"><a href="#bio" class="headerlink" title="bio"></a>bio</h3><blockquote><p>åŒæ­¥é˜»å¡IOæ¨¡å‹</p><p>JDK 1.4ç‰ˆæœ¬ä»¥å‰</p></blockquote><p><img src="https://chenmingyu.top/nio/bio%E7%BA%BF%E7%A8%8B.png" alt=""></p><p>åœ¨è¿™ç§æ¨¡å¼ä¸­é€šå¸¸ç”¨ä¸€ä¸ªçº¿ç¨‹å»æ¥å—è¯·æ±‚ï¼Œç„¶åç”¨ä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†è¯·æ±‚ï¼Œç”¨è¿™ç§æ–¹å¼å¹¶å‘ç®¡ç†å¤šä¸ªSocketå®¢æˆ·ç«¯è¿æ¥</p><p><img src="https://chenmingyu.top/nio/BIO%E7%BA%BF%E7%A8%8B+%E7%BA%BF%E7%A8%8B%E6%B1%A0.png" alt=""></p><h3 id="nio"><a href="#nio" class="headerlink" title="nio"></a>nio</h3><blockquote><p>åŒæ­¥éé˜»å¡IOæ¨¡å‹</p><p>JDK 1.4ç‰ˆæœ¬ä»¥å</p></blockquote><p>æˆç†Ÿçš„æ¡†æ¶ï¼Œæ¯”å¦‚Netty</p><h3 id="aio"><a href="#aio" class="headerlink" title="aio"></a>aio</h3><blockquote><p>å¼‚æ­¥éé˜»å¡IOæ¨¡å‹</p><p>JDK1.7å‡çº§äº†Nioç±»åº“ï¼Œæˆä¸ºNio2.0ï¼Œæœ€ä¸»è¦çš„æ˜¯æä¾›äº†å¼‚æ­¥æ–‡ä»¶çš„IOæ“ä½œï¼Œä»¥åŠäº‹ä»¶é©±åŠ¨IOï¼ŒAIOçš„å¼‚æ­¥å¥—æ¥å­—é€šé“æ˜¯çœŸæ­£çš„å¼‚æ­¥éé˜»å¡IO</p></blockquote><p><img src="https://chenmingyu.top/nio/%E5%90%84IO%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94.png" alt=""></p><hr><p>å‚è€ƒï¼š</p><p><a href="https://chenmingyu.top/nio/" target="_blank" rel="noopener">ä¸€æ–‡çœ‹æ‡‚java ioç³»ç»Ÿ</a></p>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2019/06/11/kafka%20learn/"/>
      <url>/2019/06/11/kafka%20learn/</url>
      <content type="html"><![CDATA[<h2 id="portï¼ˆconfluent-referenceï¼‰"><a href="#portï¼ˆconfluent-referenceï¼‰" class="headerlink" title="portï¼ˆconfluent referenceï¼‰"></a>portï¼ˆconfluent referenceï¼‰</h2><table><thead><tr><th style="text-align:left">Component</th><th style="text-align:left">Default Port</th></tr></thead><tbody><tr><td style="text-align:left">Zookeeper</td><td style="text-align:left">2181</td></tr><tr><td style="text-align:left">Apache Kafka brokers (plain text)</td><td style="text-align:left">9092</td></tr><tr><td style="text-align:left">Schema Registry REST API</td><td style="text-align:left">8081</td></tr><tr><td style="text-align:left">REST Proxy</td><td style="text-align:left">8082</td></tr><tr><td style="text-align:left">Kafka Connect REST API</td><td style="text-align:left">8083</td></tr><tr><td style="text-align:left">Confluent Control Center</td><td style="text-align:left">9021</td></tr></tbody></table><h2 id="System-Architecture"><a href="#System-Architecture" class="headerlink" title="System Architecture"></a>System Architecture</h2><p><img src="https://i.imgur.com/gG71h6m.png" alt=""></p><ul><li><strong>kafka Producer API:</strong> Applications directly producing data (ex: clickstream, logs, IoT).</li><li><strong>Kafka Connect Source API:</strong> Applications bridging between a datastore we donâ€™t control and Kafka (ex: CDC, Postgres, MongoDB, Twitter, REST API).</li><li><strong>Kafka Streams API / KSQL:</strong> Applications wanting to consume from Kafka and produce back into Kafka, also called stream processing. Use KSQL if you think you can write your real-time job as SQL-like, use Kafka Streams API if you think youâ€™re going to need to write complex logic for your job.</li><li><strong>Kafka Consumer API:</strong> Read a stream and perform real-time actions on it (e.g. send emailâ€¦)</li><li><strong>Kafka Connect Sink API</strong>: Read a stream and store it into a target store (ex: Kafka to S3, Kafka to HDFS, Kafka to PostgreSQL, Kafka to MongoDB, etc.)</li></ul><p><img src="https://www.sohamkamani.com/basic_arch-e0b11d2ab5b62a78cb7fd26d3a9d279b.svg" alt=""></p><ol><li><strong>Zookeeper</strong> : Which is used by Kafka to maintain state between the nodes of the cluster.</li><li><strong>Kafka brokers</strong> : The â€œpipesâ€ in our pipeline, which store and emit data.</li><li><strong>Producers</strong> : That insert data into the cluster.</li><li><strong>Consumers</strong> : That read data from the cluster.</li></ol><p><img src="https://kafka.apache.org/22/images/kafka-apis.png" alt=""></p><h3 id="Creating-a-topic"><a href="#Creating-a-topic" class="headerlink" title="Creating a topic"></a>Creating a topic</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh \</span><br><span class="line">--create \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--zookeeper localhost:2181 \</span><br><span class="line">--partitions 3 \</span><br><span class="line">--replication-factor 2</span><br></pre></td></tr></table></figure><ul><li>The <code>paritions</code> options lets you decide how many brokers you want your data to be split between. Since we set up 3 brokers, we can set this option to 3.</li><li>The <code>replication-factor</code> describes how many copies of you data you want (in case one of the brokers goes down, you still have your data on the others).</li></ul><h3 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh \</span><br><span class="line">--broker-list localhost:9093,localhost:9094,localhost:9095 \</span><br><span class="line">--topic my-kafka-topic</span><br></pre></td></tr></table></figure><h3 id="Consumers"><a href="#Consumers" class="headerlink" title="Consumers"></a>Consumers</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh \</span><br><span class="line">--bootstrap-server localhost:9093 \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--from-beginning</span><br></pre></td></tr></table></figure><ul><li>The <code>bootstrap-server</code> can be any one of the brokers in the cluster.</li><li>The <code>from-beginning</code> option tells the cluster that you want all the messages that it currently has with it, even messages that we put into it previously.</li></ul><p>Try starting another consumer in a different terminal window:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh \</span><br><span class="line">--bootstrap-server localhost:9093 \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--from-beginning \</span><br><span class="line">--group group2</span><br></pre></td></tr></table></figure><h2 id="Kafka-as-a-Messaging-System"><a href="#Kafka-as-a-Messaging-System" class="headerlink" title="Kafka as a Messaging System"></a>Kafka as a Messaging System</h2><ul><li><p>As with a queue the consumer group allows you to divide up processing over a collection of processes (the members of the consumer group). As with publish-subscribe, Kafka allows you to broadcast messages to multiple consumer groups.</p><p><img src="https://kafka.apache.org/22/images/consumer-groups.png" alt=""></p></li><li><p>Kafka does it better. By having a notion of parallelismâ€”the partitionâ€”within the topics, Kafka is able to provide both ordering guarantees and load balancing over a pool of consumer processes. This is achieved by assigning the partitions in the topic to the consumers in the consumer group so that each partition is consumed by exactly one consumer in the group. By doing this we ensure that the consumer is the only reader of that partition and consumes the data in order. Since there are many partitions this still balances the load over many consumer instances. Note however that there cannot be more consumer instances in a consumer group than partitions.</p></li><li><p>Each record consists of a key, a value, and a timestamp.</p></li></ul><h2 id="Kafka-as-a-Storage-System"><a href="#Kafka-as-a-Storage-System" class="headerlink" title="Kafka as a Storage System"></a>Kafka as a Storage System</h2><h2 id="Kafka-as-Stream-Processing"><a href="#Kafka-as-Stream-Processing" class="headerlink" title="Kafka as Stream Processing"></a>Kafka as Stream Processing</h2><h2 id="source-code"><a href="#source-code" class="headerlink" title="source code"></a>source code</h2><h3 id="æºç æ–‡ä»¶ç»“æ„"><a href="#æºç æ–‡ä»¶ç»“æ„" class="headerlink" title="æºç æ–‡ä»¶ç»“æ„"></a>æºç æ–‡ä»¶ç»“æ„</h3><table><thead><tr><th>ç›®å½•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>bin</td><td>å­˜æ”¾å¯ç›´æ¥åœ¨Linuxæˆ–Windowsä¸Šè¿è¡Œçš„.shæ–‡ä»¶å’Œ.batæ–‡ä»¶ï¼ŒåŒ…å«Kafkaå¸¸ç”¨æ“ä½œä»¥åŠZooKeeperä¾¿æ·è„šæœ¬</td></tr><tr><td>checkstyle</td><td>å­˜æ”¾ä»£ç è§„èŒƒæ£€æŸ¥æ–‡æ¡£</td></tr><tr><td>clients</td><td>å®¢æˆ·ç«¯çš„å®ç°</td></tr><tr><td>config</td><td>å­˜æ”¾é…ç½®æ–‡ä»¶</td></tr><tr><td>connetct</td><td>Kafka Connectå·¥å…·çš„å®ç°</td></tr><tr><td>core</td><td>æ ¸å¿ƒæ¨¡å—</td></tr><tr><td>docs</td><td>å®˜æ–¹æ–‡æ¡£</td></tr><tr><td>examples</td><td>Kafkaç”Ÿäº§è€…æ¶ˆè´¹è€…ç®€å•Demo</td></tr><tr><td>jmh-benchmarks</td><td>åŸºå‡†æµ‹è¯•æ¨¡å—</td></tr><tr><td>log4j-appender</td><td>æ—¥å¿—æ¨¡å—</td></tr><tr><td>streams</td><td>Kafka Streamså®¢æˆ·ç«¯åº“</td></tr><tr><td>tools</td><td>å·¥å…·ç±»</td></tr></tbody></table><h3 id="æ ¸å¿ƒæ¨¡å—ç»“æ„"><a href="#æ ¸å¿ƒæ¨¡å—ç»“æ„" class="headerlink" title="æ ¸å¿ƒæ¨¡å—ç»“æ„"></a>æ ¸å¿ƒæ¨¡å—ç»“æ„</h3><table><thead><tr><th>ç›®å½•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>admin</td><td>ç®¡ç†æ¨¡å—ï¼Œæ“ä½œå’Œç®¡ç†topicï¼Œ broker, consumer groupï¼Œ recordsç­‰</td></tr><tr><td>api</td><td>å°è£…è°ƒç”¨</td></tr><tr><td>client</td><td>Producerç”Ÿäº§çš„å…ƒæ•°æ®ä¿¡æ¯çš„ä¼ é€’</td></tr><tr><td>cluster</td><td>å­˜æ´»çš„Brokeré›†ç¾¤ã€åˆ†åŒºã€å‰¯æœ¬ä»¥åŠä»–ä»¬çš„åº•å±‚å±æ€§å’Œç›¸äº’å…³ç³»</td></tr><tr><td>common</td><td>å¼‚å¸¸ç±»ã€æšä¸¾ç±»ã€æ ¼å¼åŒ–ç±»ã€é…ç½®ç±»ç­‰</td></tr><tr><td>consumer</td><td>æ—§ç‰ˆæœ¬çš„åºŸå¼ƒæ¶ˆè´¹è€…ç±»</td></tr><tr><td>controller</td><td>Kafkaé›†ç¾¤æ§åˆ¶ä¸­å¿ƒçš„é€‰ä¸¾ï¼Œåˆ†åŒºçŠ¶æ€ç®¡ç†ï¼Œåˆ†åŒºå‰¯æœ¬çŠ¶æ€ç®¡ç†ï¼Œç›‘å¬ZooKeeperæ•°æ®å˜åŒ–ç­‰</td></tr><tr><td>coordinator</td><td>GroupCoordinatorå¤„ç†ä¸€èˆ¬ç»„æˆå‘˜èµ„æ ¼å’Œåç§»é‡ã€‚transactionç®¡ç†äº‹åŠ¡</td></tr><tr><td>javaapi</td><td>ç»™javaè°ƒç”¨çš„ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ã€æ¶ˆæ¯é›†api</td></tr><tr><td>log</td><td>ç®¡ç†logï¼Œå®ƒæ˜¯æ¶ˆæ¯å­˜å‚¨çš„å½¢å¼ï¼Œå¯å¯¹åº”åˆ°ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹</td></tr><tr><td>message</td><td>ç”±æ¶ˆæ¯å°è£…è€Œæˆçš„ä¸€ä¸ªå‹ç¼©æ¶ˆæ¯é›†</td></tr><tr><td>metrics</td><td>Kafkaç›‘æ§æ¨¡å—</td></tr><tr><td>network</td><td>ç½‘ç»œç®¡ç†æ¨¡å—ï¼Œå¯¹å®¢æˆ·ç«¯è¿æ¥çš„å¤„ç†</td></tr><tr><td>producer</td><td>æ—§ç‰ˆæœ¬çš„åºŸå¼ƒç”Ÿäº§è€…ç±»</td></tr><tr><td>security</td><td>æƒé™ç®¡ç†</td></tr><tr><td>serializer</td><td>æ¶ˆæ¯åºåˆ—åŒ–ä¸ååºåˆ—åŒ–å¤„ç†</td></tr><tr><td>server</td><td>æœåŠ¡å™¨ç«¯çš„å®ç°</td></tr><tr><td>tools</td><td>å„ç§æ§åˆ¶å°å·¥å…·çš„å®ç°</td></tr><tr><td>utils</td><td>å·¥å…·ç±»</td></tr><tr><td>zk</td><td>æä¾›ä¸ZooKeeperäº¤äº’çš„ç®¡ç†æ–¹æ³•å’Œåœ¨ç®¡é“ä¹‹ä¸Šçš„æ›´é«˜çº§åˆ«çš„Kafkaç‰¹å®šæ“ä½œ</td></tr><tr><td>zookeeper</td><td>ä¸€ä¸ªä¿ƒè¿›ç®¡é“ä¼ è¾“è¯·æ±‚çš„ZooKeeperå®¢æˆ·ç«¯</td></tr></tbody></table>]]></content>
      
      <categories>
          
          <category> kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javarevisited</title>
      <link href="/2019/05/24/hadoop%20learn/"/>
      <url>/2019/05/24/hadoop%20learn/</url>
      <content type="html"><![CDATA[<p><img src="./img/Hadoop-Multi-node-Cluster.png" alt=""></p><p><img src="./img/hdfsarchitecture.gif" alt=""></p><h3 id="NameNode"><a href="#NameNode" class="headerlink" title="NameNode"></a>NameNode</h3><ul><li>The <strong>NameNode</strong> executes file system namespace operations like opening, closing, and renaming files and directories.It also determines the mapping of blocks to DataNodes.</li></ul><h3 id="DataNodes"><a href="#DataNodes" class="headerlink" title="DataNodes"></a>DataNodes</h3><ul><li>The <strong>DataNodes</strong> are responsible for serving read and write requests from the file systemâ€™s clients. The DataNodes also perform block creation, deletion, and replication upon instruction from the NameNode.</li><li>The DataNode stores HDFS data in files in its local file system.The DataNode has no knowledge about HDFS files. It stores each block of HDFS data in a separate file in its local file system.</li></ul><h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><ul><li>a file is split into one or more blocks and these blocks are stored in a set of DataNodes. </li><li><p>all blocks in a file except the last block are the same size.</p></li><li><p>Files in HDFS are write-once and have strictly one writer at any time.</p></li></ul><h3 id="The-Persistence-of-File-System-Metadata"><a href="#The-Persistence-of-File-System-Metadata" class="headerlink" title="The Persistence of File System Metadata"></a>The Persistence of File System Metadata</h3><ul><li>The NameNode uses a transaction log called the <strong>EditLog</strong> to persistently record every change that occurs to file system metadata.</li><li>The entire file system namespace, including the mapping of blocks to files and file system properties, is stored in a file called the <strong>FsImage</strong>. The FsImage is stored as a file in the NameNodeâ€™s local file system too.</li></ul><hr><p><strong>Blockreport</strong>: DataNode scans through its local file system, generates a list of all HDFS data blocks that correspond to each of these local files and sends this report to the NameNode</p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p>2.7.3æºç </p><ul><li>ç¼–è¯‘é—®é¢˜</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é—®é¢˜ï¼šFailed to parse plugin descriptor for org.apache.hadoop:hadoop-maven-plugins</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼šcdåˆ°hadoop-maven-pluginsï¼Œæ‰§è¡Œmvn clean ç„¶å install ä¸€ä¸‹ï¼Œå†æ‰§è¡Œç¼–è¯‘é€šè¿‡</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>rabbitmq learn</title>
      <link href="/2019/05/14/rabbitmq/"/>
      <url>/2019/05/14/rabbitmq/</url>
      <content type="html"><![CDATA[<ul><li><p>æŸ¥è¯¢å·²æœ‰queue</p><p><code>sudo rabbitmqctl list_queues</code></p></li><li><p>æŸ¥è¯¢å·²æœ‰exchanges</p><p><code>sudo rabbitmqctl list_exchanges</code></p></li></ul><h2 id="Publish-Subscribe"><a href="#Publish-Subscribe" class="headerlink" title="Publish/Subscribe"></a>Publish/Subscribe</h2><ul><li><p>Exchanges</p><p>There are a few exchange types available: <strong>direct</strong>, <strong>topic</strong>, <strong>headers</strong> and <strong>fanout</strong>.</p></li><li><p>Bindings</p><p>A binding is a relationship between an exchange and a queue</p></li></ul>]]></content>
      
      <categories>
          
          <category> rabbitmq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>http learn</title>
      <link href="/2019/05/14/http%20learn/"/>
      <url>/2019/05/14/http%20learn/</url>
      <content type="html"><![CDATA[<h2 id="http-1-0-http-1-1"><a href="#http-1-0-http-1-1" class="headerlink" title="http 1.0 http 1.1"></a>http 1.0 http 1.1</h2><ul><li><p>HTTP1.0æœ€æ—©åœ¨ç½‘é¡µä¸­ä½¿ç”¨æ˜¯1996å¹´ï¼Œé‚£ä¸ªæ—¶å€™åªæ˜¯ä½¿ç”¨ä¸€äº›è¾ƒä¸ºç®€å•çš„ç½‘é¡µå’Œç½‘ç»œçš„è¯·æ±‚ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¿æ¥ï¼Œä¸Šä¸€æ¬¡å’Œä¸‹ä¸€æ¬¡è¯·æ±‚å®Œå…¨åˆ†ç¦»ã€‚è¿™ç§åšæ³•ï¼Œå³ä½¿æ¯æ¬¡çš„è¯·æ±‚é‡éƒ½å¾ˆå°ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ¯æ¬¡å»ºç«‹TCPè¿æ¥å’Œå…³é—­TCPè¿æ¥éƒ½æ˜¯ç›¸å¯¹æ¯”è¾ƒè´¹æ—¶çš„è¿‡ç¨‹ï¼Œä¸¥é‡å½±å“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ€§èƒ½ã€‚</p></li><li><p>åŸºäºä»¥ä¸Šçš„é—®é¢˜ï¼ŒHTTP1.1åœ¨1999å¹´å¹¿æ³›åº”ç”¨äºç°åœ¨çš„å„å¤§æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ä¸­ï¼ŒåŒæ—¶HTTP1.1ä¹Ÿæ˜¯å½“å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„HTTPåè®®ï¼ˆ2015å¹´è¯ç”Ÿäº†HTTP2ï¼Œä½†æ˜¯è¿˜æœªå¤§è§„æ¨¡åº”ç”¨ï¼‰ï¼Œè¿™é‡Œä¸è¯¦ç»†å¯¹æ¯”HTTP1.1é’ˆå¯¹HTTP1.0æ”¹è¿›äº†ä»€ä¹ˆï¼Œåªæ˜¯åœ¨è¿æ¥è¿™å—ï¼ŒHTTP1.1æ”¯æŒåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å»¶è¿Ÿï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†HTTP1.0æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿æ¥çš„ç¼ºç‚¹ï¼Œè¿™å°±æ˜¯é•¿è¿æ¥ï¼ŒHTTP1.1é»˜è®¤ä½¿ç”¨é•¿è¿æ¥ã€‚</p></li><li><p>é‚£ä¹ˆï¼Œé•¿è¿æ¥æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸‹ï¼Œé•¿çŸ­è¿æ¥æ˜¯é€šä¿¡å±‚ï¼ˆTCPï¼‰çš„æ¦‚å¿µï¼ŒHTTPæ˜¯åº”ç”¨å±‚åè®®ï¼Œå®ƒåªèƒ½è¯´å‘Šè¯‰é€šä¿¡å±‚æˆ‘æ‰“ç®—ä¸€æ®µæ—¶é—´å†…å¤ç”¨TCPé€šé“è€Œæ²¡æœ‰è‡ªå·±å»å»ºç«‹ã€é‡Šæ”¾TCPé€šé“çš„èƒ½åŠ›ã€‚</p></li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQwdKAeT5rjMFfDXeITCDnbwnNXWrFDaIIhBibAk4N83H5dKXAkMNleqewC53Y8WQ6cOhRjA7k4SuMw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p><ul><li>httpçš„keep-aliveå’Œtcpçš„keep-aliveçš„åŒºåˆ«<ul><li>httpçš„keep-aliveæ˜¯ä¸ºäº†å¤ç”¨å·²æœ‰è¿æ¥</li><li>tcpçš„keep-aliveæ˜¯ä¸ºäº†ä¿æ´»ï¼Œå³ä¿è¯å¯¹ç«¯è¿˜å­˜æ´»ï¼Œä¸ç„¶å¯¹ç«¯å·²ç»ä¸åœ¨äº†æˆ‘è¿™è¾¹è¿˜å ç€å’Œå¯¹ç«¯çš„è¿™ä¸ªè¿æ¥ï¼Œæµªè´¹æœåŠ¡å™¨èµ„æºï¼Œåšæ³•æ˜¯éš”ä¸€æ®µæ—¶é—´å‘é€ä¸€ä¸ªå¿ƒè·³åŒ…åˆ°å¯¹ç«¯æœåŠ¡å™¨ï¼Œä¸€æ—¦é•¿æ—¶é—´æ²¡æœ‰æ¥æ”¶åˆ°åº”ç­”ï¼Œå°±ä¸»åŠ¨å…³é—­è¿æ¥</li></ul></li></ul><h2 id="WebSockets"><a href="#WebSockets" class="headerlink" title="WebSockets"></a>WebSockets</h2><p>WebSockets provide a persistent connection between a client and server that both parties can use to start sending data at any time.**</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Create a new WebSocket.</span><br><span class="line">var socket = new WebSocket(&apos;ws://echo.websocket.org&apos;);</span><br></pre></td></tr></table></figure><ul><li><p>Once the connection has been established the <code>open</code> event will be fired on your WebSocket instance.</p></li><li><p>è¯·æ±‚</p><p><code>ws://localhost:9095/webSocket/d72b3660-29a8-4276-9eb1-3373e82fdd92</code></p></li><li><p>åå°è¯·æ±‚çš„ç»“æœä¼ å…¥websocketæ˜¯é€šè¿‡sessionå»ºç«‹å…³è”çš„</p></li></ul>]]></content>
      
      <categories>
          
          <category> http </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>bigdata snippet</title>
      <link href="/2019/05/05/bigdata/"/>
      <url>/2019/05/05/bigdata/</url>
      <content type="html"><![CDATA[<h2 id="BIG-DATA-What-is-Types-Characteristics-amp-Example"><a href="#BIG-DATA-What-is-Types-Characteristics-amp-Example" class="headerlink" title="BIG DATA: What is, Types, Characteristics &amp; Example"></a>BIG DATA: What is, Types, Characteristics &amp; Example</h2><ul><li>Big Data is defined as data that is huge in size. Bigdata is a term used to describe a collection of data that is huge in size and yet growing exponentially with time.</li><li>Examples of Big Data generation includes stock exchanges, social media sites, jet engines, etc.</li><li>Big Data could be 1) Structured, 2) Unstructured, 3) Semi-structured</li><li>Volume, Variety, Velocity, and Variability are few Characteristics of Bigdata</li><li>Improved customer service, better operational efficiency, Better Decision Making are few advantages of Bigdata</li></ul><h2 id="Hadoop-EcoSystem-and-Components"><a href="#Hadoop-EcoSystem-and-Components" class="headerlink" title="Hadoop EcoSystem and Components"></a>Hadoop EcoSystem and Components</h2><p><img src="./img/061114_0803_LearnHadoop4.png" alt=""></p><h3 id="Hadoop-Architecture"><a href="#Hadoop-Architecture" class="headerlink" title="Hadoop Architecture"></a>Hadoop Architecture</h3><p><img src="./img/hadoop-architecture.png" alt=""></p><h4 id="HDFS-Architecture"><a href="#HDFS-Architecture" class="headerlink" title="HDFS Architecture"></a>HDFS Architecture</h4><p>HDFS cluster primarily consists of a <strong>NameNode</strong> that manages the file system <strong>Metadata</strong> and a <strong>DataNodes</strong> that stores the <strong>actual data</strong>.</p><ul><li><p>Read Operation In HDFS</p><p><img src="./img/061114_0923_LearnHDFSAB1.png" alt=""></p></li><li><p>Write Operation In HDFS</p><p><img src="./img/061114_0923_LearnHDFSAB2.png" alt=""></p></li></ul><h4 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h4><p>The whole process goes through four phases of execution namely, splitting, mapping, shuffling, and reducing.</p><p><img src="./img/061114_0930_Introductio1.png" alt=""></p><ol><li><strong>Jobtracker</strong>: Acts like a <strong>master</strong> (responsible for complete execution of submitted job)</li><li><strong>Multiple Task Trackers</strong>: Acts like <strong>slaves,</strong> each of them performing the job</li></ol><p><img src="./img/061114_0930_Introductio2.png" alt=""></p>]]></content>
      
      <categories>
          
          <category> bigdata </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vmware snippet</title>
      <link href="/2019/04/20/vmware/"/>
      <url>/2019/04/20/vmware/</url>
      <content type="html"><![CDATA[<h3 id="ç”¨æˆ·"><a href="#ç”¨æˆ·" class="headerlink" title="ç”¨æˆ·"></a>ç”¨æˆ·</h3><ul><li><p>æ–°å¢ç”¨æˆ·</p><p><code>adduser username</code></p><p><code>passwd username</code></p><p><code>usermod -aG wheel username</code></p><p><code>su - username</code></p></li></ul><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><ul><li><p>å®‰è£…å®Œæ¯•ä¹‹åï¼Œéœ€è¦è®¾ç½®IPåˆ†é…</p><ol><li><p><code>cd /etc/sysconfig/network-scripts/</code></p></li><li><p>å†è¿›å…¥ç¼–è¾‘<code>ifcfg-e**</code> æ–‡ä»¶ æ‰§è¡Œå‘½ä»¤<br><code>vi ifcfg-e**</code></p></li><li>ä¿®æ”¹ONBOOTé¡¹</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š </span><br><span class="line">DEVICE=eth0 #è®¾å¤‡åç§°ï¼Œå¯æ ¹æ®ifcofnigå‘½ä»¤æŸ¥çœ‹åˆ°ã€‚ </span><br><span class="line">BOOTPROTO=dhcp #è¿æ¥æ–¹å¼ï¼Œdhcpä¼šè‡ªåŠ¨åˆ†é…åœ°å€ï¼Œæ­¤æ—¶ä¸éœ€è¦åœ¨ä¸‹é¢è®¾ç½®ipå’Œç½‘å…³ </span><br><span class="line">ONBOOT=yes #yesè¡¨ç¤ºå¯åŠ¨å°±æ‰§è¡Œè¯¥é…ç½®ï¼Œéœ€è¦æ”¹ä¸ºyes</span><br></pre></td></tr></table></figure><ol start="4"><li><p>ä¿®æ”¹å®Œåéœ€è¦é‡å¯ç½‘ç»œè®¾ç½®ï¼Œæ‰§è¡Œ</p><p><code>service network restart</code></p></li></ol></li><li><p>è®¾ç½®é™æ€IP</p><ul><li><p><a href="https://blog.csdn.net/clevercode/article/details/50574695" target="_blank" rel="noopener">è™šæ‹Ÿæœºè®¾ç½®</a></p></li><li><p>å®¿ä¸»æœºå™¨è®¾ç½®</p><p>éœ€è¦è®¾ç½®vmnet8çš„ipä¸ºåŒä¸€ç½‘æ®µçš„é…ç½®</p></li></ul></li></ul><h3 id="jdk"><a href="#jdk" class="headerlink" title="jdk"></a>jdk</h3><ul><li><p>å®‰è£…jdk</p><p><code>sudo yum install java-1.8.0-openjdk-devel</code></p><ul><li>find path</li></ul><p><code>update-alternatives --config java</code></p><ul><li>config .bashrc</li></ul><p><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64/jre</code></p></li></ul><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ul><li><p>æˆæƒæ‰€æœ‰æœºå™¨å¯ä»¥ä»å¤–ç•Œè®¿é—®mysql</p><p><code>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;will&#39;;</code></p><p><code>FLUSH PRIVILEGES;</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> vmware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vscode snippet</title>
      <link href="/2019/04/12/vscode%20snippet/"/>
      <url>/2019/04/12/vscode%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="Skill"><a href="#Skill" class="headerlink" title="Skill"></a>Skill</h3><ul><li><p>open tab in new window</p><ul><li>Press Ctrl + k</li><li>Release the Ctrl and k keys</li><li>press O (the letter O, not Zero).</li></ul></li><li><p>save all</p><ul><li>Press Ctrl + k</li><li>Release the Ctrl and k keys</li><li>Press s</li></ul></li><li><p>copy line</p><p>Shift+Alt+Down and Shift+Alt+Up</p></li></ul><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><ul><li><p>fileheader</p><p><code>ctrl+alt+i</code> can insert comments in the head.</p></li></ul>]]></content>
      
      <categories>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dva learn</title>
      <link href="/2019/04/11/dva%20learn/"/>
      <url>/2019/04/11/dva%20learn/</url>
      <content type="html"><![CDATA[<p>dva = React-Router + Redux + Redux-saga</p><ul><li>è·¯ç”±ï¼š <a href="https://github.com/ReactTraining/react-router/tree/v2.8.1" target="_blank" rel="noopener">React-Router</a></li><li>æ¶æ„ï¼š <a href="https://github.com/reactjs/redux" target="_blank" rel="noopener">Redux</a></li><li>å¼‚æ­¥æ“ä½œï¼š <a href="https://github.com/yelouafi/redux-saga" target="_blank" rel="noopener">Redux-saga</a></li></ul><p><img src="./img/PPrerEAKbIoDZYr.png" alt=""></p><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>tate è¡¨ç¤º Model çš„çŠ¶æ€æ•°æ®</p><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>Action æ˜¯ä¸€ä¸ªæ™®é€š javascript å¯¹è±¡ï¼Œå®ƒæ˜¯æ”¹å˜ State çš„å”¯ä¸€é€”å¾„ã€‚</p><ul><li>action å¿…é¡»å¸¦æœ‰ <code>type</code> å±æ€§æŒ‡æ˜å…·ä½“çš„è¡Œä¸ºï¼Œå…¶å®ƒå­—æ®µå¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚æœè¦å‘èµ·ä¸€ä¸ª action éœ€è¦ä½¿ç”¨ <code>dispatch</code> å‡½æ•°ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ <code>dispatch</code> æ˜¯åœ¨ç»„ä»¶ connect Modelsä»¥åï¼Œé€šè¿‡ props ä¼ å…¥çš„ã€‚</li></ul><h3 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h3><p>dispatching function æ˜¯ä¸€ä¸ªç”¨äºè§¦å‘ action çš„å‡½æ•°</p><ul><li><p>action æ˜¯æ”¹å˜ State çš„å”¯ä¸€é€”å¾„ï¼Œä½†æ˜¯actionåªæè¿°äº†ä¸€ä¸ªè¡Œä¸ºï¼Œè€Œ dipatch å¯ä»¥çœ‹ä½œæ˜¯è§¦å‘è¿™ä¸ªè¡Œä¸ºçš„æ–¹å¼ï¼Œè€Œ Reducer åˆ™æ˜¯æè¿°å¦‚ä½•æ”¹å˜æ•°æ®çš„ã€‚</p></li><li><p>connect Model çš„ç»„ä»¶é€šè¿‡ props å¯ä»¥è®¿é—®åˆ° dispatchï¼Œå¯ä»¥è°ƒç”¨ Model ä¸­çš„ Reducer æˆ–è€… Effects.</p></li></ul><h3 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h3><p>Reducerå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¹‹å‰å·²ç»ç´¯ç§¯è¿ç®—çš„ç»“æœå’Œå½“å‰è¦è¢«ç´¯ç§¯çš„å€¼ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ç´¯ç§¯ç»“æœã€‚è¯¥å‡½æ•°æŠŠä¸€ä¸ªé›†åˆå½’å¹¶æˆä¸€ä¸ªå•å€¼ã€‚</p><ul><li>åœ¨ dva ä¸­ï¼Œreducers èšåˆç§¯ç´¯çš„ç»“æœæ˜¯å½“å‰ model çš„ state å¯¹è±¡ã€‚é€šè¿‡ actions ä¸­ä¼ å…¥çš„å€¼ï¼Œä¸å½“å‰ reducers ä¸­çš„å€¼è¿›è¡Œè¿ç®—è·å¾—æ–°çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯æ–°çš„ stateï¼‰ã€‚</li></ul><h3 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h3><p>Effect è¢«ç§°ä¸ºå‰¯ä½œç”¨ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¼‚æ­¥æ“ä½œã€‚</p><ul><li><p>å®ƒæ¥è‡ªäºå‡½æ•°ç¼–ç¨‹çš„æ¦‚å¿µï¼Œä¹‹æ‰€ä»¥å«å‰¯ä½œç”¨æ˜¯å› ä¸ºå®ƒä½¿å¾—æˆ‘ä»¬çš„å‡½æ•°å˜å¾—ä¸çº¯ï¼ŒåŒæ ·çš„è¾“å…¥ä¸ä¸€å®šè·å¾—åŒæ ·çš„è¾“å‡ºã€‚</p></li><li><p>dva ä¸ºäº†æ§åˆ¶å‰¯ä½œç”¨çš„æ“ä½œï¼Œå°†å¼‚æ­¥è½¬æˆåŒæ­¥å†™æ³•ï¼Œä»è€Œå°†effectsè½¬ä¸ºçº¯å‡½æ•°</p></li></ul><h3 id="Subscription"><a href="#Subscription" class="headerlink" title="Subscription"></a>Subscription</h3><p>Subscriptions æ˜¯ä¸€ç§ä» <strong>æº</strong> è·å–æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒæ¥è‡ªäº elmã€‚</p><ul><li>Subscription è¯­ä¹‰æ˜¯è®¢é˜…ï¼Œç”¨äºè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®æ¡ä»¶ dispatch éœ€è¦çš„ actionã€‚</li></ul><h3 id="æ•°æ®æµå›¾"><a href="#æ•°æ®æµå›¾" class="headerlink" title="æ•°æ®æµå›¾"></a>æ•°æ®æµå›¾</h3><p><img src="./img/hUFIivoOFjVmwNXjjfPE.png" alt=""></p><ul><li><p>State æ˜¯å‚¨å­˜æ•°æ®çš„åœ°æ–¹ï¼Œæ”¶åˆ° Action ä»¥åï¼Œä¼šæ›´æ–°æ•°æ®ã€‚</p></li><li><p>View å°±æ˜¯ React ç»„ä»¶æ„æˆçš„ UI å±‚ï¼Œä» State å–æ•°æ®åï¼Œæ¸²æŸ“æˆ HTML ä»£ç ã€‚åªè¦ State æœ‰å˜åŒ–ï¼ŒView å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p></li><li><p>Action æ˜¯ç”¨æ¥æè¿° UI å±‚äº‹ä»¶çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;</span><br><span class="line">  type: <span class="string">'click-submit-button'</span>,</span><br><span class="line">  payload: <span class="keyword">this</span>.form.data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>connect æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° Viewã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'dva'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">todos</span>: state.todos &#125;;</span><br><span class="line">&#125;</span><br><span class="line">connect(mapStateToProps)(App);</span><br></pre></td></tr></table></figure><p>connect æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šå¸¸ç§°ä¸ºå®¹å™¨ç»„ä»¶ã€‚å› ä¸ºå®ƒæ˜¯åŸå§‹ UI ç»„ä»¶çš„å®¹å™¨ï¼Œå³åœ¨å¤–é¢åŒ…äº†ä¸€å±‚ Stateã€‚</p></li><li><p>dispatch æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ï¼Œç”¨æ¥å°† Action å‘é€ç»™ Stateã€‚</p><p><strong>è¢« connect çš„ Component ä¼šè‡ªåŠ¨åœ¨ props ä¸­æ‹¥æœ‰ dispatch æ–¹æ³•ã€‚</strong></p></li></ul><h3 id="æ•°æ®æµå›¾äºŒ"><a href="#æ•°æ®æµå›¾äºŒ" class="headerlink" title="æ•°æ®æµå›¾äºŒ"></a>æ•°æ®æµå›¾äºŒ</h3><p><img src="./img/pHTYrKJxQHPyJGAYOzMu.png" alt=""></p><h3 id="Model-å¯¹è±¡çš„å±æ€§"><a href="#Model-å¯¹è±¡çš„å±æ€§" class="headerlink" title="Model å¯¹è±¡çš„å±æ€§"></a>Model å¯¹è±¡çš„å±æ€§</h3><blockquote><p>æ¯ä¸ªmodelï¼Œå®é™…ä¸Šéƒ½æ˜¯æ™®é€šçš„JavaScriptå¯¹è±¡</p></blockquote><ul><li>namespace: å½“å‰ Model çš„åç§°ã€‚æ•´ä¸ªåº”ç”¨çš„ Stateï¼Œç”±å¤šä¸ªå°çš„ Model çš„ State ä»¥ namespace ä¸º key åˆæˆ</li><li>state: è¯¥ Model å½“å‰çš„çŠ¶æ€ã€‚æ•°æ®ä¿å­˜åœ¨è¿™é‡Œï¼Œç›´æ¥å†³å®šäº†è§†å›¾å±‚çš„è¾“å‡º</li><li>reducers: Action å¤„ç†å™¨ï¼Œå¤„ç†åŒæ­¥åŠ¨ä½œï¼Œç”¨æ¥ç®—å‡ºæœ€æ–°çš„ State</li><li><p>effectsï¼šAction å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ã€‚dva æä¾›å¤šä¸ª effect å‡½æ•°å†…éƒ¨çš„å¤„ç†å‡½æ•°ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ <code>call</code> å’Œ <code>put</code>ã€‚</p><ul><li>callï¼šæ‰§è¡Œå¼‚æ­¥å‡½æ•°</li><li>putï¼šå‘å‡ºä¸€ä¸ª Actionï¼Œç±»ä¼¼äº dispatch</li></ul></li><li><p>subscriptions</p></li></ul>]]></content>
      
      <categories>
          
          <category> dva </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redux learn</title>
      <link href="/2019/04/07/redux%20learn/"/>
      <url>/2019/04/07/redux%20learn/</url>
      <content type="html"><![CDATA[<h3 id="Passing-Data-Between-Adjacent-Components"><a href="#Passing-Data-Between-Adjacent-Components" class="headerlink" title="Passing Data Between Adjacent Components"></a>Passing Data Between Adjacent Components</h3><p>If you have components that are siblings and need to share data, the way to do that in React is to pull that data up into a parent component and pass it down with props.</p><p>That can be cumbersome though. Redux can help by giving you one global â€œparentâ€ where you can store the data, and then you can <code>connect</code> the sibling components to the data with React-Redux.</p><h3 id="redux-vs-react-redux"><a href="#redux-vs-react-redux" class="headerlink" title="redux vs react-redux"></a>redux vs react-redux</h3><p><code>redux</code> knows nothing about React <em>at all</em>. (The <code>redux</code> library can be used outside of a React app too. Itâ€™ll work with Vue, Angular, and even backend Node/Express apps.)</p><p><code>react-redux</code> lets you connect pieces of the state to React components.</p><h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p>in charge for orchestrating all the interactions</p><p>the <strong>state</strong> is the data, and the <strong>store</strong> is where itâ€™s kept.</p><h3 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h3><p>the producer to make the state</p><blockquote><p>(state, action) =&gt; newState</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> letters = [<span class="string">'r'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'u'</span>, <span class="string">'x'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// `reduce` takes 2 arguments:</span></span><br><span class="line"><span class="comment">//   - a function to do the reducing (you might say, a "reducer")</span></span><br><span class="line"><span class="comment">//   - an initial value for accumulatedResult</span></span><br><span class="line"><span class="keyword">var</span> word = letters.reduce(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">accumulatedResult, arrayItem</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accumulatedResult + arrayItem;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="string">''</span>); <span class="comment">// &lt;-- notice this empty string argument: it's the initial value</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(word) <span class="comment">// =&gt; "redux"</span></span><br></pre></td></tr></table></figure><p><strong>Important Rule of Reducers </strong>:</p><ul><li>Never return undefined from a reducer.</li><li>Reducers must be pure functions.(This means that they canâ€™t modify their arguments, and they canâ€™t have side effects.)</li></ul><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><p>plain JavaScript objects with a property named type. </p><blockquote><p>An action object describes a change you want to make (like â€œplease increment the counterâ€) or an event that happenend (like â€œthe request to the server failed with this errorâ€).</p><p>action donâ€™t really <em>do</em> anything. Not on their own, anyway.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  type: <span class="string">"add an item"</span>,</span><br><span class="line">  item: <span class="string">"Apple"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  type: <span class="number">7008</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  type: <span class="string">"INCREMENT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In order to make an action DO something, you need to <strong>dispatch</strong> it.</p><hr><h3 id="redux-tips"><a href="#redux-tips" class="headerlink" title="redux tips"></a>redux tips</h3><h4 id="Redux-avoids-these-problems-with-some-simple-rules"><a href="#Redux-avoids-these-problems-with-some-simple-rules" class="headerlink" title="Redux avoids these problems with some simple rules."></a>Redux avoids these problems with some simple rules.</h4><ul><li>State is read-only, and actions are the only way to modify it.</li><li>Changes happen one way, and one way only: dispatch(action) -&gt; reducer -&gt; new state.</li><li>The reducer function must be â€œpureâ€ â€“ it cannot modify its arguments, and it canâ€™t have side effects.</li></ul><h4 id="The-most-important-methods"><a href="#The-most-important-methods" class="headerlink" title="The most important methods."></a>The most important methods.</h4><ul><li>getState for <strong>accessing the current state</strong> of the application</li><li>dispatch for <strong>dispatching an action</strong></li><li>subscribe for <strong>listening on state changes</strong></li></ul><h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><h4 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h4><p>By wrapping the entire app with the <code>Provider</code> component, <em>every component</em> in the app tree will be able to access the Redux store if it wants to.</p><h4 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h4><p>all of components can access the Redux store, but not automatically , Weâ€™ll need to use the <code>connect</code> function on our components to access the store.</p><h4 id="connects-a-React-component-with-the-Redux-store"><a href="#connects-a-React-component-with-the-Redux-store" class="headerlink" title="connects a React component with the Redux store."></a>connects a React component with the Redux store.</h4><ul><li>the mapStateToProps function</li><li>the mapDispatchToProps function</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">"./logo.svg"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; fetching, dog, onRequestDog, error &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">        ......</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapStateToProps = state =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    fetching: state.fetching,</span></span><br><span class="line"><span class="regexp">    dog: state.dog,</span></span><br><span class="line"><span class="regexp">    error: state.error</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = dispatch =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    onRequestDog: () =&gt; dispatch(&#123; type: "API_CALL_REQUEST" &#125;)</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default connect(mapStateToProps, mapDispatchToProps)(App);</span></span><br></pre></td></tr></table></figure><h3 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h3><p>It is a <strong>middleware</strong>, basically a plugin for Redux, that enables Redux to deal with actions like <code>getUser()</code>, ie.<code>dispatch(getUser())</code></p><p>thunk: itâ€™s an action creator that returns a function instead of a plain action object, like this:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doStuff</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">dispatch, getState</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// dispatch actions here</span></span><br><span class="line">    <span class="comment">// or fetch data</span></span><br><span class="line">    <span class="comment">// or whatever</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>the 2 agruments in return function,Most of the time youâ€™ll only need <code>dispatch</code>, but sometimes you want to do something conditionally, based on some value in the Redux state. In that case, call <code>getState()</code> and youâ€™ll have the entire state to read as needed.</p><h4 id="setup-redux-thunk"><a href="#setup-redux-thunk" class="headerlink" title="setup redux thunk"></a>setup redux thunk</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'redux-thunk'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h3><p><code>redux-saga</code> relies on generators, but does a decent amount of the work for us, so (in my fairly limited experience) a deep understanding of them for this use-case isnâ€™t necessary.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; takeLatest, call, put &#125; <span class="keyword">from</span> <span class="string">"redux-saga/effects"</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// watcher saga: watches for actions dispatched to the store, starts worker saga</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span>* <span class="title">watcherSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> takeLatest(<span class="string">"API_CALL_REQUEST"</span>, workerSaga);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function that makes the api request and returns a Promise for response</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchDog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios(&#123;</span><br><span class="line">    method: <span class="string">"get"</span>,</span><br><span class="line">    url: <span class="string">"https://dog.ceo/api/breeds/image/random"</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// worker saga: makes the api call when watcher saga sees the action</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">workerSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">yield</span> call(fetchDog);</span><br><span class="line">    <span class="keyword">const</span> dog = response.data.message;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dispatch a success action to the store with the new dog</span></span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">"API_CALL_SUCCESS"</span>, dog &#125;);</span><br><span class="line">  </span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// dispatch a failure action to the store with the error</span></span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">"API_CALL_FAILURE"</span>, error &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> redux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ES6 learn</title>
      <link href="/2019/04/04/ES6%20learn/"/>
      <url>/2019/04/04/ES6%20learn/</url>
      <content type="html"><![CDATA[<h3 id="Let"><a href="#Let" class="headerlink" title="Let"></a>Let</h3><p>let is similar to var but let has scope. let is only accessible in the block level it is defined.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"> <span class="keyword">let</span> a = <span class="number">40</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(a); <span class="comment">//40</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">50</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"> <span class="keyword">let</span> a = <span class="number">60</span>;</span><br><span class="line"> <span class="keyword">var</span> c = <span class="number">10</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(a/c); <span class="comment">// 6</span></span><br><span class="line"> <span class="built_in">console</span>.log(b/c); <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 50</span></span><br></pre></td></tr></table></figure><h3 id="Const"><a href="#Const" class="headerlink" title="Const"></a>Const</h3><p>Const is used to assign a constant value to the variable. And the value cannot be changed. Its fixed.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">50</span>;</span><br><span class="line">a = <span class="number">60</span>; <span class="comment">// shows error. You cannot change the value of const.</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">"Constant variable"</span>;</span><br><span class="line">b = <span class="string">"Assigning new value"</span>; <span class="comment">// shows error.</span></span><br></pre></td></tr></table></figure><p>Whenever you define a const variable, Javascript references the address of the value to the variable.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LANGUAGES = [<span class="string">'Js'</span>, <span class="string">'Ruby'</span>, <span class="string">'Python'</span>, <span class="string">'Go'</span>];</span><br><span class="line">LANGUAGES = <span class="string">"Javascript"</span>; <span class="comment">// shows error.</span></span><br><span class="line">LANGUAGES.push(<span class="string">'Java'</span>); <span class="comment">// Works fine.</span></span><br><span class="line"><span class="built_in">console</span>.log(LANGUAGES); <span class="comment">// ['Js', 'Ruby', 'Python', 'Go', 'Java']</span></span><br></pre></td></tr></table></figure><p>the variable â€˜LANGUAGESâ€™ actually references to the memory allocated to the array. So you cannot change the variable to reference some other memory location later. Throughout the program it only references to the array.</p><h3 id="Arrow-Function"><a href="#Arrow-Function" class="headerlink" title="Arrow Function"></a>Arrow Function</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Old Syntax</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oldOne</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Hello World..!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// New Syntax</span></span><br><span class="line"><span class="keyword">var</span> newOne = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Hello World..!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> NewOneWithParameters = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(a+b); <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br><span class="line">NewOneWithParameters(<span class="number">10</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure><p>There are two things to explain here.</p><ol><li>If you have a function with single parameter, you donâ€™t need (). In our case <strong>element</strong> is the parameter.</li><li>And If you have single line as the body of the function you donâ€™t need {} and also JS will implicitly returns the value after executing the function. You donâ€™t have to use <strong>return</strong> keyword.</li><li>Arrow functions shine best with anything that requires <code>this</code> to be bound to the context, and not the function itself.</li></ol><h3 id="For-of-loop"><a href="#For-of-loop" class="headerlink" title="For of loop"></a>For of loop</h3><p>for..of iterates through list of elements (i.e) like Array and returns the elements (not their index) one by one.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string = <span class="string">"Javascript"</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> char <span class="keyword">of</span> string) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(char);</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line">J</span><br><span class="line">a</span><br><span class="line">v</span><br><span class="line">a</span><br><span class="line">s</span><br><span class="line">c</span><br><span class="line">r</span><br><span class="line">i</span><br><span class="line">p</span><br><span class="line">t</span><br></pre></td></tr></table></figure><h3 id="Spread-attributes"><a href="#Spread-attributes" class="headerlink" title="Spread attributes"></a>Spread attributes</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> SumElements = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(arr); <span class="comment">// [10, 20, 40, 60, 90]</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> sum += element;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(sum); <span class="comment">// 220. </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SumElements([<span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">90</span>]);</span><br></pre></td></tr></table></figure><p>consider the same example with spread attributes:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> SumElements = <span class="function">(<span class="params">...arr</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(arr); <span class="comment">// [10, 20, 40, 60, 90]</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> sum += element;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(sum); <span class="comment">// 220. </span></span><br><span class="line">&#125;</span><br><span class="line">SumElements(<span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">90</span>); <span class="comment">// Note we are not passing array here. Instead we are passing the elements as arguments.</span></span><br></pre></td></tr></table></figure><p>Math.max is a simple method that returns the maximum element from given list. It doesnâ€™t accept an array.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">60</span>];</span><br><span class="line"><span class="built_in">Math</span>.max(arr); <span class="comment">// Shows error. Doesn't accept an array.</span></span><br></pre></td></tr></table></figure><p>So lets use our savior:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">60</span>];</span><br><span class="line"><span class="built_in">Math</span>.max(...arr); <span class="comment">// 60</span></span><br></pre></td></tr></table></figure><h3 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h3><p>Map holds key-value pairs. Itâ€™s similar to an array but we can define our own index. And indexes are unique in maps.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'name'</span>, <span class="string">'John'</span>);</span><br><span class="line">map.set(<span class="string">'id'</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">map.get(<span class="string">'name'</span>); <span class="comment">// John</span></span><br><span class="line">map.get(<span class="string">'id'</span>); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">map.size; <span class="comment">// 2. Returns the size of the map.</span></span><br><span class="line">map.keys(); <span class="comment">// outputs only the keys. </span></span><br><span class="line">map.values(); <span class="comment">// outputs only the values.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line">name</span><br><span class="line">id</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(key+<span class="string">" - "</span>+value);</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line">name - John</span><br><span class="line">id - <span class="number">10</span></span><br></pre></td></tr></table></figure><h3 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h3><p>Sets are used to store the unique values of any type.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sets = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">sets.add(<span class="string">'a'</span>);</span><br><span class="line">sets.add(<span class="string">'b'</span>);</span><br><span class="line">sets.add(<span class="string">'a'</span>); <span class="comment">// We are adding duplicate value.</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> sets) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line"></span><br><span class="line">sets.size; <span class="comment">// returns 2. Size of the set.</span></span><br><span class="line">sets.has(<span class="string">'a'</span>); <span class="comment">// returns true. </span></span><br><span class="line">sets.has(<span class="string">'c'</span>); <span class="comment">// returns false.</span></span><br></pre></td></tr></table></figure><h3 id="Static-methods"><a href="#Static-methods" class="headerlink" title="Static methods"></a>Static methods</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"> <span class="keyword">static</span> Callme() &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Static method"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">Example.Callme();</span><br><span class="line">Output:</span><br><span class="line">Static method</span><br></pre></td></tr></table></figure><p> you can call the function without creating any instance for the class.</p><h3 id="Getters-and-Setters"><a href="#Getters-and-Setters" class="headerlink" title="Getters and Setters"></a>Getters and Setters</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line"><span class="keyword">constructor</span>(name) &#123;</span><br><span class="line"> <span class="keyword">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line"> getName() &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line"> &#125;</span><br><span class="line"> setName(name) &#123;</span><br><span class="line"> <span class="keyword">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> People(<span class="string">"Jon Snow"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.getName());</span><br><span class="line">person.setName(<span class="string">"Dany"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.getName());</span><br><span class="line">Output:</span><br><span class="line">Jon Snow</span><br><span class="line">Dany</span><br></pre></td></tr></table></figure><h3 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h3><p> They are used to make <strong>async</strong> operations such as API request, file handling, downloading images, etc.</p><p>Before promises, programmers used to define <strong>callbacks.</strong> Callbacks are normal functions in Javascript which executes when the async operation is complete.</p><ul><li><p>three states in promises</p><ol><li><strong>Pending</strong>: In this state the promise is just executing the async operation. For example, Itâ€™s making some API request to the server or downloading some images from cdn.  from this state promise can move to either to <strong>Fulfilled</strong> or to <strong>Rejected</strong></li><li><strong>Fulfilled</strong>: If the promise has reached this state, then it means that the async operation is complete and we have the output. For example, we have the response from the API.</li><li><strong>Rejected:</strong> If the promise has reached this state, it means that the async operation is not successful and we have the error which caused the operation to fail.</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> apiCall = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> ( API request to get some data ) &#123;</span><br><span class="line">  resolve(<span class="string">"The request is successful and the response is "</span>+ response);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  reject(<span class="string">"The request is not successful. The error is "</span>+error);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>Then the <strong>resolve</strong> function is called if we get the response from the server. And if there is some error <strong>reject</strong> function is called with the error message.</p></li><li><p>We use <strong>handlers</strong> to get the output from the promise.</p><blockquote><p>Handlers are just functions which executes when some event occurs such as clicking a button, moving the cursor, etc.</p><p>So we can use handlers to handle when the <strong>resolve</strong> function is called or <strong>reject </strong>function is called.</p></blockquote><ul><li>The handler <strong>then</strong> executes its <strong>function parameter</strong> when the <strong>resolve</strong> function is called inside the promise.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calling the promise with some handlers.</span></span><br><span class="line">apiCall.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;<span class="built_in">console</span>.log(x); &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output</span></span><br><span class="line">The request is successful and the response is &#123;<span class="attr">name</span>: <span class="string">"Jon Snow"</span>&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>Catch</strong> handler looks out for <strong>reject</strong> function.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">apiCall</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">// Assuming the request is not successful ( reject function is called in the promise. )</span></span><br><span class="line">Output:</span><br><span class="line">The request is not successful</span><br></pre></td></tr></table></figure></li></ul><h3 id="Async-Await"><a href="#Async-Await" class="headerlink" title="Async / Await"></a>Async / Await</h3><h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="string">"Hello Promise..!"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The above code is equivalent to the below code:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"> <span class="comment">// executor function body.</span></span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"Greater"</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Not Greater"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">hello(<span class="number">14</span>, <span class="number">10</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Good..! "</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Oops..! "</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line">Output:</span><br><span class="line">Oops..! Not Greater. </span><br><span class="line"><span class="comment">// if you call hello(4, 10) you get "Good..! Greater"</span></span><br></pre></td></tr></table></figure><p>Donâ€™t forget that async function will return a promise. So of course, you can call <strong>resolve</strong> and <strong>reject</strong> function inside <strong>async</strong> function too. </p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">Max</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">"Success"</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">"Error"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">Max(<span class="number">4</span>, <span class="number">10</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Good "</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Oops "</span> + x); </span><br><span class="line">&#125;);</span><br><span class="line">Output:</span><br><span class="line">Oops <span class="built_in">Error</span></span><br><span class="line"><span class="comment">// If we pass Max(14, 10) then we should get "Good Success" :)</span></span><br></pre></td></tr></table></figure><h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4><p> It makes the Javascript to wait until you get the response from the endpoint. And then it resumes the execution.</p><p><strong>await can be used only inside async function. It doesnâ€™t work outside async function</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">'https://api.github.com/'</span>);</span><br><span class="line"> <span class="comment">// above line fetches the response from the given API endpoint.</span></span><br><span class="line"> <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line">hello()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x); </span><br><span class="line">&#125;);</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">Output:</span><br><span class="line">Response <span class="keyword">from</span> the API.</span><br></pre></td></tr></table></figure><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><h4 id="Array-Map"><a href="#Array-Map" class="headerlink" title="Array Map"></a>Array Map</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br></pre></td></tr></table></figure><p>And also note we have to return some value in the end. Which will be the modified value of that element. If you didnâ€™t return anything then the particular element will be undefined.</p><p>One more thing I like to add is the second and third parameter is only optional. Only the first parameter is mandatory. for example :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>write the map operator with arrow functions:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function">(<span class="params">element, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"index "</span>+index);</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">index <span class="number">0</span></span><br><span class="line">index <span class="number">1</span></span><br><span class="line">index <span class="number">2</span></span><br><span class="line">index <span class="number">3</span></span><br><span class="line">index <span class="number">4</span></span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br></pre></td></tr></table></figure><p>better:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="params">element</span> =&gt;</span> element * <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br></pre></td></tr></table></figure><h4 id="Array-Filter"><a href="#Array-Filter" class="headerlink" title="Array Filter"></a>Array Filter</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> modifiedArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><p>try by arrow function:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedAarr = arr.filter(<span class="function">(<span class="params">element, index</span>) =&gt;</span> element%<span class="number">2</span> == <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>we have to return a boolean value for each element of the array. If you wonâ€™t return any boolean value at the end then the filter takes it as <strong>false</strong> and deletes the element.</p><h4 id="Array-Reduce"><a href="#Array-Reduce" class="headerlink" title="Array Reduce"></a>Array Reduce</h4><p>Array reduce is used to aggregate all the elements of an array and return a single value.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> total= arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">sum, element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> sum + element;</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"total is "</span>+total);</span><br><span class="line">Output:</span><br><span class="line">total is <span class="number">21</span></span><br></pre></td></tr></table></figure><p>Unlike filter and map, reduce takes a function with four parameters and also a additional element. Unlike filter and map, the first two parameters are mandatory. Other two are optional.</p><p>The first parameter is the aggregator element.In our case itâ€™s 0. </p><p>Like filter and map you have to return the end result.</p><p>write the same code with arrow functions:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> totalSum = arr.reduce(<span class="function">(<span class="params">sum, element</span>) =&gt;</span> element+sum, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="Template-Literals"><a href="#Template-Literals" class="headerlink" title="Template Literals"></a>Template Literals</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Srebalaji"</span>;</span><br><span class="line"><span class="keyword">let</span> languages = <span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="keyword">return</span> <span class="string">"Ruby, Js, Java, Python"</span>&#125;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string">My age is <span class="subst">$&#123;<span class="number">20</span>+<span class="number">3</span>&#125;</span></span></span><br><span class="line"><span class="string">And I code in <span class="subst">$&#123;languages()&#125;</span>`</span></span><br><span class="line">Output:</span><br><span class="line">My name is Srebalaji</span><br><span class="line">My age is <span class="number">23</span></span><br><span class="line">And I code <span class="keyword">in</span> Ruby, Js, Java, Python</span><br></pre></td></tr></table></figure><h3 id="Imports-and-Exports"><a href="#Imports-and-Exports" class="headerlink" title="Imports and Exports"></a>Imports and Exports</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">"Jon"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> age = <span class="number">23</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;name, age&#125; <span class="keyword">from</span> <span class="string">'./app'</span></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.html</span></span><br><span class="line">&lt;script src=<span class="string">"./index.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">Jon</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><p>and:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="params">()</span> =&gt;</span> a+b;</span><br><span class="line"><span class="keyword">export</span> &#123;a,b&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sum</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> variables <span class="keyword">from</span> <span class="string">'./app'</span></span><br><span class="line"><span class="keyword">import</span> addition <span class="keyword">from</span> <span class="string">'./app'</span> <span class="comment">// default value</span></span><br><span class="line"><span class="built_in">console</span>.log(variables.a);</span><br><span class="line"><span class="built_in">console</span>.log(variables.b);</span><br><span class="line"><span class="built_in">console</span>.log(addition());</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><ol><li><p>If you are using * to import values then you have to use <strong>alias</strong> (i.e) names that will refer to imported values. In our example we have used <strong>variables</strong> as alias.</p></li><li><p>Using * to import values doesnâ€™t import default value. You have to import it separately.</p><p>for example:<code>import addition, * as variables from &#39;./app&#39;</code></p></li></ol><h3 id="Destructuring-objects-and-arrays"><a href="#Destructuring-objects-and-arrays" class="headerlink" title="Destructuring objects and arrays"></a>Destructuring objects and arrays</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">firstName</span>: <span class="string">"Jon"</span>, <span class="attr">lastName</span>: <span class="string">"Snow"</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;firstName, lastName, age&#125; = person</span><br><span class="line"><span class="built_in">console</span>.log(firstName);</span><br><span class="line"><span class="built_in">console</span>.log(lastName);</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line">Output:</span><br><span class="line">Jon</span><br><span class="line">Snow</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><h3 id="Extend-and-Super"><a href="#Extend-and-Super" class="headerlink" title="Extend and Super"></a>Extend and Super</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"> <span class="keyword">constructor</span>(firstName, lastName, age) &#123;</span><br><span class="line">   <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">   <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">   <span class="keyword">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"> displayName() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.firstName&#125;</span> - <span class="subst">$&#123;<span class="keyword">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"> <span class="keyword">constructor</span>(firstName, lastName, age, salary) &#123;</span><br><span class="line">  <span class="keyword">super</span>(firstName, lastName, age);</span><br><span class="line">  <span class="keyword">this</span>.salary = salary;</span><br><span class="line"> &#125;</span><br><span class="line"> displaySalary() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.salary&#125;</span>`</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> displayName() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">super</span>.displayName();</span><br><span class="line"> &#125;</span><br><span class="line"> displayAge() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> manager = <span class="keyword">new</span> Employee(<span class="string">"Jon"</span>, <span class="string">"Snow"</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.log(manager.displaySalary());</span><br><span class="line"><span class="built_in">console</span>.log(manager.displayName());</span><br><span class="line"><span class="built_in">console</span>.log(manager.displayAge());</span><br><span class="line">Output:</span><br><span class="line"><span class="number">100</span></span><br><span class="line">Jon Snow</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><p>And then we have used <strong>super</strong> keyword to call the constructor of the parent class. And we also have called the method declared in the parent class using <strong>super</strong>.</p><h3 id="Generator-functions"><a href="#Generator-functions" class="headerlink" title="Generator functions"></a>Generator functions</h3><ul><li>Generator functions are written using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noopener"><code>function*</code></a> syntax. When called initially, generator functions do not execute any of their code, instead returning a type of iterator called a Generator. </li><li>When a value is consumed by calling the generatorâ€™s <strong>next</strong> method, the Generator function executes until it encounters the <strong>yield</strong> keyword.<ul><li>Each <code>yield</code> in a generator basically represents an asynchronous step in a more synchronous/sequential processâ€Šâ€”â€Šsomewhat like <code>await</code> in an <code>async</code>function.</li></ul></li><li>The function can be called as many times as desired and returns a new Generator each time, however each Generator may only be iterated once.</li></ul><h3 id="some-method"><a href="#some-method" class="headerlink" title="some method"></a>some method</h3><ul><li><p>includes</p><p>construct an array of the items, and use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener"><code>includes</code></a>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].includes(<span class="string">'b'</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>spring boot learn</title>
      <link href="/2019/03/31/regex%20learn/"/>
      <url>/2019/03/31/regex%20learn/</url>
      <content type="html"><![CDATA[<p></p><p align="center"><br>    <br><br>    <a href="https://github.com/ziishaned/learn-regex" target="_blank" rel="noopener"><br>        <img src="https://i.imgur.com/bYwl7Vf.png" alt="Learn Regex"><br>    </a><br>    <br><br><br>    </p><p><br>        <a href="https://twitter.com/home?status=Learn%20regex%20the%20easy%20way%20by%20%40ziishaned%20http%3A//github.com/ziishaned/learn-regex" target="_blank" rel="noopener"><br>            <img src="https://img.shields.io/badge/twitter-tweet-blue.svg?style=flat-square"><br>        </a><br>        <a href="https://twitter.com/ziishaned" target="_blank" rel="noopener"><br>            <img src="https://img.shields.io/badge/feedback-@ziishaned-blue.svg?style=flat-square"><br>        </a><br>    </p><br><p></p><br>ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼?<p></p><blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç»„ç”±å­—æ¯å’Œç¬¦å·ç»„æˆçš„ç‰¹æ®Šæ–‡æœ¬, å®ƒå¯ä»¥ç”¨æ¥ä»æ–‡æœ¬ä¸­æ‰¾å‡ºæ»¡è¶³ä½ æƒ³è¦çš„æ ¼å¼çš„å¥å­.</p></blockquote><p>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯åœ¨ä¸€ä¸ªä¸»ä½“å­—ç¬¦ä¸²ä¸­ä»å·¦åˆ°å³åŒ¹é…å­—ç¬¦ä¸²æ—¶çš„ä¸€ç§æ ·å¼.<br>â€œRegular expressionâ€è¿™ä¸ªè¯æ¯”è¾ƒæ‹—å£, æˆ‘ä»¬å¸¸ä½¿ç”¨ç¼©å†™çš„æœ¯è¯­â€regexâ€æˆ–â€regexpâ€.<br>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä»ä¸€ä¸ªåŸºç¡€å­—ç¬¦ä¸²ä¸­æ ¹æ®ä¸€å®šçš„åŒ¹é…æ¨¡å¼æ›¿æ¢æ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸²ã€éªŒè¯è¡¨å•ã€æå–å­—ç¬¦ä¸²ç­‰ç­‰.</p><p>æƒ³è±¡ä½ æ­£åœ¨å†™ä¸€ä¸ªåº”ç”¨, ç„¶åä½ æƒ³è®¾å®šä¸€ä¸ªç”¨æˆ·å‘½åçš„è§„åˆ™, è®©ç”¨æˆ·ååŒ…å«å­—ç¬¦,æ•°å­—,ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦,ä»¥åŠé™åˆ¶å­—ç¬¦çš„ä¸ªæ•°,å¥½è®©åå­—çœ‹èµ·æ¥æ²¡é‚£ä¹ˆä¸‘.<br>æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ¥éªŒè¯ä¸€ä¸ªç”¨æˆ·å:</p><p><img src="https://i.imgur.com/H5uDOzW.png" alt=""></p><p>ä»¥ä¸Šçš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥æ¥å— <code>john_doe</code>, <code>jo-hn_doe</code>, <code>john12_as</code>.<br>ä½†ä¸åŒ¹é…<code>Jo</code>, å› ä¸ºå®ƒåŒ…å«äº†å¤§å†™çš„å­—æ¯è€Œä¸”å¤ªçŸ­äº†.</p><h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h1><ul><li><a href="#1-åŸºæœ¬åŒ¹é…">1. åŸºæœ¬åŒ¹é…</a></li><li><a href="#2-å…ƒå­—ç¬¦">2. å…ƒå­—ç¬¦</a><pre><code>* [2.1 ç‚¹è¿ç®—ç¬¦ .](#21-ç‚¹è¿ç®—ç¬¦-)* [2.2 å­—ç¬¦é›†](#22-å­—ç¬¦é›†)* [2.2.1 å¦å®šå­—ç¬¦é›†](#221-å¦å®šå­—ç¬¦é›†)</code></pre><ul><li><a href="#23-é‡å¤æ¬¡æ•°">2.3 é‡å¤æ¬¡æ•°</a><ul><li><a href="#231--å·">2.3.1 * å·</a></li><li><a href="#232--å·">2.3.2 + å·</a></li><li><a href="#233--å·">2.3.3 ? å·</a></li></ul></li><li><a href="#24--å·">2.4 {} å·</a></li><li><a href="#25--ç‰¹å¾æ ‡ç¾¤">2.5 (â€¦) ç‰¹å¾æ ‡ç¾¤</a></li><li><a href="#26--æˆ–è¿ç®—ç¬¦">2.6 | æˆ–è¿ç®—ç¬¦</a></li><li><a href="#27-è½¬ç ç‰¹æ®Šå­—ç¬¦">2.7 è½¬ç ç‰¹æ®Šå­—ç¬¦</a></li><li><a href="#28-é”šç‚¹">2.8 é”šç‚¹</a><ul><li><a href="#281--å·">2.8.1 ^ å·</a></li><li><a href="#282--å·">2.8.2 $ å·</a><ul><li><a href="#3-ç®€å†™å­—ç¬¦é›†">3. ç®€å†™å­—ç¬¦é›†</a></li><li><a href="#4-é›¶å®½åº¦æ–­è¨€å‰åé¢„æŸ¥">4. é›¶å®½åº¦æ–­è¨€(å‰åé¢„æŸ¥)</a></li></ul></li></ul></li><li><a href="#41--æ­£å…ˆè¡Œæ–­è¨€">4.1 ?=â€¦ æ­£å…ˆè¡Œæ–­è¨€</a></li><li><a href="#42--è´Ÿå…ˆè¡Œæ–­è¨€">4.2 ?!â€¦ è´Ÿå…ˆè¡Œæ–­è¨€</a></li><li><a href="#43---æ­£åå‘æ–­è¨€">4.3 ?&lt;= â€¦ æ­£åå‘æ–­è¨€</a></li><li><a href="#44--è´Ÿåå‘æ–­è¨€">4.4 ?&lt;!â€¦ è´Ÿåå‘æ–­è¨€</a><ul><li><a href="#5-æ ‡å¿—">5. æ ‡å¿—</a></li></ul></li><li><a href="#51-å¿½ç•¥å¤§å°å†™-case-insensitive">5.1 å¿½ç•¥å¤§å°å†™ (Case Insensitive)</a></li><li><a href="#52-å…¨å±€æœç´¢-global-search">5.2 å…¨å±€æœç´¢ (Global search)</a></li><li><a href="#53-å¤šè¡Œä¿®é¥°ç¬¦-multiline">5.3 å¤šè¡Œä¿®é¥°ç¬¦ (Multiline)</a><ul><li><a href="#é¢å¤–è¡¥å……">é¢å¤–è¡¥å……</a></li><li><a href="#è´¡çŒ®">è´¡çŒ®</a></li><li><a href="#è®¸å¯è¯">è®¸å¯è¯</a></li></ul></li></ul></li></ul><h2 id="1-åŸºæœ¬åŒ¹é…"><a href="#1-åŸºæœ¬åŒ¹é…" class="headerlink" title="1. åŸºæœ¬åŒ¹é…"></a>1. åŸºæœ¬åŒ¹é…</h2><p>æ­£åˆ™è¡¨è¾¾å¼å…¶å®å°±æ˜¯åœ¨æ‰§è¡Œæœç´¢æ—¶çš„æ ¼å¼, å®ƒç”±ä¸€äº›å­—æ¯å’Œæ•°å­—ç»„åˆè€Œæˆ.<br>ä¾‹å¦‚: ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ <code>the</code>, å®ƒè¡¨ç¤ºä¸€ä¸ªè§„åˆ™: ç”±å­—æ¯<code>t</code>å¼€å§‹,æ¥ç€æ˜¯<code>h</code>,å†æ¥ç€æ˜¯<code>e</code>.</p><pre>"the" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/dmRygT/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><p>æ­£åˆ™è¡¨è¾¾å¼<code>123</code>åŒ¹é…å­—ç¬¦ä¸²<code>123</code>. å®ƒé€ä¸ªå­—ç¬¦çš„ä¸è¾“å…¥çš„æ­£åˆ™è¡¨è¾¾å¼åšæ¯”è¾ƒ.</p><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¤§å°å†™æ•æ„Ÿçš„, æ‰€ä»¥<code>The</code>ä¸ä¼šåŒ¹é…<code>the</code>.</p><pre>"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/1paXsy/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-å…ƒå­—ç¬¦"><a href="#2-å…ƒå­—ç¬¦" class="headerlink" title="2. å…ƒå­—ç¬¦"></a>2. å…ƒå­—ç¬¦</h2><p>æ­£åˆ™è¡¨è¾¾å¼ä¸»è¦ä¾èµ–äºå…ƒå­—ç¬¦.<br>å…ƒå­—ç¬¦ä¸ä»£è¡¨ä»–ä»¬æœ¬èº«çš„å­—é¢æ„æ€, ä»–ä»¬éƒ½æœ‰ç‰¹æ®Šçš„å«ä¹‰. ä¸€äº›å…ƒå­—ç¬¦å†™åœ¨æ–¹æ‹¬å·ä¸­çš„æ—¶å€™æœ‰ä¸€äº›ç‰¹æ®Šçš„æ„æ€. ä»¥ä¸‹æ˜¯ä¸€äº›å…ƒå­—ç¬¦çš„ä»‹ç»:</p><table><thead><tr><th style="text-align:center">å…ƒå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td>å¥å·åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦é™¤äº†æ¢è¡Œç¬¦.</td></tr><tr><td style="text-align:center">[ ]</td><td>å­—ç¬¦ç§ç±». åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦.</td></tr><tr><td style="text-align:center">[^ ]</td><td>å¦å®šçš„å­—ç¬¦ç§ç±». åŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œçš„ä»»æ„å­—ç¬¦</td></tr><tr><td style="text-align:center">*</td><td>åŒ¹é…&gt;=0ä¸ªé‡å¤çš„åœ¨*å·ä¹‹å‰çš„å­—ç¬¦.</td></tr><tr><td style="text-align:center">+</td><td>åŒ¹é…&gt;=1ä¸ªé‡å¤çš„+å·å‰çš„å­—ç¬¦.</td></tr><tr><td style="text-align:center">?</td><td>æ ‡è®°?ä¹‹å‰çš„å­—ç¬¦ä¸ºå¯é€‰.</td></tr><tr><td style="text-align:center">{n,m}</td><td>åŒ¹é…numä¸ªå¤§æ‹¬å·ä¹‹å‰çš„å­—ç¬¦ (n &lt;= num &lt;= m).</td></tr><tr><td style="text-align:center">(xyz)</td><td>å­—ç¬¦é›†, åŒ¹é…ä¸ xyz å®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸².</td></tr><tr><td style="text-align:center">&#124;</td><td>æˆ–è¿ç®—ç¬¦,åŒ¹é…ç¬¦å·å‰æˆ–åçš„å­—ç¬¦.</td></tr><tr><td style="text-align:center">&#92;</td><td>è½¬ä¹‰å­—ç¬¦,ç”¨äºåŒ¹é…ä¸€äº›ä¿ç•™çš„å­—ç¬¦ <code>[ ] ( ) { } . * + ? ^ $ \ &#124;</code></td></tr><tr><td style="text-align:center">^</td><td>ä»å¼€å§‹è¡Œå¼€å§‹åŒ¹é….</td></tr><tr><td style="text-align:center">$</td><td>ä»æœ«ç«¯å¼€å§‹åŒ¹é….</td></tr></tbody></table><h2 id="2-1-ç‚¹è¿ç®—ç¬¦"><a href="#2-1-ç‚¹è¿ç®—ç¬¦" class="headerlink" title="2.1 ç‚¹è¿ç®—ç¬¦ ."></a>2.1 ç‚¹è¿ç®—ç¬¦ <code>.</code></h2><p><code>.</code>æ˜¯å…ƒå­—ç¬¦ä¸­æœ€ç®€å•çš„ä¾‹å­.<br><code>.</code>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦, ä½†ä¸åŒ¹é…æ¢è¡Œç¬¦.<br>ä¾‹å¦‚, è¡¨è¾¾å¼<code>.ar</code>åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦åé¢è·Ÿç€æ˜¯<code>a</code>å’Œ<code>r</code>çš„å­—ç¬¦ä¸².</p><pre>".ar" => The <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/xc9GkU/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-2-å­—ç¬¦é›†"><a href="#2-2-å­—ç¬¦é›†" class="headerlink" title="2.2 å­—ç¬¦é›†"></a>2.2 å­—ç¬¦é›†</h2><p>å­—ç¬¦é›†ä¹Ÿå«åšå­—ç¬¦ç±».<br>æ–¹æ‹¬å·ç”¨æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†.<br>åœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨è¿å­—ç¬¦æ¥æŒ‡å®šå­—ç¬¦é›†çš„èŒƒå›´.<br>åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦é›†ä¸å…³å¿ƒé¡ºåº.<br>ä¾‹å¦‚, è¡¨è¾¾å¼<code>[Tt]he</code> åŒ¹é… <code>the</code> å’Œ <code>The</code>.</p><pre>"[Tt]he" => <a href="#learn-regex"><strong>The</strong></a> car parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/2ITLQ4/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><p>æ–¹æ‹¬å·çš„å¥å·å°±è¡¨ç¤ºå¥å·.<br>è¡¨è¾¾å¼ <code>ar[.]</code> åŒ¹é… <code>ar.</code>å­—ç¬¦ä¸²</p><pre>"ar[.]" => A garage is a good place to park a c<a href="#learn-regex"><strong>ar.</strong></a></pre><p><a href="https://regex101.com/r/wL3xtE/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="2-2-1-å¦å®šå­—ç¬¦é›†"><a href="#2-2-1-å¦å®šå­—ç¬¦é›†" class="headerlink" title="2.2.1 å¦å®šå­—ç¬¦é›†"></a>2.2.1 å¦å®šå­—ç¬¦é›†</h3><p>ä¸€èˆ¬æ¥è¯´ <code>^</code> è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´, ä½†å®ƒç”¨åœ¨ä¸€ä¸ªæ–¹æ‹¬å·çš„å¼€å¤´çš„æ—¶å€™, å®ƒè¡¨ç¤ºè¿™ä¸ªå­—ç¬¦é›†æ˜¯å¦å®šçš„.<br>ä¾‹å¦‚, è¡¨è¾¾å¼<code>[^c]ar</code> åŒ¹é…ä¸€ä¸ªåé¢è·Ÿç€<code>ar</code>çš„é™¤äº†<code>c</code>çš„ä»»æ„å­—ç¬¦.</p><pre>"[^c]ar" => The car <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/nNNlq3/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-3-é‡å¤æ¬¡æ•°"><a href="#2-3-é‡å¤æ¬¡æ•°" class="headerlink" title="2.3 é‡å¤æ¬¡æ•°"></a>2.3 é‡å¤æ¬¡æ•°</h2><p>åé¢è·Ÿç€å…ƒå­—ç¬¦ <code>+</code>, <code>*</code> or <code>?</code> çš„, ç”¨æ¥æŒ‡å®šåŒ¹é…å­æ¨¡å¼çš„æ¬¡æ•°.<br>è¿™äº›å…ƒå­—ç¬¦åœ¨ä¸åŒçš„æƒ…å†µä¸‹æœ‰ç€ä¸åŒçš„æ„æ€.</p><h3 id="2-3-1-å·"><a href="#2-3-1-å·" class="headerlink" title="2.3.1 * å·"></a>2.3.1 <code>*</code> å·</h3><p><code>*</code>å·åŒ¹é… åœ¨<code>*</code>ä¹‹å‰çš„å­—ç¬¦å‡ºç°<code>å¤§äºç­‰äº0</code>æ¬¡.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>a*</code> åŒ¹é…ä»¥0æˆ–æ›´å¤šä¸ªaå¼€å¤´çš„å­—ç¬¦, å› ä¸ºæœ‰0ä¸ªè¿™ä¸ªæ¡ä»¶, å…¶å®ä¹Ÿå°±åŒ¹é…äº†æ‰€æœ‰çš„å­—ç¬¦. è¡¨è¾¾å¼<code>[a-z]*</code> åŒ¹é…ä¸€ä¸ªè¡Œä¸­æ‰€æœ‰ä»¥å°å†™å­—æ¯å¼€å¤´çš„å­—ç¬¦ä¸².</p><pre>"[a-z]*" => T<a href="#learn-regex"><strong>he</strong></a> <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>parked</strong></a> <a href="#learn-regex"><strong>in</strong></a> <a href="#learn-regex"><strong>the</strong></a> <a href="#learn-regex"><strong>garage</strong></a> #21.</pre><p><a href="https://regex101.com/r/7m8me5/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><p><code>*</code>å­—ç¬¦å’Œ<code>.</code>å­—ç¬¦æ­é…å¯ä»¥åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦<code>.*</code>.<br><code>*</code>å’Œè¡¨ç¤ºåŒ¹é…ç©ºæ ¼çš„ç¬¦å·<code>\s</code>è¿èµ·æ¥ç”¨, å¦‚è¡¨è¾¾å¼<code>\s*cat\s*</code>åŒ¹é…0æˆ–æ›´å¤šä¸ªç©ºæ ¼å¼€å¤´å’Œ0æˆ–æ›´å¤šä¸ªç©ºæ ¼ç»“å°¾çš„catå­—ç¬¦ä¸².</p><pre>"\s*cat\s*" => The fat<a href="#learn-regex"><strong> cat </strong></a>sat on the con<a href="#learn-regex"><strong>cat</strong></a>enation.</pre><p><a href="https://regex101.com/r/gGrwuz/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="2-3-2-å·"><a href="#2-3-2-å·" class="headerlink" title="2.3.2 + å·"></a>2.3.2 <code>+</code> å·</h3><p><code>+</code>å·åŒ¹é…<code>+</code>å·ä¹‹å‰çš„å­—ç¬¦å‡ºç° &gt;=1 æ¬¡.<br>ä¾‹å¦‚è¡¨è¾¾å¼<code>c.+t</code> åŒ¹é…ä»¥é¦–å­—æ¯<code>c</code>å¼€å¤´ä»¥<code>t</code>ç»“å°¾,ä¸­é—´è·Ÿç€ä»»æ„ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸².</p><pre>"c.+t" => The fat <a href="#learn-regex"><strong>cat sat on the mat</strong></a>.</pre><p><a href="https://regex101.com/r/Dzf9Aa/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="2-3-3-å·"><a href="#2-3-3-å·" class="headerlink" title="2.3.3 ? å·"></a>2.3.3 <code>?</code> å·</h3><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…ƒå­—ç¬¦ <code>?</code> æ ‡è®°åœ¨ç¬¦å·å‰é¢çš„å­—ç¬¦ä¸ºå¯é€‰, å³å‡ºç° 0 æˆ– 1 æ¬¡.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>[T]?he</code> åŒ¹é…å­—ç¬¦ä¸² <code>he</code> å’Œ <code>The</code>.</p><pre>"[T]he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.</pre><p><a href="https://regex101.com/r/cIg9zm/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"[T]?he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in t<a href="#learn-regex"><strong>he</strong></a> garage.</pre><p><a href="https://regex101.com/r/kPpO2x/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-4-å·"><a href="#2-4-å·" class="headerlink" title="2.4 {} å·"></a>2.4 <code>{}</code> å·</h2><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ <code>{}</code> æ˜¯ä¸€ä¸ªé‡è¯, å¸¸ç”¨æ¥ä¸€ä¸ªæˆ–ä¸€ç»„å­—ç¬¦å¯ä»¥é‡å¤å‡ºç°çš„æ¬¡æ•°.<br>ä¾‹å¦‚,  è¡¨è¾¾å¼ <code>[0-9]{2,3}</code> åŒ¹é…æœ€å°‘ 2 ä½æœ€å¤š 3 ä½ 0~9 çš„æ•°å­—.</p><pre>"[0-9]{2,3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.</pre><p><a href="https://regex101.com/r/juM86s/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><p>æˆ‘ä»¬å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°.<br>ä¾‹å¦‚, <code>[0-9]{2,}</code> åŒ¹é…è‡³å°‘ä¸¤ä½ 0~9 çš„æ•°å­—.</p><p>å¦‚æœé€—å·ä¹Ÿçœç•¥æ‰åˆ™è¡¨ç¤ºé‡å¤å›ºå®šçš„æ¬¡æ•°.<br>ä¾‹å¦‚, <code>[0-9]{3}</code> åŒ¹é…3ä½æ•°å­—</p><pre>"[0-9]{2,}" => The number was 9.<a href="#learn-regex"><strong>9997</strong></a> but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.</pre><p><a href="https://regex101.com/r/Gdy4w5/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"[0-9]{3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to 10.0.</pre><p><a href="https://regex101.com/r/Sivu30/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-5-ç‰¹å¾æ ‡ç¾¤"><a href="#2-5-ç‰¹å¾æ ‡ç¾¤" class="headerlink" title="2.5 (...) ç‰¹å¾æ ‡ç¾¤"></a>2.5 <code>(...)</code> ç‰¹å¾æ ‡ç¾¤</h2><p>ç‰¹å¾æ ‡ç¾¤æ˜¯ä¸€ç»„å†™åœ¨ <code>(...)</code> ä¸­çš„å­æ¨¡å¼. ä¾‹å¦‚ä¹‹å‰è¯´çš„ <code>{}</code> æ˜¯ç”¨æ¥è¡¨ç¤ºå‰é¢ä¸€ä¸ªå­—ç¬¦å‡ºç°æŒ‡å®šæ¬¡æ•°. ä½†å¦‚æœåœ¨ <code>{}</code> å‰åŠ å…¥ç‰¹å¾æ ‡ç¾¤åˆ™è¡¨ç¤ºæ•´ä¸ªæ ‡ç¾¤å†…çš„å­—ç¬¦é‡å¤ N æ¬¡. ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(ab)*</code> åŒ¹é…è¿ç»­å‡ºç° 0 æˆ–æ›´å¤šä¸ª <code>ab</code>.</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <code>()</code> ä¸­ç”¨æˆ–å­—ç¬¦ <code>|</code> è¡¨ç¤ºæˆ–. ä¾‹å¦‚, <code>(c|g|p)ar</code> åŒ¹é… <code>car</code> æˆ– <code>gar</code> æˆ– <code>par</code>.</p><pre>"(c|g|p)ar" => The <a href="#learn-regex"><strong>car</strong></a> is <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/tUxrBG/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-6-æˆ–è¿ç®—ç¬¦"><a href="#2-6-æˆ–è¿ç®—ç¬¦" class="headerlink" title="2.6 | æˆ–è¿ç®—ç¬¦"></a>2.6 <code>|</code> æˆ–è¿ç®—ç¬¦</h2><p>æˆ–è¿ç®—ç¬¦å°±è¡¨ç¤ºæˆ–, ç”¨ä½œåˆ¤æ–­æ¡ä»¶.</p><p>ä¾‹å¦‚ <code>(T|t)he|car</code> åŒ¹é… <code>(T|t)he</code> æˆ– <code>car</code>.</p><pre>"(T|t)he|car" => <a href="#learn-regex"><strong>The</strong></a> <a href="#learn-regex"><strong>car</strong></a> is parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/fBXyX0/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-7-è½¬ç ç‰¹æ®Šå­—ç¬¦"><a href="#2-7-è½¬ç ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="2.7 è½¬ç ç‰¹æ®Šå­—ç¬¦"></a>2.7 è½¬ç ç‰¹æ®Šå­—ç¬¦</h2><p>åæ–œçº¿ <code>\</code> åœ¨è¡¨è¾¾å¼ä¸­ç”¨äºè½¬ç ç´§è·Ÿå…¶åçš„å­—ç¬¦. ç”¨äºæŒ‡å®š <code>{ } [ ] / \ + * . $ ^ | ?</code> è¿™äº›ç‰¹æ®Šå­—ç¬¦. å¦‚æœæƒ³è¦åŒ¹é…è¿™äº›ç‰¹æ®Šå­—ç¬¦åˆ™è¦åœ¨å…¶å‰é¢åŠ ä¸Šåæ–œçº¿ <code>\</code>.</p><p>ä¾‹å¦‚ <code>.</code> æ˜¯ç”¨æ¥åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦çš„. å¦‚æœæƒ³è¦åŒ¹é…å¥å­ä¸­çš„ <code>.</code> åˆ™è¦å†™æˆ <code>\.</code> ä»¥ä¸‹è¿™ä¸ªä¾‹å­ <code>\.?</code>æ˜¯é€‰æ‹©æ€§åŒ¹é…<code>.</code></p><pre>"(f|c|m)at\.?" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> sat on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/DOc5Nu/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="2-8-é”šç‚¹"><a href="#2-8-é”šç‚¹" class="headerlink" title="2.8 é”šç‚¹"></a>2.8 é”šç‚¹</h2><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­, æƒ³è¦åŒ¹é…æŒ‡å®šå¼€å¤´æˆ–ç»“å°¾çš„å­—ç¬¦ä¸²å°±è¦ä½¿ç”¨åˆ°é”šç‚¹. <code>^</code> æŒ‡å®šå¼€å¤´, <code>$</code> æŒ‡å®šç»“å°¾.</p><h3 id="2-8-1-å·"><a href="#2-8-1-å·" class="headerlink" title="2.8.1 ^ å·"></a>2.8.1 <code>^</code> å·</h3><p><code>^</code> ç”¨æ¥æ£€æŸ¥åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨æ‰€åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´.</p><p>ä¾‹å¦‚, åœ¨ <code>abc</code> ä¸­ä½¿ç”¨è¡¨è¾¾å¼ <code>^a</code> ä¼šå¾—åˆ°ç»“æœ <code>a</code>. ä½†å¦‚æœä½¿ç”¨ <code>^b</code> å°†åŒ¹é…ä¸åˆ°ä»»ä½•ç»“æœ. å› ä¸ºåœ¨å­—ç¬¦ä¸² <code>abc</code> ä¸­å¹¶ä¸æ˜¯ä»¥ <code>b</code> å¼€å¤´.</p><p>ä¾‹å¦‚, <code>^(T|t)he</code> åŒ¹é…ä»¥ <code>The</code> æˆ– <code>the</code> å¼€å¤´çš„å­—ç¬¦ä¸².</p><pre>"(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/5ljjgB/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"^(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.</pre><p><a href="https://regex101.com/r/jXrKne/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="2-8-2-å·"><a href="#2-8-2-å·" class="headerlink" title="2.8.2 `###  å·"></a>2.8.2 `###  å·</h3><p>åŒç†äº <code>^</code> å·, <code>$</code> å·ç”¨æ¥åŒ¹é…å­—ç¬¦æ˜¯å¦æ˜¯æœ€åä¸€ä¸ª.</p><p>ä¾‹å¦‚, <code>(at\.)$</code> åŒ¹é…ä»¥ <code>at.</code> ç»“å°¾çš„å­—ç¬¦ä¸².</p><pre>"(at\.)" => The fat c<a href="#learn-regex"><strong>at.</strong></a> s<a href="#learn-regex"><strong>at.</strong></a> on the m<a href="#learn-regex"><strong>at.</strong></a></pre><p><a href="https://regex101.com/r/y4Au4D/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"(at\.)$" => The fat cat. sat. on the m<a href="#learn-regex"><strong>at.</strong></a></pre><p><a href="https://regex101.com/r/t0AkOd/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="3-ç®€å†™å­—ç¬¦é›†"><a href="#3-ç®€å†™å­—ç¬¦é›†" class="headerlink" title="3. ç®€å†™å­—ç¬¦é›†"></a>3. ç®€å†™å­—ç¬¦é›†</h2><p>æ­£åˆ™è¡¨è¾¾å¼æä¾›ä¸€äº›å¸¸ç”¨çš„å­—ç¬¦é›†ç®€å†™. å¦‚ä¸‹:</p><table><thead><tr><th style="text-align:center">ç®€å†™</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td>é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦</td></tr><tr><td style="text-align:center">\w</td><td>åŒ¹é…æ‰€æœ‰å­—æ¯æ•°å­—, ç­‰åŒäº <code>[a-zA-Z0-9_]</code></td></tr><tr><td style="text-align:center">\W</td><td>åŒ¹é…æ‰€æœ‰éå­—æ¯æ•°å­—, å³ç¬¦å·, ç­‰åŒäº: <code>[^\w]</code></td></tr><tr><td style="text-align:center">\d</td><td>åŒ¹é…æ•°å­—: <code>[0-9]</code></td></tr><tr><td style="text-align:center">\D</td><td>åŒ¹é…éæ•°å­—: <code>[^\d]</code></td></tr><tr><td style="text-align:center">\s</td><td>åŒ¹é…æ‰€æœ‰ç©ºæ ¼å­—ç¬¦, ç­‰åŒäº: <code>[\t\n\f\r\p{Z}]</code></td></tr><tr><td style="text-align:center">\S</td><td>åŒ¹é…æ‰€æœ‰éç©ºæ ¼å­—ç¬¦: <code>[^\s]</code></td></tr><tr><td style="text-align:center">\f</td><td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦</td></tr><tr><td style="text-align:center">\n</td><td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦</td></tr><tr><td style="text-align:center">\r</td><td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦</td></tr><tr><td style="text-align:center">\t</td><td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td></tr><tr><td style="text-align:center">\v</td><td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦</td></tr><tr><td style="text-align:center">\p</td><td>åŒ¹é… CR/LF (ç­‰åŒäº <code>\r\n</code>)ï¼Œç”¨æ¥åŒ¹é… DOS è¡Œç»ˆæ­¢ç¬¦</td></tr></tbody></table><h2 id="4-é›¶å®½åº¦æ–­è¨€-å‰åé¢„æŸ¥"><a href="#4-é›¶å®½åº¦æ–­è¨€-å‰åé¢„æŸ¥" class="headerlink" title="4. é›¶å®½åº¦æ–­è¨€(å‰åé¢„æŸ¥)"></a>4. é›¶å®½åº¦æ–­è¨€(å‰åé¢„æŸ¥)</h2><p>å…ˆè¡Œæ–­è¨€å’Œåå‘æ–­è¨€éƒ½å±äº<strong>éæ•è·ç°‡</strong>(ä¸æ•è·æ–‡æœ¬ ï¼Œä¹Ÿä¸é’ˆå¯¹ç»„åˆè®¡è¿›è¡Œè®¡æ•°).<br>å…ˆè¡Œæ–­è¨€ç”¨äºåˆ¤æ–­æ‰€åŒ¹é…çš„æ ¼å¼æ˜¯å¦åœ¨å¦ä¸€ä¸ªç¡®å®šçš„æ ¼å¼ä¹‹å‰, åŒ¹é…ç»“æœä¸åŒ…å«è¯¥ç¡®å®šæ ¼å¼(ä»…ä½œä¸ºçº¦æŸ).</p><p>ä¾‹å¦‚, æˆ‘ä»¬æƒ³è¦è·å¾—æ‰€æœ‰è·Ÿåœ¨ <code>$</code> ç¬¦å·åçš„æ•°å­—, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åå‘æ–­è¨€ <code>(?&lt;=\$)[0-9\.]*</code>.<br>è¿™ä¸ªè¡¨è¾¾å¼åŒ¹é… <code>$</code> å¼€å¤´, ä¹‹åè·Ÿç€ <code>0,1,2,3,4,5,6,7,8,9,.</code> è¿™äº›å­—ç¬¦å¯ä»¥å‡ºç°å¤§äºç­‰äº 0 æ¬¡.</p><p>é›¶å®½åº¦æ–­è¨€å¦‚ä¸‹:</p><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">?=</td><td>æ­£å…ˆè¡Œæ–­è¨€-å­˜åœ¨</td></tr><tr><td style="text-align:center">?!</td><td>è´Ÿå…ˆè¡Œæ–­è¨€-æ’é™¤</td></tr><tr><td style="text-align:center">?&lt;=</td><td>æ­£åå‘æ–­è¨€-å­˜åœ¨</td></tr><tr><td style="text-align:center">?&lt;!</td><td>è´Ÿåå‘æ–­è¨€-æ’é™¤</td></tr></tbody></table><h3 id="4-1-æ­£å…ˆè¡Œæ–­è¨€"><a href="#4-1-æ­£å…ˆè¡Œæ–­è¨€" class="headerlink" title="4.1 ?=... æ­£å…ˆè¡Œæ–­è¨€"></a>4.1 <code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€</h3><p><code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€, è¡¨ç¤ºç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼ä¹‹åå¿…é¡»è·Ÿç€ <code>?=...</code>å®šä¹‰çš„è¡¨è¾¾å¼.</p><p>è¿”å›ç»“æœåªåŒ…å«æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼.<br>å®šä¹‰ä¸€ä¸ªæ­£å…ˆè¡Œæ–­è¨€è¦ä½¿ç”¨ <code>()</code>. åœ¨æ‹¬å·å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé—®å·å’Œç­‰å·: <code>(?=...)</code>. </p><p>æ­£å…ˆè¡Œæ–­è¨€çš„å†…å®¹å†™åœ¨æ‹¬å·ä¸­çš„ç­‰å·åé¢.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(T|t)he(?=\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>, åœ¨æ‹¬å·ä¸­æˆ‘ä»¬åˆå®šä¹‰äº†æ­£å…ˆè¡Œæ–­è¨€ <code>(?=\sfat)</code> ,å³ <code>The</code> å’Œ <code>the</code> åé¢ç´§è·Ÿç€ <code>(ç©ºæ ¼)fat</code>.</p><pre>"(T|t)he(?=\sfat)" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/IDDARt/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="4-2-è´Ÿå…ˆè¡Œæ–­è¨€"><a href="#4-2-è´Ÿå…ˆè¡Œæ–­è¨€" class="headerlink" title="4.2 ?!... è´Ÿå…ˆè¡Œæ–­è¨€"></a>4.2 <code>?!...</code> è´Ÿå…ˆè¡Œæ–­è¨€</h3><p>è´Ÿå…ˆè¡Œæ–­è¨€ <code>?!</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶åä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼.<br><code>æ­£å…ˆè¡Œæ–­è¨€</code>  å®šä¹‰å’Œ <code>è´Ÿå…ˆè¡Œæ–­è¨€</code> ä¸€æ ·, åŒºåˆ«å°±æ˜¯ <code>=</code> æ›¿æ¢æˆ <code>!</code> ä¹Ÿå°±æ˜¯ <code>(?!...)</code>.</p><p>è¡¨è¾¾å¼ <code>(T|t)he(?!\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>, ä¸”å…¶åä¸è·Ÿç€ <code>(ç©ºæ ¼)fat</code>.</p><pre>"(T|t)he(?!\sfat)" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/V32Npg/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="4-3-lt-æ­£åå‘æ–­è¨€"><a href="#4-3-lt-æ­£åå‘æ–­è¨€" class="headerlink" title="4.3 ?&lt;= ... æ­£åå‘æ–­è¨€"></a>4.3 <code>?&lt;= ...</code> æ­£åå‘æ–­è¨€</h3><p>æ­£åå‘æ–­è¨€ è®°ä½œ<code>(?&lt;=...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶å‰è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(?&lt;=(T|t)he\s)(fat|mat)</code> åŒ¹é… <code>fat</code> å’Œ <code>mat</code>, ä¸”å…¶å‰è·Ÿç€ <code>The</code> æˆ– <code>the</code>.</p><pre>"(?<=(t|t)he\s)(fat|mat)" ==""> The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the <a href="#learn-regex"><strong>mat</strong></a>.</=(t|t)he\s)(fat|mat)"></pre><p><a href="https://regex101.com/r/avH165/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="4-4-lt-è´Ÿåå‘æ–­è¨€"><a href="#4-4-lt-è´Ÿåå‘æ–­è¨€" class="headerlink" title="4.4 ?&lt;!... è´Ÿåå‘æ–­è¨€"></a>4.4 <code>?&lt;!...</code> è´Ÿåå‘æ–­è¨€</h3><p>è´Ÿåå‘æ–­è¨€ è®°ä½œ <code>(?&lt;!...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶å‰ä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(?&lt;!(T|t)he\s)(cat)</code> åŒ¹é… <code>cat</code>, ä¸”å…¶å‰ä¸è·Ÿç€ <code>The</code> æˆ– <code>the</code>.</p><pre>"(?&lt;!(T|t)he\s)(cat)" => The cat sat on <a href="#learn-regex"><strong>cat</strong></a>.</pre><p><a href="https://regex101.com/r/8Efx5G/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="5-æ ‡å¿—"><a href="#5-æ ‡å¿—" class="headerlink" title="5. æ ‡å¿—"></a>5. æ ‡å¿—</h2><p>æ ‡å¿—ä¹Ÿå«æ¨¡å¼ä¿®æ­£ç¬¦, å› ä¸ºå®ƒå¯ä»¥ç”¨æ¥ä¿®æ”¹è¡¨è¾¾å¼çš„æœç´¢ç»“æœ.<br>è¿™äº›æ ‡å¿—å¯ä»¥ä»»æ„çš„ç»„åˆä½¿ç”¨, å®ƒä¹Ÿæ˜¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†.</p><table><thead><tr><th style="text-align:center">æ ‡å¿—</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>å¿½ç•¥å¤§å°å†™.</td></tr><tr><td style="text-align:center">g</td><td>å…¨å±€æœç´¢.</td></tr><tr><td style="text-align:center">m</td><td>å¤šè¡Œçš„: é”šç‚¹å…ƒå­—ç¬¦ <code>^</code> <code>$</code> å·¥ä½œèŒƒå›´åœ¨æ¯è¡Œçš„èµ·å§‹.</td></tr></tbody></table><h3 id="5-1-å¿½ç•¥å¤§å°å†™-Case-Insensitive"><a href="#5-1-å¿½ç•¥å¤§å°å†™-Case-Insensitive" class="headerlink" title="5.1 å¿½ç•¥å¤§å°å†™ (Case Insensitive)"></a>5.1 å¿½ç•¥å¤§å°å†™ (Case Insensitive)</h3><p>ä¿®é¥°è¯­ <code>i</code> ç”¨äºå¿½ç•¥å¤§å°å†™.<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>/The/gi</code> è¡¨ç¤ºåœ¨å…¨å±€æœç´¢ <code>The</code>, åœ¨åé¢çš„ <code>i</code> å°†å…¶æ¡ä»¶ä¿®æ”¹ä¸ºå¿½ç•¥å¤§å°å†™, åˆ™å˜æˆæœç´¢ <code>the</code> å’Œ <code>The</code>, <code>g</code> è¡¨ç¤ºå…¨å±€æœç´¢.</p><pre>"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/dpQyf9/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"/The/gi" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/ahfiuh/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="5-2-å…¨å±€æœç´¢-Global-search"><a href="#5-2-å…¨å±€æœç´¢-Global-search" class="headerlink" title="5.2 å…¨å±€æœç´¢ (Global search)"></a>5.2 å…¨å±€æœç´¢ (Global search)</h3><p>ä¿®é¥°ç¬¦ <code>g</code> å¸¸ç”¨äºæ‰§è¡Œä¸€ä¸ªå…¨å±€æœç´¢åŒ¹é…, å³(ä¸ä»…ä»…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„, è€Œæ˜¯è¿”å›å…¨éƒ¨).<br>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>/.(at)/g</code> è¡¨ç¤ºæœç´¢ ä»»æ„å­—ç¬¦(é™¤äº†æ¢è¡Œ) + <code>at</code>, å¹¶è¿”å›å…¨éƒ¨ç»“æœ.</p><pre>"/.(at)/" => The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the mat.</pre><p><a href="https://regex101.com/r/jnk6gM/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"/.(at)/g" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> <a href="#learn-regex"><strong>sat</strong></a> on the <a href="#learn-regex"><strong>mat</strong></a>.</pre><p><a href="https://regex101.com/r/dO1nef/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="5-3-å¤šè¡Œä¿®é¥°ç¬¦-Multiline"><a href="#5-3-å¤šè¡Œä¿®é¥°ç¬¦-Multiline" class="headerlink" title="5.3 å¤šè¡Œä¿®é¥°ç¬¦ (Multiline)"></a>5.3 å¤šè¡Œä¿®é¥°ç¬¦ (Multiline)</h3><p>å¤šè¡Œä¿®é¥°ç¬¦ <code>m</code> å¸¸ç”¨è¯­æ‰§è¡Œä¸€ä¸ªå¤šè¡ŒåŒ¹é….</p><p>åƒä¹‹å‰ä»‹ç»çš„ <code>(^,$)</code> ç”¨äºæ£€æŸ¥æ ¼å¼æ˜¯å¦æ˜¯åœ¨å¾…æ£€æµ‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾. ä½†æˆ‘ä»¬å¦‚æœæƒ³è¦å®ƒåœ¨æ¯è¡Œçš„å¼€å¤´å’Œç»“å°¾ç”Ÿæ•ˆ, æˆ‘ä»¬éœ€è¦ç”¨åˆ°å¤šè¡Œä¿®é¥°ç¬¦ <code>m</code>.</p><p>ä¾‹å¦‚, è¡¨è¾¾å¼ <code>/at(.)?$/gm</code> è¡¨ç¤ºå°å†™å­—ç¬¦ <code>a</code> åè·Ÿå°å†™å­—ç¬¦ <code>t</code> , æœ«å°¾å¯é€‰é™¤æ¢è¡Œç¬¦å¤–ä»»æ„å­—ç¬¦. æ ¹æ® <code>m</code> ä¿®é¥°ç¬¦, ç°åœ¨è¡¨è¾¾å¼åŒ¹é…æ¯è¡Œçš„ç»“å°¾.</p><pre>"/.at(.)?$/" => The fat                cat sat                on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/hoGMkP/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"/.at(.)?$/gm" => The <a href="#learn-regex"><strong>fat</strong></a>                  cat <a href="#learn-regex"><strong>sat</strong></a>                  on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/E88WE2/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h3 id="6-è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…-Greedy-vs-lazy-matching"><a href="#6-è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…-Greedy-vs-lazy-matching" class="headerlink" title="6. è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é… (Greedy vs lazy matching)"></a>6. è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é… (Greedy vs lazy matching)</h3><p>æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤é‡‡ç”¨è´ªå©ªåŒ¹é…æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ„å‘³ç€ä¼šåŒ¹é…å°½å¯èƒ½é•¿çš„å­ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>?</code> å°†è´ªå©ªåŒ¹é…æ¨¡å¼è½¬åŒ–ä¸ºæƒ°æ€§åŒ¹é…æ¨¡å¼ã€‚</p><pre>"/(.*at)/" => <a href="#learn-regex"><strong>The fat cat sat on the mat</strong></a>. </pre><p><a href="https://regex101.com/r/AyAdgJ/1" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><pre>"/(.*?at)/" => <a href="#learn-regex"><strong>The fat</strong></a> cat sat on the mat. </pre><p><a href="https://regex101.com/r/AyAdgJ/2" target="_blank" rel="noopener">åœ¨çº¿ç»ƒä¹ </a></p><h2 id="è´¡çŒ®"><a href="#è´¡çŒ®" class="headerlink" title="è´¡çŒ®"></a>è´¡çŒ®</h2><ul><li>æŠ¥å‘Šé—®é¢˜</li><li>å¼€æ”¾åˆå¹¶è¯·æ±‚</li><li>ä¼ æ’­æ­¤æ–‡æ¡£</li><li>ç›´æ¥å’Œæˆ‘è”ç³» <a href="mailto:ziishaned@gmail.com" target="_blank" rel="noopener">ziishaned@gmail.com</a> æˆ– <a href="https://twitter.com/ziishaned" target="_blank" rel="noopener"><img src="https://img.shields.io/twitter/url/https/twitter.com/ziishaned.svg?style=social&amp;label=Follow%20%40ziishaned" alt="Twitter URL"></a></li></ul><h2 id="è®¸å¯è¯"><a href="#è®¸å¯è¯" class="headerlink" title="è®¸å¯è¯"></a>è®¸å¯è¯</h2><p>MIT &copy; <a href="https://twitter.com/ziishaned" target="_blank" rel="noopener">Zeeshan Ahmad</a></p>]]></content>
      
      <categories>
          
          <category> spring boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reactjs learn</title>
      <link href="/2019/03/29/reactjs%20learn/"/>
      <url>/2019/03/29/reactjs%20learn/</url>
      <content type="html"><![CDATA[<blockquote><p>Like any unfamiliar technology, React does have a learning curve. With practice and some patience, you <em>will</em> get the hang of it.</p></blockquote><ul><li>React also streamlines how data is stored and handled, using <strong>state</strong> and <strong>props</strong>.</li></ul><h3 id="create-react-app"><a href="#create-react-app" class="headerlink" title="create react app"></a>create react app</h3><ul><li><code>npm install -g create-react-app</code></li><li><code>npx create-react-app my-app</code> or <code>npm init react-app my-app</code></li></ul><h2 id="JSX-JavaScript-XML"><a href="#JSX-JavaScript-XML" class="headerlink" title="JSX: JavaScript + XML"></a>JSX: JavaScript + XML</h2><blockquote><p>Babel compiles JSX down to <code>React.createElement()</code> calls.</p></blockquote><p>jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> heading = <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">"site-heading"</span>&gt;</span>Hello, React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>non-jsx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const heading = React.createElement(&apos;h1&apos;, &#123; className: &apos;site-heading&apos; &#125;, &apos;Hello, React!&apos;)</span><br></pre></td></tr></table></figure><p>the feature of jsx:</p><ul><li><code>className</code> is used instead of <code>class</code> for adding CSS classes, as <code>class</code> is a reserved keyword in JavaScript.</li><li>Properties and methods in JSX are camelCase - <code>onclick</code> will become <code>onClick</code>.</li><li>Self-closing tags <em>must</em> end in a slash - e.g. <code>&lt;img /&gt;</code></li></ul><h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><blockquote><p>Whether you declare a component <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components" target="_blank" rel="noopener">as a function or a class</a>, it must never modify its own props. </p></blockquote><h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><p>The simplest way to define a component is to write a JavaScript function:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Class-Components"><a href="#Class-Components" class="headerlink" title="Class Components"></a>Class Components</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;table&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;Name&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;th&gt;Job&lt;/</span>th&gt;</span><br><span class="line">          &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;Charlie&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;td&gt;Janitor&lt;/</span>td&gt;</span><br><span class="line">          &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>tbody&gt;</span><br><span class="line">      &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Table</span></span><br></pre></td></tr></table></figure><h3 id="Simple-Components"><a href="#Simple-Components" class="headerlink" title="Simple Components"></a>Simple Components</h3><blockquote><p>The other type of component in React is the <strong>simple component</strong>, which is a function. This component doesnâ€™t use the <code>class</code> keyword. Letâ€™s take our <code>Table</code> and make two simple components for it - a table header, and a table body.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TableHeader = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;Name&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">        &lt;th&gt;Job&lt;/</span>th&gt;</span><br><span class="line">      &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>thead&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TableBody = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;Charlie&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">        &lt;td&gt;Janitor&lt;/</span>td&gt;</span><br><span class="line">      &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>tbody&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;table&gt;</span><br><span class="line">        &lt;TableHeader /&gt;</span><br><span class="line">        &lt;TableBody /&gt;</span><br><span class="line">      &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><hr><p>Everything should appear as it did before. As you can see, components can be nested in other components, and simple and class components can be mixed.</p><p><strong>A class component must include <code>render()</code>, and the <code>return</code> can only return one parent element.</strong></p><h3 id="Converting-a-Function-to-a-Class"><a href="#Converting-a-Function-to-a-Class" class="headerlink" title="Converting a Function to a Class"></a>Converting a Function to a Class</h3><p>convert a function component to a class in five steps:</p><ol><li>Create an <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="noopener">ES6 class</a>, with the same name, that extends <code>React.Component</code>.</li><li>Add a single empty method to it called <code>render()</code>.</li><li>Move the body of the function into the <code>render()</code> method.</li><li>Replace <code>props</code> with <code>this.props</code> in the <code>render()</code> body.</li><li>Delete the remaining empty function declaration.</li></ol><h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><blockquote><p>Props are an effective way to pass existing data to a React component, however the component cannot change the props - theyâ€™re read-only. </p></blockquote><ul><li><em>props</em> are a way of passing data from parent to child.</li></ul><h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>State is similar to props, but it is private and fully controlled by the component.</p><p>State is reserved only for interactivity, that is, data that changes over time. </p><blockquote><p>You can think of state as any data that should be saved and modified without necessarily being added to a database - for example, adding and removing items from a shopping cart before confirming your purchase.</p></blockquote><ul><li><p>You must use <code>this.setState()</code> to modify an array. Simply applying a new value to <code>this.state.property</code> will not work.</p><p> ie.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="keyword">this</span>.state.comment = <span class="string">'Hello'</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;<span class="attr">comment</span>: <span class="string">'Hello'</span>&#125;);</span><br></pre></td></tr></table></figure></li></ul><p>tips:</p><p>Because <code>this.props</code> and <code>this.state</code> may be updated asynchronously, you should not rely on their values for calculating the next state.</p><p>ie.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">  counter: <span class="keyword">this</span>.state.counter + <span class="keyword">this</span>.props.increment,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>use a second form of <code>setState()</code> that accepts a function rather than an object. That function will receive the previous state as the first argument, and the props at the time the update is applied as the second argument:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  counter: state.counter + props.increment</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h3 id="The-Data-Flows-Down"><a href="#The-Data-Flows-Down" class="headerlink" title="The Data Flows Down"></a>The Data Flows Down</h3><blockquote><p>If you imagine a component tree as a waterfall of props, each componentâ€™s state is like an additional water source that joins it at an arbitrary point but also flows down.</p></blockquote><p>Neither parent nor child components can know if a certain component is stateful or stateless, and they shouldnâ€™t care whether it is defined as a function or a class.</p><p>This is why state is often called local or encapsulated. It is not accessible to any component other than the one that owns and sets it.</p><p>This is commonly called a â€œtop-downâ€ or â€œunidirectionalâ€ data flow. Any state is always owned by some specific component, and any data or UI derived from that state can only affect components â€œbelowâ€ them in the tree.</p><h2 id="Lifecycle-methods"><a href="#Lifecycle-methods" class="headerlink" title="Lifecycle methods"></a>Lifecycle methods</h2><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><blockquote><p>The <code>componentDidMount()</code> method runs after the component output has been rendered to the DOM. </p></blockquote><h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerID = setInterval(</span><br><span class="line">      () =&gt; <span class="keyword">this</span>.tick(),</span><br><span class="line">      <span class="number">1000</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tick() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      date: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="keyword">this</span>.state.date.toLocaleTimeString()&#125;.&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Clock /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Letâ€™s quickly recap whatâ€™s going on and the order in which the methods are called:</p><ol><li>When <code>&lt;Clock /&gt;</code> is passed to <code>ReactDOM.render()</code>, React calls the constructor of the <code>Clock</code>component. Since <code>Clock</code> needs to display the current time, it initializes <code>this.state</code> with an object including the current time. We will later update this state.</li><li>React then calls the <code>Clock</code> componentâ€™s <code>render()</code> method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the <code>Clock</code>â€™s render output.</li><li>When the <code>Clock</code> output is inserted in the DOM, React calls the <code>componentDidMount()</code> lifecycle method. Inside it, the <code>Clock</code> component asks the browser to set up a timer to call the componentâ€™s <code>tick()</code> method once a second.</li><li>Every second the browser calls the <code>tick()</code> method. Inside it, the <code>Clock</code> component schedules a UI update by calling <code>setState()</code> with an object containing the current time. Thanks to the <code>setState()</code> call, React knows the state has changed, and calls the <code>render()</code> method again to learn what should be on the screen. This time, <code>this.state.date</code> in the <code>render()</code> method will be different, and so the render output will include the updated time. React updates the DOM accordingly.</li><li>If the <code>Clock</code> component is ever removed from the DOM, React calls the <code>componentWillUnmount()</code> lifecycle method so the timer is stopped.</li></ol><p>æ€»ç»“ï¼šconstructor-&gt;render()-&gt;componentDidMount()</p><p>stateæ”¹å˜-&gt;render()</p><h3 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps"></a>componentWillReceiveProps</h3><p>componentWillReceivePropsåœ¨åˆå§‹åŒ–renderçš„æ—¶å€™ä¸ä¼šæ‰§è¡Œï¼Œå®ƒä¼šåœ¨Componentæ¥å—åˆ°æ–°çš„çŠ¶æ€(Props)æ—¶è¢«è§¦å‘ï¼Œä¸€èˆ¬ç”¨äºçˆ¶ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><p>åœ¨componentWillReceivePropsä¸­æƒ³ä½œä»»ä½•å˜æ›´æœ€å¥½éƒ½å°†ä¸¤ä¸ªçŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå‡å¦‚çŠ¶æ€æœ‰å¼‚æ‰æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚ä¸ç„¶å®¹æ˜“é€ æˆç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ï¼Œå¹¶ä¸”è¿™äº›æ¸²æŸ“éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><h2 id="Conditional-Rendering"><a href="#Conditional-Rendering" class="headerlink" title="Conditional Rendering"></a>Conditional Rendering</h2><blockquote><p>Also remember that whenever conditions become too complex, it might be a good time to <a href="https://reactjs.org/docs/components-and-props.html#extracting-components" target="_blank" rel="noopener">extract a component</a>.</p></blockquote><ul><li>Returning <code>null</code> from a componentâ€™s <code>render</code> method does not affect the firing of the componentâ€™s lifecycle methods. For instance <code>componentDidUpdate</code> will still be called.</li></ul><h2 id="Lists-and-Keys"><a href="#Lists-and-Keys" class="headerlink" title="Lists and Keys"></a>Lists and Keys</h2><blockquote><p>Keep in mind that if the <code>map()</code> body is too nested, it might be a good time to <a href="https://reactjs.org/docs/components-and-props.html#extracting-components" target="_blank" rel="noopener">extract a component</a>.</p></blockquote><h2 id="Forms"><a href="#Forms" class="headerlink" title="Forms"></a>Forms</h2><h2 id="Lifting-State-Up"><a href="#Lifting-State-Up" class="headerlink" title="Lifting State Up"></a>Lifting State Up</h2><h2 id="Composition-vs-Inheritance"><a href="#Composition-vs-Inheritance" class="headerlink" title="Composition vs Inheritance"></a>Composition vs Inheritance</h2><ul><li>Remember that components may accept arbitrary props, including primitive values, React elements, or functions.</li></ul><h2 id="Thinking-in-React"><a href="#Thinking-in-React" class="headerlink" title="Thinking in React"></a>Thinking in React</h2><ul><li>You can build top-down or bottom-up. That is, you can either start with building the components higher up in the hierarchy or with the ones lower in it. In simpler examples, itâ€™s usually easier to go top-down, and on larger projects, itâ€™s easier to go bottom-up and write tests as you build.</li><li><strong>Remember</strong>: React is all about one-way data flow down the component hierarchy. </li></ul>]]></content>
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript learn</title>
      <link href="/2019/03/29/javascript%20learn/"/>
      <url>/2019/03/29/javascript%20learn/</url>
      <content type="html"><![CDATA[<h3 id="types"><a href="#types" class="headerlink" title="types"></a>types</h3><ul><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" rel="noopener"><code>Number</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener"><code>String</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank" rel="noopener"><code>Boolean</code></a></p><blockquote><p>false, 0, empty strings (â€œâ€), NaN, null, and undefined all become false.</p></blockquote></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener"><code>Symbol</code></a> (new in ES2015)</p></li><li><p><code>Object</code></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener"><code>Function</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener"><code>Array</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener"><code>Date</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener"><code>RegExp</code></a></li></ul></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener"><code>null</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener"><code>undefined</code></a></p><blockquote><p>declare a variable without assigning a value to it. If you do this, the variableâ€™s type is <code>undefined</code>. <code>undefined</code> is actually a constant.</p></blockquote></li></ul><h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><ul><li><p>let</p><blockquote><p><strong>let</strong> allows you to declare block-level variables. The declared variable is available from the <em>block</em> it is enclosed in.</p></blockquote></li><li><p>const</p><blockquote><p><strong>const</strong> allows you to declare variables whose values are never intended to change. The variable is available from the <em>block</em> it is declared in.</p></blockquote></li><li><p>var</p><blockquote><p>A variable declared with the <strong>var</strong> keyword is available from the written out <em>function</em> (as opposed to an anonymous function) it is declared in.</p></blockquote></li></ul><h3 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h3><blockquote><p><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> , <code>%</code> ,<code>=</code>,<code>+=</code> and <code>-=</code></p></blockquote><h3 id="Control-structures"><a href="#Control-structures" class="headerlink" title="Control structures"></a>Control structures</h3><ul><li><p>Conditional statements are supported by <code>if</code> and <code>else</code></p></li><li><p><code>while</code> loops and <code>do-while</code> loops.</p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for" target="_blank" rel="noopener"><code>for</code> loop</a> is the same as that in C and Java</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// Will execute 5 times</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> array) &#123;</span><br><span class="line">  <span class="comment">// do something with value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="comment">// do something with object property</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>&amp;&amp;</code> and <code>||</code> operators</p></li><li><p>a ternary operator for conditional expressions:</p><p><code>var allowed = (age &gt; 18) ? &#39;yes&#39; : &#39;no&#39;;</code></p></li><li><p><code>switch</code> statement </p></li></ul><h3 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h3><blockquote><p>objects can be thought of as simple collections of name-value pairs, like HashMaps in Java.</p><p>The â€œnameâ€ part is a JavaScript string, while the value can be any JavaScript value â€” including more objects.</p></blockquote><ul><li><p>two basic ways to create an empty object:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">'dog'</span>;</span><br><span class="line">a[<span class="number">1</span>] = <span class="string">'cat'</span>;</span><br><span class="line">a[<span class="number">2</span>] = <span class="string">'hen'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'hen'</span>];</span><br><span class="line"></span><br><span class="line">a.length; <span class="comment">// 3</span></span><br><span class="line">b.length;<span class="comment">//3</span></span><br></pre></td></tr></table></figure><ul><li><p>terating over an array</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'hen'</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Do something with currentValue or array[index]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><blockquote><p>A JavaScript function can take 0 or more named parameters. The function body can contain as many statements as you like and can declare its own variables which are local to that function. The <code>return</code> statement can be used to return a value at any time, terminating the function. If no return statement is used (or an empty return with no value), JavaScript returns <code>undefined</code>.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">avg</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> args) &#123;</span><br><span class="line">    sum += value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum / args.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//above defined is equivalent to below</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> avg = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="built_in">arguments</span>.length; i &lt; j; i++) &#123;</span><br><span class="line">    sum += <span class="built_in">arguments</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum / <span class="built_in">arguments</span>.length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">avg(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// 3.5</span></span><br></pre></td></tr></table></figure><h3 id="Custom-objects"><a href="#Custom-objects" class="headerlink" title="Custom objects"></a>Custom objects</h3><blockquote><p>JavaScript uses functions as classes. </p></blockquote><ul><li><p>the way to attach a function to an object.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makePerson</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    first: first,</span><br><span class="line">    last: last,</span><br><span class="line">    fullName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.first + <span class="string">' '</span> + <span class="keyword">this</span>.last;</span><br><span class="line">    &#125;,</span><br><span class="line">    fullNameReversed: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.last + <span class="string">', '</span> + <span class="keyword">this</span>.first;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = makePerson(<span class="string">'Simon'</span>, <span class="string">'Willison'</span>);</span><br><span class="line">s.fullName(); <span class="comment">// "Simon Willison"</span></span><br><span class="line">s.fullNameReversed(); <span class="comment">// "Willison, Simon"</span></span><br></pre></td></tr></table></figure><p>good:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.first = first;</span><br><span class="line">  <span class="keyword">this</span>.last = last;</span><br><span class="line">  <span class="keyword">this</span>.fullName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.first + <span class="string">' '</span> + <span class="keyword">this</span>.last;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.fullNameReversed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.last + <span class="string">', '</span> + <span class="keyword">this</span>.first;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Person(<span class="string">'Simon'</span>, <span class="string">'Willison'</span>);</span><br></pre></td></tr></table></figure><p>better:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">personFullName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.first + <span class="string">' '</span> + <span class="keyword">this</span>.last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">personFullNameReversed</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.last + <span class="string">', '</span> + <span class="keyword">this</span>.first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.first = first;</span><br><span class="line">  <span class="keyword">this</span>.last = last;</span><br><span class="line">  <span class="keyword">this</span>.fullName = personFullName;</span><br><span class="line">  <span class="keyword">this</span>.fullNameReversed = personFullNameReversed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>best:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.first = first;</span><br><span class="line">  <span class="keyword">this</span>.last = last;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.fullName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.first + <span class="string">' '</span> + <span class="keyword">this</span>.last;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.fullNameReversed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.last + <span class="string">', '</span> + <span class="keyword">this</span>.first;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>this</code> refers to the current object. </p><blockquote><p>What that actually means is specified by the way in which you called that function.</p><p> If you called it using dot notation or bracket notation on an object, that object becomes <code>this</code>.</p><p> If dot notation wasnâ€™t used for the call, <code>this</code> refers to the global object.</p></blockquote></li><li><p><code>new</code> is strongly related to <code>this</code>.</p><blockquote><p>Functions that are designed to be called by <code>new</code> are called constructor functions. Common practice is to capitalize these functions as a reminder to call them with <code>new</code>.</p></blockquote></li><li><p><code>Person.prototype</code> is an object shared by all instances of <code>Person</code>.</p><blockquote><p><strong>prototype chain</strong>:any time you attempt to access a property of <code>Person</code> that isnâ€™t set, JavaScript will check <code>Person.prototype</code> to see if that property exists there instead. As a result, anything assigned to <code>Person.prototype</code> becomes available to all instances of that constructor via the <code>this</code> object.</p></blockquote><ul><li><p>JavaScript lets you modify somethingâ€™s prototype at any time in your program, which means you can add extra methods to existing objects at runtime:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Person(<span class="string">'Simon'</span>, <span class="string">'Willison'</span>);</span><br><span class="line">s.firstNameCaps(); <span class="comment">// TypeError on line 1: s.firstNameCaps is not a function</span></span><br><span class="line"></span><br><span class="line">Person.prototype.firstNameCaps = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.first.toUpperCase();</span><br><span class="line">&#125;;</span><br><span class="line">s.firstNameCaps(); <span class="comment">// "SIMON"</span></span><br></pre></td></tr></table></figure></li><li><p>the prototype forms part of a chain. The root of that chain is <code>Object.prototype</code>, whose methods include <code>toString()</code> â€” it is this method that is called when you try to represent an object as a string. </p></li></ul></li><li><p>The <strong>call()</strong> method calls a function with a given <code>this</code> value and arguments provided individually.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Product</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  Product.call(<span class="keyword">this</span>, name, price);</span><br><span class="line">  <span class="keyword">this</span>.category = <span class="string">'food'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Food(<span class="string">'cheese'</span>, <span class="number">5</span>).name);</span><br><span class="line"><span class="comment">// expected output: "cheese"</span></span><br></pre></td></tr></table></figure></li><li><p>The <strong>apply()</strong> method calls a function with a given <code>this</code> value, and <code>arguments</code> provided as an array (or an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#Working_with_array-like_objects" target="_blank" rel="noopener">array-like object</a>).</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, numbers);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(max);</span><br><span class="line"><span class="comment">// expected output: 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, numbers);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(min);</span><br><span class="line"><span class="comment">// expected output: 2</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="Inner-functions"><a href="#Inner-functions" class="headerlink" title="Inner functions"></a>Inner functions</h4><p>æ–¹æ³•æ˜¯å­˜å‚¨åœ¨å¯¹è±¡å±æ€§ä¸­çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parentFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">nestedFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">4</span>; <span class="comment">// parentFunc can't use this</span></span><br><span class="line">    <span class="keyword">return</span> a + b; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nestedFunc(); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = makeAdder(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> y = makeAdder(<span class="number">20</span>);</span><br><span class="line">x(<span class="number">6</span>); <span class="comment">// returns 11</span></span><br><span class="line">y(<span class="number">7</span>); <span class="comment">// returns 27</span></span><br></pre></td></tr></table></figure><blockquote><p>Scope objects form a chain called the scope chain, similar to the prototype chain used by JavaScriptâ€™s object system.</p></blockquote><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><p><strong>curly braces</strong></p><p>æ‹¬å·ï¼ˆï¼‰</p><p><strong>Spread syntax</strong></p><p>çœç•¥å·</p><ul><li>The spread syntax is simply three dots: <code>...</code></li><li>It allows an iterable to expand in places where 0+ arguments are expected.</li></ul><h4 id="asterisk"><a href="#asterisk" class="headerlink" title="asterisk"></a>asterisk</h4><p>æ˜Ÿå· *</p><h3 id="regular-expression"><a href="#regular-expression" class="headerlink" title="regular expression"></a>regular expression</h3><ul><li><p>æ ¡éªŒå«æœ‰ç©ºæ ¼</p><p><code>reg = /^((?! ).)*$/;</code></p></li><li><p>æ ¡éªŒåªæœ‰æ•°å­—ã€å­—æ¯å’Œä¸‹åˆ’çº¿</p><p><code>reg = /^[_0-9a-z]*$/;</code></p></li></ul><h3 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h3><p>å®šæ—¶è°ƒåº¦</p>]]></content>
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Algorithms + Data Structures = Programs</title>
      <link href="/2018/12/18/Algorithms%20+%20Data%20Structures%20=%20Programs/"/>
      <url>/2018/12/18/Algorithms%20+%20Data%20Structures%20=%20Programs/</url>
      <content type="html"><![CDATA[<h3 id="What-is-a-Data-Structure"><a href="#What-is-a-Data-Structure" class="headerlink" title="What is a Data Structure"></a>What is a Data Structure</h3><blockquote><p>a data structure is a container that stores data in a specific layout. </p></blockquote><h3 id="Why-do-we-need-Data-Structure"><a href="#Why-do-we-need-Data-Structure" class="headerlink" title="Why do we need Data Structure"></a>Why do we need Data Structure</h3><blockquote><p>As data structures are used to store data in an organized form, and since data is the most crucial entity in computer science.</p><p>Based on different scenarios, data needs to be stored in a specific format. We have a handful of data structures that cover our need to store data in different formats.</p></blockquote><h3 id="Commonly-used-Data-Structure"><a href="#Commonly-used-Data-Structure" class="headerlink" title="Commonly used Data Structure"></a>Commonly used Data Structure</h3><h4 id="1-Arrays"><a href="#1-Arrays" class="headerlink" title="1. Arrays"></a>1. Arrays</h4><blockquote><p>An array is the simplest and most widely used data structure. Other data structures like stacks and queues are derived from arrays.</p></blockquote><ul><li>the two types of arrays:<ul><li>One-dimensional arrays</li><li>Multi-dimensional arrays</li></ul></li><li>basic operations<ul><li>Inserts an element at given index</li><li>Getâ€Šâ€”â€ŠReturns the element at given index</li><li>Deleteâ€Šâ€”â€ŠDeletes an element at given index</li><li>Sizeâ€Šâ€”â€ŠGet the total number of elements in array</li></ul></li></ul><h4 id="2-Stacks"><a href="#2-Stacks" class="headerlink" title="2. Stacks"></a>2. Stacks</h4><blockquote><p>LIFO (Last In First Out)</p></blockquote><ul><li>basic operations<ul><li>Pushâ€Šâ€”â€ŠInserts an element at the top</li><li>Popâ€Šâ€”â€ŠReturns the top element after removing from the stack</li><li>isEmptyâ€Šâ€”â€ŠReturns true if the stack is empty</li><li>Topâ€Šâ€”â€ŠReturns the top element without removing from the stack</li></ul></li></ul><h4 id="3-Queues"><a href="#3-Queues" class="headerlink" title="3. Queues"></a>3. Queues</h4><blockquote><p>Similar to Stack, Queue is another linear data structure that stores the element in a sequential manner. The only significant difference between Stack and Queue is that instead of using the LIFO method, Queue implements the FIFO method, which is short for First in First Out.</p></blockquote><ul><li>basic operations<ul><li>Enqueue()â€Šâ€”â€ŠInserts element to the end of the queue</li><li>Dequeue()â€Šâ€”â€ŠRemoves an element from the start of the queue</li><li>isEmpty()â€Šâ€”â€ŠReturns true if queue is empty</li><li>Top()â€Šâ€”â€ŠReturns the first element of the queue</li></ul></li></ul><h4 id="4-Linked-List"><a href="#4-Linked-List" class="headerlink" title="4. Linked List"></a>4. Linked List</h4><blockquote><p>A linked list is like a chain of nodes, where each node contains information like data and a pointer to the succeeding node in the chain.</p></blockquote><ul><li>the types of linked lists<ul><li>Singly Linked List (Unidirectional)</li><li>Doubly Linked List (Bi-directional)</li></ul></li><li>basic operations<ul><li><em>InsertAtEnd</em>â€Šâ€”â€ŠInserts given element at the end of the linked list</li><li><em>InsertAtHead</em>â€Šâ€”â€ŠInserts given element at the start/head of the linked list</li><li><em>Delete</em>â€Šâ€”â€ŠDeletes given element from the linked list</li><li><em>DeleteAtHead</em>â€Šâ€”â€ŠDeletes first element of the linked list</li><li><em>Search</em>â€Šâ€”â€ŠReturns the given element from a linked list</li><li><em>isEmpty</em>â€Šâ€”â€ŠReturns true if the linked list is empty</li></ul></li></ul><h4 id="5-Graphs"><a href="#5-Graphs" class="headerlink" title="5. Graphs"></a>5. Graphs</h4><blockquote><p>A graph is a set of nodes that are connected to each other in the form of a network. Nodes are also called vertices. A <strong>pair(x,y)</strong> is called an <strong>edge*</strong>,<em> which indicates that vertex <strong>x</strong> is connected to vertex <strong>y</strong>. An edge may contain weight/cost, showing how much cost is required to traverse from vertex x to y</em>.*</p></blockquote><p><img src="https://i.imgur.com/9sHq0Ek.png" alt=""></p><ul><li>types of Graphs<ul><li>Undirected Graph</li><li>Directed Graph</li></ul></li></ul><h4 id="6-Trees"><a href="#6-Trees" class="headerlink" title="6. Trees"></a>6. Trees</h4><blockquote><p>A tree is a hierarchical data structure consisting of vertices (nodes) and edges that connect them. Trees are similar to graphs, but the key point that differentiates a tree from the graph is that a cycle cannot exist in a tree.</p></blockquote><p><img src="https://i.imgur.com/R6zwf9U.png" alt=""></p><ul><li><p>the types of trees</p><ul><li>N-ary Tree</li><li>Balanced Tree</li><li>Binary Tree</li><li>Binary Search Tree</li><li>AVL Tree</li><li>Red Black Tree</li><li>2â€“3 Tree</li></ul><blockquote><p>Out of the above, Binary Tree and Binary Search Tree are the most commonly used trees.</p></blockquote></li></ul><h4 id="7-Trie"><a href="#7-Trie" class="headerlink" title="7. Trie"></a>7. Trie</h4><blockquote><p>Trie, which is also known as â€œPrefix Treesâ€, is a tree-like data structure which proves to be quite efficient for solving problems related to strings. It provides fast retrieval, and is mostly used for searching words in a dictionary, providing auto suggestions in a search engine, and even for IP routing.</p></blockquote><h4 id="8-Hash-Table"><a href="#8-Hash-Table" class="headerlink" title="8. Hash Table"></a>8. Hash Table</h4><blockquote><p>Hashing is a process used to uniquely identify objects and store each object at some pre-calculated unique index called its â€œkey.â€</p><p>Hash tables are generally implemented using arrays.</p></blockquote><ul><li>The performance of hashing data structure depends upon these three factors:<ul><li>Hash Function</li><li>Size of the Hash Table</li><li>Collision Handling Method</li></ul></li></ul><p>Hereâ€™s an illustration of how the hash is mapped in an array. The index of this array is calculated through a Hash Function.</p><p><img src="https://i.imgur.com/fkxWuxr.png" alt=""></p><p>reference:</p><ul><li><a href="https://www.cnblogs.com/xdecode/p/9321848.html" target="_blank" rel="noopener">å›¾è§£Javaå¸¸ç”¨æ•°æ®ç»“æ„</a></li></ul>]]></content>
      
      <categories>
          
          <category> DSA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>rpc vs mq</title>
      <link href="/2018/12/08/rpc%20vs%20mq/"/>
      <url>/2018/12/08/rpc%20vs%20mq/</url>
      <content type="html"><![CDATA[<h3 id="ç³»ç»Ÿç»“æ„"><a href="#ç³»ç»Ÿç»“æ„" class="headerlink" title="ç³»ç»Ÿç»“æ„"></a>ç³»ç»Ÿç»“æ„</h3><ul><li><p>rpc</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Consumer =&gt; Provider</span><br><span class="line">Consumerè°ƒç”¨çš„Provideræä¾›çš„æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure><ul><li>åŒæ­¥è°ƒç”¨ï¼Œå¯¹äºè¦ç­‰å¾…è¿”å›ç»“æœ/å¤„ç†ç»“æœçš„åœºæ™¯ï¼ŒRPCæ˜¯å¯ä»¥éå¸¸è‡ªç„¶ç›´è§‰çš„ä½¿ç”¨æ–¹å¼ã€‚</li><li>ç”±äºç­‰å¾…ç»“æœï¼ŒConsumerï¼ˆClientï¼‰ä¼šæœ‰çº¿ç¨‹æ¶ˆè€—ã€‚</li><li>RPCä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œå¦‚æœä»¥å¼‚æ­¥RPCçš„æ–¹å¼ä½¿ç”¨ï¼ŒConsumerï¼ˆClientï¼‰çº¿ç¨‹æ¶ˆè€—å¯ä»¥å»æ‰ã€‚ä½†ä¸èƒ½åšåˆ°åƒæ¶ˆæ¯ä¸€æ ·æš‚å­˜æ¶ˆæ¯/è¯·æ±‚ï¼Œå‹åŠ›ä¼šç›´æ¥ä¼ å¯¼åˆ°æœåŠ¡Providerã€‚</li></ul></li><li><p>message queue</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Sender =&gt; Queue &lt;= Receiver</span><br><span class="line">Senderå‘é€æ¶ˆæ¯ç»™Queue;Receiverä»Queueæ‹¿åˆ°æ¶ˆæ¯æ¥å¤„ç†</span><br></pre></td></tr></table></figure><ul><li>Message QueueæŠŠè¯·æ±‚çš„å‹åŠ›ä¿å­˜ä¸€ä¸‹ï¼Œé€æ¸é‡Šæ”¾å‡ºæ¥ï¼Œè®©å¤„ç†è€…æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥æ¥å¤„ç†ã€‚</li><li>Message Queueå¼•å…¥ä¸€ä¸‹æ–°çš„ç»“ç‚¹ï¼Œè®©ç³»ç»Ÿçš„å¯é æ€§ä¼šå—Message Queueç»“ç‚¹çš„å½±å“ã€‚</li><li>Message Queueæ˜¯<strong>å¼‚æ­¥å•å‘</strong>çš„æ¶ˆæ¯ã€‚å‘é€æ¶ˆæ¯è®¾è®¡æˆæ˜¯<strong>ä¸éœ€è¦ç­‰å¾…</strong>æ¶ˆæ¯å¤„ç†çš„å®Œæˆã€‚</li></ul></li></ul><h3 id="è§è§£"><a href="#è§è§£" class="headerlink" title="è§è§£"></a>è§è§£</h3><ul><li>è¿™ä¸¤è€…å¯ä»¥æ‹¿æ¥æ¯”è¾ƒï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰å¹¶ä¸æ˜¯åŒä¸€ä¸ªå±‚é¢çš„é—®é¢˜ã€‚RPCæ˜¯åˆ†å¸ƒå¼æœåŠ¡ä¹‹é—´è°ƒç”¨çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ˜¯æˆ‘ä»¬åœ¨åšæ¶æ„è®¾è®¡å†³ç­–æ—¶åŒåˆ†å¸ƒå¼å¯¹è±¡ï¼ŒRESTç­‰å±‚é¢çš„ä¸œè¥¿æ¯”è¾ƒï¼Œå†³ç­–çš„ä¸€ä¸ªæ–¹æ¡ˆï¼ æ¶ˆæ¯ç³»ç»Ÿæ›´å¤šæ˜¯æˆ‘ä»¬ä¸ºäº†è§£å†³ç³»ç»Ÿä¹‹é—´çš„è§£è€¦ï¼Œä»¥åŠæ€§èƒ½é—®é¢˜ç­‰æ–¹é¢æ‰€è€ƒè™‘çš„æ–¹æ¡ˆã€‚</li></ul>]]></content>
      
      <categories>
          
          <category> a vs b </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>words fragment</title>
      <link href="/2018/08/28/words%20fragment/"/>
      <url>/2018/08/28/words%20fragment/</url>
      <content type="html"><![CDATA[<h3 id="è‹±æ–‡ç¢ç‰‡"><a href="#è‹±æ–‡ç¢ç‰‡" class="headerlink" title="è‹±æ–‡ç¢ç‰‡"></a>è‹±æ–‡ç¢ç‰‡</h3><ul><li>Life is measured by thought and action, not by time.</li><li>Books and friends should be few but good.</li><li>Donâ€™t give your past the power to define your future.</li><li>People will forget what you said, people will forget what you did, but people will never forget how you made them feel.</li><li>Success isnâ€™t about being the best. Itâ€™s about always getting better.</li><li>Be yourself. Everyone else is already taken.</li><li>Itâ€™s kind of fun to do the impossible.</li><li>â€œSimplicity is the ultimate sophistication.â€Leonardo da Vinci</li><li>Build a dream and the dream will build you.</li><li>Always make a total effort, even when the odds are against you.</li><li>You can, you should, and if youâ€™re brave enough to start, you will.</li><li>Never give up, for that is just the place and time that the tide will turn.</li><li>Awareness is the greatest agent for change.</li><li>Nothing can dim the light which shines from within.</li><li>Our dreams can come true if we have the courage to pursue them.</li><li>Patience and perseverance have a magical effect before which difficulties disappear and obstacles vanish.</li><li>What you do makes a difference, and you have to decide what kind of difference you want to make.</li><li>The thing that is really hard, and really amazing, is giving up on being perfect and beginning the work of becoming yourself.</li><li>You are what you do, not what you say youâ€™ll do.</li><li>This is the real secret to lifeâ€”to be completely engaged with what you are doing in the here and now. And instead of calling it work, realize it is play.</li><li>I am strong because Iâ€™ve been weak. I am fearless because Iâ€™ve been afraid. I am wise because Iâ€™ve been foolish.</li><li>Every moment you live in the past is a moment you waste in the present.</li><li>Some changes look negative on the surface, but you will soon realize that space is being created in your life for something new to emerge.</li><li>The world breaks everyone and afterward many are strong at the broken places.</li><li>Donâ€™t bury your failures. Let them inspire you.</li><li>Whether you think you can or you think you canâ€™t, you are right.</li><li>â€œAn investment in knowledge pays the best interest.â€Benjamin Franklin</li><li>Be brave. Take risks. Nothing can substitute experience.</li><li>Learn to walk before run</li><li>This is love, deep in the trenches, worthy of respect, admiration and gratitude.</li><li>You will learn more in three days of acting than in six months of researching.</li></ul><h3 id="ä¸­æ–‡ç¢ç‰‡"><a href="#ä¸­æ–‡ç¢ç‰‡" class="headerlink" title="ä¸­æ–‡ç¢ç‰‡"></a>ä¸­æ–‡ç¢ç‰‡</h3><ul><li>è™½åƒä¸‡äººï¼Œå¾å¾€çŸ£ã€‚</li><li>åœ¨ä¸€ä¸ªè·ªä¸‹å»æ‰èƒ½æ´»ç€çš„æ—¶ä»£ï¼Œè¯·ç»™ç«™ç€çš„äººä¸€ç‚¹æŒå£°ï¼</li><li>ä¸€ä¸ªäººä¸€æ—¦æ¥è§¦åˆ°çœŸç›¸ï¼Œä¾¿æ— æ³•å†å›å¤´å»ç›¸ä¿¡è°è¨€ï¼</li><li>ç å†œä¸é—®å‡ºå¤„ï¼Œå¤§ä½¬ä¸çœ‹å²æ•°</li><li>è‹±é›„ä¸é—®å‡ºå¤„ï¼Œæµæ°“ä¸çœ‹å²æ•°</li><li>é•¿å¤šå¤§å±è‚¡ï¼Œç©¿å¤šå¤§è£¤è¡©</li><li>æ²¡æœ‰æœ€å¥½çš„å¼€å‘è¯­è¨€ï¼Œåªæœ‰æœ€å¥½çš„å¼€å‘è€…</li><li>èƒ½å¹²çš„äººï¼Œä¸åœ¨æƒ…ç»ªä¸Šè®¡è¾ƒï¼Œåªåœ¨åšäº‹ä¸Šè®¤çœŸï¼›æ— èƒ½çš„äººï¼ä¸åœ¨åšäº‹ä¸Šè®¤çœŸï¼Œåªåœ¨æƒ…ç»ªä¸Šè®¡è¾ƒã€‚</li><li>æŠŠæ¯ä¸€æ¬¡ç»ƒä¹ éƒ½å½“æˆä¸€æ¬¡è€ƒè¯•</li></ul><h3 id="åäººç¢ç‰‡"><a href="#åäººç¢ç‰‡" class="headerlink" title="åäººç¢ç‰‡"></a>åäººç¢ç‰‡</h3><ul><li>ææ·±çš„æš´åŠ›å½“ä¸­éšè—ç€æè‡´çš„æ¸©æŸ”    (åŒ—é‡æ­¦)</li></ul><h3 id="å…¶å®ƒç¢ç‰‡"><a href="#å…¶å®ƒç¢ç‰‡" class="headerlink" title="å…¶å®ƒç¢ç‰‡"></a>å…¶å®ƒç¢ç‰‡</h3><ul><li>arithmetic<ul><li>addition, subtraction, multiplication and division calculations</li></ul></li><li>Promise(æ‰¿è¯º)ã€Earnest(è¯šæŒš)ã€Respect(å°Šé‡)ã€Forgiveness(å®½å®¹)ã€Enioy(äº«å—)ã€Cherish(çæƒœ)ã€Trust(ä¿¡ä»»)</li><li>In any case, measure, donâ€™t guess! Only a measurement will tell you if the parallelism is worth it or not.(from stack overflowâ€™s someone)</li></ul><h3 id="æŠ€æœ¯ç¢ç‰‡"><a href="#æŠ€æœ¯ç¢ç‰‡" class="headerlink" title="æŠ€æœ¯ç¢ç‰‡"></a>æŠ€æœ¯ç¢ç‰‡</h3><ul><li>compare two things at different points, this not only makes them easy to compare but also makes it easy to remember differences.</li></ul>]]></content>
      
      <categories>
          
          <category> words </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fragment </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java thread code</title>
      <link href="/2018/06/01/java%20thread%20code/"/>
      <url>/2018/06/01/java%20thread%20code/</url>
      <content type="html"><![CDATA[<h3 id="Future-and-FutureTask"><a href="#Future-and-FutureTask" class="headerlink" title="Future and FutureTask"></a>Future and FutureTask</h3><blockquote><ul><li>A <strong>Future</strong> interface provides methods <strong>to check if the computation is complete, to wait for its completion and to retrieve the results of the computation</strong>. The result is retrieved using Futureâ€™s get() method when the computation has completed, and it blocks until it is completed.</li><li><strong>FutureTask</strong><pre><code>1. FutureTask implementation Future interface and RunnableFuture Interface, means one can use FutureTask as Runnable and can be submitted to ExecutorService for execution.2. When one call Future.submit() Callable or Runnable objects then most of time ExecutorService creates FutureTask, and one can create it manually also.3. FutureTask acts like a latch.4. Computation represent by FutureTask is implemented with Callable interface.5. It implements Future or Callable interface.6. Behaviour of get() method depends on the state of the task. If tasks are not completed get() method waits or blocks till the task is completed. Once task completed, it returns the result or throws an ExecutionException.</code></pre></li></ul></blockquote><p><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/pool2.png" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java program do two FutureTask </span></span><br><span class="line"><span class="comment">// using Runnable Interface </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*; </span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level; </span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> waitTime; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyRunnable</span><span class="params">(<span class="keyword">int</span> timeInMillis)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">this</span>.waitTime = timeInMillis; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line"><span class="comment">// sleep for user given millisecond </span></span><br><span class="line"><span class="comment">// before checking again </span></span><br><span class="line">Thread.sleep(waitTime); </span><br><span class="line"></span><br><span class="line"><span class="comment">// return current thread name </span></span><br><span class="line">System.out.println(Thread </span><br><span class="line">.currentThread() </span><br><span class="line">.getName()); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (InterruptedException ex) &#123; </span><br><span class="line">Logger </span><br><span class="line">.getLogger(MyRunnable.class.getName()) </span><br><span class="line">.log(Level.SEVERE, <span class="keyword">null</span>, ex); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Class FutureTaskExample excute two future task </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FutureTaskExample</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="comment">// create two object of MyRunnable class </span></span><br><span class="line"><span class="comment">// for FutureTask and sleep 1000, 2000 </span></span><br><span class="line"><span class="comment">// millisecond before checking again </span></span><br><span class="line">MyRunnable myrunnableobject1 = <span class="keyword">new</span> MyRunnable(<span class="number">1000</span>); </span><br><span class="line">MyRunnable myrunnableobject2 = <span class="keyword">new</span> MyRunnable(<span class="number">2000</span>); </span><br><span class="line"></span><br><span class="line">FutureTask&lt;String&gt; </span><br><span class="line">futureTask1 = <span class="keyword">new</span> FutureTask&lt;&gt;(myrunnableobject1, </span><br><span class="line"><span class="string">"FutureTask1 is complete"</span>); </span><br><span class="line">FutureTask&lt;String&gt; </span><br><span class="line">futureTask2 = <span class="keyword">new</span> FutureTask&lt;&gt;(myrunnableobject2, </span><br><span class="line"><span class="string">"FutureTask2 is complete"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// create thread pool of 2 size for ExecutorService </span></span><br><span class="line">ExecutorService executor = Executors.newFixedThreadPool(<span class="number">2</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// submit futureTask1 to ExecutorService </span></span><br><span class="line">executor.submit(futureTask1); </span><br><span class="line"></span><br><span class="line"><span class="comment">// submit futureTask2 to ExecutorService </span></span><br><span class="line">executor.submit(futureTask2); </span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123; </span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">// if both future task complete </span></span><br><span class="line"><span class="keyword">if</span> (futureTask1.isDone() &amp;&amp; futureTask2.isDone()) &#123; </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"Both FutureTask Complete"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// shut down executor service </span></span><br><span class="line">executor.shutdown(); </span><br><span class="line"><span class="keyword">return</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!futureTask1.isDone()) &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">// wait indefinitely for future </span></span><br><span class="line"><span class="comment">// task to complete </span></span><br><span class="line">System.out.println(<span class="string">"FutureTask1 output = "</span></span><br><span class="line">+ futureTask1.get()); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"Waiting for FutureTask2 to complete"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait if necessary for the computation to complete, </span></span><br><span class="line"><span class="comment">// and then retrieves its result </span></span><br><span class="line">String s = futureTask2.get(<span class="number">250</span>, TimeUnit.MILLISECONDS); </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123; </span><br><span class="line">System.out.println(<span class="string">"FutureTask2 output="</span> + s); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123; </span><br><span class="line">Sysmtem.out.println(<span class="string">"Exception: "</span> + e); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line"></span><br><span class="line">FutureTask1 output=FutureTask1 is complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">FutureTask2 output=FutureTask2 is complete</span><br><span class="line">Both FutureTask Complete</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> thread </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java thread</title>
      <link href="/2018/06/01/java%20thread/"/>
      <url>/2018/06/01/java%20thread/</url>
      <content type="html"><![CDATA[<p>çº¿ç¨‹å®‰å…¨æ˜¯ç¼–ç¨‹ä¸­çš„æœ¯è¯­ï¼ŒæŒ‡æŸä¸ªå‡½æ•°ã€å‡½æ•°åº“åœ¨å¹¶å‘ç¯å¢ƒä¸­è¢«è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡ï¼Œä½¿ç¨‹åºåŠŸèƒ½æ­£ç¡®å®Œæˆã€‚å³åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œä¸å‘ç”Ÿæœ‰åºæ€§ã€åŸå­æ€§ä»¥åŠå¯è§æ€§é—®é¢˜ã€‚</p><h3 id="how-to-avoid-deadlock"><a href="#how-to-avoid-deadlock" class="headerlink" title="how to avoid deadlock"></a>how to avoid deadlock</h3><p><img src="https://2.bp.blogspot.com/-63RZ-BTlAFs/VfGeHMnGdFI/AAAAAAAADuw/gwqtrVliMsM/s400/Deadlock%2Bof%2BThreads.jpg" alt=""></p><h3 id="ConcurrentHashMap-faster-than-Hashtable"><a href="#ConcurrentHashMap-faster-than-Hashtable" class="headerlink" title="ConcurrentHashMap faster than Hashtable"></a>ConcurrentHashMap faster than Hashtable</h3><blockquote><p> ConcurrentHashMap is introduced as an alternative of Hashtable in Java 5, it is faster because of its design. ConcurrentHashMap divides the whole map into different segments and only lock a particular segment during the update operation, instead of <a href="http://javarevisited.blogspot.com/2012/01/java-hashtable-example-tutorial-code.html" target="_blank" rel="noopener">Hashtable</a>, which locks whole Map.</p></blockquote><p><img src="https://1.bp.blogspot.com/-s28yqJthVWo/V10_G31sSCI/AAAAAAAAGNY/8oJE5cDD5BUa5VBiCI8Bx-UdpD8_MoeSwCLcB/s400/Internal%2Bimplementation%2Bof%2BConcurrentHashMap%2Bin%2BJava.png" alt=""></p><h3 id="submit-and-execute-method-of-Executor-and-ExecutorService"><a href="#submit-and-execute-method-of-Executor-and-ExecutorService" class="headerlink" title="submit() and execute() method of Executor and ExecutorService"></a>submit() and execute() method of Executor and ExecutorService</h3><blockquote><p> The main difference between submit and execute method from ExecutorService interface is that former return a result in the form of a Future object, while later doesnâ€™t return a result. By the way, both are used to submit a task to thread pool in Java but one is defined in Executor interface,while other is added into ExecutorService interface.</p></blockquote><p><img src="https://2.bp.blogspot.com/-ybewy1bWbFs/VxZFewRdKbI/AAAAAAAAFt4/fuAHJBE1r_8nlfUz34YTKI1j70UdqaMiQCLcB/s640/Difference%2Bbetween%2Bsubmit%2Bvs%2Bexecute%2Bmethod%2Bin%2BJava.png" alt=""></p><h4 id="when-to-use"><a href="#when-to-use" class="headerlink" title="when to use"></a>when to use</h4><blockquote><ul><li>In general, if you are doing computational task e.g. calculating some risk stats, <a href="http://java67.blogspot.com/2015/09/how-to-use-biginteger-class-in-java.html" target="_blank" rel="noopener">calculating factorial of large numbers</a> or doing some time-consuming computation e which results in some value then use the submit() method. It immediately returns a Future object, which can be later queried to get the value of computation by calling get() method.</li></ul></blockquote><blockquote><ul><li>Remember, get() is a <a href="http://javarevisited.blogspot.com/2012/02/what-is-blocking-methods-in-java-and.html" target="_blank" rel="noopener">blocking call</a> so always call the version which accepts a timeout. While you can use the execute() method if you just want your code to be run in parallel by worker threads of the thread pool.</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Future future = executorService.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Asynchronous task"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">future.get();  <span class="comment">//returns null if the task has finished correctly.</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Future future = executorService.submit(<span class="keyword">new</span> Callable()&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Asynchronous Callable"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Callable Result"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"future.get() = "</span> + future.get());</span><br></pre></td></tr></table></figure><h3 id="ReentrantLock-vs-synchronized"><a href="#ReentrantLock-vs-synchronized" class="headerlink" title="ReentrantLock vs synchronized"></a>ReentrantLock vs synchronized</h3><h4 id="the-advantages-of-ReentrantLock"><a href="#the-advantages-of-ReentrantLock" class="headerlink" title="the advantages of ReentrantLock"></a>the advantages of ReentrantLock</h4><ol><li><p>Ability to lock interruptibly.</p></li><li><p>Ability to timeout while waiting for lock.</p></li><li><p>Power to create fair lock.</p></li><li><p>API to get list of waiting thread for lock.</p></li><li><p>Flexibility to try for lock without blocking.</p></li></ol><h4 id="the-disadvantages-of-ReentrantLock"><a href="#the-disadvantages-of-ReentrantLock" class="headerlink" title="the disadvantages of ReentrantLock"></a>the disadvantages of ReentrantLock</h4><ol><li><p>Major drawback of using ReentrantLock in Java is wrapping method body inside <a href="http://javarevisited.blogspot.com/2012/11/difference-between-final-finally-and-finalize-java.html" target="_blank" rel="noopener">try-finally block</a>, which makes code unreadable and hides business logic. </p></li><li><p>programmer is responsible for acquiring and releasing lock, which is a power but also opens gate for new subtle bugs, when programmer forget to release the lock in finally block.</p></li></ol><h3 id="ReadWriteLock"><a href="#ReadWriteLock" class="headerlink" title="ReadWriteLock"></a>ReadWriteLock</h3><p><img src="https://4.bp.blogspot.com/-yYqp8m0BGdk/V11A-s0qwVI/AAAAAAAAGNw/LL_qGX5_qD4dHTFMe3kklI4jYWyDHzIyQCLcB/s400/ReadWriteLock%2Bin%2BJava.jpg" alt=""></p><h3 id="stop-thread"><a href="#stop-thread" class="headerlink" title="stop thread"></a>stop thread</h3><blockquote><ul><li>There was some control methods in JDK 1.0 e.g. stop(), suspend() and resume() which was deprecated in later releases due to potential deadlock threats, from then Java API designers has not made any effort to provide a consistent, thread-safe and elegant way to stop threads.</li></ul></blockquote><blockquote><ul><li>Programmers mainly rely on the fact that thread stops automatically as soon as they finish execution of run() or call() method. To manually stop, programmers either take advantage of volatile boolean variable and check in every iteration if run method has loops or interrupt threads to abruptly cancel tasks.</li></ul></blockquote><h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><blockquote><ul><li>The <code>ThreadLocal</code> class in Java enables you to create variables that can only be read and written by the same thread. Thus, even if two threads are executing the same code, and the code has a reference to a<code>ThreadLocal</code> variable, then the two threads cannot see each otherâ€™s <code>ThreadLocal</code> variables.</li><li>Each thread holds an exclusive copy of ThreadLocal variable which becomes eligible to Garbage collection after thread finished or died, normally or due to any Exception, Given those ThreadLocal variable doesnâ€™t have any other live references.</li><li>ThreadLocal variables in Java are generally private static fields in Classes and maintain its state inside Thread.</li></ul></blockquote><h3 id="synchronized-vs-concurrent-collection"><a href="#synchronized-vs-concurrent-collection" class="headerlink" title="synchronized vs concurrent collection"></a>synchronized vs concurrent collection</h3><blockquote><p>later is more scalable than former</p><p> synchronized collections locks the whole collection e.g. whole Map or List while concurrent collection never locks the whole Map or List. They achieve thread safety by using advanced and sophisticated techniques like lock stripping. For example, the ConcurrentHashMap divides the whole map into several segments and locks only the relevant segments, which allows multiple threads to access other segments of same ConcurrentHashMap without locking.</p></blockquote><h4 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a>CopyOnWriteArrayList</h4><blockquote><p> CopyOnWriteArrayList allows multiple reader threads to read without synchronization and when a write happens it copies the whole ArrayList and swap with a newer one.</p></blockquote><h3 id="Stack-and-Heap"><a href="#Stack-and-Heap" class="headerlink" title="Stack and Heap"></a>Stack and Heap</h3><blockquote><ul><li>Each thread has their own stack, which is used to store local variables, method parameters and call stack. Variable stored in one Threadâ€™s stack is not visible to other.</li><li>heap is a common memory area which is shared by all threads.Objects whether local or at any level is created inside heap.</li></ul></blockquote><ul><li>To improve performance thread tends to cache values from heap into their stack, which can create problems if that variable is modified by more than one thread, this is where volatile variables comes in picture. volatile suggest threads to read value of variable always from main memory. </li><li>If there is no memory left in the stack for storing function call or local variable, JVM will throw java.lang.StackOverFlowError, while if there is no more heap space for creating an object, JVM will throw java.lang.OutOfMemoryError: Java Heap Space</li><li>Variables stored in stacks are only visible to the owner Thread while objects created in the heap are visible to all thread. In other words, stack memory is kind of private memory of Java Threads while heap memory is shared among all threads.</li></ul><h3 id="thread-pool"><a href="#thread-pool" class="headerlink" title="thread pool"></a>thread pool</h3><blockquote><p>Java API provides Executor framework, which allows you to create different types of thread pools e.g. single thread pool, which process one task at a time, fixed thread pool (a pool of fixed number of thread) or cached thread pool (an expandable thread pool suitable for applications with many short lived tasks).</p></blockquote><h4 id="the-benefits"><a href="#the-benefits" class="headerlink" title="the benefits"></a>the benefits</h4><ul><li><p>Use of Thread Pool reduces response time by avoiding thread creation during request or task processing.</p></li><li><p>Use of Thread Pool allows you to change your execution policy as you need. you can go from single thread to multiple threads by just replacing ExecutorService implementation.</p></li><li>Thread Pool in Java application increases the stability of the system by creating a configured number of threads decided based on system load and available resource.</li><li>Thread Pool frees application developer from thread management stuff and allows to focus on business logic.</li></ul><h3 id="volatile-vs-atomic-variable"><a href="#volatile-vs-atomic-variable" class="headerlink" title="volatile vs atomic variable"></a>volatile vs atomic variable</h3><blockquote><p>Volatile variable provides you happens-before guarantee that a write will happen before any subsequent write, it doesnâ€™t guarantee atomicity. For example count++ operation will not become atomic just by declaring count variable as volatile. On the other hand AtomicInteger class provides atomic method to perform such compound operation atomically.</p></blockquote><h3 id="3-multi-threading-best-practice"><a href="#3-multi-threading-best-practice" class="headerlink" title="3 multi-threading best practice"></a>3 multi-threading best practice</h3><ul><li>Always give meaningful name to your thread</li><li><p>Avoid locking or Reduce scope of Synchronization</p></li><li><p>Prefer Synchronizers over wait and notify</p></li><li>Prefer Concurrent Collection over Synchronized Collection</li></ul><h3 id="Waitã€Sleepã€Yield"><a href="#Waitã€Sleepã€Yield" class="headerlink" title="Waitã€Sleepã€Yield"></a>Waitã€Sleepã€Yield</h3><ul><li><p>sleep() and yield() methods are defined in thread class while wait() is defined in the Object class</p></li><li><p>The key difference between wait() and sleep() is that former is used for inter-thread communication while later is used to introduced to pause the current thread for a short duration. </p></li><li><p>This difference is more obvious from the fact that, when a thread calls the wait() method, it releases the monitor or lock it was holding on that object, but when a thread calls the sleep() method, it never releases the monitor even if it is holding. </p></li><li><p>yield() just releases the CPU hold by Thread to give another thread an opportunity to run though itâ€™s not guaranteed who will get the CPU. It totally depends upon thread scheduler and <strong>itâ€™s even possible that the thread which calls the yield() method gets the CPU again</strong>(æœ‰å¯èƒ½è‡ªå·±ä¼šå†æ¬¡è·å–åˆ°cpuæ‰§è¡Œæ—¶é—´). Hence, itâ€™s not reliable to depend upon yield() method, itâ€™s just on best effort basis.</p><ul><li>If there is no waiting thread or all the waiting threads have a lower priority then the same thread will continue its execution.</li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>windows snippet</title>
      <link href="/2018/05/22/windows%20snippet/"/>
      <url>/2018/05/22/windows%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="è¿›ç¨‹æ“ä½œ"><a href="#è¿›ç¨‹æ“ä½œ" class="headerlink" title="è¿›ç¨‹æ“ä½œ"></a>è¿›ç¨‹æ“ä½œ</h3><ul><li>netstat -aon|findstr â€œ8080â€ </li></ul><p>TCP     127.0.0.1:80       0.0.0.0:0             LISTENING    2448<br>ç«¯å£è¢«è¿›ç¨‹å·ä¸º2448çš„è¿›ç¨‹å ç”¨ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p><ul><li>tasklist|findstr â€œ2448â€ </li></ul><p>thread.exe                   2016 Console                 0     16,064 K</p><p>å¾ˆæ¸…æ¥šï¼Œthreadå ç”¨äº†ä½ çš„ç«¯å£,Kill it</p><ul><li>taskkill -F -PID 2448</li></ul><p>å¦‚æœç¬¬äºŒæ­¥æŸ¥ä¸åˆ°ï¼Œé‚£å°±å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œè¿›ç¨‹â€”æŸ¥çœ‹â€”é€‰æ‹©åˆ—â€”pidï¼ˆè¿›ç¨‹ä½æ ‡è¯†ç¬¦ï¼‰æ‰“ä¸ªå‹¾å°±å¯ä»¥äº†</p>]]></content>
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>socket snippet</title>
      <link href="/2018/05/09/TCP%20and%20UDP/"/>
      <url>/2018/05/09/TCP%20and%20UDP/</url>
      <content type="html"><![CDATA[<h2 id="TCP-and-UDP"><a href="#TCP-and-UDP" class="headerlink" title="TCP and UDP"></a>TCP and UDP</h2><blockquote><ul><li>TCP stands for Transmission Control Protocol and UDP stands for User Datagram Protocol, and both are used extensively to build Internet applications.</li><li>The protocol which is the core of internet, HTTP is based on TCP.</li></ul></blockquote><h3 id="why"><a href="#why" class="headerlink" title="why"></a>why</h3><blockquote><p> why Java developer should understand these two protocols in detail is that Java is extensively used to write multi-threaded, concurrent and scalable servers.</p></blockquote><h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><blockquote><p> While UDP is more suitable for applications that need fast, efficient transmission, such as games. UDPâ€™s stateless nature is also useful for servers that answer small queries from huge numbers of clients. In practice, TCP is used in finance domain e.g. <a href="http://javarevisited.blogspot.sg/2011/04/fix-protocol-tutorial-for-beginners.html" target="_blank" rel="noopener">FIX protocol</a> is a TCP based protocol, UDP is used heavily in gaming and entertainment sites.</p></blockquote><h3 id="how"><a href="#how" class="headerlink" title="how"></a>how</h3><ul><li><p>TCP is connection oriented, reliable, slow, provides guaranteed delivery and preserves the order of messages</p></li><li><p>UDP is connectionless, unreliable, no ordering guarantee, but a fast protocol. </p></li><li><p>TCP overhead is also much higher than UDP, as it transmits more metadata per packet than UDP.  that header size of Transmission control protocol is 20 bytes, compared to 8 bytes header of User Datagram protocol.</p></li><li><p>Use TCP, if you canâ€™t afford to lose any message, while UDP is better for high-speed data transmission, where loss of a single packet is acceptable e.g. video streaming or online multiplayer games.</p></li></ul>]]></content>
      
      <categories>
          
          <category> Socket </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>design pattern-build</title>
      <link href="/2018/05/01/design%20pattern-build/"/>
      <url>/2018/05/01/design%20pattern-build/</url>
      <content type="html"><![CDATA[<h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Computer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//required parameters</span></span><br><span class="line"><span class="keyword">private</span> String HDD;</span><br><span class="line"><span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line"><span class="comment">//optional parameters</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> isGraphicsCardEnabled;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> isBluetoothEnabled;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getHDD</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> HDD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getRAM</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> RAM;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isGraphicsCardEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isGraphicsCardEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isBluetoothEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isBluetoothEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Computer</span><span class="params">(ComputerBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.HDD=builder.HDD;</span><br><span class="line">    <span class="keyword">this</span>.RAM=builder.RAM;</span><br><span class="line">    <span class="keyword">this</span>.isGraphicsCardEnabled=builder.isGraphicsCardEnabled;</span><br><span class="line">    <span class="keyword">this</span>.isBluetoothEnabled=builder.isBluetoothEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Builder Class</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ComputerBuilder</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// required parameters</span></span><br><span class="line">    <span class="keyword">private</span> String HDD;</span><br><span class="line">    <span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// optional parameters</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isGraphicsCardEnabled;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isBluetoothEnabled;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ComputerBuilder</span><span class="params">(String hdd, String ram)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.HDD=hdd;</span><br><span class="line">        <span class="keyword">this</span>.RAM=ram;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ComputerBuilder <span class="title">setGraphicsCardEnabled</span><span class="params">(<span class="keyword">boolean</span> isGraphicsCardEnabled)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isGraphicsCardEnabled = isGraphicsCardEnabled;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ComputerBuilder <span class="title">setBluetoothEnabled</span><span class="params">(<span class="keyword">boolean</span> isBluetoothEnabled)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isBluetoothEnabled = isBluetoothEnabled;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Computer <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Computer(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ComputerBuilder</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.journaldev.design.builder.Computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBuilderPattern</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Using builder to get the object in a single line of code and </span></span><br><span class="line">            <span class="comment">//without any inconsistent state or arguments management issues        </span></span><br><span class="line">    Computer comp = <span class="keyword">new</span> Computer.ComputerBuilder(</span><br><span class="line">            <span class="string">"500 GB"</span>, <span class="string">"2 GB"</span>).setBluetoothEnabled(<span class="keyword">true</span>)</span><br><span class="line">            .setGraphicsCardEnabled(<span class="keyword">true</span>).build();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>`</code></p>]]></content>
      
      <categories>
          
          <category> design pattern </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hibernate snippet</title>
      <link href="/2018/05/01/hibernate%20snippet/"/>
      <url>/2018/05/01/hibernate%20snippet/</url>
      <content type="html"><![CDATA[<blockquote><p>ORM is an acronym for Object/Relational mapping. It is a programming strategy to map object with the data stored in the database. It simplifies data creation, data manipulation, and data access.</p></blockquote><h3 id="The-advantages-of-using-ORM-over-JDBC"><a href="#The-advantages-of-using-ORM-over-JDBC" class="headerlink" title="The advantages of using ORM over JDBC"></a>The advantages of using ORM over JDBC</h3><ul><li>Application development is fast.</li><li>Management of transaction.</li><li>Generates key automatically.</li><li>Details of SQL queries are hidden.</li></ul><h3 id="Hibernate-Architecture"><a href="#Hibernate-Architecture" class="headerlink" title="Hibernate Architecture"></a>Hibernate Architecture</h3><ul><li>Java application layer</li><li>Hibernate framework layer</li><li>Backhand api layer</li><li>Database layer</li></ul><p><img src="https://www.javatpoint.com/images/hibernate/arc2.jpg" alt=""></p><p>Hibernate Application Architectureï¼š</p><p><img src="https://www.tutorialspoint.com/hibernate/images/hibernate_architecture.jpg" alt=""></p><blockquote><p>JDBC (Java Database Connectivity)</p><p>JTA (Java Transaction API) </p><p>JNDI (Java Naming Directory Interface)</p></blockquote><h3 id="Elements-of-Hibernate-Architecture"><a href="#Elements-of-Hibernate-Architecture" class="headerlink" title="Elements of Hibernate Architecture"></a>Elements of Hibernate Architecture</h3><ul><li><p>Configuration</p><ul><li><strong>Database Connection</strong> âˆ’ This is handled through one or more configuration files supported by Hibernate. These files are <strong>hibernate.properties</strong> and <strong>hibernate.cfg.xml</strong>.</li><li><strong>Class Mapping Setup</strong> âˆ’ This component creates the connection between the Java classes and database tables.</li></ul></li><li><p>SessionFactory</p><blockquote><p>SessionFactory is a thread-safe object, many threads cannot access it simultaneously.</p></blockquote></li><li><p>Session</p><blockquote><ul><li>It maintains a connection between the hibernate application and database.It provides methods to store, update, delete or fetch data from the database such as persist(), update(), delete(), load(), get() etc.</li><li>Session is not a thread-safe object, many threads can access it simultaneously. In other words, you can share it between threads.</li></ul></blockquote></li><li><p>Transaction</p></li><li><p>ConnectionProvider</p></li><li><p>Query</p><blockquote><p>Query objects use SQL or Hibernate Query Language (HQL) string to retrieve data from the database and create objects. A Query instance is used to bind query parameters, limit the number of results returned by the query, and finally to execute the query.</p></blockquote></li><li><p>Criteria</p><blockquote><p>Criteria objects are used to create and execute object oriented criteria queries to retrieve objects.</p></blockquote></li></ul><h3 id="About-SQL"><a href="#About-SQL" class="headerlink" title="About SQL"></a>About SQL</h3><ul><li><p>SQL query created in Hibernateï¼ˆNative sqlï¼‰</p><blockquote><p>Session.createSQLQuery</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createSQLQuery()</span><br><span class="line"><span class="comment">//The method createSQLQuery() creates Query object using the native SQL syntax. </span></span><br><span class="line">Query query = session.createSQLQuery(<span class="string">"Select * from Student"</span>);</span><br></pre></td></tr></table></figure></li><li><p>HQL query</p><blockquote><p>Session.createQuery</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createQuery()</span><br><span class="line"><span class="comment">//The method createQuery() creates Query object using the HQL syntax. </span></span><br><span class="line">Query query = session.createQuery(<span class="string">"from Student s where s.name like 'k%'"</span>);</span><br></pre></td></tr></table></figure></li><li><p>criteria query</p><blockquote><p>Session.createCriteria</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createCriteria()</span><br><span class="line"><span class="comment">//The method createCriteria() creates Criteria object for setting the query parameters. This is more useful feature for those who don't want to write the query in hand. You can specify any type of complicated syntax using the Criteria API.</span></span><br><span class="line">Criteria criteria = session.createCriteria(Student.class);</span><br></pre></td></tr></table></figure></li></ul><h3 id="HQL-vs-Criteria"><a href="#HQL-vs-Criteria" class="headerlink" title="HQL vs Criteria"></a>HQL vs Criteria</h3><ul><li>HQL is to perform both select and non-select operations on the data,  but Criteria is only for selecting the data, we cannot perform non-select operations using criteria</li><li>HQL is suitable for executing Static Queries, where as Criteria is suitable for executing Dynamic Queries</li><li>HQL doesnâ€™t support pagination concept, but we can achieve pagination with Criteria</li><li>Criteria used to take more time to execute then HQL</li><li>With Criteria we are safe with SQL Injection because of its dynamic query generation but in HQL as your queries are either fixed or parametrized, there is no safe from SQL Injection.</li></ul><h3 id="Caching"><a href="#Caching" class="headerlink" title="Caching"></a>Caching</h3><blockquote><p>Cache memory stores recently used data items in order to reduce the number of database hits as much as possible.</p></blockquote><p><img src="https://www.tutorialspoint.com/hibernate/images/hibernate_cache.jpg" alt=""></p><ul><li><p>First level Cache</p><blockquote><p>Hibernate first level cache is associated with the Session object. Hibernate first level cache is enabled by default and there is no way to disable it. However hibernate provides methods through which we can delete selected objects from the cache or clear the cache completely.Any object cached in a session will not be visible to other sessions and when the session is closed, all the cached objects will also be lost.</p></blockquote></li><li><p>Second level Cache</p><blockquote><p>Hibernate Second Level cache is disabled by default but we can enable it through configuration. Currently EHCache and Infinispan provides implementation for Hibernate Second level cache and we can use them. </p></blockquote></li><li><p>Query Cache</p><blockquote><p>Hibernate can also cache result set of a query. Hibernate Query Cache doesnâ€™t cache the state of the actual entities in the cache; it caches only identifier values and results of value type. So it should always be used in conjunction with the second-level cache.</p></blockquote></li></ul><hr><h3 id="types-of-association-mapping"><a href="#types-of-association-mapping" class="headerlink" title="types of association mapping"></a>types of association mapping</h3><ol><li><p>One to One</p></li><li><p>One to Many</p><blockquote><p>ï¼ˆä¸€å¯¹å¤šï¼‰å•å‘ï¼šä¼šäº§ç”Ÿä¸­é—´è¡¨ï¼Œæ­¤æ—¶å¯ä»¥ç”¨@onetoMany @Joincolumnï¼ˆname=â€ â€œï¼‰é¿å…äº§ç”Ÿä¸­é—´è¡¨**ï¼Œå¹¶ä¸”æŒ‡å®šäº†å¤–é”®çš„åå­—ï¼ˆåˆ«çœ‹ @joincolumnåœ¨ä¸€ä¸­å†™ç€ï¼Œä½†å®ƒå­˜åœ¨åœ¨å¤šçš„é‚£ä¸ªè¡¨ä¸­ï¼‰</p></blockquote></li><li><p>Many to One</p><blockquote><p>ï¼ˆå¤šå¯¹ä¸€ï¼‰å•å‘ï¼šä¸äº§ç”Ÿä¸­é—´è¡¨ï¼Œä½†å¯ä»¥ç”¨@Joincolumnï¼ˆname=â€  â€œï¼‰æ¥æŒ‡å®šç”Ÿæˆå¤–é”®çš„åå­—ï¼Œå¤–é”®åœ¨å¤šçš„ä¸€æ–¹è¡¨ä¸­äº§ç”Ÿï¼</p></blockquote></li><li><p>Many to Many</p></li></ol><hr><p>å¯å‚è€ƒ<a href="https://www.jianshu.com/p/54108abb070f" target="_blank" rel="noopener">JPAå®ä½“å…³ç³»æ˜ å°„</a></p><h4 id="ä¸ºä»€ä¹ˆè¦æœ‰å®ä½“å…³ç³»æ˜ å°„"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰å®ä½“å…³ç³»æ˜ å°„" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰å®ä½“å…³ç³»æ˜ å°„"></a>ä¸ºä»€ä¹ˆè¦æœ‰å®ä½“å…³ç³»æ˜ å°„</h4><blockquote><p>ç®€åŒ–ç¼–ç¨‹æ“ä½œã€‚æŠŠå†—ä½™çš„æ“ä½œäº¤ç»™åº•å±‚æ¡†æ¶æ¥å¤„ç†ã€‚<br> ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘è¦ç»™ä¸€ä½æ–°å…¥å­¦çš„å­¦ç”Ÿæ·»åŠ ä¸€ä½æ–°çš„è€å¸ˆã€‚è€Œè¿™ä¸ªè€å¸ˆåˆæ˜¯æ–°æ¥çš„ï¼Œåœ¨å­¦ç”Ÿæ•°æ®åº“ä¸æ•™å¸ˆæ•°æ®åº“ä¸­å‡ä¸å­˜åœ¨å¯¹åº”çš„æ•°æ®ã€‚é‚£ä¹ˆæˆ‘éœ€è¦å…ˆåœ¨æ•™å¸ˆæ•°æ®åº“ä¸­ä¿å­˜æ–°æ¥çš„è€å¸ˆçš„æ•°æ®ï¼ŒåŒæ—¶åœ¨å­¦ç”Ÿæ•°æ®åº“ä¸­ä¿å­˜æ–°å­¦ç”Ÿçš„æ•°æ®ï¼Œç„¶åå†ç»™ä¸¤è€…å»ºç«‹å…³è”ã€‚<br> è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†å®ä½“å…³ç³»æ˜ å°„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¯¥æ–°æ•™å¸ˆå®ä½“äº¤ç»™è¯¥å­¦ç”Ÿå®ä½“ï¼Œç„¶åä¿å­˜è¯¥å­¦ç”Ÿå®ä½“å³å¯å®Œæˆã€‚</p></blockquote>]]></content>
      
      <categories>
          
          <category> hibernate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redis snippet</title>
      <link href="/2018/02/16/redis%20snippet/"/>
      <url>/2018/02/16/redis%20snippet/</url>
      <content type="html"><![CDATA[<p>###ã€€æ•°æ®ç±»å‹</p><ul><li><p>String</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; SET name &quot;runoob&quot;</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; GET name</span><br><span class="line">&quot;runoob&quot;</span><br></pre></td></tr></table></figure></li><li><p>Hash</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; HMSET myhash field1 &quot;Hello&quot; field2 &quot;World&quot;</span><br><span class="line">&quot;OK&quot;</span><br><span class="line">redis&gt; HGET myhash field1</span><br><span class="line">&quot;Hello&quot;</span><br><span class="line">redis&gt; HGET myhash field2</span><br><span class="line">&quot;World&quot;</span><br></pre></td></tr></table></figure></li><li><p>List</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; lpush runoob redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush runoob mongodb</span><br><span class="line">(integer) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush runoob rabitmq</span><br><span class="line">(integer) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange runoob 0 10</span><br><span class="line">1) &quot;rabitmq&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure></li><li><p>Set</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; sadd runoob redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob rabitmq</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob rabitmq</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers runoob</span><br><span class="line"></span><br><span class="line">1) &quot;redis&quot;</span><br><span class="line">2) &quot;rabitmq&quot;</span><br><span class="line">3) &quot;mongodb&quot;</span><br></pre></td></tr></table></figure></li><li><p>zset(sorted setï¼šæœ‰åºé›†åˆ)</p><ul><li><p>Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚</p><p>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚</p></li><li><p>å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member</span><br></pre></td></tr></table></figure></li><li><p>å®ä¾‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; &gt; ZRANGEBYSCORE runoob 0 1000</span><br><span class="line">1) &quot;mongodb&quot;</span><br><span class="line">2) &quot;rabitmq&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><ul><li><p>show all keys</p><p><code>KEYS *</code></p></li><li><p>Delete All Keys In Redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Delete all keys from all Redis databases:</span><br><span class="line"> `$ redis-cli FLUSHALL`</span><br><span class="line"> Delete all keys of the currently selected Redis database:</span><br><span class="line"> `$ redis-cli FLUSHDB`</span><br><span class="line"> Delete all keys of the specified Redis database:</span><br><span class="line"> `$ redis-cli -n &lt;database_number&gt; FLUSHDB`</span><br></pre></td></tr></table></figure></li></ul><h3 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><ul><li><p>RedisConnectionFailureException</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis.confä¸­é»˜è®¤çš„æ˜¯bind 127.0.0.1ï¼Œéœ€è¦å°†è¿™æ®µæ³¨é‡Š</span><br><span class="line">è®¾ç½®protected-mode noï¼Œå› ä¸ºå¦‚æœæ˜¯yesçš„è¯ï¼Œåªèƒ½è¿›è¡Œæœ¬åœ°è®¿é—®ã€‚å¦‚æœè®¾ç½®äº†å¯†ç å’Œbindè¿™ä¸ªå¯ä»¥å¼€å¯ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®ä¸ºnoå³å¯ã€‚</span><br><span class="line">daemonize  yesè¡¨ç¤ºåå°è¿è¡Œ</span><br></pre></td></tr></table></figure></li><li><p>éœ€è¦å®‰è£…gcc</p></li><li><p>makeæ—¶ï¼Œæç¤ºfatal error: jemalloc/jemalloc.h: No such file or directory</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³ï¼š   </span><br><span class="line"><span class="built_in">cd</span> src/deps</span><br><span class="line">make hiredis jemalloc linenoise lua geohash-int</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰é…ç½®redis-server"><a href="#è‡ªå®šä¹‰é…ç½®redis-server" class="headerlink" title="è‡ªå®šä¹‰é…ç½®redis server"></a>è‡ªå®šä¹‰é…ç½®redis server</h3><p>æ¶‰åŠåˆ°çš„ç›®å½•æˆ–æ–‡ä»¶æœ‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 1.é…ç½®æ–‡ä»¶/etc/redis/xxxx.conf</span><br><span class="line"> 2.æ—¥å¿—ã€æ•°æ®æ–‡ä»¶/data/redis/xxxx</span><br><span class="line"> 3.å¯åŠ¨è„šæœ¬/etc/init.d/redis_xxxx</span><br><span class="line"> </span><br><span class="line">å®¢æˆ·ç«¯å¯åŠ¨æ—¶redis-cli -p xxxx</span><br></pre></td></tr></table></figure></li></ul><h3 id="Enable-remote-Redis-connection"><a href="#Enable-remote-Redis-connection" class="headerlink" title="Enable remote Redis connection"></a>Enable remote Redis connection</h3><ul><li>Replaced <code>bind 127.0.0.1</code> with <code>bind 0.0.0.0</code> in the <code>/etc/redis/redis.conf</code> file, the line does not have a leading <code>#</code> nor space,</li><li>Replaced <code>protected-mode yes</code> with <code>protected-mode no</code> in this same file,</li><li>Allowed all traffic to port <code>6379</code> using <code>ufw allow 6379</code> and <code>ufw allow 6379/tcp</code></li></ul><h3 id="secure-redis"><a href="#secure-redis" class="headerlink" title="secure redis"></a>secure redis</h3><p>By default, UFW is not available in CentOS repository. So you will need to install the EPEL repository to your system. You can do this by running the following </p><p>linux command</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install epel-release -y</span><br></pre></td></tr></table></figure><p>Once the EPEL repository is installed, you can install UFW by just running the following linux command:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install --enablerepo=&quot;epel&quot; ufw -y</span><br></pre></td></tr></table></figure><p>After installing UFW, start UFW service and enable it to start on boot time by running the following </p><p>linux command</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ufw enable</span><br></pre></td></tr></table></figure><p>Next, check the status of UFW with the following linux command. You should see the following output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ufw status </span><br><span class="line">Status: active</span><br></pre></td></tr></table></figure><p>You can also disable UFW firewall by running the following linux command:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ufw disable</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ–‡ä¹±ç "><a href="#ä¸­æ–‡ä¹±ç " class="headerlink" title="ä¸­æ–‡ä¹±ç "></a>ä¸­æ–‡ä¹±ç </h3><p>åœ¨å¯åŠ¨å‘½ä»¤ä¸­æ·»åŠ  â€“rawå³å¯</p>]]></content>
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>neo4j snippet</title>
      <link href="/2018/01/21/course%20snippet/"/>
      <url>/2018/01/21/course%20snippet/</url>
      <content type="html"><![CDATA[<p>é«˜å¹¶å‘å¤„ç†æŠ€æœ¯è€å¸æœºå¸¦ä½ ç©RabbitMqå®ç°æ€§èƒ½å€å¢<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1tdWyeXgXzbWsltY8NlhdaQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1tdWyeXgXzbWsltY8NlhdaQ</a></p><p>å¯†ç ï¼šripd</p><p>ç¼“å­˜é‚£äº›äº‹,ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜çˆ¬å‘è®°<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/10aX13k6GjIr7XUcrb6j-Pw" target="_blank" rel="noopener">https://pan.baidu.com/s/10aX13k6GjIr7XUcrb6j-Pw</a></p><p>å¯†ç ï¼šf5kl</p><p>åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ä½ ä¸å¾—ä¸å¬çš„è¸©å‘æ•…äº‹ï¼è®©ä½ çš„ä»£ç ç»å¾—èµ·è€ƒéªŒ<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1PeiCr0DYMI7x4LwGJktrOg" target="_blank" rel="noopener">https://pan.baidu.com/s/1PeiCr0DYMI7x4LwGJktrOg</a></p><p>å¯†ç ï¼šphsp</p><p>å¤§å’–å¸¦ä½ ç©è½¬åˆ†å¸ƒå¼é” Zookeeperç¯‡<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1Nh8mTrLNwtmh4hwU2khksg" target="_blank" rel="noopener">https://pan.baidu.com/s/1Nh8mTrLNwtmh4hwU2khksg</a></p><p>å¯†ç ï¼šfznh</p>]]></content>
      
      <categories>
          
          <category> course </category>
          
      </categories>
      
      
        <tags>
            
            <tag> resource </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jvm snippet</title>
      <link href="/2018/01/18/JVM%20snippet/"/>
      <url>/2018/01/18/JVM%20snippet/</url>
      <content type="html"><![CDATA[<h2 id="JRE-JVM-JDK"><a href="#JRE-JVM-JDK" class="headerlink" title="JRE JVM JDK"></a>JRE JVM JDK</h2><ul><li>JRE:    java run-time</li></ul><blockquote><p>Java is every where in browser, in mobile, in TV or in set-top boxes and if you are into Java programming language than you know that Java code which is bundled in JAR (Java archive) file require Java virtual machine JVM to execute it. </p></blockquote><ul><li>JVM:    java virtual machine</li></ul><blockquote><p> Java Virtual Machine is get created when you run a java program using java command e.g. java HelloWorld. JVM is responsible for converting byte code into machine specific code</p></blockquote><ul><li>JDK:    java development kit</li></ul><blockquote><p> JDK is also loosely referred as JRE but its lot more than JRE and it provides all the tools and executable require to compile debug and execute Java Program.</p></blockquote><h2 id="basic-architecture-of-the-JVM"><a href="#basic-architecture-of-the-JVM" class="headerlink" title="basic architecture of the JVM"></a>basic architecture of the JVM</h2><p><img src="https://i.imgur.com/yI8u4Hr.jpg" alt=""></p><h3 id="Class-Loader-Sub-System"><a href="#Class-Loader-Sub-System" class="headerlink" title="Class Loader Sub System"></a>Class Loader Sub System</h3><h4 id="1-Loading"><a href="#1-Loading" class="headerlink" title="1. Loading"></a>1. Loading</h4><ul><li><p>loading the class file and store inside method area</p><p><img src="https://i.imgur.com/57IalMb.png" alt=""></p></li><li><p>Created object is not student object or customer object. It is a predefined class â€œClassâ€ object that is presently in java.lang package.</p><p><img src="https://i.imgur.com/9hHykjw.png" alt=""></p></li><li><p>For every loaded .class file, only one class â€œClassâ€ object will be created by JVM, even though we are using that class multiple times in our program. Example,</p><p><img src="https://i.imgur.com/KKpqYVn.png" alt=""></p></li></ul><h4 id="2-Linking"><a href="#2-Linking" class="headerlink" title="2. Linking"></a>2. Linking</h4><ul><li><p><strong>verification</strong> </p><blockquote><p>This Byte Code Verifier is responsible to verify weather .class file is properly formatted or not, structurally correct or not, generated by valid compiler or not.</p></blockquote></li><li><p><strong>preparation</strong> </p><blockquote><p>allocate memory for class level static variables and assigned default values.</p><p>E.g. For int â€”&gt; 0, For double â€”&gt; 0.0, For boolean â€”&gt; false</p></blockquote></li><li><p><strong>Resolution</strong></p><blockquote><p>It is the process of replacing all symbolic references used in our class with original direct references from method area.</p></blockquote><p><img src="https://i.imgur.com/jTM8BJz.png" alt=""></p></li><li><p><strong>Initialization</strong></p></li></ul><blockquote><p>In Initialization activity, for class level static variables assigns original values and static blocks will be executed from top to bottom.</p></blockquote><ul><li>Types of class loaders in class loader subsystem<ul><li>Bootstrap class loader/ Primordial class loader</li><li>Extension class loader</li><li>Application class loader/System class loader</li></ul></li></ul><h4 id="3-Class-loader-sub-system-follows-delegation-hierarchy-algorithm"><a href="#3-Class-loader-sub-system-follows-delegation-hierarchy-algorithm" class="headerlink" title="3. Class loader sub system follows delegation hierarchy algorithm"></a>3. Class loader sub system follows delegation hierarchy algorithm</h4><ul><li><p><strong>Customized class loader</strong></p><p>Sometimes we may not satisfy with default class loader mechanism then we can go for Customized class loader. For example:</p></li></ul><h3 id="Various-Memory-Areas-in-JVM"><a href="#Various-Memory-Areas-in-JVM" class="headerlink" title="Various Memory Areas in JVM"></a>Various Memory Areas in JVM</h3><h4 id="1-Method-Area"><a href="#1-Method-Area" class="headerlink" title="1. Method Area"></a>1. Method Area</h4><ul><li><p>Inside method area class level binary data including static variables will be stored</p></li><li><p>Constant pools of a class will be stored inside method area.</p></li><li><p>Method area can be accessed by multiple threads simultaneously.</p><blockquote><p>All threads share the same method area, so access to the method areaâ€™s data structures must be designed to be thread-safe. </p></blockquote></li></ul><h4 id="2-Heap-Area"><a href="#2-Heap-Area" class="headerlink" title="2. Heap Area"></a>2. Heap Area</h4><blockquote><p><strong>Heap space in Java is used for dynamic memory allocation for Java objects and JRE classes at the runtime</strong>. New objects are always created in heap space and the references to this objects are stored in stack memory.</p></blockquote><p>These objects have global access and can be accessed from anywhere in the application.</p><p>This memory model is further broken into smaller parts called generations, these are:</p><ol><li><strong>Young Generation â€“</strong> this is where all new objects are allocated and aged. A minor Garbage collection occurs when this fills up</li><li><strong>Old or Tenured Generation â€“</strong> this is where long surviving objects are stored. When objects are stored in the Young Generation, a threshold for the objectâ€™s age is set and when that threshold is reached, the object is moved to the old generation</li><li><strong>Permanent Generation â€“</strong> this consists of JVM metadata for the runtime classes and application methods</li></ol><ul><li>Itâ€™s accessed via complex memory management techniques that include Young Generation, Old or Tenured Generation, and Permanent Generation</li><li>If heap space is full, Java throws <em>java.lang.OutOfMemoryError</em></li><li>Access to this memory is relatively slower than stack memory</li><li>This memory, in contrast to stack, isnâ€™t automatically deallocated. It needs Garbage Collector to free up unused objects so as to keep the efficiency of the memory usage</li><li>Unlike stack, a heap isnâ€™t threadsafe and needs to be guarded by properly synchronizing the code</li></ul><hr><ul><li>Objects and corresponding instance variables will be stored in the heap area.</li><li><p>Every array in java is object only hence arrays also will be stored in the heap area.</p></li><li><p>Heap area can be access by multiple threads and hence the data stored in the heap area is not thread safe.</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Set Maximum and Minimum heap size</span><br><span class="line">-Xmx</span><br><span class="line">     To set maximum heap size , i.e., maxMemory</span><br><span class="line">    java -Xmx512m HeapSpaceDemo</span><br><span class="line">     Here mx = maximum size</span><br><span class="line">              512m = 512 MB</span><br><span class="line">              HeapSpaceDemo = Java class name</span><br><span class="line">-Xms</span><br><span class="line">     To set minimum heap size , i.e., total memory </span><br><span class="line">        java -Xms65m HeapSpaceDemo   </span><br><span class="line">      Here ms = minimum size</span><br><span class="line">              65m = 65 MB</span><br><span class="line">              HeapSpaceDemo = Java class name</span><br><span class="line">or, you can set a minimum maximum heap size at a time</span><br><span class="line">java -Xms256m -Xmx1024m HeapSpaceDemo</span><br></pre></td></tr></table></figure><h4 id="3-Stack-Memory"><a href="#3-Stack-Memory" class="headerlink" title="3. Stack Memory"></a>3. Stack Memory</h4><blockquote><p><strong>Stack Memory in Java is used for static memory allocation and the execution of a thread.</strong> It contains primitive values that are specific to a method and references to objects that are in a heap, referred from the method.</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Access to this memory is in Last-In-First-Out (LIFO) order. Whenever a new method is called, a new block on top of the stack is created which contains values specific to that method, like primitive variables and references to objects.</span><br><span class="line"></span><br><span class="line">When the method finishes execution, itâ€™s corresponding stack frame is flushed, the flow goes back to the calling method and space becomes available for the next method.</span><br></pre></td></tr></table></figure><ul><li><p>It grows and shrinks as new methods are called and returned respectively</p></li><li><p>Variables inside stack exist only as long as the method that created them is running</p></li><li><p>Itâ€™s automatically allocated and deallocated when method finishes execution</p></li><li><p>If this memory is full, Java throws <em>java.lang.StackOverFlowError</em></p></li><li><p>Access to this memory is fast when compared to heap memory</p></li><li><p>This memory is threadsafe as each thread operates in its own stack</p></li></ul><hr><ul><li><p>Local Variable Array</p><ul><li><p>It contains all parameters and local variables of the method.</p></li><li><p>the occupied slot </p></li></ul></li><li><p>Operand Stack</p><ul><li><p>JVM uses operand stack as work space.</p></li><li><p>last-in first-out (LIFO) </p></li><li><p>how a Java virtual machine would add two local variables that contain ints and store the int result in a third local variable:</p></li></ul></li><li><p>Frame Data</p></li></ul><p><strong>Stack Memory vs Heap Space</strong></p><table><thead><tr><th>Parameter</th><th>Stack Memory</th><th>Heap Space</th></tr></thead><tbody><tr><td>Application</td><td>Stack is used in parts, one at a time during execution of a thread</td><td>The entire application uses Heap space during runtime</td></tr><tr><td>Size</td><td>Stack has size limits depending upon OS and is usually smaller then Heap</td><td>There is no size limit on Heap</td></tr><tr><td>Storage</td><td>Stores only primitive variables and references to objects that are created in Heap Space</td><td>All the newly created objects are stored here</td></tr><tr><td>Order</td><td>It is accessed using Last-in First-out (LIFO) memory allocation system</td><td>This memory is accessed via complex memory management techniques that include Young Generation, Old or Tenured Generation, and Permanent Generation.</td></tr><tr><td>Life</td><td>Stack memory only exists as long as the current method is running</td><td>Heap space exists as long as the application runs</td></tr><tr><td>Efficiency</td><td>Comparatively much faster to allocate when compared to heap</td><td>Slower to allocate when compared to stack</td></tr><tr><td>Allocation/Deallocation</td><td>This Memory is automatically allocated and deallocated when a method is called and returned respectively</td><td>Heap space is allocated when new objects are created and deallocated by Gargabe Collector when they are no longer referenced</td></tr></tbody></table><h4 id="4-PC-Registers-Program-Counter-Registers"><a href="#4-PC-Registers-Program-Counter-Registers" class="headerlink" title="4. PC Registers(Program Counter Registers)"></a>4. PC Registers(Program Counter Registers)</h4><blockquote><p>For every thread a separate PC register will be created at the time of thread creation. PC register contains address of current executing instruction. Once instruction execution completes automatically PC register will be incremented to hold address of next instruction. An â€œaddressâ€ can be a native pointer or an offset from the beginning of a methodâ€™s byte codes.   </p></blockquote><h4 id="5-Native-Method-Stacks"><a href="#5-Native-Method-Stacks" class="headerlink" title="5. Native Method Stacks"></a>5. Native Method Stacks</h4><blockquote><p>Here also for every Thread a separate run time stack will be created. It contains all the native methods used in the application. Native method means methods written in a language other than the Java programming language. In other words, it is a stack used to execute C/C++ codes invoked through JNI (Java Native Interface). According to the language, a C stack or C++ stack is created.</p></blockquote><h3 id="Execution-Engine"><a href="#Execution-Engine" class="headerlink" title="Execution Engine"></a>Execution Engine</h3><h4 id="1-Interpreter"><a href="#1-Interpreter" class="headerlink" title="1. Interpreter"></a>1. Interpreter</h4><blockquote><p>It is responsible to read byte code and interpret into machine code (native code) and execute that machine code line by line. </p></blockquote><h4 id="2-JIT-Compiler"><a href="#2-JIT-Compiler" class="headerlink" title="2. JIT Compiler"></a>2. JIT Compiler</h4><blockquote><p>The JIT compiler has been introduced to compensate for the disadvantages of the interpreter. The main purpose of JIT compiler is to improve the performance. Internally JIT compiler maintains a separate count for every method. Whenever JVM across any method call, first that method will be interpreted normally by the interpreter and JIT compiler increments the corresponding count variable. </p></blockquote><ul><li><strong>Profiler</strong> which is the part of JIT compiler is responsible to identify Hotspot(Repeated Used Methods).</li></ul><h3 id="Java-Native-Interface-JNI"><a href="#Java-Native-Interface-JNI" class="headerlink" title="Java Native Interface(JNI)"></a>Java Native Interface(JNI)</h3><blockquote><p>JNI is acts as a bridge (Mediator) for java method calls and corresponding native libraries. </p></blockquote><h3 id="å†…å­˜å¤§å°è®¾ç½®"><a href="#å†…å­˜å¤§å°è®¾ç½®" class="headerlink" title="å†…å­˜å¤§å°è®¾ç½®"></a>å†…å­˜å¤§å°è®¾ç½®</h3><ul><li>åœ¨å‘½ä»¤è¡Œä¸‹ç”¨  java -Xmx1200m -XX:Max Perm Size=60m -version å‘½ä»¤æ¥è¿›è¡Œæµ‹è¯•ï¼Œç„¶åé€æ¸çš„å¢å¤§XXXXçš„å€¼ï¼Œå¦‚æœæ‰§è¡Œæ­£å¸¸å°±è¡¨ç¤ºæŒ‡å®šçš„å†…å­˜å¤§å°å¯ç”¨ï¼Œå¦åˆ™ä¼šæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚<br>æœ€åå¾—åˆ°çš„è™šæ‹Ÿæœºå®é™…åˆ†é…åˆ°çš„<br>æ€»å†…å­˜å¤§å°=å †å†…å­˜+éå †å†…å­˜<br>1200mï¼šä¸ºå †å†…å­˜å¤§å°ï¼Œå¦‚æœä¸æŒ‡å®šåè€…å‚æ•°åˆ™æœ‰æœ€å¤§æ•°é™åˆ¶ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« è®¤ä¸ºè¿™å°±æ˜¯JVMå†…å­˜ï¼Œ -Xmxä¸ºè®¾ç½®æœ€å¤§å †å†…å­˜<br>60mï¼š ä¸ºéå †å†…å­˜å¤§å°ï¼Œ -XX: Max PermSizeå®ä¸º æ°¸ä¹…åŸŸå†…å­˜ï¼Œåœ¨å †å†…å­˜ä¹‹å¤–ï¼Œå±äºéå †å†…å­˜éƒ¨åˆ†ï¼Œjdk1.5æˆ‘æµ‹äº†å¥½åƒé»˜è®¤ä¸º62mï¼Œå³å¾—åˆ°éå †éƒ¨åˆ†é»˜è®¤å†…å­˜ï¼‰</li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>maven snippet</title>
      <link href="/2018/01/09/maven%20snippet/"/>
      <url>/2018/01/09/maven%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="å‘½ä»¤ä»‹ç»"><a href="#å‘½ä»¤ä»‹ç»" class="headerlink" title="å‘½ä»¤ä»‹ç»"></a>å‘½ä»¤ä»‹ç»</h3><ol><li><strong>mvn compile</strong> ç¼–è¯‘,å°†Java æºç¨‹åºç¼–è¯‘æˆ class å­—èŠ‚ç æ–‡ä»¶ã€‚</li><li><strong>mvn test</strong> æµ‹è¯•ï¼Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</li><li><strong>mvn clean</strong> å°†ä»¥å‰ç¼–è¯‘å¾—åˆ°çš„æ—§çš„ class å­—èŠ‚ç æ–‡ä»¶åˆ é™¤</li><li><strong>mvn pakage</strong> æ‰“åŒ…,åŠ¨æ€ webå·¥ç¨‹æ‰“ waråŒ…ï¼ŒJavaå·¥ç¨‹æ‰“ jar åŒ…ã€‚</li><li><strong>mvn install</strong> å°†é¡¹ç›®ç”Ÿæˆ jar åŒ…æ”¾åœ¨ä»“åº“ä¸­ï¼Œä»¥ä¾¿åˆ«çš„æ¨¡å—è°ƒç”¨</li><li><a href="https://www.cnblogs.com/zhangxh20/p/6298062.html" target="_blank" rel="noopener">Mavençš„å‡ ä¸ªå¸¸ç”¨plugin</a></li></ol><h3 id="tomcaté¡¹ç›®çš„éƒ¨ç½²"><a href="#tomcaté¡¹ç›®çš„éƒ¨ç½²" class="headerlink" title="tomcaté¡¹ç›®çš„éƒ¨ç½²"></a>tomcaté¡¹ç›®çš„éƒ¨ç½²</h3><ul><li>å‚ç…§ <a href="https://blog.csdn.net/u012076316/article/details/46907823" target="_blank" rel="noopener">tomcat è®¾ç½®çƒ­éƒ¨ç½²</a></li><li>å‚ç…§<a href="http://www.jb51.net/article/117334.htm" target="_blank" rel="noopener">warå’Œwar explodedåŒºåˆ«åŠé—®é¢˜æ±‡æ€»</a></li><li>å‚ç…§<a href="https://www.jianshu.com/p/fb0ed26c35d5" target="_blank" rel="noopener">tomcatéƒ¨ç½²çš„ä¸åŒæ–¹å¼</a></li><li>å¯åŠ¨é¡¹ç›®æ—¶ï¼Œå¦‚æœteståŒ…é‡Œé¢æœ‰æµ‹è¯•ç¨‹åºï¼Œä¸ºäº†å¿½ç•¥ç¼–è¯‘testæµ‹è¯•ç¨‹åºï¼Œéœ€è¦è¿è¡Œå‘½ä»¤æ‰“åŒ…<code>mvn clean package -DskipTests</code>ï¼Œå¦å¤–è¿è¡Œtomcatçš„æ—¶å€™ä»¥debugæ¨¡å¼è¿›è¡Œå¯åŠ¨ã€‚</li></ul><h3 id="mavenå¤šé¡¹ç›®ä¹‹é—´ç›¸äº’å¼•ç”¨"><a href="#mavenå¤šé¡¹ç›®ä¹‹é—´ç›¸äº’å¼•ç”¨" class="headerlink" title="mavenå¤šé¡¹ç›®ä¹‹é—´ç›¸äº’å¼•ç”¨"></a>mavenå¤šé¡¹ç›®ä¹‹é—´ç›¸äº’å¼•ç”¨</h3><ul><li>åº”è¯¥åœ¨çˆ¶ç›®å½•ä¸‹è¿›è¡Œmaven installæ“ä½œï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå­æ¨¡å—çš„jaræˆ–waråŒ…ã€‚</li></ul><ul><li><p><strong>è§£å†³mavenæ— æ³•åŠ è½½æœ¬åœ°lib/ä¸‹çš„jaråŒ…é—®é¢˜(ç¨‹åºåŒ…XXXä¸å­˜åœ¨)</strong></p><ul><li><p>åŸå› </p><p>è‹¥è¯¥ç¨‹åºåŒ…æ˜¯ç¬¬ä¸‰æ–¹çš„jarï¼Œè§£å†³æ–¹æ¡ˆæ˜¯è®©mavenæ—¢åŠ è½½mavenåº“ä¸­çš„jaråŒ…ï¼Œåˆè¦åŠ è½½æœ¬åœ°WEB-INF/libä¸‹çš„jaråŒ…ã€‚ </p></li><li><p>è§£å†³</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;3.6.0&lt;/version&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;source&gt;1.8&lt;/source&gt;</span><br><span class="line">&lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">&lt;encoding&gt;UTF-8&lt;/encoding&gt;</span><br><span class="line">&lt;compilerArguments&gt;</span><br><span class="line">&lt;extdirs&gt;$&#123;project.basedir&#125;/src/main/webapp/WEB-INF/lib&lt;/extdirs&gt;</span><br><span class="line">&lt;/compilerArguments&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="åˆ›å»ºæœ¬åœ°å¼•ç”¨åŒ…"><a href="#åˆ›å»ºæœ¬åœ°å¼•ç”¨åŒ…" class="headerlink" title="åˆ›å»ºæœ¬åœ°å¼•ç”¨åŒ…"></a>åˆ›å»ºæœ¬åœ°å¼•ç”¨åŒ…</h2><h4 id="1-ç›´æ¥å¼•ç”¨æœ¬åœ°jar"><a href="#1-ç›´æ¥å¼•ç”¨æœ¬åœ°jar" class="headerlink" title="1.ç›´æ¥å¼•ç”¨æœ¬åœ°jar"></a>1.ç›´æ¥å¼•ç”¨æœ¬åœ°jar</h4><p>å°†jaræ”¾åœ¨é¡¹ç›®ä¸­ï¼Œä¾‹å¦‚webé¡¹ç›®å°±æ”¾åœ¨ <code>webapp/WEB-INF/lib</code>ä¸‹é¢<br>ç„¶åå†<code>pom.xml</code>ä¸­æ·»åŠ jarçš„ä¾èµ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;myjar&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;myjar&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">    &lt;systemPath&gt;$&#123;project.basedir&#125;/webapp/WEB-INF/lib/myjar-1.0.0.jar&lt;/systemPath&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="2-å®‰è£…åˆ°æœ¬åœ°ä»“åº“"><a href="#2-å®‰è£…åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="2.å®‰è£…åˆ°æœ¬åœ°ä»“åº“"></a>2.å®‰è£…åˆ°æœ¬åœ°ä»“åº“</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -Dfile=xxx.jar -DgroupId=xx.xxx.xx -DartifactId=xx -Dversion=xx -Dpackaging=jar</span><br><span class="line"></span><br><span class="line">å‚æ•°è¯´æ˜:</span><br><span class="line">-DgroupId:å¯¹åº”dependencyçš„groupId</span><br><span class="line">-DartifactId:å¯¹åº”dependencyçš„artifactId</span><br><span class="line">-Dversion:å¯¹åº”dependencyä¸­çš„version</span><br><span class="line">-Dpackaging:å®‰è£…çš„ç±»å‹ï¼Œjaræˆ–è€…pom</span><br><span class="line">-Dfile:è¦å®‰è£…çš„jaræ–‡ä»¶çš„è·¯å¾„</span><br></pre></td></tr></table></figure><h2 id="ä¾èµ–ä¼ é€’åŸåˆ™"><a href="#ä¾èµ–ä¼ é€’åŸåˆ™" class="headerlink" title="ä¾èµ–ä¼ é€’åŸåˆ™"></a>ä¾èµ–ä¼ é€’åŸåˆ™</h2><p>å‡ ä¹æ‰€æœ‰çš„JaråŒ…å†²çªéƒ½å’Œä¾èµ–ä¼ é€’åŸåˆ™æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè¯´Mavenä¸­çš„ä¾èµ–ä¼ é€’åŸåˆ™ï¼š</p><p><strong>æœ€çŸ­è·¯å¾„ä¼˜å…ˆåŸåˆ™</strong></p><p>å‡å¦‚å¼•å…¥äº†2ä¸ªJaråŒ…Aå’ŒBï¼Œéƒ½ä¼ é€’ä¾èµ–äº†Zè¿™ä¸ªJaråŒ…ï¼š</p><p>A -&gt; X -&gt; Y -&gt; Z(2.5)<br>B -&gt; X -&gt; Z(2.0)</p><p>é‚£å…¶å®æœ€ç»ˆç”Ÿæ•ˆçš„æ˜¯Z(2.0)è¿™ä¸ªç‰ˆæœ¬ã€‚å› ä¸ºä»–çš„è·¯å¾„æ›´åŠ çŸ­ã€‚å¦‚æœæˆ‘æœ¬åœ°å¼•ç”¨äº†Z(3.0)çš„åŒ…ï¼Œé‚£ç”Ÿæ•ˆçš„å°±æ˜¯3.0çš„ç‰ˆæœ¬ã€‚ä¸€æ ·çš„é“ç†ã€‚</p><p><strong>æœ€å…ˆå£°æ˜ä¼˜å…ˆåŸåˆ™</strong></p><p>å¦‚æœè·¯å¾„é•¿çŸ­ä¸€æ ·ï¼Œä¼˜å…ˆé€‰æœ€å…ˆå£°æ˜çš„é‚£ä¸ªã€‚</p><p>A -&gt; Z(3.0)<br>B -&gt; Z(2.5)</p><p>è¿™é‡ŒAæœ€å…ˆå£°æ˜ï¼Œæ‰€ä»¥ä¼ é€’è¿‡æ¥çš„Zé€‰æ‹©ç”¨3.0ç‰ˆæœ¬çš„ã€‚</p><h1 id="ç›¸å…³é—®é¢˜"><a href="#ç›¸å…³é—®é¢˜" class="headerlink" title="ç›¸å…³é—®é¢˜"></a>ç›¸å…³é—®é¢˜</h1><ul><li><a href="https://www.cnblogs.com/baixiaoshuai/p/8939989.html" target="_blank" rel="noopener">ideaä¸­çš„mavenæ¨¡å—å˜æˆç°è‰²çš„å¯èƒ½åŸå› </a></li><li><a href="https://blog.csdn.net/qq_38663729/article/details/78275209" target="_blank" rel="noopener">jaråŒ…å’ŒwaråŒ…çš„ä»‹ç»ä¸åŒºåˆ«</a></li></ul><ul><li>ç”±äºæ²¡æœ‰mvn installæ“ä½œï¼Œæ²¡æœ‰åœ¨æœ¬åœ°ä¸‹è½½ä¾èµ–åŒ…åˆ°libç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯åŠ¨é¡¹ç›®ï¼Œä¼šæç¤ºjava.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListeneré”™è¯¯</li></ul>]]></content>
      
      <categories>
          
          <category> maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java design pattern</title>
      <link href="/2017/12/20/java%20design%20pattern/"/>
      <url>/2017/12/20/java%20design%20pattern/</url>
      <content type="html"><![CDATA[<h2 id="Creational-Design-Patterns"><a href="#Creational-Design-Patterns" class="headerlink" title="Creational Design Patterns"></a>Creational Design Patterns</h2><blockquote><p>These design patterns provide a way to create objects while hiding the creation logic, rather than instantiating objects directly using new operator. This gives program more flexibility in deciding which objects need to be created for a given use case.</p></blockquote><h3 id="Singleton"><a href="#Singleton" class="headerlink" title="Singleton"></a>Singleton</h3><blockquote><p>In Factory pattern, we create object without exposing the creation logic to the client and refer to newly created object using a common interface.</p></blockquote><ul><li><p>different approaches to implement:</p><ul><li>Private constructor to restrict instantiation of the class from other classes.</li><li>Private static variable of the same class that is the only instance of the class.</li><li>Public static method that returns the instance of the class, this is the global access point for outer world to get the instance of the singleton class.</li></ul></li><li><p>design concerns with the implementation</p><ul><li>Eager initialization</li><li>Static block initialization</li><li>Lazy Initialization</li><li>Thread Safe Singleton</li><li>Bill Pugh Singleton Implementation</li><li>Using Reflection to destroy Singleton Pattern</li><li>Enum Singleton</li><li>Serialization and Singleton</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SingleObject.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//create an object of SingleObject</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SingleObject instance = <span class="keyword">new</span> SingleObject();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//make the constructor private so that this class cannot be</span></span><br><span class="line">   <span class="comment">//instantiated</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">SingleObject</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//Get the only object available</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> instance;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SingletonPatternDemo.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonPatternDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//illegal construct</span></span><br><span class="line">      <span class="comment">//Compile Time Error: The constructor SingleObject() is not visible</span></span><br><span class="line">      <span class="comment">//SingleObject object = new SingleObject();</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//Get the only object available</span></span><br><span class="line">      SingleObject object = SingleObject.getInstance();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//show the message</span></span><br><span class="line">      object.showMessage();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h3><ul><li>Factory design pattern provides approach to code for interface rather than implementation.</li><li>Factory pattern removes the instantiation of actual implementation classes from client code. Factory pattern makes our code more robust, less coupled and easy to extend. For example, we can easily change PC class implementation because client program is unaware of this.</li><li>Factory pattern provides abstraction between implementation and client classes through inheritance.</li></ul><h3 id="Abstract-Factory"><a href="#Abstract-Factory" class="headerlink" title="Abstract Factory"></a>Abstract Factory</h3><ul><li>Abstract Factory design pattern provides approach to code for interface rather than implementation.</li><li>Abstract Factory pattern is â€œfactory of factoriesâ€ and can be easily extended to accommodate more products, for example we can add another sub-class Laptop and a factory LaptopFactory.</li><li>Abstract Factory pattern is robust and avoid conditional logic of Factory pattern.</li></ul><h3 id="Builder"><a href="#Builder" class="headerlink" title="Builder"></a>Builder</h3><ul><li>Builder pattern solves the issue with large number of optional parameters and inconsistent state by providing a way to build the object step-by-step and provide a method that will actually return the final Object.</li></ul><h3 id="Prototype"><a href="#Prototype" class="headerlink" title="Prototype"></a>Prototype</h3><ul><li>Prototype design pattern is used when the Object creation is a costly affair and requires a lot of time and resources and you have a similar object already existing.Prototype pattern provides a mechanism to copy the original object to a new object and then modify it according to our needs. Prototype design pattern uses java cloning to copy the object.</li></ul><h2 id="Structural-Design-Patterns"><a href="#Structural-Design-Patterns" class="headerlink" title="Structural Design Patterns"></a>Structural Design Patterns</h2><blockquote><p>These design patterns concern class and object composition. Concept of inheritance is used to compose interfaces and define ways to compose objects to obtain new functionalities.</p></blockquote><h3 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h3><ul><li>Adapter design pattern is one of the structural design pattern and its used so that two unrelated interfaces can work together. The object that joins these unrelated interface is called an Adapter.</li></ul><h3 id="Composite"><a href="#Composite" class="headerlink" title="Composite"></a>Composite</h3><ul><li>Composite design pattern is used when we have to represent a part-whole hierarchy.</li></ul><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><ul><li>Proxy design pattern common uses are to control access or to provide a wrapper implementation for better performance.</li></ul><h3 id="Flyweight"><a href="#Flyweight" class="headerlink" title="Flyweight"></a>Flyweight</h3><ul><li>Use sharing to support large numbers of fine-grained objects efficiently</li></ul><h3 id="Facade"><a href="#Facade" class="headerlink" title="Facade"></a>Facade</h3><ul><li>Provide a unified interface to a set of interfaces in a subsystem. Facade Pattern defines a higher-level interface that makes the subsystem easier to use.</li></ul><h3 id="Bridge"><a href="#Bridge" class="headerlink" title="Bridge"></a>Bridge</h3><ul><li>Decouple an abstraction from its implementation so that the two can vary independently.</li></ul><h3 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h3><ul><li>Decorator design pattern is helpful in providing runtime modification abilities and hence more flexible. Its easy to maintain and extend when the number of choices are more.</li><li>The disadvantage of decorator design pattern is that it uses a lot of similar kind of objects (decorators).</li></ul><h2 id="Behavioral-Design-Patterns"><a href="#Behavioral-Design-Patterns" class="headerlink" title="Behavioral Design Patterns"></a>Behavioral Design Patterns</h2><blockquote><p>These design patterns are specifically concerned with communication between objects.</p></blockquote><h3 id="Template-Method"><a href="#Template-Method" class="headerlink" title="Template Method"></a>Template Method</h3><ul><li>Template method should consists of certain steps whose order is fixed and for some of the methods, implementation differs from base class to subclass. Template method should be final.</li><li>Most of the times, subclasses calls methods from super class but in template pattern, superclass template method calls methods from subclasses, this is known as Hollywood Principle â€“ â€œdonâ€™t call us, weâ€™ll call you.â€.</li><li>Methods in base class with default implementation are referred as Hooks and they are intended to be overridden by subclasses, if you want some of the methods to be not overridden, you can make them final, for example in our case we can make buildFoundation() method final because if we donâ€™t want subclasses to override it.</li></ul><h3 id="Media"><a href="#Media" class="headerlink" title="Media"></a>Media</h3><ul><li>Allows loose coupling by encapsulating the way disparate sets of objects interact and communicate with each other. Allows for the actions of each object set to vary independently of one another.</li></ul>]]></content>
      
      <categories>
          
          <category> design pattern </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>spring aop</title>
      <link href="/2017/12/18/spring%20aop/"/>
      <url>/2017/12/18/spring%20aop/</url>
      <content type="html"><![CDATA[<h3 id="Architectural"><a href="#Architectural" class="headerlink" title="Architectural"></a>Architectural</h3><p><img src="https://www.baeldung.com/wp-content/uploads/2017/11/Program_Execution.jpg" alt=""></p><h3 id="Business-Object"><a href="#Business-Object" class="headerlink" title="Business Object"></a>Business Object</h3><blockquote><p><strong>A business object is a normal class which has a normal business logic.</strong></p></blockquote><h3 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h3><blockquote><p><strong>An aspect is a modularization of a concern that cuts across multiple classes.</strong></p></blockquote><h3 id="JoinPoint"><a href="#JoinPoint" class="headerlink" title="JoinPoint"></a>JoinPoint</h3><blockquote><p><strong>A Joinpoint is a point during the execution of a program, such as execution of a method or the handling of an exception.</strong></p></blockquote><p>In Spring AOP, a <em>JoinPoint</em> always represents a method execution.</p><h3 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h3><blockquote><p><strong>A Pointcut is a predicate that helps match an <em>Advice</em> to be applied by an <em>Aspect</em> at a particular <em>JoinPoint</em>.</strong></p></blockquote><p>The Advice is often associated with a <em>Pointcut</em> expression and runs at any <em>Joinpoint</em> matched by the Pointcut.</p><h3 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h3><blockquote><p><strong>An advice is an action taken by an aspect at a particular <em>Joinpoint</em>. Different types of advice include <em>â€œaround,â€ â€œbeforeâ€</em> and <em>â€œafterâ€</em> advice.</strong></p></blockquote><p>In Spring, an <em>Advice</em> is modeled as an interceptor, maintaining a chain of interceptors around the <em>Joinpoint</em>.</p><hr><h3 id="Example-Wiring-Business-Object-and-Aspect"><a href="#Example-Wiring-Business-Object-and-Aspect" class="headerlink" title="Example:Wiring Business Object and Aspect"></a>Example:Wiring Business Object and Aspect</h3><ul><li><p>Business Object</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleAdder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>a simple Aspect</p><p>Unified logging can be an example of such cross-cutting concern:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdderAfterReturnAspect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturn</span><span class="params">(Object returnValue)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"value return was &#123;&#125;"</span>,  returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>config excerpt</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sampleAdder"</span> <span class="attr">class</span>=<span class="string">"org.xxx.SampleAdder"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"doAfterReturningAspect"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"org.xxx.AdderAfterReturnAspect"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"aspects"</span> <span class="attr">ref</span>=<span class="string">"doAfterReturningAspect"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointCutAfterReturning"</span> <span class="attr">expression</span>=</span></span><br><span class="line"><span class="tag">         "<span class="attr">execution</span>(* <span class="attr">org.xxx.SampleAdder</span>+<span class="attr">.</span>*(<span class="attr">..</span>))"/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturn"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">returning</span>=<span class="string">"returnValue"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointCutAfterReturning"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><blockquote><p>ä¾èµ–æ³¨å…¥DIæœ‰åŠ©äºåº”ç”¨å¯¹è±¡ä¹‹é—´çš„è§£è€¦ï¼Œè€ŒAOPå¯ä»¥å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸å®ƒä»¬æ‰€å½±å“çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦</p></blockquote><ul><li><p>é€šçŸ¥Advice</p><blockquote><p>åˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œé€šçŸ¥å®šä¹‰äº†åˆ‡é¢æ˜¯ä»€ä¹ˆä»¥åŠä½•æ—¶ä½¿ç”¨ã€‚</p></blockquote><ul><li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½</li><li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡º</li><li>è¿”å›é€šçŸ¥ï¼ˆAfter-returningï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥</li><li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li></ul></li><li><p>è¿æ¥ç‚¹Join point</p><blockquote><p>è¿æ¥ç‚¹æ˜¯åº”ç”¨ç¨‹åºçš„ç‚¹ï¼Œå¯ä¾›æ’å…¥åˆ‡é¢</p><p>æˆ‘ç†è§£çš„æ˜¯ç¨‹åºçš„æŸå¤„ï¼Œæˆ–è€…ä»»æ„ä¸€å¤„éƒ½å¯ä»¥ç§°ä½œä¸ºè¿æ¥ç‚¹</p></blockquote></li><li><p>åˆ‡ç‚¹Pointcut</p><blockquote><p>åˆ‡ç‚¹æœ‰åŠ©äºç¼©å°åˆ‡é¢æ‰€é€šçŸ¥çš„è¿æ¥ç‚¹çš„èŒƒå›´</p><p>å¦‚æœAdviceå®šä¹‰äº†åˆ‡é¢çš„whatå’Œwhen,é‚£ä¹ˆpointcutå°±å®šä¹‰äº†where</p></blockquote></li><li><p>åˆ‡é¢Aspect</p><blockquote><p>Aspectæ˜¯Adviceå’ŒPointcutçš„ç»“åˆ</p></blockquote></li></ul>]]></content>
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>rpc snippet</title>
      <link href="/2017/12/16/rpc%20snippet/"/>
      <url>/2017/12/16/rpc%20snippet/</url>
      <content type="html"><![CDATA[<p>RPC<br>Remote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨</p><hr><p>æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å¤§å¤šé‡‡ç”¨rpcçš„æ–¹å¼è°ƒç”¨ï¼Œæˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼è¿›è¡Œè§£è€¦ã€‚</p><p>RPCä¸httpè°ƒç”¨çš„åŒºåˆ«<br>rpcæ˜¯åŸºäºTCP/IPåè®®çš„ï¼Œè€ŒHTTPæœåŠ¡ä¸»è¦æ˜¯åŸºäºHTTPåè®®çš„ï¼Œè€Œhttpåè®®æ˜¯åœ¨ä¼ è¾“å±‚åè®®TCPä¹‹ä¸Šçš„ã€‚æ‰€ä»¥rpcæ•ˆç‡æ›´å¥½ã€‚</p><p>RPCæ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤å°æœåŠ¡å™¨Aï¼ŒBï¼Œä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨AæœåŠ¡å™¨ä¸Šï¼Œæƒ³è¦è°ƒç”¨BæœåŠ¡å™¨ä¸Šåº”ç”¨æä¾›çš„å‡½æ•°/æ–¹æ³•ï¼Œ<br>ç”±äºä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚</p><p>ç”±äºè®¡ç®—èƒ½åŠ›éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œéœ€è¦åœ¨å¤šå°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ã€‚</p>]]></content>
      
      <categories>
          
          <category> rpc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>restful snippet</title>
      <link href="/2017/12/08/restful%20snippet/"/>
      <url>/2017/12/08/restful%20snippet/</url>
      <content type="html"><![CDATA[<ul><li><strong>GET</strong>: A safe read-only method that reads a single or a list of resources.</li><li><strong>POST</strong>: Creates a new resource.</li><li><strong>PUT</strong>: Completely replaces the resource(s) at the given location with the new data.</li><li><strong>PATCH</strong>: Merges the resource(s) at the given location with the new data.</li><li><strong>DELETE</strong>: Deletes the resource(s) at a location.</li><li><strong>HEAD</strong>: Same as GET but only returns the header and no data.</li></ul><p><strong>ç”¨ URL è¡¨ç¤ºè¦æ“ä½œçš„èµ„æºï¼Œç”¨ä¸åŒçš„ HTTP è¯·æ±‚ï¼ˆGETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEï¼‰æè¿°å¯¹èµ„æºçš„æ“ä½œï¼Œé€šè¿‡ HTTP çš„çŠ¶æ€ç æ¥åˆ¤æ–­æ­¤æ¬¡å¯¹èµ„æºæ“ä½œçš„ç»“æœ</strong>ï¼Œè¿™å°±æ˜¯ Restfulé£æ ¼ã€‚ </p><ol><li>GET ç”¨æ¥è·å–èµ„æº</li><li>POST ç”¨æ¥æ–°å¢èµ„æº</li><li>PUT ç”¨æ¥æ›´æ–°èµ„æº</li><li>DELETE ç”¨æ¥åˆ é™¤èµ„æº</li></ol><ul><li>putå’Œdeleteè™½ç„¶æ˜¯httpåè®®çš„è§„èŒƒ ,ä½†æ˜¯é—æ†¾çš„æ˜¯,æ‰€æœ‰çš„æ— è®ºæ˜¯html4è¿˜æ˜¯h5éƒ½ä¸æ”¯æŒ,æ‰€ä»¥æˆ‘ä»¬åœ¨å®é™…å¼€å¼€å‘è¿‡ç¨‹å½“ä¸­è¦æ¨¡æ‹Ÿè¿™ä¸¤ç§çŠ¶æ€ã€‚ </li></ul><h3 id="Restfulæœ‰ä»€ä¹ˆæ„ä¹‰"><a href="#Restfulæœ‰ä»€ä¹ˆæ„ä¹‰" class="headerlink" title="Restfulæœ‰ä»€ä¹ˆæ„ä¹‰"></a>Restfulæœ‰ä»€ä¹ˆæ„ä¹‰</h3><ul><li>ç½‘ç»œä¸Šçš„æ‰€æœ‰çš„ä¿¡æ¯ä½“éƒ½çœ‹ä½œä¸€ç§èµ„æºï¼Œå¯¹ç½‘ç»œèµ„æºçš„æŸç§æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡ method æ¥ç¡®å®šçš„ã€‚ </li><li>å¯¹äºç°åœ¨çš„æ•°æ®æˆ–è€…èµ„æºæä¾›æ–¹ï¼Œå¯¹å¤–é€éœ²çš„æ¥å£ä¸€èˆ¬æ˜¯ restful é£æ ¼çš„ï¼Œæœ‰åˆ©äºä¸åŒç³»ç»Ÿä¹‹é—´çš„èµ„æºå…±äº«,è€Œä¸”åªéœ€è¦éµå®ˆè§„èŒƒä¸éœ€è¦åšå¦å¤–çš„é…ç½®å°±èƒ½è¾¾åˆ°èµ„æºå…±äº«ã€‚ </li></ul><p><strong>restful æ˜¯ç”¨æ¥å¤–æä¾›æ¥å£çš„ï¼Œä¸»è¦ç”¨äºåœ¨ä¸åŒçš„ç³»ç»Ÿä¹‹é—´è¿›è¡Œæ•°æ®çš„äº¤äº’ã€‚</strong></p><p><strong>psï¼šå…¶å®åœ¨åšå†…éƒ¨ç³»ç»Ÿçš„æ—¶å€™å¹¶ä¸ä¼šä½¿ç”¨ restful é£æ ¼çš„ url è¯·æ±‚ï¼Œåªç”¨æ™®é€šçš„ @RequestMapping æ¥åŒ¹é…è¯·æ±‚å°±è¡Œäº†ã€‚</strong></p>]]></content>
      
      <categories>
          
          <category> restful </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue snippet</title>
      <link href="/2017/12/07/vue%20snippet/"/>
      <url>/2017/12/07/vue%20snippet/</url>
      <content type="html"><![CDATA[<ul><li><p>vueå®ä¾‹åˆå§‹åŒ–è¿‡ç¨‹ï¼š</p><ul><li>è®¾ç½®æ•°æ®ç›‘å¬</li><li>ç¼–è¯‘æ¨¡æ¿</li><li>å°†å®ä¾‹æŒ‚è½½åˆ°DOMå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°DOMç­‰</li></ul></li><li><p>ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šæä¾›ç”¨æˆ·åœ¨ä¸åŒé˜¶æ®µæ·»åŠ è‡ªå·±çš„ä»£ç çš„æœºä¼š</p><ul><li>createdï¼Œç”¨æ¥å®ä¾‹è¢«åˆ›å»ºä¹‹åæ‰§è¡Œä»£ç </li><li>mounted,</li><li>updated,</li><li>destoryed</li></ul></li><li><p>æŒ‡ä»¤ï¼ˆDirectivesï¼‰æ˜¯å¸¦æœ‰<code>v-</code>å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§ã€‚æŒ‡ä»¤ç‰¹æ€§çš„å€¼é¢„æœŸæ˜¯å•ä¸ªJavaScriptè¡¨è¾¾å¼ï¼ˆ<code>v-for</code>æ˜¯ä¾‹å¤–æƒ…å†µï¼‰ï¼ŒæŒ‡ä»¤çš„èŒè´£æ˜¯ï¼šå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äºDOMã€‚</p><ul><li><p><code>v-bind</code>ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºå“åº”å¼åœ°æ›´æ–°HTMLç‰¹æ€§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span><br><span class="line">&lt;a v-bind:href=&quot;url&quot;&gt;...&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¼©å†™ --&gt;</span><br><span class="line">&lt;a :href=&quot;url&quot;&gt;...&lt;/a&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>v-on</code>ï¼Œç”¨äºç›‘å¬DOMäº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span><br><span class="line">&lt;a v-on:click=&quot;doSomething&quot;&gt;...&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¼©å†™ --&gt;</span><br><span class="line">&lt;a @click=&quot;doSomething&quot;&gt;...&lt;/a&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®é¥°ç¬¦<code>v-on:submit.prevent</code>,<code>.prevent</code> ä¿®é¥°ç¬¦å‘Šè¯‰ <code>v-on</code> æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨ <code>event.preventDefault()</code>ã€‚</p></li></ul></li></ul><hr><ul><li><p>è®¡ç®—å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;example&quot;&gt;</span><br><span class="line">  &lt;p&gt;Original message: &quot;&#123;&#123; message &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#example&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: &apos;Hello&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // è®¡ç®—å±æ€§çš„ getter</span><br><span class="line">    reversedMessage: function () &#123;</span><br><span class="line">      // `this` æŒ‡å‘ vm å®ä¾‹</span><br><span class="line">      return this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>è®¡ç®—å±æ€§ç¼“å­˜vsæ–¹æ³•</p><p>åœ¨æ–¹æ³•ä¸­å®ç°åŒè®¡ç®—å±æ€§åŒæ ·çš„æ•ˆæœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Reversed message: &quot;&#123;&#123; reversedMessage() &#125;&#125;&quot;&lt;/p&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨ç»„ä»¶ä¸­</span><br><span class="line">methods: &#123;</span><br><span class="line">  reversedMessage: function () &#123;</span><br><span class="line">    return this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„</strong>ã€‚åªåœ¨ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚ </p></li><li><p>è®¡ç®—å±æ€§vsä¾¦å¬å±æ€§</p><p>ä¾¦å¬å±æ€§çš„ç”¨æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;demo&quot;&gt;&#123;&#123; fullName &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#demo&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Foo&apos;,</span><br><span class="line">    lastName: &apos;Bar&apos;,</span><br><span class="line">    fullName: &apos;Foo Bar&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    firstName: function (val) &#123;</span><br><span class="line">      this.fullName = val + &apos; &apos; + this.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    lastName: function (val) &#123;</span><br><span class="line">      this.fullName = this.firstName + &apos; &apos; + val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸è®¡ç®—å±æ€§çš„ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#demo&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Foo&apos;,</span><br><span class="line">    lastName: &apos;Bar&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    fullName: function () &#123;</span><br><span class="line">      return this.firstName + &apos; &apos; + this.lastName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è®¡ç®—å±æ€§çš„setter</p><p>è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getter ï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setter ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// ...</span><br><span class="line">computed: &#123;</span><br><span class="line">  fullName: &#123;</span><br><span class="line">    // getter</span><br><span class="line">    get: function () &#123;</span><br><span class="line">      return this.firstName + &apos; &apos; + this.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    // setter</span><br><span class="line">    set: function (newValue) &#123;</span><br><span class="line">      var names = newValue.split(&apos; &apos;)</span><br><span class="line">      this.firstName = names[0]</span><br><span class="line">      this.lastName = names[names.length - 1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// ...</span><br></pre></td></tr></table></figure><p>ç°åœ¨å†è¿è¡Œ <code>vm.fullName = &#39;John Doe&#39;</code> æ—¶ï¼Œsetter ä¼šè¢«è°ƒç”¨ï¼Œ<code>vm.firstName</code> å’Œ <code>vm.lastName</code> ä¹Ÿä¼šç›¸åº”åœ°è¢«æ›´æ–°ã€‚ </p></li></ul></li><li><p>ä¾¦å¬å™¨</p><p>ä½¿ç”¨åœºæ™¯ï¼šå½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ </p></li></ul><hr><ul><li><p>æ¡ä»¶æ¸²æŸ“</p><p><code>v-if</code></p></li><li><p>å±•ç¤ºå…ƒç´ </p><p><code>v-show</code>ï¼Œå®ƒåªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„csså±æ€§<code>display</code></p><p><em>**æ³¨æ„</em>ï¼š<code>v-show</code> ä¸æ”¯æŒ <code>&lt;template&gt;</code> å…ƒç´ ï¼Œä¹Ÿä¸æ”¯æŒ <code>v-else</code>ã€‚ </p><ul><li><p><code>v-if</code>vs<code>v-show</code></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>v-if</code> æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ <code>v-show</code> æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ <code>v-show</code> è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ <code>v-if</code> è¾ƒå¥½ã€‚ </p></li></ul></li><li><p>åˆ—è¡¨æ¸²æŸ“</p><p><code>v-for</code></p><ul><li><p>å®ä¾‹ä¸€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;example-1&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">    &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var example1 = new Vue(&#123;</span><br><span class="line">  el: &apos;#example-1&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [</span><br><span class="line">      &#123; message: &apos;Foo&apos; &#125;,</span><br><span class="line">      &#123; message: &apos;Bar&apos; &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å®ä¾‹äºŒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;example-2&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;(item, index) in items&quot;&gt;</span><br><span class="line">    &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var example2 = new Vue(&#123;</span><br><span class="line">  el: &apos;#example-2&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    parentMessage: &apos;Parent&apos;,</span><br><span class="line">    items: [</span><br><span class="line">      &#123; message: &apos;Foo&apos; &#125;,</span><br><span class="line">      &#123; message: &apos;Bar&apos; &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥ç”¨ of æ›¿ä»£ in ä½œä¸ºåˆ†éš”ç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;item of items&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li><p>å®ä¾‹ä¸‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#v-for-object&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    object: &#123;</span><br><span class="line">      firstName: &apos;John&apos;,</span><br><span class="line">      lastName: &apos;Doe&apos;,</span><br><span class="line">      age: 30</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;v-for-object&quot; class=&quot;demo&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;value in object&quot;&gt;</span><br><span class="line">    &#123;&#123; value &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;(value, key) in object&quot;&gt;</span><br><span class="line">  &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;(value, key, index) in object&quot;&gt;</span><br><span class="line">  &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ•°ç»„æ›´æ–°æ£€æµ‹</p><ul><li>å˜å¼‚æ–¹æ³•ï¼Œä¼šæ”¹å˜è¢«è¿™äº›æ–¹æ³•è°ƒç”¨çš„åŸå§‹æ•°ç»„ <ul><li><code>push()</code></li><li><code>pop()</code></li><li><code>shift()</code></li><li><code>unshift()</code></li><li><code>splice()</code></li><li><code>sort()</code></li><li><code>reverse()</code></li></ul></li><li>ä¹Ÿæœ‰éå˜å¼‚ (non-mutating method) æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>filter()</code>, <code>concat()</code> å’Œ <code>slice()</code> ã€‚è¿™äº›ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼Œä½†<strong>æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</strong>ã€‚</li></ul><hr></li><li><p>vueç»„ä»¶å®ä¾‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶</span><br><span class="line">Vue.component(&apos;button-counter&apos;, &#123;</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: &apos;&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>propå¯ä»¥åœ¨ç»„ä»¶ä¸Šæ³¨å†Œçš„ä¸€äº›è‡ªå®šä¹‰ç‰¹æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&apos;blog-post&apos;, &#123;</span><br><span class="line">  props: [&apos;title&apos;],</span><br><span class="line">  template: &apos;&lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post title=&quot;My journey with Vue&quot;&gt;&lt;/blog-post&gt;</span><br><span class="line">&lt;blog-post title=&quot;Blogging with Vue&quot;&gt;&lt;/blog-post&gt;</span><br><span class="line">&lt;blog-post title=&quot;Why Vue is so fun&quot;&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨å†…å»ºçš„ <a href="https://cn.vuejs.org/v2/api/#vm-emit" target="_blank" rel="noopener"><strong>$emit</strong> æ–¹æ³•</a>å¹¶ä¼ å…¥äº‹ä»¶çš„åå­—ï¼Œæ¥å‘çˆ¶çº§ç»„ä»¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&quot;$emit(&apos;enlarge-text&apos;)&quot;&gt;</span><br><span class="line">  Enlarge text</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨ <code>v-on</code> åœ¨åšæ–‡ç»„ä»¶ä¸Šç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå°±åƒç›‘å¬ä¸€ä¸ªåŸç”Ÿ DOM äº‹ä»¶ä¸€æ · </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post</span><br><span class="line">...</span><br><span class="line">v-on:enlarge-text=&quot;postFontSize += 0.1&quot;</span><br><span class="line">&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="ç»„ä»¶æ³¨å†Œ"><a href="#ç»„ä»¶æ³¨å†Œ" class="headerlink" title="ç»„ä»¶æ³¨å†Œ"></a>ç»„ä»¶æ³¨å†Œ</h3><ul><li><p>å…¨å±€æ³¨å†Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&apos;my-component-name&apos;, &#123;</span><br><span class="line">  // ... é€‰é¡¹ ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å±€éƒ¨æ³¨å†Œ</p><p>å®šä¹‰ç»„ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var ComponentA = &#123; /* ... */ &#125;</span><br><span class="line">var ComponentB = &#123; /* ... */ &#125;</span><br><span class="line">var ComponentC = &#123; /* ... */ &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç»„ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">el: &apos;#app&apos;,</span><br><span class="line">components: &#123;</span><br><span class="line">  &apos;component-a&apos;: ComponentA,</span><br><span class="line">  &apos;component-b&apos;: ComponentB</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p><strong>å…¨å±€æ³¨å†Œçš„è¡Œä¸ºå¿…é¡»åœ¨æ ¹ Vue å®ä¾‹ (é€šè¿‡ new Vue) åˆ›å»ºä¹‹å‰å‘ç”Ÿ</strong> </p><hr><h3 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h3>]]></content>
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>neo4j snippet</title>
      <link href="/2017/11/21/neo4j%20snippet/"/>
      <url>/2017/11/21/neo4j%20snippet/</url>
      <content type="html"><![CDATA[<ul><li>cypherè¯­æ³•å¯¹å¤§å°å†™æ•æ„Ÿï¼Œæ³¨æ„å±æ€§çš„å¤§å°å†™</li><li>å¯¼å…¥csvå‡ºç°ä¹±ç æ—¶ï¼Œéœ€è¦é€šè¿‡è®°äº‹æœ¬æ›´æ”¹ç¼–ç æ ¼å¼ï¼Œå¦‚æœæ–‡æœ¬è¿‡å¤§ï¼Œéœ€è¦ä¸€æ®µä¸€æ®µçš„å¤åˆ¶ç²˜è´´åˆ°æ–°æ–‡æœ¬ä¸­ï¼Œä¸”ä»¥UTF-8æ ¼å¼ç¼–ç </li><li>MERGEå‘½ä»¤æ˜¯CREATEå‘½ä»¤å’ŒMATCHå‘½ä»¤çš„ç»„åˆã€‚<code>MERGE = CREATE + MATCH</code></li></ul><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>1.<br>â€‹    <strong>ç°è±¡</strong>ï¼š åœ¨å¤–éƒ¨å¤„ç†csvæ•°æ®ï¼Œå¯¼å…¥æœåŠ¡å™¨ï¼Œç„¶åload csvåˆ°neo4jä¸­ï¼Œå¯èƒ½ç”±äºæ–‡ä»¶æ‰€å±é—®é¢˜ï¼Œä¸èƒ½æˆåŠŸå¯¼å…¥csvï¼Œæç¤º<code>Couldn&#39;t load the external resource</code>çš„é”™è¯¯ã€‚<br>â€‹    <strong>è§£å†³</strong>ï¼šå¤åˆ¶å¯ä»¥å¯¼å…¥çš„csvæ–‡ä»¶ä¸ºå‰¯æœ¬ï¼ŒæŠŠå¾…å¯¼å…¥çš„æ•°æ®ç²˜è´´åˆ°å‰¯æœ¬ä¸­ï¼Œload csvå‰¯æœ¬å³å¯</p><p>2.<br>â€‹    <strong>ç°è±¡</strong>ï¼š åœ¨å¤–éƒ¨å¤„ç†csvæ•°æ®ï¼Œè¿›è¡Œmergeæ“ä½œçš„æ—¶å€™ï¼Œæç¤º<code>cannot merge using null property value for uid</code>çš„é”™è¯¯ã€‚<br>â€‹    <strong>è§£å†³</strong>ï¼šç»å‘ç°ï¼Œæ˜¯ç”±äºæŒ‡ä»¤ä¸­çš„å±æ€§æ‹¼å†™é”™è¯¯ï¼Œå¯¼è‡´<code>Neo.ClientError.Statement.SemanticError</code>çš„é”™è¯¯ï¼Œä¾‹å¦‚æŠŠ<code>sfzh</code>æ‹¼å†™æˆ<code>sfhm</code>ã€‚</p><p>3.<br>â€‹    <strong>ç°è±¡</strong>ï¼š å¤§é‡æ•°æ®çš„å¯¼å…¥é—®é¢˜ã€‚<br>â€‹    <strong>è§£å†³</strong>ï¼šéœ€ä½¿ç”¨<a href="https://neo4j.com/docs/operations-manual/current/tools/import/" title="å¤§é‡æ•°æ®çš„å¯¼å…¥" target="_blank" rel="noopener">https://neo4j.com/docs/operations-manual/current/tools/import/</a><br>â€‹    <strong>æ³¨æ„</strong>ï¼š<code>Import tool is only for newly created databases.</code><br>â€‹        <code>You can use LOAD CSV cypher command to load into an existing database.</code>ä¹Ÿå°±æ˜¯è¯´neo4j-admin importåªä¼šåœ¨æ–°å»ºæ•°æ®åº“çš„æ—¶å€™ä¼šç”¨åˆ°</p>]]></content>
      
      <categories>
          
          <category> neo4j </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jpa snippet</title>
      <link href="/2017/10/16/jpa%20snippet/"/>
      <url>/2017/10/16/jpa%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="What-is"><a href="#What-is" class="headerlink" title="What is"></a>What is</h3><blockquote><p>Java Persistence API is a collection of classes and methods to persistently store the vast amounts of data into a database which is provided by the Oracle Corporation.</p></blockquote><h3 id="Where-to-use"><a href="#Where-to-use" class="headerlink" title="Where to use"></a>Where to use</h3><blockquote><p>To reduce the burden of writing codes for relational object management, a programmer follows the â€˜JPA Providerâ€™ framework, which allows easy interaction with database instance. Here the required framework is taken over by JPA.</p></blockquote><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_provider.png" alt=""></p><ul><li><p>JPA Pro</p><blockquote><p>JPA is an open source API, therefore various enterprise vendors such as Oracle, Redhat, Eclipse, etc. provide new products by adding the JPA persistence flavor in them. Some of these products include:<strong>Hibernate, Eclipselink, Toplink, Spring Data JPA, etc.</strong></p></blockquote></li></ul><h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_class_level_architecture.png" alt=""></p><ul><li><p>jpa class relationships</p><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_class_relationships.png" alt=""></p></li><li><p>ORM Architecture</p><p><img src="https://www.tutorialspoint.com/jpa/images/object_relational_mapping.png" alt=""></p></li></ul><ul><li>Entity Relationships<ul><li>@ManyToOne Relation</li><li>@OneToMany Relation</li><li>@OneToOne Relation</li><li>@ManyToMany Relation</li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> jpa </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java stream</title>
      <link href="/2017/10/16/java%20stream/"/>
      <url>/2017/10/16/java%20stream/</url>
      <content type="html"><![CDATA[<h3 id="Creating-Java-Streams"><a href="#Creating-Java-Streams" class="headerlink" title="Creating Java Streams"></a>Creating Java Streams</h3><ol><li><p>We can use Stream.of() to create a stream from similar type of data. For example, we can create Java Stream of integers from a group of int or Integer objects.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure></li><li><p>We can use Stream.of() with an array of Objects to return the stream. Note that it doesnâ€™t support autoboxing, so we canâ€™t pass primitive type array.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.of(<span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;); </span><br><span class="line"><span class="comment">//works fine</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; stream1 = Stream.of(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;); </span><br><span class="line"><span class="comment">//Compile time error, Type mismatch: cannot convert from Stream&lt;int[]&gt; to Stream&lt;Integer&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>We can use Collection stream() to create sequential stream and parallelStream() to create parallel stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; myList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) myList.add(i);</span><br><span class="line"></span><br><span class="line"><span class="comment">//sequential stream</span></span><br><span class="line">Stream&lt;Integer&gt; sequentialStream = myList.stream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//parallel stream</span></span><br><span class="line">Stream&lt;Integer&gt; parallelStream = myList.parallelStream();</span><br></pre></td></tr></table></figure></li><li><p>We can use Stream.generate() and Stream.iterate() methods to create Stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream1 = Stream.generate(() -&gt; &#123;<span class="keyword">return</span> <span class="string">"abc"</span>;&#125;);</span><br><span class="line">Stream&lt;String&gt; stream2 = Stream.iterate(<span class="string">"abc"</span>, (i) -&gt; i);</span><br></pre></td></tr></table></figure></li><li><p>Using Arrays.stream() and String.chars() methods.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LongStream is = Arrays.stream(<span class="keyword">new</span> <span class="keyword">long</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;);</span><br><span class="line">IntStream is2 = <span class="string">"abc"</span>.chars();</span><br></pre></td></tr></table></figure></li></ol><h3 id="Converting-Java-Stream-to-Collection-or-Array"><a href="#Converting-Java-Stream-to-Collection-or-Array" class="headerlink" title="Converting Java Stream to Collection or Array"></a>Converting Java Stream to Collection or Array</h3><ol><li><p>We can use java Stream collect() method to get List, Map or Set from stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">List&lt;Integer&gt; intList = intStream.collect(Collectors.toList());</span><br><span class="line">System.out.println(intList); <span class="comment">//prints [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>); <span class="comment">//stream is closed, so we need to create it again</span></span><br><span class="line">Map&lt;Integer,Integer&gt; intMap = intStream.collect(Collectors.toMap(i -&gt; i, i -&gt; i+<span class="number">10</span>));</span><br><span class="line">System.out.println(intMap); <span class="comment">//prints &#123;1=11, 2=12, 3=13, 4=14&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>We can use stream toArray() method to create an array from the stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">Integer[] intArray = intStream.toArray(Integer[]::<span class="keyword">new</span>);</span><br><span class="line">System.out.println(Arrays.toString(intArray)); <span class="comment">//prints [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Java-Stream-Intermediate-Operations"><a href="#Java-Stream-Intermediate-Operations" class="headerlink" title="Java Stream Intermediate Operations"></a>Java Stream Intermediate Operations</h3><ol><li><p>Stream filter() : We can use filter() method to test stream elements for a condition and generate filtered list.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; myList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) myList.add(i);</span><br><span class="line">Stream&lt;Integer&gt; sequentialStream = myList.stream();</span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; highNums = sequentialStream.filter(p -&gt; p &gt; <span class="number">90</span>); <span class="comment">//filter numbers greater than 90</span></span><br><span class="line">System.out.print(<span class="string">"High Nums greater than 90="</span>);</span><br><span class="line">highNums.forEach(p -&gt; System.out.print(p+<span class="string">" "</span>));</span><br><span class="line"><span class="comment">//prints "High Nums greater than 90=91 92 93 94 95 96 97 98 99 "</span></span><br></pre></td></tr></table></figure></li><li><p>Stream map() : We can use map() to apply functions to an stream. Letâ€™s see how we can use it to apply upper case function to a list of Strings.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names = Stream.of(<span class="string">"aBc"</span>, <span class="string">"d"</span>, <span class="string">"ef"</span>);</span><br><span class="line">System.out.println(names.map(s -&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> s.toUpperCase();</span><br><span class="line">&#125;).collect(Collectors.toList()));</span><br><span class="line"><span class="comment">//prints [ABC, D, EF]</span></span><br></pre></td></tr></table></figure></li><li><p>Stream sorted() : We can use sorted() to sort the stream elements by passing Comparator argument.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names2 = Stream.of(<span class="string">"aBc"</span>, <span class="string">"d"</span>, <span class="string">"ef"</span>, <span class="string">"123456"</span>);</span><br><span class="line">List&lt;String&gt; reverseSorted = names2.sorted(Comparator.reverseOrder()).collect(Collectors.toList());</span><br><span class="line">System.out.println(reverseSorted); <span class="comment">// [ef, d, aBc, 123456]</span></span><br><span class="line"></span><br><span class="line">Stream&lt;String&gt; names3 = Stream.of(<span class="string">"aBc"</span>, <span class="string">"d"</span>, <span class="string">"ef"</span>, <span class="string">"123456"</span>);</span><br><span class="line">List&lt;String&gt; naturalSorted = names3.sorted().collect(Collectors.toList());</span><br><span class="line">System.out.println(naturalSorted); <span class="comment">//[123456, aBc, d, ef]</span></span><br></pre></td></tr></table></figure></li><li><p>Stream flatMap() : We can use flatMap() to create a stream from the stream of list. Letâ€™s see a simple example to clear this doubt.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;List&lt;String&gt;&gt; namesOriginalList = Stream.of(</span><br><span class="line">Arrays.asList(<span class="string">"Pankaj"</span>), </span><br><span class="line">Arrays.asList(<span class="string">"David"</span>, <span class="string">"Lisa"</span>),</span><br><span class="line">Arrays.asList(<span class="string">"Amit"</span>));</span><br><span class="line"><span class="comment">//flat the stream from List&lt;String&gt; to String stream</span></span><br><span class="line">Stream&lt;String&gt; flatStream = namesOriginalList</span><br><span class="line">.flatMap(strList -&gt; strList.stream());</span><br><span class="line"></span><br><span class="line">flatStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure></li></ol><h3 id="Java-Stream-Terminal-Operations"><a href="#Java-Stream-Terminal-Operations" class="headerlink" title="Java Stream Terminal Operations"></a>Java Stream Terminal Operations</h3><ol><li><p>Stream reduce() example: We can use reduce() to perform a reduction on the elements of the stream, using an associative accumulation function, and return an Optional. Letâ€™s see how we can use it multiply the integers in a stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">Optional&lt;Integer&gt; intOptional = numbers.reduce((i,j) -&gt; &#123;<span class="keyword">return</span> i*j;&#125;);</span><br><span class="line"><span class="keyword">if</span>(intOptional.isPresent()) System.out.println(<span class="string">"Multiplication = "</span>+intOptional.get()); <span class="comment">//120</span></span><br></pre></td></tr></table></figure></li><li><p>Stream count() example: We can use this terminal operation to count the number of items in the stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers1 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">"Number of elements in stream="</span>+numbers1.count()); <span class="comment">//5</span></span><br></pre></td></tr></table></figure></li><li><p>Stream forEach() example: This can be used for iterating over the stream. We can use this in place of iterator. Letâ€™s see how to use it for printing all the elements of the stream.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers2 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">numbers2.forEach(i -&gt; System.out.print(i+<span class="string">","</span>)); <span class="comment">//1,2,3,4,5,</span></span><br></pre></td></tr></table></figure></li><li><p>Stream match() examples: Letâ€™s see some of the examples for matching methods in Stream API.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers3 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">"Stream contains 4? "</span>+numbers3.anyMatch(i -&gt; i==<span class="number">4</span>));</span><br><span class="line"><span class="comment">//Stream contains 4? true</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; numbers4 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">"Stream contains all elements less than 10? "</span>+numbers4.allMatch(i -&gt; i&lt;<span class="number">10</span>));</span><br><span class="line"><span class="comment">//Stream contains all elements less than 10? true</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; numbers5 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">"Stream doesn't contain 10? "</span>+numbers5.noneMatch(i -&gt; i==<span class="number">10</span>));</span><br><span class="line"><span class="comment">//Stream doesn't contain 10? true</span></span><br></pre></td></tr></table></figure></li><li><p>Stream findFirst() :This is a short circuiting terminal operation, letâ€™s see how we can use it to find the first string from a stream starting with D.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names4 = Stream.of(<span class="string">"Pankaj"</span>,<span class="string">"Amit"</span>,<span class="string">"David"</span>, <span class="string">"Lisa"</span>);</span><br><span class="line">Optional&lt;String&gt; firstNameWithD = names4.filter(i -&gt; i.startsWith(<span class="string">"D"</span>)).findFirst();</span><br><span class="line"><span class="keyword">if</span>(firstNameWithD.isPresent())&#123;</span><br><span class="line">System.out.println(<span class="string">"First Name starting with D="</span>+firstNameWithD.get()); <span class="comment">//David</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="some-example"><a href="#some-example" class="headerlink" title="some example"></a>some example</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//merge collection</span></span><br><span class="line">List&lt;String&gt; resultPersonnos = Stream.of(list1, list2)</span><br><span class="line">                .flatMap(Collection::stream)</span><br><span class="line">                .distinct()</span><br><span class="line">                .sorted()</span><br><span class="line">                .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sublime snippet</title>
      <link href="/2017/09/07/sublime%20snippet/"/>
      <url>/2017/09/07/sublime%20snippet/</url>
      <content type="html"><![CDATA[<ul><li><p>å®‰è£…æ’ä»¶</p><p><code>CTRL + SHIFT + På¹¶ä¸”è¾“å…¥Package Control: Install Package</code></p></li><li><p>htmlæ ¼å¼åŒ–</p><p><code>è¾“å…¥ï¼ï¼Œç„¶åæŒ‰ TAB</code></p></li><li><p>Pretty JSONæ’ä»¶</p><p><code>æ ¼å¼åŒ–  CTRL + ALT + J</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> sublime </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jquery snippet</title>
      <link href="/2017/08/05/jquery%20snippet/"/>
      <url>/2017/08/05/jquery%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><ul><li><p>è®¾ç½®æ ‡ç­¾å±æ€§</p><p><code>$(&quot;div&quot;).attr(&quot;å±æ€§å&quot;,&quot;å±æ€§å€¼&quot;);</code></p></li><li><p>è®¾ç½®æ ‡ç­¾æ ·å¼</p><p><code>$(&quot;div&quot;).css(&quot;color&quot;,&quot;yellow&quot;);</code>æˆ–<code>$(&quot;div&quot;).css(&quot;padding-left&quot;))</code></p></li><li><p>ç§»é™¤å±æ€§</p><p><code>$(&quot;div&quot;).removeAttr(&quot;id&quot;);</code></p></li><li><p>éå†æ•°ç»„</p><ul><li><p>åŸç”Ÿjsæœ‰ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨[for(var i;i&lt;arr.length;i++){},for(var i in arr){}] </p></li><li><p>jqueryæœ‰ä¸¤ä¸ªå‡½æ•°å…±è®¡å››ç§æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$.each(arr,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;),</span><br><span class="line">$(arr).each(<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;), </span><br><span class="line">$.map(arr,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;), </span><br><span class="line">$(arr).map(<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>éå†å¯¹è±¡ </p><ul><li><p>åŸç”Ÿjsæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨[for(var i in obj){}] </p></li><li><p>jqueryæœ‰ä¸¤ä¸ªå‡½æ•°å…±è®¡ä¸¤ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$.each(obj,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br><span class="line">$.map(obj,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Jqueryä¸­çš„ajaxåœ¨é»˜è®¤ä¸å†™asyncæƒ…å†µä¸‹ï¼Œè¯·æ±‚ä¸ºå¼‚æ­¥è¯·æ±‚ï¼›å³ï¼šasync:true</p></li><li><p><code>$(function(){ })</code>æ˜¯å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒæ˜¯<code>$(document).ready(function(){})</code>çš„ç®€å†™</p></li></ul>]]></content>
      
      <categories>
          
          <category> jquery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>word record</title>
      <link href="/2017/05/30/work%20record/"/>
      <url>/2017/05/30/work%20record/</url>
      <content type="html"><![CDATA[<p><strong>å…³äºä»£ç ç¼–è¯‘çš„äº‹æƒ…</strong></p><ul><li><p>é—®é¢˜</p><ul><li>ç”±äºä¸€äº›é…ç½®é¡¹å†™åœ¨ç»Ÿä¸€çš„é…ç½®æ–‡æ¡£ä¸­ï¼Œä»£ç ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç¡®å®šçš„é…ç½®é¡¹ï¼›æ­¤æ—¶æ“ä½œçš„æ–‡æœ¬è·¯å¾„æ˜¯è¦è¿½åŠ ä¸Šæ ¹ç›®å½•çš„è·¯å¾„ï¼Œç„¶è€Œå¼€å‘ç¯å¢ƒå’Œç”Ÿæˆç¯å¢ƒæ˜¯ä¸ä¸€æ ·çš„ã€‚é¡¹ç›®åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œå°±ç¡®å®šäº†æ–‡æœ¬è·¯å¾„ï¼Œè¿™æ ·å¯¼è‡´ä¸¤è¾¹ç¯å¢ƒçš„é…ç½®æ–‡æ¡£è¯»å–ç»“æœä¸ä¸€è‡´ã€‚</li></ul></li><li><p>è§£å†³åŠæ³•</p><ul><li>æŠŠæ–‡ä»¶è·¯å¾„ç²¾ç¡®å†™å…¥</li><li>åœ¨ç”Ÿæˆç¯å¢ƒä¸‹ç¼–è¯‘ä»£ç </li></ul></li></ul><hr><p><strong>å…³äºè¯»å–æ•°æ®é‡å¤§çš„excelæ–‡ä»¶</strong></p><ul><li><p>é—®é¢˜</p><ul><li>é¡¹ç›®éƒ¨ç½²åˆ°tomcatä¸­ï¼Œæ¯æ¬¡è¯»å–å¤§äº1Mçš„æ–‡ä»¶æ—¶ï¼Œä¼šåœæ»åœ¨<code>org.apache.poi.ss.usermodel.Workbook workbook = new XSSFWorkbook(is);</code>,ç›´åˆ°tomcatå‡ºç°æŠ¥é”™ä¿¡æ¯<code>java.lang.OutOfMemoryError: Java heap space</code>,å³javaè™šæ‹Ÿæœºå †æº¢å‡ºçš„é”™è¯¯ã€‚</li></ul></li><li><p>ç°è±¡æè¿°</p><ul><li><p>æ‰‹åŠ¨è®¾ç½®Xms,Xmxçš„å¤§å°ï¼Œåœ¨/bin/catalina.batï¼ˆwindowsç¯å¢ƒï¼‰é…ç½®ä¸­ï¼Œæ·»åŠ <code>JAVA_OPTS=&quot;-server -Xms10G -Xmx20G&quot;</code>,ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œé‡å¯æœåŠ¡ï¼Œä»æ—§æŠ¥ä¸€æ ·çš„é”™ã€‚ï¼ˆå½“æˆ‘åœ¨è‡ªå·±ç”µè„‘ä¸Šè¿è¡Œç¨‹åºï¼Œæ“ä½œåŒæ ·å¤§å°çš„æ–‡æ¡£æ—¶ï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä½•å†µè‡ªå·±ç”µè„‘æ‰8Gå†…å­˜ï¼Œè¿œä¸åŠæœåŠ¡å™¨ï¼Œå†åˆ™å°±æ˜¯è‡ªèº«ç”µè„‘tomcatçš„é…ç½®ä¹Ÿæ˜¯é»˜è®¤çš„ï¼‰</p></li><li><p>å†…å­˜æ€»ä½“åˆ†ä¸ºå¹´è½»ä»£(young),è€å¹´ä»£(old),æ°¸ä¹…ä»£(permanent),å¦‚å›¾</p><p><img src="https://s1.ax2x.com/2018/05/31/7OCHl.jpg" alt="7OCHl.jpg"></p></li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> tips </category>
          
      </categories>
      
      
        <tags>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux snippet</title>
      <link href="/2017/05/09/linux%20snippet/"/>
      <url>/2017/05/09/linux%20snippet/</url>
      <content type="html"><![CDATA[<ul><li>/bin/    ç”¨ä»¥å­˜å‚¨äºŒè¿›åˆ¶å¯æ‰§è¡Œå‘½ä»¤æ–‡ä»¶ï¼Œ/usr/bin/ä¹Ÿå­˜å‚¨äº†ä¸€äº›åŸºäºç”¨æˆ·çš„å‘½ä»¤æ–‡ä»¶ã€‚</li><li>/sbin/    è®¸å¤šç³»ç»Ÿå‘½ä»¤çš„å­˜å‚¨ä½ç½®ï¼Œ/usr/sbin/ä¸­ä¹ŸåŒ…æ‹¬äº†è®¸å¤šå‘½ä»¤ã€‚</li><li>/root/    è¶…çº§ç”¨æˆ·ï¼Œå³æ ¹ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</li><li>/home/    æ™®é€šç”¨æˆ·çš„é»˜è®¤ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹ï¼Œæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸€ä¸ªä»¥ç”¨æˆ·åå‘½åçš„æ–‡ä»¶å¤¹ã€‚</li><li>/boot/    å­˜æ”¾Ubuntuå†…æ ¸å’Œç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ã€‚</li><li>/mnt/     é€šå¸¸åŒ…æ‹¬ç³»ç»Ÿå¼•å¯¼åè¢«æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ã€‚</li><li>/dev/    å­˜å‚¨è®¾å¤‡æ–‡ä»¶ï¼ŒåŒ…æ‹¬è®¡ç®—æœºçš„æ‰€æœ‰å¤–éƒ¨è®¾å¤‡ï¼Œå¦‚ç¡¬ç›˜ã€æ˜¯ã€é”®ç›˜ã€é¼ æ ‡ç­‰ã€‚</li><li>/etc/    å­˜æ”¾æ–‡ä»¶ç®¡ç†é…ç½®æ–‡ä»¶å’Œç›®å½•ã€‚</li><li>/lib/    å­˜å‚¨å„ç§ç¨‹åºæ‰€éœ€è¦çš„å…±äº«åº“æ–‡ä»¶ã€‚</li><li>/lost+found/    ä¸€èˆ¬ä¸ºç©ºï¼Œå½“éæ³•å…³æœºæ—¶ï¼Œä¼šå­˜æ”¾ä¸€äº›é›¶æ•£çš„æ–‡ä»¶ã€‚</li><li>/var/    ç”¨äºå­˜æ”¾å¾ˆå¤šä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œä¾‹å¦‚æ—¥å¿—æ–‡ä»¶ç­‰ã€‚</li><li>/usr/    åŒ…æ‹¬ä¸ç³»ç»Ÿç”¨æˆ·ç›´æ¥æœ‰å…³çš„æ–‡ä»¶å’Œç›®å½•</li><li>/media/    å­˜æ”¾Ubuntuç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½çš„è®¾å¤‡æ–‡ä»¶ã€‚</li><li>/proc/    è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œå®ƒæ˜¯å†…å­˜çš„æ˜ å°„ï¼ŒåŒ…æ‹¬ç³»ç»Ÿä¿¡æ¯å’Œè¿›ç¨‹ä¿¡æ¯ã€‚</li><li>/tmp/    å­˜å‚¨ç³»ç»Ÿå’Œç”¨æˆ·çš„ä¸´æ—¶ä¿¡æ¯ã€‚</li><li>/initrd/    ç”¨æ¥åŠ è½½å¯åŠ¨æ—¶ä¸´æ—¶æŒ‚è½½çš„initrd.imgæ˜ åƒæ–‡ä»¶ï¼Œä»¥åŠè½½å…¥æ‰€è¦çš„è®¾å¤‡æ¨¡å—ç›®å½•ã€‚</li><li>/opt/    ä½œä¸ºå¯é€‰æ–‡ä»¶å’Œç¨‹åºçš„å­˜æ”¾ç›®å½•ï¼Œå¦åˆ™å°†æ— æ³•å¼•å¯¼è®¡ç®—æœºè¿›å…¥æ“ä½œç³»ç»Ÿã€‚</li><li>/srv/    å­˜å‚¨ç³»ç»Ÿæä¾›çš„æœåŠ¡æ•°æ®ã€‚</li><li>/sys/    ç³»ç»Ÿè®¾å¤‡å’Œæ–‡ä»¶å±‚æ¬¡ç»“æ„ï¼Œå¹¶å‘ç”¨æˆ·ç¨‹åºæä¾›è¯¦ç»†çš„å†…æ ¸æ•°æ®ä¿¡æ¯ã€‚</li></ul><h2 id="è£…æœºé—®é¢˜"><a href="#è£…æœºé—®é¢˜" class="headerlink" title="è£…æœºé—®é¢˜"></a>è£…æœºé—®é¢˜</h2><h3 id="Wifi-Not-Enabled-Acer-Aspire-4750"><a href="#Wifi-Not-Enabled-Acer-Aspire-4750" class="headerlink" title="Wifi Not Enabled Acer Aspire 4750"></a>Wifi Not Enabled Acer Aspire 4750</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~$ rfkill list all</span><br><span class="line">0: phy0: Wireless LAN</span><br><span class="line">Soft blocked: no</span><br><span class="line">Hard blocked: yes</span><br><span class="line"></span><br><span class="line">~$ sudo rmmod acer-wmi</span><br><span class="line">â€‹</span><br></pre></td></tr></table></figure><p>add below line at the end of the file : /etc/modprobe.d/blacklist.conf<br>blacklist acer-wmi</p><p>Then restart the system.<br>~$ rfkill list all<br>0: phy0: Wireless LAN<br>Soft blocked: no<br>Hard blocked: no<br><code>`</code></p><h2 id="æœåŠ¡"><a href="#æœåŠ¡" class="headerlink" title="æœåŠ¡"></a>æœåŠ¡</h2><ul><li>é˜²ç«å¢™ firewalld.service</li></ul><h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p><strong>shellä¸exportå‘½ä»¤</strong></p><p>ç”¨æˆ·ç™»å½•åˆ°Linuxç³»ç»Ÿåï¼Œç³»ç»Ÿå°†å¯åŠ¨ä¸€ä¸ªç”¨æˆ·shellã€‚åœ¨è¿™ä¸ªshellä¸­ï¼Œå¯ä»¥ä½¿ç”¨shellå‘½ä»¤æˆ–å£°æ˜å˜é‡ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå¹¶è¿è¡Œ shellè„šæœ¬ç¨‹åºã€‚è¿è¡Œshellè„šæœ¬ç¨‹åºæ—¶ï¼Œç³»ç»Ÿå°†åˆ›å»ºä¸€ä¸ªå­shellã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿä¸­å°†æœ‰ä¸¤ä¸ªshellï¼Œä¸€ä¸ªæ˜¯ç™»å½•æ—¶ç³»ç»Ÿå¯åŠ¨çš„shellï¼Œå¦ä¸€ ä¸ªæ˜¯ç³»ç»Ÿä¸ºè¿è¡Œè„šæœ¬ç¨‹åºåˆ›å»ºçš„shellã€‚å½“ä¸€ä¸ªè„šæœ¬ç¨‹åºè¿è¡Œå®Œæ¯•ï¼Œå®ƒçš„è„šæœ¬shellå°†ç»ˆæ­¢ï¼Œå¯ä»¥è¿”å›åˆ°æ‰§è¡Œè¯¥è„šæœ¬ä¹‹å‰çš„shellã€‚ä»è¿™ç§æ„ä¹‰ä¸Šæ¥ è¯´ï¼Œç”¨æˆ·å¯ä»¥æœ‰è®¸å¤š shellï¼Œæ¯ä¸ªshelléƒ½æ˜¯ç”±æŸä¸ªshellï¼ˆç§°ä¸ºçˆ¶shellï¼‰æ´¾ç”Ÿçš„ã€‚</p><p>åœ¨å­ shellä¸­å®šä¹‰çš„å˜é‡åªåœ¨è¯¥å­shellå†…æœ‰æ•ˆã€‚å¦‚æœåœ¨ä¸€ä¸ªshellè„šæœ¬ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œå½“è¯¥è„šæœ¬ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿™ä¸ªå®šä¹‰çš„å˜é‡åªæ˜¯è¯¥è„šæœ¬ç¨‹åºå†… çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå…¶ä»–çš„shellä¸èƒ½å¼•ç”¨å®ƒï¼Œè¦ä½¿æŸä¸ªå˜é‡çš„å€¼å¯ä»¥åœ¨å…¶ä»–shellä¸­è¢«æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨exportå‘½ä»¤å¯¹å·²å®šä¹‰çš„å˜é‡è¿›è¡Œè¾“å‡ºã€‚ exportå‘½ä»¤å°†ä½¿ç³»ç»Ÿåœ¨åˆ›å»ºæ¯ä¸€ä¸ªæ–°çš„shellæ—¶å®šä¹‰è¿™ä¸ªå˜é‡çš„ä¸€ä¸ªæ‹·è´ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºå˜é‡è¾“å‡ºã€‚</p><h3 id="æ“ä½œæ–‡ä»¶åä¸­å«æœ‰â€œ-â€çš„æ–‡ä»¶"><a href="#æ“ä½œæ–‡ä»¶åä¸­å«æœ‰â€œ-â€çš„æ–‡ä»¶" class="headerlink" title="æ“ä½œæ–‡ä»¶åä¸­å«æœ‰â€œ-â€çš„æ–‡ä»¶"></a>æ“ä½œæ–‡ä»¶åä¸­å«æœ‰â€œ-â€çš„æ–‡ä»¶</h3><ul><li>ä½¿ç”¨è½¬ç§»å­—ç¬¦ â€œâ€“â€ï¼Œ æ¯”å¦‚æŸ¥çœ‹æ–‡ä»¶â€œ-abc.txtâ€œï¼Œå‘½ä»¤ä¸º <code>vim -- -abc.txt</code></li></ul><h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><p>KVM çš„å…¨ç§°æ˜¯ï¼šKernel-based Virtual Machineï¼Œç®€å•ä¸€å¥è¯æ¦‚æ‹¬ï¼Œå°±æ˜¯ä¸€ä¸ªåŸºäº Linux å†…æ ¸çš„è™šæ‹ŸåŒ–ç®¡ç†ç³»ç»Ÿã€‚</p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>cache snippet</title>
      <link href="/2017/03/07/cache%20snippet/"/>
      <url>/2017/03/07/cache%20snippet/</url>
      <content type="html"><![CDATA[<ul><li>what is cache ?    why use cache ?<ol><li>Cacheæ˜¯é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨å™¨å­ç³»ç»Ÿï¼Œå…¶ä¸­å¤åˆ¶äº†é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ä»¥åˆ©äºå¿«é€Ÿè®¿é—®</li><li>å‡¡æ˜¯ä½äºé€Ÿåº¦ç›¸å·®è¾ƒå¤§çš„ä¸¤ç§ç¡¬ä»¶/è½¯ä»¶ä¹‹é—´çš„ï¼Œç”¨äºåè°ƒä¸¤è€…æ•°æ®ä¼ è¾“é€Ÿåº¦å·®å¼‚çš„ç»“æ„ï¼Œå‡å¯ç§°ä¹‹ä¸º Cache </li></ol></li><li>ç¼“å­˜çš„åˆ†ç±»<ul><li>æ“ä½œç³»ç»Ÿç£ç›˜ç¼“å­˜-&gt;å‡å°‘ç£ç›˜æœºæ¢°æ“ä½œ</li><li>æ•°æ®åº“ç¼“å­˜-&gt;å‡å°‘æ–‡ä»¶ç³»ç»ŸI/O</li><li>åº”ç”¨ç¨‹åºç¼“å­˜-&gt;å‡å°‘å¯¹æ•°æ®åº“çš„æŸ¥è¯¢ </li><li>WebæœåŠ¡å™¨ç¼“å­˜-&gt;å‡å°‘åº”ç”¨æœåŠ¡å™¨è¯·æ±‚</li><li>å®¢æˆ·ç«¯æµè§ˆå™¨ç¼“å­˜-&gt;å‡å°‘å¯¹ç½‘ç«™çš„è®¿é—®</li></ul></li></ul><h3 id="æŠ€æœ¯æ¡†æ¶"><a href="#æŠ€æœ¯æ¡†æ¶" class="headerlink" title="æŠ€æœ¯æ¡†æ¶"></a>æŠ€æœ¯æ¡†æ¶</h3><ul><li><strong>Encache</strong><ul><li>è®¾è®¡äºæé«˜åœ¨æ•°æ®ä»RDBMSä¸­å–å‡ºæ¥çš„é«˜èŠ±è´¹ã€é«˜å»¶è¿Ÿé‡‡å–çš„ä¸€ç§ç¼“å­˜æ–¹æ¡ˆ </li><li>javaç¼–å†™ï¼Œç›´æ¥åœ¨jvmè™šæ‹Ÿæœºä¸­ç¼“å­˜ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ï¼›ä½†æ˜¯ç¼“å­˜å…±äº«éº»çƒ¦ï¼Œé›†ç¾¤åˆ†å¸ƒå¼åº”ç”¨ä¸æ–¹ä¾¿ã€‚</li><li>ç‰¹ç‚¹ï¼š<ul><li>å¿«</li><li>ç®€å•</li><li>è¢–ç</li><li>è½»é‡</li><li>æ‰©å±•</li><li>ç›‘å¬å™¨</li></ul></li></ul></li><li><strong>memcache</strong><ul><li>ä¸€ç§é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼å¯¹è±¡ç¼“å­˜ç³»ç»Ÿï¼Œæœ€åˆè®¾è®¡äºç¼“è§£åŠ¨æ€ç½‘ç«™æ•°æ®åº“åŠ è½½æ•°æ®çš„å»¶è¿Ÿæ€§ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå¤§çš„å†…å­˜HashTableï¼Œå°±æ˜¯ä¸€ä¸ªkey-valueé”®å€¼ç¼“å­˜ã€‚</li><li>Cè¯­è¨€ç¼–å†™</li><li>ç‰¹ç‚¹ï¼š<ul><li>ä¾èµ–</li><li>å¤šçº¿ç¨‹æ”¯æŒ</li><li>é«˜æ€§èƒ½</li></ul></li></ul></li><li><strong>redis</strong><ul><li>é€šè¿‡socketè®¿é—®åˆ°ç¼“å­˜æœåŠ¡ï¼Œæ•ˆç‡æ¯”encacheä½ï¼Œæ¯”æ•°æ®åº“è¦å¿«å¾ˆå¤šï¼Œå¤„ç†é›†ç¾¤å’Œåˆ†å¸ƒå¼ç¼“å­˜æ–¹ä¾¿ï¼Œæœ‰æˆç†Ÿçš„æ–¹æ¡ˆã€‚</li><li>ç‰¹æ€§ï¼š<ul><li>æ”¯æŒæŒä¹…åŒ–</li><li>ä¸°å¯Œçš„æ•°æ®ç±»å‹</li><li>é«˜æ€§èƒ½</li><li>ä¸»ä»å¤åˆ¶</li></ul></li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> cache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>other snippet</title>
      <link href="/2017/02/16/other%20tips/"/>
      <url>/2017/02/16/other%20tips/</url>
      <content type="html"><![CDATA[<h2 id="other-snippet"><a href="#other-snippet" class="headerlink" title="other snippet"></a>other snippet</h2><h3 id="generate-code-based-proto-file"><a href="#generate-code-based-proto-file" class="headerlink" title="generate code based proto file"></a>generate code based proto file</h3><p><code>protoc --proto_path=æ‰«æç›®å½• --java_out=ä»£ç ç”Ÿæˆç›®å½• protoæ–‡ä»¶ç›®å½•</code></p><blockquote><p>protoc â€“proto_path=src â€“java_out=build/gen src/foo.proto</p></blockquote><h3 id="Spring-provides-three-way-of-scheduling"><a href="#Spring-provides-three-way-of-scheduling" class="headerlink" title="Spring provides three way of scheduling:"></a>Spring provides three way of scheduling:</h3><ul><li>@Scheduled</li><li>Via Quartz</li><li>Via JDK Timer</li></ul><hr><h3 id="one-word"><a href="#one-word" class="headerlink" title="one word"></a>one word</h3><ul><li>\xå¯¹åº”çš„æ˜¯UTF-8ç¼–ç çš„æ•°æ®</li></ul>]]></content>
      
      <categories>
          
          <category> fragment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>html snippet</title>
      <link href="/2017/02/10/html%20snippet/"/>
      <url>/2017/02/10/html%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><ul><li><p>chromeé¡µé¢è·³è½¬ï¼Œéœ€è¦ä½¿ç”¨ i æ ‡ç­¾ï¼Œä¸èƒ½ä½¿ç”¨ button æ ‡ç­¾ï¼Œå› ä¸ºåœ¨buttonçš„ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œwindow.location.hrefä¸èµ·ä½œç”¨ã€‚ï¼ˆä½†firefoxèµ·ä½œç”¨ï¼‰</p></li><li><p>textareaæ ‡ç­¾é‡Œé¢çš„å±æ€§è¦ç´§é ä¹¦å†™ï¼Œä¸”ä¸è¦æ¢è¡Œï¼Œä¸ç„¶ï¼Œä¼šæ˜¾ç¤ºtextareaé»˜è®¤èµ‹å€¼ä¸ºå¤šä¸ªç©ºæ ¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">type</span>=<span class="string">"text"</span><span class="attr">class</span>=<span class="string">"form-control"</span><span class="attr">id</span>=<span class="string">"obj_address"</span><span class="attr">placeholder</span>=<span class="string">"åœ°å€ï¼ˆå¿…å¡«ï¼‰"</span><span class="attr">name</span>=<span class="string">"address"</span><span class="attr">isvalid</span>=<span class="string">"yes"</span><span class="attr">checkexpession</span>=<span class="string">"NotNull"</span><span class="attr">errormsg</span>=<span class="string">"åœ°å€"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>idea skill</title>
      <link href="/2016/12/16/idea%20skill/"/>
      <url>/2016/12/16/idea%20skill/</url>
      <content type="html"><![CDATA[<h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><ul><li>å‚ç…§<a href="https://blog.csdn.net/q547550831/article/details/79129311" target="_blank" rel="noopener">ä¸€å¤§å¨æ’ä»¶</a></li><li>ç°åœ¨å·²å®‰è£…çš„æ’ä»¶ï¼š<ul><li>Translation(ç¿»è¯‘å·¥å…·)</li><li>CheckStyle-IDEAï¼ˆä»£ç è§„èŒƒï¼‰</li><li>FindBugs-IDEA(é™æ€åˆ†æå·¥å…·)</li><li>BashSupportï¼ˆLinux Bashæ”¯æŒï¼Œå¯¹bashè¯­æ³•çš„é«˜äº®æ”¯æŒï¼‰</li><li>CodeGlanceï¼ˆç±»ä¼¼SublimeTextçš„Mini Mapæ’ä»¶ ï¼‰</li><li>Key promoterï¼ˆæç¤ºåŠŸèƒ½å¿«æ·é”®ï¼‰</li><li>GsonFormatï¼ˆæš‚æœªå®‰è£…ï¼Œå…¶åŠŸèƒ½ä¸ºæŠŠjsonæ ¼å¼çš„å†…å®¹è½¬æˆObjectï¼‰</li><li>jRebelï¼ˆæš‚æœªå®‰è£…ï¼Œçƒ­éƒ¨ç½²æ’ä»¶ï¼‰</li></ul></li></ul><ul><li><p><strong>scratchesè‰ç¨¿åŠŸèƒ½</strong></p><ul><li><p>å‚ç…§<a href="https://blog.csdn.net/theape/article/details/70194185" target="_blank" rel="noopener">å¼ºå¤§çš„è‰ç¨¿åŠŸèƒ½</a></p></li><li><p>scratchä¸­æ–‡ä¹±ç è§£å†³åŠæ³•</p><p>éœ€è¦åœ¨<code>C:\Users\Administrator\.IntelliJIdea2019.1\config</code>ä¸­ä¿®æ”¹æ–‡ä»¶<code>idea64.exe.vmoptions</code>,åœ¨åé¢åŠ ä¸Šè®¾ç½®<code>-Dfile.encoding=UTF-8</code></p></li></ul></li><li><p><strong>Lombok </strong>æ’ä»¶</p><p>æé«˜ç¼–ç æ•ˆç‡</p></li></ul><h3 id="ä¸­æ–‡ç¼–ç é…ç½®"><a href="#ä¸­æ–‡ç¼–ç é…ç½®" class="headerlink" title="ä¸­æ–‡ç¼–ç é…ç½®"></a>ä¸­æ–‡ç¼–ç é…ç½®</h3><ul><li><p>æœ‰å…³Propertiesæ–‡ä»¶ä¸­çš„ä¸­æ–‡unicodeè½¬ç é—®é¢˜</p><p>åœ¨IDEAä¸­åˆ›å»ºäº†propertiesæ–‡ä»¶ï¼Œå‘ç°é»˜è®¤ä¸­æ–‡ä¸ä¼šè‡ªåŠ¨è¿›è¡Œunicodeè½¬ç ï¼Œéœ€è¦é…ç½®</p><p><img src="https://i.imgur.com/W2a0nMR.jpg" alt=""></p></li></ul>]]></content>
      
      <categories>
          
          <category> idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>tomcat snippet</title>
      <link href="/2016/12/16/tomcat%20snippet/"/>
      <url>/2016/12/16/tomcat%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="headerlink" title="é…ç½®é¡¹"></a>é…ç½®é¡¹</h3><ul><li>é¡¹ç›®éƒ¨ç½²åˆ°linuxçš„tomcatä¸­ï¼ŒéªŒè¯ç åœ¨é¡µé¢ä¸­åˆ·æ–°ä¸äº†ï¼Œéœ€è¦ä¿®æ”¹<code>catalina.sh</code>,æ·»åŠ <code>JAVA_OPTS=&quot;$JAVA_OPTS -Djava.awt.headless=true&quot;</code>é…ç½®</li></ul><h3 id="è®¾ç½®è™šæ‹Ÿè·¯å¾„çš„ä¸¤ç§æ–¹æ³•"><a href="#è®¾ç½®è™šæ‹Ÿè·¯å¾„çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="è®¾ç½®è™šæ‹Ÿè·¯å¾„çš„ä¸¤ç§æ–¹æ³•"></a>è®¾ç½®è™šæ‹Ÿè·¯å¾„çš„ä¸¤ç§æ–¹æ³•</h3><ul><li>ä½¿ç”¨tomcatè‡ªèº«è®¾ç½®è™šæ‹Ÿè·¯å¾„</li></ul><ol><li><p>åœ¨tomcatçš„server.xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®contextæ ‡ç­¾</p><p>Contextæ ‡ç­¾ä¸­çš„ç›¸å…³å±æ€§ï¼š</p><ul><li>path: æŒ‡å®šè®¿é—®è¯¥webåº”ç”¨çš„URLå…¥å£ï¼Œå³è™šæ‹Ÿæ–‡ä»¶ç›®å½•</li><li>docBase:ä¸ºè®¿é—®çš„çœŸå®è·¯å¾„</li><li>reloadable:å¦‚æœè¿™ä¸ªå±æ€§è®¾ä¸ºtrueï¼ŒtomcatæœåŠ¡å™¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ä¼šç›‘è§†åœ¨WEB-INF/classeså’ŒWEB-INF/libç›®å½•ä¸‹classæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œ å¦‚æœç›‘æµ‹åˆ°æœ‰classæ–‡ä»¶è¢«æ›´æ–°çš„ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½Webåº”ç”¨ã€‚ </li></ul></li><li><p>å¦‚æœè¿™äº‹ä½¿ç”¨ideaå¯åŠ¨é¡¹ç›®ï¼Œéœ€è¦å°†Deploy applications configured in Tomcat instanceå‹¾ä¸Š </p></li></ol><ul><li><p>å•ç‹¬è®¾ç½®IDEAè¿›è¡Œè®¾ç½®è™šæ‹Ÿè·¯å¾„</p><ol><li><p>ä¸Šå›¾çš„ä¸­<code>Deploy applications configured in Tomcat instance</code>ä¸è¦å‹¾ä¸Š </p></li><li><p>é€‰ä¸­<code>edit configurations</code>ï¼Œç‚¹å‡»åŠ å·æŒ‰é’®ï¼Œé€‰æ‹©å®é™…è·¯å¾„ï¼Œå¹¶åœ¨<code>Appication context</code>ä¸­å¡«å†™è™šæ‹Ÿè·¯å¾„ã€‚</p></li></ol></li></ul><h3 id="è®¾ç½®URLè¯·æ±‚å‚æ•°é•¿åº¦"><a href="#è®¾ç½®URLè¯·æ±‚å‚æ•°é•¿åº¦" class="headerlink" title="è®¾ç½®URLè¯·æ±‚å‚æ•°é•¿åº¦"></a>è®¾ç½®URLè¯·æ±‚å‚æ•°é•¿åº¦</h3><ul><li><p>é—®é¢˜æè¿°</p><p>postè¯·æ±‚ï¼Œæœ¬èº«è¯·æ±‚å‚æ•°æ— å¤§å°é™åˆ¶ï¼Œä½†æ˜¯ä¸€èˆ¬çš„æœåŠ¡å™¨åƒtomcatéƒ½æœ‰é»˜è®¤å¤§å°ï¼Œå¦‚æœä¼ è¾“çš„å‚æ•°è¶…è¿‡äº†é»˜è®¤å¤§å°ï¼Œåˆ™ä¼šæŠ¥é”™<code>http post request header is too large</code></p></li><li><p>è§£å†³åŠæ³•</p><p>åœ¨server.xmlä¸­<code>&lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;</code>ï¼Œæ·»åŠ è®¾ç½®é¡¹<code>maxHttpHeaderSize =&quot;102400&quot;</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>webpack snippet</title>
      <link href="/2016/12/16/webpack%20snippet/"/>
      <url>/2016/12/16/webpack%20snippet/</url>
      <content type="html"><![CDATA[<ul><li><p>å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p><p>å…¥å£    entry</p><p>è¾“å‡º    output</p><p>loader</p><p>æ’ä»¶    plugins</p></li></ul>]]></content>
      
      <categories>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>spring snippet</title>
      <link href="/2016/10/16/spring%20snippet/"/>
      <url>/2016/10/16/spring%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h4 id="ä¼ JSONå­—ç¬¦ä¸²-RequestBodyæ¥æ”¶"><a href="#ä¼ JSONå­—ç¬¦ä¸²-RequestBodyæ¥æ”¶" class="headerlink" title="ä¼ JSONå­—ç¬¦ä¸²+@RequestBodyæ¥æ”¶"></a>ä¼ JSONå­—ç¬¦ä¸²+@RequestBodyæ¥æ”¶</h4><ul><li><p>å‰ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">icheckDelete</span><span class="params">(url)</span></span>&#123;</span><br><span class="line">    var parms = &#123;</span><br><span class="line">        list : array <span class="comment">//è¿™æ˜¯ä¸ªæ•°ç»„</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        dataType: <span class="string">"JSON"</span>,</span><br><span class="line">        contentType:<span class="string">'application/json;charset=UTF-8'</span>,<span class="comment">//å…³é”®æ˜¯è¦åŠ ä¸Šè¿™è¡Œ</span></span><br><span class="line">        traditional:<span class="keyword">true</span>,<span class="comment">//è¿™ä½¿jsonæ ¼å¼çš„å­—ç¬¦ä¸ä¼šè¢«è½¬ç </span></span><br><span class="line">        data: JSON.stringify(parms),</span><br><span class="line">        type: <span class="string">"DELETE"</span>, </span><br><span class="line">        timeout: <span class="number">20000</span>,</span><br><span class="line">        url: url,</span><br><span class="line">        success : function () &#123;</span><br><span class="line">            alert(<span class="string">"åˆ é™¤æˆåŠŸï¼"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        error : function (data)&#123;</span><br><span class="line">            alert(data.responseText);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Controller:</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"deleteList"</span>, method = RequestMethod.DELETE)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">(@RequestBody DeleteListRequest request)</span> <span class="keyword">throws</span> WebTransException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é€»è¾‘ä»£ç  */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java Concept of The Day</title>
      <link href="/2016/10/16/Java%20Concept%20of%20The%20Day/"/>
      <url>/2016/10/16/Java%20Concept%20of%20The%20Day/</url>
      <content type="html"><![CDATA[<ul><li>Stack is used only for execution purpose. Heap is used for storage purpose.<h3 id="Non-Static-Members-And-Their-Memory-Management-In-Java"><a href="#Non-Static-Members-And-Their-Memory-Management-In-Java" class="headerlink" title="Non-Static Members And Their Memory Management In Java"></a>Non-Static Members And Their Memory Management In Java</h3></li><li>Non-Static variables and Non-Static methods are non-static components of a class. These are also called instance components of a class. Non-static components are stored inside the object memory. Each object will have their own copy of non-static components. But,  static components are common to all objects of that class.<h3 id="IIB-Instance-Initialization-Block"><a href="#IIB-Instance-Initialization-Block" class="headerlink" title="IIB-Instance Initialization Block"></a>IIB-Instance Initialization Block</h3></li><li>IIB is used to initialize instance variables or non-static variables.</li><li>IIB blocks will not be called from the constructor in which this() statement is written as a first statement. <h3 id="super-and-this-keywords-in-java"><a href="#super-and-this-keywords-in-java" class="headerlink" title="super and this keywords in java"></a>super and this keywords in java</h3></li><li>super class constructor is called by super() calling statement. You canâ€™t use super() calling statement outside the constructor. By default, super() calling statement is the first statement in any constructor. </li><li>this() is the calling statement to same class constructor. It must be used within constructor only. If it is used, it must be the first statement in the constructor.</li><li>You canâ€™t use super and this keywords in a static method and in a static initialization block even though you are referring static members.<h3 id="10-Points-Every-Java-Programmer-Should-Know-About-final-keyword-in-java"><a href="#10-Points-Every-Java-Programmer-Should-Know-About-final-keyword-in-java" class="headerlink" title="10 Points Every Java Programmer Should Know About final keyword in java"></a>10 Points Every Java Programmer Should Know About final keyword in java</h3></li><li>Any class or any method can be either abstract or final but not both. abstract and final are totally opposite. Because, abstract class or abstract method must be implemented or modified in the sub classes but final does not allow this. This creates an ambiguity.</li><li>The global variable which is declared as final and static remains unchanged for the whole execution. Because, Static members are stored in the class memory and they are loaded only once in the whole execution. They are common to all objects of the class. If you declare static variables as final, any of the objects canâ€™t change their value as it is final. Therefore, variables declared as final and static are sometimes referred to as Constants. All fields of interfaces are referred as constants, because they are final and static by default.<h3 id="Garbage-Collection-And-finalize-method-In-Java"><a href="#Garbage-Collection-And-finalize-method-In-Java" class="headerlink" title="Garbage Collection And finalize() method In Java"></a>Garbage Collection And finalize() method In Java</h3></li><li>Whenever you run a java program, JVM creates three threads. 1) main thread   2) Thread Scheduler   3) Garbage Collector Thread. In these three threads, main thread is a user thread and remaining two are daemon threads which run in background.<h3 id="Access-Modifiers-In-Java"><a href="#Access-Modifiers-In-Java" class="headerlink" title="Access Modifiers In Java"></a>Access Modifiers In Java</h3></li><li>Class can not be a private except inner classes. Inner classes are nothing but again members of outer class. So members of a class (field, method, constructor and inner class) can be private but not the class itself.<br><img src="https://i.imgur.com/6h3llC0.jpg" alt=""><h3 id="What-Are-Access-And-Non-Access-Modifiers-In-Java"><a href="#What-Are-Access-And-Non-Access-Modifiers-In-Java" class="headerlink" title="What Are Access And Non-Access Modifiers In Java?"></a>What Are Access And Non-Access Modifiers In Java?</h3><img src="https://i.imgur.com/nB7eV1i.jpg" alt=""><h3 id="Type-Casting-In-Java"><a href="#Type-Casting-In-Java" class="headerlink" title="Type Casting In Java"></a>Type Casting In Java</h3>Please note that by using casting, data can not be modified but only type of data can be modified.</li><li>Primitive Casting.<ul><li>memory size <code>byte &lt; short &lt; int &lt; long &lt; float &lt; double.</code><ul><li>Auto Widening</li><li>Explicit Narrowing</li></ul></li></ul></li><li>Derived Casting<ul><li>Auto-up Casting<ul><li>Explicit Down Casting<h3 id="Abstraction-In-Java"><a href="#Abstraction-In-Java" class="headerlink" title="Abstraction In Java"></a>Abstraction In Java</h3></li></ul></li></ul></li><li>Abstract classes contain abstract methods (you can refer them as ideas) so that they can be implemented in sub classes according to their requirements. They are also called as incomplete classes as they have some unimplemented abstract methods(ideas).<h3 id="Interfaces-In-Java"><a href="#Interfaces-In-Java" class="headerlink" title="Interfaces In Java"></a>Interfaces In Java</h3></li><li>Interfaces in java are very much similar to abstract classes but interfaces contain only abstract methods (you can refer to them as only ideas). Abstract classes may contain both abstract methods as well as concrete methods. But interfaces must contain only abstract methods. Concrete methods are not allowed in interfaces. Therefore, Interfaces show 100% abstractness.<h3 id="Auto-Widening-Vs-Auto-Boxing-Vs-Auto-UpCasting-In-Java"><a href="#Auto-Widening-Vs-Auto-Boxing-Vs-Auto-UpCasting-In-Java" class="headerlink" title="Auto-Widening Vs Auto-Boxing Vs Auto-UpCasting In Java"></a>Auto-Widening Vs Auto-Boxing Vs Auto-UpCasting In Java</h3><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/widening-Vs-boxing.png?x70034" alt=""><h3 id="Exception-Handing"><a href="#Exception-Handing" class="headerlink" title="Exception Handing"></a>Exception Handing</h3>java.lang.Throwable is the super class of all errors and exceptions in java.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/Exceptions.png?x70034" alt=""><br><img src="https://i.imgur.com/xHC2xQo.jpg" alt=""></li><li>java.lang.Error class represents the errors which are mainly caused by the environment in which application is running. For example, OutOfMemoryError occurs when JVM runs out of memory or StackOverflowError occurs when stack overflows.</li><li>Where as java.lang.Exception class represents the exceptions which are mainly caused by the application itself. For example, NullPointerException occurs when an application tries to access null object or ClassCastException occurs when an application tries to cast incompatible class types. <h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3></li><li>Array can hold the references to any type of objects. It is important to note that array can contain only references to the objects, not the objects itself. <h3 id="Threads"><a href="#Threads" class="headerlink" title="Threads"></a>Threads</h3></li><li>Processes and threads can be diagrammatically represented as this<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/ThreadsAndProcesses.png?x70034" alt=""></li><li>User threads are threads which are created by the application or user.</li><li>Daemon threads are threads which are mostly created by the JVM.</li><li><p>There are three constant fields in java.lang.Thread class related to priority of a thread. They are,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> MIN_PRIORITY   â€”&gt; It defines the lowest priority that a thread can have and Itâ€™s value is 1.</span><br><span class="line">NORM_PRIORITY  â€”&gt; It defines the normal priority that a thread can have and itâ€™s value is 5.</span><br><span class="line">MAX_PRIORITY  â€”&gt; It defines the highest priority that a thread can have and itâ€™s value is 10.</span><br></pre></td></tr></table></figure><p>  The priority of a main thread, if explicitly not set, is always 5 i.e NORM_PRIORITY.</p></li><li><p>avoid thread interference </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> By declaring the method as synchronized.</span><br><span class="line">By declaring the variables as final.</span><br><span class="line">By declaring the variable as volatile.</span><br><span class="line">By creating the immutable objects.</span><br><span class="line">By using Atomic operations.</span><br><span class="line">By restricting the access to same object by multiple threads.</span><br></pre></td></tr></table></figure></li><li><p>The Logic Behind The Synchronization In Java :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  The synchronization in java is built around an entity called object lock or monitor. Here is the brief description about lock or monitor.</span><br><span class="line">- Whenever an object is created to any class, an object lock is created and is stored inside the object.</span><br><span class="line">- One object will have only one object lock associated with it.</span><br><span class="line">- Any thread wants to enter into synchronized methods or blocks of any object, they must acquire object lock associated with that object and release the lock after they are done with the execution.</span><br><span class="line">- The other threads which wants to enter into synchronized methods of that object have to wait until the currently executing thread releases the object lock.</span><br><span class="line">- To enter into static synchronized methods or blocks, threads have to acquire class lock associated with that class as static members are stored inside the class memory.</span><br></pre></td></tr></table></figure></li><li><p>mutex</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Shared</span><br><span class="line">&#123;</span><br><span class="line">    static void staticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (Shared.class)</span><br><span class="line">        &#123;</span><br><span class="line">            //static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void NonStaticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (this)</span><br><span class="line">        &#123;</span><br><span class="line">            //Non-static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void anotherNonStaticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (new Shared())</span><br><span class="line">        &#123;</span><br><span class="line">            //Non-static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>10 Points-To-Remember About Synchronization In Java :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. You can use synchronized keyword only with methods but not with variables, constructors, static initializer and instance initializers.</span><br><span class="line">2. Constructors, Static initializer and instance initializer canâ€™t be declared with synchronized keyword, but they can contain synchronized blocks.</span><br><span class="line">3. Both static and non-static methods can use synchronized keyword. For static methods, thread need class level lock and for non-static methods, thread need object level lock.</span><br><span class="line">4. It is possible that both static synchronized and non-static synchronized methods can run simultaneously. Because, static methods need class level lock and non-static methods need object level lock.</span><br><span class="line">5. A method can contain any number of synchronized blocks. This is like synchronizing multiple parts of a method.</span><br><span class="line">6. Synchronization blocks can be nested.</span><br><span class="line">7. Lock acquired by the thread before executing a synchronized method or block must be released after the completion of execution, no matter whether execution is completed normally or abnormally (due to exceptions).</span><br><span class="line">8. Synchronization in java is Re-entrant in nature. A thread can not acquire a lock that is owned by another thread. But, a thread can acquire a lock that it already owns. That means if a synchronized method gives a call to another synchronized method which needs same lock, then currently executing thread can directly enter into that method or block without acquiring the lock.</span><br><span class="line">9. synchronized method or block is very slow. They decrease the performance of an application. So, special care need to be taken while using synchronization. Use synchronization only when you needed it the most.</span><br><span class="line">10. Use synchronized blocks instead of synchronized methods. Because, synchronizing some part of a method improves the performance than synchronizing the whole method.</span><br></pre></td></tr></table></figure></li><li><p>wait(), notify() and notifyAll()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">These methods are final methods of java.lang.Object class. That means every class in java will have these methods. Below is the method signatures of these methods.</span><br><span class="line">1. public final void wait() throws InterruptedException</span><br><span class="line">This method tells the currently executing thread to release the lock of this object and wait until some other thread acquires the same lock and notify it using either notify() or notifyAll() methods. This method throws InterruptedException if waiting thread is interrupted.</span><br><span class="line">2. public final void notify()</span><br><span class="line">This method wakes up one thread randomly that called wait() method on this object.</span><br><span class="line">3. public final void notifyAll()</span><br><span class="line">This method wakes up all the threads that called wait() method on this object. But, only one thread will acquire lock of this object depending upon the priority.</span><br><span class="line"></span><br><span class="line">Important Note : These three methods must be called within synchronized method or block. Any thread which calls these methods must have lock of that object.</span><br></pre></td></tr></table></figure></li><li><p>Some Things-To-Remember About wait(), notify() and notifyAll() :</p><ul><li>If a thread calls notify() method and more than one threads are waiting for the object lock, then only one thread will be notified randomly.</li><li>When a thread calls notifyAll() method on an object, it notifies all the threads which are waiting for this object lock. But, only one thread will acquire this object lock depending upon priority.</li><li>When you call sleep() method on a thread, thread goes to sleep with holding the object lock with it. But, if you call wait() method, thread releases the object lock and goes for sleep. This is the main difference between wait() and sleep() methods.</li><li>wait(), notify() and notifyAll() are final methods of java.lang.Object class not java.lang.Thread class.</li><li>wait(), notify() and notifyAll() â€“ all these three methods throw IllegalMonitorStateException if the calling thread does not owns the object lock.</li><li>wait() method is overloaded in Object class. There are two more wait() methods available in Object class.</li></ul></li><li><p>Thread Life Cycle OR Thread States In Java</p><ul><li>NEW,    A thread will be in this state before calling start() method.<ul><li>RUNNABLE, A thread will be in this state after calling the start() method.</li><li>BLOCKED, A thread will be in this state when a thread is waiting for object lock to enter into synchronized method/block or a thread will be in this state if deadlock occurs. </li><li>WAITING, A thread will be in this state when wait() or join() method is called.</li><li>TIMED_WAITING, A thread will be in this state when thread is sleeping. i.e A thread will be in this state when sleep() or wait() with timeOut or join() with timeOut is called.</li><li>TERMINATED, A thread will be in this state once it finishes itâ€™s execution.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/JavaThreadLifeCycle.png?x70034" alt=""></li></ul></li></ul></li><li><p>7 Things Every Java Programmer Should Know About Threads In Java</p><ul><li><strong>Runnable interface vs Thread class</strong> : I am of opinion that when multiple threads need to execute same task, then use Runnable interface. If multiple threads need to execute different tasks, then go for Thread class.</li></ul></li><li><p>Difference Between wait() and sleep() Methods In Java</p><ul><li><p><strong>wait()</strong>:  releases the lock or monitor</p><ul><li><strong>sleep()</strong>: not  releases the lock or monitor</li></ul><p><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/02/WaitAndSleep.png" alt=""></p></li></ul></li><li><p>Extends Thread Vs Implements Runnable In Java<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/12/RunnableVsThread.png" alt=""><br>From the above all findings, it is clear that â€œImplements Runnableâ€ is the preferred method to create the threads in java.</p></li><li><p>How To Stop A Thread In Java</p><ul><li>One is using boolean variable and second one is using interrupt() method. In this post, we will discuss both of these methods.</li></ul></li><li><p>Difference Between notify And notifyAll In Java</p><ul><li>wait(), notify() and notifyAll() must be called within synchronized method or synchronized block.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/03/NotifyVsNotifyAll.png" alt=""></li></ul></li><li><p>Difference Between BLOCKED Vs WAITING States In Java</p><ul><li>There are six thread states in java. They are <strong>NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING and TERMINATED</strong>.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/06/WaitingVsBlocked.png" alt=""></li></ul></li></ul><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><ul><li>strings are treated as objects.</li><li>JVM allocates some memory specially meant for string literals. This part of the heap memory is called String Constant Pool.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String s1 = &quot;abc&quot;; </span><br><span class="line">String s2 = &quot;xyz&quot;;</span><br><span class="line">String s3 = &quot;123&quot;;</span><br><span class="line">String s4 = &quot;A&quot;;</span><br><span class="line">   String s5 = new String(&quot;abc&quot;);</span><br><span class="line">char[] c = &#123;&apos;J&apos;, &apos;A&apos;, &apos;V&apos;, &apos;A&apos;&#125;;</span><br><span class="line">String s6 = new String(c);</span><br><span class="line">String s7 = new String(new StringBuffer());</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/String-Constant-Pool.png" alt=""></p><ul><li>String Constant Pool is allocated to an object depending upon itâ€™s content. There will be no two objects in the pool having the same content.</li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â€œWhen you create a string object using string literal, JVM first checks the content of to be created object. If there exist an object in the pool with the same content, then it returns the reference of that object. It doesnâ€™t create new object. If the content is different from the existing objects then only it creates new object.â€</span><br></pre></td></tr></table></figure>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In simple words, there can not be two string objects with same content in the string constant pool. But, there can be two string objects with the same content in the heap memory.</span><br></pre></td></tr></table></figure></li><li><p>Immutability is the fundamental property of string objects. In whatever way you create the string objects, either using string literals or using new operator, they are immutable.</p></li></ul><h3 id="Generic"><a href="#Generic" class="headerlink" title="Generic"></a>Generic</h3><ul><li><p>Defining Generic Class</p><ul><li>Generics Work Only With Derived Types</li></ul></li><li><p>Rules To Follow While Implementing Generic Interfaces</p><ul><li><p>Only generic classes can implement generic interfaces.<br><code>class GenericClass&lt;T&gt; implements GenericInterface&lt;T&gt;</code><br>-A normal class can implement a generic interface if type parameter of generic interface is a wrapper class. For example, below implementation of GenericInterface is legal.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface GenericInterface&lt;Integer&gt;&#123;</span><br><span class="line">    //Generic interface with Integer as type parameter</span><br><span class="line">&#125;</span><br><span class="line">class NormalClass implements GenericInterface&lt;Integer&gt;&#123;</span><br><span class="line">    //Normal class implementing generic interface</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Class implementing generic interface at least must have same number and same type of parameters and at most can have any number and any type of parameters.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class GenericClass2&lt;T, V&gt; implements GenericInterface&lt;T&gt;&#123;</span><br><span class="line">  //Class with two type parameters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Define Methods And Constructors As Generic</p><ul><li>Generic Methods:<br><code>&lt;type-Parameters&gt; return_type method_name(parameter list)</code></li><li>Constructors As Generics,As we all know that constructors are like methods but without return types</li></ul></li><li><p>Bounded Types</p><ul><li>the syntax for declaring Bounded type parameters.<br><code>&lt;T extends SuperClass&gt;</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T extends Number&gt; void printNumbers(T[] t)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Wildcard arguments </p><ul><li>The syntax for declaring this type of wildcard arguments is:<code>GenericType&lt;?&gt;</code></li><li>To specify an upper bound for wildcards:<code>GenericType&lt;? extends SuperClass&gt;</code></li><li>specify a lower bound for wildcard argument using super clause:<code>GenericType&lt;? super SubClass&gt;</code></li></ul></li><li>Type Erasure</li></ul><h3 id="Collection-Framework"><a href="#Collection-Framework" class="headerlink" title="Collection Framework"></a>Collection Framework</h3><ul><li>Collection Framework â€“ Class Hierarchy<ul><li>All classes and interfaces related to Collection Framework are placed in java.util package.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/CollectionHierarchy.png" alt=""></li></ul></li><li><p>Collection Framework â€“ Collection Interface<br>  <img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/CollectionInterface.png" alt=""></p><ul><li>equals() and hashcode() methods in the Collection interface are not the methods of java.lang.Object class. Because, interfaces does not inherit from Object class. Only classes in java are inherited from Object class. Any classes implementing Collection interface must provide their own version of equals() and hashcode() methods or they can retain default version inherited from Object class.</li></ul></li><li>Collection Framework â€“ List Interface<ul><li>the class diagram of List interfaceï¼š<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/ListInterface.png" alt=""></li></ul></li><li>Collection Framework â€“ The ArrayList Class<ul><li>Default initial capacity of an ArrayList is 10.<ul><li>the hierarchy diagram of ArrayList class.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/ArrayListClass.png" alt=""></li><li>Properties Of ArrayList :<ul><li>Size of the ArrayList is not fixed. It can increase and decrease dynamically as we add or delete the elements.<ul><li>ArrayList can have any number of null elements.</li><li>ArrayList can have duplicate elements.</li><li>As ArrayList implements RandomAccess, you can get, set, insert and remove elements of the ArrayList from  any arbitrary position.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/ArrayListTemplateNew.png" alt=""></li></ul></li></ul></li></ul></li></ul></li><li><p>Differences Between Array Vs ArrayList In Java</p><ul><li><p>Array is static in nature,ArrayList is dynamic in nature</p><ul><li>when you try to add elements to ArrayList beyond its capacity, it creates the new array with increased size and copies the elements from old array to new array.</li><li>if adding an element requires resizing of an ArrayList, then it gets slightly slower as it involves creating a new array in the background and copying all elements from old array to new array.</li><li>Array can hold both primitive data types (int, floatâ€¦.) as well as objects. Where as ArrayList can hold only objects. If you try to insert primitive data into ArrayList, data is automatically boxed into corresponding wrapper class.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/09/ArrayVsArrayList.png" alt=""></li><li>ArrayList to Array,<strong>toArray()</strong> method returns an array containing all elements of the ArrayList.<code>Object[] array = list.toArray();</code></li><li><p>Array To ArrayList:</p><ul><li><p>Arrays.asList() </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(array));</span><br></pre></td></tr></table></figure><ul><li><p>Collection.addAll()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">Collections.addAll(list, array);</span><br></pre></td></tr></table></figure></li><li><p>ArrayList.addAll()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">list.addAll(Arrays.asList(array));</span><br></pre></td></tr></table></figure></li><li><p>Using streams from java 8</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">List&lt;Object&gt; list = Arrays.stream(array).collect(Collectors.toList());</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/07/ArrayToArrayList.png" alt=""></p></li></ul></li></ul></li></ul></li><li><p>Remove Duplicate Elements From ArrayList</p><ul><li><p>Using HashSet</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HashSet&lt;String&gt; set = new HashSet&lt;String&gt;(listWithDuplicateElements);</span><br><span class="line">ArrayList&lt;String&gt; listWithoutDuplicateElements = new ArrayList&lt;String&gt;(set);</span><br></pre></td></tr></table></figure><ul><li>Using LinkedHashSet<br><code>LinkedHashSet&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(listWithDuplicateElements);</code><br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/07/RemovingDuplicateElementsFromArrayList.png" alt=""></li></ul></li></ul></li><li>Collection Framework â€“ The Vector Class<ul><li>Vector class is synchronized. <ul><li>All methods of Vector class are synchronized </li><li>capacity of the vector will be doubled whenever size exceeds capacity.</li><li>Why Not To Use Vector Class In Your Code<ul><li>you can achieve thread safe ArrayList by using synchronizedList() method of Collections class. </li></ul></li></ul></li></ul></li><li>Java Collection Framework â€“ The LinkedList Class<ul><li>In general terms, LinkedList is a data structure where each element consist of three things. First one is the reference to previous element, second one is the actual value of the element and last one is the reference to next element.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/HowLinkedListWorks.png" alt=""></li></ul></li><li><p>Collection Framework â€“ The Queue Interface</p><ul><li>First-In-First-Out.<ul><li>You canâ€™t add or get or set elements at an arbitrary position in the queues.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/HowQueueWorks.png" alt=""></li><li>Properties Of Queue :<ul><li>Null elements are not allowed in the queue. <ul><li>Queue can have duplicate elements.</li><li>Unlike a normal list, queue is not random access. i.e you canâ€™t set or insert or get elements at an arbitrary positions.</li><li>In the Queue Interface, there are two methods to obtain and remove the elements from the head of the queue. They are poll() and remove(). The difference between them is, poll() returns null if the queue is empty and remove() throws an exception if the queue is empty.</li><li>There are two methods in the Queue interface to obtain the elements but donâ€™t remove. They are peek() and element(). peek() returns null if the queue is empty and element() throws an exception if the queue is empty.</li></ul></li></ul></li></ul></li></ul></li><li><p>Collection Framework â€“ The Deque Interface</p><ul><li>the hierarchy diagram of Deque interfaceï¼š<br> <img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/Deque.png" alt=""><ul><li>The main advantage of Deque is that you can use it as both Queue (FIFO) as well as Stack (LIFO).</li><li>Deque is nothing but the double ended queue. That means, you can insert, retrieve and remove the elements from both the ends.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/HowDequeWorks.png" alt=""></li></ul></li></ul></li><li><p>Collection Framework â€“ The Set Interface</p><ul><li>Order of elements in a set is implementation dependent. HashSet elements are ordered on hash code of elements. TreeSet elements are ordered according to supplied Comparator (If no Comparator is supplied, elements will be placed in ascending order) and LinkedHashSet maintains insertion order.</li><li>The HashSet internally uses HashMap to store the objects. The elements you insert in HashSet will be stored as keys of that HashMap object and their values will be a constant called PRESENT. This constant is defined as private static final Object PRESENT = new Object() in the source code of HashSet class.</li><li>HashSet can have maximum one null element.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/01/HowHashSetWorks.png" alt=""></li><li>LinkedHashSet internally uses LinkedHashMap to store itâ€™s elements just like HashSet which internally uses HashMap to store itâ€™s elements.</li><li>LinkedHashSet maintains insertion order. This is the main difference between LinkedHashSet and HashSet.</li><li>SortedSet elements are sorted according to supplied Comparator. If you donâ€™t mention any Comparator while creating a SortedSet, elements will be placed in ascending order.</li><li>SortedSet Inserted elements must be of Comparable type and they must be mutually Comparable.</li><li>Elements inserted in the TreeSet must be of Comparable type and elements must be mutually comparable. </li><li>TreeSet internally uses TreeMap to store itâ€™s elements just like HashSet and LinkedHashSet which use HashMap and LinkedHashMap respectively to store their elements.</li></ul></li><li>Java Collection Framework â€“ The Map Interface<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/01/MapInterface.png" alt=""><ul><li>Each key-value pairs of the map are stored as Map.Entry objects. Map.Entry is an inner interface of Map interface.</li><li>HashMap doesnâ€™t maintain any order of elements. LinkedHashMap maintains insertion order of elements. Where as TreeMap places the elements according to supplied Comparator.</li><li>Default initial capacity of HashMap is 16.</li><li>Hashing is nothing but the function or algorithm or method which when applied on any object/variable returns an unique integer value representing that object/variable.</li><li>The capacity of an HashMap is the number of buckets in the hash table. The initial capacity is the capacity of an HashMap at the time of its creation. The default initial capacity of the HashMap is 24 i.e 16. The capacity of the HashMap is doubled each time it reaches the threshold. i.e the capacity is increased to 25=32, 26=64, 27=128â€¦.. when the threshold is reached.</li><li>HashMap internally uses an array of Entry&lt;K, V&gt; objects to store the data.</li><li>HashTable is a legacy class. It is almost considered as due for deprecation. Since JDK 1.5, ConcurrentHashMap is considered as better option than the HashTable.</li></ul></li></ul><h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><ul><li><p>Java Database Connectivity API which is used by the java application to interact with the database.</p><ul><li>JDBC API not directly interacts with the database. It uses JDBC driver of that database to interact with the database.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/06/JavaJDBCDriverDatabase.png" alt=""></li><li><p>JDBC driver is a software component provided along with the database which is required by the JDBC API to interact with the database. Each database will have its own JDBC driver.</p><blockquote><p>In simple terms, JDBC drivers are nothing but the implementations of interfaces provided in the JDBC API (java.sql and javax.sql packages) with respect to a particular database. These implementations are bundled in a JAR file and supplied along with the database. These implementations are used by the JDBC API to interact with that database.</p></blockquote></li></ul></li></ul><h3 id="Big-O-Notations"><a href="#Big-O-Notations" class="headerlink" title="Big O Notations"></a>Big O Notations</h3><ul><li>Big O notations consist of O and an expression enclosed within ( ). Expression within ( ) represents the number of computations a particular algorithm has to perform to solve a given problem.</li><li><p><strong>O(1)</strong> represents an algorithm which has to perform exact one computation to solve a problem. O(1) represents an algorithm which takes same time to execute for any size of input data. In other words, O(1) denotes an algorithm which performance is not affected by the size of the input data. </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">boolean isFirstElementZero(int[] inputData)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[0] == 0)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>O(N)</strong> represents an algorithm which has to perform â€˜Nâ€™ computations to solve a problem. Where â€˜Nâ€™ is the number of elements in input data. That means algorithm will take more time as number of elements in input data increases. In the other words, O(N) denotes an algorithm whose performance is directly proportional to size of the input data.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">boolean searchForElement(int[] inputData, int n)</span><br><span class="line">&#123;</span><br><span class="line">for (int i = 0; i &lt; inputData.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[i] == n)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>O(N^2)</strong> denotes an algorithm which has to perform N^2 computations to solve a problem. Where N is the number of elements in input data. In the other words, O(N^2) represents an algorithm whose performance is directly proportional to square of the size of the input data. The algorithms which have nested iterations over the input data will give O(N^2) performance. Further deeper iterations over the input data will give O(N^3), O(N^4) and so on.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">boolean findDuplicates(int[] inputData)</span><br><span class="line">&#123;</span><br><span class="line">for (int i = 0; i &lt; inputData.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">for (int j = 0; j &lt; inputData.length; j++)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[i] == inputData[j] &amp;&amp; i!=j)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>O(log N)</strong> represents an algorithm whose number of computations grows linearly as input data grows exponentially. i.e O(log N) represents the algorithms whose execution time grows linearly as input data grows exponentially. That means if an algorithm takes 1 second to compute 10 elements, then it will take 2 seconds to compute 100 elements, 3 seconds to compute 1000 elements and so on. The best example for O(log N) is binary search algorithm which uses divide and conquer rule to search for an element.</p></li><li><strong>O(2N)</strong> represents an algorithm whose execution time is doubled for every extra element in the input data. For example, if an algorithm takes 4 seconds to compute 2 elements, then it will take 8 seconds to compute 3 elements, 16 seconds for 4 elements, 32 seconds for 5 elements and so on.</li><li><strong>O(N!)</strong> represents an algorithm which has to perform N! computations to solve a problem. Where N is the number of elements in the input data. For example, if an algorithm takes 2 seconds to compute 2 elements, then it will take 6 seconds to compute 3 elements, 24 seconds to compute 4 elements and so on.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/05/Big-O-Notation.png" alt=""></li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mybatis snippet</title>
      <link href="/2016/10/16/mybatis%20snippet/"/>
      <url>/2016/10/16/mybatis%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><ul><li><p>about date jdbcType</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#&#123;beginDate,jdbcType=DATE&#125; (no time of the day), or</span><br><span class="line">#&#123;beginDate,jdbcType=TIMESTAMP&#125; (if you need to include the time of the day).</span><br></pre></td></tr></table></figure></li></ul><p>And the Java parameter you want to apply should be of type:<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.sql.Date (date without time)</span><br><span class="line">java.sql.Timestamp (timestamp)</span><br><span class="line">java.util.Date (date and time).</span><br></pre></td></tr></table></figure></p><ul><li>the Greater Than/Equal Operator and the Less Than/Equal Operators:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ROWNUM &amp;gt;= 20</span><br><span class="line">ROWNUM &amp;lt;= 20</span><br></pre></td></tr></table></figure></li></ul><h3 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><p>ä½¿ç”¨SpringMVC+Mybatisæ¡†æ¶å†™é¡¹ç›®çš„æ—¶å€™ï¼Œåœ¨mapperé‡Œé¢çš„sqlè¯­å¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"updateTime != null"</span>&gt;</span></span><br><span class="line">and update_time &amp;gt; #&#123;updateTime,jdbcType=TIMESTAMP&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å‡ºé”™ï¼š<code>There is no getter for property named &#39;updateTime&#39; in &#39;class java.util.Date&#39;</code></p><p>åŸå› æ˜¯ï¼š<br>å¦‚æœå°†andè¯­å¥ä¸­çš„#ï½›å±æ€§ï½å†™åœ¨ifè¯­å¥ä¸­ï¼Œmybatisä¼šå»å¯¹è±¡ä¸­ä»å®ƒçš„getæ–¹æ³•ä¸­å–å€¼ï¼Œè€Œæˆ‘ä¹‹å‰æ˜¯ç›´æ¥ä¼ é€’çš„å€¼ï¼Œå¹¶æ²¡æœ‰å°è£…å¯¹è±¡ã€‚<br>è§£å†³åŠæ³•ï¼š</p><pre><code> 1. æŠŠupdateTimeéœ€æ”¹ä¸ºdate2. æŠŠupdateTimeä»£è¡¨çš„å‚æ•°å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­</code></pre>]]></content>
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>springboot snippet</title>
      <link href="/2016/08/14/springboot%20snippet/"/>
      <url>/2016/08/14/springboot%20snippet/</url>
      <content type="html"><![CDATA[<h2 id="é—®é¢˜éšè®°"><a href="#é—®é¢˜éšè®°" class="headerlink" title="é—®é¢˜éšè®°"></a>é—®é¢˜éšè®°</h2><ol><li>Spring Booté€šè¿‡Mybatisï¼Œä½¿ç”¨mapperæ¥å£å’Œxmlé…ç½®sqlï¼Œè¿æ¥æ•°æ®åº“</li></ol><ul><li><p>é¦–å…ˆåœ¨é…ç½®æ–‡ä»¶application.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/test</span><br><span class="line">spring.datasource.username=***</span><br><span class="line">spring.datasource.password=***</span><br><span class="line">spring.datasource.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line"></span><br><span class="line">#mybatis.typeAliasesPackageï¼šä¸ºå®ä½“å¯¹è±¡æ‰€åœ¨çš„åŒ…ï¼Œè·Ÿæ•°æ®åº“è¡¨ä¸€ä¸€å¯¹åº”</span><br><span class="line">#mybatis.mapperLocationsï¼šmapperæ–‡ä»¶çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">mybatis.typeAliasesPackage=com.xxx.model</span><br><span class="line">mybatis.mapperLocations=classpath:mybatis/mapper/*Mapper.xml</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¯åŠ¨ç±»Application.javaä¸­å†™ä¸Šé…ç½®ä¿¡æ¯ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.xxx.dao"</span>) <span class="comment">// mybatisæ‰«æè·¯å¾„ï¼Œé’ˆå¯¹çš„æ˜¯æ¥å£Mapperç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DailyreportApplication</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DailyreportApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>mysqlè¿æ¥å¼‚å¸¸<code>java.sql.SQLException: Value &#39;0000-00-00&#39; can not be represented as java.sql.Date</code></li></ol><ul><li><p>è§£å†³åŠæ³•</p><p><code>jdbc:mysql://yourserver:3306/yourdatabase?zeroDateTimeBehavior=convertToNull</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> springboot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git skill</title>
      <link href="/2016/08/05/git%20snippet/"/>
      <url>/2016/08/05/git%20snippet/</url>
      <content type="html"><![CDATA[<h4 id="Gitä¿®æ”¹-gitignoreä¸ç”Ÿæ•ˆ"><a href="#Gitä¿®æ”¹-gitignoreä¸ç”Ÿæ•ˆ" class="headerlink" title="Gitä¿®æ”¹.gitignoreä¸ç”Ÿæ•ˆ"></a>Gitä¿®æ”¹.gitignoreä¸ç”Ÿæ•ˆ</h4><ul><li><p>åœ¨gitä¸­ï¼Œå¦‚æœæƒ³å¿½ç•¥æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä¿®æ”¹æ ¹ç›®å½•ä¸­çš„.gitignoreæ–‡ä»¶</p><p>ä½†æœ‰æ—¶å€™æŠŠæŸäº›ç›®å½•æˆ–è€…æ–‡ä»¶åŠ å…¥å¿½ç•¥è§„åˆ™ï¼Œå‘ç°å¹¶æœªç”Ÿæ•ˆ</p></li><li><p>æœªç”Ÿæ•ˆåŸå› ï¼š.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«è¿½è¸ª(track)çš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„</p></li><li><p>è§£å†³æ–¹æ¡ˆï¼šå…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åæäº¤ã€‚</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached &lt;è¦å¿½ç•¥çš„å…·ä½“æ–‡ä»¶æˆ–è€…ç›®å½•&gt; æˆ–è€… git rm -r --cached . </span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;update .gitignore&quot;</span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶æäº¤"><a href="#æ–‡ä»¶æäº¤" class="headerlink" title="æ–‡ä»¶æäº¤"></a>æ–‡ä»¶æäº¤</h4><ul><li><p>æäº¤å•ä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit &lt;file&gt; -m "your comment" </span><br><span class="line">git pull</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>æäº¤å¤šä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯éœ€è¦æ’é™¤æŒ‡å®šçš„æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add -u</span><br><span class="line">git reset -- main/dontcheckmein.txt</span><br><span class="line">ç„¶åè¿›è¡Œcommitã€pullç­‰æ“ä½œ</span><br></pre></td></tr></table></figure></li></ul><h4 id="Git-forkåçš„åˆ†æ”¯ï¼Œæ›´æ–°æœ€æ–°çš„æºä»£ç "><a href="#Git-forkåçš„åˆ†æ”¯ï¼Œæ›´æ–°æœ€æ–°çš„æºä»£ç " class="headerlink" title="Git forkåçš„åˆ†æ”¯ï¼Œæ›´æ–°æœ€æ–°çš„æºä»£ç "></a>Git forkåçš„åˆ†æ”¯ï¼Œæ›´æ–°æœ€æ–°çš„æºä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sourcerä¸ºæºé¡¹ç›®ä»£ç </span><br><span class="line">forkerä¸ºforkä¹‹åçš„é¡¹ç›®ä»£ç </span><br><span class="line"></span><br><span class="line">1ã€æ‰¾ä¸€ä¸ªç©ºçš„ç›®å½•ä¸‹ç­¾å‡º fork åçš„ä»£ç </span><br><span class="line">git clone https://github.com/sourcer/demo.git</span><br><span class="line">æŸ¥çœ‹ remote ä¿¡æ¯</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">2ã€ç„¶åæ·»åŠ æºé¡¹ç›®åœ°å€ï¼ˆè·ç¦»å®šä¹‰ä¸º sourceï¼‰</span><br><span class="line">git remote add source https://github.com/forker/demo.git</span><br><span class="line">æŸ¥çœ‹ remote ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢ä¸¤æ¡ä¿¡æ¯</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">3ã€fetch æºé¡¹ç›®</span><br><span class="line">git fetch source</span><br><span class="line"></span><br><span class="line">4ã€åˆå¹¶ä»£ç </span><br><span class="line">git merge source/master</span><br><span class="line"></span><br><span class="line">5ã€æŠŠåˆå¹¶æœ€æ–°çš„ä»£ç æ¨é€åˆ°ä½ çš„forké¡¹ç›®ä¸Š</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„åŒºåˆ«"><a href="#æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„åŒºåˆ«" class="headerlink" title="æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„åŒºåˆ«"></a>æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„åŒºåˆ«</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># uncommited file to HEAD</span><br><span class="line">git diff &lt;path&gt;</span><br><span class="line"></span><br><span class="line"># uncommited file to before last commit</span><br><span class="line">git diff HEAD^ -- &lt;path&gt;</span><br><span class="line"></span><br><span class="line">#last commit to before last commit</span><br><span class="line">git diff HEAD^ HEAD -- &lt;path&gt;</span><br><span class="line"></span><br><span class="line">#difference between HEAD and n-th grandparent</span><br><span class="line">git diff HEAD~n HEAD -- &lt;path&gt;</span><br><span class="line"></span><br><span class="line">#Another cool feature is whatchanged command</span><br><span class="line">git whatchanged -- &lt;path&gt;</span><br></pre></td></tr></table></figure><h4 id="å›æ»šè¿œç¨‹åˆ†æ”¯"><a href="#å›æ»šè¿œç¨‹åˆ†æ”¯" class="headerlink" title="å›æ»šè¿œç¨‹åˆ†æ”¯"></a>å›æ»šè¿œç¨‹åˆ†æ”¯</h4><p>1ã€æœ¬åœ°ä»£ç å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬</p><blockquote><p>git reset â€“hard HEAD~1</p></blockquote><p>ï¼ˆæˆ–è€…å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬commitIdï¼‰</p><blockquote><p>git reset â€“hard commitId</p></blockquote><p>2ã€åŠ å…¥-få‚æ•°ï¼Œå¼ºåˆ¶æäº¤ï¼Œè¿œç¨‹ç«¯å°†å¼ºåˆ¶è·Ÿæ–°åˆ°resetç‰ˆæœ¬</p><blockquote><p> git push -f</p></blockquote><h4 id="æ‹‰å–è¿œç¨‹åˆ†æ”¯"><a href="#æ‹‰å–è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æ‹‰å–è¿œç¨‹åˆ†æ”¯"></a>æ‹‰å–è¿œç¨‹åˆ†æ”¯</h4><p>First, fetch the remote branches:</p><p><strong>git fetch origin</strong></p><p>Next, checkout the branch you want. In this case, the branch we want is called â€œbranchxyzâ€.</p><p><strong>git checkout -b branchxyz origin/branchxyz</strong></p><h4 id="æ–°å»ºåˆ†æ”¯"><a href="#æ–°å»ºåˆ†æ”¯" class="headerlink" title="æ–°å»ºåˆ†æ”¯"></a>æ–°å»ºåˆ†æ”¯</h4><ul><li><p>To create a new branch from a branch you do NOT have checked out:</p><p><code>git branch new_branch from_branch</code></p></li><li><p>To create a new branch from the branch you DO have checked out:</p><p><code>git branch new_branch</code></p></li><li><p>To create <em>and check out</em> a new branch from the branch you DO have checked out:</p><p><code>git checkout -b new_branch</code></p></li><li><p>To create <em>and check out</em> a new branch from a branch you do NOT have checked out:</p><p><code>git checkout -b new_branch from_branch</code></p></li><li><p>To rename a branch</p><p><code>git branch -m old_name new_name</code></p></li></ul><h4 id="åˆ é™¤åˆ†æ”¯"><a href="#åˆ é™¤åˆ†æ”¯" class="headerlink" title="åˆ é™¤åˆ†æ”¯"></a>åˆ é™¤åˆ†æ”¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// delete branch locally</span><br><span class="line">git branch -d localBranchName</span><br><span class="line"></span><br><span class="line">// delete branch remotely</span><br><span class="line">git push origin --delete remoteBranchName</span><br><span class="line"></span><br><span class="line">//If someone else has already deleted the branch, you just do below</span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java skill</title>
      <link href="/2016/05/20/java%20skill/"/>
      <url>/2016/05/20/java%20skill/</url>
      <content type="html"><![CDATA[<h2 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h2><ul><li><p>intå˜é‡è‡ªå¢ æ•ˆç‡é—®é¢˜ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i++;å’Œi += 1;å½¢æˆçš„æŒ‡ä»¤æ•°è¾ƒå°‘ï¼Œä¸”ä¸éœ€è¦æ“ä½œæ•°æ ˆã€‚ç›¸å¯¹è€Œè¨€ï¼Œi = i+1;éœ€è¦è‡³å°‘2ä¸ªæ“ä½œæ•°æ ˆæ·±åº¦ï¼Œå¹¶ä¸”å½¢æˆçš„æŒ‡ä»¤æ•°è¾ƒå¤šã€‚æ•…ï¼Œi++;å’Œi+= 1;çš„æ•ˆç‡ä¸€æ ·ï¼Œå¹¶ä¸”äºŒè€…çš„æ•ˆç‡éƒ½ä¼˜äºi = i+1;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p><strong>Tï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿæ˜¯è¿™æ ·çº¦å®šçš„ï¼š</strong></p><ul><li>ï¼Ÿè¡¨ç¤ºä¸ç¡®å®šçš„ java ç±»å‹</li><li>T (type) è¡¨ç¤ºå…·ä½“çš„ä¸€ä¸ªjavaç±»å‹</li><li>K V (key value) åˆ†åˆ«ä»£è¡¨javaé”®å€¼ä¸­çš„Key Value</li><li>E (element) ä»£è¡¨Element</li></ul><p><strong>ï¼Ÿå’Œ T çš„åŒºåˆ«</strong>ï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz/knmrNHnmCLFRVA73vYfkqVGfia90X5nyEsksfM8Vz6btFZCRd3PCSJC1XkZhaJ0ufxcoohxAdr8X1tykU9CZPUQ/640?wx_fmt=other&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p><p>ï¼Ÿå’Œ T éƒ½è¡¨ç¤ºä¸ç¡®å®šçš„ç±»å‹ï¼ŒåŒºåˆ«åœ¨äºæˆ‘ä»¬å¯ä»¥å¯¹ T è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯å¯¹ ï¼Ÿä¸è¡Œï¼Œæ¯”å¦‚å¦‚ä¸‹è¿™ç§ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å¯ä»¥</span><br><span class="line">T t = operate();</span><br><span class="line"></span><br><span class="line">// ä¸å¯ä»¥</span><br><span class="line">ï¼Ÿcar = operate();</span><br></pre></td></tr></table></figure><p>ç®€å•æ€»ç»“ä¸‹ï¼š</p><p>T æ˜¯ä¸€ä¸ª ç¡®å®šçš„ ç±»å‹ï¼Œé€šå¸¸ç”¨äºæ³›å‹ç±»å’Œæ³›å‹æ–¹æ³•çš„å®šä¹‰ï¼Œï¼Ÿæ˜¯ä¸€ä¸ª ä¸ç¡®å®š çš„ç±»å‹ï¼Œé€šå¸¸ç”¨äºæ³›å‹æ–¹æ³•çš„è°ƒç”¨ä»£ç å’Œå½¢å‚ï¼Œä¸èƒ½ç”¨äºå®šä¹‰ç±»å’Œæ³›å‹æ–¹æ³•ã€‚</p><p><strong>PECSï¼ˆProducer Extends Consumer Superï¼‰</strong>åŸåˆ™ï¼šä½œä¸ºç”Ÿäº§è€…æä¾›æ•°æ®ï¼ˆå¾€å¤–è¯»å–ï¼‰æ—¶ï¼Œé€‚åˆç”¨ä¸Šç•Œé€šé…ç¬¦ï¼ˆextendsï¼‰ï¼›ä½œä¸ºæ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®ï¼ˆå¾€é‡Œå†™å…¥ï¼‰æ—¶ï¼Œé€‚åˆç”¨ä¸‹ç•Œé€šé…ç¬¦ï¼ˆsuperï¼‰ã€‚</p><h2 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h2><p>åœ¨ JDK8 ä»¥åï¼Œå»ºè®®ä½¿ç”¨ DateTimeFormatter ä»£æ›¿ SimpleDateFormat ï¼Œå› ä¸º SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œè€Œ DateTimeFormatter æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„çº¿ç¨‹å®‰å…¨æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°ï¼Œæ¯”å¦‚ apache çš„ DateFormatUtils å·¥å…·ç±»ã€‚</p>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>shiro snippet</title>
      <link href="/2016/05/20/shiro%20snippet/"/>
      <url>/2016/05/20/shiro%20snippet/</url>
      <content type="html"><![CDATA[<p><strong>å¯¹äºä¸€ä¸ªå¥½çš„æ¡†æ¶ï¼Œä»å¤–éƒ¨æ¥çœ‹åº”è¯¥å…·æœ‰éå¸¸ç®€å•æ˜“äºä½¿ç”¨çš„ APIï¼Œä¸” API å¥‘çº¦æ˜ç¡®ï¼›ä»å†…éƒ¨æ¥çœ‹çš„è¯ï¼Œå…¶åº”è¯¥æœ‰ä¸€ä¸ªå¯æ‰©å±•çš„æ¶æ„ï¼Œå³éå¸¸å®¹æ˜“æ’å…¥ç”¨æˆ·è‡ªå®šä¹‰å®ç°ï¼Œå› ä¸ºä»»ä½•æ¡†æ¶éƒ½ä¸èƒ½æ»¡è¶³æ‰€æœ‰éœ€æ±‚ã€‚ </strong></p><hr><ul><li><p>Subject</p><p>ä¸»ä½“ï¼Œä»£è¡¨äº†å½“å‰çš„ç”¨æˆ·</p></li><li><p>SecurityManager</p><p>å®‰å…¨ç®¡ç†å™¨ï¼Œå®ƒç®¡ç†ç€æ‰€æœ‰Subjectï¼Œç›¸å½“äºspringmvcä¸­çš„DispatcherServlet(å‰ç«¯æ§åˆ¶å™¨)</p></li><li><p>Realm</p><p>åŸŸï¼ŒShiroä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ï¼‰ ï¼Œæ˜¯éªŒè¯ä¸»ä½“subjectçš„æ•°æ®æº</p></li></ul><p>æµç¨‹å¦‚å›¾ï¼š</p><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/2.png" alt=""></p><p><strong>æµç¨‹è¯´æ˜</strong>ï¼š</p><ol><li>åº”ç”¨ä»£ç é€šè¿‡ Subject æ¥è¿›è¡Œè®¤è¯å’Œæˆæƒï¼Œè€Œ Subject åˆå§”æ‰˜ç»™ SecurityManagerï¼›</li><li>æˆ‘ä»¬éœ€è¦ç»™ Shiro çš„ SecurityManager æ³¨å…¥ Realmï¼Œä»è€Œè®© SecurityManager èƒ½å¾—åˆ°åˆæ³•çš„ç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œåˆ¤æ–­ã€‚</li></ol><p><strong>ä»ä»¥ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒShiro ä¸æä¾›ç»´æŠ¤ç”¨æˆ· / æƒé™ï¼Œè€Œæ˜¯é€šè¿‡ Realm è®©å¼€å‘äººå‘˜è‡ªå·±æ³¨å…¥ã€‚</strong> </p><hr><p>shiroçš„å†…éƒ¨ç»“æ„å¦‚å›¾ï¼š</p><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/3.png" alt=""></p><hr><h3 id="èº«ä»½éªŒè¯"><a href="#èº«ä»½éªŒè¯" class="headerlink" title="èº«ä»½éªŒè¯"></a>èº«ä»½éªŒè¯</h3><p><strong>principals</strong>ï¼šèº«ä»½ï¼Œå³ä¸»ä½“çš„æ ‡è¯†å±æ€§ï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œå¦‚ç”¨æˆ·åã€é‚®ç®±ç­‰ï¼Œå”¯ä¸€å³å¯ã€‚ </p><p><strong>credentials</strong>ï¼šè¯æ˜ / å‡­è¯ï¼Œå³åªæœ‰ä¸»ä½“çŸ¥é“çš„å®‰å…¨å€¼ï¼Œå¦‚å¯†ç  / æ•°å­—è¯ä¹¦ç­‰ã€‚ </p><ul><li>èº«ä»½è®¤è¯æµç¨‹</li></ul><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/4.png" alt=""></p><hr><h3 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h3><p>æˆæƒï¼Œä¹Ÿå«è®¿é—®æ§åˆ¶ï¼Œå³åœ¨åº”ç”¨ä¸­æ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºï¼ˆå¦‚è®¿é—®é¡µé¢/ç¼–è¾‘æ•°æ®/é¡µé¢æ“ä½œç­‰ï¼‰ã€‚åœ¨æˆæƒä¸­éœ€äº†è§£çš„å‡ ä¸ªå…³é”®å¯¹è±¡ï¼šä¸»ä½“ï¼ˆSubjectï¼‰ã€èµ„æºï¼ˆResourceï¼‰ã€æƒé™ï¼ˆPermissionï¼‰ã€è§’è‰²ï¼ˆRoleï¼‰ã€‚ </p><ul><li><p>æˆæƒæ–¹å¼</p><p>ç¼–ç¨‹å¼ã€æ³¨è§£å¼ã€jsp/gspæ ‡ç­¾å¼</p></li></ul>]]></content>
      
      <categories>
          
          <category> shiro </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux config</title>
      <link href="/2016/05/16/version%20sort/"/>
      <url>/2016/05/16/version%20sort/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1 Î‘ Î± alpha a:lf é˜¿å°”æ³•</span><br><span class="line">2 Î’ Î² beta bet è´å¡”</span><br><span class="line">3 Î“ Î³ gamma ga:m ä¼½é©¬</span><br><span class="line">4 Î” Î´ delta delt å¾·å°”å¡”</span><br><span class="line">5 Î• Îµ epsilon ep`silon ä¼Šæ™®è¥¿é¾™</span><br><span class="line">6 Î– Î¶ zeta zat æˆªå¡”</span><br><span class="line">7 Î— Î· eta eit è‰¾å¡”</span><br><span class="line">8 Î˜ Î¸ theta Î¸it è¥¿å¡”</span><br><span class="line">9 Î™ Î¹ iota aiot çº¦å¡”</span><br><span class="line">10Îš Îº kappa kap å¡å¸•</span><br><span class="line">11âˆ§ Î» lambda lambd å…°å¸ƒè¾¾</span><br><span class="line">12Îœ Î¼ mu mju ç¼ª</span><br><span class="line">13Î Î½ nu nju çº½</span><br><span class="line">14Î Î¾ xi ksi å…‹è¥¿</span><br><span class="line">15ÎŸ Î¿ omicron omik`ron å¥¥å¯†å…‹æˆ</span><br><span class="line">16âˆ Ï€ pi pai æ´¾</span><br><span class="line">17Î¡ Ï rho rou è‚‰</span><br><span class="line">18âˆ‘ Ïƒ sigma `sigma è¥¿æ ¼é©¬</span><br><span class="line">19Î¤ Ï„ tau tau å¥—</span><br><span class="line">20 Î¥ Ï… upsilon ju:p`sailon å®‡æ™®è¥¿é¾™</span><br><span class="line">21 Î¦ Ï† phi fai ä½›çˆ±</span><br><span class="line">22 Î§ Ï‡ chi phai è¥¿</span><br><span class="line">23 Î¨ Ïˆ psi psai æ™®è¥¿</span><br><span class="line">24 Î© Ï‰ omega o`miga æ¬§ç±³ä¼½</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> version </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>filter in servlet</title>
      <link href="/2016/03/16/filter%20in%20servlet/"/>
      <url>/2016/03/16/filter%20in%20servlet/</url>
      <content type="html"><![CDATA[<blockquote><p>A filter is an object that is invoked at the preprocessing and postprocessing of a request.</p><ul><li>It is mainly used to perform filtering tasks such as conversion, logging, compression, encryption and decryption, input validation etc.</li><li>The servlet filter is pluggable, i.e. its entry is defined in the web.xml file, if we remove the entry of filter from the web.xml file, filter will be removed automatically and we donâ€™t need to change the servlet.</li></ul></blockquote><p><img src="https://www.javatpoint.com/images/filter.JPG" alt=""></p><h3 id="Usage-of-Filter"><a href="#Usage-of-Filter" class="headerlink" title="Usage of Filter"></a>Usage of Filter</h3><ul><li>recording all incoming requests</li><li>logs the IP addresses of the computers from which the requests originate</li><li>conversion</li><li>data compression</li><li>encryption and decryption</li><li>input validation etc.</li></ul><h3 id="Advantage-of-Fliter"><a href="#Advantage-of-Fliter" class="headerlink" title="Advantage of Fliter"></a>Advantage of Fliter</h3><ul><li>Filter is pluggable.</li><li>One filter donâ€™t have dependency onto another resource.</li><li>Less Maintenance</li></ul><h3 id="Filter-API"><a href="#Filter-API" class="headerlink" title="Filter API"></a>Filter API</h3><ul><li><p>Filter</p><blockquote><p>For creating any filter, you must implement the Filter interface. Filter interface provides the life cycle methods for a filter.</p></blockquote></li><li><p>FilterChain</p><blockquote><p>The object of FilterChain is responsible to invoke the next filter or resource in the chain.This object is passed in the doFilter method of Filter interface.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;  </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp,  </span></span></span><br><span class="line"><span class="function"><span class="params">    FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;  </span><br><span class="line">          </span><br><span class="line">    PrintWriter out=resp.getWriter();  </span><br><span class="line">    out.print(<span class="string">"filter is invoked before"</span>);  </span><br><span class="line">          </span><br><span class="line">    chain.doFilter(req, resp);<span class="comment">//sends request to next resource  </span></span><br><span class="line">          </span><br><span class="line">    out.print(<span class="string">"filter is invoked after"</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>FilterConfig</p></li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Event and Listen</title>
      <link href="/2016/03/01/Event%20and%20Listen/"/>
      <url>/2016/03/01/Event%20and%20Listen/</url>
      <content type="html"><![CDATA[<blockquote><p>Events are basically occurrence of something. Changing the state of an object is known as an event.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">We can perform some important tasks at the occurrence of these exceptions, such as counting total and current logged-in users, creating tables of the database at time of deploying the project, creating database connection object etc.</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="Event-classes"><a href="#Event-classes" class="headerlink" title="Event classes"></a>Event classes</h3><ul><li>ServletRequestEvent</li><li>ServletContextEvent</li><li>ServletRequestAttributeEvent</li><li>ServletContextAttributeEvent</li><li>HttpSessionEvent</li><li>HttpSessionBindingEvent</li></ul><h3 id="Event-interfaces"><a href="#Event-interfaces" class="headerlink" title="Event interfaces"></a>Event interfaces</h3><ul><li>ServletRequestListener</li><li>ServletRequestAttributeListener</li><li>ServletContextListener</li><li>ServletContextAttributeListener</li><li>HttpSessionListener</li><li>HttpSessionAttributeListener</li><li>HttpSessionBindingListener</li><li>HttpSessionActivationListener</li></ul><hr><h3 id="ServletContextEvent-and-ServletContextListener"><a href="#ServletContextEvent-and-ServletContextListener" class="headerlink" title="ServletContextEvent and ServletContextListener"></a>ServletContextEvent and ServletContextListener</h3><ul><li>The ServletContextEvent is notified when web application is deployed on the server.</li><li>If you want to perform some action at the time of deploying the web application such as creating database connection, creating all the tables of the project etc, you need to implement ServletContextListener interface and provide the implementation of its methods.</li></ul><p><code>Web application &gt; ServletContextEvent &gt; ServletContextListener</code></p><h3 id="HttpSessionEvent-and-HttpSessionListener"><a href="#HttpSessionEvent-and-HttpSessionListener" class="headerlink" title="HttpSessionEvent and HttpSessionListener"></a>HttpSessionEvent and HttpSessionListener</h3><ul><li>The HttpSessionEvent is notified when session object is changed. The corresponding Listener interface for this event is HttpSessionListener.</li><li>We can perform some operations at this event such as counting total and current logged-in users, maintaing a log of user details such as login time, logout time etc.</li></ul><p><code>session object &gt; HttpSessionEvent &gt; HttpSessionListener</code></p>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java code snippet</title>
      <link href="/2016/02/16/java%20code%20snippet/"/>
      <url>/2016/02/16/java%20code%20snippet/</url>
      <content type="html"><![CDATA[<h2 id="base64ToByte"><a href="#base64ToByte" class="headerlink" title="base64ToByte"></a>base64ToByte</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String string = <span class="string">"SmF2YWNvZGVnZWVrcw=="</span>;</span><br><span class="line"><span class="comment">// Get bytes from string</span></span><br><span class="line"><span class="keyword">byte</span>[] byteArray = Base64.decodeBase64(string.getBytes());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print the decoded array</span></span><br><span class="line">System.out.println(Arrays.toString(byteArray));</span><br><span class="line"><span class="comment">// Print the decoded string </span></span><br><span class="line">String decodedString = <span class="keyword">new</span> String(byteArray);</span><br><span class="line">System.out.println(string + <span class="string">" = "</span> + decodedString);</span><br></pre></td></tr></table></figure><h2 id="TimeConvert"><a href="#TimeConvert" class="headerlink" title="TimeConvert"></a>TimeConvert</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//date format</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateFormatUtils;</span><br><span class="line">String timeStr = DateFormatUtils.format(dateDate,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">Date dateTime = DateUtils.parseDate(dateTimeStr,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">Date dateWithoutTime = sdf.parse(sdf.format(<span class="keyword">new</span> Date()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//capitalize the first letter of word</span></span><br><span class="line">String output = input.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + input.substring(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//measure the time cost</span></span><br><span class="line"><span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line"><span class="keyword">long</span> used = end-start;</span><br><span class="line">System.out.println(<span class="string">"used:"</span>+TimeUnit.NANOSECONDS.toMillis(used)+<span class="string">" ms"</span>);</span><br></pre></td></tr></table></figure><h2 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//stream read database   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStreamRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        oracleSqlSessionTemplate.select(<span class="string">"xxxx.OracleMapper.getPersonInfos"</span>, <span class="keyword">new</span> ResultHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleResult</span><span class="params">(ResultContext resultContext)</span> </span>&#123;</span><br><span class="line">                PersonInfo personInfo = (PersonInfo) resultContext.getResultObject();</span><br><span class="line">                LOG.debug(<span class="string">"result count:[&#123;&#125;],result info:[&#123;&#125;]"</span>, resultContext.getResultCount(), personInfo.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStreamRead2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        oracleSqlSessionTemplate.select(<span class="string">"xxxx.OracleMapper.getPersonInfos"</span>,</span><br><span class="line">                resultContext -&gt; &#123;</span><br><span class="line">                    PersonInfo personInfo = (PersonInfo) resultContext.getResultObject();</span><br><span class="line">                    LOG.debug(<span class="string">"result count:[&#123;&#125;],result info:[&#123;&#125;]"</span>, resultContext.getResultCount(), personInfo.getName());</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//iterate list</span></span><br><span class="line">myFinalList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">myListToParse.stream()</span><br><span class="line">        .filter(elt -&gt; elt != <span class="keyword">null</span>)</span><br><span class="line">        .forEach(elt -&gt; myFinalList.add(doSomething(elt)));</span><br><span class="line"><span class="comment">//prefer</span></span><br><span class="line">myFinalList = myListToParse.stream()</span><br><span class="line">        .filter(elt -&gt; elt != <span class="keyword">null</span>)</span><br><span class="line">        .map(elt -&gt; doSomething(elt))</span><br><span class="line">        .collect(Collectors.toList());</span><br></pre></td></tr></table></figure><h2 id="thread"><a href="#thread" class="headerlink" title="thread"></a>thread</h2><h3 id="notify-thread"><a href="#notify-thread" class="headerlink" title="notify thread"></a>notify thread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shared</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">waitMethod</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">" is releasing the lock and going to wait"</span>);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            wait();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">" has been notified and acquired the lock back"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">notifyOneThread</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">         </span><br><span class="line">        notify();</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">" has notified one thread waiting for this object lock"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Shared s = <span class="keyword">new</span> Shared();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t1 will be waiting for lock of object 's'</span></span><br><span class="line">         </span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t1.start();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t2 will be waiting for lock of object 's'</span></span><br><span class="line">         </span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        t2.start();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t3 will be waiting for lock of object 's'</span></span><br><span class="line">         </span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t3.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t4 will notify only one thread which is waiting for lock of object 's'</span></span><br><span class="line">         </span><br><span class="line">        Thread t4 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.notifyOneThread();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t4.start(); </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="stop-thread"><a href="#stop-thread" class="headerlink" title="stop thread"></a>stop thread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//Initially setting the flag as true</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//This method will set flag as false</span></span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopRunning</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        flag = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//Keep the task in while loop</span></span><br><span class="line">         </span><br><span class="line">        <span class="comment">//This will make thread continue to run until flag becomes false</span></span><br><span class="line">         </span><br><span class="line">        <span class="keyword">while</span> (flag)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">"I am running...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(<span class="string">"Stopped Running...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        MyThread thread = <span class="keyword">new</span> MyThread();</span><br><span class="line">         </span><br><span class="line">        thread.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//call stopRunning() method whenever you want to stop a thread</span></span><br><span class="line">         </span><br><span class="line">        thread.stopRunning();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (!Thread.interrupted())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">"I am running...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(<span class="string">"Stopped Running....."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        MyThread thread = <span class="keyword">new</span> MyThread();</span><br><span class="line">         </span><br><span class="line">        thread.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//interrupting the thread</span></span><br><span class="line">         </span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="try-catch-finally"><a href="#try-catch-finally" class="headerlink" title="try-catch-finally"></a>try-catch-finally</h3><ol><li>ä¸ç®¡æœ‰æœ¨æœ‰å‡ºç°å¼‚å¸¸ï¼Œfinallyå—ä¸­ä»£ç éƒ½ä¼šæ‰§è¡Œ** </li><li><strong>å½“tryå’Œcatchä¸­æœ‰returnæ—¶ï¼Œfinallyä»ç„¶ä¼šæ‰§è¡Œ</strong> </li><li><strong>finallyæ˜¯åœ¨returnåé¢çš„è¡¨è¾¾å¼è¿ç®—åæ‰§è¡Œçš„ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰è¿”å›è¿ç®—åçš„å€¼ï¼Œè€Œæ˜¯å…ˆæŠŠè¦è¿”å›çš„å€¼ä¿å­˜èµ·æ¥ï¼Œç®¡finallyä¸­çš„ä»£ç æ€ä¹ˆæ ·ï¼Œè¿”å›çš„å€¼éƒ½ä¸ä¼šæ”¹å˜ï¼Œä»ç„¶æ˜¯ä¹‹å‰ä¿å­˜çš„å€¼ï¼‰ï¼Œæ‰€ä»¥å‡½æ•°è¿”å›å€¼æ˜¯åœ¨finallyæ‰§è¡Œå‰ç¡®å®šçš„ï¼›</strong> </li><li><strong>finallyä¸­æœ€å¥½ä¸è¦åŒ…å«returnï¼Œå¦åˆ™ç¨‹åºä¼šæå‰é€€å‡ºï¼Œè¿”å›å€¼ä¸æ˜¯tryæˆ–catchä¸­ä¿å­˜çš„è¿”å›å€¼ã€‚</strong> </li><li>ä»»ä½•æ‰§è¡Œtry æˆ–è€…catchä¸­çš„returnè¯­å¥ä¹‹å‰ï¼Œéƒ½ä¼šå…ˆæ‰§è¡Œfinallyè¯­å¥ï¼Œå¦‚æœfinallyä¸­æœ‰returnè¯­å¥ï¼Œé‚£ä¹ˆç¨‹åºå°±returnäº†ï¼Œæ‰€ä»¥finallyä¸­çš„returnæ˜¯ä¸€å®šä¼šè¢«returnçš„ã€‚</li></ol><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Java program to show, how to use ReentrantLock in Java.</span></span><br><span class="line"><span class="comment"> * Reentrant lock is an alternative way of locking</span></span><br><span class="line"><span class="comment"> * apart from implicit locking provided by synchronized keyword in Java.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  Javin Paul</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLockHowto</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//Locking using Lock and ReentrantLock</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" gets Count: "</span> + count);</span><br><span class="line">            <span class="keyword">return</span> count++;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//Implicit locking using synchronized keyword</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">getCountTwo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> count++;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ThreadTest counter = <span class="keyword">new</span> ThreadTest();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (counter.getCount() &amp;lt; <span class="number">6</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">                        ex.printStackTrace();                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      </span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (counter.getCount() &amp;lt; <span class="number">6</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">                        ex.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      </span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line">Thread-0 gets Count: 0</span><br><span class="line">Thread-1 gets Count: 1</span><br><span class="line">Thread-1 gets Count: 2</span><br><span class="line">Thread-0 gets Count: 3</span><br><span class="line">Thread-1 gets Count: 4</span><br><span class="line">Thread-0 gets Count: 5</span><br><span class="line">Thread-0 gets Count: 6</span><br><span class="line">Thread-1 gets Count: 7</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>websocket tracking</title>
      <link href="/2016/01/18/webservice%20snippet/"/>
      <url>/2016/01/18/webservice%20snippet/</url>
      <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/49d7997ad3b7" target="_blank" rel="noopener">https://www.jianshu.com/p/49d7997ad3b7</a></p><p><a href="https://blog.csdn.net/qq_33546747/article/details/53304097" target="_blank" rel="noopener">https://blog.csdn.net/qq_33546747/article/details/53304097</a></p><hr><h2 id="WebServiceæ˜¯ä¸€ç§è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ã€‚"><a href="#WebServiceæ˜¯ä¸€ç§è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ã€‚" class="headerlink" title="WebServiceæ˜¯ä¸€ç§è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ã€‚"></a>WebServiceæ˜¯ä¸€ç§è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ã€‚</h2><p>å¤šä¸ªè§’åº¦æ¥ç†è§£WebService<br>â€‹    ä»è¡¨é¢ä¸Šçœ‹ï¼ŒWebServiceå°±æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºå‘å¤–ç•Œæš´éœ²å‡ºä¸€ä¸ªèƒ½é€šè¿‡Webè¿›è¡Œè°ƒç”¨çš„APIï¼Œä¹Ÿå°±æ˜¯è¯´èƒ½ç”¨ç¼–ç¨‹çš„æ–¹æ³•é€šè¿‡Webæ¥è°ƒç”¨è¿™ä¸ªåº”ç”¨ç¨‹åºã€‚<br>â€‹    æˆ‘ä»¬æŠŠè°ƒç”¨è¿™ä¸ªWebServiceçš„åº”ç”¨ç¨‹åºå«åšå®¢æˆ·ç«¯ï¼Œè€ŒæŠŠæä¾›è¿™ä¸ªWebServiceçš„åº”ç”¨ç¨‹åºå«åšæœåŠ¡ç«¯<br>â€‹    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä»æ·±å±‚æ¬¡çœ‹ï¼ŒWebServiceæ˜¯å»ºç«‹å¯äº’æ“ä½œçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„æ–°å¹³å°ï¼Œæ˜¯ä¸€ä¸ªå¹³å°ï¼Œæ˜¯ä¸€å¥—æ ‡å‡†ã€‚</span><br><span class="line">å®ƒå®šä¹‰äº†åº”ç”¨ç¨‹åºå¦‚ä½•åœ¨Webä¸Šå®ç°äº’æ“ä½œæ€§ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä½ å–œæ¬¢çš„è¯­è¨€ï¼Œåœ¨ä»»ä½•ä½ å–œæ¬¢çš„å¹³å°ä¸Šå†™Web service ï¼Œåªè¦æˆ‘ä»¬å¯ä»¥é€šè¿‡Web serviceæ ‡å‡†å¯¹è¿™äº›æœåŠ¡è¿›è¡ŒæŸ¥è¯¢å’Œè®¿é—®ã€‚</span><br></pre></td></tr></table></figure><hr><p>æ„æˆWebServiceå¹³å°çš„ä¸‰å¤§æŠ€æœ¯ï¼š<br>â€‹    XML+XSD,SOAPå’ŒWSDL<br>â€‹<br>WebServiceé‡‡ç”¨HTTPåè®®ä¼ è¾“æ•°æ®ï¼Œé‡‡ç”¨XMLæ ¼å¼å°è£…æ•°æ®ï¼ˆå³XMLä¸­è¯´æ˜è°ƒç”¨è¿œç¨‹æœåŠ¡å¯¹è±¡çš„å“ªä¸ªæ–¹æ³•ï¼Œä¼ é€’çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæœåŠ¡å¯¹è±¡çš„è¿”å›ç»“æœæ˜¯ä»€ä¹ˆï¼‰<br>WebServiceç”¨XSDæ¥ä½œä¸ºå…¶æ•°æ®ç±»å‹ç³»ç»Ÿ<br>HTTPæ¶ˆæ¯å¤´å’ŒXMLå†…å®¹æ ¼å¼å°±æ˜¯SOAPåè®®ã€‚SOAPæä¾›äº†æ ‡å‡†çš„RPCæ–¹æ³•æ¥è°ƒç”¨Web Serviceã€‚</p><p>SOAPåè®® = HTTPåè®® + XMLæ•°æ®æ ¼å¼</p><p>æ¯”å–»ï¼šHTTPå°±æ˜¯æ™®é€šå…¬è·¯ï¼ŒXMLå°±æ˜¯ä¸­é—´çš„ç»¿è‰²éš”ç¦»å¸¦å’Œä¸¤è¾¹çš„é˜²æŠ¤æ ï¼ŒSOAPå°±æ˜¯æ™®é€šå…¬è·¯ç»è¿‡åŠ éš”ç¦»å¸¦å’Œé˜²æŠ¤æ æ”¹é€ è¿‡çš„é«˜é€Ÿå…¬è·¯ã€‚</p><p>WSDL(Web Services Description Language)æ˜¯åŸºäºXMLçš„è¯­è¨€ï¼Œç”¨äºæè¿°Web ServiceåŠå…¶å‡½æ•°ã€å‚æ•°å’Œè¿”å›å€¼ã€‚</p><p>WSDLæ–‡ä»¶ä¿å­˜åœ¨WebæœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ä¸€ä¸ªurlåœ°å€å°±å¯ä»¥è®¿é—®åˆ°å®ƒã€‚å®¢æˆ·ç«¯è¦è°ƒç”¨ä¸€ä¸ªWebServiceæœåŠ¡ä¹‹å‰ï¼Œè¦çŸ¥é“è¯¥æœåŠ¡çš„WSDLæ–‡ä»¶çš„åœ°å€ã€‚<br>WebServiceæœåŠ¡æä¾›å•†å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æš´éœ²å®ƒçš„WSDLæ–‡ä»¶åœ°å€ï¼š1.æ³¨å†Œåˆ°UDDIæœåŠ¡å™¨ï¼Œä»¥ä¾¿è¢«äººæŸ¥æ‰¾ï¼›2.ç›´æ¥å‘Šè¯‰ç»™å®¢æˆ·ç«¯è°ƒç”¨è€…ã€‚</p><p>======================================================================================<br><a href="https://www.cnblogs.com/snake-hand/archive/2013/06/09/3129915.html" target="_blank" rel="noopener">https://www.cnblogs.com/snake-hand/archive/2013/06/09/3129915.html</a></p><hr><p>Axiså’ŒCXFï¼Œè¿™ä¸¤ä¸ªäº§å“éƒ½æ˜¯Apacheå­µåŒ–å™¨ä¸‹é¢çš„Web Serviceå¼€æºå¼€å‘å·¥å…·</p><p>CXFæ”¯æŒ WS-Addressingï¼ŒWS-Policyï¼Œ WS-RMï¼Œ WS-Securityå’ŒWS-I Basic Profile<br>Axis2ä¸æ”¯æŒWS-Policy</p><p>CXFå¯ä»¥å¾ˆå¥½æ”¯æŒSpring<br>Axis2ä¸èƒ½å¾ˆå¥½æ”¯æŒSpring</p><p> CXFåªæ”¯æŒJAXBå’ŒAegisã€‚<br> AXIS2æ”¯æŒæ›´å¹¿æ³›çš„æ•°æ®å¹¶å¯¹ï¼Œå¦‚XMLBeansï¼ŒJiBXï¼ŒJaxMeå’ŒJaxBRIå’Œå®ƒè‡ªå®šä¹‰çš„æ•°æ®ç»‘å®šADBã€‚æ³¨æ„JaxMEå’ŒJaxBRIéƒ½è¿˜æ˜¯è¯•éªŒæ€§çš„ã€‚AXIS2æ”¯æŒæ›´å¹¿æ³›çš„æ•°æ®å¹¶å¯¹ï¼Œå¦‚XMLBeansï¼ŒJiBXï¼ŒJaxMeå’ŒJaxBRIå’Œå®ƒè‡ªå®šä¹‰çš„æ•°æ®ç»‘å®šADBã€‚æ³¨æ„JaxMEå’ŒJaxBRIéƒ½è¿˜æ˜¯è¯•éªŒæ€§çš„ã€‚</p><hr><p> å¦‚ä½•æŠ‰æ‹©ï¼š<br>1ã€å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦å¤šè¯­è¨€çš„æ”¯æŒï¼ŒAxis2 åº”å½“æ˜¯é¦–é€‰äº†ï¼›<br>2ã€å¦‚æœåº”ç”¨ç¨‹åºæ˜¯éµå¾ªSpring å“²å­¦è·¯çº¿çš„è¯ï¼ŒApache CXF æ˜¯ä¸€ç§æ›´å¥½çš„é€‰æ‹©ï¼Œç‰¹åˆ«å¯¹åµŒå…¥å¼çš„Web Services æ¥è¯´ï¼›<br>3ã€å¦‚æœåº”ç”¨ç¨‹åºæ²¡æœ‰æ–°çš„ç‰¹æ€§éœ€è¦çš„è¯ï¼Œå°±ä»æ˜¯ç”¨åŸæ¥é¡¹ç›®æ‰€ç”¨çš„æ¡†æ¶ï¼Œæ¯”å¦‚Axis1ï¼ŒXFireï¼ŒCeltrixæˆ– BEAç­‰ç­‰å‚å®¶è‡ªå·±çš„ WebServices å®ç°ï¼Œå°±åˆ«åŠ³æ°‘ä¼¤è´¢äº†</p>]]></content>
      
      <categories>
          
          <category> webservice </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>css snippet</title>
      <link href="/2016/01/16/css%20snippet/"/>
      <url>/2016/01/16/css%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><p>æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ display ç±»å‹<br>ä¸è¿‡ä½ å¯ä»¥éšæ—¶éšåœ°çš„é‡å†™å®ƒï¼å¦‚å¸¸è§çš„ä¾‹å­æ˜¯ï¼šæŠŠ li å…ƒç´ ä¿®æ”¹æˆ inlineï¼Œåˆ¶ä½œæˆæ°´å¹³èœå•ã€‚</p><p>pæ ‡ç­¾æ˜¯å—çº§å…ƒç´ ï¼Œspanå…ƒç´ æ˜¯è¡Œå†…å…ƒç´ ã€‚å†…å…ƒç´ å¯ä»¥å†™åœ¨å—çº§å…ƒç´ é‡Œé¢  æ¯”å¦‚<code>&lt;p&gt;&lt;span&gt;å†…å®¹&lt;/span&gt;&lt;/p&gt;</code></p><ul><li>block</li></ul><p>å€¼ä¸ºblockçš„ä¸ºå—çº§å…ƒç´ ï¼Œ å¦‚ï¼špã€formã€headerã€footerã€section</p><ul><li>inline</li></ul><p>å€¼ä¸ºinlineçš„ä¸ºè¡Œå†…å…ƒç´ </p><h3 id="position"><a href="#position" class="headerlink" title="position"></a>position</h3><ul><li>static</li></ul><p>staticæ˜¯é»˜è®¤å€¼ï¼Œä¸€ä¸ªstaticå…ƒç´ è¡¨ç¤ºå®ƒä¸ä¼šè¢«â€positionedâ€,ä¸€ä¸ªpositionå±æ€§è¢«è®¾ç½®ä¸ºå…¶å®ƒå€¼å¾—å…ƒç´ è¡¨ç¤ºå®ƒä¼šè¢«â€positionedâ€</p><ul><li>relative</li></ul><p>relative,åœ¨ä¸€ä¸ªç›¸å¯¹å®šä½ï¼ˆpositionå±æ€§çš„å€¼ä¸ºrelativeï¼‰çš„å…ƒç´ ä¸Šè®¾ç½® top ã€ right ã€ bottom å’Œ left å±æ€§ä¼šä½¿å…¶åç¦»å…¶æ­£å¸¸ä½ç½®ã€‚<br>å…¶ä»–çš„å…ƒç´ çš„ä½ç½®åˆ™ä¸ä¼šå—è¯¥å…ƒç´ çš„å½±å“å‘ç”Ÿä½ç½®æ”¹å˜æ¥å¼¥è¡¥å®ƒåç¦»åå‰©ä¸‹çš„ç©ºéš™ã€‚</p><ul><li>fixed</li></ul><p>fixed,ä¸€ä¸ªå›ºå®šå®šä½ï¼ˆpositionå±æ€§çš„å€¼ä¸ºfixedï¼‰å…ƒç´ ä¼šç›¸å¯¹äºè§†çª—æ¥å®šä½ï¼Œè¿™æ„å‘³ç€å³ä¾¿é¡µé¢æ»šåŠ¨ï¼Œå®ƒè¿˜æ˜¯ä¼šåœç•™åœ¨ç›¸åŒçš„ä½ç½®ã€‚<br>å’Œ relative ä¸€æ ·ï¼Œ top ã€ right ã€ bottom å’Œ left å±æ€§éƒ½å¯ç”¨ã€‚</p><ul><li>absolute</li></ul><p>absolute, å®ƒä¸ fixed çš„è¡¨ç°ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ç›¸å¯¹äºè§†çª—è€Œæ˜¯ç›¸å¯¹äºæœ€è¿‘çš„â€œpositionedâ€ç¥–å…ˆå…ƒç´ ã€‚<br>å¦‚æœç»å¯¹å®šä½ï¼ˆpositionå±æ€§çš„å€¼ä¸ºabsoluteï¼‰çš„å…ƒç´ æ²¡æœ‰â€œpositionedâ€ç¥–å…ˆå…ƒç´ ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç›¸å¯¹äºæ–‡æ¡£çš„ body å…ƒç´ ï¼Œå¹¶ä¸”å®ƒä¼šéšç€é¡µé¢æ»šåŠ¨è€Œç§»åŠ¨ã€‚<br>è®°ä½ä¸€ä¸ªâ€œpositionedâ€å…ƒç´ æ˜¯æŒ‡ position å€¼ä¸æ˜¯ static çš„å…ƒç´ ã€‚</p><h3 id="mbp"><a href="#mbp" class="headerlink" title="mbp"></a>mbp</h3><p><img src="https://mdn.mozillademos.org/files/13647/box-model-standard-small.png" alt=""></p><ul><li><p>margin</p><blockquote><p>æ˜¯è®¾ç½®ä¸¤ä¸ªæ ‡ç­¾çš„é—´éš”ï¼Œä¹Ÿå°±æ˜¯è·ç¦»</p></blockquote></li><li><p>padding</p><blockquote><p>æ¯”å¦‚ä¸€ä¸ªpæ ‡ç­¾ï¼Œå®ƒæ˜¯100px*100px,æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™pæ ‡ç­¾çš„æ–‡å­—æ˜¯è´´ç€pæ ‡ç­¾çš„æœ€å·¦ä¾§çš„ï¼Œæƒ³è¦å®ƒçš„æ–‡å­—è·ç¦»è¾¹ç•Œè¿œä¸€ç‚¹ï¼Œå¥½çœ‹ä¸€ç‚¹ï¼Œå°±æ˜¯éœ€è¦åšä¸€ä¸ªæ ·å¼çš„è°ƒæ•´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ°paddingè¿™ä¸ªå±æ€§ï¼Œå‡å¦‚è¯´è®¾ç½®æ˜¯10pxï¼Œå°±æ˜¯è¯´è¿™ä¸ªpæ ‡ç­¾çš„å¤§å°ä¾ç„¶æ˜¯100px<em>100pxï¼Œä½†æ˜¯å®ƒçš„å†…å®¹æ˜¯å˜æˆäº†90px\</em>90pxï¼›</p></blockquote></li><li><p>border</p><blockquote><p>boarderæ˜¯è®¾ç½®è¾¹æ¡†çš„æ„æ€ï¼Œä»–å’Œpaddingçš„åŒºåˆ«åœ¨äºï¼Œpaddingæ˜¯åœ¨æ ‡ç­¾è¾¹ç¼˜å¾€é‡Œç¼©å‡ï¼Œè€Œborderæ˜¯åœ¨æ ‡ç­¾çš„è¾¹ç¼˜å¾€å¤–æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ä¸€ä¸ª100px*100pxçš„æ ‡ç­¾ï¼Œæˆ‘è®¾ç½®ä»–çš„borderä¸º20pxï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æ•´ä¸ªæ ‡ç­¾çš„å¤§å°æ˜¯å˜æˆäº†120px*120pxï¼Œä¹Ÿå°±æ˜¯è¯´å¤šå‡ºæ¥äº†120pxï¼Œå…¶æ ‡ç­¾çš„å†…å®¹ä¹Ÿè¿˜æ˜¯100px*100pxçš„</p></blockquote></li></ul>]]></content>
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>websocket tracking</title>
      <link href="/2015/12/18/websocket%20snippit/"/>
      <url>/2015/12/18/websocket%20snippit/</url>
      <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/LOVELONG8808/article/details/52235132" target="_blank" rel="noopener">https://blog.csdn.net/LOVELONG8808/article/details/52235132</a></p><p><a href="https://blog.csdn.net/w1992wishes/article/details/79583543" target="_blank" rel="noopener">https://blog.csdn.net/w1992wishes/article/details/79583543</a></p><hr><p>WebSocket APIæ˜¯ä¸‹ä¸€ä»£å®¢æˆ·ç«¯-æœåŠ¡å™¨çš„å¼‚æ­¥é€šä¿¡æ–¹æ³•ã€‚<br>WebSocket APIæœ€ä¼Ÿå¤§ä¹‹å¤„åœ¨äºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¯ä»¥åœ¨ç»™å®šçš„æ—¶é—´èŒƒå›´å†…çš„ä»»æ„æ—¶åˆ»ï¼Œç›¸äº’æ¨é€ä¿¡æ¯ã€‚<br>WebSocketå¹¶ä¸é™äºä»¥Ajax(æˆ–XHR)æ–¹å¼é€šä¿¡ï¼Œå› ä¸ºAjaxæŠ€æœ¯éœ€è¦å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œè€ŒWebSocketæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¯ä»¥å½¼æ­¤ç›¸äº’æ¨é€ä¿¡æ¯ï¼›<br>â€‹    XHRå—åˆ°åŸŸçš„é™åˆ¶ï¼Œè€ŒWebSocketå…è®¸è·¨åŸŸé€šä¿¡ã€‚<br>â€‹    AjaxæŠ€æœ¯å¾ˆèªæ˜çš„ä¸€ç‚¹æ˜¯æ²¡æœ‰è®¾è®¡è¦ä½¿ç”¨çš„æ–¹å¼ã€‚WebSocketä¸ºæŒ‡å®šç›®æ ‡åˆ›å»ºï¼Œç”¨äºåŒå‘æ¨é€æ¶ˆæ¯ã€‚</p><hr><p>activemqæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä¸»è¦å®ç°æ˜¯é˜Ÿåˆ—ã€‚ç”¨äºå¤„ç†æ¶ˆæ¯ã€‚ </p><h2 id="websocketæ˜¯-html5çš„ä¸€ç§ä¼ è®®å®ç°å‰å°å‘åå°ï¼Œåå°å‘å‰å°å‘å‡ºè¯·æ±‚ã€‚"><a href="#websocketæ˜¯-html5çš„ä¸€ç§ä¼ è®®å®ç°å‰å°å‘åå°ï¼Œåå°å‘å‰å°å‘å‡ºè¯·æ±‚ã€‚" class="headerlink" title="websocketæ˜¯ html5çš„ä¸€ç§ä¼ è®®å®ç°å‰å°å‘åå°ï¼Œåå°å‘å‰å°å‘å‡ºè¯·æ±‚ã€‚"></a>websocketæ˜¯ html5çš„ä¸€ç§ä¼ è®®å®ç°å‰å°å‘åå°ï¼Œåå°å‘å‰å°å‘å‡ºè¯·æ±‚ã€‚</h2><p>websocketæ˜¯HTML5åè®®ï¼Œå®æ—¶ï¼Œå…¨åŒå·¥é€šä¿¡ï¼Œé•¿è¿æ¥ã€‚WebSocketçš„æœåŠ¡ç«¯å¯ä»¥å°†æ•°æ®æ¨é€åˆ°å®¢æˆ·ç«¯ï¼Œ<br>â€‹    å¦‚å®æ—¶å°†è¯åˆ¸ä¿¡æ¯åé¦ˆåˆ°å®¢æˆ·ç«¯ï¼Œå®æ—¶å¤©æ°”æ•°æ®ï¼Œæ¯”httpè¯·æ±‚å“åº”æ¨¡å¼æ›´çµæ´»ï¼Œä»£æ›¿äº†ä»¥å¾€ä¸€äº›éœ€è¦è½®è®­çš„ä¸šåŠ¡ã€‚</p><p>STOMPåè®®çš„å‰èº«æ˜¯TTMPåè®®ï¼ˆä¸€ä¸ªç®€å•çš„åŸºäºæ–‡æœ¬çš„åè®®ï¼‰ï¼Œä¸“ä¸ºæ¶ˆæ¯ä¸­é—´ä»¶è®¾è®¡ã€‚</p><p>è¿™ä¸¤ä¸ªåè®®çš„ä»‹ç»æ¥çœ‹è®¾è®¡çš„ç›®çš„ä¸åŒã€‚ç›®å‰ä¸€äº›æ¶ˆæ¯é˜Ÿåˆ—éƒ½æ˜¯åŸºäºSTOMPåè®®çš„æ¯”å¦‚ActiveMQï¼ŒRabbitMQï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸€èˆ¬ç”¨äºä¸€äº›éœ€è¦å¼‚æ­¥å¤„ç†çš„æœåŠ¡å™¨ä»»åŠ¡æˆ–è€…ä¸€äº›é€šçŸ¥ç±»çš„ä»»åŠ¡ã€‚</p><p>websocketæ›´å¤šçš„ä½¿ç”¨åœºæ™¯æ˜¯éœ€è¦æœåŠ¡ç«¯ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯çš„å®æ—¶é€šè®¯ä¸šåŠ¡ã€‚</p>]]></content>
      
      <categories>
          
          <category> websocket </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql snippet</title>
      <link href="/2015/12/16/mysql%20snippet/"/>
      <url>/2015/12/16/mysql%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><ul><li><p>the size of blob column</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  A BLOB can be 65535 bytes (64 KB) maximum.</span><br><span class="line">If you need more consider using:</span><br><span class="line">a MEDIUMBLOB for 16777215 bytes (16 MB)</span><br><span class="line">a LONGBLOB for 4294967295 bytes (4 GB).</span><br></pre></td></tr></table></figure></li><li><p>join sql<br><img src="https://i.stack.imgur.com/VQ5XP.png" alt=""></p></li><li><p>string convert to timstamp</p><p><code>SELECT STR_TO_DATE(&#39;2014-05-28 11:30:10&#39;,&#39;%Y-%m-%d %H:%i:%s&#39;);</code></p></li></ul><h3 id="sqlè¯­å¥"><a href="#sqlè¯­å¥" class="headerlink" title="sqlè¯­å¥"></a>sqlè¯­å¥</h3><ul><li>IN</li></ul><p>ç¡®å®šç»™å®šçš„å€¼æ˜¯å¦ä¸å­æŸ¥è¯¢æˆ–åˆ—è¡¨ä¸­çš„å€¼ç›¸åŒ¹é…ã€‚inåœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œé¦–å…ˆæŸ¥è¯¢å­æŸ¥è¯¢çš„è¡¨ï¼Œç„¶åå°†å†…è¡¨å’Œå¤–è¡¨åšä¸€ä¸ªç¬›å¡å°”ç§¯ï¼Œç„¶åæŒ‰ç…§æ¡ä»¶è¿›è¡Œç­›é€‰ã€‚æ‰€ä»¥ç›¸å¯¹å†…è¡¨æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œinçš„é€Ÿåº¦è¾ƒå¿«ã€‚ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    <span class="string">`user`</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    <span class="string">`user`</span>.id <span class="keyword">IN</span> (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            <span class="string">`order`</span>.user_id</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            <span class="string">`order`</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠæŸ¥è¯¢ä½¿ç”¨äº†inè¯­å¥,in()åªæ‰§è¡Œä¸€æ¬¡,å®ƒæŸ¥å‡ºBè¡¨ä¸­çš„æ‰€æœ‰idå­—æ®µå¹¶ç¼“å­˜èµ·æ¥.ä¹‹å,æ£€æŸ¥Aè¡¨çš„idæ˜¯å¦ä¸Bè¡¨ä¸­çš„idç›¸ç­‰,å¦‚æœç›¸ç­‰åˆ™å°†Aè¡¨çš„è®°å½•åŠ å…¥ç»“æœé›†ä¸­,ç›´åˆ°éå†å®ŒAè¡¨çš„æ‰€æœ‰è®°å½•ã€‚</p><p>å¯ä»¥çœ‹å‡º,å½“Bè¡¨æ•°æ®è¾ƒå¤§æ—¶ä¸é€‚åˆä½¿ç”¨in(),å› ä¸ºå®ƒä¼šBè¡¨æ•°æ®å…¨éƒ¨éå†ä¸€æ¬¡. å¦‚:Aè¡¨æœ‰10000æ¡è®°å½•,Bè¡¨æœ‰1000000æ¡è®°å½•,é‚£ä¹ˆæœ€å¤šæœ‰å¯èƒ½éå†10000<code>*</code>1000000æ¬¡,æ•ˆç‡å¾ˆå·®. å†å¦‚:Aè¡¨æœ‰10000æ¡è®°å½•,Bè¡¨æœ‰100æ¡è®°å½•,é‚£ä¹ˆæœ€å¤šæœ‰å¯èƒ½éå†10000*100æ¬¡,éå†æ¬¡æ•°å¤§å¤§å‡å°‘,æ•ˆç‡å¤§å¤§æå‡ã€‚</p><ul><li>exists</li></ul><p>æŒ‡å®šä¸€ä¸ªå­æŸ¥è¯¢ï¼Œæ£€æµ‹è¡Œçš„å­˜åœ¨ã€‚éå†å¾ªç¯å¤–è¡¨ï¼Œç„¶åçœ‹å¤–è¡¨ä¸­çš„è®°å½•æœ‰æ²¡æœ‰å’Œå†…è¡¨çš„æ•°æ®ä¸€æ ·çš„ã€‚åŒ¹é…ä¸Šå°±å°†ç»“æœæ”¾å…¥ç»“æœé›†ä¸­ã€‚ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> A a <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> B b <span class="keyword">where</span> a.id=b.id)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠæŸ¥è¯¢ä½¿ç”¨äº†existsè¯­å¥,exists()ä¼šæ‰§è¡ŒA.lengthæ¬¡,å®ƒå¹¶ä¸ç¼“å­˜exists()ç»“æœé›†,å› ä¸ºexists()ç»“æœé›†çš„å†…å®¹å¹¶ä¸é‡è¦,é‡è¦çš„æ˜¯ç»“æœé›†ä¸­æ˜¯å¦æœ‰è®°å½•,å¦‚æœæœ‰åˆ™è¿”å›true,æ²¡æœ‰åˆ™è¿”å›falseã€‚</p><p>å½“Bè¡¨æ¯”Aè¡¨æ•°æ®å¤§æ—¶é€‚åˆä½¿ç”¨exists(),å› ä¸ºå®ƒæ²¡æœ‰é‚£ä¹ˆéå†æ“ä½œ,åªéœ€è¦å†æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢å°±è¡Œ. å¦‚:Aè¡¨æœ‰10000æ¡è®°å½•,Bè¡¨æœ‰1000000æ¡è®°å½•,é‚£ä¹ˆexists()ä¼šæ‰§è¡Œ10000æ¬¡å»åˆ¤æ–­Aè¡¨ä¸­çš„idæ˜¯å¦ä¸Bè¡¨ä¸­çš„idç›¸ç­‰. å¦‚:Aè¡¨æœ‰10000æ¡è®°å½•,Bè¡¨æœ‰100000000æ¡è®°å½•,é‚£ä¹ˆexists()è¿˜æ˜¯æ‰§è¡Œ10000æ¬¡,å› ä¸ºå®ƒåªæ‰§è¡ŒA.lengthæ¬¡,å¯è§Bè¡¨æ•°æ®è¶Šå¤š,è¶Šé€‚åˆexists()å‘æŒ¥æ•ˆæœ. å†å¦‚:Aè¡¨æœ‰10000æ¡è®°å½•,Bè¡¨æœ‰100æ¡è®°å½•,é‚£ä¹ˆexists()è¿˜æ˜¯æ‰§è¡Œ10000æ¬¡,è¿˜ä¸å¦‚ä½¿ç”¨in()éå†10000*100æ¬¡,å› ä¸ºin()æ˜¯åœ¨å†…å­˜é‡Œéå†æ¯”è¾ƒ,è€Œexists()éœ€è¦æŸ¥è¯¢æ•°æ®åº“,æˆ‘ä»¬éƒ½çŸ¥é“æŸ¥è¯¢æ•°æ®åº“æ‰€æ¶ˆè€—çš„æ€§èƒ½æ›´é«˜,è€Œå†…å­˜æ¯”è¾ƒå¾ˆå¿«. </p><ul><li>where</li></ul><p>sqlæŸ¥è¯¢æ¡ä»¶ä¸­<code>where 1=1,1=2å’Œ1=0</code>ï¼Œè¿™ç§å†™æ³•ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ‹¼å‡‘åŠ¨æ€çš„sqlè¯­å¥ï¼Œå¦‚æœä½¿ç”¨ä¸å¥½ä¼šèµ·åˆ°å‰¯ä½œç”¨çš„ï¼Œæ˜¯æ ¹æ®ä¸ªäººçš„ä¸€äº›ä¹ æƒ¯ï¼Œæ˜¯ä¸ºäº†é¿å…where å…³é”®å­—åé¢çš„ç¬¬ä¸€ä¸ªè¯ç›´æ¥å°±æ˜¯ â€œandâ€è€Œå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œæ˜¯ä¸ºäº†åé¢é™„åŠ and â€¦æ–¹ä¾¿ç¨‹åºé€»è¾‘å¤„ç†ç”¨çš„ã€‚ </p><ul><li><p>select count(*)å’Œselect count(1)çš„åŒºåˆ«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSelect Count(*)å’ŒSelect Count(1)ä¸¤ç€è¿”å›ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œå‡å¦‚è¡¨æ²¡æœ‰ä¸»é”®(Primary key), é‚£ä¹ˆcount(1)æ¯”count(*)å¿«ï¼Œå¦‚æœæœ‰ä¸»é”®çš„è¯ï¼Œé‚£ä¸»é”®ä½œä¸ºcountçš„æ¡ä»¶æ—¶å€™count(ä¸»é”®)æœ€å¿«ï¼Œå¦‚æœä½ çš„è¡¨åªæœ‰ä¸€ä¸ªå­—æ®µçš„è¯é‚£count(*)å°±æ˜¯æœ€å¿«çš„ã€‚</span><br></pre></td></tr></table></figure></li></ul><h3 id="äº‹ç‰©éš”ç¦»çº§åˆ«"><a href="#äº‹ç‰©éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹ç‰©éš”ç¦»çº§åˆ«"></a>äº‹ç‰©éš”ç¦»çº§åˆ«</h3><ul><li><p>read uncommittedï¼ˆè¯»å–æœªæäº¤æ•°æ®ï¼‰</p><blockquote><p>æˆ‘ä»¬å°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºread uncommittedï¼Œå³ä¾¿æ˜¯äº‹åŠ¡æ²¡æœ‰commitï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶èƒ½è¯»åˆ°æœªæäº¤çš„æ•°æ®ï¼Œè¿™æ˜¯æ‰€æœ‰éš”ç¦»çº§åˆ«ä¸­æœ€ä½çš„ä¸€ç§ã€‚</p><p>è„è¯»</p></blockquote></li><li><p>read committedï¼ˆå¯ä»¥è¯»å–å…¶ä»–äº‹åŠ¡æäº¤çš„æ•°æ®ï¼‰</p><blockquote><p>å¤§å¤šæ•°æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«;</p><p>å½“æˆ‘ä»¬å°†å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºread committedçš„æ—¶å€™ï¼Œå½“å‰ä¼šè¯åªèƒ½è¯»å–åˆ°å…¶ä»–äº‹åŠ¡æäº¤çš„æ•°æ®ï¼Œæœªæäº¤çš„æ•°æ®è¯»ä¸åˆ°ã€‚</p></blockquote></li><li><p>repeatable readï¼ˆå¯é‡è¯»ï¼‰</p><blockquote><p>MySQLé»˜è®¤çš„éš”ç¦»çº§åˆ«</p><p>å½“æˆ‘ä»¬å°†å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºrepeatable readçš„æ—¶å€™ï¼Œå½“å‰ä¼šè¯å¯ä»¥é‡å¤è¯»ï¼Œå°±æ˜¯æ¯æ¬¡è¯»å–çš„ç»“æœé›†éƒ½ç›¸åŒï¼Œè€Œä¸ç®¡å…¶ä»–äº‹åŠ¡æœ‰æ²¡æœ‰æäº¤ã€‚</p><p>å¹»è¯»</p></blockquote></li><li><p>serializableï¼ˆä¸²è¡ŒåŒ–ï¼‰</p><blockquote><p>å½“æˆ‘ä»¬å°†å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºserializableçš„æ—¶å€™ï¼Œå…¶ä»–ä¼šè¯å¯¹è¯¥è¡¨çš„å†™æ“ä½œå°†è¢«æŒ‚èµ·ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯éš”ç¦»çº§åˆ«ä¸­æœ€ä¸¥æ ¼çš„ï¼Œä½†æ˜¯è¿™æ ·åšåŠ¿å¿…å¯¹æ€§èƒ½é€ æˆå½±å“ã€‚æ‰€ä»¥åœ¨å®é™…çš„é€‰ç”¨ä¸Šï¼Œæˆ‘ä»¬è¦æ ¹æ®å½“å‰å…·ä½“çš„æƒ…å†µé€‰ç”¨åˆé€‚çš„ã€‚</p></blockquote></li></ul><h3 id="DDL-VS-DML"><a href="#DDL-VS-DML" class="headerlink" title="DDL VS DML"></a>DDL VS DML</h3><p>DML statements are SQL statements that manipulate data. DML stands for Data Manipulation Language. The SQL statements that are in the DML class are INSERT, UPDATE and DELETE. Some people also lump the SELECT statement in the DML classification.</p><p>Data Definition Languages (DDL) are used to define the database structure. Any CREATE, DROP and ALTER commands are examples of DDL SQL statements.</p><h3 id="mysqldump"><a href="#mysqldump" class="headerlink" title="mysqldump"></a>mysqldump</h3><ul><li><p>å¯¼å‡ºæ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -h127.0.0.1 -P3306 -uroot -p database &gt; file.sql</span><br><span class="line">å…¶ä¸­ -hå’Œ-På¯ä»¥çœç•¥ï¼ˆä¸è¿‡mysqlåœ¨dockerä¸­ä¸å¯ä»¥çœç•¥ï¼‰,databaseæ˜¯æ•°æ®åº“åç§°</span><br></pre></td></tr></table></figure></li><li><p>å¯¼å‡ºæ•°æ®è¡¨æ•°æ®ï¼ˆæ ¹æ®sqlçš„whereæ¡ä»¶ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p database --tables tablename --where="id&gt;8" &gt; result.sql</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œsqlæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">source</span> /path/to/files/filename.sql</span></span><br></pre></td></tr></table></figure></li><li><p>å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p --all-databases &gt; backup_filename.sql</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux command</title>
      <link href="/2015/10/16/linux%20command/"/>
      <url>/2015/10/16/linux%20command/</url>
      <content type="html"><![CDATA[<p><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners" target="_blank" rel="noopener">Bash Scripting Tutorial for Beginners</a></p><h3 id="Bash-Shell-Scripting-Definition"><a href="#Bash-Shell-Scripting-Definition" class="headerlink" title="Bash Shell Scripting Definition"></a>Bash Shell Scripting Definition</h3><ul><li>Bash:Bourne-Again SHell<br>Bash is a command language interpreter. <h2 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h2>Do not be afraid to break things as that is perfectly normal. Troubleshooting and fixing code is perhaps the best booster for you to enhance your understanding of bash scripting and to improve your ability.</li></ul><p><a href="https://linuxconfig.org/bash-scripting-tutorial#h24-stdout-to-screen" target="_blank" rel="noopener">Bash scripting Tutorial</a></p><h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><ul><li>kill seesion <code>screen -X -S [session # you want to kill] quit</code></li><li>æ–°å»ºscreenä¼šè¯           screen -S xxx</li><li>æ¢å¤æŒ‡å®šä¼šè¯               screen -r xxx</li><li>æŸ¥çœ‹æ‰€æœ‰ä¼šè¯                screen -ls</li><li>åˆ é™¤æŒ‡å®šä¼šè¯                screen -S xxx -X quit</li><li>å›åˆ°ç»ˆç«¯                        Ctrl-a d</li></ul><h2 id="PORT"><a href="#PORT" class="headerlink" title="PORT"></a>PORT</h2><ul><li><p>Check the listening ports</p><p>Run any one of the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo lsof -i -P -n | grep LISTEN </span><br><span class="line">sudo netstat -tulpn | grep LISTEN</span><br><span class="line">sudo nmap -sTU -O IP-address-Here</span><br></pre></td></tr></table></figure></li><li><p>checking remote system tcp 80 port status</p><ol><li><p>Telnet</p></li><li><p>nc</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> nc -zvw10 192.168.0.1 22</span><br><span class="line">å…¶ä¸­å‚æ•°ï¼š</span><br><span class="line">z: zero-I/O mode which is used for scanning</span><br><span class="line">v: for verbose output</span><br><span class="line">w10: timeout wait seconds</span><br></pre></td></tr></table></figure></li></ol></li></ul><ol start="3"><li>nmap<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">telnet myserver.com 80 </span><br><span class="line">nc -v myserver.com 80</span><br><span class="line">nc -vn 192.168.40.146 2424</span><br><span class="line">nmap myserver.com 80</span><br></pre></td></tr></table></figure></li></ol><ul><li><p>é€šè¿‡è¿›ç¨‹åæŸ¥çœ‹å ç”¨ç«¯å£</p><ul><li>å…ˆæŸ¥çœ‹è¿›ç¨‹pid    <code>ps -ef | grep è¿›ç¨‹å</code></li><li>å†é€šè¿‡pidæŸ¥çœ‹å ç”¨ç«¯å£    <code>netstat -nap | grep è¿›ç¨‹pid</code></li></ul></li><li><p>é€šè¿‡ç«¯å£æŸ¥çœ‹è¿›ç¨‹</p><p><code>netstat -nap | grep ç«¯å£å·</code>æˆ–<code>netstat -apn | grep ç«¯å£å·</code></p><p><code>netstat -tln | grep 8080</code> æŸ¥çœ‹ç«¯å£8080çš„ä½¿ç”¨æƒ…å†µ</p></li></ul><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><ul><li>c â€“ Creates a new .tar archive file.</li><li><p>x â€” to untar or extract a tar file</p></li><li><p>v â€“ Verbosely show the .tar file progress.</p></li><li><p>f â€“ File name type of the archive file.</p></li><li><p>z â€” gzip archive file</p></li><li>j â€”  bz2 feature compress and create archive file</li><li>t â€” to list the contents of tar archive file</li></ul><h2 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a>firewall</h2><ul><li>check status : <code>sudo ufw status</code></li><li><p>enable firewall: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ufw <span class="built_in">enable</span></span><br><span class="line">Command may disrupt existing ssh connections. Proceed with operation (y|n)? y</span><br><span class="line">Firewall is active and enabled on system startup</span><br></pre></td></tr></table></figure></li><li><p>disable firewall</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ufw <span class="built_in">disable</span></span><br><span class="line">Firewall stopped and disabled on system startup</span><br></pre></td></tr></table></figure></li></ul><h3 id="æŸ¥çœ‹ç³»ç»Ÿé…ç½®"><a href="#æŸ¥çœ‹ç³»ç»Ÿé…ç½®" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿé…ç½®"></a>æŸ¥çœ‹ç³»ç»Ÿé…ç½®</h3><ul><li><p>æŸ¥çœ‹ç³»ç»Ÿ</p><ul><li><code>cat /etc/os-release</code></li></ul></li><li><p>æŸ¥çœ‹å†…æ ¸</p><ul><li><code>cat /proc/version</code></li><li><code>uname -a</code></li></ul></li><li><p>æŸ¥çœ‹linuxç‰ˆæœ¬</p><ul><li><code>lsb_release -a</code></li><li><code>cat /etc/issue</code></li></ul></li><li><blockquote><p>æ€»æ ¸æ•° = ç‰©ç†CPUä¸ªæ•° X æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° </p><p>æ€»é€»è¾‘CPUæ•° = ç‰©ç†CPUä¸ªæ•° X æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° X è¶…çº¿ç¨‹æ•°</p></blockquote><ul><li><p>æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­coreçš„ä¸ªæ•°(å³æ ¸æ•°)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep "cpu cores"| uniq</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep "processor"| wc -l</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ç£ç›˜ç›¸å…³"><a href="#ç£ç›˜ç›¸å…³" class="headerlink" title="ç£ç›˜ç›¸å…³"></a>ç£ç›˜ç›¸å…³</h3><ul><li><p>æŸ¥çœ‹ç³»ç»Ÿç£ç›˜å ç”¨æƒ…å†µ    <code>df -h</code></p></li><li><p>æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶å¤§å°        <code>du -sh</code></p></li><li><p>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ä¸€çº§å­æ–‡ä»¶å’Œå­ç›®å½•å ç”¨çš„ç£ç›˜å®¹é‡: <code>du -lh --max-depth=1</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹userç›®å½•çš„å¤§å°ï¼Œå¹¶ä¸æƒ³çœ‹å…¶ä»–ç›®å½•ä»¥åŠå…¶å­ç›®å½•ï¼š</span><br><span class="line">du -sh user</span><br><span class="line">-sè¡¨ç¤ºæ€»ç»“çš„æ„æ€ï¼Œå³åªåˆ—å‡ºä¸€ä¸ªæ€»ç»“çš„å€¼</span><br><span class="line">du -h --max-depth=0 user</span><br><span class="line">--max-depth=nè¡¨ç¤ºåªæ·±å…¥åˆ°ç¬¬nå±‚ç›®å½•ï¼Œæ­¤å¤„è®¾ç½®ä¸º0ï¼Œå³è¡¨ç¤ºä¸æ·±å…¥åˆ°å­ç›®å½•ã€‚</span><br></pre></td></tr></table></figure></li><li><p>æ€»ç»“duå¸¸ç”¨å‘½ä»¤</p><p><strong>du -h â€“max-depth=1 |grep â€˜Gâ€™ |sort   #æŸ¥çœ‹ä¸ŠGç›®å½•å¹¶æ’åº</strong></p><p>du -h â€“max-depth=1 |grep [TG] |sort   #æŸ¥æ‰¾ä¸ŠGå’ŒTçš„ç›®å½•å¹¶æ’åº<br>du -sh â€“max-depth=1  #æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä¸€çº§å­ç›®å½•æ–‡ä»¶å¤¹å¤§å°</p></li></ul><ul><li><p>æ¸…ç†æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶</p><p>ä¾‹å¦‚éœ€è¦æ ¹æ®æ—¶é—´åˆ é™¤è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œ/tmpï¼Œæ¸…ç†æ‰20å¤©ä¹‹å‰çš„æ— æ•ˆæ•°æ®ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸€æ¡å‘½ä»¤å»å®Œæˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find /tmp -mtime +21 -name "*" -exec rm -Rf &#123;&#125; \;</span><br><span class="line">- /tmp ï¼šå‡†å¤‡è¦è¿›è¡Œæ¸…ç†çš„ä»»æ„ç›®å½•</span><br><span class="line">- -mtimeï¼šæ ‡å‡†è¯­å¥å†™æ³•</span><br><span class="line">- ï¼‹10ï¼šæŸ¥æ‰¾10å¤©å‰çš„æ–‡ä»¶ï¼Œè¿™é‡Œç”¨æ•°å­—ä»£è¡¨å¤©æ•°ï¼Œï¼‹30è¡¨ç¤ºæŸ¥æ‰¾30å¤©å‰çš„æ–‡ä»¶</span><br><span class="line">- "*"ï¼šå¸Œæœ›æŸ¥æ‰¾çš„æ•°æ®ç±»å‹ï¼Œ".jpg"è¡¨ç¤ºæŸ¥æ‰¾æ‰©å±•åä¸ºjpgçš„æ‰€æœ‰æ–‡ä»¶ï¼Œ""è¡¨ç¤ºæŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">- -execï¼šå›ºå®šå†™æ³•</span><br><span class="line">- rm -Rfï¼šå¼ºåˆ¶åˆ é™¤æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®å½•(æ³¨æ„Rå¤§å†™ï¼Œfå°å†™)</span><br><span class="line">-  &#123;&#125; \; å›ºå®šå†™æ³•ï¼Œä¸€å¯¹å¤§æ‹¬å·+ç©ºæ ¼+\+;</span><br></pre></td></tr></table></figure></li></ul><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>æŸ¥æ‰¾å…·ä½“æ–‡ä»¶    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name æ–‡ä»¶åç§°</span><br></pre></td></tr></table></figure><h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><p><code>ls -lh</code>ä»¥å¯è¯»æ€§Gã€MæŸ¥çœ‹æ–‡ä»¶çš„å¤§å°</p><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p>æŸ¥çœ‹å†å²å‘½ä»¤ï¼Œæ”¯æŒ grepè¿‡æ»¤æ“ä½œ</p><h3 id="file"><a href="#file" class="headerlink" title="file"></a>file</h3><p><strong>1.</strong> To delete all files in a directory except filename, type the command below:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !("filename")</span><br></pre></td></tr></table></figure><p><strong>2.</strong> To delete all files with the exception of <strong>filename1</strong> and <strong>filename2</strong>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !("filename1"|"filename2")</span><br></pre></td></tr></table></figure><p><strong>3.</strong> The example below shows how to remove all files other than all <code>.zip</code> files interactively:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -i !(*.zip)</span><br></pre></td></tr></table></figure><p><strong>4.</strong> Next, you can delete all files in a directory apart from all <code>.zip</code> and <code>.odt</code> files as follows, while displaying what is being done:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !(*.zip|*.odt)</span><br></pre></td></tr></table></figure><h3 id="å¸è½½å®‰è£…çš„è½¯ä»¶"><a href="#å¸è½½å®‰è£…çš„è½¯ä»¶" class="headerlink" title="å¸è½½å®‰è£…çš„è½¯ä»¶"></a>å¸è½½å®‰è£…çš„è½¯ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå·²å®‰è£…çš„ç¨‹åºdpkg --list</span><br><span class="line">å¸è½½ç¨‹åºå’Œæ‰€æœ‰é…ç½®æ–‡ä»¶sudo apt-get --purge remove &lt;programname&gt;</span><br><span class="line">åªå¸è½½ç¨‹åºsudo apt-get remove &lt;programname&gt;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶æƒé™"><a href="#æ–‡ä»¶æƒé™" class="headerlink" title="æ–‡ä»¶æƒé™"></a>æ–‡ä»¶æƒé™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r=4ï¼Œw=2ï¼Œx=1</span><br><span class="line">è‹¥è¦rwxå±æ€§åˆ™4+2+1=7ï¼›</span><br><span class="line">è‹¥è¦rw-å±æ€§åˆ™4+2=6ï¼›</span><br><span class="line">è‹¥è¦r-xå±æ€§åˆ™4+1=7</span><br></pre></td></tr></table></figure><p>###ã€€å®‰è£…debæ–‡ä»¶å‡ºé”™æ—¶</p><p>ä½¿ç”¨<code>apt-get -f -y install</code>ä¿®å¤ä¹‹åï¼Œå†è¿›è¡Œå®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.æ‰§è¡Œå‘½ä»¤sudo dpkgã€€-iã€€XXX.debã€€è¿”å›ä¾èµ–å…³ç³»é”™è¯¯æç¤º</span><br><span class="line">2.æ‰§è¡Œsudo apt-get -f installã€€è¿™æ¡å‘½ä»¤å°†è‡ªåŠ¨å®‰è£…éœ€è¦çš„ä¾èµ–åŒ…ï¼</span><br><span class="line">3.å†æ¬¡æ‰§è¡Œå‘½ä»¤sudo dpkgã€€-iã€€XXX.debã€€å®‰è£…æˆåŠŸ</span><br></pre></td></tr></table></figure><h2 id="å…‰æ ‡"><a href="#å…‰æ ‡" class="headerlink" title="å…‰æ ‡"></a>å…‰æ ‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+aï¼šå…‰æ ‡å›åˆ°å‘½ä»¤è¡Œé¦–ã€‚ ï¼ˆaï¼šaheadï¼‰</span><br><span class="line">Ctrl+eï¼šå…‰æ ‡å›åˆ°å‘½ä»¤è¡Œå°¾ã€‚ ï¼ˆeï¼šendï¼‰</span><br><span class="line">Ctrl+bï¼šå…‰æ ‡å‘è¡Œé¦–ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚ ï¼ˆbï¼šbackwardsï¼‰</span><br><span class="line">Ctrl+ fï¼šå…‰æ ‡å‘è¡Œå°¾ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚ ï¼ˆfï¼šforwardsï¼‰</span><br><span class="line">Ctrl+w: åˆ é™¤å…‰æ ‡å¤„åˆ°è¡Œé¦–çš„å­—ç¬¦ã€‚</span><br><span class="line">Ctrl+kï¼šåˆ é™¤å…‰æ ‡å¤„åˆ°è¡Œå°¾çš„å­—ç¬¦ã€‚</span><br><span class="line">Ctrl+uï¼šåˆ é™¤æ•´ä¸ªå‘½ä»¤è¡Œæ–‡æœ¬å­—ç¬¦ã€‚</span><br><span class="line">Ctrl+hï¼šå‘è¡Œé¦–åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">Ctrl+dï¼šå‘è¡Œå°¾åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚</span><br><span class="line"></span><br><span class="line">Ctrl + xx ï¼šåœ¨å‘½ä»¤è¡Œå°¾å’Œå…‰æ ‡ä¹‹é—´ç§»åŠ¨</span><br></pre></td></tr></table></figure><h3 id="AWK"><a href="#AWK" class="headerlink" title="AWK"></a>AWK</h3><ul><li><p><code>awk -v FS=&quot;è¾“å…¥åˆ†éš”ç¬¦&quot; -v OFS=&#39;è¾“å‡ºåˆ†éš”ç¬¦&#39; &#39;{if($1==$5) print $1,$5,$10}&#39; filename</code></p><p>æŸ¥æ‰¾filenameæ–‡ä»¶ï¼ˆæ–‡ä»¶ä¸­åˆ—çš„åˆ†éš”ç¬¦ä¸ºâ€œè¾“å…¥åˆ†éš”ç¬¦â€ï¼‰ä¸­ï¼Œæ¯ä¸€è¡Œç¬¬ä¸€åˆ—å’Œç¬¬äº”åˆ—ç›¸ç­‰çš„è¡Œï¼Œå¹¶è¾“å‡ºç¬¬ä¸€åˆ—ã€ç¬¬äº”åˆ—ã€ç¬¬ååˆ—ï¼Œåˆ‡è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ä¸ºâ€œè¾“å‡ºåˆ†éš”ç¬¦â€ã€‚å¦‚æœä¸é…ç½®FSå’ŒOFSï¼Œé‚£ä¹ˆè¾“å…¥è¾“å‡ºåˆ†éš”ç¬¦å‡é»˜è®¤ä¸ºç©º</p></li><li><p><a href="https://www.commandlinefu.com/commands/view/6872/exclude-a-column-with-awk" target="_blank" rel="noopener">exclude a column with awk</a>, æ¯”å¦‚æ‰“å°é™¤ç¬¬5åˆ—çš„å…¶å®ƒæ‰€æœ‰åˆ—</p><p>awk â€˜{ $5=â€â€; print }â€™ file</p></li></ul><h3 id="ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°"><a href="#ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°" class="headerlink" title="ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°"></a>ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°</h3><p>è¯­æ³•ï¼šwc [é€‰é¡¹] æ–‡ä»¶â€¦</p><p>è¯´æ˜ï¼šè¯¥å‘½ä»¤ç»Ÿè®¡ç»™å®šæ–‡ä»¶ä¸­çš„å­—èŠ‚æ•°ã€å­—æ•°ã€è¡Œæ•°ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºæ–‡ä»¶åï¼Œåˆ™ä»æ ‡å‡†è¾“å…¥è¯»å–ã€‚wcåŒæ—¶ä¹Ÿç»™å‡ºæ‰€æœ‰æŒ‡å®šæ–‡ä»¶çš„æ€»ç»Ÿè®¡æ•°ã€‚å­—æ˜¯ç”±ç©ºæ ¼å­—ç¬¦åŒºåˆ†å¼€çš„æœ€å¤§å­—ç¬¦ä¸²ã€‚</p><p>è¯¥å‘½ä»¤å„é€‰é¡¹å«ä¹‰å¦‚ä¸‹ï¼š</p><p>ã€€ã€€- c ç»Ÿè®¡å­—èŠ‚æ•°ã€‚</p><p>ã€€ã€€- l ç»Ÿè®¡è¡Œæ•°ã€‚</p><p>ã€€ã€€- w ç»Ÿè®¡å­—æ•°ã€‚</p><p>è¿™äº›é€‰é¡¹å¯ä»¥ç»„åˆä½¿ç”¨ã€‚</p><h3 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h3><p>ä½¿æ–‡ä»¶å¯ä»¥ç›´æ¥æ‰§è¡Œçš„å‘½ä»¤ï¼šchmod +x filename</p><p>ä½¿æ‰€æœ‰ç”¨æˆ·å¯¹ç›®å½•éƒ½æœ‰è¯»å†™æƒé™ï¼šsudo chmod ugo+rw /opt</p><h3 id="æ—¶åŒº"><a href="#æ—¶åŒº" class="headerlink" title="æ—¶åŒº"></a>æ—¶åŒº</h3><p><a href="https://www.cnblogs.com/zhangeamon/p/5500744.html" target="_blank" rel="noopener">CentOS 7 æ—¶åŒºè®¾ç½®</a></p><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><p>é™å®šæŸ¥è¯¢ç»“æœä¹‹åçš„å‰å‡ è¡Œ <code>grep -m 10 &lt;pattern&gt; &lt;file&gt;</code></p><p>é™å®šæŸ¥è¯¢ç»“æœå€’æ•°çš„å‡ è¡Œ <code>grep &lt;pattern&gt; &lt;file&gt; | tail -10</code></p><h3 id="æ—¥æœŸ"><a href="#æ—¥æœŸ" class="headerlink" title="æ—¥æœŸ"></a>æ—¥æœŸ</h3><ul><li><p>åˆ¤æ–­ã€€day of year     </p><p><code>doy=$(date +%j)</code></p></li><li><p>åˆ¶å®šæ—¥æœŸå‡ä¸€å¤©</p><p><code>date -d&quot;20140101 -1 days&quot; +&quot;%Y%m%d&quot;</code></p></li></ul><h3 id="å‰ªåˆ‡æ¿"><a href="#å‰ªåˆ‡æ¿" class="headerlink" title="å‰ªåˆ‡æ¿"></a>å‰ªåˆ‡æ¿</h3><p>å°†å‰ªåˆ‡æ¿ä¸­çš„å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶     echo $(xsel â€“clipboard) &gt;&gt; a.txt </p><p>å°†æ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°å‰ªåˆ‡æ¿         cat a.txt | xsel â€“clipboard</p><h4 id="securtCRT"><a href="#securtCRT" class="headerlink" title="securtCRT"></a>securtCRT</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹è½½æœåŠ¡å™¨æ–‡ä»¶sz filename</span><br><span class="line">ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ rz filename</span><br></pre></td></tr></table></figure><h4 id="æ ¼å¼åŒ–json"><a href="#æ ¼å¼åŒ–json" class="headerlink" title="æ ¼å¼åŒ–json"></a>æ ¼å¼åŒ–json</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo '&#123;"kind": "Service", "apiVersion": "v1", "status": &#123;"loadBalancer": true&#125;&#125;'|jq .</span><br></pre></td></tr></table></figure><h4 id="SED"><a href="#SED" class="headerlink" title="SED"></a>SED</h4><ul><li><p>æ›¿æ¢å­—ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's/Search_String/Replacement_String/g' Input_File</span><br></pre></td></tr></table></figure></li></ul><h4 id="è½¬æ¢æ–‡ä»¶ç¼–ç æ ¼å¼"><a href="#è½¬æ¢æ–‡ä»¶ç¼–ç æ ¼å¼" class="headerlink" title="è½¬æ¢æ–‡ä»¶ç¼–ç æ ¼å¼"></a>è½¬æ¢æ–‡ä»¶ç¼–ç æ ¼å¼</h4><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ Linux ç³»ç»Ÿä¸­å¦‚ä½•æŸ¥çœ‹æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œå¯ä»¥åœ¨ vim ä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:set fileencoding</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¯èƒ½æ˜¯è¿™æ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileencoding=utf-81</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>file</code> å’Œ <code>identify</code> å‘½ä»¤æŸ¥çœ‹ã€‚</p><p>ç„¶åä½¿ç”¨ <code>iconv</code> è¿›è¡Œç¼–ç æ ¼å¼çš„è½¬æ¢ï¼Œæ¯”å¦‚å°†ä¸€ä¸ª utf-8 ç¼–ç çš„æ–‡ä»¶è½¬æ¢æˆ GBK ç¼–ç ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> iconv -f UTF-8 -t GBK input.file -o output.file</span></span><br></pre></td></tr></table></figure><ul><li><p>å¦‚æœé‡åˆ°]iconv: æœªçŸ¥xxxxå¤„çš„éæ³•è¾“å…¥åºåˆ—,ä¸€ç§è§£å†³æ–¹æ³•æ˜¯åŠ å…¥ -cé€‰é¡¹ï¼šå¿½ç•¥æ— æ•ˆå­—ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iconv -c  -f gb2312 -t utf8 test.txt -o output.file</span><br></pre></td></tr></table></figure></li></ul>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iconv -f gb18030 -t UTF-8 input.file -o output.file</span><br><span class="line"></span><br><span class="line">gb18030</span><br></pre></td></tr></table></figure><h3 id="trå‘½ä»¤"><a href="#trå‘½ä»¤" class="headerlink" title="trå‘½ä»¤"></a>trå‘½ä»¤</h3><p>tr â€“ translate or delete characters </p><ul><li><p>å¤§å°å†™è½¬æ¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr A-Z a-z </span><br><span class="line">cat file | tr a-z A-Z</span><br></pre></td></tr></table></figure></li></ul><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><ul><li><p>â€œ1â€</p><p>æŸ¥çœ‹æ‰€æœ‰CPUæ ¸çš„ä½¿ç”¨æƒ…å†µ</p></li><li><p>â€œcâ€</p><p>æŸ¥çœ‹å…·ä½“è¿›ç¨‹çš„è·¯å¾„</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">l- å¼€å¯æˆ–å…³é—­ç¬¬ä¸€éƒ¨åˆ†ç¬¬ä¸€è¡Œtopä¿¡æ¯æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">ã€€ã€€t - å¼€å¯æˆ–å…³é—­ç¬¬ä¸€éƒ¨åˆ†ç¬¬äºŒè¡ŒTaskså’Œç¬¬ä¸‰è¡Œ Cpu(s)Â ä¿¡æ¯æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">ã€€ã€€m - å¼€å¯æˆ–å…³é—­ç¬¬ä¸€éƒ¨åˆ†ç¬¬å››è¡Œ Mem å’Œ ç¬¬äº”è¡Œ Swap ä¿¡æ¯æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">ã€€ã€€N - ä»¥ PID çš„å¤§å°çš„é¡ºåºæ’åˆ—è¡¨ç¤ºè¿›ç¨‹åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">ã€€ã€€P - ä»¥ CPU å ç”¨ç‡å¤§å°çš„é¡ºåºæ’åˆ—è¿›ç¨‹åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">ã€€ã€€M - ä»¥å†…å­˜å ç”¨ç‡å¤§å°çš„é¡ºåºæ’åˆ—è¿›ç¨‹åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">ã€€ã€€h - æ˜¾ç¤ºå¸®åŠ©</span><br><span class="line"></span><br><span class="line">ã€€ã€€n - è®¾ç½®åœ¨è¿›ç¨‹åˆ—è¡¨æ‰€æ˜¾ç¤ºè¿›ç¨‹çš„æ•°é‡ï¼ˆæŒ‰å®Œnï¼Œå†è¾“å…¥ä¸ªæ•°ï¼‰</span><br><span class="line"></span><br><span class="line">ã€€ã€€q - é€€å‡º top</span><br><span class="line"></span><br><span class="line">ã€€ã€€s - è®¾ç½®æ˜¾ç¤ºä¿¡æ¯çš„åˆ·æ–°é¢‘ç‡ï¼ˆç”±äºæ˜¯å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ˜¾ç¤ºçš„è¿‡ç¨‹å…¶å®æ˜¯åˆ·å±çš„è¿‡ç¨‹ï¼‰</span><br></pre></td></tr></table></figure><h3 id="markdown"><a href="#markdown" class="headerlink" title="markdown"></a>markdown</h3><ul><li><p>markdownæ–‡ä»¶è½¬wordæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc -o output.docx -f markdown -t docx filename.md</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç½‘ç»œä»£ç†"><a href="#ç½‘ç»œä»£ç†" class="headerlink" title="ç½‘ç»œä»£ç†"></a>ç½‘ç»œä»£ç†</h3><ul><li><p>æŸ¥çœ‹æœ¬åœ°ç½‘ç»œä»£ç†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export | grep -i proxy</span><br></pre></td></tr></table></figure></li><li><p>å…³é—­ä»£ç†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset http_proxy</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java 8</title>
      <link href="/2015/09/01/java%208%20feature/"/>
      <url>/2015/09/01/java%208%20feature/</url>
      <content type="html"><![CDATA[<h3 id="forEach-method-in-Iterable-interface"><a href="#forEach-method-in-Iterable-interface" class="headerlink" title="forEach() method in Iterable interface"></a>forEach() method in Iterable interface</h3><h3 id="default-and-static-methods-in-Interfaces"><a href="#default-and-static-methods-in-Interfaces" class="headerlink" title="default and static methods in Interfaces"></a>default and static methods in Interfaces</h3><ul><li>Java 8 introduces the â€œDefault Methodâ€ or (Defender methods) feature, which allows the developer to add new methods to the interfaces without breaking their existing implementation. It provides the flexibility to allow interface to define implementation which will use as the default in a situation where a concrete class fails to provide an implementation for that method.</li></ul><h3 id="Functional-Interfaces-and-Lambda-Expressions"><a href="#Functional-Interfaces-and-Lambda-Expressions" class="headerlink" title="Functional Interfaces and Lambda Expressions"></a>Functional Interfaces and Lambda Expressions</h3><h4 id="Functional-Interfaces"><a href="#Functional-Interfaces" class="headerlink" title="Functional Interfaces"></a>Functional Interfaces</h4><blockquote><p>Being object oriented is not bad, but it brings a lot of verbosity to the program. Java 8 Functional Interfaces and Lambda Expressions help us in writing smaller and cleaner code by removing a lot of boiler-plate code.</p><ul><li>An interface with exactly one abstract method is called Functional Interface. @FunctionalInterface annotation is added so that we can mark an interface as functional interface.</li><li>Some of the useful java 8 functional interfaces are Consumer, Supplier, Function and Predicate.</li></ul></blockquote><h4 id="Lambda-Expression"><a href="#Lambda-Expression" class="headerlink" title="Lambda Expression"></a>Lambda Expression</h4><ul><li>Objects are the base of java programming language and we can never have a function without an Object, thatâ€™s why Java language provide support for using lambda expressions only with functional interfaces.</li><li>Lambda Expressions syntax is (argument) -&gt; (body). </li></ul><h3 id="Java-Stream-API-for-Bulk-Data-Operations-on-Collections"><a href="#Java-Stream-API-for-Bulk-Data-Operations-on-Collections" class="headerlink" title="Java Stream API for Bulk Data Operations on Collections"></a>Java Stream API for Bulk Data Operations on Collections</h3><h3 id="Java-Time-API"><a href="#Java-Time-API" class="headerlink" title="Java Time API"></a>Java Time API</h3><h3 id="Collection-API-improvements"><a href="#Collection-API-improvements" class="headerlink" title="Collection API improvements"></a>Collection API improvements</h3><h3 id="Concurrency-API-improvements"><a href="#Concurrency-API-improvements" class="headerlink" title="Concurrency API improvements"></a>Concurrency API improvements</h3><h3 id="Java-IO-improvements"><a href="#Java-IO-improvements" class="headerlink" title="Java IO improvements"></a>Java IO improvements</h3><h3 id="Miscellaneous-Core-API-improvements"><a href="#Miscellaneous-Core-API-improvements" class="headerlink" title="Miscellaneous Core API improvements"></a>Miscellaneous Core API improvements</h3>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vim command</title>
      <link href="/2015/08/16/vim%20command/"/>
      <url>/2015/08/16/vim%20command/</url>
      <content type="html"><![CDATA[<p><img src="https://i.imgur.com/8ouxjED.png" alt="vimium"></p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>session tracking</title>
      <link href="/2015/02/18/session%20tracking/"/>
      <url>/2015/02/18/session%20tracking/</url>
      <content type="html"><![CDATA[<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><blockquote><p>Session simply means a particular interval of time.<br>Session Tracking is a way to maintain state (data) of an user. It is also known as session management in servlet.</p></blockquote><ul><li><p>HTTP is stateless that means each request is considered as the new request. It is shown in the figure given below:<br><img src="https://www.javatpoint.com/images/newrequest.JPG" alt=""></p></li><li><p>There are four techniques used in Session tracking:</p><ul><li>Cookies</li><li>Hidden Form Field</li><li>URL Rewriting</li><li>HttpSession</li></ul></li></ul><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><blockquote><p>A cookie is a small piece of information that is persisted between the multiple client requests.<br>A cookie has a name, a single value, and optional attributes such as a comment, path and domain qualifiers, a maximum age, and a version number.</p></blockquote><h3 id="how-cookie-work"><a href="#how-cookie-work" class="headerlink" title="how cookie work"></a>how cookie work</h3><p><img src="https://www.javatpoint.com/phppages/images/cookie.png" alt=""></p><h3 id="type-of-cookie"><a href="#type-of-cookie" class="headerlink" title="type of cookie"></a>type of cookie</h3><ul><li><p>Non-persistent cookie</p><blockquote><p>It is valid for single session only. It is removed each time when user closes the browser.</p></blockquote></li><li><p>Persistent cookie</p><blockquote><p>It is valid for multiple session . It is not removed each time when user closes the browser. It is removed only if user logout or signout.</p></blockquote></li><li><p>Advantage </p><ul><li>Simplest technique of maintaining the state.</li><li>Cookies are maintained at client side.</li></ul></li><li>Disadvantage<ul><li>It will not work if cookie is disabled from the browser.</li><li>Only textual information can be set in Cookie object.</li></ul></li></ul><h2 id="HttpSession-Interface"><a href="#HttpSession-Interface" class="headerlink" title="HttpSession Interface"></a>HttpSession Interface</h2><ul><li>An object of HttpSession can be used to perform two tasks:<ul><li>bind objects</li><li>view and manipulate information about a session, such as the session identifier, creation time, and last accessed time.<br><img src="https://www.javatpoint.com/images/httpsession.JPG" alt=""></li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java servlet</title>
      <link href="/2015/02/16/java%20servlet/"/>
      <url>/2015/02/16/java%20servlet/</url>
      <content type="html"><![CDATA[<h2 id="Web-Application"><a href="#Web-Application" class="headerlink" title="Web Application"></a>Web Application</h2><h3 id="HTML-and-HTTP"><a href="#HTML-and-HTTP" class="headerlink" title="HTML and HTTP"></a>HTML and HTTP</h3><ul><li>HTML:HyperText Markup Language.</li><li>HTTP:HyperText Transfer Protocol<ul><li>HTTP is the communication protocol between server and client. HTTP runs on top of TCP/IP communication protocol.</li><li>Port numbers 0 to 1023 are reserved ports for well known services, for example 80 for HTTP, 443 for HTTPS, 21 for FTP etc.</li></ul></li><li>Java Servlet and JSPs are server side technologies to extend the capability of web servers by providing support for dynamic response and data persistence.</li></ul><h3 id="Web-Container"><a href="#Web-Container" class="headerlink" title="Web Container"></a>Web Container</h3><ul><li>When web container gets the request and if itâ€™s for servlet then container creates two Objects HTTPServletRequest and HTTPServletResponse. Then it finds the correct servlet based on the URL and creates a thread for the request. Then it invokes the servlet service() method and based on the HTTP method service() method invokes doGet() or doPost() methods. Servlet methods generate the dynamic page and write it to response. Once servlet thread is complete, container converts the response to HTTP response and send it back to client.</li><li>Some of the important work done by web container are:<ul><li>Communication Support â€“ Container provides easy way of communication between web server and the servlets and JSPs. Because of container, we donâ€™t need to build a server socket to listen for any request from web server, parse the request and generate response. All these important and complex tasks are done by container and all we need to focus is on our business logic for our applications.<ul><li>Lifecycle and Resource Management â€“ Container takes care of managing the life cycle of servlet. Container takes care of loading the servlets into memory, initializing servlets, invoking servlet methods and destroying them. Container also provides utility like JNDI for resource pooling and management.</li><li>Multithreading Support â€“ Container creates new thread for every request to the servlet and when itâ€™s processed the thread dies. So servlets are not initialized for each request and saves time and memory.</li><li>JSP Support â€“ JSPs doesnâ€™t look like normal java classes and web container provides support for JSP. Every JSP in the application is compiled by container and converted to Servlet and then container manages them like other servlets.</li><li>Miscellaneous Task â€“ Web container manages the resource pool, does memory optimizations, run garbage collector, provides security configurations, support for multiple applications, hot deployment and several other tasks behind the scene that makes our life easier.</li></ul></li></ul></li><li>Java Web Applications are packaged as Web Archive (WAR) and it has a defined structure.<br><img src="https://cdn.journaldev.com/wp-content/uploads/2013/08/WAR-directory-structure.png" alt=""></li></ul><h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><ul><li>Servlet API Hierarchy<br><img src="https://cdn.journaldev.com/wp-content/uploads/2013/08/Servlet-Hierarchy.png" alt=""></li></ul><h2 id="Session-Management"><a href="#Session-Management" class="headerlink" title="Session Management"></a>Session Management</h2><h3 id="What-is-a-Session"><a href="#What-is-a-Session" class="headerlink" title="What is a Session?"></a>What is a Session?</h3><ul><li>HTTP protocol and Web Servers are stateless, what it means is that for web server every request is a new request to process and they canâ€™t identify if itâ€™s coming from client that has been sending request previously.</li><li>Session is a conversional state between client and server and it can consists of multiple request and response between client and server. Since HTTP and Web Server both are stateless, the only way to maintain a session is when some unique information about the session (session id) is passed between server and client in every request and response.</li></ul><h3 id="JSESSIONID-Cookie"><a href="#JSESSIONID-Cookie" class="headerlink" title="JSESSIONID Cookie"></a>JSESSIONID Cookie</h3><ul><li>When we use HttpServletRequest getSession() method and it creates a new request, it creates the new HttpSession object and also add a Cookie to the response object with name JSESSIONID and value as session id. This cookie is used to identify the HttpSession object in further requests from client. If the cookies are disabled at client side and we are using URL rewriting then this method uses the jsessionid value from the request URL to find the corresponding session. JSESSIONID cookie is used for session tracking, so we should not use it for our application purposes to avoid any session related issues.</li><li>When a JSP resource is used, container automatically creates a session for it, so we canâ€™t check if session is null to make sure if user has come through login page, so we are using session attribute to validate request.</li><li>As we saw in last section that we can manage a session with HttpSession but if we disable the cookies in browser, it wonâ€™t work because server will not receive the JSESSIONID cookie from client. </li></ul><h4 id="Cookie-Basics"><a href="#Cookie-Basics" class="headerlink" title="Cookie Basics"></a>Cookie Basics</h4><ul><li>a cookie is a small piece of data stored on the client-side which servers use when communicating with clients.Theyâ€™re used to identify a client when sending a subsequent request. They can also be used for passing some data from one servlet to another.</li></ul>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux config</title>
      <link href="/2015/01/16/linux%20config/"/>
      <url>/2015/01/16/linux%20config/</url>
      <content type="html"><![CDATA[<h3 id="java-config"><a href="#java-config" class="headerlink" title="java config"></a>java config</h3><ul><li>Use <code>java -XshowSettings:properties</code> to show the java.library.path (and others) value.</li></ul><h3 id="native-lib-config"><a href="#native-lib-config" class="headerlink" title="native lib config"></a>native lib config</h3><ul><li><code>/lib</code> contain â€œessentialâ€ libraries that may be needed even in single-user (admin-only) mode and without /usr mounted</li><li><code>/usr/lib</code> are the libraries for the normal user-programs, that mostly can be found under /usr.</li><li><code>/usr/local/lib</code> are the libraries for locally installed programs and packages ie. things youâ€™ve compiled and installed from source-packages yourself.</li></ul><h3 id="other"><a href="#other" class="headerlink" title="other"></a>other</h3><ul><li><code>/etc/environment</code>æ˜¯è®¾ç½®æ•´ä¸ªç³»ç»Ÿçš„ç¯å¢ƒï¼Œè€Œ<code>/etc/profile</code>æ˜¯è®¾ç½®æ‰€æœ‰ç”¨æˆ·çš„ç¯å¢ƒ </li></ul><h3 id="vmware-centos-ip-config"><a href="#vmware-centos-ip-config" class="headerlink" title="vmware centos ip config"></a>vmware centos ip config</h3><ol><li><code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code>,è®¾ç½®<code>ONBOOT=yes</code></li><li><code>service network restart</code></li><li><code>ip a</code>æŸ¥çœ‹ip</li></ol><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><ol><li><p>è¿›å…¥ç›®å½• /root/.ssh</p></li><li><p>æ‰§è¡Œå‘½ä»¤ï¼š<code>ssh-keygen -t rsa</code>ï¼Œä¼šç”Ÿæˆæ–‡ä»¶id_rsaå’Œid_rsa.pub</p></li><li><p>å°†å…¬é’¥å†™å…¥æ–‡ä»¶ authorized_keysï¼Œ<code>cat id_rsa.pub &gt;&gt; authorized_keys</code></p></li><li><p>åœ¨å…¶å®ƒæœºå™¨é‡å¤ä¸Šè¿°æ“ä½œ</p></li><li><p>å°†å…¶å®ƒæœºå™¨çš„å…¬é’¥æ‹·è´åˆ°ç¬¬ä¸€å°æœºå™¨çš„authorized_keysæ–‡ä»¶ä¸­</p><p><code>ssh-copy-id -i id_rsa.pub ç”¨æˆ·@ip</code></p><blockquote><p>æ³¨æ„ï¼Œä¸€å®šä¸è¦ä½¿ç”¨å¤åˆ¶æ‹·è´çš„æ–¹å¼æŠŠå…¬é’¥å¤åˆ¶åˆ°authorized_keysæ–‡ä»¶ä¸­ï¼Œå› ä¸ºå¤åˆ¶çš„æ—¶å€™ä¼šæœ‰ç‰¹æ®Šå­—ç¬¦çš„åŠ å…¥ï¼Œå¯ä»¥åœ¨vimä¸­ä½¿ç”¨<code>:set list</code>è¿›è¡ŒéªŒè¯</p></blockquote></li><li><p>å°†ç¬¬ä¸€å°æœºå™¨çš„authorized_keyså¤åˆ¶åˆ°å…¶å®ƒæœºå™¨ä¸Š</p><p><code>scp authorized_keys ç”¨æˆ·@ip:/è·¯å¾„/.ssh/</code></p><p>æ³¨æ„ç‚¹</p></li></ol><ul><li>authorized_keysçš„æƒé™æ˜¯600ï¼Œå³è¯»å’Œå†™ï¼ˆå¦‚æœé»˜è®¤ä¸æ˜¯çš„è¯ï¼Œéœ€è¦ä¿®æ”¹ï¼‰</li></ul><h3 id="ç•Œé¢å¡æ­»"><a href="#ç•Œé¢å¡æ­»" class="headerlink" title="ç•Œé¢å¡æ­»"></a>ç•Œé¢å¡æ­»</h3><ol><li><p>ä½¿ç”¨ Ctrl+Alt+F1æˆ–F2æˆ–åˆ°F6ï¼Œè¿›å…¥ttyç»ˆç«¯ï¼ˆè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼‰</p></li><li><p>æ‰§è¡Œå‘½ä»¤æ³¨é”€æ¡Œé¢é‡æ–°ç™»å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pkill Xorg</span><br><span class="line">æˆ–</span><br><span class="line">sudo restart lightdm</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> config </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hello world</title>
      <link href="/2015/01/01/hello-world/"/>
      <url>/2015/01/01/hello-world/</url>
      <content type="html"><![CDATA[<h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><h3 id="Clean"><a href="#Clean" class="headerlink" title="Clean"></a>Clean</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/1970/01/01/yarn%20snippet/"/>
      <url>/1970/01/01/yarn%20snippet/</url>
      <content type="html"><![CDATA[]]></content>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/1970/01/01/hadoop%20snippt/"/>
      <url>/1970/01/01/hadoop%20snippt/</url>
      <content type="html"><![CDATA[<h2 id="1-Create-a-directory-in-HDFS-at-given-path-s"><a href="#1-Create-a-directory-in-HDFS-at-given-path-s" class="headerlink" title="1. Create a directory in HDFS at given path(s)."></a>1. Create a directory in HDFS at given path(s).</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir &lt;paths&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop dfs -mkdir /user/saurzcode/dir1 /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="2-List-the-contents-of-a-directory"><a href="#2-List-the-contents-of-a-directory" class="headerlink" title="2.  List the contents of a directory."></a>2.  List the contents of a directory.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls &lt;args&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls /user/saurzcode</span><br></pre></td></tr></table></figure><h2 id="3-Upload-and-download-a-file-in-HDFS"><a href="#3-Upload-and-download-a-file-in-HDFS" class="headerlink" title="3. Upload and download a file in HDFS."></a>3. Upload and download a file in HDFS.</h2><p><strong>Upload:</strong></p><p><strong>hdfs fs -put:</strong></p><p>Copy single src file, or multiple src files from local file system to the hdfs data file system</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put &lt;localsrc&gt; ... &lt;HDFS_dest_Path&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put /home/saurzcode/Samplefile.txt  /user/saurzcode/dir3/</span><br></pre></td></tr></table></figure><p><strong>*Download:*</strong></p><p><strong>hdfs fs -get:</strong></p><p>Copies/Downloads files to the local file system</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get &lt;hdfs_src&gt; &lt;localdst&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get /user/saurzcode/dir3/Samplefile.txt /home/</span><br></pre></td></tr></table></figure><h2 id="4-See-contents-of-a-file"><a href="#4-See-contents-of-a-file" class="headerlink" title="4. See contents of a file"></a>4. See contents of a file</h2><p>Same as unix cat command:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cat &lt;path[filename]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cat /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><h2 id="5-Copy-a-file-from-source-to-destination"><a href="#5-Copy-a-file-from-source-to-destination" class="headerlink" title="5. Copy a file from source to destination"></a>5. Copy a file from source to destination</h2><p>This command allows multiple sources as well in which case the destination must be a directory.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cp &lt;source&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cp /user/saurzcode/dir1/abc.txt /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="6-Copy-a-file-from-To-Local-file-system-to-HDFS"><a href="#6-Copy-a-file-from-To-Local-file-system-to-HDFS" class="headerlink" title="6. Copy a file from/To Local file system to HDFS"></a>6. Copy a file from/To Local file system to HDFS</h2><p><strong>copyFromLocal</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyFromLocal &lt;localsrc&gt; URI</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyFromLocal /home/saurzcode/abc.txt  /user/saurzcode/abc.txt</span><br></pre></td></tr></table></figure><p>Similar to put command, except that the source is restricted to a local file reference.</p><p><strong>copyToLocal</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyToLocal [-ignorecrc] [-crc] URI &lt;localdst&gt;</span><br></pre></td></tr></table></figure><p>Similar to get command, except that the destination is restricted to a local file reference.</p><h2 id="7-Move-file-from-source-to-destination"><a href="#7-Move-file-from-source-to-destination" class="headerlink" title="7. Move file from source to destination."></a>7. Move file from source to destination.</h2><p>Note:- Moving files across filesystem is not permitted.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mv &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mv /user/saurzcode/dir1/abc.txt /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="8-Remove-a-file-or-directory-in-HDFS"><a href="#8-Remove-a-file-or-directory-in-HDFS" class="headerlink" title="8. Remove a file or directory in HDFS."></a>8. Remove a file or directory in HDFS.</h2><p>Remove files specified as argument. Deletes directory only when it is empty</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rm &lt;arg&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rm /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><p><strong>*Recursive version of delete.*</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rmr &lt;arg&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rmr /user/saurzcode/</span><br></pre></td></tr></table></figure><h2 id="9-Display-last-few-lines-of-a-file"><a href="#9-Display-last-few-lines-of-a-file" class="headerlink" title="9. Display last few lines of a file."></a>9. Display last few lines of a file.</h2><p>Similar to tail command in Unix.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -tail &lt;path[filename]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -tail /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><h2 id="10-Display-the-aggregate-length-of-a-file"><a href="#10-Display-the-aggregate-length-of-a-file" class="headerlink" title="10. Display the aggregate length of a file."></a>10. Display the aggregate length of a file.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -du &lt;path&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br><span class="line">hdfs dfs -du /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><p>Please comment which of these commands you found most useful while dealing with Hadoop /HDFS.</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/1970/01/01/hive%20snippet/"/>
      <url>/1970/01/01/hive%20snippet/</url>
      <content type="html"><![CDATA[<h3 id="beeline"><a href="#beeline" class="headerlink" title="beeline"></a>beeline</h3><p>1ï¼‰metadata ï¼šhiveå…ƒæ•°æ®ï¼Œå³hiveå®šä¹‰çš„è¡¨åï¼Œå­—æ®µåï¼Œç±»å‹ï¼Œåˆ†åŒºï¼Œç”¨æˆ·è¿™äº›æ•°æ®ã€‚ä¸€èˆ¬å­˜å‚¨å…³ç³»å‹ä¹¦åº“mysqlä¸­ï¼Œåœ¨æµ‹è¯•é˜¶æ®µä¹Ÿå¯ä»¥ç”¨hiveå†…ç½®Derbyæ•°æ®åº“ã€‚</p><p>ï¼ˆ2ï¼‰metastore ï¼šhivestoreæœåŠ¡ç«¯ã€‚ä¸»è¦æä¾›å°†DDLï¼ŒDMLç­‰è¯­å¥è½¬æ¢ä¸ºMapReduceï¼Œæäº¤åˆ°hdfsä¸­ã€‚</p><p>ï¼ˆ3ï¼‰hiveserver2ï¼šhiveæœåŠ¡ç«¯ã€‚æä¾›hiveæœåŠ¡ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡beelineï¼Œjdbcï¼ˆå³ç”¨javaä»£ç é“¾æ¥ï¼‰ç­‰å¤šç§æ–¹å¼é“¾æ¥åˆ°hiveã€‚</p><p>ï¼ˆ4ï¼‰beelineï¼šhiveå®¢æˆ·ç«¯é“¾æ¥åˆ°hiveçš„ä¸€ä¸ªå·¥å…·ã€‚å¯ä»¥ç†è§£æˆmysqlçš„å®¢æˆ·ç«¯ã€‚å¦‚ï¼šnavite cat ç­‰ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20191122115956341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDQwMDQw,size_16,color_FFFFFF,t_70" alt=""></p><p>2 è¿æ¥hiveï¼š<br>ï¼ˆ1ï¼‰./bin/hive<br>é€šè¿‡ ./bin/hive å¯åŠ¨çš„hiveæœåŠ¡ï¼Œç¬¬ä¸€æ­¥ä¼šå…ˆå¯åŠ¨metastoreæœåŠ¡ï¼Œç„¶ååœ¨å¯åŠ¨ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°metastoreã€‚æ­¤æ—¶metastoreæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½åœ¨ä¸€å°æœºå™¨ä¸Šï¼Œåˆ«çš„æœºå™¨æ— æ³•è¿æ¥åˆ°metastoreï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è¿æ¥åˆ°hiveã€‚è¿™ç§æ–¹å¼ä¸å¸¸ç”¨ï¼Œä¸€ç›´åªç”¨äºè°ƒè¯•ç¯èŠ‚ã€‚</p><p>ï¼ˆ2ï¼‰ ./bin/hive  â€“service metastore<br><strong>é€šè¿‡hive â€“service metastore ä¼šå¯åŠ¨ä¸€ä¸ª hive metastoreæœåŠ¡é»˜è®¤çš„ç«¯å£å·ä¸ºï¼š9083ã€‚metastoreæœåŠ¡é‡Œé¢é…ç½®metadataç›¸å…³çš„é…ç½®ã€‚æ­¤æ—¶å¯ä»¥æœ‰å¤šä¸ªhiveå®¢æˆ·ç«¯åœ¨hive-site.xmlé…ç½®hive.metastore.uris=thrift://ipxxx:9083  çš„æ–¹å¼é“¾æ¥åˆ°hiveã€‚motestore è™½ç„¶èƒ½ä½¿hiveæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆ†åˆ«éƒ¨ç½²åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…³æ³¨metadataçš„ç›¸å…³é…ç½®ã€‚ä½†æ˜¯metastoreåªèƒ½é€šè¿‡åªèƒ½é€šè¿‡é…ç½®hive.metastore.urisçš„æ–¹å¼è¿æ¥ï¼Œæ— æ³•é€šè¿‡jdbcçš„æ–¹å¼è®¿é—®ã€‚</strong></p><p>ï¼ˆ3ï¼‰./bin/hiveserver2<br>hiveserver2 ä¼šå¯åŠ¨ä¸€ä¸ªhiveæœåŠ¡ç«¯é»˜è®¤ç«¯å£ä¸ºï¼š10000ï¼Œå¯ä»¥é€šè¿‡beelineï¼Œjdbcï¼Œodbcçš„æ–¹å¼é“¾æ¥åˆ°hiveã€‚<strong>hiveserver2å¯åŠ¨çš„æ—¶å€™ä¼šå…ˆæ£€æŸ¥æœ‰æ²¡æœ‰é…ç½®hive.metastore.urisï¼Œå¦‚æœæ²¡æœ‰ä¼šå…ˆå¯åŠ¨ä¸€ä¸ªmetastoreæœåŠ¡ï¼Œç„¶ååœ¨å¯åŠ¨hiveserver2ã€‚å¦‚æœæœ‰é…ç½®hive.metastore.urisã€‚ä¼šè¿æ¥åˆ°è¿œç¨‹çš„metastoreæœåŠ¡ã€‚è¿™ç§æ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„ã€‚</strong>éƒ¨ç½²åœ¨å›¾å¦‚ä¸‹ï¼š</p><ul><li>ç™»å½•bin/beelineï¼Œå¯ä»¥å¯åŠ¨å®¢æˆ·ç«¯é“¾æ¥åˆ°hiveserver2ã€‚æ‰§è¡Œbeelineååœ¨æ§åˆ¶è¾“å…¥ !connect jdbc:hive2://localhost:10000/default root 123 å°±å¯ä»¥é“¾æ¥åˆ° hiveserver2äº†ï¼›defaultè¡¨ç¤ºé“¾æ¥åˆ°default databaseï¼Œ root å’Œ123 åˆ†åˆ«ä¸ºå¯†ç ã€‚æ³¨æ„è¿™é‡Œçš„å¯†ç ä¸æ˜¯mysqlçš„å¯†ç ï¼Œæ˜¯hiveä¸­çš„ç”¨æˆ·</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¿æ¥åº“</span><br><span class="line">!connect jdbc:hive2://localhost:10000/defaultÂ root 123</span><br></pre></td></tr></table></figure><h1 id="hiveä¸­å‡ ç§åˆ†å‰²ç¬¦"><a href="#hiveä¸­å‡ ç§åˆ†å‰²ç¬¦" class="headerlink" title="hiveä¸­å‡ ç§åˆ†å‰²ç¬¦"></a>hiveä¸­å‡ ç§åˆ†å‰²ç¬¦</h1><p><strong>åˆ†éš”ç¬¦</strong></p><p>\n    æ¯è¡Œä¸€æ¡è®°å½•<br>^A    åˆ†éš”åˆ—ï¼ˆå…«è¿›åˆ¶ \001ï¼‰<br>^B    åˆ†éš”ARRAYæˆ–è€…STRUCTä¸­çš„å…ƒç´ ï¼Œæˆ–è€…MAPä¸­å¤šä¸ªé”®å€¼å¯¹ä¹‹é—´åˆ†éš”ï¼ˆå…«è¿›åˆ¶ \002ï¼‰<br>^C    åˆ†éš”MAPä¸­é”®å€¼å¯¹çš„â€œé”®â€å’Œâ€œå€¼â€ï¼ˆå…«è¿›åˆ¶ \003ï¼‰</p><p><strong>ç”¨åˆ°äº†ç³»ç»Ÿé»˜è®¤åˆ†éš”ç¬¦ã€‚é€šå¸¸ä¸‹é¢2ä¸­æƒ…å†µæˆ‘ä»¬éœ€è¦éœ€è¦ç”¨åˆ°åˆ†éš”ç¬¦</strong></p><p>1ï¼Œåˆ¶ä½œtableçš„è¾“å…¥æ–‡ä»¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è¾“å…¥ä¸€äº›ç‰¹æ®Šçš„åˆ†éš”ç¬¦</p><p>2ï¼ŒæŠŠhiveè¡¨æ ¼å¯¼å‡ºåˆ°æœ¬åœ°æ—¶ï¼Œç³»ç»Ÿé»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯^Aï¼Œè¿™ä¸ªæ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œç›´æ¥catæˆ–è€…vimæ˜¯çœ‹ä¸åˆ°çš„</p><p><strong>åˆ†éš”ç¬¦åœ¨HIVEä¸­çš„ç”¨é€”</strong></p><table><thead><tr><th>åˆ†éš”ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>\n</td><td>å¯¹äºæ–‡æœ¬æ–‡ä»¶æ¥è¯´ï¼Œæ¯è¡Œéƒ½æ˜¯ä¸€æ¡è®°å½•ï¼Œå› æ­¤æ¢è¡Œç¬¦å¯ä»¥åˆ†éš”è®°å½•</td></tr><tr><td>^A(Ctrl+A)</td><td>ç”¨äºåˆ†éš”å­—æ®µ(åˆ—)ã€‚åœ¨CREATE TABLEè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å…«è¿›åˆ¶ç¼–ç \001è¡¨ç¤º</td></tr><tr><td>^B(Ctrl+B)</td><td>ç”¨äºåˆ†éš”ARRAYæˆ–è€…STRUCTä¸­çš„å…ƒç´ ï¼Œæˆ–ç”¨äºMAPä¸­é”®-å€¼å¯¹ä¹‹é—´çš„åˆ†éš”ã€‚åœ¨CREATE TABLEè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å…«è¿›åˆ¶ç¼–ç \002è¡¨ç¤º</td></tr><tr><td>^C(Ctrl+C)</td><td>ç”¨äºMAPä¸­é”®å’Œå€¼ä¹‹é—´çš„åˆ†éš”ã€‚åœ¨CREATE TABLEè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å…«è¿›åˆ¶ç¼–ç \003è¡¨ç¤º</td></tr></tbody></table><blockquote><p>Hive ä¸­æ²¡æœ‰å®šä¹‰ä¸“é—¨çš„æ•°æ®æ ¼å¼ï¼Œæ•°æ®æ ¼å¼å¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šï¼Œç”¨æˆ·å®šä¹‰æ•°æ®æ ¼å¼éœ€è¦æŒ‡å®šä¸‰ä¸ªå±æ€§ï¼šåˆ—åˆ†éš”ç¬¦ï¼ˆé€šå¸¸ä¸ºç©ºæ ¼ã€â€\tâ€ã€â€\x001â€³ï¼‰ã€è¡Œåˆ†éš”ç¬¦ï¼ˆâ€\nâ€ï¼‰ä»¥åŠè¯»å–æ–‡ä»¶æ•°æ®çš„æ–¹æ³•ã€‚ç”±äºåœ¨åŠ è½½æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦ä»ç”¨æˆ·æ•°æ®æ ¼å¼åˆ° Hive å®šä¹‰çš„æ•°æ®æ ¼å¼çš„è½¬æ¢ï¼Œå› æ­¤ï¼ŒHive åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ä¸ä¼šå¯¹æ•°æ®æœ¬èº«è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œè€Œåªæ˜¯å°†æ•°æ®å†…å®¹å¤åˆ¶æˆ–è€…ç§»åŠ¨åˆ°ç›¸åº”çš„ HDFS ç›®å½•ä¸­ã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥åœ¨createè¡¨æ ¼çš„æ—¶å€™ï¼Œé€‰æ‹©å¦‚ä¸‹ï¼Œè¡¨æ ¼åŠ è½½inputçš„æ–‡ä»¶çš„æ—¶å€™å°±ä¼šæŒ‰ç…§ä¸‹é¢æ ¼å¼åŒ¹é…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">row format delimited </span><br><span class="line">fields terminated by &apos;\001&apos; </span><br><span class="line">collection items terminated by &apos;\002&apos; </span><br><span class="line">map keys terminated by &apos;\003&apos;</span><br><span class="line">lines terminated by &apos;\n&apos; </span><br><span class="line">stored as textfile;</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹åˆ†å‰²ç¬¦ï¼Œç‰¹æ®Šç¬¦å·"><a href="#å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹åˆ†å‰²ç¬¦ï¼Œç‰¹æ®Šç¬¦å·" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹åˆ†å‰²ç¬¦ï¼Œç‰¹æ®Šç¬¦å·"></a>å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹åˆ†å‰²ç¬¦ï¼Œç‰¹æ®Šç¬¦å·</h3><ol><li>æŸ¥çœ‹éšè—å­—ç¬¦çš„æ–¹æ³•</li></ol><p>1.1ï¼Œcat -A filename</p><p><img src="http://image.okcode.net/26FFE1BCC5620E19E94B26122C71BA2E.png" alt="img"></p><p>1.2ï¼Œvim filenameå å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set listæ˜¾ç¤ºç‰¹æ®Šç¬¦å·</span><br><span class="line">set nolist å–æ¶ˆæ˜¾ç¤ºç‰¹æ®Šç¬¦å·</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹éšè—å­—ç¬¦çš„æ–¹æ³•</li></ol><p>é¦–å…ˆæŒ‰ç…§1.2æ‰“å¼€æ˜¾ç¤ºç‰¹æ®Šç¬¦å·ã€‚è¿›å…¥INSERTæ¨¡å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ctrl + V å¯ä»¥è¾“å…¥ ^ç¬¦å·</span><br><span class="line">ctrl + a å¯ä»¥è¾“å…¥A---&apos;\001&apos;</span><br><span class="line">ctrl + b å¯ä»¥è¾“å…¥A---&apos;\002&apos;</span><br><span class="line">ctrl + c å¯ä»¥è¾“å…¥A---&apos;\003&apos;</span><br></pre></td></tr></table></figure><p> æ³¨æ„ï¼šè™½ç„¶é”®ç›˜ä¸Šä½ èƒ½æ‰¾åˆ°^å’ŒAä½†ç›´æ¥è¾“å…¥æ—¶ä¸è¡Œçš„ï¼Œå¿…é¡»æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•è¾“å…¥ã€‚</p><p>ç¬¬ä¸€è¡Œæ˜¯ç‰¹æ®Šç¬¦å·é¢œè‰²è“è‰²ï¼Œç¬¬äºŒè¡Œç›´æ¥è¾“å…¥ä¸æ˜¯ç‰¹æ®Šç¬¦å·ã€‚</p><p><img src="http://image.okcode.net/DD9ED976ABB6F4313B8F0F7C2DD5C33E.png" alt="img"></p><p>ç‰¹æ®Šå·ç›´æ¥catæ˜¯ä¸å¯ä»¥çœ‹è§çš„ï¼Œä½†æ˜¯ç¬¬äºŒè¡Œæ˜¯å¯è§çš„ï¼Œæ‰€ä»¥ä¸æ˜¯ç‰¹æ®Šç¬¦å·ã€‚</p><p><img src="http://image.okcode.net/75D96F800A1815F7A84A8CF543BD7063.png" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ROW FORMAT DELIMITED </span><br><span class="line">FIELDS TERMINATED BY &apos;\u0001&apos; </span><br><span class="line">COLLECTION ITEMS TERMINATED BY &apos;\u0002&apos; </span><br><span class="line">MAP KEYS TERMINATED BY &apos;\u0003&apos;</span><br><span class="line">\u0001æ˜¯ASCIIç¼–ç å€¼ï¼Œå¯¹åº”javaä»£ç ä¸­çš„&quot;\001&quot;</span><br></pre></td></tr></table></figure><p>æ„ä¹‰å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰FIELDSï¼Œå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦æ˜¯â€™\u0001â€™</p><p>ï¼ˆ2ï¼‰COLLECTION ITEMSï¼Œå¤šä¸ªé›†åˆä¹‹é—´çš„åˆ†éš”ç¬¦æ˜¯â€™\u0002â€™ï¼Œä¾‹å¦‚ï¼ˆkv1ï¼Œkv2ï¼Œkv3ï¼‰è¿™ç§å¤šä¸ªé”®å€¼å¯¹ä¹‹é—´çš„åˆ†éš”ç¬¦å°±æ˜¯â€™\u0002â€™</p><p>ï¼ˆ3ï¼‰MAP KEYSï¼Œå•ä¸ªmapçš„kå’Œvä¹‹é—´çš„åˆ†éš”ç¬¦æ˜¯\u0003\ï¼Œä¾‹å¦‚kv1é‡Œï¼Œk \u0003 v</p><h3 id="æŸ¥çœ‹orcæ–‡ä»¶"><a href="#æŸ¥çœ‹orcæ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹orcæ–‡ä»¶"></a>æŸ¥çœ‹orcæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --orcfiledump &lt;hdfs-location-of-orc-file&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å­—æ®µç±»å‹"><a href="#ä¿®æ”¹å­—æ®µç±»å‹" class="headerlink" title="ä¿®æ”¹å­—æ®µç±»å‹"></a>ä¿®æ”¹å­—æ®µç±»å‹</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;<span class="keyword">table</span>-<span class="keyword">name</span>&gt; <span class="keyword">CHANGE</span> &lt;<span class="keyword">old</span>-<span class="keyword">col</span>-<span class="keyword">name</span>&gt; &lt;<span class="keyword">new</span>-<span class="keyword">col</span>-<span class="keyword">name</span>&gt; &lt;<span class="keyword">data</span>-<span class="keyword">type</span>&gt;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">CHANGE</span> e_id e_id <span class="built_in">INT</span>;</span><br></pre></td></tr></table></figure><h3 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h3><ul><li><p>Create ORC table</p></li><li><p>Login to the web console</p></li><li><p>Launch Hive by typing <code>hive</code> in the web console. Run the below commands in Hive.</p></li><li><p>Use your database by using the below command. <code>${env:USER}</code> gets replaced by your username automatically:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use $&#123;env:USER&#125;;</span><br></pre></td></tr></table></figure></li><li><p>To create an ORC file format:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE orc_table (</span><br><span class="line">    first_name STRING, </span><br><span class="line">    last_name STRING</span><br><span class="line"> ) </span><br><span class="line"> STORED AS ORC;</span><br></pre></td></tr></table></figure></li><li><p>To insert values in the table:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO orc_table VALUES (&apos;John&apos;,&apos;Gill&apos;);</span><br></pre></td></tr></table></figure></li><li><p>To retrieve all the values in the table:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM orc_table;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/1970/01/01/npm%20snippet/"/>
      <url>/1970/01/01/npm%20snippet/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vueé¡¹ç›®ï¼š npm run dev  ä¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ ç«‹å³å¯åŠ¨é¡¹ç›®   </span><br><span class="line"></span><br><span class="line">reacté¡¹ç›®ï¼š npm run start  ä¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ ç«‹å³å¯åŠ¨é¡¹ç›®</span><br><span class="line"></span><br><span class="line">ç¼–è¯‘æ‰“åŒ…é¡¹ç›®:npm run build</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>next optimize</title>
      <link href="/1970/01/01/next%20optimize/"/>
      <url>/1970/01/01/next%20optimize/</url>
      <content type="html"><![CDATA[<h3 id="å®‰è£…è¯„è®º"><a href="#å®‰è£…è¯„è®º" class="headerlink" title="å®‰è£…è¯„è®º"></a>å®‰è£…è¯„è®º</h3><p><a href="https://zhuanlan.zhihu.com/p/33617273" target="_blank" rel="noopener">æ¥å¿…åŠ›è¯„è®º</a></p><p><a href="https://sjq597.github.io/2018/05/18/Hexo-%E4%BD%BF%E7%94%A8Gitment%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/" target="_blank" rel="noopener">ä½¿ç”¨Gitmentè¯„è®ºåŠŸèƒ½</a></p><h3 id="ç½®é¡¶åŠŸèƒ½"><a href="#ç½®é¡¶åŠŸèƒ½" class="headerlink" title="ç½®é¡¶åŠŸèƒ½"></a>ç½®é¡¶åŠŸèƒ½</h3><p><a href="https://donlex.cn/archives/caeb67e2.html" target="_blank" rel="noopener">æ·»åŠ ç½®é¡¶</a></p>]]></content>
      
      <categories>
          
          <category> next </category>
          
      </categories>
      
      
        <tags>
            
            <tag> optimize </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
