<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>containerd</title>
      <link href="/2025/03/28/containerd/"/>
      <url>/2025/03/28/containerd/</url>
      
        <content type="html"><![CDATA[<h2 id="best-practise"><a href="#best-practise" class="headerlink" title="best practise"></a>best practise</h2><p><strong>change containerd‚Äôs default data path</strong></p><ol><li><p>Identify the Current Data Path</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">containerd config default | grep &quot;root&quot; # Expected output: root = &quot;/var/lib/containerd&quot;</span><br></pre></td></tr></table></figure></li><li><p>Modify the following lines in /etc/containerd/config.toml:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root = &quot;/path/to/new/data/path&quot; # the location where container data (images, volumes) is stored</span><br></pre></td></tr></table></figure></li><li><p>Move Existing Data (if required)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop containerd  # optional</span><br><span class="line">sudo mv /var/lib/containerd /data/containerd</span><br><span class="line">sudo systemctl start containerd</span><br></pre></td></tr></table></figure></li></ol><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list k8s image</span></span><br><span class="line">sudo ctr -n k8s.io images ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> load tar file</span> </span><br><span class="line">sudo ctr -n k8s.io images import /tmp/my-image.tar</span><br><span class="line"><span class="meta">#</span><span class="bash"> combine load tar file to specify tag image</span></span><br><span class="line">sudo ctr -n k8s.io images import --base-name my.registry.com/myproject/my-image:v1.2.3 /path/to/image.tar</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rename tag</span></span><br><span class="line">sudo ctr -n k8s.io images tag &lt;old-image-name&gt; &lt;new-image-name&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remove image</span></span><br><span class="line">sudo ctr -n k8s.io images remove &lt;name&gt;:&lt;tag&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> containerd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph fs</title>
      <link href="/2025/03/26/ceph%20FS/"/>
      <url>/2025/03/26/ceph%20FS/</url>
      
        <content type="html"><![CDATA[<h1 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h1><p>Before mounting CephFS, ensure that</p><ol><li>the client host (where CephFS has to be mounted and used) has a copy of the Ceph configuration file (i.e. ceph.conf)</li><li>a keyring of the CephX user that has permission to access the MDS.<br>both of these files must already be present on the host where the Ceph MON resides.</li></ol><ul><li><p>Generate a minimal conf file for the client host and place it at a standard location:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> on client host</span></span><br><span class="line">mkdir -p -m 755 /etc/ceph</span><br><span class="line">ssh &#123;user&#125;@&#123;mon-host&#125; &quot;sudo ceph config generate-minimal-conf&quot; | sudo tee /etc/ceph/ceph.conf</span><br><span class="line">chmod 644 /etc/ceph/ceph.conf</span><br></pre></td></tr></table></figure></li><li><p>Create a CephX user and get its secret key:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh &#123;user&#125;@&#123;mon-host&#125; &quot;sudo ceph fs authorize cephfs-1 client.dongwei / rw&quot; | sudo tee /etc/ceph/ceph.client.dongwei.keyring</span><br></pre></td></tr></table></figure><blockquote><p>In above command, replace cephfs with the name of your CephFS, foo by the name you want for your CephX user and / by the path within your CephFS for which you want to allow access to the client host and rw stands for both read and write permissions.</p></blockquote></li><li><p>Ensure that the keyring has appropriate permissions:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/ceph/ceph.client.dongwei.keyring</span><br></pre></td></tr></table></figure></li></ul><h1 id="Create-Pool-FS"><a href="#Create-Pool-FS" class="headerlink" title="Create Pool/FS"></a>Create Pool/FS</h1><ul><li><p>Creating pools</p><blockquote><p>A Ceph file system requires at least two RADOS pools, one for data and one for metadata.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ceph osd pool create cephfs_data</span><br><span class="line">ceph osd pool create cephfs_metadata</span><br></pre></td></tr></table></figure></li><li><p>Creating the file system</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph fs new cephfs-1 cephfs_metadata cephfs_data</span><br></pre></td></tr></table></figure></li><li><p>Check the status of the file system</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph fs status</span><br></pre></td></tr></table></figure></li><li><p>check mds status</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph mds stat</span><br></pre></td></tr></table></figure></li><li><p>Using Erasure Coded pools with CephFSÔºàoptionalÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph osd pool set my_ec_pool allow_ec_overwrites true</span><br></pre></td></tr></table></figure></li></ul><h1 id="Mount-CephFS-using-Kernel-Driver"><a href="#Mount-CephFS-using-Kernel-Driver" class="headerlink" title="Mount CephFS using Kernel Driver"></a>Mount CephFS using Kernel Driver</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mount -t ceph &#123;device-string&#125;=&#123;path-to-mounted&#125; &#123;mount-point&#125; -o &#123;key-value-args&#125; &#123;other-args&#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mount -t ceph &lt;name&gt;@&lt;fsid&gt;.&lt;fs_name&gt;=/ /mnt/mycephfs</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> fsid is the FSID of the Ceph cluster, <span class="built_in">which</span> can be found using the `ceph fsid` <span class="built_in">command</span>.</span></span><br><span class="line"></span><br><span class="line">mkdir /mnt/mycephfs</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> not use mount.helper</span></span><br><span class="line">mount -t ceph dongwei@b3acfc0d-575f-41d3-9c91-0e7ed3dbb3fa.cephfs-1=/ -o mon_addr=192.168.0.1:6789,secret=AQATSKdNGBnwLhAAnNDKnH65FmVKpXZJVasUeQ==</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use mount.helper</span></span><br><span class="line">mount -t ceph dongwei@.cephfs-1=/ /mnt/cephfs -o secret=AQATSKdNGBnwLhAAnNDKnH65FmVKpXZJVasUeQ==</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use secret file and Multiple monitor hosts</span></span><br><span class="line">mount -t ceph cephuser@.cephfs=/ /mnt/mycephfs -o</span><br><span class="line">mon_addr=192.168.0.1:6789/192.168.0.2:6789,secretfile=/etc/ceph/cephuser.secret</span><br></pre></td></tr></table></figure><ul><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dongwei@6a65c746-e532-11ef-8ac2-fa7c097efb00.cephfs-1=/  190G     0  190G   0% /mnt/cephfs</span><br></pre></td></tr></table></figure></li></ul><h1 id="Mount-CephFS-using-FUSE"><a href="#Mount-CephFS-using-FUSE" class="headerlink" title="Mount CephFS using FUSE"></a>Mount CephFS using FUSE</h1><ul><li><p>install ceph-fuse</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Install the Ceph release RPM (adjust <span class="string">&#x27;reef&#x27;</span> as needed)</span></span><br><span class="line">sudo rpm -Uvh https://download.ceph.com/rpm-reef/el9/noarch/ceph-release-1-1.el9.noarch.rpm</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Import the Ceph GPG key</span></span><br><span class="line">sudo rpm --import &#x27;https://download.ceph.com/keys/release.asc&#x27;</span><br><span class="line"></span><br><span class="line">sudo dnf install -y ceph-fuse</span><br></pre></td></tr></table></figure></li><li><p>mount</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ceph-fuse &#123;mount point&#125; &#123;options&#125;</span></span><br><span class="line">mkdir /mnt/mycephfs</span><br><span class="line">ceph-fuse --id dongwei /mnt/mycephfs  # mount default fs</span><br><span class="line"></span><br><span class="line">ceph-fuse --id dongwei --client_fs cephfs-1 /mnt/mycephfs # mount specify fs</span><br></pre></td></tr></table></figure></li><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph-fuse190G     0  190G   0% /mnt/cephfs2</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph csi</title>
      <link href="/2025/03/26/ceph%20csi/"/>
      <url>/2025/03/26/ceph%20csi/</url>
      
        <content type="html"><![CDATA[<h1 id="image"><a href="#image" class="headerlink" title="image"></a>image</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> v3.13</span></span><br><span class="line">quay.io/cephcsi/cephcsi:canary</span><br><span class="line"></span><br><span class="line">registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.13.0</span><br><span class="line">registry.k8s.io/sig-storage/csi-provisioner:v5.1.0</span><br><span class="line">registry.k8s.io/sig-storage/csi-resizer:v1.13.1</span><br><span class="line">registry.k8s.io/sig-storage/csi-snapshotter:v8.2.0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> v3.10</span></span><br><span class="line">quay.io/cephcsi/cephcsi:v3.10-canary</span><br><span class="line"></span><br><span class="line">registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.9.1</span><br><span class="line">registry.k8s.io/sig-storage/csi-provisioner:v3.6.2</span><br><span class="line">registry.k8s.io/sig-storage/csi-resizer:v1.9.2</span><br><span class="line">registry.k8s.io/sig-storage/csi-snapshotter:v6.3.2</span><br></pre></td></tr></table></figure><h1 id="resource"><a href="#resource" class="headerlink" title="resource"></a>resource</h1><h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><ul><li>step1</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f csidriver.yaml</span><br><span class="line">kubectl create -f csi-provisioner-rbac.yaml</span><br><span class="line">kubectl create -f csi-nodeplugin-rbac.yaml</span><br></pre></td></tr></table></figure><ul><li><p>step2</p><p><code>kubectl create -f csi-config-map.yaml</code></p><blockquote><p>check by <code>ceph mon dump</code></p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ceph-csi-config</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ceph</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">config.json:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    [</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        &quot;clusterID&quot;: &quot;xxx&quot;, </span></span><br><span class="line"><span class="string">        &quot;monitors&quot;: [</span></span><br><span class="line"><span class="string">          &quot;172.20.7.xxx:6789&quot;,</span></span><br><span class="line"><span class="string">          &quot;172.20.7.xxx:6789&quot;,</span></span><br><span class="line"><span class="string">          &quot;172.20.7.xxx:6789&quot;</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br></pre></td></tr></table></figure></li><li><p>step3</p><p><code>kubectl create -f ceph-conf.yaml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">ceph.conf:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    [global]</span></span><br><span class="line"><span class="string">    auth_cluster_required = cephx</span></span><br><span class="line"><span class="string">    auth_service_required = cephx</span></span><br><span class="line"><span class="string">    auth_client_required = cephx</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">  <span class="comment"># keyring is a required key and its value should be empty</span></span><br><span class="line">  <span class="attr">keyring:</span> <span class="string">|</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ceph-config</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ceph</span></span><br></pre></td></tr></table></figure></li><li><p>step4</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f kms-config.yaml</span><br><span class="line">kubectl create -f csi-cephfsplugin-provisioner.yaml</span><br><span class="line">kubectl create -f csi-cephfsplugin.yaml</span><br></pre></td></tr></table></figure></li></ul><h2 id="provision"><a href="#provision" class="headerlink" title="provision"></a>provision</h2><h3 id="dynamic-provision"><a href="#dynamic-provision" class="headerlink" title="dynamic provision"></a>dynamic provision</h3><ul><li><p>step1 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph fs subvolumegroup create &lt;fsName&gt; csi</span><br></pre></td></tr></table></figure></li><li><p>step2</p><p><code>kubectl create -f secret.yaml</code></p><blockquote><p>check by <code>ceph auth get client.dongwei</code> and <code>ceph auth get client.admin</code></p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">csi-cephfs-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ceph</span></span><br><span class="line"><span class="attr">stringData:</span></span><br><span class="line">  <span class="comment"># Required for statically provisioned volumes, üö® this use user</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">dongwei</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">&lt;&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Required for dynamically provisioned volumes, üö® this use admin</span></span><br><span class="line">  <span class="attr">admin:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">adminKey:</span> <span class="string">&lt;&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Encryption passphrase</span></span><br><span class="line">  <span class="attr">encryptionPassphrase:</span> <span class="string">test_passphrase</span></span><br></pre></td></tr></table></figure></li><li><p>step3</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f storageclass.yaml</span><br><span class="line">kubectl create -f pvc.yaml</span><br><span class="line">kubectl create -f pod.yaml</span><br></pre></td></tr></table></figure></li></ul><h3 id="static-provision"><a href="#static-provision" class="headerlink" title="static provision"></a>static provision</h3><ul><li><p>step1 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ceph fs subvolumegroup create &lt;fsName&gt; testGroup</span><br><span class="line">ceph fs subvolume create &lt;fsName&gt; testSubVolume testGroup --size=1073741824  # byte 1073741824/1024/1024=1024MB</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check</span></span><br><span class="line">ceph fs subvolume getpath &lt;fsName&gt; testSubVolume testGroup</span><br></pre></td></tr></table></figure></li><li><p>step2</p><p><code>kubectl create -f secret.yaml</code></p><blockquote><p>check by <code>ceph auth get client.dongwei</code> </p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">csi-cephfs-secret-static</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ceph</span></span><br><span class="line"><span class="attr">stringData:</span></span><br><span class="line">  <span class="comment"># Required for statically provisioned volumes, üö® this use userID</span></span><br><span class="line">  <span class="attr">userID:</span> <span class="string">dongwei</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">&lt;&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Encryption passphrase</span></span><br><span class="line">  <span class="attr">encryptionPassphrase:</span> <span class="string">test_passphrase</span></span><br></pre></td></tr></table></figure></li><li><p>step3</p><p><code>kubectl create -f pv.yaml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cephfs-static-pv</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line">  <span class="attr">csi:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">cephfs.csi.ceph.com</span></span><br><span class="line">    <span class="attr">nodeStageSecretRef:</span></span><br><span class="line">      <span class="comment"># node stage secret name</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">csi-cephfs-secret</span></span><br><span class="line">      <span class="comment"># node stage secret namespace where above secret is created</span></span><br><span class="line">      <span class="attr">namespace:</span> <span class="string">ceph</span></span><br><span class="line">    <span class="attr">volumeAttributes:</span></span><br><span class="line">      <span class="comment"># optional file system to be mounted</span></span><br><span class="line">      <span class="attr">&quot;fsName&quot;:</span> <span class="string">&quot;cephfs-1&quot;</span></span><br><span class="line">      <span class="comment"># Required options from storageclass parameters need to be added in volumeAttributes</span></span><br><span class="line">      <span class="attr">&quot;clusterID&quot;:</span> <span class="string">&quot;ba68226a-672f-4ba5-97bc-22840318b2ec&quot;</span></span><br><span class="line">      <span class="attr">&quot;staticVolume&quot;:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">      <span class="attr">&quot;rootPath&quot;:</span> <span class="string">/volumes/testGroup/testSubVolume</span></span><br><span class="line">    <span class="comment"># volumeHandle can be anything, need not to be same</span></span><br><span class="line">    <span class="comment"># as PV name or volume name. keeping same for brevity</span></span><br><span class="line">    <span class="attr">volumeHandle:</span> <span class="string">cephfs-static-pv</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Retain</span></span><br><span class="line">  <span class="attr">volumeMode:</span> <span class="string">Filesystem</span></span><br></pre></td></tr></table></figure><blockquote><p>rootPath ‰πüÂèØ‰ª•ÊåáÂÆö‰∏∫  /volumes/csi</p></blockquote></li><li><p>step4</p><p><code>kubectl create -f pvc.yaml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cephfs-static-pvc</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ceph</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">volumeMode:</span> <span class="string">Filesystem</span></span><br><span class="line">  <span class="comment"># volumeName should be same as PV name</span></span><br><span class="line">  <span class="attr">volumeName:</span> <span class="string">cephfs-static-pv</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> csi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kubelet snippet</title>
      <link href="/2025/03/25/kubelet%20snippet/"/>
      <url>/2025/03/25/kubelet%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="troubleshooting"><a href="#troubleshooting" class="headerlink" title="troubleshooting"></a>troubleshooting</h1><h2 id="Version-from-runtime-service-failed"><a href="#Version-from-runtime-service-failed" class="headerlink" title="Version from runtime service failed"></a>Version from runtime service failed</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E0325 12:15:10.889620 3185179 remote_runtime.go:189] &quot;Version from runtime service failed&quot; err=&quot;rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService&quot;</span><br><span class="line">E0325 12:15:10.889663 3185179 kuberuntime_manager.go:226] &quot;Get runtime version failed&quot; err=&quot;get remote runtime typed version failed: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService&quot;</span><br><span class="line">E0325 12:15:10.889683 3185179 run.go:74] &quot;command failed&quot; err=&quot;failed to run Kubelet: failed to create kubelet: get remote runtime typed version failed: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService&quot;</span><br></pre></td></tr></table></figure><ul><li><p>resolve</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â§çÂà∂Ê≠£Â∏∏ËäÇÁÇπ /etc/containerd/config.toml ÈÖçÁΩÆÊñá‰ª∂ÔºåÁÑ∂ÂêéÈáçÂêØ containerd</span><br><span class="line">sudo systemctl restart containerd</span><br><span class="line"></span><br><span class="line">kubeletÊúçÂä°‰ºöËá™Âä®ÊãâËµ∑</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubelet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clang-uml</title>
      <link href="/2025/03/20/clang-uml/"/>
      <url>/2025/03/20/clang-uml/</url>
      
        <content type="html"><![CDATA[<h1 id="clang-uml"><a href="#clang-uml" class="headerlink" title="clang-uml"></a>clang-uml</h1><h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> init .clang-uml file</span></span><br><span class="line">clang-uml --init</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use specify config file</span></span><br><span class="line">clang-uml -c /path/to/configFile</span><br></pre></td></tr></table></figure><h2 id="generate-PlantUML"><a href="#generate-PlantUML" class="headerlink" title="generate PlantUML"></a>generate PlantUML</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> generate xxx.puml base on default config</span></span><br><span class="line">clang-uml # --progress</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> draw svg picture base on above puml file</span></span><br><span class="line">plantuml -tsvg xxx.puml</span><br></pre></td></tr></table></figure><h2 id="generate-mermaid"><a href="#generate-mermaid" class="headerlink" title="generate  mermaid"></a>generate  mermaid</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> genrate xxx.mmd</span></span><br><span class="line">clang-uml -g mermaid</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> draw svg</span></span><br><span class="line">mmdc -i xxx.mmd # -o &lt;name&gt;.svg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> draw big svg</span></span><br><span class="line">vim config.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;maxTextSize&quot;: 1000000</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mmdc -i diagram.mmd -c config.json</span><br></pre></td></tr></table></figure><h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To find the exact <span class="keyword">function</span> signature</span></span><br><span class="line"> clang-uml --print-from -n client_class_diagram -c .clang-uml-sequence | grep main</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> clang-uml </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nvidia cuda</title>
      <link href="/2025/03/12/cuda/"/>
      <url>/2025/03/12/cuda/</url>
      
        <content type="html"><![CDATA[<h1 id="version"><a href="#version" class="headerlink" title="version"></a>version</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GPU  drivercuda|vllm torch</span><br><span class="line">h10055012.4  |</span><br><span class="line">h20056512.7|0.7.32.5.1+cu124</span><br><span class="line">h20057012.8|0.7.32.5.1+cu124</span><br></pre></td></tr></table></figure><h1 id="install"><a href="#install" class="headerlink" title="install"></a>install</h1><h2 id="CUDA-Toolkit"><a href="#CUDA-Toolkit" class="headerlink" title="CUDA Toolkit"></a>CUDA Toolkit</h2><blockquote><p><a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></p></blockquote><ul><li><p>local</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-ubuntu2204.pin</span><br><span class="line"></span><br><span class="line">sudo mv cuda-ubuntu2204.pin /etc/apt/preferences.d/cuda-repository-pin-600</span><br><span class="line"></span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/12.8.1/local_installers/cuda-repo-ubuntu2204-12-8-local_12.8.1-570.124.06-1_amd64.deb</span><br><span class="line"></span><br><span class="line">sudo dpkg -i cuda-repo-ubuntu2204-12-8-local_12.8.1-570.124.06-1_amd64.deb</span><br><span class="line"></span><br><span class="line">sudo cp /var/cuda-repo-ubuntu2204-12-8-local/cuda-*-keyring.gpg /usr/share/keyrings/</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line">sudo apt-get -y install cuda-toolkit-12-8</span><br></pre></td></tr></table></figure></li><li><p>online</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb</span><br><span class="line">sudo dpkg -i cuda-keyring_1.1-1_all.deb</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install cuda-toolkit-12-8</span><br></pre></td></tr></table></figure></li></ul><h3 id="post-operate"><a href="#post-operate" class="headerlink" title="post operate"></a>post operate</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> config env</span></span><br><span class="line">export PATH=/usr/local/cuda/bin:$PATH</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> NVIDIA persistence daemon</span></span><br><span class="line">sudo systemctl start nvidia-persistenced</span><br></pre></td></tr></table></figure><h2 id="driver"><a href="#driver" class="headerlink" title="driver"></a>driver</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y cuda-drivers</span><br></pre></td></tr></table></figure><h2 id="nvidia-fabricmanager"><a href="#nvidia-fabricmanager" class="headerlink" title="nvidia-fabricmanager"></a>nvidia-fabricmanager</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y nvidia-fabricmanager-570</span><br><span class="line"></span><br><span class="line">sudo systemctl start nvidia-fabricmanager</span><br></pre></td></tr></table></figure><h1 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h1><blockquote><p>resolve issues: Error 802: system not yet initialized</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sort GPUs, by ordering their IDs with IDs on the PCIe bus.</span></span><br><span class="line">export CUDA_DEVICE_ORDER=&quot;PCI_BUS_ID&quot; </span><br><span class="line"><span class="meta">#</span><span class="bash"> perform an availability check using NVML (NVIDIA Management Library). NVML is an API layer <span class="keyword">for</span> obtaining data directly from the NVIDIA-smi utility.</span></span><br><span class="line">export PYTORCH_NVML_BASED_CUDA_CHECK=1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> force show the system the IDs of available GPUs.</span></span><br><span class="line">export CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7</span><br></pre></td></tr></table></figure><h1 id="cuda-kernel-model"><a href="#cuda-kernel-model" class="headerlink" title="cuda kernel model"></a>cuda kernel model</h1><ul><li>check by <code>lsmod | grep nvidia</code></li></ul><table><thead><tr><th><strong>Module</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>nvidia_uvm</td><td>NVIDIA‚Äôs Unified Memory driver</td></tr><tr><td>nvidia_drm</td><td>Direct Rendering Manager support</td></tr><tr><td>nvidia_modeset</td><td>Kernel mode-setting support</td></tr><tr><td>nvidia</td><td>Main NVIDIA driver module</td></tr></tbody></table><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="nvidia-smi"><a href="#nvidia-smi" class="headerlink" title="nvidia-smi"></a>nvidia-smi</h2><ul><li><p>Enable Persistence Mode</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvidia-smi -pm 1</span><br></pre></td></tr></table></figure></li><li><p>check state</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi conf-compute -grs</span><br><span class="line"><span class="meta">#</span><span class="bash"> Confidential Compute GPUs Ready state: not-ready</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Confidential Compute GPUs Ready state: ready</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> above state is not-ready, execute below cmd</span></span><br><span class="line">nvidia-smi conf-compute -srs 1</span><br></pre></td></tr></table></figure></li><li><p>cuda 12.8</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 570.124.06             Driver Version: 570.124.06     CUDA Version: 12.8     |</span><br><span class="line">|-----------------------------------------+------------------------+----------------------+</span><br><span class="line">| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                        |               MIG M. |</span><br><span class="line">|=========================================+========================+======================|</span><br><span class="line">|   0  NVIDIA H200                    On  |   00000000:19:00.0 Off |                    0 |</span><br><span class="line">| N/A   23C    P0             76W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   1  NVIDIA H200                    On  |   00000000:3B:00.0 Off |                    0 |</span><br><span class="line">| N/A   21C    P0             75W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   2  NVIDIA H200                    On  |   00000000:4C:00.0 Off |                    0 |</span><br><span class="line">| N/A   23C    P0             76W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   3  NVIDIA H200                    On  |   00000000:5D:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0             77W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   4  NVIDIA H200                    On  |   00000000:9B:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0             75W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   5  NVIDIA H200                    On  |   00000000:BB:00.0 Off |                    0 |</span><br><span class="line">| N/A   23C    P0             77W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   6  NVIDIA H200                    On  |   00000000:CB:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0             76W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   7  NVIDIA H200                    On  |   00000000:DB:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0             76W /  700W |       1MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">                                                                                         </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                              |</span><br><span class="line">|  GPU   GI   CI              PID   Type   Process name                        GPU Memory |</span><br><span class="line">|        ID   ID                                                               Usage      |</span><br><span class="line">|=========================================================================================|</span><br><span class="line">|  No running processes found                                                             |</span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure></li><li><p>cuda 12.7</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">Fri Mar 14 10:23:56 2025       </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 565.57.01              Driver Version: 565.57.01      CUDA Version: 12.7     |</span><br><span class="line">|-----------------------------------------+------------------------+----------------------+</span><br><span class="line">| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                        |               MIG M. |</span><br><span class="line">|=========================================+========================+======================|</span><br><span class="line">|   0  NVIDIA H200                    On  |   00000000:19:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            111W /  700W |  134402MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   1  NVIDIA H200                    On  |   00000000:3B:00.0 Off |                    0 |</span><br><span class="line">| N/A   25C    P0            116W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   2  NVIDIA H200                    On  |   00000000:4C:00.0 Off |                    0 |</span><br><span class="line">| N/A   25C    P0            112W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   3  NVIDIA H200                    On  |   00000000:5D:00.0 Off |                    0 |</span><br><span class="line">| N/A   27C    P0            115W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   4  NVIDIA H200                    On  |   00000000:9B:00.0 Off |                    0 |</span><br><span class="line">| N/A   27C    P0            115W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   5  NVIDIA H200                    On  |   00000000:BB:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            114W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   6  NVIDIA H200                    On  |   00000000:CB:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            113W /  700W |  132320MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   7  NVIDIA H200                    On  |   00000000:DB:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0            114W /  700W |  131840MiB / 143771MiB |      0%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">                                                                                         </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                              |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                              GPU Memory |</span><br><span class="line">|        ID   ID                                                               Usage      |</span><br><span class="line">|=========================================================================================|</span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h1 id="vllm"><a href="#vllm" class="headerlink" title="vllm"></a>vllm</h1><h2 id="install-offline"><a href="#install-offline" class="headerlink" title="install offline"></a>install offline</h2><p>On your local machine, create a virtual environment:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv vllm_env</span><br><span class="line">source vllm_env/bin/activate</span><br></pre></td></tr></table></figure><p>1Ô∏è‚É£ <strong>On your local machine:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip download --dest=./vllm_deps vllm</span><br></pre></td></tr></table></figure><p>2Ô∏è‚É£ <strong>Transfer dependencies to the remote server:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r vllm_deps user@remote_server:/path/to/destination/</span><br></pre></td></tr></table></figure><p>3Ô∏è‚É£ <strong>On the remote server:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /path/to/destination/vllm_deps</span><br><span class="line">pip install --no-index --find-links=. vllm*</span><br><span class="line">‚Ä¢--no-index tells pip not to use the internet.</span><br><span class="line">‚Ä¢--find-links=./vllm_deps tells pip to look for packages in this directory.</span><br><span class="line">‚Ä¢vllm* ensures pip finds the correct package in that folder.</span><br></pre></td></tr></table></figure><h2 id="running-time"><a href="#running-time" class="headerlink" title="running time"></a>running time</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vllm serve /mnt/dingofs-test/DeepSeek-R1 --host 0.0.0.0 --port 8000 --served-model-name deepseek-r1 --tensor-parallel-size 8 --gpu-memory-utilization 0.85 --max-model-len 128000 --max-num-batched-tokens 32000 --max-num-seqs 1024 --trust-remote-code --enable-reasoning --reasoning-parser deepseek_r1</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">Sat Mar 15 20:33:04 2025       </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 570.124.06             Driver Version: 570.124.06     CUDA Version: 12.8     |</span><br><span class="line">|-----------------------------------------+------------------------+----------------------+</span><br><span class="line">| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                        |               MIG M. |</span><br><span class="line">|=========================================+========================+======================|</span><br><span class="line">|   0  NVIDIA H200                    On  |   00000000:19:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            115W /  700W |   84474MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   1  NVIDIA H200                    On  |   00000000:3B:00.0 Off |                    0 |</span><br><span class="line">| N/A   24C    P0            113W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   2  NVIDIA H200                    On  |   00000000:4C:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            114W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   3  NVIDIA H200                    On  |   00000000:5D:00.0 Off |                    0 |</span><br><span class="line">| N/A   27C    P0            117W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   4  NVIDIA H200                    On  |   00000000:9B:00.0 Off |                    0 |</span><br><span class="line">| N/A   27C    P0            114W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   5  NVIDIA H200                    On  |   00000000:BB:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            116W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   6  NVIDIA H200                    On  |   00000000:CB:00.0 Off |                    0 |</span><br><span class="line">| N/A   27C    P0            115W /  700W |   84522MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">|   7  NVIDIA H200                    On  |   00000000:DB:00.0 Off |                    0 |</span><br><span class="line">| N/A   26C    P0            114W /  700W |   84282MiB / 143771MiB |      1%      Default |</span><br><span class="line">|                                         |                        |             Disabled |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">                                                                                         </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                              |</span><br><span class="line">|  GPU   GI   CI              PID   Type   Process name                        GPU Memory |</span><br><span class="line">|        ID   ID                                                               Usage      |</span><br><span class="line">|=========================================================================================|</span><br><span class="line">|    0   N/A  N/A          915920      C   ...niconda3/envs/vllm/bin/python      84464MiB |</span><br><span class="line">|    1   N/A  N/A          916338      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    2   N/A  N/A          916339      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    3   N/A  N/A          916340      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    4   N/A  N/A          916341      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    5   N/A  N/A          916342      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    6   N/A  N/A          916343      C   ...niconda3/envs/vllm/bin/python      84512MiB |</span><br><span class="line">|    7   N/A  N/A          916344      C   ...niconda3/envs/vllm/bin/python      84272MiB |</span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><ul><li><p>log</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INFO 03-15 20:36:48 worker.py:267] Memory profiling takes 7.63 seconds</span><br><span class="line">INFO 03-15 20:36:48 worker.py:267] the current vLLM instance can use total_gpu_memory (139.81GiB) x gpu_memory_utilization (0.85) = 118.84GiB</span><br><span class="line">INFO 03-15 20:36:48 worker.py:267] model weights take 83.88GiB; non_torch_memory takes 7.16GiB; PyTorch activation peak memory takes 6.37GiB; the rest of the memory reserved </span><br><span class="line">for KV Cache is 21.43GiB.</span><br><span class="line">INFO 03-15 20:36:48 executor_base.py:111] # cuda blocks: 18418, # CPU blocks: 3437</span><br><span class="line">INFO 03-15 20:36:48 executor_base.py:116] Maximum concurrency for 128000 tokens per request: 2.30x</span><br></pre></td></tr></table></figure></li><li><p>chat</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:8000/v1/chat/completions \</span><br><span class="line">    -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">    -d &#x27;&#123;</span><br><span class="line">        &quot;model&quot;: &quot;deepseek-r1&quot;,</span><br><span class="line">        &quot;messages&quot;: [</span><br><span class="line">            &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;,</span><br><span class="line">            &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;introduce yourself&quot;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;&#x27;</span><br></pre></td></tr></table></figure></li></ul><h1 id="sglang"><a href="#sglang" class="headerlink" title="sglang"></a>sglang</h1><h2 id="install-offline-1"><a href="#install-offline-1" class="headerlink" title="install offline"></a>install offline</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> prepare env</span></span><br><span class="line">python3 -m venv sglang_env</span><br><span class="line">source sglang_env/bin/activate</span><br><span class="line"><span class="meta">#</span><span class="bash"> optional use uv</span></span><br><span class="line">pip install --upgrade pip</span><br><span class="line"><span class="meta">#</span><span class="bash">pip install uv</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> download deps</span></span><br><span class="line">mkdir -p ./sglang_deps</span><br><span class="line">pip download &quot;sglang[all]&gt;=0.4.4.post1&quot; --find-links https://flashinfer.ai/whl/cu124/torch2.5/flashinfer-python -d ./sglang_deps</span><br><span class="line"><span class="meta">#</span><span class="bash"> scp deps to remote</span></span><br><span class="line">scp -r sglang_deps user@remote_server:/path/to/destination/</span><br><span class="line"><span class="meta">#</span><span class="bash"> install sglang on remote</span></span><br><span class="line">cd /path/to/remote/sglang_deps</span><br><span class="line">pip install --no-index --find-links=. &quot;sglang[all]&gt;=0.4.4.post1&quot;</span><br></pre></td></tr></table></figure><h2 id="runtime"><a href="#runtime" class="headerlink" title="runtime"></a>runtime</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m sglang.launch_server --model /mnt/3fs/DeepSeek-R1 --tp 8 --trust-remote-code --port 30000</span><br></pre></td></tr></table></figure><ul><li><p>chat</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:30000/v1/chat/completions \</span><br><span class="line">    -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">    -d &#x27;&#123;</span><br><span class="line">        &quot;model&quot;: &quot;deepseek-r1&quot;,</span><br><span class="line">        &quot;messages&quot;: [</span><br><span class="line">            &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;,</span><br><span class="line">            &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;introduce yourself&quot;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;&#x27;</span><br></pre></td></tr></table></figure></li></ul><h1 id="torch"><a href="#torch" class="headerlink" title="torch"></a>torch</h1><h2 id="install-offline-2"><a href="#install-offline-2" class="headerlink" title="install offline"></a>install offline</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/torch_deps</span><br><span class="line">pip download --dest=~/torch_deps torch==2.5.1 --extra-index-url https://download.pytorch.org/whl/nightly/cu128</span><br><span class="line"></span><br><span class="line">scp -r ~/torch_deps user@remote_server:/path/to/remote/directory</span><br><span class="line">cd /path/to/remote/directory</span><br><span class="line">pip install --no-index --find-links=./ torch</span><br></pre></td></tr></table></figure><ul><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &quot;import torch; print(torch.cuda.is_available()); print(torch.cuda.device_count())&quot;</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())  <span class="comment"># print false</span></span><br><span class="line"><span class="built_in">print</span>(torch.cuda.device_count())  <span class="comment"># print 8</span></span><br><span class="line"><span class="built_in">print</span>(torch.__version__)  <span class="comment"># print 2.5.1+cu124</span></span><br><span class="line"><span class="built_in">print</span>(torch.version.cuda) <span class="comment"># print 12.4</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="best-practices"><a href="#best-practices" class="headerlink" title="best practices"></a>best practices</h1><h2 id="CUDA-LAUNCH-BLOCKING-1"><a href="#CUDA-LAUNCH-BLOCKING-1" class="headerlink" title="CUDA_LAUNCH_BLOCKING=1"></a><code>CUDA_LAUNCH_BLOCKING=1</code></h2><blockquote><p>CUDA_LAUNCH_BLOCKING=1 will tell CUDA: ‚ÄúWait (block) for each GPU kernel to finish before moving to the next line of Python code.‚Äù</p></blockquote><p>Normally, CUDA operations are <strong>asynchronous</strong>‚Äîerrors may not happen exactly where the code looks wrong, because the kernel may fail later. This can make debugging frustrating.</p><p>should never use it in production or performance benchmarking‚Äîjust for debugging.</p>]]></content>
      
      
      <categories>
          
          <category> cuda </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvidia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8s ctr</title>
      <link href="/2025/03/12/k8s%20ctr/"/>
      <url>/2025/03/12/k8s%20ctr/</url>
      
        <content type="html"><![CDATA[<h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check k8s image</span></span><br><span class="line">ctr --namespace k8s.io images list</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>network solution</title>
      <link href="/2025/03/10/network%20solution/"/>
      <url>/2025/03/10/network%20solution/</url>
      
        <content type="html"><![CDATA[<h1 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h1><h2 id="add-new-dns"><a href="#add-new-dns" class="headerlink" title="add new dns"></a>add new dns</h2><ul><li><p>method 1:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step1: vim /etc/systemd/resolved.conf</span></span><br><span class="line">[<span class="string">Resolve</span>]</span><br><span class="line"><span class="string">DNS=10.201.44.51</span> <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span>  <span class="comment"># new DNS</span></span><br><span class="line"><span class="string">FallbackDNS=127.0.0.53</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># step2: restart service</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">restart</span> <span class="string">systemd-resolved</span></span><br></pre></td></tr></table></figure></li><li><p>method2: (ÊúâÊó∂ÂÄô‰∏çËµ∑Êïà)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">vim</span> <span class="string">/etc/resolv.conf</span></span><br><span class="line"><span class="comment"># Ê≥®ÊÑèÔºöÊ∑ªÂä†ÁöÑdnsËß£ÊûêÂú∞ÂùÄÔºåÈúÄË¶ÅÊîæÂú®ÂâçÈù¢Ôºå‰ºöÊúâÈ°∫Â∫èÂΩ±Âìç</span></span><br><span class="line"></span><br><span class="line"><span class="string">nameserver</span> <span class="number">10.201</span><span class="number">.44</span><span class="number">.51</span>  <span class="comment"># new DNS</span></span><br><span class="line"><span class="string">nameserver</span> <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span><span class="comment"># new DNS</span></span><br><span class="line"><span class="string">nameserver</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.53</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="network"><a href="#network" class="headerlink" title="network"></a>network</h1><h2 id="create-new-network"><a href="#create-new-network" class="headerlink" title="create new network"></a>create new network</h2><p>step1: vim <code>/etc/netplan/ib.yaml</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: networkd</span><br><span class="line">  ethernets:</span><br><span class="line">    ibp27s0:</span><br><span class="line">      dhcp4: no</span><br><span class="line">      addresses:</span><br><span class="line">        - 192.168.2.52/21</span><br></pre></td></tr></table></figure><p>step2: <code>netplan apply</code></p><h1 id="bond"><a href="#bond" class="headerlink" title="bond"></a>bond</h1><h2 id="create-bond"><a href="#create-bond" class="headerlink" title="create bond"></a>create bond</h2><p>Bonding Mode</p><table><thead><tr><th>Mode</th><th>Max Speed (Single Flow)</th><th>Max Speed (Multiple Flows)</th><th>Key Feature</th></tr></thead><tbody><tr><td>mode=0 (round-robin)</td><td>Sum of all slaves</td><td>Sum of all slaves</td><td>Best for maximizing bandwidth, may cause out-of-order packets.</td></tr><tr><td>mode=1 (active-backup)</td><td>One interface‚Äôs speed</td><td>One interface‚Äôs speed</td><td>Best for redundancy, no speed gain.</td></tr><tr><td>mode=2 (balance-xor)</td><td>One interface‚Äôs speed</td><td>Sum of all slaves</td><td>Good for performance; switch support required.</td></tr><tr><td>mode=4 (802.3ad - LACP)</td><td>One interface‚Äôs speed</td><td>Sum of all slaves</td><td>Efficient load balancing for multiple flows; requires switch support.</td></tr><tr><td>mode=5 (balance-tlb)</td><td>One interface‚Äôs speed</td><td>Sum of all slaves (outgoing only)</td><td>Adaptive transmit load balancing.</td></tr><tr><td>mode=6 (balance-alb)</td><td>One interface‚Äôs speed</td><td>Sum of all slaves</td><td>Adaptive load balancing without switch support.</td></tr></tbody></table><blockquote><p> assume make ib7s400p0 to bond1, which have assigned  ip 172.30.12.46 with ib7s400p0</p></blockquote><p><strong>optional</strong>: Load the Bonding Kernel Module</p><p>Ensure the bonding driver is loaded:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe bonding</span><br></pre></td></tr></table></figure><p>To persist this across reboots:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;bonding&quot; | sudo tee /etc/modules-load.d/bonding.conf</span><br></pre></td></tr></table></figure><p><strong>optional</strong>: Remove the IP Address from ib7s400p0</p><p>Since the bond interface will carry the IP, you must remove the IP from ib7s400p0 first:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip addr del 172.30.12.61/24 dev ib7s400p0</span><br></pre></td></tr></table></figure><p><strong>Step 2: Create the Bond Interface (bond1)</strong></p><p>Create the bond interface:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip link add bond1 type bond</span><br></pre></td></tr></table></figure><p><strong>Step 3: Configure Bonding Mode</strong></p><p>For your use case, you can set mode=active-backup (best for redundancy with one NIC now) or mode=802.3ad (if planning for LACP in the future).</p><p><strong>Set Active-Backup Mode (Recommended for 1 NIC Now)</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;active-backup&quot; | sudo tee /sys/class/net/bond1/bonding/mode</span><br></pre></td></tr></table></figure><p><strong>OR Set 802.3ad Mode (If Future Expansion is Planned)</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;802.3ad&quot; | sudo tee /sys/class/net/bond1/bonding/mode</span><br></pre></td></tr></table></figure><p><strong>Step 4: Add ib7s400p0 as a Slave</strong></p><ol><li>Remove any IP address from ib7s400p0 (if it has one):</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip addr flush dev ib7s400p0</span><br></pre></td></tr></table></figure><ol start="2"><li>Add ib7s400p0 to bond1:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ip link set ib7s400p0 down</span><br><span class="line">sudo ip link set ib7s400p0 master bond1</span><br><span class="line">sudo ip link set ib7s400p0 up</span><br></pre></td></tr></table></figure><blockquote><p>check: ethtool ib7s400p0</p></blockquote><ol start="3"><li>Bring bond1 up:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip link set bond1 up</span><br></pre></td></tr></table></figure><blockquote><p>check: cat /proc/net/bonding/bond1</p></blockquote><p><strong>Step 5: Assign an IP Address</strong></p><p>If using a <strong>static IP</strong>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip addr add 172.30.12.61/24 dev bond1</span><br></pre></td></tr></table></figure><p>Or if using <strong>DHCP</strong>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dhclient bond1</span><br></pre></td></tr></table></figure><p>Try to force traffic through bond1 by removing the direct route through ib7s400p0</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route del 172.30.12.0/24 dev ib7s400p0</span><br></pre></td></tr></table></figure><p><strong>Step 6: Persistent Configuration (Rocky 9 / RHEL 9) (optional)</strong></p><p>To ensure the bond configuration persists after reboot:</p><ol><li>Create <code>/etc/sysconfig/network-scripts/ifcfg-bond1</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=bond1</span><br><span class="line">TYPE=Bond</span><br><span class="line">BONDING_MASTER=yes</span><br><span class="line">BOOTPROTO=dhcp      # Or use &#x27;static&#x27; if assigning a static IP</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BONDING_OPTS=&quot;mode=active-backup miimon=100&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>Create <code>/etc/sysconfig/network-scripts/ifcfg-ib7s400p0</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=ib7s400p0</span><br><span class="line">MASTER=bond1</span><br><span class="line">SLAVE=yes</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br></pre></td></tr></table></figure><ol start="3"><li>Restart NetworkManager to apply changes:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><p><strong>Step 7: Verify Configuration</strong></p><ol><li>Check bond details:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/net/bonding/bond1</span><br></pre></td></tr></table></figure><p>ib7s400p0 should now appear as a <strong>Slave Interface</strong>.</p><ol start="2"><li>Confirm IP address and route:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip a</span><br><span class="line">ip route</span><br></pre></td></tr></table></figure><ol start="3"><li>Test connectivity:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 172.30.12.47 # other same bond addr</span><br></pre></td></tr></table></figure><p><strong>Step 8: Optional - Test Failover (For active-backup Mode)</strong></p><p>‚Äã    1.    Temporarily bring down ib7s400p0:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip link set ib7s400p0 down</span><br></pre></td></tr></table></figure><p>‚Äã    2.    Check bond1 status:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/net/bonding/bond1</span><br></pre></td></tr></table></figure><p>In active-backup mode, bond1 should remain active (even though ib7s400p0 is down).</p><p>In 802.3ad mode, bond1 would go down since no alternate NIC exists yet.</p><p><strong>Summary</strong></p><p>Use <strong>active-backup</strong> mode if ib7s400p0 is the only slave (recommended now).</p><p>Use <strong>802.3ad</strong> if planning to add more NICs for higher throughput in the future.</p><p>Ensure <code>/etc/sysconfig/network-scripts/</code> configs are properly set for persistence.</p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solution </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>llm vllm</title>
      <link href="/2025/03/06/llm%20vllm/"/>
      <url>/2025/03/06/llm%20vllm/</url>
      
        <content type="html"><![CDATA[<h1 id="route"><a href="#route" class="headerlink" title="route"></a>route</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">INFO llm_engine.py:436] init engine (profile, create kv cache, warmup model) took 135.23 seconds</span><br><span class="line">INFO api_server.py:958] Starting vLLM API server on http://0.0.0.0:8000</span><br><span class="line">Available routes are:</span><br><span class="line"> Route: /openapi.json, Methods: GET, HEAD</span><br><span class="line"> Route: /docs, Methods: GET, HEAD</span><br><span class="line"> Route: /docs/oauth2-redirect, Methods: GET, HEAD</span><br><span class="line"> Route: /redoc, Methods: GET, HEAD</span><br><span class="line"> Route: /health, Methods: GET</span><br><span class="line"> Route: /ping, Methods: GET, POST</span><br><span class="line"> Route: /tokenize, Methods: POST</span><br><span class="line"> Route: /detokenize, Methods: POST</span><br><span class="line"> Route: /v1/models, Methods: GET</span><br><span class="line"> Route: /version, Methods: GET</span><br><span class="line"> Route: /v1/chat/completions, Methods: POST</span><br><span class="line"> Route: /v1/completions, Methods: POST</span><br><span class="line"> Route: /v1/embeddings, Methods: POST</span><br><span class="line"> Route: /pooling, Methods: POST</span><br><span class="line"> Route: /score, Methods: POST</span><br><span class="line"> Route: /v1/score, Methods: POST</span><br><span class="line"> Route: /v1/audio/transcriptions, Methods: POST</span><br><span class="line"> Route: /rerank, Methods: POST</span><br><span class="line"> Route: /v1/rerank, Methods: POST</span><br><span class="line"> Route: /v2/rerank, Methods: POST</span><br><span class="line"> Route: /invocations, Methods: POST</span><br><span class="line">INFO:     Started server process [1]</span><br><span class="line">INFO:     Waiting for application startup.</span><br><span class="line">INFO:     Application startup complete.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> llm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sinppet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes RBAC</title>
      <link href="/2025/03/01/kubernetes%20RBAC/"/>
      <url>/2025/03/01/kubernetes%20RBAC/</url>
      
        <content type="html"><![CDATA[<blockquote><p>RBAC (Role-Based Access Control) in Kubernetes is a security model that controls who can access and perform actions on resources (like Pods, Deployments, Services, etc.) within a cluster.</p></blockquote><h1 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h1><p>Kubernetes RBAC consists of four main components:</p><table><thead><tr><th>Component</th><th>Description</th></tr></thead><tbody><tr><td>Role / ClusterRole</td><td>Defines what actions (verbs) can be performed on which resources.</td></tr><tr><td>RoleBinding / ClusterRoleBinding</td><td>Grants a Role or ClusterRole to a User, Group, or ServiceAccount.</td></tr><tr><td>Subjects (Users, Groups, ServiceAccounts)</td><td>Who is allowed to perform actions (User, Group, or ServiceAccount).</td></tr><tr><td>Resources &amp; API Groups</td><td>The objects that can be controlled (e.g., pods, deployments, services, etc.).</td></tr></tbody></table><h2 id="Role-amp-ClusterRole"><a href="#Role-amp-ClusterRole" class="headerlink" title="Role &amp; ClusterRole"></a>Role &amp; ClusterRole</h2><blockquote><p>RBAC defines what actions can be performed on which resources using Roles and ClusterRoles.</p></blockquote><h3 id="Role"><a href="#Role" class="headerlink" title="Role"></a>Role</h3><blockquote><p>A Role is used for namespace-scoped access control.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-namespace</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br></pre></td></tr></table></figure><p>‚úÖ This Role allows a user to view (get, list, watch) Pods only in the namespace my-namespace.</p><p>‚ùå This does not grant access to other namespaces.</p><h3 id="ClusterRole"><a href="#ClusterRole" class="headerlink" title="ClusterRole"></a>ClusterRole</h3><blockquote><p> A ClusterRole is used for cluster-wide permissions or permissions across all namespaces.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cluster-pod-reader</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br></pre></td></tr></table></figure><p>‚úÖ This allows viewing (get, list, watch) Pods in all namespaces.</p><h2 id="RoleBinding-amp-ClusterRoleBinding"><a href="#RoleBinding-amp-ClusterRoleBinding" class="headerlink" title="RoleBinding &amp; ClusterRoleBinding"></a>RoleBinding &amp; ClusterRoleBinding</h2><blockquote><p>Who Gets These Permissions?</p></blockquote><h3 id="RoleBinding"><a href="#RoleBinding" class="headerlink" title="RoleBinding"></a>RoleBinding</h3><blockquote><p>A RoleBinding assigns a Role to a specific user, group, or ServiceAccount in a namespace.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader-binding</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-namespace</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-user</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><p>‚úÖ This binds the pod-reader Role to my-user in the my-namespace namespace.</p><p>‚ùå It does not grant permissions outside my-namespace.</p><h3 id="ClusterRoleBinding"><a href="#ClusterRoleBinding" class="headerlink" title="ClusterRoleBinding"></a>ClusterRoleBinding</h3><blockquote><p>A ClusterRoleBinding assigns a ClusterRole to a User, Group, or ServiceAccount across all namespaces.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cluster-pod-reader-binding</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-user</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cluster-pod-reader</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><p>‚úÖ This grants my-user access to Pods across all namespaces.</p><h2 id="Subjects"><a href="#Subjects" class="headerlink" title="Subjects"></a>Subjects</h2><blockquote><p>A RoleBinding or ClusterRoleBinding grants permissions to a subject, which can be:</p></blockquote><table><thead><tr><th>Subject Type</th><th>Description</th></tr></thead><tbody><tr><td>User</td><td>A real human user (external identity).</td></tr><tr><td>Group</td><td>A group of users (e.g., dev-team).</td></tr><tr><td>ServiceAccount</td><td>An internal Kubernetes identity for a Pod or Controller.</td></tr></tbody></table><p>Example: Binding a ServiceAccount (my-sa) to a Role</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-sa</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-namespace</span></span><br></pre></td></tr></table></figure><h2 id="API-Groups-amp-Resources"><a href="#API-Groups-amp-Resources" class="headerlink" title="API Groups &amp; Resources"></a>API Groups &amp; Resources</h2><p>Each RBAC rule specifies which resources in which API groups can be accessed.</p><table><thead><tr><th>API Group</th><th>Resources Example</th></tr></thead><tbody><tr><td>‚Äú‚Äù (core)</td><td>pods, services, nodes</td></tr><tr><td>apps</td><td>deployments, daemonsets</td></tr><tr><td>batch</td><td>jobs, cronjobs</td></tr><tr><td>rbac.authorization.k8s.io</td><td>roles, rolebindings, clusterroles, clusterrolebindings</td></tr></tbody></table><p>Example: Allow Access to Pods, Deployments, and Nodes</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>, <span class="string">&quot;services&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;apps&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;deployments&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;nodes&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>]</span><br></pre></td></tr></table></figure><p>‚úÖ Allows reading Pods and Services (core API group).</p><p>‚úÖ Allows reading Deployments (apps API group).</p><p>‚úÖ Allows reading Nodes (core API group).</p><h1 id="Works-Scenario"><a href="#Works-Scenario" class="headerlink" title="Works Scenario"></a>Works Scenario</h1><h2 id="Scenario-1"><a href="#Scenario-1" class="headerlink" title="Scenario 1"></a>Scenario 1</h2><p>Use Case:</p><ul><li><p>A user (dev-user) needs read-only access to Pods in the dev namespace.</p></li><li><p>The ServiceAccount (cicd-runner-sa) needs to create Deployments in the cicd namespace.</p></li></ul><p>Solution: Define the RBAC Rules</p><ol><li>Create a Role for Read-Only Pod Access in dev Namespace</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br></pre></td></tr></table></figure><ol start="2"><li>Bind the Role to dev-user in dev Namespace</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader-binding</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dev-user</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-reader</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><ol start="3"><li>Create a Role for cicd-runner-sa to Deploy Apps in cicd Namespace</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">deployment-creator</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">cicd</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;apps&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;deployments&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;delete&quot;</span>]</span><br></pre></td></tr></table></figure><ol start="4"><li>Bind the Role to the cicd-runner-sa ServiceAccount</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicd-runner-binding</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">cicd</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicd-runner-sa</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">cicd</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">deployment-creator</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><h2 id="Scenario-2"><a href="#Scenario-2" class="headerlink" title="Scenario 2"></a>Scenario 2</h2><p>Scenario: Grant Read-Only Access to Pods Across Multiple Namespaces</p><p>Use Case:</p><ul><li><p>A developer team needs read-only access to Pods in multiple namespaces (dev, staging, prod).</p></li><li><p>Instead of creating separate Roles in each namespace, we use one ClusterRole.</p></li><li><p>We then create RoleBindings in each namespace to assign the ClusterRole.</p></li></ul><ol><li>Create a ClusterRole to Read Pods Across Namespaces</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">multi-namespace-pod-reader</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br></pre></td></tr></table></figure><ol start="2"><li>Bind the ClusterRole to a User for Multiple Namespaces</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">multi-namespace-pod-reader-binding</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">developer-user</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">multi-namespace-pod-reader</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><h1 id="Recap"><a href="#Recap" class="headerlink" title="Recap"></a>Recap</h1><p>Key Takeaways from Kubernetes RBAC Architecture</p><ol><li><p>Role / ClusterRole ‚Üí Defines permissions (what actions are allowed?).</p></li><li><p>RoleBinding / ClusterRoleBinding ‚Üí Assigns permissions (who gets access?).</p></li><li><p>Subjects ‚Üí Users, Groups, ServiceAccounts (who is authorized?).</p></li><li><p>API Groups ‚Üí Determines resources that can be controlled.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RBAC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>podman snippet</title>
      <link href="/2025/02/10/podman%20snippet/"/>
      <url>/2025/02/10/podman%20snippet/</url>
      
        <content type="html"><![CDATA[<blockquote><p>‰∏çÂêåÁî®Êà∑‰∏ãÊâßË°å <code>podman ps</code>ÔºåÂè™ËÉΩÊü•ÁúãÂΩìÂâçÁî®Êà∑ÁöÑËøêË°åÂÆπÂô®ÔºàÂç≥‰ΩøÊòØrootÁî®Êà∑Ôºå‰πü‰∏çËÉΩÊü•ÁúãÂÖ∂‰ªñÊôÆÈÄöÁî®Êà∑ÂêØÁî®ÁöÑÂÆπÂô®‰ø°ÊÅØÔºâ</p></blockquote><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> load tar file to image</span></span><br><span class="line">podman load -i &lt;image-tar-file&gt;</span><br></pre></td></tr></table></figure><h1 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h1><h2 id="change-default-data-dir"><a href="#change-default-data-dir" class="headerlink" title="change default data dir"></a>change default data dir</h2><ul><li><p><strong>rootful mode</strong> </p><blockquote><p>Default graphroot: /var/lib/containers/storage.</p></blockquote></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check</span></span><br><span class="line">podman info | grep &#x27;GraphRoot&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Edit Podman‚Äôs Storage Configuration</span></span><br><span class="line">sudo mkdir -p /etc/containers</span><br><span class="line">sudo vim /etc/containers/storage.conf </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> edit storage.conf</span></span><br><span class="line">[storage]</span><br><span class="line">driver = &quot;overlay&quot;</span><br><span class="line">graphroot = &quot;//mnt/podman-data&quot;</span><br></pre></td></tr></table></figure><ul><li><p><strong>rootless mode</strong></p><blockquote><p>Default graphroot: ~/.local/share/containers/storage.</p></blockquote></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check</span></span><br><span class="line">podman info | grep &#x27;GraphRoot&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Edit Podman‚Äôs Storage Configuration</span></span><br><span class="line">sudo mkdir -p ~/.config/containers</span><br><span class="line">sudo vim ~/.config/containers/storage.conf  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> edit storge.conf</span></span><br><span class="line">[storage]</span><br><span class="line">driver = &quot;overlay&quot;</span><br><span class="line">graphroot = &quot;/mnt/podman-data&quot;</span><br></pre></td></tr></table></figure><h2 id="potentially-insufficient-UIDs-or-GIDs-available-in-user-namespace"><a href="#potentially-insufficient-UIDs-or-GIDs-available-in-user-namespace" class="headerlink" title="potentially insufficient UIDs or GIDs available in user namespace"></a>potentially insufficient UIDs or GIDs available in user namespace</h2><blockquote><p> If the requested UID/GID still falls outside or Podman needs more mappings, you can edit /etc/subuid and /etc/subgid (as root) to increase the range</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Increase UID/GID Range (Optional):</span></span><br><span class="line">sudo vim /etc/subuid  # dingofs:60000:131072</span><br><span class="line">sudo vim /etc/subgid  # dingofs:60000:131072</span><br><span class="line"></span><br><span class="line">podman system migrate</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> podman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph rados</title>
      <link href="/2025/02/08/ceph%20rados/"/>
      <url>/2025/02/08/ceph%20rados/</url>
      
        <content type="html"><![CDATA[<p>The <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-Storage-Cluster">Ceph Storage Cluster</a> provides the basic storage service that allows <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph">Ceph</a> to uniquely deliver <strong>object, block, and file storage</strong> in one unified system. However, you are not limited to using the RESTful, block, or POSIX interfaces. Based upon RADOS, the <code>librados</code> API enables you to create your own interface to the Ceph Storage Cluster.</p><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list objects by specify pool</span></span><br><span class="line">rados -p &lt;pool-name&gt; ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">read</span> object</span></span><br><span class="line">rados -p &lt;pool-name&gt; get &lt;object-name&gt; output.txt</span><br><span class="line">cat output.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check xattr value</span></span><br><span class="line">rados -p &lt;pool-name&gt; getxattr &lt;object-name&gt; &lt;xattr-key&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> storage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph deploy</title>
      <link href="/2025/02/07/ceph%20deploy/"/>
      <url>/2025/02/07/ceph%20deploy/</url>
      
        <content type="html"><![CDATA[<h1 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h1><h2 id="install-cephadm"><a href="#install-cephadm" class="headerlink" title="install cephadm"></a>install cephadm</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dnf search release-ceph</span><br><span class="line">dnf install --assumeyes centos-release-ceph-reef</span><br><span class="line">dnf install --assumeyes cephadm</span><br></pre></td></tr></table></figure><ul><li><p>enable ceph cli</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cephadm add-repo --release reef</span><br><span class="line">cephadm install ceph-common</span><br></pre></td></tr></table></figure></li></ul><h2 id="booststrap"><a href="#booststrap" class="headerlink" title="booststrap"></a>booststrap</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cephadm bootstrap --mon-ip 172.20.7.232</span><br></pre></td></tr></table></figure><ul><li>log<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Ceph Dashboard is now available at:</span><br><span class="line">        URL: https://dingo7232.com:8443/</span><br><span class="line">        User: admin</span><br><span class="line">    Password: &lt;password&gt;</span><br><span class="line">Enabling client.admin keyring and conf on hosts with &quot;admin&quot; label</span><br><span class="line">Saving cluster configuration to /var/lib/ceph/6a65c746-e532-11ef-8ac2-fa7c097efb00/config directory</span><br><span class="line">Enabling autotune for osd_memory_target</span><br><span class="line">You can access the Ceph CLI as following in case of multi-cluster or non-default config:</span><br><span class="line"></span><br><span class="line">        sudo /sbin/cephadm shell --fsid 6a65c746-e532-11ef-8ac2-fa7c097efb00 -c /etc/ceph/ceph.conf -k /etc/ceph/ceph.client.admin.keyring</span><br><span class="line"></span><br><span class="line">Or, if you are only running a single cluster on this host:</span><br><span class="line"></span><br><span class="line">        sudo /sbin/cephadm shell</span><br><span class="line"></span><br><span class="line">Please consider enabling telemetry to help improve Ceph:</span><br><span class="line"></span><br><span class="line">        ceph telemetry on</span><br><span class="line"></span><br><span class="line">For more information see:</span><br><span class="line"></span><br><span class="line">        https://docs.ceph.com/en/latest/mgr/telemetry/</span><br><span class="line"></span><br><span class="line">Bootstrap complete.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="add-hosts"><a href="#add-hosts" class="headerlink" title="add hosts"></a>add hosts</h2><ul><li><p>Install the cluster‚Äôs public SSH key in the new host‚Äôs root user‚Äôs authorized_keys file:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -f -i /etc/ceph/ceph.pub root@dingo7233</span><br><span class="line">ssh-copy-id -f -i /etc/ceph/ceph.pub root@dingo7234</span><br></pre></td></tr></table></figure></li><li><p>Tell Ceph that the new node is part of the cluster</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ceph orch host add *&lt;newhost&gt;* [*&lt;ip&gt;*] [*&lt;label1&gt; ...*]</span></span><br><span class="line">ceph orch host add dingo7233 172.20.7.233</span><br><span class="line">ceph orch host add dingo7234 172.20.7.234</span><br><span class="line">or</span><br><span class="line">ceph orch host add dingo7233 172.20.7.233 --labels _admin</span><br><span class="line">ceph orch host add dingo7234 172.20.7.234 --labels _admin</span><br></pre></td></tr></table></figure></li><li><p>add label (optional)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ceph orch host label add dingo7233 _admin</span><br><span class="line">ceph orch host label add dingo7234 _admin</span><br></pre></td></tr></table></figure></li><li><p>list hosts</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph orch host ls --detail</span><br></pre></td></tr></table></figure></li></ul><h2 id="add-storage"><a href="#add-storage" class="headerlink" title="add storage"></a>add storage</h2><ul><li><p>check available devices</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph orch device ls</span><br></pre></td></tr></table></figure></li><li><p>apply osd</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph orch apply osd --all-available-devices</span><br></pre></td></tr></table></figure></li></ul><h1 id="check"><a href="#check" class="headerlink" title="check"></a>check</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ceph status</span></span><br><span class="line">cluster:</span><br><span class="line">    id:     6a65c746-e532-11ef-8ac2-fa7c097efb00</span><br><span class="line">    health: HEALTH_WARN</span><br><span class="line">            1 mgr modules have recently crashed</span><br><span class="line"></span><br><span class="line">  services:</span><br><span class="line">    mon: 3 daemons, quorum dingo7232,dingo7234,dingo7233 (age 16m)</span><br><span class="line">    mgr: dingo7232.znvodw(active, since 24m), standbys: dingo7234.yenqrt</span><br><span class="line">    osd: 3 osds: 3 up (since 15m), 3 in (since 15m)</span><br><span class="line"></span><br><span class="line">  data:</span><br><span class="line">    pools:   1 pools, 1 pgs</span><br><span class="line">    objects: 2 objects, 449 KiB</span><br><span class="line">    usage:   81 MiB used, 600 GiB / 600 GiB avail</span><br><span class="line">    pgs:     1 active+clean</span><br></pre></td></tr></table></figure><h1 id="thouble-shooting"><a href="#thouble-shooting" class="headerlink" title="thouble shooting"></a>thouble shooting</h1><h2 id="redeploy-cluster"><a href="#redeploy-cluster" class="headerlink" title="redeploy cluster"></a>redeploy cluster</h2><p>To remove an existing Ceph cluster deployed using <code>cephadm</code> and redeploy a new one, follow these steps:</p><ul><li>Step 1: Stop All Ceph Services</li></ul><p>First, stop all Ceph services on each host in the cluster.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop ceph.target</span><br></pre></td></tr></table></figure><ul><li>Step 2: Remove Ceph Configuration and Data</li></ul><p>Remove the Ceph configuration and data directories.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /etc/ceph</span><br><span class="line">sudo rm -rf /var/lib/ceph</span><br><span class="line">sudo rm -rf /var/<span class="built_in">log</span>/ceph</span><br></pre></td></tr></table></figure><ul><li><p>Step 3: deploy as below words</p></li><li><p>Step 4: Verify Cluster Health</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph -s</span><br></pre></td></tr></table></figure></li></ul><p>If you encounter any issues during the redeployment, check the logs:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo journalctl -u ceph-* -f</span><br></pre></td></tr></table></figure><p>Or check the Ceph logs directly:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo less /var/<span class="built_in">log</span>/ceph/ceph.log</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> deploy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux A vs B</title>
      <link href="/2025/01/22/linux%20A%20vs%20B/"/>
      <url>/2025/01/22/linux%20A%20vs%20B/</url>
      
        <content type="html"><![CDATA[<h1 id="Systemd-limits-vs-PAM-limits"><a href="#Systemd-limits-vs-PAM-limits" class="headerlink" title="Systemd limits vs PAM limits"></a>Systemd limits vs PAM limits</h1><p><strong>Systemd limits</strong> and <strong>PAM limits</strong> are two different ways of configuring resource limits in Linux. They control aspects like <strong>open file limits (<strong>nofile</strong>)</strong>, <strong>memory</strong>, and <strong>CPU usage</strong>, but they work at different levels of the system.</p><h2 id="PAM-Limits"><a href="#PAM-Limits" class="headerlink" title="PAM Limits"></a>PAM Limits</h2><p>PAM (Pluggable Authentication Module) sets limits when <strong>a user logs in</strong> via <strong>SSH, TTY, or GUI login</strong>. It does <strong>not</strong> apply to system services. </p><p><strong>Configuration:</strong></p><ul><li><p>/etc/security/limits.conf</p></li><li><p>/etc/security/limits.d/*.conf</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Example (/etc/security/limits.conf or /etc/security/limits.d/custom.conf):**</span></span><br><span class="line">dongw soft nofile 65535</span><br><span class="line">dongw hard nofile 65535</span><br></pre></td></tr></table></figure><p><strong>Limitations of PAM:</strong></p><ul><li><p>Only affects interactive logins (TTY, SSH, GUI).</p></li><li><p>Does <strong>not</strong> apply to systemd-managed services.</p></li></ul><h2 id="Systemd-Limits"><a href="#Systemd-Limits" class="headerlink" title="Systemd Limits"></a>Systemd Limits</h2><p>Systemd sets limits <strong>for system services and user sessions</strong>. It applies to <strong>both login sessions and system services</strong>, making it more powerful than PAM.</p><p><strong>Configuration:</strong></p><ul><li><p><strong>Global (for all services and users)</strong>:</p></li><li><p>/etc/systemd/system.conf (system-wide limits)</p></li><li><p>/etc/systemd/user.conf (per-user session limits)</p></li><li><p><strong>Per-service limits</strong> (for specific services):</p></li><li><p>/etc/systemd/system/<service>.service</p></li></ul><h3 id="Global-Limits"><a href="#Global-Limits" class="headerlink" title="Global Limits"></a>Global Limits</h3><p>Applies to <strong>all</strong> processes managed by systemd. (/etc/systemd/system.conf or /etc/systemd/user.conf)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefaultLimitNOFILE=65535</span><br></pre></td></tr></table></figure><h3 id="Per-Service-Limits"><a href="#Per-Service-Limits" class="headerlink" title="Per-Service Limits"></a>Per-Service Limits</h3><p> This applies to only on specify service. (e.g. /etc/systemd/system/myservice.service)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">LimitNOFILE=65535</span><br></pre></td></tr></table></figure><p><strong>Advantages of Systemd Limits:</strong></p><ul><li><p>Affects <strong>both user logins and system services</strong>.</p></li><li><p>Ensures limits persist across <strong>system reboots</strong>.</p></li><li><p>More reliable for applications like Ceph, Docker, and databases.</p></li></ul><h2 id="Comparison-Table"><a href="#Comparison-Table" class="headerlink" title="Comparison Table"></a><strong>Comparison Table</strong></h2><table><thead><tr><th align="left"><strong>Feature</strong></th><th><strong>PAM Limits (<code>limits.conf</code>)</strong></th><th><strong>Systemd Limits (<code>system.conf</code>/<code>.service</code>)</strong></th></tr></thead><tbody><tr><td align="left">Applies to interactive users</td><td>‚úÖ Yes (SSH, TTY, GUI)</td><td>‚úÖ Yes</td></tr><tr><td align="left">Applies to system services</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr><tr><td align="left">Persists across reboots</td><td>‚úÖ Yes</td><td>‚úÖ Yes</td></tr><tr><td align="left">Easy to configure</td><td>‚úÖ Yes</td><td>‚úÖ Yes</td></tr><tr><td align="left">Best for tuning servers</td><td>‚ö†Ô∏è  Partial</td><td>‚úÖ Yes</td></tr></tbody></table><ul><li><p><strong>For interactive user sessions</strong> ‚Üí Use <strong>PAM (<strong>limits.conf</strong>)</strong>.</p></li><li><p><strong>For system services and all users</strong> ‚Üí Use <strong>Systemd (<strong>system.conf</strong>,</strong> .service**)**.</p></li><li><p><strong>For the best persistence and reliability</strong>, configure <strong>both</strong>.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A vs B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux tune</title>
      <link href="/2025/01/21/linux%20tune/"/>
      <url>/2025/01/21/linux%20tune/</url>
      
        <content type="html"><![CDATA[<h1 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h1><h2 id="governor-strategy"><a href="#governor-strategy" class="headerlink" title="governor strategy"></a>governor strategy</h2><ul><li><p>Check Available CPU Governors</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Run the following <span class="built_in">command</span> to check available CPU governors:</span></span><br><span class="line">cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> You should see something like below info:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> conservative ondemand userspace powersave performance schedutil</span></span><br></pre></td></tr></table></figure></li><li><p>Check Current CPU Governor</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor</span><br><span class="line">or</span><br><span class="line">cpupower frequency-info --policy # should install cpupower command by &#x27;sudo dnf install kernel-tools -y&#x27;</span><br></pre></td></tr></table></figure></li><li><p>Set CPU Governor to Performance temporarily</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To temporarily <span class="built_in">set</span> the CPU governor to performance (until reboot):</span></span><br><span class="line">for cpu in /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor; do</span><br><span class="line">  echo performance | sudo tee $cpu</span><br><span class="line">done</span><br></pre></td></tr></table></figure></li><li><p>Set CPU Governor Persistent</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> First, install cpupower:</span></span><br><span class="line">sudo dnf install kernel-tools -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Then, <span class="built_in">set</span> the governor:</span></span><br><span class="line">sudo cpupower frequency-set -g performance</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To apply this setting at boot, <span class="built_in">enable</span> the service:</span></span><br><span class="line">sudo systemctl enable --now cpupower.service</span><br></pre></td></tr></table></figure></li></ul><h1 id="nvme"><a href="#nvme" class="headerlink" title="nvme"></a>nvme</h1><h2 id="I-O-scheduler"><a href="#I-O-scheduler" class="headerlink" title="I/O scheduler"></a>I/O scheduler</h2><ul><li><p>check current scheduler pattern</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /sys/block/nvme[01]\*/queue/scheduler</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> console <span class="built_in">print</span> below info</span></span><br><span class="line">none [mq-deadline] kyber bfq</span><br></pre></td></tr></table></figure><p>The <strong>scheduler currently in use</strong> is indicated by the square brackets [ ].</p><p><strong>Common NVMe I/O Schedulers</strong></p><ol><li><p><strong>none</strong> ‚Äì Default for NVMe, provides minimal latency.</p></li><li><p><strong>mq-deadline</strong> ‚Äì Multi-queue deadline scheduler, balances fairness and performance.</p></li><li><p><strong>kyber</strong> ‚Äì Optimized for high-performance SSDs.</p></li><li><p><strong>bfq</strong> ‚Äì Budget Fair Queueing, useful for low-latency workloads.</p></li></ol></li><li><p>Change the I/O Scheduler</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To <span class="built_in">set</span> the none scheduler <span class="keyword">for</span> nvme0n1, use:</span></span><br><span class="line">echo none | sudo tee /sys/block/nvme0n1/queue/scheduler</span><br></pre></td></tr></table></figure><p><strong>When to Change the Scheduler?</strong></p><ul><li><p>Use none <strong>(default)</strong> if latency is the priority (most NVMe drives handle queuing internally).</p></li><li><p>Use mq-deadline if fairness in I/O operations is needed.</p></li><li><p>Use kyber for workloads requiring fast response time.</p></li><li><p>Use bfq for interactive desktop workloads.</p></li></ul></li></ul><h1 id="ulimit"><a href="#ulimit" class="headerlink" title="ulimit"></a>ulimit</h1><h2 id="open-file-size"><a href="#open-file-size" class="headerlink" title="open file size"></a>open file size</h2><blockquote><p>To configure the <strong>maximum open file size</strong> (ulimit) for a specific user </p></blockquote><ul><li><p>Check Current Limits</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To see the current limits <span class="keyword">for</span> a user:</span></span><br><span class="line">ulimit -n # Check open file limit</span><br><span class="line">ulimit -a # Check all limits</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To check system-wide limits:</span></span><br><span class="line">cat /proc/sys/fs/file-max</span><br></pre></td></tr></table></figure></li><li><p>Set Open File Limits for a Specific User</p><blockquote><p>The changes in limits.conf are only applied to new login sessions</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/security/limits.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add the following lines (replace username with the actual user):</span></span><br><span class="line">username soft nofile 65535</span><br><span class="line">username hard nofile 65535</span><br></pre></td></tr></table></figure></li></ul><p>‚Äã    <strong>soft</strong>: The default limit the user gets.</p><p>‚Äã    <strong>hard</strong>: The maximum limit a user can set.</p><table><thead><tr><th>Feature</th><th>/etc/security/limits.conf</th><th>/etc/security/limits.d/*.conf</th></tr></thead><tbody><tr><td><strong>Default File</strong></td><td>Yes</td><td>No (Custom files in limits.d directory)</td></tr><tr><td><strong>Priority</strong></td><td>Read first</td><td>Read after limits.conf</td></tr><tr><td><strong>Organization</strong></td><td>All rules in one file</td><td>Modular approach, one file per service or user</td></tr><tr><td><strong>Example</strong></td><td><code>* soft nofile 65536</code></td><td><code>dongw soft nofile 65536</code> (in <code>/etc/security/limits.d/dongw.conf</code>)</td></tr><tr><td><strong>Syntax</strong></td><td>Same syntax for both files</td><td>Same syntax as limits.conf</td></tr></tbody></table><h1 id="HP-and-THP"><a href="#HP-and-THP" class="headerlink" title="HP and THP"></a>HP and THP</h1><blockquote><p>Huge Pages (HP) and Transparent Huge Pages (THP)</p></blockquote><p>Understanding Huge Pages (HP) and Transparent Huge Pages (THP)</p><p><strong>Huge Pages (HP)</strong>: A manually configured fixed-size memory allocation system, beneficial for workloads that require large contiguous memory allocations.</p><p><strong>Transparent Huge Pages (THP)</strong>: An automated memory management feature that dynamically allocates large memory pages based on usage patterns.</p><p>for performance-sensitive applications, THP can sometimes cause performance issues due to fragmentation and unexpected latency spikes. Thus, it‚Äôs often recommended to <strong>disable THP</strong> and manually configure HP.</p><ul><li><p>Checking Current Huge Pages Configuration</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/meminfo | grep HugePages</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Example output:</span></span><br><span class="line">AnonHugePages:  16850944 kB # Memory allocated via THP.</span><br><span class="line">ShmemHugePages:        0 kB</span><br><span class="line">FileHugePages:         0 kB</span><br><span class="line">HugePages_Total:       0 # Number of configured huge pages.</span><br><span class="line">HugePages_Free:        0 # Available huge pages.</span><br><span class="line">HugePages_Rsvd:        0</span><br><span class="line">HugePages_Surp:        0</span><br></pre></td></tr></table></figure></li><li><p>Configuring Static Huge Pages</p><p><strong>Step 1: Set the Number of Huge Pages</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To allocate a specific number of 2MB huge pages, calculate based on your memory requirements. Example:</span></span><br><span class="line">echo 1024 | sudo tee /proc/sys/vm/nr_hugepages</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Make it persistent:</span></span><br><span class="line">echo &quot;vm.nr_hugepages=1024&quot; | sudo tee -a /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><p><strong>Step 2: Allocate Huge Pages at Boot (Recommended)</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add hugepages kernel parameter:</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;default_hugepagesz=2M hugepagesz=2M hugepages=1024&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Update GRUB:</span></span><br><span class="line">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Reboot the system:</span></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><p><strong>Step 3: Mount Huge Pages File System (Optional)</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To <span class="built_in">enable</span> shared access to huge pages:</span></span><br><span class="line">mkdir -p /mnt/huge</span><br><span class="line">mount -t hugetlbfs nodev /mnt/huge</span><br><span class="line"><span class="meta">#</span><span class="bash"> To make this persistent, add to /etc/fstab:</span></span><br><span class="line">nodev /mnt/huge hugetlbfs defaults 0 0</span><br></pre></td></tr></table></figure></li><li><p>Disabling Transparent Huge Pages (THP)</p><p>THP should be <strong>disabled</strong> for performance-sensitive applications</p><p><strong>Step 1: Disable THP at Runtime</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo never | sudo tee /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">echo never | sudo tee /sys/kernel/mm/transparent_hugepage/defrag</span><br></pre></td></tr></table></figure><p><strong>Step 2: Make THP Disabled at Boot</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add:</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;transparent_hugepage=never&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Update GRUB:</span></span><br><span class="line">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Reboot:</span></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></li><li><p>Verification After Reboot</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Check Huge Pages Allocation</span></span><br><span class="line">cat /proc/meminfo | grep HugePages</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check THP Status</span></span><br><span class="line">cat /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line"><span class="meta">#</span><span class="bash"> Expected output:</span></span><br><span class="line">[always] madvise never</span><br></pre></td></tr></table></figure></li></ul><p>Summary: Should You Configure HP &amp; THP Together?</p><p>For performance-sensitive applications, it‚Äôs recommended to <strong>disable THP</strong> and <strong>manually configure Huge Pages (HP)</strong> for better performance.</p><p>THP can cause latency spikes and memory fragmentation, making it less ideal for high-performance file systems.</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tune </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nvme</title>
      <link href="/2025/01/17/fs:%20nvme/"/>
      <url>/2025/01/17/fs:%20nvme/</url>
      
        <content type="html"><![CDATA[<h1 id="NVMe"><a href="#NVMe" class="headerlink" title="NVMe"></a>NVMe</h1><p><strong>NVMe (Non-Volatile Memory Express)</strong> is a high-performance storage protocol designed to take full advantage of the speed and efficiency offered by modern solid-state drives (SSDs), particularly those using <strong>NAND flash</strong> or <strong>3D NAND</strong> memory. It was developed to overcome the limitations of older storage protocols (such as SATA and SAS) by optimizing the interaction between the storage device and the CPU over faster interfaces like <strong>PCIe (Peripheral Component Interconnect Express)</strong>.</p><h2 id="1-What-NVMe-is"><a href="#1-What-NVMe-is" class="headerlink" title="1. What NVMe is"></a>1. What NVMe is</h2><p>NVMe is both a <strong>protocol</strong> and a <strong>standard</strong> for connecting <strong>non-volatile memory</strong> (such as NAND flash memory) directly to a computer system via high-speed interfaces, most commonly <strong>PCIe</strong>. It allows data to be transferred at much faster speeds compared to older storage protocols, enabling devices to reach their full potential and significantly reducing latency.</p><h2 id="2-Key-Advantages-of-NVMe"><a href="#2-Key-Advantages-of-NVMe" class="headerlink" title="2. Key Advantages of NVMe"></a>2. Key Advantages of NVMe</h2><ul><li><p><strong>Faster Speeds</strong>: NVMe takes full advantage of the high throughput and low latency of <strong>PCIe lanes</strong>. For example, the PCIe Gen 3.0 standard provides a maximum theoretical speed of about <strong>32 GB/s</strong> (using 16 lanes), while PCIe Gen 4.0 can offer speeds up to <strong>64 GB/s</strong>. NVMe drives can use multiple PCIe lanes (usually 4 or more) to transfer data simultaneously, making them vastly faster than older SATA SSDs or hard disk drives (HDDs).</p></li><li><p><strong>Low Latency</strong>: NVMe‚Äôs protocol is optimized to handle thousands of input/output operations per second (IOPS), resulting in very low latency (often measured in microseconds). This is crucial for applications requiring rapid access to large datasets, such as databases or high-performance computing tasks.</p></li><li><p><strong>Parallelism</strong>: NVMe is designed to support <strong>multi-core processors</strong> and can handle many more <strong>queues</strong> and <strong>commands</strong> simultaneously than previous protocols. It can support <strong>64K queues</strong>, each with up to <strong>64K commands</strong>, which is a huge improvement over the older <strong>SATA</strong> interface, which could handle only one queue with a limited number of commands.</p></li><li><p><strong>Efficiency</strong>: NVMe uses a streamlined protocol that minimizes overhead. SATA and SAS, by comparison, were originally designed for spinning hard drives and include more layers of abstraction that slow down communication.</p></li></ul><h2 id="3-NVMe-vs-SATA-SAS"><a href="#3-NVMe-vs-SATA-SAS" class="headerlink" title="3. NVMe vs. SATA/SAS"></a>3. NVMe vs. SATA/SAS</h2><ul><li><p><strong>SATA</strong> (Serial Advanced Technology Attachment) is an older protocol used mainly for connecting hard drives and SSDs. It‚Äôs limited by the speed of the interface itself (roughly <strong>600 MB/s</strong> max in the case of SATA III) and was designed when mechanical HDDs were the primary storage medium. Even with SSDs, the SATA interface is a bottleneck.</p></li><li><p><strong>SAS</strong> (Serial Attached SCSI) is often used in enterprise environments for high-reliability storage solutions, but it, too, has limitations in speed and efficiency compared to NVMe.</p></li></ul><h2 id="4-How-NVMe-Works"><a href="#4-How-NVMe-Works" class="headerlink" title="4. How NVMe Works"></a>4. How NVMe Works</h2><p>NVMe devices communicate directly with the CPU via PCIe, bypassing older storage controllers. The <strong>PCIe interface</strong> connects storage devices such as <strong>NVMe SSDs</strong> directly to the motherboard or via expansion cards, allowing faster and more direct data transfer.</p><p>NVMe itself is built around a <strong>command set</strong> that is designed for <strong>flash memory</strong>, as opposed to the traditional command sets used in older storage systems. This reduces unnecessary overhead and allows NVMe devices to process requests more quickly.</p><h2 id="5-NVMe-Form-Factors"><a href="#5-NVMe-Form-Factors" class="headerlink" title="5. NVMe Form Factors"></a>5. NVMe Form Factors</h2><p>There are several physical form factors for NVMe drives, including:</p><ul><li><p><strong>M.2</strong>: A small form factor typically used in laptops and desktops. It plugs directly into an M.2 slot on the motherboard, and modern M.2 NVMe drives can reach speeds of over <strong>7,000 MB/s</strong> with PCIe Gen 3.0 or Gen 4.0 support.</p></li><li><p><strong>U.2</strong>: A connector used for enterprise-class SSDs. These drives are often used in servers and data centers.</p></li><li><p><strong>Add-in Card (AIC)</strong>: These are full-sized PCIe cards that can be inserted into a motherboard‚Äôs PCIe slot. They offer high storage capacity and performance, making them ideal for high-end workstations or servers.</p></li></ul><h2 id="6-Applications-of-NVMe"><a href="#6-Applications-of-NVMe" class="headerlink" title="6. Applications of NVMe"></a>6. Applications of NVMe</h2><ul><li><p><strong>Gaming</strong>: NVMe SSDs dramatically reduce game load times, texture rendering, and video streaming, providing a smoother gaming experience.</p></li><li><p><strong>Content Creation</strong>: Video editing, 3D rendering, and other high-bandwidth tasks benefit from the rapid access to large files.</p></li><li><p><strong>Data Centers</strong>: NVMe drives are ideal for enterprise storage solutions, especially when handling high-volume data throughput, real-time analytics, or AI workloads.</p></li><li><p><strong>Databases</strong>: NVMe‚Äôs low latency and high throughput make it an excellent choice for applications involving large databases and data warehousing.</p></li></ul><h2 id="7-NVMe-and-PCIe-Versions"><a href="#7-NVMe-and-PCIe-Versions" class="headerlink" title="7. NVMe and PCIe Versions"></a>7. NVMe and PCIe Versions</h2><p>NVMe‚Äôs performance scales with <strong>PCIe</strong> versions:</p><ul><li><p><strong>PCIe 3.0</strong> supports a maximum theoretical bandwidth of <strong>1 GB/s per lane</strong> (total of <strong>4 GB/s</strong> for a 4-lane SSD).</p></li><li><p><strong>PCIe 4.0</strong> doubles this bandwidth to <strong>2 GB/s per lane</strong> (total of <strong>8 GB/s</strong> for a 4-lane SSD).</p></li><li><p><strong>PCIe 5.0</strong> further increases the bandwidth to <strong>4 GB/s per lane</strong> (total of <strong>16 GB/s</strong> for a 4-lane SSD).</p></li></ul><h2 id="8-Conclusion"><a href="#8-Conclusion" class="headerlink" title="8. Conclusion"></a>8. Conclusion</h2><p>NVMe is revolutionizing storage by offering higher speeds, lower latency, and better scalability compared to older protocols. Whether for consumer laptops, high-performance desktops, or enterprise-level data centers, NVMe is fast becoming the go-to solution for anyone who demands top-tier storage performance.</p><h1 id="SSD"><a href="#SSD" class="headerlink" title="SSD"></a>SSD</h1><p>The relationship between <strong>NVMe</strong> and <strong>SSD</strong> is one of complementary technologies. Here‚Äôs a breakdown of how the two are related and how they differ:</p><h2 id="1-What-is-an-SSD"><a href="#1-What-is-an-SSD" class="headerlink" title="1. What is an SSD?"></a>1. What is an SSD?</h2><p><strong>SSD (Solid-State Drive)</strong> refers to a type of storage device that uses <strong>non-volatile flash memory</strong> (usually NAND flash) to store data, rather than the spinning platters and moving heads of traditional <strong>HDDs (Hard Disk Drives)</strong>. SSDs are much faster, more reliable, and use less power than HDDs, making them a popular choice for both consumer and enterprise storage solutions.</p><p><strong>SSDs can use various interfaces and protocols</strong> to communicate with the computer system. These include:</p><ul><li><p><strong>SATA (Serial ATA)</strong>: An older protocol, often used for <strong>SATA-based SSDs</strong>. While fast compared to HDDs, it‚Äôs limited by the bandwidth of the SATA interface (roughly <strong>600 MB/s</strong>).</p></li><li><p><strong>SAS (Serial Attached SCSI)</strong>: A more advanced, enterprise-grade protocol used for connecting SSDs in servers.</p></li><li><p><strong>PCIe (Peripheral Component Interconnect Express)</strong>: A high-speed interface used by <strong>NVMe SSDs</strong>.</p></li></ul><h2 id="2-How-NVMe-and-SSDs-are-Related"><a href="#2-How-NVMe-and-SSDs-are-Related" class="headerlink" title="2. How NVMe and SSDs are Related"></a>2. How NVMe and SSDs are Related</h2><p>NVMe and SSDs are connected in the following way:</p><ul><li><p><strong>NVMe is a protocol for accessing and transferring data from an SSD</strong>. It is the language or set of instructions that defines how data moves between the SSD and the computer‚Äôs CPU.</p></li><li><p><strong>SSD is the storage device</strong>, and it can use different interfaces and protocols (SATA, SAS, or PCIe). <strong>NVMe SSDs</strong> are SSDs that use the <strong>NVMe protocol over the PCIe interface</strong> to provide high-speed data transfer.</p></li></ul><h2 id="3-Key-Differences-Between-NVMe-SSDs-and-Other-SSDs"><a href="#3-Key-Differences-Between-NVMe-SSDs-and-Other-SSDs" class="headerlink" title="3. Key Differences Between NVMe SSDs and Other SSDs"></a>3. Key Differences Between NVMe SSDs and Other SSDs</h2><p>The main difference between <strong>NVMe SSDs</strong> and <strong>non-NVMe SSDs</strong> (like <strong>SATA SSDs</strong>) lies in the <strong>interface</strong> and <strong>protocol</strong> they use for data transfer:</p><ul><li><p><strong>NVMe SSDs</strong>:</p><ul><li><p><strong>Interface</strong>: Use <strong>PCIe</strong> lanes to communicate with the system.</p></li><li><p><strong>Protocol</strong>: Use the <strong>NVMe protocol</strong> to provide faster, more efficient data transfers.</p></li><li><p><strong>Speed</strong>: Much faster than SATA-based SSDs, as PCIe supports higher throughput.</p></li><li><p><strong>Latency</strong>: Lower latency compared to SATA SSDs, as NVMe is optimized for flash memory and can handle many more I/O operations in parallel.</p></li><li><p><strong>Form Factors</strong>: NVMe SSDs typically come in <strong>M.2</strong>, <strong>U.2</strong>, or <strong>Add-in Card</strong> (AIC) form factors.</p></li></ul></li><li><p><strong>Non-NVMe SSDs</strong> (e.g., <strong>SATA SSDs</strong>):</p><ul><li><p><strong>Interface</strong>: Use the <strong>SATA</strong> interface, which was originally designed for spinning hard drives.</p></li><li><p><strong>Protocol</strong>: Use the older <strong>SATA protocol</strong>, which is slower than NVMe.</p></li><li><p><strong>Speed</strong>: Limited to <strong>around 600 MB/s</strong> (the maximum bandwidth of SATA III).</p></li><li><p><strong>Latency</strong>: Higher latency compared to NVMe SSDs because of the older protocol and interface.</p></li><li><p><strong>Form Factor</strong>: Commonly come in <strong>2.5-inch</strong> or <strong>mSATA</strong> form factors, similar to the size of traditional HDDs.</p></li></ul></li></ul><h2 id="4-Performance-Comparison"><a href="#4-Performance-Comparison" class="headerlink" title="4. Performance Comparison"></a><strong>4. Performance Comparison</strong></h2><ul><li><p><strong>SATA SSDs</strong>:</p><ul><li><p>Maximum read/write speeds are capped at around <strong>550-600 MB/s</strong> due to the limitations of the <strong>SATA III interface</strong>.</p></li><li><p>Suitable for everyday consumer use, including boot drives, gaming, and regular workloads, but not optimal for high-performance or data-intensive tasks.</p></li></ul></li><li><p><strong>NVMe SSDs</strong>:</p><ul><li><p>The <strong>PCIe 3.0</strong> interface provides <strong>up to 4 GB/s</strong> of bandwidth for a 4-lane SSD, while <strong>PCIe 4.0</strong> can go up to <strong>8 GB/s</strong> or higher for consumer drives.</p></li><li><p><strong>Latency</strong> is much lower compared to SATA, with NVMe SSDs often providing sub-millisecond access times.</p></li><li><p>Ideal for <strong>high-end gaming</strong>, <strong>video editing</strong>, <strong>3D rendering</strong>, and other professional or enterprise-level applications that require quick access to large datasets.</p></li></ul></li></ul><h2 id="5-Form-Factor-and-Compatibility"><a href="#5-Form-Factor-and-Compatibility" class="headerlink" title="5. Form Factor and Compatibility"></a>5. Form Factor and Compatibility</h2><ul><li><p><strong>SATA SSDs</strong>: Often found in the <strong>2.5-inch form factor</strong> (similar to HDDs) and can be used in most computers and laptops with a SATA interface.</p></li><li><p><strong>NVMe SSDs</strong>: Use <strong>M.2</strong> or <strong>U.2</strong> form factors (for consumer or enterprise-level SSDs) and require a motherboard with an <strong>M.2 PCIe slot</strong> or a <strong>U.2 connector</strong> for compatibility. Some systems may require an adapter to support NVMe drives.</p></li></ul><h2 id="6-Summary-of-the-Relationship-Between-NVMe-and-SSD"><a href="#6-Summary-of-the-Relationship-Between-NVMe-and-SSD" class="headerlink" title="6. Summary of the Relationship Between NVMe and SSD"></a>6. Summary of the Relationship Between NVMe and SSD</h2><ul><li><p><strong>NVMe</strong> is a <strong>protocol</strong> designed to maximize the speed and efficiency of <strong>PCIe-based SSDs</strong>.</p></li><li><p><strong>SSD</strong> is a type of storage device that can use different interfaces like SATA, SAS, or PCIe, with <strong>NVMe SSDs</strong> specifically referring to <strong>SSDs that use the NVMe protocol</strong> over a <strong>PCIe interface</strong>.</p></li><li><p><strong>NVMe SSDs</strong> offer significant performance improvements (speed, latency, and scalability) over <strong>SATA SSDs</strong>, making them ideal for users with high-performance storage needs, such as gamers, content creators, and data centers.</p></li></ul><p>In short: <strong>NVMe SSD</strong> refers to a <strong>high-speed SSD</strong> that uses the <strong>NVMe protocol</strong> and <strong>PCIe interface</strong> for faster data transfer, while <strong>SATA SSDs</strong> use the older <strong>SATA interface</strong> and protocol, which are slower in comparison.</p>]]></content>
      
      
      <categories>
          
          <category> fs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvme </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph storage cluster</title>
      <link href="/2025/01/16/ceph%20storage/"/>
      <url>/2025/01/16/ceph%20storage/</url>
      
        <content type="html"><![CDATA[<h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><p>A Ceph Storage Cluster requires the following: at least one Ceph Monitor and at least one Ceph Manager, and at least as many <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-OSD">Ceph Object Storage Daemon</a>s (OSDs) as there are copies of a given object stored in the Ceph cluster (for example, if three copies of a given object are stored in the Ceph cluster, then at least three OSDs must exist in that Ceph cluster).</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    %% Define Ceph Components</span><br><span class="line">    subgraph &quot;Ceph Cluster&quot;</span><br><span class="line">        direction TB</span><br><span class="line">        OSDs[&quot;OSDs - Object Storage Daemons\n(Store and replicate data)&quot;]</span><br><span class="line">        Monitors[&quot;Monitors (MON) - Cluster Coordination\n(Maintain cluster map &amp; quorum)&quot;]</span><br><span class="line">        Managers[&quot;Managers (MGR) - Metrics &amp; Control\n(Provide monitoring, orchestration, and services)&quot;]</span><br><span class="line">        MDSs[&quot;MDSs - Metadata Servers\n(Manage CephFS metadata)&quot;]</span><br><span class="line">        RADOS[&quot;RADOS - Reliable Autonomic Distributed Object Store\n(Core distributed storage layer)&quot;]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    %% Relationships</span><br><span class="line">    OSDs --&gt;|Store &amp; Replicate Data| RADOS</span><br><span class="line">    Monitors --&gt;|Maintain Cluster State &amp; Quorum| RADOS</span><br><span class="line">    Managers --&gt;|Monitor, Orchestrate &amp; Provide Services| RADOS</span><br><span class="line">    MDSs --&gt;|Manage CephFS Metadata| RADOS</span><br><span class="line">    RADOS --&gt;|Foundation of Ceph Storage| Ceph-Cluster</span><br><span class="line"></span><br><span class="line">    %% Descriptions</span><br><span class="line">    subgraph &quot;Component Descriptions&quot;</span><br><span class="line">        direction TB</span><br><span class="line">        MDSs_Description[&quot;MDSs: Handle metadata for CephFS, enabling file system operations like directory listing and file creation.&quot;]</span><br><span class="line">        RADOS_Description[&quot;RADOS: Core storage layer ensuring data durability, fault tolerance, and scalability.&quot;]</span><br><span class="line">        OSDs_Description[&quot;OSDs: Store, replicate, and recover object data across the cluster.&quot;]</span><br><span class="line">        Monitors_Description[&quot;Monitors: Maintain cluster state, handle authentication, and ensure consensus.&quot;]</span><br><span class="line">        Managers_Description[&quot;Managers: Provide additional cluster management features, including dashboards, orchestration, and monitoring.&quot;]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    %% Link Descriptions to Components</span><br><span class="line">    MDSs --&gt; MDSs_Description</span><br><span class="line">    RADOS --&gt; RADOS_Description</span><br><span class="line">    OSDs --&gt; OSDs_Description</span><br><span class="line">    Monitors --&gt; Monitors_Description</span><br><span class="line">    Managers --&gt; Managers_Description</span><br></pre></td></tr></table></figure><ul><li><p><strong>Monitors</strong>: A <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-Monitor">Ceph Monitor</a> (<code>ceph-mon</code>) maintains maps of the cluster state, including the <a href="https://docs.ceph.com/en/reef/rados/operations/monitoring/#display-mon-map">monitor map</a>, manager map, the OSD map, the MDS map, and the CRUSH map. These maps are critical cluster state required for Ceph daemons to coordinate with each other. Monitors are also responsible for managing authentication between daemons and clients. At least three monitors are normally required for redundancy and high availability.</p></li><li><p><strong>Managers</strong>: A <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-Manager">Ceph Manager</a> daemon (<code>ceph-mgr</code>) is responsible for keeping track of runtime metrics and the current state of the Ceph cluster, including storage utilization, current performance metrics, and system load. The Ceph Manager daemons also host python-based modules to manage and expose Ceph cluster information, including a web-based <a href="https://docs.ceph.com/en/reef/mgr/dashboard/#mgr-dashboard">Ceph Dashboard</a> and <a href="https://docs.ceph.com/en/mgr/restful">REST API</a>. At least two managers are normally required for high availability.</p></li><li><p><strong>Ceph OSDs</strong>: An Object Storage Daemon (<a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-OSD">Ceph OSD</a>, <code>ceph-osd</code>) stores data, handles data replication, recovery, rebalancing, and provides some monitoring information to Ceph Monitors and Managers by checking other Ceph OSD Daemons for a heartbeat. At least three Ceph OSDs are normally required for redundancy and high availability.</p></li><li><p><strong>MDSs</strong>: A <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-Metadata-Server">Ceph Metadata Server</a> (MDS, <code>ceph-mds</code>) stores metadata for the <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-File-System">Ceph File System</a>. Ceph Metadata Servers allow CephFS users to run basic commands (like <code>ls</code>, <code>find</code>, etc.) without placing a burden on the Ceph Storage Cluster.</p></li><li><p><strong>RADOS</strong>: (Reliable Autonomic Distributed Object Store) Any Cluster that supports <a href="https://docs.ceph.com/en/reef/glossary/#term-Ceph-Object-Storage">Ceph Object Storage</a> runs Ceph RADOS Gateway daemons (<code>radosgw</code>).</p></li></ul><h1 id="architecture"><a href="#architecture" class="headerlink" title="architecture"></a>architecture</h1><img src="/images/ceph/stack.webp" style="zoom: 60%"><h2 id="ceph-block-device"><a href="#ceph-block-device" class="headerlink" title="ceph block device"></a>ceph block device</h2><blockquote><p>RBD (Ceph Block Devices) </p></blockquote><img src="/images/ceph/block-device.webp" style="zoom: 60%"><p>Ceph block devices are thin-provisioned, resizable, and store data striped over multiple OSDs. Ceph block devices leverage RADOS capabilities including snapshotting, replication and strong consistency. Ceph block storage clients communicate with Ceph clusters through kernel modules or the <code>librbd</code> library.</p><h2 id="ceph-object-storage"><a href="#ceph-object-storage" class="headerlink" title="ceph object storage"></a>ceph object storage</h2><blockquote><p>RGW (Ceph Object Storage Gateway)</p></blockquote><img src="/images/ceph/object-storage.webp" style="zoom: 60%"><p>Ceph Object Storage uses the Ceph Object Gateway daemon (<code>radosgw</code>), an HTTP server designed to interact with a Ceph Storage Cluster. The Ceph Object Gateway provides interfaces that are compatible with both Amazon S3 and OpenStack Swift, and it has its own user management. Ceph Object Gateway can use a single Ceph Storage cluster to store data from Ceph File System and from Ceph Block device clients. The S3 API and the Swift API share a common namespace, which means that it is possible to write data to a Ceph Storage Cluster with one API and then retrieve that data with the other API.</p><h2 id="ceph-file-system"><a href="#ceph-file-system" class="headerlink" title="ceph file system"></a>ceph file system</h2><blockquote><p>cephFS</p></blockquote><img src="/images/ceph/cephfs.svg" style="zoom: 40%"><p>The Ceph File System, or CephFS, is a POSIX-compliant file system built on top of Ceph‚Äôs distributed object store, <strong>RADOS</strong>. CephFS endeavors to provide a state-of-the-art, multi-use, highly available, and performant file store for a variety of applications, including traditional use-cases like shared home directories, HPC scratch space, and distributed workflow shared storage.</p><h1 id="Storage-Interfaces"><a href="#Storage-Interfaces" class="headerlink" title="Storage Interfaces"></a>Storage Interfaces</h1><p>Ceph offers several ‚Äústorage interfaces‚Äù, which is another way of saying ‚Äúways of storing data‚Äù. These storage interfaces include: - <strong>CephFS</strong>(a file system) - <strong>RBD</strong> (block devices) - <strong>RADOS</strong> (an object store).</p><p>Deep down, though, all three of these are really RADOS object stores. CephFS and RBD are just presenting themselves as file systems and block devices.</p><h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="pools-vs-placement-groups-vs-object"><a href="#pools-vs-placement-groups-vs-object" class="headerlink" title="pools vs placement groups vs object"></a>pools vs placement groups vs object</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">    </span><br><span class="line">    subgraph Ceph Cluster</span><br><span class="line">        A[Pool: mypool] --&gt;|Contains| B1[PG 1]</span><br><span class="line">        A[Pool: mypool] --&gt;|Contains| B2[PG 2]</span><br><span class="line">        A[Pool: mypool] --&gt;|Contains| B3[PG 3]</span><br><span class="line">        </span><br><span class="line">        B1 --&gt;|Stores| C1[Object A]</span><br><span class="line">        B1 --&gt;|Stores| C2[Object B]</span><br><span class="line">        </span><br><span class="line">        B2 --&gt;|Stores| C3[Object C]</span><br><span class="line">        B2 --&gt;|Stores| C4[Object D]</span><br><span class="line">        </span><br><span class="line">        B3 --&gt;|Stores| C5[Object E]</span><br><span class="line">        </span><br><span class="line">        subgraph OSD Nodes</span><br><span class="line">            D1[OSD.1] </span><br><span class="line">            D2[OSD.2] </span><br><span class="line">            D3[OSD.3] </span><br><span class="line">            D4[OSD.4] </span><br><span class="line">            D5[OSD.5] </span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        B1 --&gt;|Mapped to| D1</span><br><span class="line">        B1 --&gt;|Mapped to| D2</span><br><span class="line">        B1 --&gt;|Mapped to| D3</span><br><span class="line">        </span><br><span class="line">        B2 --&gt;|Mapped to| D2</span><br><span class="line">        B2 --&gt;|Mapped to| D3</span><br><span class="line">        B2 --&gt;|Mapped to| D4</span><br><span class="line">        </span><br><span class="line">        B3 --&gt;|Mapped to| D3</span><br><span class="line">        B3 --&gt;|Mapped to| D4</span><br><span class="line">        B3 --&gt;|Mapped to| D5</span><br><span class="line">    end</span><br></pre></td></tr></table></figure><blockquote><p><strong>Pool (mypool)</strong> contains <strong>multiple PGs</strong> (Placement Groups).</p><p>Each <strong>PG stores multiple objects</strong>.</p><p>Each <strong>PG is mapped to multiple OSDs</strong>, based on the replication factor.</p><p><strong>Objects are stored within PGs</strong>, and Ceph automatically balances them across OSDs.</p></blockquote><p><strong>Understanding the Relationship Between Placement Groups (PGs), Pools, and Objects in Ceph</strong></p><p>In Ceph, <strong>objects</strong>, <strong>placement groups (PGs)</strong>, and <strong>pools</strong> work together to distribute and store data efficiently. Here‚Äôs how they relate:</p><h3 id="Pools"><a href="#Pools" class="headerlink" title="Pools"></a>Pools</h3><blockquote><p>The Logical Storage Units</p></blockquote><p>A pool in Ceph is a logical container that stores objects. Pools are used for different types of storage, such as:</p><ul><li><p><strong>RADOS block storage (RBD)</strong></p></li><li><p><strong>CephFS (Ceph File System)</strong></p></li><li><p><strong>RGW (RADOS Gateway for S3/Swift compatibility)</strong></p></li></ul><p>A pool has properties like:</p><ul><li><p><strong>Replication factor (e.g., 3x replication)</strong></p></li><li><p><strong>Erasure coding settings</strong></p></li><li><p><strong>Number of placement groups (PGs)</strong></p></li></ul><p><strong>Example:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph osd pool create mypool 128</span><br></pre></td></tr></table></figure><p>This creates a pool named <strong>mypool</strong> with <strong>128 PGs</strong>.</p><h3 id="Placement-Groups-PGs"><a href="#Placement-Groups-PGs" class="headerlink" title="Placement Groups (PGs)"></a>Placement Groups (PGs)</h3><blockquote><p>Buckets for Objects</p></blockquote><p>A <strong>placement group (PG)</strong> is an internal grouping of objects within a pool. Instead of distributing objects directly across OSDs, Ceph first assigns objects to PGs. Then, PGs are mapped to OSDs.</p><p><strong>Why PGs?</strong></p><ul><li><p>They act as <strong>intermediaries</strong> between objects and OSDs.</p></li><li><p>They help balance data across OSDs efficiently.</p></li><li><p>They make recovery and replication easier.</p></li></ul><p><strong>PG Calculation Example</strong></p><p>If a pool has <strong>128 PGs</strong> and uses a <strong>3-replica</strong> setting, each PG will be mapped to 3 different OSDs.</p><h3 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h3><blockquote><p>The Data Units in Ceph</p></blockquote><p>An <strong>object</strong> is the fundamental data unit in Ceph. When you store a file in Ceph, it‚Äôs broken into one or more objects.</p><p><strong>How Objects Are Stored?</strong></p><ol><li><p><strong>Objects are stored in a Pool</strong> (e.g., mypool).</p></li><li><p><strong>Each object is mapped to a Placement Group (PG)</strong>.</p></li><li><p><strong>The PG is mapped to multiple OSDs</strong> (based on the pool‚Äôs replication settings).</p></li><li><p><strong>The primary OSD</strong> handles writes and ensures copies are stored on secondary OSDs.</p></li></ol><p><strong>Example Workflow:</strong></p><ul><li><p>A file is stored in <strong>RGW (Ceph S3) ‚Üí mypool</strong>.</p></li><li><p>The file is broken into <strong>objects</strong>.</p></li><li><p>Each object is assigned to a <strong>PG</strong>.</p></li><li><p>The PG is mapped to <strong>3 OSDs</strong> (in a replicated pool).</p></li></ul><h3 id="Putting-It-All-Together"><a href="#Putting-It-All-Together" class="headerlink" title="Putting It All Together"></a>Putting It All Together</h3><p><strong>Example</strong></p><p>Assume:</p><ul><li><p>You create a <strong>pool</strong> called mypool with <strong>128 PGs</strong>.</p></li><li><p>You upload a file that gets broken into <strong>10 objects</strong>.</p></li><li><p>Each object is <strong>hashed and assigned</strong> to a PG.</p></li><li><p>The PGs are <strong>mapped to OSDs</strong>.</p></li></ul><table><thead><tr><th><strong>Component</strong></th><th><strong>Example Value</strong></th></tr></thead><tbody><tr><td><strong>Pool</strong></td><td>mypool</td></tr><tr><td><strong>PG Count</strong></td><td>128</td></tr><tr><td><strong>Object Name</strong></td><td>obj12345</td></tr><tr><td><strong>Object Hash</strong></td><td>hash(obj12345) ‚Üí PG 45</td></tr><tr><td><strong>PG Assigned</strong></td><td>PG 45</td></tr><tr><td><strong>Mapped OSDs</strong></td><td>OSD.3, OSD.7, OSD.12</td></tr></tbody></table><p>In this case, <strong>obj12345</strong> will be stored in <strong>PG 45</strong>, which is replicated across <strong>OSD.3, OSD.7, and OSD.12</strong>.</p><p><strong>Key Takeaways</strong></p><ul><li><p><strong>Objects</strong> are stored in <strong>pools</strong>.</p></li><li><p><strong>Pools</strong> contain <strong>placement groups (PGs)</strong>.</p></li><li><p><strong>PGs</strong> group multiple objects and map them to multiple OSDs.</p></li><li><p><strong>OSDs</strong> store object data and handle replication.</p></li></ul><p><strong>Commands to Check PGs and Pools</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> List all pools:</span></span><br><span class="line">ceph osd pool ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check PG status:</span></span><br><span class="line">ceph pg stat</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> See <span class="built_in">which</span> PGs belong to a pool:</span></span><br><span class="line">ceph pg dump | grep mypool</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check object distribution:</span></span><br><span class="line">ceph osd df</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> storage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>terminology</title>
      <link href="/2024/12/19/terminology/"/>
      <url>/2024/12/19/terminology/</url>
      
        <content type="html"><![CDATA[<h1 id="ÂπÇÁ≠â-ÈùûÂπÇÁ≠â"><a href="#ÂπÇÁ≠â-ÈùûÂπÇÁ≠â" class="headerlink" title="ÂπÇÁ≠â/ÈùûÂπÇÁ≠â"></a>ÂπÇÁ≠â/ÈùûÂπÇÁ≠â</h1><p>Âú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶ÂíåÁΩëÁªúÈÄö‰ø°‰∏≠ÔºåÂπÇÁ≠âÔºàIdempotentÔºâÂíåÈùûÂπÇÁ≠âÔºàNon-idempotentÔºâÊèèËø∞‰∫ÜÊìç‰ΩúÊâßË°åÂ§öÊ¨°ÂíåÊâßË°å‰∏ÄÊ¨°ÁöÑÊïàÊûúÊòØÂê¶Áõ∏Âêå„ÄÇ</p><ol><li><p><strong>ÂπÇÁ≠âÊìç‰Ωú</strong>Ôºö</p><ul><li><strong>ÂÆö‰πâ</strong>ÔºöÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊâßË°åÂ§öÊ¨°ÂíåÊâßË°å‰∏ÄÊ¨°ÁöÑÊïàÊûúÁõ∏ÂêåÔºåÈÇ£‰πàËøô‰∏™Êìç‰ΩúË¢´Áß∞‰∏∫ÂπÇÁ≠âÊìç‰Ωú„ÄÇ</li><li><strong>ÁâπÁÇπ</strong>ÔºöÂπÇÁ≠âÊìç‰ΩúÂú®ÈáçÂ§çÊâßË°åÊó∂‰∏ç‰ºöÊîπÂèòÁ≥ªÁªüÁä∂ÊÄÅÔºåÂç≥Â§öÊ¨°ÊâßË°åÂíåÊâßË°å‰∏ÄÊ¨°ÁöÑÁªìÊûúÊòØÁõ∏ÂêåÁöÑ„ÄÇ</li><li><strong>‰æãÂ≠ê</strong>Ôºö<ul><li><strong>GETËØ∑Ê±Ç</strong>ÔºöËØªÂèñËµÑÊ∫êÁöÑÊìç‰ΩúÊòØÂπÇÁ≠âÁöÑÔºåÂõ†‰∏∫Êó†ËÆ∫ËØªÂèñÂ§öÂ∞ëÊ¨°ÔºåËµÑÊ∫êÁöÑÂÜÖÂÆπ‰∏ç‰ºöÊîπÂèò„ÄÇ</li><li><strong>PUTËØ∑Ê±Ç</strong>ÔºöÊõ¥Êñ∞ËµÑÊ∫êÁöÑÊìç‰ΩúÈÄöÂ∏∏ÊòØÂπÇÁ≠âÁöÑÔºåÂõ†‰∏∫Â§öÊ¨°Êõ¥Êñ∞Âêå‰∏Ä‰∏™ËµÑÊ∫êÂà∞Áõ∏ÂêåÁöÑÁä∂ÊÄÅÔºåÊúÄÁªàËµÑÊ∫êÁöÑÁä∂ÊÄÅ‰∏ç‰ºöÊîπÂèò„ÄÇ</li><li><strong>DELETEËØ∑Ê±Ç</strong>ÔºöÂà†Èô§ËµÑÊ∫êÁöÑÊìç‰Ωú‰πüÊòØÂπÇÁ≠âÁöÑÔºåÂõ†‰∏∫‰∏ÄÊó¶ËµÑÊ∫êË¢´Âà†Èô§ÔºåÂÜçÊ¨°Âà†Èô§‰∏ç‰ºöÂØπÁ≥ªÁªü‰∫ßÁîüËøõ‰∏ÄÊ≠•ÁöÑÂΩ±Âìç„ÄÇ</li></ul></li></ul></li><li><p><strong>ÈùûÂπÇÁ≠âÊìç‰Ωú</strong>Ôºö</p><ul><li><strong>ÂÆö‰πâ</strong>ÔºöÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊâßË°åÂ§öÊ¨°ÂíåÊâßË°å‰∏ÄÊ¨°ÁöÑÊïàÊûú‰∏çÂêåÔºåÈÇ£‰πàËøô‰∏™Êìç‰ΩúË¢´Áß∞‰∏∫ÈùûÂπÇÁ≠âÊìç‰Ωú„ÄÇ</li><li><strong>ÁâπÁÇπ</strong>ÔºöÈùûÂπÇÁ≠âÊìç‰ΩúÂú®ÈáçÂ§çÊâßË°åÊó∂‰ºöÊîπÂèòÁ≥ªÁªüÁä∂ÊÄÅÔºåÂç≥Â§öÊ¨°ÊâßË°åÂíåÊâßË°å‰∏ÄÊ¨°ÁöÑÁªìÊûú‰∏çÂêå„ÄÇ</li><li><strong>‰æãÂ≠ê</strong>Ôºö<ul><li><strong>POSTËØ∑Ê±Ç</strong>ÔºöÂàõÂª∫ËµÑÊ∫êÁöÑÊìç‰ΩúÊòØÈùûÂπÇÁ≠âÁöÑÔºåÂõ†‰∏∫Â§öÊ¨°ÊâßË°åÂàõÂª∫Êìç‰Ωú‰ºöÂàõÂª∫Â§ö‰∏™ËµÑÊ∫êÂÆû‰æã„ÄÇ</li><li><strong>Êüê‰∫õÁ±ªÂûãÁöÑUPDATEËØ∑Ê±Ç</strong>ÔºöÂ¶ÇÊûúÊõ¥Êñ∞Êìç‰ΩúÊ∂âÂèäÂà∞ËÆ°Êï∞Âô®ÊàñÂÖ∂‰ªñ‰ºöÈöèÊó∂Èó¥ÂèòÂåñÁöÑÂÄºÔºåÈÇ£‰πàËøô‰∫õÊìç‰ΩúÂèØËÉΩÊòØÈùûÂπÇÁ≠âÁöÑÔºåÂõ†‰∏∫Â§öÊ¨°Êõ¥Êñ∞ÂèØËÉΩ‰ºöÁ¥ØÁßØÊïàÊûú„ÄÇ</li></ul></li></ul></li></ol><p>Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂíåÁΩëÁªúÈÄö‰ø°‰∏≠ÔºåÂπÇÁ≠âÊÄßÊòØ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂ±ûÊÄßÔºåÂõ†‰∏∫ÂÆÉÂèØ‰ª•Â∏ÆÂä©Á°Æ‰øùÁ≥ªÁªüÁöÑ‰∏ÄËá¥ÊÄßÂíåÂèØÈù†ÊÄß„ÄÇ‰æãÂ¶ÇÔºåÂú®ÁΩëÁªúËØ∑Ê±Ç‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ËØ∑Ê±ÇÁî±‰∫éÁΩëÁªúÈóÆÈ¢òË¢´ÈáçÂ§çÂèëÈÄÅÔºåÂπÇÁ≠âÊìç‰ΩúÂèØ‰ª•Á°Æ‰øùÁ≥ªÁªü‰∏ç‰ºöÂõ†‰∏∫ÈáçÂ§çÁöÑËØ∑Ê±ÇËÄå‰∫ßÁîü‰∏ç‰∏ÄËá¥ÁöÑÁä∂ÊÄÅ„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> basic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> terminology </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes pkg</title>
      <link href="/2024/12/17/kubernetes%20pkg/"/>
      <url>/2024/12/17/kubernetes%20pkg/</url>
      
        <content type="html"><![CDATA[<h1 id="klog"><a href="#klog" class="headerlink" title="klog"></a>klog</h1><h2 id="default-log-level"><a href="#default-log-level" class="headerlink" title="default log level"></a>default log level</h2><p>default use <code>klog.Info</code> is equivalent to <code>klog.V(0).Info</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> by default klog uses level 0, so logs with log.V(1) won<span class="string">&#x27;t appear unless you set --v=1 or a higher verbosity.</span></span></span><br><span class="line"></span><br><span class="line">containers:</span><br><span class="line">  - name: your-container</span><br><span class="line">    image: your-image</span><br><span class="line">    args:</span><br><span class="line">      - &quot;--v=1&quot; # if not config this, default klog uses level 0</span><br></pre></td></tr></table></figure><ul><li>For more detailed debug or trace messages, use klog.V(level).Info, where level is greater than 0 (e.g., klog.V(2).Info).</li></ul>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pkg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cmake</title>
      <link href="/2024/12/16/cmake/"/>
      <url>/2024/12/16/cmake/</url>
      
        <content type="html"><![CDATA[<p>TBD</p>]]></content>
      
      
      <categories>
          
          <category> cmake </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes controller</title>
      <link href="/2024/12/15/kubernetes%20controller/"/>
      <url>/2024/12/15/kubernetes%20controller/</url>
      
        <content type="html"><![CDATA[<blockquote><p>From <a href="https://buraksekili.github.io/articles/controller-runtime-1/">Diving into controller-runtime | Manager</a></p></blockquote><p><a href="https://github.com/kubernetes-sigs/controller-runtime"><code>controller-runtime</code></a> package has become a fundamental tool for most Kubernetes controllers, simplifying the creation of controllers to manage resources within a Kubernetes environment efficiently. Users tend to prefer it over <a href="https://github.com/kubernetes/client-go"><code>client-go</code></a>.</p><p>In Kubernetes, controllers observe resources, such as Deployments, in a control loop to ensure the cluster resources conform to the desired state specified in the resource specification (e.g., YAML files).</p><p>On the other hand, according to Redhat, a Kubernetes Operator is an application-specific controller <a href="https://buraksekili.github.io/articles/controller-runtime-1/#fn:2">2</a>. For instance, the Prometheus Operator manages the lifecycle of a Prometheus instance in the cluster, including managing configurations and updating Kubernetes resources, such as ConfigMaps.</p><h1 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h1><p>controllers follow a special architecture to</p><ul><li>observe the resources,</li><li>inform any events (updating, deleting, adding) done on the resources,</li><li>keep a local cache to decrease the load on API Server,</li><li>keep a work queue to pick up events,</li><li>run workers to perform reconciliation on resources picked up from work queue.</li></ul><img src="/images/k8s/controller-runtime-1-client-go-controller-interaction.jpeg" style="zoom: 80%"><h2 id="informer"><a href="#informer" class="headerlink" title="informer"></a>informer</h2><p>Informers leverage certain components like <strong>Reflector</strong>, <strong>Queue</strong> and <strong>Indexer</strong>, as shown in the above diagram.</p><p>Informers watch Kubernetes API server to detect changes in resources that we want to. It keeps a local cache - in-memory cache implementing <a href="https://pkg.go.dev/k8s.io/client-go/tools/cache#Store">Store</a> interface - including the objects observed through Kubernetes API. Then controllers and operators use this cache for all getter requests - GET and LIST - to prevent load on Kubernetes API server. Moreover, Informers invoke controllers by sending objects to the controllers (registering Event Handlers).</p><h3 id="Reflector"><a href="#Reflector" class="headerlink" title="Reflector"></a>Reflector</h3><blockquote><p>Reflector watches a specified resource and causes all changes to be reflected in the given store.</p></blockquote><p>The store is actually a cache - with two options; simple one and FIFO. Reflector pushes objects to Delta Fifo queue.</p><p>By monitoring the server (Kubernetes API Server), the Reflector maintains a local cache of the resources. Upon any event occurring on the watched resource, implying a new operation on the Kubernetes resource, the Reflector updates the cache (Delta FIFO queue, as illustrated in the diagram). Subsequently, the Informer reads objects from this Delta FIFO queue, indexes them for future retrievals, and dispatches the object to the controller.</p><h3 id="Indexer"><a href="#Indexer" class="headerlink" title="Indexer"></a>Indexer</h3><p>Indexer saves objects into thread-safe Store by indexing the objects. This approach facilitates efficient querying of objects from the cache.</p><p>Custom indexers, based on specific needs, can be created. For example, a custom indexer can be generated to retrieve all objects based on certain fields, such as Annotations.</p><p>More details about how Kubernetes indexing works, check <a href="https://buraksekili.github.io/articles/client-k8s-indexing">Kubernetes Client-Side Indexing</a>.</p><hr><p>reference</p><ul><li><p><a href="https://www.zhaohuabing.com/post/2023-03-09-how-to-create-a-k8s-controller/">Kubernetes Controller Êú∫Âà∂ËØ¶Ëß£</a></p></li><li><p><a href="https://cloud.tencent.com/developer/article/1989055">Controller Runtime ÁöÑÂõõÁßç‰ΩøÁî®ÂßøÂäø</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> controller runtime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GO PKG</title>
      <link href="/2024/12/13/golang%20pkg/"/>
      <url>/2024/12/13/golang%20pkg/</url>
      
        <content type="html"><![CDATA[<h1 id="fmt"><a href="#fmt" class="headerlink" title="fmt"></a>fmt</h1><ul><li><p><code>%v</code> vs <code>%#v</code></p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Example <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="keyword">string</span></span><br><span class="line">    Value <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ex := Example&#123;Name: <span class="string">&quot;test&quot;</span>, Value: <span class="number">42</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Using %v</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Default format: %v\n&quot;</span>, ex)</span><br><span class="line">    <span class="comment">// Output: Default format: &#123;test 42&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Using %#v</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Go syntax representation: %#v\n&quot;</span>, ex)</span><br><span class="line">    <span class="comment">// Output: Go syntax representation: main.Example&#123;Name:&quot;test&quot;, Value:42&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="json"><a href="#json" class="headerlink" title="json"></a>json</h1><ul><li><p><code>json:&quot;,inline&quot;</code></p><blockquote><p>This means that the fields of the embedded struct will appear at the same level as the fields of the parent struct in the resulting JSON object.</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Meta <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="keyword">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Meta <span class="string">`json:&quot;,inline&quot;`</span></span><br><span class="line">    Address <span class="keyword">string</span> <span class="string">`json:&quot;address&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    p := Person&#123;</span><br><span class="line">        Meta: Meta&#123;</span><br><span class="line">            Name: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">            Age:  <span class="number">30</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        Address: <span class="string">&quot;123 Main St&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data, _ := json.Marshal(p)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>(data))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># output:</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;address&quot;</span>: <span class="string">&quot;123 Main St&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="cobra"><a href="#cobra" class="headerlink" title="cobra"></a>cobra</h1><h2 id="PersistentFlag-vs-Flag"><a href="#PersistentFlag-vs-Flag" class="headerlink" title="PersistentFlag vs Flag"></a>PersistentFlag vs Flag</h2><p><strong>PersistentFlag</strong></p><ul><li>Flags that are available to the command and all its subcommands. but not explicitly added to the main command‚Äôs help output.</li></ul><p><strong>Flag</strong></p><ul><li><p>Definition: Flags that are only available to the specific command they are defined on.</p></li><li><p>Example: If you set a flag on a specific command, it will not be available to its parent or sibling commands.</p></li></ul><h1 id="klog"><a href="#klog" class="headerlink" title="klog"></a>klog</h1><blockquote><p>k8s.io/klog/v2</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">klog.Info(<span class="string">&quot;setting.MountOptions&quot;</span>, setting.MountOptions)</span><br><span class="line"></span><br><span class="line">klog.Infof(<span class="string">&quot;volumeId[%s] using patch:%#v&quot;</span>, setting.VolumeId, patch)</span><br><span class="line"></span><br><span class="line">klog.ErrorS(err, <span class="string">&quot;dingofs create fs error: %v&quot;</span>, err)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> GO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pkg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lvm senario</title>
      <link href="/2024/12/06/fs:%20lvm%20senario/"/>
      <url>/2024/12/06/fs:%20lvm%20senario/</url>
      
        <content type="html"><![CDATA[<h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><img src="/images/fs/lvm_overview-1.svg"><h1 id="create-LVs"><a href="#create-LVs" class="headerlink" title="create LVs"></a>create LVs</h1><blockquote><p> If you want to create <strong>three Logical Volumes (LVs)</strong> of sizes 1TB, 1TB, and 5TB on a single Volume Group (VG) for each disk, here‚Äôs how you can do it step by step.</p></blockquote><p>Assume:</p><p><strong>Disks</strong>: /dev/nvme0n1, /dev/nvme1n1, /dev/nvme2n1</p><p><strong>Volume Groups</strong>: vg_nvme0, vg_nvme1, vg_nvme2</p><p><strong>Logical Volumes (LVs)</strong>: lv1, lv2, lv3 for each VG</p><p><strong>LV Sizes</strong>: 1TB, 1TB, and 5TB</p><h2 id="1-Create-Physical-Volumes-PVs"><a href="#1-Create-Physical-Volumes-PVs" class="headerlink" title="1. Create Physical Volumes (PVs)"></a>1. Create Physical Volumes (PVs)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Initialize each disk as a PV:</span></span><br><span class="line">sudo pvcreate /dev/nvme0n1</span><br><span class="line">sudo pvcreate /dev/nvme1n1</span><br><span class="line">sudo pvcreate /dev/nvme2n1</span><br></pre></td></tr></table></figure><h2 id="2-Create-Volume-Groups-VGs"><a href="#2-Create-Volume-Groups-VGs" class="headerlink" title="2. Create Volume Groups (VGs)"></a>2. Create Volume Groups (VGs)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create a VG <span class="keyword">for</span> each disk:</span></span><br><span class="line">sudo vgcreate vg_nvme0 /dev/nvme0n1</span><br><span class="line">sudo vgcreate vg_nvme1 /dev/nvme1n1</span><br><span class="line">sudo vgcreate vg_nvme2 /dev/nvme2n1</span><br></pre></td></tr></table></figure><h2 id="3-Create-Logical-Volumes-LVs"><a href="#3-Create-Logical-Volumes-LVs" class="headerlink" title="3. Create Logical Volumes (LVs)"></a>3. Create Logical Volumes (LVs)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Allocate 1TB, 1TB, and 5TB LVs from each VG.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For vg_nvme0:</span></span><br><span class="line">sudo lvcreate -L 1T -n lv1 vg_nvme0</span><br><span class="line">sudo lvcreate -L 1T -n lv2 vg_nvme0</span><br><span class="line">sudo lvcreate -L 5T -n lv3 vg_nvme0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For vg_nvme1:</span></span><br><span class="line">sudo lvcreate -L 1T -n lv1 vg_nvme1</span><br><span class="line">sudo lvcreate -L 1T -n lv2 vg_nvme1</span><br><span class="line">sudo lvcreate -L 5T -n lv3 vg_nvme1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For vg_nvme2:</span></span><br><span class="line">sudo lvcreate -L 1T -n lv1 vg_nvme2</span><br><span class="line">sudo lvcreate -L 1T -n lv2 vg_nvme2</span><br><span class="line">sudo lvcreate -L 5T -n lv3 vg_nvme2</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use whole vg</span></span><br><span class="line">sudo lvcreate -l 100%FREE -n lv vg_xxx</span><br></pre></td></tr></table></figure><h2 id="4-Verify-the-Setup"><a href="#4-Verify-the-Setup" class="headerlink" title="4. Verify the Setup"></a>4. Verify the Setup</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Check the LVs and their sizes:</span></span><br><span class="line">sudo lvs</span><br></pre></td></tr></table></figure><p>You should see something like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LV   VG        Attr       LSize</span><br><span class="line"></span><br><span class="line">lv1  vg_nvme0  -wi-a----- 1.00t                           </span><br><span class="line">lv2  vg_nvme0  -wi-a----- 1.00t                           </span><br><span class="line">lv3  vg_nvme0  -wi-a----- 5.00t                           </span><br><span class="line">lv1  vg_nvme1  -wi-a----- 1.00t                           </span><br><span class="line">lv2  vg_nvme1  -wi-a----- 1.00t                           </span><br><span class="line">lv3  vg_nvme1  -wi-a----- 5.00t                           </span><br><span class="line">lv1  vg_nvme2  -wi-a----- 1.00t                           </span><br><span class="line">lv2  vg_nvme2  -wi-a----- 1.00t                           </span><br><span class="line">lv3  vg_nvme2  -wi-a----- 5.00t</span><br></pre></td></tr></table></figure><h2 id="5-Format-the-LVs"><a href="#5-Format-the-LVs" class="headerlink" title="5. Format the LVs"></a>5. Format the LVs</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Use xfs or another filesystem to format the LVs:</span></span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme0/lv1</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme0/lv2</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme0/lv3</span><br><span class="line"></span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme1/lv1</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme1/lv2</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme1/lv3</span><br><span class="line"></span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2/lv1</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2/lv2</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2/lv3</span><br></pre></td></tr></table></figure><h2 id="6-Mount-the-LVs"><a href="#6-Mount-the-LVs" class="headerlink" title="6. Mount the LVs"></a>6. Mount the LVs</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create directories <span class="keyword">for</span> each LV and mount them:</span></span><br><span class="line">sudo mkdir -p /mnt/nvme0/lv1 /mnt/nvme0/lv2 /mnt/nvme0/lv3</span><br><span class="line">sudo mkdir -p /mnt/nvme1/lv1 /mnt/nvme1/lv2 /mnt/nvme1/lv3</span><br><span class="line">sudo mkdir -p /mnt/nvme2/lv1 /mnt/nvme2/lv2 /mnt/nvme2/lv3</span><br><span class="line"></span><br><span class="line">sudo mount /dev/vg_nvme0/lv1 /mnt/nvme0/lv1</span><br><span class="line">sudo mount /dev/vg_nvme0/lv2 /mnt/nvme0/lv2</span><br><span class="line">sudo mount /dev/vg_nvme0/lv3 /mnt/nvme0/lv3</span><br><span class="line"></span><br><span class="line">sudo mount /dev/vg_nvme1/lv1 /mnt/nvme1/lv1</span><br><span class="line">sudo mount /dev/vg_nvme1/lv2 /mnt/nvme1/lv2</span><br><span class="line">sudo mount /dev/vg_nvme1/lv3 /mnt/nvme1/lv3</span><br><span class="line"></span><br><span class="line">sudo mount /dev/vg_nvme2/lv1 /mnt/nvme2/lv1</span><br><span class="line">sudo mount /dev/vg_nvme2/lv2 /mnt/nvme2/lv2</span><br><span class="line">sudo mount /dev/vg_nvme2/lv3 /mnt/nvme2/lv3</span><br></pre></td></tr></table></figure><h2 id="7-Persist-the-Mounts"><a href="#7-Persist-the-Mounts" class="headerlink" title="7. Persist the Mounts"></a>7. Persist the Mounts</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Add the mounts to /etc/fstab <span class="keyword">for</span> automatic remounting on boot:</span></span><br><span class="line">echo &#x27;/dev/vg_nvme0/lv1 /mnt/nvme0/lv1 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme0/lv2 /mnt/nvme0/lv2 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme0/lv3 /mnt/nvme0/lv3 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line"></span><br><span class="line">echo &#x27;/dev/vg_nvme1/lv1 /mnt/nvme1/lv1 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme1/lv2 /mnt/nvme1/lv2 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme1/lv3 /mnt/nvme1/lv3 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line"></span><br><span class="line">echo &#x27;/dev/vg_nvme2/lv1 /mnt/nvme2/lv1 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme2/lv2 /mnt/nvme2/lv2 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme2/lv3 /mnt/nvme2/lv3 xfs defaults 0 0&#x27; | sudo tee -a /etc/fstab</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> **Final Directory Layout**</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> **Disk****VG Name****LV Name****Size****Mount Point**</span></span><br><span class="line">/dev/nvme0n1vg_nvme0lv11T/mnt/nvme0/lv1</span><br><span class="line">lv21T/mnt/nvme0/lv2</span><br><span class="line">lv35T/mnt/nvme0/lv3</span><br><span class="line"></span><br><span class="line">/dev/nvme1n1vg_nvme1lv11T/mnt/nvme1/lv1</span><br><span class="line">lv21T/mnt/nvme1/lv2</span><br><span class="line">lv35T/mnt/nvme1/lv3</span><br><span class="line"></span><br><span class="line">/dev/nvme2n1vg_nvme2lv11T/mnt/nvme2/lv1</span><br><span class="line">lv21T/mnt/nvme2/lv2</span><br><span class="line">lv35T/mnt/nvme2/lv3</span><br></pre></td></tr></table></figure><blockquote><p>defaults 0 x</p><p>The difference is in the last number (0 vs 2) in the fstab entry, which represents the filesystem check (fsck) pass number. Here‚Äôs what these numbers mean:</p><p>Last field (6th field) in fstab:</p><ul><li><code>0</code> = No filesystem check will be done at boot time</li><li><code>1</code> = Filesystem will be checked first (typically used for root filesystem /)</li><li><code>2</code> = Filesystem will be checked after pass 1 filesystems (typically used for other filesystems)</li></ul><p>So:</p><ul><li><code>defaults 0 0</code> means the filesystem will never be automatically checked during boot</li><li><code>defaults 0 2</code> means the filesystem will be checked during boot, but after the root filesystem</li></ul><p>Best practices:</p><ul><li>Use <code>0 1</code> for the root filesystem (/)</li><li>Use <code>0 2</code> for other important filesystems that should be checked</li><li>Use <code>0 0</code> for pseudo-filesystems (like proc, sysfs) or filesystems that don‚Äôt need checking (like swap)</li></ul></blockquote><h1 id="wipe-disk-and-create-lvm"><a href="#wipe-disk-and-create-lvm" class="headerlink" title="wipe disk and create lvm"></a>wipe disk and create lvm</h1><blockquote><p>assum dev is /dev/nvme2n1</p></blockquote><p>To erase all partitions on the device /dev/nvme2n1 and create multiple logical volumes (LVs) using the LVM framework, follow these steps:</p><h2 id="1-Verify-Device-and-Backup-Data"><a href="#1-Verify-Device-and-Backup-Data" class="headerlink" title="1. Verify Device and Backup Data"></a>1. Verify Device and Backup Data</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Ensure you are working on the correct device. Erasing partitions will delete all data on the device.</span></span><br><span class="line">sudo lsblk -o NAME,SIZE,TYPE,MOUNTPOINT /dev/nvme2n1</span><br></pre></td></tr></table></figure><h2 id="2-Erase-Existing-Partitions"><a href="#2-Erase-Existing-Partitions" class="headerlink" title="2. Erase Existing Partitions"></a>2. Erase Existing Partitions</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Clear the Partition Table, To wipe the partition table completely:</span></span><br><span class="line">sudo wipefs -a /dev/nvme2n1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify the Disk is Clean, Check that no partitions remain</span></span><br><span class="line">sudo lsblk /dev/nvme2n1</span><br></pre></td></tr></table></figure><h2 id="3-Create-Physical-Volume-PV"><a href="#3-Create-Physical-Volume-PV" class="headerlink" title="3. Create Physical Volume (PV)"></a>3. Create Physical Volume (PV)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Convert the entire disk into an LVM physical volume:</span></span><br><span class="line">sudo pvcreate /dev/nvme2n1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify the PV</span></span><br><span class="line">sudo pvdisplay</span><br></pre></td></tr></table></figure><h2 id="4-Create-Volume-Group-VG"><a href="#4-Create-Volume-Group-VG" class="headerlink" title="4. Create Volume Group (VG)"></a>4. Create Volume Group (VG)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create a volume group that spans the entire disk:</span></span><br><span class="line">sudo vgcreate vg_nvme2n1 /dev/nvme2n1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify the VG:</span></span><br><span class="line">sudo vgdisplay</span><br></pre></td></tr></table></figure><h2 id="5-Create-Logical-Volumes-LVs"><a href="#5-Create-Logical-Volumes-LVs" class="headerlink" title="5. Create Logical Volumes (LVs)"></a>5. Create Logical Volumes (LVs)</h2><p>Example: Create Three LVs</p><p><strong>LV1</strong>: 1TB</p><p><strong>LV2</strong>: 1TB</p><p><strong>LV3</strong>: Remaining space</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo lvcreate -L 1T -n lv1 vg_nvme2n1</span><br><span class="line">sudo lvcreate -L 1T -n lv2 vg_nvme2n1</span><br><span class="line">sudo lvcreate -l 100%FREE -n lv3 vg_nvme2n1 --wipesignatures y</span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≥®ÊÑèÂ¶ÇÊûúÂú®lvcreateÁöÑÊó∂ÂÄô‰∏ÄÁõ¥ÊèêÁ§∫ warning wipe offset xxx,ÈÇ£ÊâßË°å sudo lvcreate xxx -y (Âä†-yÂèÇÊï∞)</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify the LVs:</span></span><br><span class="line">sudo lvdisplay</span><br></pre></td></tr></table></figure><h2 id="6-Format-Logical-Volumes"><a href="#6-Format-Logical-Volumes" class="headerlink" title="6. Format Logical Volumes"></a>6. Format Logical Volumes</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Format each logical volume with your desired file system (e.g., XFS):</span></span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2n1/lv1</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2n1/lv2</span><br><span class="line">sudo mkfs.xfs /dev/vg_nvme2n1/lv3</span><br></pre></td></tr></table></figure><h2 id="7-Mount-Logical-Volumes"><a href="#7-Mount-Logical-Volumes" class="headerlink" title="7. Mount Logical Volumes"></a>7. Mount Logical Volumes</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create mount points and mount the LVs:</span></span><br><span class="line">sudo mkdir -p /mnt/nvme2n1/lv1 /mnt/nvme2n1/lv2 /mnt/nvme2n1/lv3</span><br><span class="line"></span><br><span class="line">sudo mount /dev/vg_nvme2n1/lv1 /mnt/nvme2n1/lv1</span><br><span class="line">sudo mount /dev/vg_nvme2n1/lv2 /mnt/nvme2n1/lv2</span><br><span class="line">sudo mount /dev/vg_nvme2n1/lv3 /mnt/nvme2n1/lv3</span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify the mounts:</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure><h2 id="8-Make-the-Mounts-Persistent"><a href="#8-Make-the-Mounts-Persistent" class="headerlink" title="8. Make the Mounts Persistent"></a>8. Make the Mounts Persistent</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Add entries to /etc/fstab to ensure the LVs are mounted on reboot:</span></span><br><span class="line">echo &#x27;/dev/vg_nvme2n1/lv1 /mnt/nvme2n1/lv1 xfs defaults 0 2&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme2n1/lv2 /mnt/nvme2n1/lv2 xfs defaults 0 2&#x27; | sudo tee -a /etc/fstab</span><br><span class="line">echo &#x27;/dev/vg_nvme2n1/lv3 /mnt/nvme2n1/lv3 xfs defaults 0 2&#x27; | sudo tee -a /etc/fstab</span><br></pre></td></tr></table></figure><h1 id="wipe-existed-lv"><a href="#wipe-existed-lv" class="headerlink" title="wipe existed lv"></a>wipe existed lv</h1><h2 id="1-Check-What‚Äôs-Using-the-LV"><a href="#1-Check-What‚Äôs-Using-the-LV" class="headerlink" title="1. Check What‚Äôs Using the LV"></a>1. Check What‚Äôs Using the LV</h2><p>First, identify what is still using the LV:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lsof | grep /dev/mapper/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><p>Also, check active processes using the device:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo fuser -m /dev/mapper/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><p>If any process is using the LV, stop it:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kill -9 &lt;PID&gt;</span><br></pre></td></tr></table></figure><h2 id="2-Unmount-If-Mounted"><a href="#2-Unmount-If-Mounted" class="headerlink" title="2. Unmount If Mounted"></a>2. Unmount If Mounted</h2><p>Check if the LV is mounted:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount | grep /dev/mapper/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><p>If it is mounted, unmount it:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount -l /dev/mapper/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><p>Use -l (lazy unmount) to force unmount if needed.</p><h2 id="3-Disable-the-LV"><a href="#3-Disable-the-LV" class="headerlink" title="3. Disable the LV"></a>3. Disable the LV</h2><p>Before removing the LV, <strong>deactivate it</strong>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lvchange -an /dev/&lt;vg-name&gt;/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><p>Now try to remove it:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dmsetup remove /dev/mapper/&lt;lv-name&gt;</span><br></pre></td></tr></table></figure><h2 id="4-Forcefully-Remove-LV-VG-and-PV"><a href="#4-Forcefully-Remove-LV-VG-and-PV" class="headerlink" title="4. Forcefully Remove LV, VG, and PV"></a>4. Forcefully Remove LV, VG, and PV</h2><p>If the above steps don‚Äôt work, forcefully remove everything:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo lvremove -f /dev/&lt;vg-name&gt;/&lt;lv-name&gt;</span><br><span class="line">sudo vgremove -f &lt;vg-name&gt;</span><br><span class="line">sudo pvremove -f /dev/&lt;device-name&gt;</span><br></pre></td></tr></table></figure><p>Check again with:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br><span class="line">sudo vgs</span><br><span class="line">sudo lvs</span><br></pre></td></tr></table></figure><h2 id="5-If-Everything-Fails"><a href="#5-If-Everything-Fails" class="headerlink" title="5. If Everything Fails"></a>5. If Everything Fails</h2><p>If none of the above works, the safest option is to <strong>reboot</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo wipefs --all --force /dev/&lt;device-name&gt;</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><h1 id="Extend-lv-size"><a href="#Extend-lv-size" class="headerlink" title="Extend lv size"></a>Extend lv size</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lvextend -l +100%FREE /path/to/lv  # e.g. /dev/ubuntu-vg/ubuntu-lv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> ext4</span></span><br><span class="line">resize2fs /path/to/lv  # e.g. /dev/ubuntu-vg/ubuntu-lv</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> xfs</span></span><br><span class="line">xfs_growfs /path/to/extend-path  # e.g. /mnt/data</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> fs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>network snippet</title>
      <link href="/2024/12/05/network%20snippet/"/>
      <url>/2024/12/05/network%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h1><p><strong>Common Name (CN)</strong></p><p><strong>Alternative Name (SAN)</strong></p><p><strong>Transport Layer Security (TLS)</strong></p><h1 id="A-VS-B"><a href="#A-VS-B" class="headerlink" title="A VS B"></a>A VS B</h1><h2 id="SSL-VS-TLS"><a href="#SSL-VS-TLS" class="headerlink" title="SSL VS TLS"></a>SSL VS TLS</h2><blockquote><p>TLS (Transport Layer Security) and SSL (Secure Sockets Layer) are both cryptographic protocols used for secure communication over the internet. However, they have some key differences:</p></blockquote><p><strong>SSL (Secure Sockets Layer)</strong></p><ul><li>Developed by Netscape in 1994 as a predecessor to TLS</li><li>Primarily focused on web browsing security</li><li>Used for encrypting data between a client‚Äôs browser and a server</li><li>Typically used with port 443 (HTTPS)</li><li>Considered insecure due to weaknesses in its encryption algorithms and key exchange mechanisms</li></ul><p><strong>TLS (Transport Layer Security)</strong></p><ul><li>Developed by the Internet Engineering Task Force (IETF) as a successor to SSL</li><li>Focuses on secure communication between any two endpoints, not just web browsing</li><li>Uses more robust encryption algorithms, such as AES-256, and improved key exchange mechanisms</li><li>Supports multiple versions of the protocol (TLS 1.0, TLS 1.1, TLS 1.2)</li><li>Now considered a standard for secure internet communications</li></ul><p><strong>Key differences:</strong></p><ol><li><strong>Name</strong>: SSL was originally used for web browsing security, while TLS is more general-purpose.</li><li><strong>Encryption algorithms</strong>: TLS uses stronger encryption algorithms than SSL.</li><li><strong>Key exchange mechanisms</strong>: TLS has improved key exchange mechanisms compared to SSL.</li><li><strong>Protocol versions</strong>: TLS supports multiple protocol versions (TLS 1.0, TLS 1.1, TLS 1.2), while SSL is typically associated with a single version.</li></ol><p><strong>When to use each:</strong></p><ul><li>Use SSL when you need to maintain compatibility with older systems or browsers that only support the original SSL protocol.</li><li>Use TLS for new applications and systems where security is paramount.</li></ul><p>Keep in mind that most modern systems, including web servers and clients, have already adopted TLS as the standard for secure communication. If you‚Äôre developing a new application or system, it‚Äôs recommended to use TLS to ensure the highest level of security.</p><h2 id="RDMA-vs-InfiniBand-vs-RoCE"><a href="#RDMA-vs-InfiniBand-vs-RoCE" class="headerlink" title="RDMA vs InfiniBand vs RoCE"></a>RDMA vs InfiniBand vs RoCE</h2><table><thead><tr><th><strong>Feature</strong></th><th><strong>RDMA</strong></th><th><strong>InfiniBand</strong></th><th><strong>RoCE</strong></th></tr></thead><tbody><tr><td>Type</td><td>Technology</td><td>Network standard + hardware</td><td>Protocol (RDMA over Ethernet)</td></tr><tr><td>Runs Over</td><td>InfiniBand, RoCE, iWARP</td><td>InfiniBand cables and switches</td><td>Ethernet (RoCE v1/v2)</td></tr><tr><td>Needs RDMA?</td><td>‚úÖ Yes</td><td>‚úÖ Yes (native)</td><td>‚úÖ Yes (via Ethernet NICs with RDMA)</td></tr><tr><td>Main Use Case</td><td>Fast memory transfer</td><td>HPC, low-latency compute</td><td>Data centers, storage over Ethernet</td></tr></tbody></table><p>In Practical Terms:</p><ul><li><strong>RDMA</strong> is the <strong>core mechanism</strong>.</li><li><strong>InfiniBand</strong> is a <strong>specialized RDMA transport</strong>.</li><li><strong>RoCE</strong> is a <strong>way to use RDMA over standard Ethernet</strong> hardware (with special NIC support).</li></ul><p>So, if you have <strong>InfiniBand</strong> hardware ‚Äî you‚Äôre doing <strong>native RDMA</strong>.</p><p>If you‚Äôre using <strong>RoCE</strong> ‚Äî you‚Äôre doing <strong>RDMA over Ethernet</strong> (with RDMA-capable NICs like Mellanox).</p><h1 id="RDMA"><a href="#RDMA" class="headerlink" title="RDMA"></a>RDMA</h1><blockquote><p> RDMA (Remote Direct Memory Access)</p></blockquote><ul><li>RDMA is a <strong>technology</strong> that allows one computer to directly access the memory of another computer <strong>without involving the CPU, OS, or context switching</strong> on the remote system.<ul><li><strong>Low latency</strong></li><li><strong>High throughput</strong></li><li><strong>Very low CPU usage</strong></li></ul></li><li><strong>Used in:</strong> HPC clusters, storage systems, distributed databases (like Ceph, NVMe-oF, RDMA-aware MPI, etc.)</li></ul><h1 id="InfiniBand"><a href="#InfiniBand" class="headerlink" title="InfiniBand"></a>InfiniBand</h1><blockquote><p>RDMA was first implemented over InfiniBand ‚Äî so it‚Äôs the ‚Äúclassic‚Äù RDMA transport</p></blockquote><ul><li>InfiniBand is a <strong>high-performance network architecture</strong> designed specifically for data centers and HPC, and it <strong>natively supports RDMA</strong>.<ul><li>Specialized hardware (InfiniBand adapters and switches)</li><li>Very high bandwidth (100 Gbps+)</li><li>Very low latency</li><li>Used in supercomputers, HPC clusters, etc.</li></ul></li></ul><h1 id="RoCE"><a href="#RoCE" class="headerlink" title="RoCE"></a>RoCE</h1><blockquote><p> RDMA over Converged Ethernet</p></blockquote><ul><li><p>RoCE allows RDMA to run <strong>over standard Ethernet networks</strong> instead of specialized InfiniBand hardware.</p><ul><li><strong>RoCE v1:</strong> Requires a lossless Ethernet fabric (same L2 subnet).</li><li><strong>RoCE v2:</strong> Works over routed networks (L3) using UDP encapsulation.</li></ul></li><li><p>RoCE allows RDMA to be deployed using more common Ethernet-based infrastructure, often used in cloud and data center deployments.</p></li></ul><p>Great follow-up! Let‚Äôs explore the relationship between <strong>RDMA</strong> and <strong>Mellanox</strong>, which is very close and central in the high-performance networking world.</p><h1 id="Mellanox"><a href="#Mellanox" class="headerlink" title="Mellanox"></a>Mellanox</h1><ul><li><strong>Mellanox Technologies</strong> (now owned by <strong>NVIDIA</strong>) is a <strong>leading vendor</strong> of high-performance network interface cards (NICs), switches, and software ‚Äî especially for <strong>InfiniBand</strong> and <strong>Ethernet</strong> with RDMA capabilities.</li><li>Mellanox NIC families (like <strong>ConnectX-3, 4, 5, 6, 7</strong>, etc.) support:<ul><li><strong>InfiniBand RDMA</strong></li><li><strong>RoCE v1 / v2 RDMA</strong></li><li><strong>iWARP</strong> (less commonly used)</li></ul></li><li>Mellanox also provides the <strong>driver stack</strong> and <strong>tools</strong> to enable RDMA:<ul><li>mlx5_ib ‚Üí RDMA over Mellanox NICs</li><li>mlx4_core, mlx5_core ‚Üí core NIC drivers</li><li>ibverbs, rdma-core ‚Üí user-space RDMA APIs</li><li>ethtool, ibstat, ibv_devinfo, rdma ‚Üí debug/config tools</li></ul></li></ul><table><thead><tr><th><strong>Component</strong></th><th><strong>Role</strong></th></tr></thead><tbody><tr><td><strong>RDMA</strong></td><td>Technology for fast memory access</td></tr><tr><td><strong>InfiniBand/RoCE</strong></td><td>Transport for RDMA</td></tr><tr><td><strong>Mellanox NICs</strong></td><td>Hardware that <strong>implements RDMA</strong></td></tr><tr><td><strong>Mellanox drivers</strong></td><td>Software to <strong>enable RDMA support</strong> on Linux</td></tr><tr><td><strong>rdma-core + ibverbs</strong></td><td>API layer used by apps (e.g., MPI, Ceph)</td></tr></tbody></table><p><strong>Mellanox</strong> provides the <strong>hardware and drivers</strong> that make RDMA <em>actually work on your servers</em>.</p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bazel</title>
      <link href="/2024/11/25/bazel/"/>
      <url>/2024/11/25/bazel/</url>
      
        <content type="html"><![CDATA[<p><strong>MODULE.bazel</strong></p><blockquote><p>is equal WORKSPACE at old bazel version</p></blockquote><ul><li>The <code>MODULE.bazel</code> file, which identifies the directory and its contents as a Bazel workspace and lives at the root of the project‚Äôs directory structure. It‚Äôs also where you specify your external dependencies.</li></ul><p><strong>BUILD</strong></p><ul><li>One or more <a href="https://bazel.build/reference/glossary#build-file"><code>BUILD</code> files</a>, which tell Bazel how to build different parts of the project. A directory within the workspace that contains a <code>BUILD</code> file is a package. (More on packages later in this tutorial.)</li></ul>]]></content>
      
      
      <categories>
          
          <category> build </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins practice</title>
      <link href="/2024/11/18/jenkins%20practice/"/>
      <url>/2024/11/18/jenkins%20practice/</url>
      
        <content type="html"><![CDATA[<h1 id="config-SSL"><a href="#config-SSL" class="headerlink" title="config SSL"></a>config SSL</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1 generate the SSL public and private keys</span></span><br><span class="line">openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 365 -out certificate.pem</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2 merge key.pem key and the certificate.pem by converting them to a .p12 keystore</span></span><br><span class="line">openssl pkcs12 -inkey key.pem -in certificate.pem -export -out certificate.p12  # generate certificate.p12</span><br><span class="line"><span class="meta">#</span><span class="bash"> passwd: dongw123</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step3 import the .p12 file with keytool and convert it into a .jks keystore</span></span><br><span class="line">keytool -importkeystore -srckeystore ./certificate.p12 -srcstoretype pkcs12 -destkeystore jenkinsserver.jks -deststoretype JKS # generate jenkinsserver.jks</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step4 Add JKS File to Jenkins Path</span></span><br><span class="line">sudo cp jenkinsserver.jks /var/lib/jenkins/</span><br><span class="line">sudo chown jenkins:jenkins /var/lib/jenkins/jenkinsserver.jks</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step5 Configure Jenkins <span class="keyword">for</span> SSL Communication</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/systemd/system/jenkins.service</span></span><br><span class="line">Environment=&quot;JENKINS_HTTPS_PORT=8443&quot;</span><br><span class="line">Environment=&quot;JENKINS_HTTPS_KEYSTORE=/var/lib/jenkins/jenkinsserver.jks&quot;</span><br><span class="line">Environment=&quot;JENKINS_HTTPS_KEYSTORE_PASSWORD=dongw123&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step6 restart service</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart jenkins.service </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Export Password: dongw123</span><br><span class="line">destination keystore password: dongw123</span><br><span class="line">source keystore password: dongw123</span><br></pre></td></tr></table></figure><h1 id="change-default-data-dir"><a href="#change-default-data-dir" class="headerlink" title="change default data dir"></a>change default data dir</h1><p>To change Jenkins‚Äô default data directory from /var/lib/jenkins to /mnt/disk1, follow these steps:</p><ul><li>Stop Jenkins Service</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop jenkins</span><br></pre></td></tr></table></figure><ul><li>Move the existing data to the new directory:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /var/lib/jenkins /mnt/disk1/</span><br></pre></td></tr></table></figure><ul><li>Ensure the ownership is correct:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R jenkins:jenkins /mnt/disk1/jenkins</span><br></pre></td></tr></table></figure><ul><li>Edit the Jenkins service file</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> edit /etc/systemd/system/jenkins.service or /usr/lib/systemd/system/jenkins.service</span></span><br><span class="line">Environment=&quot;JENKINS_HOME=/mnt/disk1/jenkins&quot;</span><br><span class="line">WorkingDirectory=/mnt/disk1/jenkins</span><br></pre></td></tr></table></figure><ul><li>Reload Systemd and Restart Jenkins</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart jenkins</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> practice </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Prometheus &amp; Grafana</title>
      <link href="/2024/10/25/prometheus%20&amp;%20grafana/"/>
      <url>/2024/10/25/prometheus%20&amp;%20grafana/</url>
      
        <content type="html"><![CDATA[<h1 id="Prometheus"><a href="#Prometheus" class="headerlink" title="Prometheus"></a>Prometheus</h1><h2 id="node-exporter"><a href="#node-exporter" class="headerlink" title="node_exporter"></a>node_exporter</h2><ul><li><p>package</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>prepare user and directory</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd -f dingofs</span><br><span class="line">sudo useradd -g dingofs dingofs</span><br><span class="line">sudo mkdir /etc/node_exporter</span><br><span class="line">sudo chown dingofs:dingofs /etc/node_exporter</span><br><span class="line"></span><br><span class="line">sudo cp /path/to/node_exporter-files/node_exporter /usr/bin/</span><br><span class="line">sudo chown dingofs:dingofs /usr/bin/node_exporter</span><br></pre></td></tr></table></figure></li><li><p>config system service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/lib/systemd/system/node_exporter.service</span><br><span class="line">sudo chmod 664 /usr/lib/systemd/system/node_exporter.service</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">Unit</span>]</span><br><span class="line"><span class="string">Description=Node</span> <span class="string">Exporter</span></span><br><span class="line"><span class="string">Documentation=https://prometheus.io/docs/guides/node-exporter/</span></span><br><span class="line"><span class="string">Wants=network-online.target</span></span><br><span class="line"><span class="string">After=network-online.target</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Service</span>]</span><br><span class="line"><span class="string">User=dingofs</span></span><br><span class="line"><span class="string">Group=dingofs</span></span><br><span class="line"><span class="string">Type=simple</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string">ExecStart=/usr/bin/node_exporter</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--web.listen-address=:19100</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Install</span>]</span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure></li><li><p>start system service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start node_exporter</span><br><span class="line">sudo systemctl status node_exporter</span><br><span class="line">sudo systemctl enable node_exporter.service # Configure node_exporter to start at boot</span><br></pre></td></tr></table></figure></li></ul><h2 id="prometheus-server"><a href="#prometheus-server" class="headerlink" title="prometheus server"></a>prometheus server</h2><ul><li><p>prometheus.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span>     <span class="string">15s</span> <span class="comment"># By default, scrape targets every 15 seconds.</span></span><br><span class="line">  <span class="attr">evaluation_interval:</span> <span class="string">15s</span> <span class="comment"># Evaluate rules every 15 seconds.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Attach these extra labels to all timeseries collected by this Prometheus instance.</span></span><br><span class="line">  <span class="attr">external_labels:</span></span><br><span class="line">    <span class="attr">monitor:</span> <span class="string">&#x27;codelab-monitor&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#rule_files:</span></span><br><span class="line"><span class="comment">#- &#x27;prometheus.rules.yml&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;prometheus&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Override the global default and scrape targets from this job every 5 seconds.</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;172.20.7.232:19090&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;node&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Override the global default and scrape targets from this job every 5 seconds.</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;172.20.7.232:19100&#x27;</span>,<span class="string">&#x27;172.20.7.233:19100&#x27;</span>,<span class="string">&#x27;172.20.7.234:19100&#x27;</span>]</span><br><span class="line">        <span class="attr">labels:</span></span><br><span class="line">          <span class="attr">group:</span> <span class="string">&#x27;metric1&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>docker container</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create persistent volume <span class="keyword">for</span> your data</span></span><br><span class="line">docker volume create prometheus-data</span><br><span class="line"><span class="meta">#</span><span class="bash"> Start Prometheus container</span></span><br><span class="line">docker run -d \</span><br><span class="line">    -p 19090:19090 \</span><br><span class="line">    -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml \</span><br><span class="line">    -v prometheus-data:/prometheus \</span><br><span class="line">    prom/prometheus</span><br></pre></td></tr></table></figure><h1 id="Grafana"><a href="#Grafana" class="headerlink" title="Grafana"></a>Grafana</h1><ul><li><p>deploy container</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> create a persistent volume <span class="keyword">for</span> your data</span></span><br><span class="line">docker volume create grafana-storage</span><br><span class="line"><span class="meta">#</span><span class="bash"> verify that the volume was created correctly</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> you should see some JSON output</span></span><br><span class="line">docker volume inspect grafana-storage</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> start grafana</span></span><br><span class="line">docker run -d -p 13000:3000 --name=grafana \</span><br><span class="line">  --volume grafana-storage:/var/lib/grafana \</span><br><span class="line">  grafana/grafana</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> web login</span></span><br><span class="line">admin/admin</span><br></pre></td></tr></table></figure></li></ul><h2 id="dashboard"><a href="#dashboard" class="headerlink" title="dashboard"></a>dashboard</h2><p><a href="https://grafana.com/grafana/dashboards/">https://grafana.com/grafana/dashboards/</a></p><p><strong>just import from existed dashboard json</strong></p><p>enjoy it</p><ul><li>reference<ul><li><a href="https://grafana.com/docs/grafana/latest/setup-grafana/installation/docker/">official deploy</a></li><li><a href="https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/">config prometheous</a></li><li><a href="https://grafana.com/docs/grafana/latest/getting-started/get-started-grafana-prometheus/">Get started with Grafana and Prometheus</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> monitor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>devops</title>
      <link href="/2024/10/10/devops/"/>
      <url>/2024/10/10/devops/</url>
      
        <content type="html"><![CDATA[<img src="/images/devops/cicd.jpg" style="zoom: 100%">]]></content>
      
      
      <categories>
          
          <category> devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>minio snippet</title>
      <link href="/2024/09/29/minio/"/>
      <url>/2024/09/29/minio/</url>
      
        <content type="html"><![CDATA[<h1 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h1><h2 id="Erasure-Coding"><a href="#Erasure-Coding" class="headerlink" title="Erasure Coding"></a>Erasure Coding</h2><p><strong>Erasure Coding</strong> splits data into data and parity shards. For example, MinIO might use a <strong>4:2 erasure code</strong> (should use 6  disks), meaning each object is split into 4 data shards and 2 parity shards.</p><blockquote><p>In a 4:2 erasure coding setup:</p><p>4 data shards hold the actual object data.</p><p>2 parity shards are created for redundancy.</p></blockquote><p>In this configuration, every object is broken into smaller pieces, with redundancy pieces (parity shards) stored to allow recovery if a disk or node fails.</p><h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service file</span></span><br><span class="line">/usr/lib/systemd/system/minio.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default config file</span></span><br><span class="line">/etc/default/minio</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> reload config after modify default file</span></span><br><span class="line">sudo systemctl stop minio</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Â¶ÇÊûúÊõ¥ÊîπMINIO_VOLUMES‰ø°ÊÅØÔºåÂπ∂‰∏îÈúÄË¶ÅÁî®Âà∞‰πãÂâçÁöÑ‰∏Ä‰∫õÁõòÁ¨¶ÔºåÈúÄË¶ÅÊ∏ÖÁêÜÂπ≤ÂáÄÁõ∏ÂÖ≥ÁõÆÂΩïÁöÑÊñá‰ª∂ÔºàÂåÖÊã¨ÈöêËóèÊñá‰ª∂ .minio.sysÔºâ</span></span><br><span class="line">ÈúÄË¶ÅÁõÆÂΩïÈáåÊ∏ÖÁêÜÈÅóÁïôÁöÑÊâÄÊúâÊñá‰ª∂ Ôºàrm -rf ./* ÂëΩ‰ª§‰∏ç‰ºöÊ∏ÖÁêÜÈöêËóèÊñá‰ª∂Ôºâ</span><br></pre></td></tr></table></figure><ul><li><p>minio.service</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">Unit</span>]</span><br><span class="line"><span class="string">Description=MinIO</span></span><br><span class="line"><span class="string">Documentation=https://docs.min.io</span></span><br><span class="line"><span class="string">Wants=network-online.target</span></span><br><span class="line"><span class="string">After=network-online.target</span></span><br><span class="line"><span class="string">AssertFileIsExecutable=/usr/local/bin/minio</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Service</span>]</span><br><span class="line"><span class="string">Type=notify</span></span><br><span class="line"></span><br><span class="line"><span class="string">WorkingDirectory=/usr/local</span></span><br><span class="line"></span><br><span class="line"><span class="string">User=dingofs</span></span><br><span class="line"><span class="string">Group=dingofs</span></span><br><span class="line"><span class="string">ProtectProc=invisible</span></span><br><span class="line"></span><br><span class="line"><span class="string">EnvironmentFile=-/etc/default/minio</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/bin/minio</span> <span class="string">server</span> <span class="string">$MINIO_OPTS</span> <span class="string">$MINIO_VOLUMES</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Let systemd restart this service always</span></span><br><span class="line"><span class="string">Restart=always</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifies the maximum file descriptor number that can be opened by this process</span></span><br><span class="line"><span class="string">LimitNOFILE=1048576</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Turn-off memory accounting by systemd, which is buggy.</span></span><br><span class="line"><span class="string">MemoryAccounting=no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifies the maximum number of threads this process can create</span></span><br><span class="line"><span class="string">TasksMax=infinity</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable timeout logic and wait until process is stopped</span></span><br><span class="line"><span class="string">TimeoutSec=infinity</span></span><br><span class="line"></span><br><span class="line"><span class="string">SendSIGKILL=no</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Install</span>]</span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure></li><li><p>/etc/default/minio</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">MINIO_VOLUMES=&quot;http://minio&#123;1...3&#125;.dev.net:19000/mnt/disk2/minio&quot;</span></span><br><span class="line"><span class="comment">#MINIO_VOLUMES=&quot;http://minio&#123;1...3&#125;.dev.net:19000/mnt/disk&#123;0...1&#125;/minio&quot;</span></span><br><span class="line"><span class="comment">#MINIO_VOLUMES=&quot;http://minio1.dev.net:19000/mnt/disk1/minio http://minio2.dev.net:19000/mnt/disk1/minio http://minio3.dev.net:19000/mnt/disk1/minio&quot;</span></span><br><span class="line"><span class="comment">#MINIO_VOLUMES=&quot;http://minio2.dev.net:19000/mnt/minio http://minio3.dev.net:19000/mnt/minio&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set all MinIO server options</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following explicitly sets the MinIO Console listen address to</span></span><br><span class="line"><span class="comment"># port 9001 on all network interfaces. The default behavior is dynamic</span></span><br><span class="line"><span class="comment"># port selection.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#MINIO_OPTS=&quot;--console-address :9001&quot;</span></span><br><span class="line"><span class="string">MINIO_OPTS=&#x27;</span> <span class="string">--console-address=&quot;:19001&quot;</span> <span class="string">--address=&quot;:19000&quot;</span> <span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Set the root username. This user has unrestricted permissions to</span></span><br><span class="line"><span class="string"># perform S3 and administrative API operations on any resource in the</span></span><br><span class="line"><span class="string"># deployment.</span></span><br><span class="line"><span class="string">#</span></span><br><span class="line"><span class="string"># Defer to your organizations requirements for superadmin user name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MINIO_ROOT_USER=minioadmin</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Set the root password</span></span><br><span class="line"><span class="string">#</span></span><br><span class="line"><span class="string"># Use a long, random, unique string that meets your organizations</span></span><br><span class="line"><span class="string"># requirements for passwords.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MINIO_ROOT_PASSWORD=minioadmin</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="client"><a href="#client" class="headerlink" title="client"></a>client</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl https://dl.min.io/client/mc/release/linux-amd64/mc \</span><br><span class="line">  --create-dirs \</span><br><span class="line">  -o $HOME/minio-binaries/mc</span><br><span class="line"></span><br><span class="line">chmod +x $HOME/minio-binaries/mc</span><br><span class="line"></span><br><span class="line">cp $HOME/minio-binaries/mc /usr/bin/</span><br><span class="line"></span><br><span class="line">mc alias set myminio http://minio1.dev.net:19000 &#123;ak&#125; &#123;sk&#125;</span><br></pre></td></tr></table></figure><h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><ul><li>log</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mc admin logs myminio</span><br></pre></td></tr></table></figure><ul><li>development</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> add development</span></span><br><span class="line">mc alias set myminio &#123;endpoint_address&#125; &#123;ak&#125; &#123;sk&#125; </span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. mc <span class="built_in">alias</span> <span class="built_in">set</span> myminio http://minio1.dev.net:19000 1111111 22222222</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> alias-tls</span></span><br><span class="line">Áúã‰∏ãÈù¢ÁöÑ mc alias ÂÜÖÂÆπ</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls <span class="built_in">alias</span></span></span><br><span class="line">mc alias list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> overview info</span></span><br><span class="line">mc admin info myminio</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check config</span> </span><br><span class="line">mc admin config get myminio</span><br></pre></td></tr></table></figure><ul><li>bucket</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> create bucket</span></span><br><span class="line">mc mb &lt;ALIAS&gt;/&lt;BUCKET&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list bucket</span></span><br><span class="line">mc ls &lt;ALIAS&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check bucket</span></span><br><span class="line">mc ls &lt;ALIAS&gt;/&lt;BUCKET&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> count total object/file num</span></span><br><span class="line">mc ls --summarize --recursive gateway-minio</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check object</span></span><br><span class="line">mc cat &lt;ALIAS&gt;/&lt;BUCKET&gt;/&lt;OBJECT&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete object</span></span><br><span class="line">mc rm &lt;ALIAS&gt;/&lt;BUCKET&gt;/&lt;OBJECT&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete according specify time</span> </span><br><span class="line">mc find &lt;alias/bucket-name&gt; --older-than &lt;time&gt; --exec &quot;mc rm &#123;&#125;&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. mc find myminio/mybucket --older-than 30d --<span class="built_in">exec</span> <span class="string">&quot;mc rm &#123;&#125;&quot;</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete all data</span></span><br><span class="line">mc rm --recursive --force &lt;ALIAS&gt;/&lt;BUCKET&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> force delete bucket</span></span><br><span class="line">mc rb --force &lt;ALIAS&gt;/&lt;BUCKET&gt;  # must delete bucket&#x27;s object file first</span><br></pre></td></tr></table></figure><ul><li>heal</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Use MinIO‚Äôs heal <span class="built_in">command</span> to ensure the data and metadata are consistent:</span></span><br><span class="line">mc admin heal -r &lt;ALIAS&gt;/</span><br></pre></td></tr></table></figure><ul><li>erasure code</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> erasure code</span></span><br><span class="line">mc admin config set myminio storage_class standard=EC:0</span><br><span class="line"><span class="meta">#</span><span class="bash"> should restart minio.service, and <span class="string">&#x27;systemctl status minio&#x27;</span> will <span class="built_in">print</span> <span class="string">&#x27;WARN: The standard parity is set to 0. This can lead to data loss&#x27;</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check storage_class</span> </span><br><span class="line">mc admin config get myminio storage_class</span><br></pre></td></tr></table></figure><h1 id="TLS"><a href="#TLS" class="headerlink" title="TLS"></a>TLS</h1><ul><li><a href="https://min.io/docs/minio/linux/operations/network-encryption.html#enabling-tls">enabling-tls</a></li></ul><blockquote><p>172.20.61.102 minio1.dev.net<br>172.20.61.103 minio2.dev.net<br>172.20.61.105 minio3.dev.net</p><p>/etc/default/minio:<br>MINIO_VOLUMES=‚Äù<a href="https://minio{1...3}.dev.net:19000/mnt/minio%7B1...2%7D&quot;">https://minio{1...3}.dev.net:19000/mnt/minio{1...2}&quot;</a><br>MINIO_OPTS=‚Äô ‚Äìconsole-address=‚Äù:19001‚Äù ‚Äìaddress=‚Äù:19000‚Äù ‚Äò</p></blockquote><p>By default, the MinIO server looks for the TLS keys and certificates for each node in the following directory: <code>$&#123;HOME&#125;/.minio/certs</code> (ËØ•ËØÅ‰π¶Â≠òÊîæÂêÑËá™Êú∫Âô®ÁöÑ<code>private.key</code> Âíå <code>public.crt</code>Ôºå ÊØèÂè∞Êú∫Âô®ÁöÑ <code>private.key</code> Âíå <code>public.crt</code>ÈÉΩ‰∏ç‰∏ÄÊ†∑)</p><p>If using Certificates signed by a non-global or non-public Certificate Authority, <em>or</em> if using a global CA that requires the use of intermediate certificates, you must provide those CAs to the MinIO Server <code>/root/.minio/certs/CAs</code> (Áî®Êù•Â≠òÊîæÁßÅÊúâÁöÑËØÅ‰π¶<code>ca.crt</code>ÔºåËØ•ËØÅ‰π¶Áî®‰∫éÁîüÊàêÊú∫Âô®ÁöÑ<code>private.key</code> Âíå <code>public.crt</code>Ôºå ÈõÜÁæ§ÁöÑÊØèÂè∞Êú∫Âô®Â≠òÊîæÁöÑ<code>ca.crt</code>Â∫îËØ•‰øùÊåÅ‰∏ÄËá¥)</p><ol><li><strong>Generate CA and Certificates <code>generate_certificate.sh</code></strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate CA private key</span></span><br><span class="line">openssl genrsa -out ca.key 4096</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create CA certificate</span></span><br><span class="line">openssl req -x509 -new -nodes -key ca.key -sha256 -days 3650 \</span><br><span class="line">    -out ca.crt \</span><br><span class="line">    -subj <span class="string">&quot;/C=US/ST=YourState/L=YourCity/O=YourOrg/OU=YourUnit/CN=MinioCA&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate server private keys for each node</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> minio1 minio2 minio3; <span class="keyword">do</span></span><br><span class="line">    openssl genrsa -out <span class="variable">$&#123;node&#125;</span>.key 2048</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Create server certificate signing request (CSR)</span></span><br><span class="line">    openssl req -new -key <span class="variable">$&#123;node&#125;</span>.key -out <span class="variable">$&#123;node&#125;</span>.csr \</span><br><span class="line">        -subj <span class="string">&quot;/C=US/ST=YourState/L=YourCity/O=YourOrg/OU=YourUnit/CN=<span class="variable">$&#123;node&#125;</span>.dev.net&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Create server certificate configuration</span></span><br><span class="line">    cat &gt; <span class="variable">$&#123;node&#125;</span>.ext &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">authorityKeyIdentifier=keyid,issuer</span></span><br><span class="line"><span class="string">basicConstraints=CA:FALSE</span></span><br><span class="line"><span class="string">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span></span><br><span class="line"><span class="string">subjectAltName = @alt_names</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[alt_names]</span></span><br><span class="line"><span class="string">DNS.1 = $&#123;node&#125;.dev.net</span></span><br><span class="line"><span class="string">IP.1 = 172.20.61.$(grep $&#123;node&#125; /etc/hosts | awk &#x27;&#123;print $1&#125;&#x27; | cut -d. -f4)</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sign server certificate with CA</span></span><br><span class="line">    openssl x509 -req -<span class="keyword">in</span> <span class="variable">$&#123;node&#125;</span>.csr -CA ca.crt -CAkey ca.key \</span><br><span class="line">        -CAcreateserial -out <span class="variable">$&#123;node&#125;</span>.crt -days 3650 \</span><br><span class="line">        -sha256 -extfile <span class="variable">$&#123;node&#125;</span>.ext</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p><strong>Distribute Certificates <code>copy_certificate.sh</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create certificate directories</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> minio1 minio2 minio3; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># Copy node-specific certificate and key</span></span><br><span class="line">    scp <span class="variable">$&#123;node&#125;</span>.crt root@<span class="variable">$&#123;node&#125;</span>.dev.net:/root/.minio/certs/public.crt</span><br><span class="line">    scp <span class="variable">$&#123;node&#125;</span>.key root@<span class="variable">$&#123;node&#125;</span>.dev.net:/root/.minio/certs/private.key</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Copy CA certificate to trusted CAs</span></span><br><span class="line">    scp ca.crt root@<span class="variable">$&#123;node&#125;</span>.dev.net:/root/.minio/certs/CAs/</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Update MinIO Configuration</strong><br>Modify <code>/etc/default/minio</code> on each node to ensure proper TLS configuration:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Update MINIO_VOLUMES to use https</span></span><br><span class="line">MINIO_VOLUMES=<span class="string">&quot;https://minio&#123;1...3&#125;.dev.net:19000/mnt/minio&#123;1...2&#125;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>Set Correct Permissions (optional)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> minio1 minio2 minio3; <span class="keyword">do</span></span><br><span class="line">    ssh root@<span class="variable">$&#123;node&#125;</span>.dev.net <span class="string">&quot;</span></span><br><span class="line"><span class="string">    chown -R minio:minio /root/.minio/certs</span></span><br><span class="line"><span class="string">    chmod 700 /root/.minio/certs</span></span><br><span class="line"><span class="string">    chmod 600 /root/.minio/certs/private.key</span></span><br><span class="line"><span class="string">    chmod 644 /root/.minio/certs/public.crt /root/.minio/certs/CAs/*</span></span><br><span class="line"><span class="string">    &quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Restart MinIO Cluster</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart minio</span><br></pre></td></tr></table></figure></li><li><p> <strong>Trust certificate globally</strong></p></li></ol><blockquote><p>ÊØèÂè∞Êú∫Âô®ÂùáÈúÄË¶ÅÊìç‰Ωú‰∏ÄÈÅçÔºàËøôÊ†∑ÂèØ‰ª•‰øùËØÅmcËÆæÁΩÆaliasÊàêÂäüÔºâ</p></blockquote>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp ca.crt /etc/pki/ca-trust/source/anchors/</span><br><span class="line">sudo update-ca-trust extract</span><br><span class="line">sudo openssl verify -CAfile /etc/pki/tls/certs/ca-bundle.crt /etc/pki/ca-trust/source/anchors/ca.crt</span><br></pre></td></tr></table></figure><ol start="7"><li>Verification</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check TLS configuration on each node</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> minio1 minio2 minio3; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Checking <span class="variable">$&#123;node&#125;</span>:&quot;</span></span><br><span class="line">    ssh root@<span class="variable">$&#123;node&#125;</span>.dev.net <span class="string">&quot;</span></span><br><span class="line"><span class="string">    openssl x509 -in /root/.minio/certs/public.crt -text -noout</span></span><br><span class="line"><span class="string">    echo &#x27;---&#x27;</span></span><br><span class="line"><span class="string">    netstat -tuln | grep 19000</span></span><br><span class="line"><span class="string">    echo &#x27;---&#x27;</span></span><br><span class="line"><span class="string">    systemctl status minio</span></span><br><span class="line"><span class="string">    &quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>browser check</p><img src="/images/minio/cert.jpg" style="zoom: 60%"><h2 id="mc-alias"><a href="#mc-alias" class="headerlink" title="mc alias"></a>mc alias</h2><ul><li><p>step1: fetch the MinIO server‚Äôs certificate</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -n | openssl s_client -connect 172.30.14.127:19000 -showcerts | openssl x509</span><br></pre></td></tr></table></figure></li><li><p>step2: Move the Certificate to the Trusted Store</p><ul><li><p>ubuntu</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /usr/local/share/ca-certificates/  </span><br><span class="line"><span class="meta">#</span><span class="bash"> copy the entire certificate from step1 (including -----BEGIN CERTIFICATE----- and -----END CERTIFICATE-----).</span></span><br><span class="line">sudo vim /usr/local/share/ca-certificates/minio.crt</span><br><span class="line">sudo update-ca-certificates</span><br></pre></td></tr></table></figure></li><li><p>rocky</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/pki/ca-trust/source/anchors/</span><br><span class="line"><span class="meta">#</span><span class="bash"> copy the entire certificate from step1 (including -----BEGIN CERTIFICATE----- and -----END CERTIFICATE-----).</span></span><br><span class="line">sudo vim /etc/pki/ca-trust/source/anchors/minio.crt</span><br><span class="line">sudo update-ca-trust extract</span><br><span class="line">export SSL_CERT_FILE=/etc/pki/ca-trust/source/anchors/minio.crt</span><br></pre></td></tr></table></figure></li></ul></li><li><p>step3: add alias</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mc alias set minio127 https://172.30.14.127:19000 &lt;ak&gt; &lt;sk&gt;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> minio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kubectl command</title>
      <link href="/2024/09/15/kubectl%20command/"/>
      <url>/2024/09/15/kubectl%20command/</url>
      
        <content type="html"><![CDATA[<h1 id="common"><a href="#common" class="headerlink" title="common"></a>common</h1><h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl version</span><br><span class="line">kubectl api-versions</span><br></pre></td></tr></table></figure><h2 id="health"><a href="#health" class="headerlink" title="health"></a>health</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check kubernetes inner ip</span> </span><br><span class="line">kubectl get svc kubernetes -n default</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check api server</span></span><br><span class="line">kubectl get componentstatuses</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check crd</span></span><br><span class="line">kubectl get crd | grep cert-manager</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check all pods</span></span><br><span class="line">kubectl get pods -A</span><br></pre></td></tr></table></figure><h2 id="namespace"><a href="#namespace" class="headerlink" title="namespace"></a>namespace</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get namespaces</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete all resource by specify namespace</span></span><br><span class="line">kubectl delete all --all -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h1 id="node"><a href="#node" class="headerlink" title="node"></a>node</h1><h2 id="resource"><a href="#resource" class="headerlink" title="resource"></a>resource</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 1: Check Node Resource Availability</span></span><br><span class="line">kubectl describe node &lt;node-name&gt;  # check Capacity, Allocatable, Allocated resources</span><br><span class="line">‚Ä¢CPU available = Allocatable CPU - CPU Requests</span><br><span class="line">‚Ä¢Memory available = Allocatable Memory - Memory Requests</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 2: Get Detailed Resource Requests &amp; Limits <span class="keyword">for</span> All Pods</span></span><br><span class="line">kubectl get pods -A -o=custom-columns=&quot;NAMESPACE:.metadata.namespace,NAME:.metadata.name,CPU_REQUESTS:.spec.containers[*].resources.requests.cpu,MEM_REQUESTS:.spec.containers[*].resources.requests.memory,CPU_LIMITS:.spec.containers[*].resources.limits.cpu,MEM_LIMITS:.spec.containers[*].resources.limits.memory&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 3:  Output <span class="keyword">for</span> Advanced Parsing json</span></span><br><span class="line">kubectl get nodes -o json | jq &#x27;.items[] | &#123;name: .metadata.name, allocatable: .status.allocatable&#125;&#x27;</span><br></pre></td></tr></table></figure><h2 id="label"><a href="#label" class="headerlink" title="label"></a>label</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> show all labels</span></span><br><span class="line">kubectl get nodes --show-labels</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add label on node</span></span><br><span class="line">kubectl label node &lt;node-name&gt; &lt;label-key&gt;=&lt;label-value&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remove label from node</span></span><br><span class="line">kubectl label node &lt;node-name&gt; &lt;label-key&gt;-</span><br><span class="line"><span class="meta">#</span><span class="bash"> kubectl label nodes sd-shangdi-ceph17 dingofs-csi-node-</span></span><br></pre></td></tr></table></figure><h2 id="taint"><a href="#taint" class="headerlink" title="taint"></a>taint</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check node is taint or not</span></span><br><span class="line">kubectl describe node &lt;nodeName&gt; | grep -i taint</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> taint node <span class="built_in">print</span></span></span><br><span class="line">Taints: nodepool=fault:NoSchedule</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> normal node <span class="built_in">print</span></span></span><br><span class="line">Taints: &lt;none&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tag taint</span></span><br><span class="line">kubectl taint node &lt;node&gt; nodepool=fault:NoSchedule</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remove taint</span></span><br><span class="line">kubectl taint node &lt;node-name&gt; &lt;key&gt;:&lt;value&gt;-</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. kubectl taint node node1 nodepool=fault:NoSchedule-</span></span><br></pre></td></tr></table></figure><h1 id="All"><a href="#All" class="headerlink" title="All"></a>All</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> delete all resource</span></span><br><span class="line">kubectl delete all --all -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h1 id="pod"><a href="#pod" class="headerlink" title="pod"></a>pod</h1><h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list namespace<span class="string">&#x27;s pod</span></span></span><br><span class="line">kubectl get pod -n &#123;namespace&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> describe</span></span></span><br><span class="line">kubectl describe pod &#123;podName&#125;</span><br></pre></td></tr></table></figure><h2 id="log"><a href="#log" class="headerlink" title="log"></a>log</h2><blockquote><p>-c <container-name>: Specify which container to retrieve logs from.</p><p>-f: Stream the logs in real-time.</p><p>‚Äìprevious: Show logs from the last terminated container.</p><p>‚Äìsince=<duration>: Return logs for the last period (e.g., 1h, 30m).</p><p>‚Äìtail=<lines>: Limit the number of log lines returned.</p><p>‚Äìall-containers=true: Get logs from all containers in the pod.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pod</span></span><br><span class="line">kubectl logs -f &#123;podId&#125; -n &#123;namespace&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pod<span class="string">&#x27;s container</span></span></span><br><span class="line">kubectl logs &lt;pod-name&gt; -c &lt;container-name&gt; -n &lt;namespace&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> check the logs from previous crash container</span></span></span><br><span class="line">kubectl logs &lt;pod-name&gt; --previous -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h2 id="config"><a href="#config" class="headerlink" title="config"></a>config</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod &lt;ÂÆπÂô®id&gt; --kubeconfig=/path/to/configfile -o yaml &gt; env-vq48.yaml</span><br><span class="line"><span class="meta">#</span><span class="bash"> kubectl get -o yaml ËøôÊ†∑ÁöÑÂèÇÊï∞Ôºå‰ºöÂ∞ÜÊåáÂÆöÁöÑ Pod API ÂØπË±°‰ª• YAML ÁöÑÊñπÂºèÂ±ïÁ§∫Âá∫Êù•„ÄÇ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> expose</span></span><br><span class="line">kubectl get pod &lt;pod-name&gt; -n &lt;namespace&gt; -o yaml &gt; pod-config.yaml</span><br></pre></td></tr></table></figure><h2 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h2><p>without kubeconfig</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> enter pod on specify container</span></span><br><span class="line">kubectl exec -it &#123;pod_id&#125; -n &#123;namespace&#125; -c &#123;container_id&#125; -- sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> execute specify <span class="built_in">command</span> on pod</span></span><br><span class="line">kubectl exec -it &#123;pod_id&#125; -n &#123;namespace&#125; -c &#123;container_id&#125; -- &lt;shell&gt;</span><br><span class="line">e.g. kubectl exec -it csi-node-1 -n dingofs -- cat /etc/resolv.conf</span><br></pre></td></tr></table></figure><h2 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl cp ÂëΩ‰ª§Á©∫Èó¥/ÂÆπÂô®id:path/to/source_file ./path/to/local_file</span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê≥®ÊÑè podÈáåÈù¢ÁöÑË∑ØÂæÑÊó†ÈúÄÂ∏¶ /Ôºå‰ΩøÁî®Áõ∏ÂØπË∑ØÂæÑÂç≥ÂèØÔºàÁõ∏ÂØπ‰∫éËøõÂÖ•pod‰πãÂêéÁöÑÈªòËÆ§ÁõÆÂΩïÔºâ</span></span><br></pre></td></tr></table></figure><h2 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 1</span></span><br><span class="line">kubectl delete pod &#123;pod_name&#125; --grace-period=0 --force -n &#123;namespace&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 2</span></span><br><span class="line">kubectl patch pod &lt;pod-name&gt; -n &lt;target-namespace&gt; -p &#x27;&#123;&quot;metadata&quot;:&#123;&quot;finalizers&quot;:null&#125;&#125;&#x27; --type=merge</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 3</span></span><br><span class="line">step1 : kubectl edit pod &lt;pod-name&gt; -n &lt;namespace&gt;</span><br><span class="line">step2 : delete the finalizers array under metadata, save the file, and exit</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>Aspect</strong></th><th><strong><code>kubectl patch</code></strong></th><th><strong><code>kubectl edit</code></strong></th></tr></thead><tbody><tr><td><strong>Interaction</strong></td><td>Non-interactive (scriptable).</td><td>Interactive (manual editing).</td></tr><tr><td><strong>Precision</strong></td><td>Targets only the <code>finalizers</code> field.</td><td>Requires manually deleting <code>finalizers</code>.</td></tr><tr><td><strong>Use Case</strong></td><td>Automation (e.g., CI/CD pipelines).</td><td>Debugging or ad-hoc fixes.</td></tr><tr><td><strong>Safety</strong></td><td>Risk of typos in JSON syntax.</td><td>Risk of accidental edits to other fields.</td></tr></tbody></table><h1 id="statefulset"><a href="#statefulset" class="headerlink" title="statefulset"></a>statefulset</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> restart</span></span><br><span class="line">kubectl rollout restart StatefulSet/dingofs-csi-controller -n dingofs</span><br></pre></td></tr></table></figure><h1 id="daemonsets"><a href="#daemonsets" class="headerlink" title="daemonsets"></a>daemonsets</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get daemonsets --all-namespaces</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> restart</span> </span><br><span class="line">kubectl rollout restart daemonset/dingofs-csi-node -n dingofs</span><br></pre></td></tr></table></figure><h1 id="service"><a href="#service" class="headerlink" title="service"></a>service</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc -o wide -n &lt;namespace&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete all</span></span><br><span class="line">kubectl delete service --all -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h1 id="storage"><a href="#storage" class="headerlink" title="storage"></a>storage</h1><h2 id="CSIDriver"><a href="#CSIDriver" class="headerlink" title="CSIDriver"></a>CSIDriver</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get csidrivers</span><br></pre></td></tr></table></figure><h2 id="storageclass"><a href="#storageclass" class="headerlink" title="storageclass"></a>storageclass</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get storageclass</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete</span> </span><br><span class="line">kubectl delete storageclass &lt;sc-name&gt;</span><br></pre></td></tr></table></figure><h2 id="pvc"><a href="#pvc" class="headerlink" title="pvc"></a>pvc</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pvc</span><br></pre></td></tr></table></figure><h2 id="pv"><a href="#pv" class="headerlink" title="pv"></a>pv</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list pv</span></span><br><span class="line">kubectl get pv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete multiply pv</span></span><br><span class="line">kubectl get pv --no-headers | grep &lt;NAME&gt; | awk &#x27;&#123;print $1&#125;&#x27; | xargs kubectl delete pv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete released status pvc</span></span><br><span class="line">kubectl get pv -o json | jq -r &#x27;.items[] | select(.status.phase==&quot;Released&quot;) | .metadata.name&#x27; | xargs kubectl delete pv</span><br></pre></td></tr></table></figure><ul><li><p>delete pv</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1: change stragety</span></span><br><span class="line">kubectl patch pv PV_NAME -p &#x27;&#123;&quot;spec&quot;:&#123;&quot;persistentVolumeReclaimPolicy&quot;:&quot;Delete&quot;&#125;&#125;&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2: delete</span></span><br><span class="line">kubectl delete pv PV_NAME</span><br></pre></td></tr></table></figure></li><li><p>PV reavailable</p><blockquote><p> Áé∞Ë±°ÔºöÂú®ÂéüÊúâPVÂ∑≤Áªèbound‰∏äpvcÁöÑÊÉÖÂÜµ‰∏ãÔºàpvÊ≠§Êó∂Áä∂ÊÄÅ‰Ωç boundÔºâÔºå‰øÆÊîπ‰∫ÜpvcÁöÑÂèÇÊï∞ÔºåÂπ∂Âà†Èô§pvcÔºàÊ≠§Êó∂pvÁä∂ÊÄÅ‰∏∫releaseÔºâÔºåÈáçÊñ∞Â∫îÁî®pvc‰πãÂêé ÔºàÊ≠§Êó∂pvÁä∂ÊÄÅ‰∏∫releaseÔºâ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÈúÄË¶ÅÂ∫îÁî® `kubectl patch pv pv-1 -p <span class="string">&#x27;&#123;&quot;spec&quot;:&#123;&quot;claimRef&quot;:null&#125;&#125;&#x27;</span>`ÔºåÊää pvÁä∂ÊÄÅÁΩÆ‰∏∫ avaliableÔºåËøá‰∏Ä‰ºö pvÂ∞±‰ºöÂíåpvcÂÜçÊ¨°ÁªëÂÆöÔºàpvÁä∂ÊÄÅÂèò‰∏∫boundÔºâ</span></span><br><span class="line">kubectl patch pv &lt;pv-name&gt; -p &#x27;&#123;&quot;spec&quot;:&#123;&quot;claimRef&quot;:null&#125;&#125;&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kubectl patch pv pv-1 -p <span class="string">&#x27;&#123;&quot;spec&quot;:&#123;&quot;persistentVolumeReclaimPolicy&quot;:&quot;Retain&quot;&#125;&#125;&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kubectl patch pv pv-1 -p <span class="string">&#x27;&#123;&quot;metadata&quot;:&#123;&quot;finalizers&quot;:null&#125;&#125;&#x27;</span></span></span><br></pre></td></tr></table></figure></li></ul><h1 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list role</span></span><br><span class="line">kubectl get role -n &lt;namespace&gt;  # -o yaml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list clusterrole</span></span><br><span class="line">kubectl get clusterrole</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list RoleBinding</span></span><br><span class="line">kubectl get rolebinding -n &lt;namespace&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list clusterrolebinding</span></span><br><span class="line">kubectl get clusterrolebinding</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check <span class="keyword">if</span> the User Can List Pods <span class="keyword">in</span> Namespace</span></span><br><span class="line">kubectl auth can-i list pods --as=&lt;userName&gt; -n &lt;namespace&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check If the ServiceAccount Has Permissions to Get DaemonSets</span></span><br><span class="line">kubectl auth can-i get daemonsets --as=system:serviceaccount:&lt;namespace&gt;:&lt;serviceAccount&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubectl </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ceph command</title>
      <link href="/2024/09/09/ceph%20command/"/>
      <url>/2024/09/09/ceph%20command/</url>
      
        <content type="html"><![CDATA[<h1 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h1><h2 id="cephadm"><a href="#cephadm" class="headerlink" title="cephadm"></a>cephadm</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1 monitor</span></span><br><span class="line">cephadm bootstrap --mon-ip *&lt;mon-ip&gt;*</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ceph shell</span></span><br><span class="line">sudo ./cephadm shell</span><br></pre></td></tr></table></figure><h1 id="service"><a href="#service" class="headerlink" title="service"></a>service</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check all vaild service</span></span><br><span class="line">ceph orch ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check all vaild/invaild service</span></span><br><span class="line">ceph orch ps</span><br></pre></td></tr></table></figure><h1 id="cluster"><a href="#cluster" class="headerlink" title="cluster"></a>cluster</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 1</span></span><br><span class="line">ceph fsid</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 2</span></span><br><span class="line">cat /etc/ceph/ceph.conf | grep fsid</span><br></pre></td></tr></table></figure><h1 id="User"><a href="#User" class="headerlink" title="User"></a>User</h1><ul><li><p>check userId</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph auth list</span><br></pre></td></tr></table></figure></li></ul><h1 id="health"><a href="#health" class="headerlink" title="health"></a>health</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ceph df</span><br></pre></td></tr></table></figure><h1 id="host"><a href="#host" class="headerlink" title="host"></a>host</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list host</span></span><br><span class="line">ceph orch host ls --detail</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add host</span></span><br><span class="line">ssh-copy-id -f -i /etc/ceph/ceph.pub root@*&lt;new-host&gt;*</span><br><span class="line">ceph orch host add *&lt;newhost&gt;* [*&lt;ip&gt;*] [*&lt;label1&gt; ...*]</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.  ceph orch host add host2 10.10.0.102 --labels _admin</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remove host</span></span><br><span class="line">ceph orch host drain *&lt;host&gt;*</span><br><span class="line">ceph orch ps &lt;host&gt;  # daemons on the host</span><br><span class="line">ceph orch host rm &lt;host&gt; # remove the host from the cluster after all daemons have been removed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add storage</span></span><br><span class="line">ceph orch apply osd --all-available-devices</span><br></pre></td></tr></table></figure><h1 id="osd"><a href="#osd" class="headerlink" title="osd"></a>osd</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list</span></span><br><span class="line">ceph orch device ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Creating New OSDs</span></span><br><span class="line">ceph orch apply osd --all-available-devices</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line">ceph orch daemon add osd *&lt;host&gt;*:*&lt;device-path&gt;*</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.</span></span><br><span class="line">ceph orch daemon add osd host1:/dev/sdb</span><br><span class="line">ceph orch daemon add osd host1:data_devices=/dev/sda,/dev/sdb,db_devices=/dev/sdc,osds_per_device=2</span><br></pre></td></tr></table></figure><h1 id="RGW"><a href="#RGW" class="headerlink" title="RGW"></a>RGW</h1><blockquote><p>radosgw</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">enable</span> rgw</span></span><br><span class="line">ceph mgr module enable rgw</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config rgw name e.g. foo</span></span><br><span class="line">ceph orch apply rgw foo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> lable host</span> </span><br><span class="line">ceph orch host label add gwhost1 rgw  # the &#x27;rgw&#x27; label can be anything</span><br><span class="line">ceph orch host label add gwhost2 rgw</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apply</span></span><br><span class="line">ceph orch apply rgw foo &#x27;--placement=label:rgw count-per-host:2&#x27; --port=8000</span><br></pre></td></tr></table></figure><h1 id="monitor"><a href="#monitor" class="headerlink" title="monitor"></a>monitor</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ceph mon dump</span><br><span class="line"><span class="meta">#</span><span class="bash"> &lt;mon-ip&gt;:6789</span></span><br></pre></td></tr></table></figure><h1 id="Ceph-Object-Gateway"><a href="#Ceph-Object-Gateway" class="headerlink" title="Ceph Object Gateway"></a>Ceph Object Gateway</h1>]]></content>
      
      
      <categories>
          
          <category> ceph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ learn</title>
      <link href="/2024/09/08/c++%20learn/"/>
      <url>/2024/09/08/c++%20learn/</url>
      
        <content type="html"><![CDATA[<h1 id="philosophy"><a href="#philosophy" class="headerlink" title="philosophy"></a>philosophy</h1><p>The underlying design philosophy of C and C++ can be summed up as ‚Äútrust the programmer‚Äù ‚Äì which is both wonderful and dangerous. C++ is designed to allow the programmer a high degree of freedom to do what they want. However, this also means the language often won‚Äôt stop you from doing things that don‚Äôt make sense, because it will assume you‚Äôre doing so for some reason it doesn‚Äôt understand. There are quite a few pitfalls that new programmers are likely to fall into if caught unaware. This is one of the primary reasons why knowing what you shouldn‚Äôt do in C/C++ is almost as important as knowing what you should do.</p><p>Typically, good solutions have the following characteristics:</p><ul><li>They are straightforward (not overly complicated or confusing).</li><li>They are well documented (especially around any assumptions being made or limitations).</li><li>They are built modularly, so parts can be reused or changed later without impacting other parts of the program.</li><li>They can recover gracefully or give useful error messages when something unexpected happens.</li></ul><h1 id="terminology"><a href="#terminology" class="headerlink" title="terminology"></a>terminology</h1><ul><li>CTAD (class template argument deduction) </li></ul><h1 id="compiler"><a href="#compiler" class="headerlink" title="compiler"></a>compiler</h1><ul><li><p><strong>Build</strong> compiles all <em>modified</em> code files in the project or workspace/solution, and then links the object files into an executable. If no code files have been modified since the last build, this option does nothing.</p><ul><li>compile</li></ul><img src="/images/c++/CompileSource.png" style="zoom:100%;"/><ul><li>linking</li></ul><img src="/images/c++/LinkingObjects.webp"><p><strong>g++ÔºàGNU Compiler Collection for C++Ôºâ</strong></p><p><code>g++</code> ÊòØ GNU ÁºñËØëÂô®ÈõÜÂêàÔºàGNU Compiler Collection, GCCÔºâÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰∏ìÈó®Áî®‰∫éÁºñËØë C++ Á®ãÂ∫è„ÄÇGCC ÊòØÁî± GNU È°πÁõÆÂºÄÂèëÁöÑÂºÄÊ∫êÁºñËØëÂô®ÔºåÊîØÊåÅÂ§öÁßçÁºñÁ®ãËØ≠Ë®ÄÔºåÂåÖÊã¨ C„ÄÅC++„ÄÅObjective-C„ÄÅFortran„ÄÅAda Âíå Go Á≠â„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> use</span></span><br><span class="line">g++ -o my_program my_program.cpp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> specify compiler standard</span></span><br><span class="line">g++ --std=gnu++17 &#123;filename&#125;.cpp</span><br></pre></td></tr></table></figure><p><strong>clang++ÔºàClang C++ FrontendÔºâ</strong></p><p><code>clang++</code> ÊòØ Clang È°πÁõÆÁöÑ‰∏ÄÈÉ®ÂàÜÔºåClang ÊòØ‰∏Ä‰∏™Áî±ËãπÊûúÂÖ¨Âè∏‰∏ªÂØºÂºÄÂèëÁöÑÁºñËØëÂô®ÂâçÁ´ØÔºåÁî®‰∫éÊõø‰ª£ GCC„ÄÇÂÆÉ‰∏ç‰ªÖÊîØÊåÅ C++ÔºåËøòÊîØÊåÅ C„ÄÅObjective-C ÂíåÂÖ∂‰ªñËØ≠Ë®Ä„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> use</span></span><br><span class="line">clang++ -o my_program my_program.cpp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> specify compiler standard</span></span><br><span class="line">clang++ --std=c++17 &#123;filename&#125;.cpp</span><br></pre></td></tr></table></figure></li><li><p><strong>Clean</strong> removes all cached objects and executables so the next time the project is built, all files will be recompiled and a new executable produced.</p></li><li><p><strong>Rebuild</strong> does a ‚Äúclean‚Äù, followed by a ‚Äúbuild‚Äù.</p></li><li><p><strong>Compile</strong> recompiles a single code file (regardless of whether it has been cached previously). This option does not invoke the linker or produce an executable.</p></li><li><p><strong>Run/start</strong> executes the executable from a prior build. Some IDEs (e.g. Visual Studio) will invoke a ‚Äúbuild‚Äù before doing a ‚Äúrun‚Äù to ensure you are running the latest version of your code. Otherwise (e.g. Code::Blocks) will just execute the prior executable.</p></li></ul><h1 id="grammer"><a href="#grammer" class="headerlink" title="grammer"></a>grammer</h1><h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><h3 id="preprocessor-macros"><a href="#preprocessor-macros" class="headerlink" title="preprocessor macros"></a>preprocessor macros</h3><ul><li><p>Use <code>#define</code> macros for</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Header guards (#ifndef MY_HEADER_H)</span><br><span class="line">Platform-specific code (#ifdef _WIN32)</span><br><span class="line">Code that must be substituted inline for performance (#define SQUARE(x))</span><br><span class="line">Simple constants that don‚Äôt need a type (#define MAX_SIZE 1024</span><br></pre></td></tr></table></figure></li><li><p>Avoid <code>#define</code> for:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Complex expressions (use constexpr instead)</span><br><span class="line">Type-sensitive operations (use inline functions)</span><br><span class="line">Global constants (use const or constexpr)</span><br></pre></td></tr></table></figure></li></ul><h3 id="operator"><a href="#operator" class="headerlink" title="operator"></a>operator</h3><ul><li>The <code>:: </code>symbol is an operator called the <strong>scope resolution operator</strong>.</li></ul><h3 id="iostream"><a href="#iostream" class="headerlink" title="iostream"></a>iostream</h3><ul><li><p>std::endl</p><p>output a newline; Using <code>std::endl</code> is often inefficient than <code>&#39;\n&#39;</code></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">std::cin and std::cout always go on the left-hand side of the operator.</span><br><span class="line">std::cout is used to output a value (cout = character output).</span><br><span class="line">std::cin is used to get an input value (cin = character input).</span><br><span class="line">&lt;&lt; is used with std::cout, and shows the direction that data is moving. std::cout &lt;&lt; 4 moves the value 4 to the console.</span><br><span class="line">&gt;&gt; is used with std::cin, and shows the direction that data is moving. std::cin &gt;&gt; x moves the value the user entered from the keyboard into variable x.</span><br></pre></td></tr></table></figure><ul><li>Avoid implementation-defined and unspecified behavior whenever possible, as they may cause your program to malfunction on other implementations.</li></ul><p>addition (<code>+</code>), subtraction (<code>-</code>), multiplication (<code>*</code>), division (<code>/</code>).  assignment (<code>=</code>)</p><h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><ul><li><p>When a function parameter exists but is not used in the body of the function, do not give it a name. You can optionally put a name inside a comment.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">int</span>)</span> <span class="comment">// ok: unnamed parameter will not generate warning</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">int</span> <span class="comment">/*count*/</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Names used for function parameters or variables declared in a function body are only visible within the function that declares them. This means local variables within a function can be named without regard for the names of variables in other functions. This helps keep functions independent.</p></li><li><p>Define your local variables as close to their first use as reasonable.</p></li><li><p><strong>declaration</strong>, tells the <em>compiler</em> about the <em>existence</em> of an identifier and its associated type information.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">// tells the compiler about a function named &quot;add&quot; that takes two int parameters and returns an int.  No body!</span></span><br><span class="line"><span class="keyword">int</span> x;                 <span class="comment">// tells the compiler about an integer variable named x</span></span><br></pre></td></tr></table></figure></li><li><p><strong>definition</strong> is a declaration that actually implements (for functions and types) or instantiates (for variables) the identifier.<br>In C++, all definitions are declarations. Therefore <code>int x;</code> is both a definition and a declaration.</p></li><li><p>the compiler compiles each file individually. </p></li><li><p>Use double quotes to include header files that you‚Äôve written or are expected to be found in the current directory. Use angled brackets to include headers that come with your compiler, OS, or third-party libraries you‚Äôve installed elsewhere on your system.</p></li><li><p>header guard</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ADD_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADD_H</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></li></ul><ul><li>If a parameter is given a default argument, all subsequent parameters (to the right) must also be given default arguments.</li></ul><h2 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h2><ul><li>The smallest unit of memory is a <strong>binary digit</strong> (also called a <strong>bit</strong>), which can hold a value of 0 or 1.</li><li>Each memory address holds 1 byte of data. A <strong>byte</strong> is a group of bits that are operated on as a unit. The modern standard is that a byte is comprised of 8 sequential bits.</li></ul><table><thead><tr><th align="left">Types</th><th align="left">Category</th><th align="left">Meaning</th><th align="left">Example</th></tr></thead><tbody><tr><td align="left">float double long double</td><td align="left">Floating Point</td><td align="left">a number with a fractional part</td><td align="left">3.14159</td></tr><tr><td align="left">bool</td><td align="left">Integral (Boolean)</td><td align="left">true or false</td><td align="left">true</td></tr><tr><td align="left">char <br />wchar_t <br />char8_t (C++20) <br />char16_t (C++11) <br />char32_t (C++11)</td><td align="left">Integral (Character)</td><td align="left">a single character of text</td><td align="left">‚Äòc‚Äô</td></tr><tr><td align="left">short int int long int long long int (C++11)</td><td align="left">Integral (Integer)</td><td align="left">positive and negative whole numbers, including 0</td><td align="left">64</td></tr><tr><td align="left">std::nullptr_t (C++11)</td><td align="left">Null Pointer</td><td align="left">a null pointer</td><td align="left">nullptr</td></tr><tr><td align="left">void</td><td align="left">Void</td><td align="left">no type</td><td align="left">n/a</td></tr></tbody></table><table><thead><tr><th align="left">Category</th><th align="left">Type</th><th align="left">Minimum Size</th><th align="left">Typical Size</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left">Boolean</td><td align="left">bool</td><td align="left">1 byte</td><td align="left">1 byte</td><td align="left"></td></tr><tr><td align="left">character</td><td align="left">char</td><td align="left">1 byte</td><td align="left">1 byte</td><td align="left">always exactly 1 byte</td></tr><tr><td align="left"></td><td align="left">wchar_t</td><td align="left">1 byte</td><td align="left">2 or 4 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">char8_t</td><td align="left">1 byte</td><td align="left">1 byte</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">char16_t</td><td align="left">2 bytes</td><td align="left">2 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">char32_t</td><td align="left">4 bytes</td><td align="left">4 bytes</td><td align="left"></td></tr><tr><td align="left">integer</td><td align="left">short</td><td align="left">2 bytes</td><td align="left">2 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">int</td><td align="left">2 bytes</td><td align="left">4 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">long</td><td align="left">4 bytes</td><td align="left">4 or 8 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">long long</td><td align="left">8 bytes</td><td align="left">8 bytes</td><td align="left"></td></tr><tr><td align="left">floating point</td><td align="left">float</td><td align="left">4 bytes</td><td align="left">4 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">double</td><td align="left">8 bytes</td><td align="left">8 bytes</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">long double</td><td align="left">8 bytes</td><td align="left">8, 12, or 16 bytes</td><td align="left"></td></tr><tr><td align="left">pointer</td><td align="left">std::nullptr_t</td><td align="left">4 bytes</td><td align="left">4 or 8 bytes</td><td align="left"></td></tr></tbody></table><h3 id="integer"><a href="#integer" class="headerlink" title="integer"></a>integer</h3><table><thead><tr><th align="left">Size / Type</th><th align="left">Range</th></tr></thead><tbody><tr><td align="left">8-bit signed</td><td align="left">-128 to 127</td></tr><tr><td align="left">16-bit signed</td><td align="left">-32,768 to 32,767</td></tr><tr><td align="left">32-bit signed</td><td align="left">-2,147,483,648 to 2,147,483,647</td></tr><tr><td align="left">64-bit signed</td><td align="left">-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</td></tr></tbody></table><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Range</th><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">std::int8_t</td><td align="left">1 byte signed</td><td align="left">-128 to 127</td><td align="left">**Treated like a signed char on many systems. **</td></tr><tr><td align="left">std::uint8_t</td><td align="left">1 byte unsigned</td><td align="left">0 to 255</td><td align="left">**Treated like an unsigned char on many systems. **</td></tr><tr><td align="left">std::int16_t</td><td align="left">2 byte signed</td><td align="left">-32,768 to 32,767</td><td align="left"></td></tr><tr><td align="left">std::uint16_t</td><td align="left">2 byte unsigned</td><td align="left">0 to 65,535</td><td align="left"></td></tr><tr><td align="left">std::int32_t</td><td align="left">4 byte signed</td><td align="left">-2,147,483,648 to 2,147,483,647</td><td align="left"></td></tr><tr><td align="left">std::uint32_t</td><td align="left">4 byte unsigned</td><td align="left">0 to 4,294,967,295</td><td align="left"></td></tr><tr><td align="left">std::int64_t</td><td align="left">8 byte signed</td><td align="left">-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</td><td align="left"></td></tr><tr><td align="left">std::uint64_t</td><td align="left">8 byte unsigned</td><td align="left"></td><td align="left"></td></tr></tbody></table><h3 id="floating-point"><a href="#floating-point" class="headerlink" title="floating point"></a>floating point</h3><table><thead><tr><th align="left">Size</th><th align="left">Range</th><th align="left">Precision</th></tr></thead><tbody><tr><td align="left">4 bytes</td><td align="left">¬±1.18 x 10-38 to ¬±3.4 x 1038 and 0.0</td><td align="left">6-9 significant digits, typically 7</td></tr><tr><td align="left">8 bytes</td><td align="left">¬±2.23 x 10-308 to ¬±1.80 x 10308 and 0.0</td><td align="left">15-18 significant digits, typically 16</td></tr><tr><td align="left">80-bits (typically uses 12 or 16 bytes)</td><td align="left">¬±3.36 x 10-4932 to ¬±1.18 x 104932 and 0.0</td><td align="left">18-21 significant digits</td></tr><tr><td align="left">16 bytes</td><td align="left">¬±3.36 x 10-4932 to ¬±1.18 x 104932 and 0.0</td><td align="left">33-36 significant digits</td></tr></tbody></table><ul><li><p>When outputting floating point numbers, <code>std::cout</code> has a default precision of 6 ‚Äì that is, it assumes all floating point variables are only significant to 6 digits (the minimum precision of a float), and hence it will truncate anything after that.</p></li><li><p><strong>Inf</strong>, which represents infinity. Inf can be positive or negative.  <strong>NaN</strong>, which stands for ‚ÄúNot a Number‚Äù.</p></li><li><p>By default, floating point values whose decimal part is 0 print without the decimal places (e.g. <code>5.0</code> prints as <code>5</code>).</p></li></ul><h2 id="const-and-string"><a href="#const-and-string" class="headerlink" title="const and string"></a>const and string</h2><p><strong>const vs constexpr</strong></p><ul><li><p><strong>Purpose:</strong> <code>const</code> is used to specify that a variable or function parameter cannot be modified, while <code>constexpr</code> is used to specify that an expression can be evaluated at compile-time.</p></li><li><p><strong>Scope:</strong> A <code>const</code> variable can have a scope that includes the current block, while a <code>constexpr</code> expression must be within the scope of a function or class definition.</p></li><li><p><strong>Evaluation time:</strong> A <code>const</code> variable is evaluated at runtime, while a <code>constexpr</code> expression is evaluated at compile-time.</p></li></ul><p><strong>Numeral systems</strong></p><ul><li><p>There are 4 main numeral systems available in C++. In order of popularity, these are: decimal (base 10), binary (base 2), hexadecimal (base 16), and octal (base 8).</p><p>To use an octal literal, prefix your literal with a <code>0 (zero)</code>, e.g. <code>int x&#123; 012 &#125;</code></p><p>To use a hexadecimal literal, prefix your literal with <code>0x</code>, e.g.  <code>int x&#123; 0xF &#125;</code></p><p>By default, C++ outputs values in decimal. However, you can change the output format via use of the <code>std::dec</code>, <code>std::oct</code>, and <code>std::hex</code> I/O manipulators:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x &#123; <span class="number">12</span> &#125;;</span><br><span class="line">std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// decimal (by default)</span></span><br><span class="line">std::cout &lt;&lt; std::hex &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// hexadecimal</span></span><br><span class="line">std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// now hexadecimal</span></span><br><span class="line">std::cout &lt;&lt; std::oct &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// octal</span></span><br><span class="line">std::cout &lt;&lt; std::dec &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// return to decimal</span></span><br><span class="line">std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// decimal</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="scope-duration-linkage"><a href="#scope-duration-linkage" class="headerlink" title="scope duration linkage"></a>scope duration linkage</h2><table><thead><tr><th align="left">Type</th><th align="left">Example</th><th align="left">Scope</th><th align="left">Duration</th><th align="left">Linkage</th><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">Local variable</td><td align="left">int x;</td><td align="left">Block</td><td align="left">Automatic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Static local variable</td><td align="left">static int s_x;</td><td align="left">Block</td><td align="left">Static</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Dynamic local variable</td><td align="left">int* x { new int{} };</td><td align="left">Block</td><td align="left">Dynamic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Function parameter</td><td align="left">void foo(int x)</td><td align="left">Block</td><td align="left">Automatic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Internal non-const global variable</td><td align="left">static int g_x;</td><td align="left">Global</td><td align="left">Static</td><td align="left">Internal</td><td align="left">Initialized or uninitialized</td></tr><tr><td align="left">External non-const global variable</td><td align="left">int g_x;</td><td align="left">Global</td><td align="left">Static</td><td align="left">External</td><td align="left">Initialized or uninitialized</td></tr><tr><td align="left">Inline non-const global variable (C++17)</td><td align="left">inline int g_x;</td><td align="left">Global</td><td align="left">Static</td><td align="left">External</td><td align="left">Initialized or uninitialized</td></tr><tr><td align="left">Internal constant global variable</td><td align="left">constexpr int g_x { 1 };</td><td align="left">Global</td><td align="left">Static</td><td align="left">Internal</td><td align="left">Must be initialized</td></tr><tr><td align="left">External constant global variable</td><td align="left">extern const int g_x { 1 };</td><td align="left">Global</td><td align="left">Static</td><td align="left">External</td><td align="left">Must be initialized</td></tr><tr><td align="left">Inline constant global variable (C++17)</td><td align="left">inline constexpr int g_x { 1 };</td><td align="left">Global</td><td align="left">Static</td><td align="left">External</td><td align="left">Must be initialized</td></tr></tbody></table><ul><li><p>Variables declared inside a namespace are also global variables.</p><p>Prefer defining global variables inside a namespace rather than in the global namespace.</p></li><li><p>Scope determines where a variable is accessible. Duration determines when a variable is created and destroyed. </p></li><li><p>Linkage determines whether the variable can be exported to another file or not.</p></li><li><p>Global variables can have either internal or external linkage, via the static and extern keywords respectively.</p></li><li><p>Initialize your static local variables. Static local variables are only initialized the first time the code is executed, not on subsequent calls.</p></li></ul><h2 id="control-flow"><a href="#control-flow" class="headerlink" title="control flow"></a>control flow</h2><table><thead><tr><th align="left">Category</th><th align="left">Meaning</th><th align="left">Implemented in C++ by</th></tr></thead><tbody><tr><td align="left">Conditional statements</td><td align="left">Causes a sequence of code to execute only if some condition is met.</td><td align="left">if, else, switch</td></tr><tr><td align="left">Jumps</td><td align="left">Tells the CPU to start executing the statements at some other location.</td><td align="left">goto, break, continue</td></tr><tr><td align="left">Function calls</td><td align="left">Jump to some other location and back.</td><td align="left">function calls, return</td></tr><tr><td align="left">Loops</td><td align="left">Repeatedly execute some sequence of code zero or more times, until some condition is met.</td><td align="left">while, do-while, for, ranged-for</td></tr><tr><td align="left">Halts</td><td align="left">Terminate the program.</td><td align="left">std::exit(), std::abort()</td></tr><tr><td align="left">Exceptions</td><td align="left">A special kind of flow control structure designed for error handling.</td><td align="left">try, throw, catch</td></tr></tbody></table><h2 id="References-and-Pointers"><a href="#References-and-Pointers" class="headerlink" title="References and Pointers"></a>References and Pointers</h2><p><strong>Lvalue</strong></p><blockquote><p><strong>Â∑¶ÂÄº</strong> (lvalue, left value)ÔºåÈ°æÂêçÊÄù‰πâÂ∞±ÊòØËµãÂÄºÁ¨¶Âè∑Â∑¶ËæπÁöÑÂÄº„ÄÇÂáÜÁ°ÆÊù•ËØ¥Ôºå Â∑¶ÂÄºÊòØË°®ËææÂºèÔºà‰∏ç‰∏ÄÂÆöÊòØËµãÂÄºË°®ËææÂºèÔºâÂêé‰æùÁÑ∂Â≠òÂú®ÁöÑÊåÅ‰πÖÂØπË±°„ÄÇ</p></blockquote><ul><li>Lvalue expressions evaluate to an identifiable object.<ul><li>An lvalue reference  acts as an alias for an existing lvalue (such as a variable).</li><li>Lvalue references can only bind to modifiable lvalues.</li><li>Lvalue references to const can bind to modifiable lvalues, non-modifiable lvalues, and rvalues. This makes them a much more flexible type of reference.</li></ul></li></ul><p><strong>Rvalue</strong></p><blockquote><p><strong>Âè≥ÂÄº</strong> (rvalue, right value)ÔºåÂè≥ËæπÁöÑÂÄºÔºåÊòØÊåáË°®ËææÂºèÁªìÊùüÂêéÂ∞±‰∏çÂÜçÂ≠òÂú®ÁöÑ‰∏¥Êó∂ÂØπË±°„ÄÇ</p></blockquote><ul><li>Rvalue expressions evaluate to a value.</li></ul><p><strong>Reference</strong></p><ul><li>Pass by reference allows us to pass arguments to a function without making copies of those arguments each time the function is called.</li><li>Pass by reference can only accept modifiable lvalue arguments</li><li>Class types can be expensive to copy (sometimes significantly so), so they are typically passed by const reference. Fundamental types and enumerated types are cheap to copy, so they are typically passed by value.</li><li>When an object being referenced is destroyed before a reference to it, the reference is left referencing an object that no longer exists. Such a reference is called a <em>dangling reference</em></li></ul><p><strong>Á∫ØÂè≥ÂÄº</strong> (prvalue, pure rvalue)ÔºåÁ∫ØÁ≤πÁöÑÂè≥ÂÄºÔºåË¶Å‰πàÊòØÁ∫ØÁ≤πÁöÑÂ≠óÈù¢ÈáèÔºå‰æãÂ¶Ç <code>10</code>, <code>true</code>Ôºõ Ë¶Å‰πàÊòØÊ±ÇÂÄºÁªìÊûúÁõ∏ÂΩì‰∫éÂ≠óÈù¢ÈáèÊàñÂåøÂêç‰∏¥Êó∂ÂØπË±°Ôºå‰æãÂ¶Ç <code>1+2</code>„ÄÇÈùûÂºïÁî®ËøîÂõûÁöÑ‰∏¥Êó∂ÂèòÈáè„ÄÅËøêÁÆóË°®ËææÂºè‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂèòÈáè„ÄÅ ÂéüÂßãÂ≠óÈù¢Èáè„ÄÅLambda Ë°®ËææÂºèÈÉΩÂ±û‰∫éÁ∫ØÂè≥ÂÄº„ÄÇ</p><p><strong>Â∞Ü‰∫°ÂÄº</strong> (xvalue, expiring value)ÔºåÊòØ C++11 ‰∏∫‰∫ÜÂºïÂÖ•Âè≥ÂÄºÂºïÁî®ËÄåÊèêÂá∫ÁöÑÊ¶ÇÂøµÔºàÂõ†Ê≠§Âú®‰º†Áªü C++ ‰∏≠Ôºå Á∫ØÂè≥ÂÄºÂíåÂè≥ÂÄºÊòØÂêå‰∏Ä‰∏™Ê¶ÇÂøµÔºâÔºå‰πüÂ∞±ÊòØÂç≥Â∞ÜË¢´ÈîÄÊØÅ„ÄÅÂç¥ËÉΩÂ§üË¢´ÁßªÂä®ÁöÑÂÄº„ÄÇ</p><p><strong>Pointer</strong></p><ul><li>A pointer is an object that holds a <em>memory address</em> (typically of another variable) as its value. This allows us to store the address of some other object to use later.</li><li>Use <code>nullptr</code> when you need a null pointer literal for initialization, assignment, or passing a null pointer to a function.</li><li>When we pass an address to a function, that address is copied from the argument into the pointer parameter (which is fine, because copying an address is fast). </li><li>pointers must hold the address of an object ( can‚Äôt have a pointer to a reference, since references aren‚Äôt objects )</li><li>Objects returned by reference must live beyond the scope of the function returning the reference, or a dangling reference will result. Never return a (non-static) local variable or temporary by reference.</li></ul><p><strong>summary</strong></p><ul><li>Prefer pass by reference to pass by address unless you have a specific reason to use pass by address.</li></ul><h2 id="Compound-Types"><a href="#Compound-Types" class="headerlink" title="Compound Types"></a>Compound Types</h2><blockquote><p>Enums and Structs</p></blockquote><table><thead><tr><th align="left">Type</th><th align="left">Meaning</th><th align="left">Examples</th></tr></thead><tbody><tr><td align="left">Fundamental</td><td align="left">A type built into the core C++ language</td><td align="left">int, std::nullptr_t</td></tr><tr><td align="left">Compound</td><td align="left">A type built from fundamental types</td><td align="left">int&amp;, double*, std::string, Fraction</td></tr><tr><td align="left">User-defined</td><td align="left">A class type or enumerated type (Includes those defined in the standard library or implementation) (In casual use, typically used to mean program-defined types)</td><td align="left">std::string, Fraction</td></tr><tr><td align="left">Program-defined</td><td align="left">A class type or enumerated type (Excludes those defined in standard library or implementation)</td><td align="left">Fraction</td></tr></tbody></table><ul><li>A <strong>class template</strong> is a template definition for instantiating class types (structs, classes, or unions). <strong>Class template argument deduction (CTAD)</strong> is a C++17 feature that allows the compiler to deduce the template type arguments from an initializer.</li><li>The members of a struct are public by default</li></ul><h2 id="classes"><a href="#classes" class="headerlink" title="classes"></a>classes</h2><table><thead><tr><th align="left">Access level</th><th align="left">Access specifier</th><th align="left">Member access</th><th align="left">Derived class access</th><th align="left">Public access</th></tr></thead><tbody><tr><td align="left">Public</td><td align="left">public:</td><td align="left">yes</td><td align="left">yes</td><td align="left">yes</td></tr><tr><td align="left">Protected</td><td align="left">protected:</td><td align="left">yes</td><td align="left">yes</td><td align="left">no</td></tr><tr><td align="left">Private</td><td align="left">private:</td><td align="left">yes</td><td align="left">no</td><td align="left">no</td></tr></tbody></table><ul><li><p>The members of a class are private by default. Private members can be accessed by other members of the class, but can not be accessed by the public.</p><p>A class with private members is no longer an aggregate, and therefore can no longer use aggregate initialization.</p></li><li><p>Classes should generally make member variables private (or protected), and member functions public.</p><p>Structs should generally avoid using access specifiers (all members will default to public).</p></li><li><p>Prefer using the member initializer list to initialize your members over assigning values in the body of the constructor.</p></li><li><p>If you want your class to be able to be evaluated at compile-time, make your member functions and constructor constexpr.</p></li><li><p>A non-const member function can modify members of non-const objects.</p></li><li><p>A constexpr member function can be called in either runtime contexts or compile-time contexts.</p></li><li><p>All non-static member functions have a <code>this</code> const pointer that holds the address of the implicit object.</p></li></ul><h2 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h2><ul><li>Avoid array indexing with integral values whenever possible.</li><li>For range-based for loops, prefer to define the element type as:<ul><li><code>auto</code> when you want to modify copies of the elements.</li><li><code>auto&amp;</code> when you want to modify the original elements.</li><li><code>const auto&amp;</code> otherwise (when you just need to view the original elements).</li></ul></li><li>The length of a vector is how many elements are ‚Äúin use‚Äù.<br>The capacity of a vector is how many elements have been allocated in memory.</li><li>Tracking capacity separately from length allows the <code>std::vector</code> to avoid some reallocations when length is changed.</li><li>To increase the number of elements in a <code>std::vector</code>:<br>Use <code>resize()</code> when accessing a vector via indexing. This changes the length of the vector so your indices will be valid.<br>Use <code>reserve()</code> when accessing a vector using stack operations. This adds capacity without changing the length of the vector.</li></ul><h2 id="array"><a href="#array" class="headerlink" title="array"></a>array</h2><ul><li>Define  <code>std::array</code> as constexpr whenever possible. If your <code>std::array</code> is not constexpr, consider using a <code>std::vector</code> instead.</li><li>Use class template argument deduction (CTAD) to have the compiler deduce the type and length of a <code>std::array</code> from its initializers.</li></ul><h2 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h2><blockquote><p>Lambdas are anonymous functions, A <strong>lambda expression</strong> (also called a <strong>lambda</strong> or <strong>closure</strong>) allows us to define an anonymous function inside another function. The nesting is important, as it allows us both to avoid namespace naming pollution, and to define the function as close to where it is used as possible (providing additional context).</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ captureClause ] ( parameters ) -&gt; returnType</span><br><span class="line">&#123;</span><br><span class="line">    statements;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ÊçïËé∑ÂàóË°®](ÂèÇÊï∞ÂàóË°®) mutable(ÂèØÈÄâ) ÂºÇÂ∏∏Â±ûÊÄß -&gt; ËøîÂõûÁ±ªÂûã &#123;</span><br><span class="line">// ÂáΩÊï∞‰Ωì</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In actuality, lambdas aren‚Äôt functions (which is part of how they avoid the limitation of C++ not supporting nested functions). They‚Äôre a special kind of object called a functor. Functors are objects that contain an overloaded <code>operator()</code> that make them callable like a function.</p><blockquote><p>ÊâÄË∞ìÊçïËé∑ÂàóË°®ÔºåÂÖ∂ÂÆûÂèØ‰ª•ÁêÜËß£‰∏∫ÂèÇÊï∞ÁöÑ‰∏ÄÁßçÁ±ªÂûãÔºåLambda Ë°®ËææÂºèÂÜÖÈÉ®ÂáΩÊï∞‰ΩìÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØ‰∏çËÉΩÂ§ü‰ΩøÁî®ÂáΩÊï∞‰ΩìÂ§ñÈÉ®ÁöÑÂèòÈáèÁöÑÔºå ËøôÊó∂ÂÄôÊçïËé∑ÂàóË°®ÂèØ‰ª•Ëµ∑Âà∞‰º†ÈÄíÂ§ñÈÉ®Êï∞ÊçÆÁöÑ‰ΩúÁî®</p></blockquote><h1 id="memory"><a href="#memory" class="headerlink" title="memory"></a>memory</h1><p>The memory that a program uses is typically divided into a few different areas, called segments:</p><ul><li>The code segment (also called a text segment), where the compiled program sits in memory. The code segment is typically read-only.</li><li>The bss segment (also called the uninitialized data segment), where zero-initialized global and static variables are stored.</li><li>The data segment (also called the initialized data segment), where initialized global and static variables are stored.</li><li>The heap, where dynamically allocated variables are allocated from.</li><li>The call stack, where function parameters, local variables, and other function-related information are stored.</li></ul><h2 id="memory-allocation"><a href="#memory-allocation" class="headerlink" title="memory allocation"></a>memory allocation</h2><ul><li><p><strong>Static memory allocation</strong> happens for static and global variables. Memory for these types of variables is allocated once when your program is run and persists throughout the life of your program.</p></li><li><p><strong>Automatic memory allocation</strong> happens for function parameters and local variables. Memory for these types of variables is allocated when the relevant block is entered, and freed when the block is exited, as many times as necessary.</p></li><li><p>accessing heap-allocated objects is generally slower than accessing stack-allocated objects. Because the compiler knows the address of stack-allocated objects, it can go directly to that address to get a value. Heap allocated objects are typically accessed via pointer. This requires two steps: one to get the address of the object (from the pointer), and another to get the value.</p></li></ul><h1 id="relationship"><a href="#relationship" class="headerlink" title="relationship"></a>relationship</h1><table><thead><tr><th align="left">Property\Type</th><th align="left">Composition</th><th align="left">Aggregation</th><th align="left">Association</th><th align="left">Dependency</th></tr></thead><tbody><tr><td align="left">Relationship type</td><td align="left">Whole/part</td><td align="left">Whole/part</td><td align="left">Otherwise unrelated</td><td align="left">Otherwise unrelated</td></tr><tr><td align="left">Members can belong to multiple classes</td><td align="left">No</td><td align="left">Yes</td><td align="left">Yes</td><td align="left">Yes</td></tr><tr><td align="left">Members existence managed by class</td><td align="left">Yes</td><td align="left">No</td><td align="left">No</td><td align="left">No</td></tr><tr><td align="left">Directionality</td><td align="left">Unidirectional</td><td align="left">Unidirectional</td><td align="left">Unidirectional or bidirectional</td><td align="left">Unidirectional</td></tr><tr><td align="left">Relationship verb</td><td align="left">Part-of</td><td align="left">Has-a</td><td align="left">Uses-a</td><td align="left">Depends-on</td></tr></tbody></table><h2 id="inheritance"><a href="#inheritance" class="headerlink" title="inheritance"></a>inheritance</h2><ul><li>that C++ always constructs the ‚Äúfirst‚Äù or ‚Äúmost base‚Äù class first. It then walks through the inheritance tree in order and constructs each successive derived class.</li></ul><h1 id="Static-and-dynamic-libraries"><a href="#Static-and-dynamic-libraries" class="headerlink" title="Static and dynamic libraries"></a>Static and dynamic libraries</h1><h2 id="static-library"><a href="#static-library" class="headerlink" title="static library"></a>static library</h2><p>A <strong>static library</strong> (also known as an <strong>archive</strong>) consists of routines that are compiled and linked directly into your program. When you compile a program that uses a static library, all the functionality of the static library that your program uses becomes part of your executable. </p><ul><li>On Windows, static libraries typically have a <strong>.lib</strong> extension, whereas on Linux, static libraries typically have an <strong>.a (archive)</strong> extension. </li><li>One advantage of static libraries is that you only have to distribute the executable in order for users to run your program. Because the library becomes part of your program, this ensures that the right version of the library is always used with your program. Also, because static libraries become part of your program, you can use them just like functionality you‚Äôve written for your own program. </li><li>On the downside, because a copy of the library becomes part of every executable that uses it, this can cause a lot of wasted space. Static libraries also can not be upgraded easy ‚Äì to update the library, the entire executable needs to be replaced.</li></ul><h2 id="dynamic-library"><a href="#dynamic-library" class="headerlink" title="dynamic library"></a>dynamic library</h2><p>A <strong>dynamic library</strong> (also called a <strong>shared library</strong>) consists of routines that are loaded into your application at run time. When you compile a program that uses a dynamic library, the library does not become part of your executable ‚Äì it remains as a separate unit. </p><ul><li><p>On Windows, dynamic libraries typically have a <strong>.dll (dynamic link library)</strong> extension, whereas on Linux, dynamic libraries typically have a <strong>.so (shared object)</strong> extension, and macos with <strong>.dylib</strong> as dynamic library. One advantage of dynamic libraries is that many programs can share one copy, which saves space. Perhaps a bigger advantage is that the dynamic library can be upgraded to a newer version without replacing all of the executables that use it.</p></li><li><p>Because dynamic libraries are not linked into your program, programs using dynamic libraries must explicitly load and interface with the dynamic library. This mechanism can be confusing, and makes interfacing with a dynamic library awkward. To make dynamic libraries easier to use, an import library can be used.</p></li><li><p>An <strong>import library</strong> is a library that automates the process of loading and using a dynamic library. On Windows, this is typically done via a small static library (.lib) of the same name as the dynamic library (.dll). The static library is linked into the program at compile time, and then the functionality of the dynamic library can effectively be used as if it were a static library. On Linux, the shared object (.so) file works as both a dynamic library and an import library. Most linkers can build an import library for a dynamic library when the dynamic library is created.</p></li></ul><h2 id="create-and-use"><a href="#create-and-use" class="headerlink" title="create and use"></a>create and use</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> macos</span></span><br><span class="line">clang++ -arch arm64 -shared -fPIC -o lib&lt;name&gt;.dylib &lt;name&gt;.cpp</span><br><span class="line">clang++ -arch arm64 &lt;demo&gt;.cpp -o &lt;demo&gt; -L. -lmymath (-Iinclude)</span><br><span class="line"><span class="meta">#</span><span class="bash"> -Iinclude tells the compiler to look <span class="keyword">in</span> the <span class="string">&quot;include&quot;</span> folder <span class="keyword">for</span> header files.</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> -L. tells the linker to look <span class="keyword">in</span> the current directory <span class="keyword">for</span> library files.</span></span><br></pre></td></tr></table></figure><h3 id="check"><a href="#check" class="headerlink" title="check"></a>check</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> header file</span></span><br><span class="line">/usr/include/xxx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use the ldconfig <span class="built_in">command</span> to locate library</span></span><br><span class="line">ldconfig -p | grep xxx.so</span><br></pre></td></tr></table></figure><p><strong>reference</strong></p><ul><li><a href="https://www.devxperiences.com/pzwp1/2023/05/17/c-dynamic-loading-of-a-shared-library-also-create-and-load-one-on-your-own/">C++ Dynamic loading of a shared library</a></li></ul><h1 id="Data-structures-algorithms-and-design-patterns"><a href="#Data-structures-algorithms-and-design-patterns" class="headerlink" title="Data structures, algorithms, and design patterns"></a>Data structures, algorithms, and design patterns</h1><p>TBD</p><h1 id="tool"><a href="#tool" class="headerlink" title="tool"></a>tool</h1><h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><h3 id="config-file"><a href="#config-file" class="headerlink" title="config file"></a>config file</h3><ul><li><p>c_cpp_properties.json</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> config include path</span></span><br><span class="line">Open the Command Palette (Ctrl+Shift+P) and type C/C++: Edit Configurations (UI).</span><br><span class="line">This will open the c_cpp_properties.json file. If it doesn&#x27;t exist, it will be created.</span><br></pre></td></tr></table></figure></li><li><p>setting.json</p></li><li><p>tasks.json</p></li></ul><h2 id="error-detection-and-handing"><a href="#error-detection-and-handing" class="headerlink" title="error detection and handing"></a>error detection and handing</h2><ul><li>Favor <code>static_assert</code> over <code>assert()</code> whenever possible.</li></ul>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes csi</title>
      <link href="/2024/09/05/kubernetes%20csi/"/>
      <url>/2024/09/05/kubernetes%20csi/</url>
      
        <content type="html"><![CDATA[<h1 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h1><p>In Kubernetes, the CSI (Container Storage Interface) plugin uses Unix domain sockets for communication between the kubelet and CSI drivers:</p><ul><li><p>Socket Location:  </p><ul><li><code>/var/lib/kubelet/plugins/csi.dingofs.com/csi-controller.sock</code></li><li><code>/var/lib/kubelet/plugins/csi.dingofs.com/csi.sock</code></li></ul></li><li><p>Role: </p><ul><li><p>The CSI driver exposes its RPC interface via the Unix domain socket.</p></li><li><p>Kubelet connects to this socket to invoke RPC methods like CreateVolume or NodePublishVolume.</p></li></ul></li></ul><p>This approach ensures efficient and secure communication between the kubelet and the storage driver, without exposing the RPC interface over a network.</p><h1 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h1><blockquote><p>Container Storage Interface <strong>ÂÆπÂô®ÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÂê´‰πâ</strong>ÔºåÂ∞±ÊòØÁî®Êù•‰øùÂ≠òÂÆπÂô®Â≠òÂÇ®Áä∂ÊÄÅÁöÑÈáçË¶ÅÊâãÊÆµÔºöÂ≠òÂÇ®Êèí‰ª∂‰ºöÂú®ÂÆπÂô®ÈáåÊåÇËΩΩ‰∏Ä‰∏™Âü∫‰∫éÁΩëÁªúÊàñËÄÖÂÖ∂‰ªñÊú∫Âà∂ÁöÑËøúÁ®ãÊï∞ÊçÆÂç∑Ôºå‰ΩøÂæóÂú®ÂÆπÂô®ÈáåÂàõÂª∫ÁöÑÊñá‰ª∂ÔºåÂÆûÈôÖ‰∏äÊòØ‰øùÂ≠òÂú®ËøúÁ®ãÂ≠òÂÇ®ÊúçÂä°Âô®‰∏äÔºåÊàñËÄÖ‰ª•ÂàÜÂ∏ÉÂºèÁöÑÊñπÂºè‰øùÂ≠òÂú®Â§ö‰∏™ËäÇÁÇπ‰∏äÔºåËÄå‰∏éÂΩìÂâçÂÆø‰∏ªÊú∫Ê≤°Êúâ‰ªª‰ΩïÁªëÂÆöÂÖ≥Á≥ª„ÄÇËøôÊ†∑ÔºåÊó†ËÆ∫‰Ω†Âú®ÂÖ∂‰ªñÂì™‰∏™ÂÆø‰∏ªÊú∫‰∏äÂêØÂä®Êñ∞ÁöÑÂÆπÂô®ÔºåÈÉΩÂèØ‰ª•ËØ∑Ê±ÇÊåÇËΩΩÊåáÂÆöÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®Âç∑Ôºå‰ªéËÄåËÆøÈóÆÂà∞Êï∞ÊçÆÂç∑Èáå‰øùÂ≠òÁöÑÂÜÖÂÆπ„ÄÇ</p><p><strong>CSI Êèí‰ª∂‰ΩìÁ≥ªÁöÑËÆæËÆ°ÊÄùÊÉ≥ÔºåÂ∞±ÊòØÊää Provision Èò∂ÊÆµÔºå‰ª•Âèä Kubernetes ÈáåÁöÑ‰∏ÄÈÉ®ÂàÜÂ≠òÂÇ®ÁÆ°ÁêÜÂäüËÉΩ(ÊØîÂ¶Ç‚ÄúAttach Èò∂ÊÆµ‚ÄùÂíå‚ÄúMount Èò∂ÊÆµ‚ÄùÁöÑÂÖ∑‰ΩìÊìç‰Ωú)Ôºå‰ªé‰∏ªÂπ≤‰ª£Á†ÅÈáåÂâ•Á¶ªÂá∫Êù•ÔºåÂÅöÊàê‰∫ÜÂá†‰∏™ÂçïÁã¨ÁöÑÁªÑ‰ª∂</strong></p></blockquote><p>‰∏Ä‰∏™ CSI Êèí‰ª∂Âè™Êúâ‰∏Ä‰∏™‰∫åËøõÂà∂Êñá‰ª∂Ôºå‰ΩÜÂÆÉ‰ºö‰ª• gRPC ÁöÑÊñπÂºèÂØπÂ§ñÊèê‰æõ‰∏â‰∏™ÊúçÂä°ÔºàgRPC ServiceÔºâÔºåÂàÜÂà´Âè´‰ΩúÔºöCSI Identity„ÄÅCSI Controller Âíå CSI Node</p><p><strong>CSI ÁöÑËÆæËÆ°ÊÄùÊÉ≥</strong>ÔºåÊääÊèí‰ª∂ÁöÑËÅåË¥£‰ªé‚Äú‰∏§Èò∂ÊÆµÂ§ÑÁêÜ‚ÄùÔºåÊâ©Â±ïÊàê‰∫Ü Provision„ÄÅAttach Âíå Mount ‰∏â‰∏™Èò∂ÊÆµ„ÄÇÂÖ∂‰∏≠ÔºåProvision Á≠â‰ª∑‰∫é‚ÄúÂàõÂª∫Á£ÅÁõò‚ÄùÔºåAttach Á≠â‰ª∑‰∫é‚ÄúÊåÇËΩΩÁ£ÅÁõòÂà∞ËôöÊãüÊú∫‚ÄùÔºåMount Á≠â‰ª∑‰∫é‚ÄúÂ∞ÜËØ•Á£ÅÁõòÊ†ºÂºèÂåñÂêéÔºåÊåÇËΩΩÂú® Volume ÁöÑÂÆø‰∏ªÊú∫ÁõÆÂΩï‰∏ä‚Äù„ÄÇ</p><img src="/images/k8s/csi idea.png" style="zoom:50%;"/><p>below diagram depicts a kind of high-level Kubernetes archetypes integrated with CSI:</p><img src="/images/k8s/csi-diagram.png" style="zoom:50%;"/><blockquote><p>Âú®ÂÆûÈôÖ‰ΩøÁî® CSI Êèí‰ª∂ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰ºöÂ∞ÜËøô‰∏â‰∏™ External Components ‰Ωú‰∏∫ sidecar ÂÆπÂô®Âíå CSI Êèí‰ª∂ÊîæÁΩÆÂú®Âêå‰∏Ä‰∏™ Pod ‰∏≠„ÄÇÁî±‰∫é External Components ÂØπ CSI Êèí‰ª∂ÁöÑË∞ÉÁî®ÈùûÂ∏∏È¢ëÁπÅÔºåÊâÄ‰ª•ËøôÁßç sidecar ÁöÑÈÉ®ÁΩ≤ÊñπÂºèÈùûÂ∏∏È´òÊïà„ÄÇ</p></blockquote><ul><li>the external components are introduced to decouple Kubernetes and Storage Provider logic</li><li>Blue arrows present the conventional way to call against API Server</li><li>Red arrows present gRPC to call against Volume Driver</li></ul><h2 id="External-Components"><a href="#External-Components" class="headerlink" title="External Components"></a>External Components</h2><ul><li><p><strong>Driver Registrar</strong></p><p><strong>Ë¥üË¥£Â∞ÜÊèí‰ª∂Ê≥®ÂÜåÂà∞ kubelet ÈáåÈù¢</strong>ÔºàËøôÂèØ‰ª•Á±ªÊØî‰∏∫ÔºåÂ∞ÜÂèØÊâßË°åÊñá‰ª∂ÊîæÂú®Êèí‰ª∂ÁõÆÂΩï‰∏ãÔºâ„ÄÇËÄåÂú®ÂÖ∑‰ΩìÂÆûÁé∞‰∏äÔºåDriver Registrar ÈúÄË¶ÅËØ∑Ê±Ç CSI Êèí‰ª∂ÁöÑ Identity ÊúçÂä°Êù•Ëé∑ÂèñÊèí‰ª∂‰ø°ÊÅØ„ÄÇ</p><blockquote><p>CSIDriver ÊòØÈõÜÁæ§Á∫ßÂà´ÁöÑÔºå‰æõÂÖ∂‰ªñnamespaceË∞ÉÁî®</p></blockquote></li><li><p><strong>External Provisioner</strong></p><p><strong>Ë¥üË¥£ Provision Èò∂ÊÆµ</strong>„ÄÇÂú®ÂÖ∑‰ΩìÂÆûÁé∞‰∏äÔºåExternal Provisioner ÁõëÂê¨ÔºàWatchÔºâ‰∫Ü APIServer ÈáåÁöÑ PVC ÂØπË±°„ÄÇÂΩì‰∏Ä‰∏™ PVC Ë¢´ÂàõÂª∫Êó∂ÔºåÂÆÉÂ∞±‰ºöË∞ÉÁî® CSI Controller ÁöÑ CreateVolume ÊñπÊ≥ïÔºåÂàõÂª∫ÂØπÂ∫î PV</p></li><li><p><strong>External Attacher</strong></p><p><strong>Ë¥üË¥£‚ÄúAttach Èò∂ÊÆµ‚Äù</strong>„ÄÇÂú®ÂÖ∑‰ΩìÂÆûÁé∞‰∏äÔºåÂÆÉÁõëÂê¨‰∫Ü APIServer Èáå VolumeAttachment ÂØπË±°ÁöÑÂèòÂåñ„ÄÇVolumeAttachment ÂØπË±°ÊòØ Kubernetes Á°ÆËÆ§‰∏Ä‰∏™ Volume ÂèØ‰ª•ËøõÂÖ•‚ÄúAttach Èò∂ÊÆµ‚ÄùÁöÑÈáçË¶ÅÊ†áÂøóÔºõ</p><p>‰∏ÄÊó¶Âá∫Áé∞‰∫Ü VolumeAttachment ÂØπË±°ÔºåExternal Attacher Â∞±‰ºöË∞ÉÁî® CSI Controller ÊúçÂä°ÁöÑ ControllerPublish ÊñπÊ≥ïÔºåÂÆåÊàêÂÆÉÊâÄÂØπÂ∫îÁöÑ Volume ÁöÑ Attach Èò∂ÊÆµ„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kubernetes-csi/external-snapshotter: This project contains the sidecar container that watches Kubernetes VolumeSnapshot objects and triggers CreateSnapshot/DeleteSnapshot operations against a CSI endpoint.</span><br><span class="line"></span><br><span class="line">kubernetes-csi/external-provisioner: The external-provisioner is a sidecar container that watches Kubernetes PersistentVolumeClaim objects and triggers CreateVolume/DeleteVolume operations against a CSI endpoint.</span><br><span class="line"></span><br><span class="line">kubernetes-csi/external-attacher: The external-attacher is a sidecar container that watches Kubernetes VolumeAttachment objects and triggers ControllerPublish/Unpublish operations against a CSI endpoint.</span><br><span class="line"></span><br><span class="line">kubernetes-csi/node-driver-registrar: This sidecar container registers a CSI driver with the kubelet using the kubelet plugin registration mechanism.</span><br><span class="line"></span><br><span class="line">kubernetes-csi/livenessprobe: A sidecar container that can be included in a CSI plugin pod to enable integration with Kubernetes Liveness Probe</span><br></pre></td></tr></table></figure></li></ul><h2 id="Custom-Components"><a href="#Custom-Components" class="headerlink" title="Custom Components"></a>Custom Components</h2><ul><li><p><strong>CSI Identity</strong></p><p><strong>Ë¥üË¥£ÂØπÂ§ñÊö¥Èú≤Ëøô‰∏™Êèí‰ª∂Êú¨Ë∫´ÁöÑ‰ø°ÊÅØ</strong></p></li><li><p><strong>CSI Controller</strong></p><p><strong>ÂÆö‰πâÁöÑÂàôÊòØÂØπ CSI VolumeÔºàÂØπÂ∫î Kubernetes ÈáåÁöÑ PVÔºâÁöÑÁÆ°ÁêÜÊé•Âè£</strong>ÔºåÊØîÂ¶ÇÔºöÂàõÂª∫ÂíåÂà†Èô§ CSI Volume„ÄÅÂØπ CSI Volume ËøõË°å Attach/DettachÔºàÂú® CSI ÈáåÔºåËøô‰∏™Êìç‰ΩúË¢´Âè´‰Ωú Publish/UnpublishÔºâÔºå‰ª•ÂèäÂØπ CSI Volume ËøõË°å Snapshot Á≠â</p></li><li><p><strong>CSI Node</strong></p><p>‚ÄúMount Èò∂ÊÆµ‚ÄùÂú® CSI Node ÈáåÁöÑÊé•Âè£ÔºåÊòØÁî± NodeStageVolume Âíå NodePublishVolume ‰∏§‰∏™Êé•Âè£ÂÖ±ÂêåÂÆûÁé∞ÁöÑ;</p><p>ÂΩì kubelet ÁöÑ VolumeManagerReconciler ÊéßÂà∂Âæ™ÁéØÊ£ÄÊü•Âà∞ÂÆÉÈúÄË¶ÅÊâßË°å Mount Êìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰ºöÈÄöËøá pkg/volume/csi ÂåÖÔºåÁõ¥Êé•Ë∞ÉÁî® CSI Node ÊúçÂä°ÂÆåÊàê Volume ÁöÑ‚ÄúMount Èò∂ÊÆµ‚Äù</p></li></ul><h1 id="provision"><a href="#provision" class="headerlink" title="provision"></a>provision</h1><h2 id="Dynamic-provisioning"><a href="#Dynamic-provisioning" class="headerlink" title="Dynamic provisioning"></a>Dynamic provisioning</h2><ul><li>Create the PVC first.</li><li>the CreateVolume request is triggered by Kubernetes when a PVC requests storage, and the CSI driver dynamically provisions the volume based on StorageClass and PVC parameters.</li></ul><h2 id="Static-provisioning"><a href="#Static-provisioning" class="headerlink" title="Static provisioning"></a>Static provisioning</h2><ul><li>Create the PV first.</li><li>there is no CreateVolume request. Instead, the PV is manually created, and the CSI driver accesses an already provisioned volume using information like volumeHandle from the PV YAML.</li></ul><h1 id="senarios"><a href="#senarios" class="headerlink" title="senarios"></a>senarios</h1><h2 id="expand-volume"><a href="#expand-volume" class="headerlink" title="expand volume"></a>expand volume</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant User as User</span><br><span class="line">    participant APIServer as API Server</span><br><span class="line">    participant ControllerManager as Kube-Controller-Manager</span><br><span class="line">    participant CSIController as CSI Controller Plugin</span><br><span class="line">    participant Node as Node (Kubelet)</span><br><span class="line"></span><br><span class="line">    User-&gt;&gt;APIServer: Update PVC with new size</span><br><span class="line">    APIServer-&gt;&gt;ControllerManager: Trigger Volume Expansion</span><br><span class="line">    ControllerManager-&gt;&gt;CSIController: ControllerExpandVolume</span><br><span class="line">    CSIController--&gt;&gt;ControllerManager: Expansion Success (NodeExpansionRequired: true)</span><br><span class="line"></span><br><span class="line">    ControllerManager-&gt;&gt;APIServer: Update PV size</span><br><span class="line">    APIServer-&gt;&gt;Node: Notify Node of Expansion</span><br><span class="line">    Node-&gt;&gt;CSIController: NodeExpandVolume</span><br><span class="line">    CSIController--&gt;&gt;Node: Expansion Success</span><br><span class="line">    Node-&gt;&gt;APIServer: Filesystem Resized</span><br><span class="line">    APIServer-&gt;&gt;User: PVC Expansion Complete</span><br></pre></td></tr></table></figure><h1 id="code"><a href="#code" class="headerlink" title="code"></a>code</h1><h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><ul><li><p><code>volCap := req.GetVolumeCapability()</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">get volume_capability:</span><br><span class="line">appName=&quot;test-dingofs-app&quot; volumeId=&quot;pvc-a96af0fb-2df7-435f-bde9-b3b3f0853023&quot;</span><br><span class="line">volCap=</span><br><span class="line">&#123;</span><br><span class="line">&quot;AccessType&quot;: &#123;</span><br><span class="line">&quot;Mount&quot;: &#123;</span><br><span class="line">&quot;mount_flags&quot;: [&quot;diskCache.diskCacheType=2&quot;, &quot;block_cache.cache_store=disk&quot;, &quot;disk_cache.cache_dir=/curvefs/client/data/cache/1:10240;/curvefs/client/data/cache/2:10240;/curvefs/client/data/cache/3:10240&quot;, &quot;disk_cache.cache_size_mb=102400&quot;]</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;access_mode&quot;: &#123;</span><br><span class="line">&quot;mode&quot;: 5</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>volCtx := req.GetVolumeContext()</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">get volume context:</span><br><span class="line">appName=&quot;test-dingofs-app&quot; volumeId=&quot;pvc-a96af0fb-2df7-435f-bde9-b3b3f0853023&quot;</span><br><span class="line">volCtx=</span><br><span class="line">&#123;</span><br><span class="line">&quot;capacity&quot;: &quot;21474836480&quot;,</span><br><span class="line">&quot;csi.storage.k8s.io/ephemeral&quot;: &quot;false&quot;,</span><br><span class="line">&quot;csi.storage.k8s.io/pod.name&quot;: &quot;test-dingofs-app&quot;,</span><br><span class="line">&quot;csi.storage.k8s.io/pod.namespace&quot;: &quot;test-dingofs-mountpod&quot;,</span><br><span class="line">&quot;csi.storage.k8s.io/pod.uid&quot;: &quot;98ad53c2-e99f-4ccf-b98c-841d9ec5a5b8&quot;,</span><br><span class="line">&quot;csi.storage.k8s.io/serviceAccount.name&quot;: &quot;default&quot;,</span><br><span class="line">&quot;storage.kubernetes.io/csiProvisionerIdentity&quot;: &quot;1734407521827-8081-csi.dingofs.v2&quot;,</span><br><span class="line">&quot;subPath&quot;: &quot;pvc-a96af0fb-2df7-435f-bde9-b3b3f0853023&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> csi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>emacs</title>
      <link href="/2024/08/30/emacs/"/>
      <url>/2024/08/30/emacs/</url>
      
        <content type="html"><![CDATA[<h2 id="shortcut"><a href="#shortcut" class="headerlink" title="shortcut"></a>shortcut</h2><table><thead><tr><th>Emacs ÂäüËÉΩÈîÆ</th><th>Áº©ÂÜô</th><th>ÂØπÂ∫îÈîÆÁõòÊåâÈîÆ(PC/Mac)</th></tr></thead><tbody><tr><td>Control</td><td>C</td><td>Ctrl / Control</td></tr><tr><td>Meta</td><td>M</td><td>Alt / Option</td></tr><tr><td>Shift</td><td>S</td><td>Shift / Shift</td></tr><tr><td>Super</td><td>s</td><td>Win / Command</td></tr></tbody></table><table><thead><tr><th>Êìç‰ΩúÊèèËø∞</th><th>Âø´Êç∑ÈîÆ</th><th>ÂëΩ‰ª§Âêç</th></tr></thead><tbody><tr><td>ËæìÂÖ•ÂëΩ‰ª§</td><td>M-x</td><td>execute-extended-command</td></tr><tr><td>ÈÄÄÂá∫Á®ãÂ∫è</td><td>C-x C-c</td><td>save-buffers-kill-terminal</td></tr><tr><td>ÊîæÂºÉÂΩìÂâçËæìÂÖ•</td><td>C-g</td><td>keyboard-quit</td></tr><tr><td>ÂÖâÊ†áÂêë‰∏ä‰∏ÄË°åÔºàÊñπÂêëÈîÆ‰∏äÔºâ</td><td>C-p</td><td>previous-line</td></tr><tr><td>ÂÖâÊ†áÂêë‰∏ã‰∏ÄË°åÔºàÊñπÂêëÈîÆ‰∏ãÔºâ</td><td>C-n</td><td>next-line</td></tr><tr><td>ÂÖâÊ†áÂêëÂ∑¶‰∏Ä‰∏™Â≠óÁ¨¶ÔºàÊñπÂêëÈîÆÂ∑¶Ôºâ</td><td>C-b</td><td>backward-char</td></tr><tr><td>ÂÖâÊ†áÂêëÂè≥‰∏Ä‰∏™Â≠óÁ¨¶ÔºàÊñπÂêëÈîÆÂè≥Ôºâ</td><td>C-f</td><td>forward-char</td></tr><tr><td>ÂÖâÊ†áÂêëÂ∑¶ÁßªÂä®‰∏Ä‰∏™ËØç</td><td>M-b</td><td>backward-word</td></tr><tr><td>ÂÖâÊ†áÂêëÂè≥ÁßªÂä®‰∏Ä‰∏™ËØç</td><td>M-f</td><td>forward-word</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Ë°åÈ¶ñ</td><td>C-a</td><td>move-beginning-of-line</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Ë°åÂ∞æ</td><td>C-e</td><td>move-end-of-line</td></tr><tr><td>ÂÖâÊ†áÁßªÂä®Âà∞‰∏ÄË°åÁº©ËøõÁöÑÂºÄÂ§¥</td><td>M-m</td><td>back-to-indentation</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Âè•È¶ñ</td><td>M-a</td><td>backward-sentence</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Âè•Â∞æ</td><td>M-e</td><td>forward-sentence</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Êñá‰ª∂ÂºÄÂ§¥</td><td>M-&lt;</td><td>beginning-of-buffer</td></tr><tr><td>ÂÖâÊ†áÁßªËá≥Êñá‰ª∂ÁªìÂ∞æ</td><td>M-&gt;</td><td>end-of-buffer</td></tr><tr><td>ÂÖâÊ†áÁßªÂä®Ëá≥Á™óÂè£ÁöÑ‰∏≠Èó¥„ÄÅÊúÄ‰∏ä„ÄÅÊúÄ‰∏ã</td><td>M-r</td><td>move-to-window-line-top-bottom</td></tr><tr><td>Âà†Èô§ÂÖâÊ†áÂè≥‰æßÂ≠óÁ¨¶</td><td>C-d</td><td>delete-char</td></tr><tr><td>ÁßªÈô§ÂÖâÊ†áÂè≥‰æßËØç</td><td>M-d</td><td>kill-word</td></tr><tr><td>ÁßªÈô§ÂÖâÊ†áÂ∑¶‰æßËØç</td><td>M-DEL</td><td>backward-kill-word</td></tr><tr><td>ÁßªÈô§Âè≥‰æßÁõ¥Âà∞Âè•Â≠êÁªìÂ∞æ</td><td>M-k</td><td>kill-sentence</td></tr><tr><td>ÁßªÈô§Âè≥‰æßÁõ¥Âà∞Ë°åÂ∞æ</td><td>C-k</td><td>kill-line</td></tr><tr><td>ËÆæÁΩÆÊ†áËÆ∞‰ª•ÈÄâÊã©Âå∫Âüü</td><td>C-SPC</td><td>set-mark-command</td></tr><tr><td>Â§çÂà∂Âå∫Âüü</td><td>M-w</td><td>kill-region-save</td></tr><tr><td>ÁßªÈô§Âå∫Âüü</td><td>C-w</td><td>kill-region</td></tr><tr><td>ÊèíÂÖ•Â∑≤ÁßªÈô§ÊñáÊú¨</td><td>C-y</td><td>yank</td></tr><tr><td>ÊèíÂÖ•ÂéÜÂè≤ÁßªÈô§ÊñáÊú¨</td><td>M-y</td><td>yank-pop</td></tr><tr><td>Êí§Âõû</td><td>C-/ Êàñ C-_ Êàñ C-x u</td><td>undo</td></tr><tr><td>Ë∑≥ËΩ¨Âà∞‰∏ä‰∏ÄÊ†áËÆ∞</td><td>C-x C-SPC Êàñ C-u C-SPC</td><td>pop-global-mark</td></tr><tr><td>Ë∑≥ËΩ¨Âà∞Ë°åÂè∑</td><td>M-g M-g</td><td>goto-line</td></tr><tr><td>ÈáçÂ§ç</td><td>C-u</td><td>universal-argument</td></tr><tr><td>Âêë‰∏ã‰∏ÄÈ°µ</td><td>C-v</td><td>scroll-up-command</td></tr><tr><td>Âêë‰∏ä‰∏ÄÈ°µ</td><td>M-v</td><td>scroll-down-command</td></tr><tr><td>ÁßªÂä®È°µÈù¢‰ΩøÂæóÂÖâÊ†áÂú®‰∏≠Â§Æ/ÊúÄ‰∏äÊñπ/ÊúÄ‰∏ãÊñπ</td><td>C-l</td><td>recenter-top-bottom</td></tr><tr><td>ÂêëÂêéÊêúÁ¥¢</td><td>C-s</td><td>isearch-forward</td></tr><tr><td>ÂêëÂâçÊêúÁ¥¢</td><td>C-r</td><td>isearch-backward</td></tr><tr><td>‰∫§Êç¢ÂâçÂêéÂ≠óÁ¨¶</td><td>C-t</td><td>transpose-chars</td></tr><tr><td>‰∫§Êç¢ÂâçÂêéËØç</td><td>M-t</td><td>transpose-words</td></tr><tr><td>‰∫§Êç¢ÂâçÂêé‰∏§Ë°å</td><td>C-x C-t</td><td>transpose-lines</td></tr><tr><td>Âú®‰∏ãÊñπÊñ∞Âª∫‰∏ÄË°å</td><td>C-o</td><td>open-line</td></tr><tr><td>Âà†Èô§ËøûÁª≠Á©∫Ë°å‰∏∫‰∏Ä‰∏™Á©∫Ë°å</td><td>C-x C-o</td><td>delete-blank-lines</td></tr><tr><td>Â∞ÜÂêéÈù¢ÁöÑËØçÂèò‰∏∫Â∞èÂÜô</td><td>M-l</td><td>downcase-word</td></tr><tr><td>Â∞ÜÂêéÈù¢ÁöÑËØçÂèò‰∏∫Â§ßÂÜô</td><td>M-u</td><td>upcase-word</td></tr><tr><td>Â∞ÜÂêéÈù¢ÁöÑËØçÂèò‰∏∫È¶ñÂ≠óÊØçÂ§ßÂÜô</td><td>M-c</td><td>capitalize-word</td></tr><tr><td>ÊîæÂ§ßÂ≠óÂè∑</td><td>C-x C-=</td><td>text-scale-adjust</td></tr><tr><td>Áº©Â∞èÂ≠óÂè∑</td><td>C-x C‚Äì</td><td>text-scale-adjust</td></tr><tr><td>ÈáçÁΩÆÂ≠óÂè∑</td><td>C-x C-0</td><td>text-scale-adjust</td></tr><tr><td>ÁÆÄË¶ÅÊèèËø∞Âø´Êç∑ÈîÆÂäüËÉΩ</td><td>C-h c</td><td>describe-key-briefly</td></tr><tr><td>ÊèèËø∞Âø´Êç∑ÈîÆÂäüËÉΩ</td><td>C-h k</td><td>describe-key</td></tr><tr><td>ÊèèËø∞ÂáΩÊï∞ÂäüËÉΩ</td><td>C-h f</td><td>describe-function</td></tr><tr><td>ÊèèËø∞ÂèòÈáè</td><td>C-h v</td><td>describe-variable</td></tr><tr><td>ÂàóÂá∫Âê´Êüê‰∏ÄÂÖ≥ÈîÆËØçÁöÑÂëΩ‰ª§</td><td>C-h a</td><td>apropos-command</td></tr><tr><td>ÂàóÂá∫Âê´Êüê‰∏ÄÂÖ≥ÈîÆËØçÁöÑÁ¨¶Âè∑ÁöÑÊñáÊ°£</td><td>C-h d</td><td>apropos-documentation</td></tr><tr><td>Â∏ÆÂä©ÁöÑÂ∏ÆÂä©</td><td>C-h ?</td><td>help-for-help</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes vcluster</title>
      <link href="/2024/08/27/kubernetes%20vcluster/"/>
      <url>/2024/08/27/kubernetes%20vcluster/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vCluster is a technology that creates virtual clusters within a physical Kubernetes cluster. These virtual clusters are fully functional and provide enhanced isolation and flexibility for multi-tenancy. Each vCluster operates independently, with its own API server and control plane, while sharing the underlying resources of the host cluster.</p><p>Kubernetes serves as the foundational platform for container orchestration, while vCluster enhances its capabilities by providing isolated, virtualized environments for multi-tenant applications. This relationship allows organizations to maximize resource utilization and maintain security across diverse teams and applications</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------------------------------+</span><br><span class="line">|                  Host Cluster                    |</span><br><span class="line">|                                                  |</span><br><span class="line">|  +--------------------------------------------+  |</span><br><span class="line">|  |            Kubernetes Control Plane        |  |</span><br><span class="line">|  |                                            |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |  |  API Server     |   |  Controller     | |  |</span><br><span class="line">|  |  |                 |   |  Manager        | |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |                                            |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |  |  Scheduler      |   |  Data Store     | |  |</span><br><span class="line">|  |  |                 |   |  (etcd)         | |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |                                            |  |</span><br><span class="line">|  |  +--------------------------------------+  |  |</span><br><span class="line">|  |  |          Worker Nodes                |  |  |</span><br><span class="line">|  |  |  (Pods running applications)         |  |  |</span><br><span class="line">|  |  +--------------------------------------+  |  |</span><br><span class="line">|  +--------------------------------------------+  |</span><br><span class="line">|                                                  |</span><br><span class="line">|  +--------------------------------------------+  |</span><br><span class="line">|  |                vCluster                    |  |</span><br><span class="line">|  |                                            |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |  |  Virtual API    |   |  Syncer         | |  |</span><br><span class="line">|  |  |  Server         |   |                 | |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |                                            |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  |  |  Virtual        |   |  Virtual Data   | |  |</span><br><span class="line">|  |  |  Controller     |   |  Store          | |  |</span><br><span class="line">|  |  +-----------------+   +-----------------+ |  |</span><br><span class="line">|  +--------------------------------------------+  |</span><br><span class="line">+--------------------------------------------------+</span><br></pre></td></tr></table></figure><img src="/images/k8s/vcluster-architecture.png" style="width:100%"><h2 id="Key-Features-of-vCluster"><a href="#Key-Features-of-vCluster" class="headerlink" title="Key Features of vCluster"></a>Key Features of vCluster</h2><ul><li><strong>Isolation</strong>: Each virtual cluster has its own control plane, enhancing security and minimizing conflicts among teams.</li><li><strong>Resource Management</strong>: Virtual clusters manage their resources independently, allowing for efficient scaling and resource utilization.</li><li><strong>Multi-Tenancy</strong>: Supports multiple teams or tenants operating within the same physical infrastructure without interference.</li><li><strong>Flexibility</strong>: Can run on various Kubernetes distributions and supports different backing stores for data management.</li></ul><h2 id="Relationship-Between-Kubernetes-and-vCluster"><a href="#Relationship-Between-Kubernetes-and-vCluster" class="headerlink" title="Relationship Between Kubernetes and vCluster"></a>Relationship Between Kubernetes and vCluster</h2><ul><li><strong>Foundation</strong>: vCluster is built on top of Kubernetes, leveraging its capabilities to provide additional layers of abstraction and isolation.</li><li><strong>Resource Sharing</strong>: While vClusters share the physical resources of the host Kubernetes cluster, they maintain operational independence, allowing teams to work without affecting the global state of the host cluster.</li><li><strong>Enhanced Security</strong>: vClusters provide granular permissions and isolated control planes, which enhance security compared to standard Kubernetes namespaces.</li><li><strong>Operational Efficiency</strong>: By reducing the load on the host cluster‚Äôs API server and allowing independent management of resources, vClusters improve overall operational efficiency.</li></ul>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vcluster </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PlantUML</title>
      <link href="/2024/08/23/plantUML/"/>
      <url>/2024/08/23/plantUML/</url>
      
        <content type="html"><![CDATA[<h1 id="TBD"><a href="#TBD" class="headerlink" title="TBD"></a>TBD</h1>]]></content>
      
      
      <categories>
          
          <category> PlantUML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>grpc point</title>
      <link href="/2024/08/15/grpc/"/>
      <url>/2024/08/15/grpc/</url>
      
        <content type="html"><![CDATA[<h1 id="proto-file"><a href="#proto-file" class="headerlink" title="proto file"></a>proto file</h1><blockquote><p>.proto file that defines the gRPC service and messages</p></blockquote><h1 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h1><blockquote><p>Use protoc to generate client and server code for both languages</p></blockquote><p>When you compile <code>.proto</code> files using <code>protoc</code>, it generates two Go files: <code>xxx.pb.go</code> and <code>xxx_grpc.pb.go</code>. These files are essential for both client and server implementations in a gRPC service. Here‚Äôs how they fit into the architecture:</p><h3 id="xxx-pb-go"><a href="#xxx-pb-go" class="headerlink" title="xxx.pb.go"></a><code>xxx.pb.go</code></h3><ul><li><strong>Purpose</strong>: Contains the Go representations of the protocol buffer messages defined in the <code>.proto</code> file.</li><li><strong>Usage</strong>: Used by both client and server to serialize and deserialize the messages.</li><li><strong>Contents</strong>: <ul><li>Go structs for each message type.</li><li>Methods for marshaling and unmarshaling these structs to and from binary format.</li></ul></li></ul><h3 id="xxx-grpc-pb-go"><a href="#xxx-grpc-pb-go" class="headerlink" title="xxx_grpc.pb.go"></a><code>xxx_grpc.pb.go</code></h3><ul><li><strong>Purpose</strong>: Contains the gRPC service definitions and client/server interfaces.</li><li><strong>Usage</strong>: <ul><li><strong>Server</strong>: Implements the server-side logic by embedding the generated server interface.</li><li><strong>Client</strong>: Uses the generated client interface to make RPC calls.</li></ul></li><li><strong>Contents</strong>:<ul><li>Server interface with methods corresponding to the RPCs defined in the <code>.proto</code> file.</li><li>Client interface with methods to call the RPCs.</li><li>Registration functions to register the server with a gRPC server.</li><li>Handler functions to handle incoming RPC calls.</li></ul></li></ul><h1 id="client-and-server"><a href="#client-and-server" class="headerlink" title="client and server"></a>client and server</h1><h3 id="Client-Code"><a href="#Client-Code" class="headerlink" title="Client Code"></a>Client Code</h3><ul><li><strong>References</strong>: Both <code>xxx.pb.go</code> and <code>xxx_grpc.pb.go</code>.</li><li><strong>Functionality</strong>: <ul><li>Uses the client interface from <code>xxx_grpc.pb.go</code> to make RPC calls.</li><li>Constructs request messages using the structs from <code>xxx.pb.go</code>.</li></ul></li></ul><h3 id="Server-Code"><a href="#Server-Code" class="headerlink" title="Server Code"></a>Server Code</h3><ul><li><strong>References</strong>: Both <code>xxx.pb.go</code> and <code>xxx_grpc.pb.go</code>.</li><li><strong>Functionality</strong>: <ul><li>Implements the server interface from <code>xxx_grpc.pb.go</code>.</li><li>Handles incoming requests and constructs response messages using the structs from <code>xxx.pb.go</code>.</li></ul></li></ul><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>In the provided example:</p><ul><li><p><strong>Client Code</strong> (<code>examples/helloworld/greeter_client/main.go</code>):</p><ul><li>Uses <code>pb.NewGreeterClient</code> from <code>helloworld_grpc.pb.go</code> to create a client.</li><li>Constructs <code>HelloRequest</code> messages using the struct from <code>helloworld.pb.go</code>.</li></ul></li><li><p><strong>Server Code</strong> (<code>examples/helloworld/greeter_server/main.go</code>):</p><ul><li>Implements <code>GreeterServer</code> interface from <code>helloworld_grpc.pb.go</code>.</li><li>Constructs <code>HelloReply</code> messages using the struct from <code>helloworld.pb.go</code>.</li></ul></li></ul><p><strong>This architecture ensures that both client and server have a consistent and type-safe way to communicate using the protocol buffer messages and gRPC service definitions.</strong></p>]]></content>
      
      
      <categories>
          
          <category> grpc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> point </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>code style</title>
      <link href="/2024/08/14/code%20styple/"/>
      <url>/2024/08/14/code%20styple/</url>
      
        <content type="html"><![CDATA[<h1 id="functional-programming"><a href="#functional-programming" class="headerlink" title="functional programming"></a>functional programming</h1><h2 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h2><p>Go (Golang) supports functional programming concepts, although it is primarily an imperative language. Here are some key functional programming features in Go:</p><h3 id="1-First-Class-Functions"><a href="#1-First-Class-Functions" class="headerlink" title="1. First-Class Functions"></a>1. First-Class Functions</h3><p>Functions in Go are first-class citizens, meaning they can be assigned to variables, passed as arguments, and returned from other functions.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> op <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line">    op = add</span><br><span class="line">    fmt.Println(op(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// Outputs: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-Higher-Order-Functions"><a href="#2-Higher-Order-Functions" class="headerlink" title="2. Higher-Order Functions"></a>2. Higher-Order Functions</h3><p>Functions that take other functions as arguments or return functions are called higher-order functions.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(op <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">a</span>, <span class="title">b</span> <span class="title">int</span>) <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> op(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    add := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> a + b &#125;</span><br><span class="line">    fmt.Println(apply(add, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// Outputs: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-Closures"><a href="#3-Closures" class="headerlink" title="3. Closures"></a>3. Closures</h3><p>Go supports closures, which are functions that capture the variables from their surrounding scope.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incrementer</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        i++</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    inc := incrementer()</span><br><span class="line">    fmt.Println(inc()) <span class="comment">// Outputs: 1</span></span><br><span class="line">    fmt.Println(inc()) <span class="comment">// Outputs: 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-Pure-Functions"><a href="#4-Pure-Functions" class="headerlink" title="4. Pure Functions"></a>4. Pure Functions</h3><p>Pure functions are functions that do not have side effects and return the same result given the same arguments.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// Outputs: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-Immutability"><a href="#5-Immutability" class="headerlink" title="5. Immutability"></a>5. Immutability</h3><p>While Go does not enforce immutability, you can design your functions to avoid mutating state.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addToSlice</span><span class="params">(slice []<span class="keyword">int</span>, value <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    newSlice := <span class="built_in">append</span>(slice, value)</span><br><span class="line">    <span class="keyword">return</span> newSlice</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    original := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">    newSlice := addToSlice(original, <span class="number">4</span>)</span><br><span class="line">    fmt.Println(original) <span class="comment">// Outputs: [1, 2, 3]</span></span><br><span class="line">    fmt.Println(newSlice) <span class="comment">// Outputs: [1, 2, 3, 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-Functional-Composition"><a href="#6-Functional-Composition" class="headerlink" title="6. Functional Composition"></a>6. Functional Composition</h3><p>You can compose functions to build more complex operations.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">multiply</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compose</span><span class="params">(f, g <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>) <span class="title">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> f(g(a, b), b)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    addThenMultiply := compose(multiply, add)</span><br><span class="line">    fmt.Println(addThenMultiply(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// Outputs: 15 (5 * 3)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>These features allow you to use functional programming techniques in Go, making your code more modular, reusable, and easier to reason about.</p><h1 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h1><ul><li>ÂáΩÊï∞ÂºèÁ®ãÂ∫èÊõ¥ÂÄæÂêë‰∫éÈì∫ËÆæË∞ÉËäÇÊï∞ÊçÆÊµÅËΩ¨Êç¢ÁöÑÁÆ°ÈÅìÁªìÊûÑÔºåËÄåÂèØÂèòÁöÑÂëΩ‰ª§ÂºèÁ®ãÂ∫èÊõ¥ÂÄæÂêë‰∫éËø≠‰ª£Âú∞Â§ÑÁêÜ‰∏Ä‰∏™‰∏™Á±ªÂûãÂØπË±°</li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> style </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>file system</title>
      <link href="/2024/08/07/fs:%20file%20system/"/>
      <url>/2024/08/07/fs:%20file%20system/</url>
      
        <content type="html"><![CDATA[<h1 id="storage"><a href="#storage" class="headerlink" title="storage"></a>storage</h1><h2 id="Object-Block-and-File-Storage"><a href="#Object-Block-and-File-Storage" class="headerlink" title="Object, Block and File Storage"></a>Object, Block and File Storage</h2><table><thead><tr><th>Feature</th><th><strong>Object Storage</strong></th><th><strong>Block Storage</strong></th><th><strong>File Storage</strong></th></tr></thead><tbody><tr><td><strong>Data Structure</strong></td><td>Stores as objects (data + metadata)</td><td>Stores in blocks (raw chunks of data)</td><td>Stores as files in directories</td></tr><tr><td><strong>Access Protocols</strong></td><td>HTTP APIs (e.g., S3)</td><td>iSCSI, Fibre Channel</td><td>NFS, SMB/CIFS</td></tr><tr><td><strong>Performance</strong></td><td>High scalability, slower access</td><td>Low latency, high IOPS</td><td>Moderate, varies by file system</td></tr><tr><td><strong>Scalability</strong></td><td>Virtually unlimited (distributed)</td><td>Scales well with SAN, but complex</td><td>Limited by file system performance</td></tr><tr><td><strong>Cost Efficiency</strong></td><td>High for large amounts of unstructured data</td><td>Can be expensive at scale</td><td>Moderate to expensive</td></tr><tr><td><strong>Best Use Cases</strong></td><td>Media content, backups, big data, archives</td><td>Databases, VMs, transactional systems</td><td>Shared access, collaboration, home directories</td></tr><tr><td><strong>Metadata</strong></td><td>Rich, customizable per object</td><td>None</td><td>Minimal (file permissions, attributes)</td></tr><tr><td><strong>Concurrency</strong></td><td>Excellent for concurrent access</td><td>Not designed for shared access</td><td>Designed for shared access</td></tr><tr><td><strong>Example Systems</strong></td><td>AWS S3, MinIO, Google Cloud Storage</td><td>AWS EBS, iSCSI, Fibre Channel</td><td>NFS, SMB/CIFS, GlusterFS</td></tr></tbody></table><ul><li><strong>Object Storage</strong>: Best for large-scale unstructured data, low cost, scalable but not suitable for low-latency or transactional workloads.</li><li><strong>Block Storage</strong>: High performance, low latency, granular control over data, ideal for VMs, databases, but can be costly to scale.</li><li><strong>File Storage</strong>: File-based storage for shared access, good for collaboration, but less scalable for large datasets.</li></ul><p><strong>Object storage</strong>, <strong>block storage</strong>, and <strong>file storage</strong> are all methods of storing and accessing data, but they differ in structure, management, and how they handle data. Despite their differences, they often complement each other in modern storage systems, and sometimes, the boundaries between them blur depending on use cases.</p><p><strong>Relation</strong></p><ul><li><strong>Different Levels of Abstraction</strong>:<ul><li><strong>Block Storage</strong> is the most granular, dealing with raw blocks of data.</li><li><strong>File Storage</strong> is built on top of block storage, organizing data into files and directories.</li><li><strong>Object Storage</strong> exists at a higher level, organizing data into objects with associated metadata and accessed through APIs, not files or blocks.</li></ul></li><li><strong>Integration in Systems</strong>:<ul><li>Object storage can use block storage underneath to store objects.</li><li>File storage is typically built on block storage, where the blocks form the basis of a file system.</li><li>Many modern systems (especially in cloud environments) allow the coexistence of these types of storage, where object storage holds bulk data, block storage serves databases and high-performance workloads, and file storage provides shared file access.</li></ul></li></ul><p><strong>senario</strong>: A Cloud-Based Photo Sharing Application</p><p>Let‚Äôs say we‚Äôre developing a photo-sharing application. Here‚Äôs how each storage type might be used:</p><ol><li><strong>Block Storage</strong>: <ul><li>The application‚Äôs <strong>database</strong> (such as MySQL or PostgreSQL) will store metadata about users, photos, and comments. Databases need low-latency, fast read/write operations, which makes block storage ideal. Each database table or index is stored in blocks, providing high performance and reliability.</li><li>Example: An AWS EC2 instance uses <strong>Amazon Elastic Block Store (EBS)</strong> for fast data access in the application‚Äôs database.</li></ul></li><li><strong>File Storage</strong>:<ul><li>For <strong>user-generated content</strong>, like profile pictures or documents that may need to be shared and updated by multiple users, file storage is the best fit. It allows users to upload, read, and modify files easily. The hierarchical structure also works well for organizing files into folders.</li><li>Example: The application uses <strong>NFS (Network File System)</strong> or <strong>SMB/CIFS</strong> to store shared user profiles, document uploads, or configuration files. In this case, multiple application servers can access the same files.</li></ul></li><li><strong>Object Storage</strong>:<ul><li>For <strong>large photos and videos</strong> uploaded by users, object storage is the best choice due to its scalability and cost efficiency. Each file (photo or video) is stored as an object with metadata like date uploaded, user ID, etc. Object storage is ideal because it can easily scale to store millions of large media files.</li><li>Example: The application stores users‚Äô photos and videos in <strong>Amazon S3</strong> or <strong>MinIO</strong> as objects, where each photo or video is stored independently and accessed through an API.</li></ul></li></ol><p><strong>The Workflow Example</strong>:</p><ul><li>When a user uploads a new photo:<ol><li><strong>File Storage</strong> stores any accompanying text (e.g., captions, metadata) that might be shared or updated by other users.</li><li><strong>Block Storage</strong> is used to store transaction information, user details, and other relational data in the app‚Äôs database.</li><li><strong>Object Storage</strong> stores the actual image file (the photo itself) as an object, and the app accesses it via an HTTP API when needed.</li></ol></li></ul><p><strong>Visual Relationship</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Object Storage (High-level, flat structure)</span><br><span class="line">|-- Stores: Photos, Videos</span><br><span class="line">|-- Metadata: Filename, upload time, user ID</span><br><span class="line">|-- Access via: APIs (e.g., S3 API)</span><br><span class="line"></span><br><span class="line">File Storage (Intermediate level, hierarchical structure)</span><br><span class="line">|-- Stores: Text files, configuration files, shared resources</span><br><span class="line">|-- Hierarchical access: Files are accessed via paths (/photos/, /users/)</span><br><span class="line">|-- Access via: NFS, SMB/CIFS</span><br><span class="line"></span><br><span class="line">Block Storage (Low-level, raw storage)</span><br><span class="line">|-- Stores: Database records, application data, raw volumes</span><br><span class="line">|-- Managed by: File systems (ext4, XFS) or directly by applications (databases)</span><br><span class="line">|-- Access via: iSCSI, Fibre Channel, or direct local access</span><br></pre></td></tr></table></figure><ul><li><strong>Key Integration Points</strong></li></ul><ol><li><p><strong>Data flows between storage types</strong>:</p><ul><li>Object storage may rely on block storage for its underlying infrastructure. For instance, in a cloud service, object storage systems often store objects across distributed blocks on physical storage.</li><li>File storage often relies on block storage (e.g., a disk or volume formatted with a file system) to organize files into directories. </li></ul></li><li><p><strong>Shared Purpose</strong>:</p><ul><li>All three storage types can coexist in a modern system, handling different parts of the same application. Block storage handles the core operational data; file storage manages shared, accessible data; and object storage is used for scalable, long-term archival of data.</li></ul></li></ol><p>In summary, <strong>block storage</strong> is the foundational layer, <strong>file storage</strong> organizes files in a hierarchical structure on top of block storage, and <strong>object storage</strong> organizes data in a flat, scalable way with metadata and API-based access. Each serves a different purpose but can be used together for a comprehensive data storage solution in complex applications.</p><h2 id="S3-Gateway"><a href="#S3-Gateway" class="headerlink" title="S3 Gateway"></a>S3 Gateway</h2><p>S3 Gateway acts as an intermediary to facilitate interactions between your application and the object storage system. This includes common operations on <strong>buckets</strong> and <strong>objects</strong> such as:</p><ul><li><strong>Creating buckets</strong> (e.g., <code>CreateBucket</code> API call)</li><li><strong>Reading objects</strong> (e.g., <code>GetObject</code>)</li><li><strong>Uploading or writing objects</strong> (e.g., <code>PutObject</code>)</li><li><strong>Deleting objects or buckets</strong> (e.g., <code>DeleteObject</code>, <code>DeleteBucket</code>)</li></ul><p>The S3 gateway translates these requests into <strong>S3 API calls</strong> that the object storage system understands. This is especially useful when:</p><ol><li>Your application isn‚Äôt natively using S3 but requires access to an S3-compatible storage system (via the gateway).</li><li>You‚Äôre in a hybrid or on-premises environment where you want applications to interact with object storage in the same way they would with a cloud-based S3 service.</li></ol><p>For example, if you have a legacy application that doesn‚Äôt natively support the S3 API but needs to manage objects (e.g., create or read files), the S3 gateway can allow the application to perform these tasks as if it were working with a regular file system. The gateway will handle the <strong>CRUD</strong> (Create, Read, Update, Delete) operations on <strong>buckets</strong> and <strong>objects</strong> by mapping them to the appropriate S3 commands.</p><p>So, when operating on buckets and objects, especially in environments where direct S3 API calls are not feasible or supported, using an S3 gateway is a key method. The gateway allows you to continue using familiar protocols while interacting with S3-compatible storage systems.</p><h1 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h1><h2 id="FS-type"><a href="#FS-type" class="headerlink" title="FS type"></a>FS type</h2><p><img src="/images/fs/fileSystemType.jpeg" alt="fileSystemType.jpeg"></p><ul><li><p>Mac¬†ÈªòËÆ§ÂèØ‰ª•ËØª¬†Windows¬†ÁöÑ¬†NTFS¬†Ê†ºÂºèÔºå‰ΩÜ‰∏çËÉΩÂÜô„ÄÇ</p></li><li><p>Windows¬†Êó†Ê≥ïËØÜÂà´¬†Mac¬†ÁöÑ¬†HFS+¬†Êàñ¬†APFS¬†Ê†ºÂºè„ÄÇ</p></li><li><p>Mac¬†Âíå¬†Windows¬†ÈÉΩËÉΩÊ≠£Â∏∏ËØªÂÜô¬†FAT32¬†Âíå¬†ExFAT¬†Ê†ºÂºè</p></li><li><p>linux</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LinuxÔºöÂ≠òÂú®Âá†ÂçÅ‰∏™Êñá‰ª∂Á≥ªÁªüÁ±ªÂûãÔºöext2Ôºåext3Ôºåext4ÔºåxfsÔºåbrtfsÔºåzfsÔºàman 5 fsÂèØ‰ª•ÂèñÂæóÂÖ®ÈÉ®Êñá‰ª∂Á≥ªÁªüÁöÑ‰ªãÁªçÔºâ</span><br><span class="line"></span><br><span class="line">‰∏çÂêåÊñá‰ª∂Á≥ªÁªüÈááÁî®‰∏çÂêåÁöÑÊñπÊ≥ïÊù•ÁÆ°ÁêÜÁ£ÅÁõòÁ©∫Èó¥ÔºåÂêÑÊúâ‰ºòÂä£ÔºõÊñá‰ª∂Á≥ªÁªüÊòØÂÖ∑‰ΩìÂà∞ÂàÜÂå∫ÁöÑÔºåÊâÄ‰ª•Ê†ºÂºèÂåñÈíàÂØπÁöÑÊòØÂàÜÂå∫ÔºåÂàÜÂå∫Ê†ºÂºèÂåñÊòØÊåáÈááÁî®ÊåáÂÆöÁöÑÊñá‰ª∂Á≥ªÁªüÁ±ªÂûãÂØπÂàÜÂå∫Á©∫Èó¥ËøõË°åÁôªËÆ∞„ÄÅÁ¥¢ÂºïÂπ∂Âª∫Á´ãÁõ∏Â∫îÁöÑÁÆ°ÁêÜË°®Ê†ºÁöÑËøáÁ®ã„ÄÇ</span><br><span class="line"></span><br><span class="line">ext2ÂÖ∑ÊúâÊûÅÂø´ÁöÑÈÄüÂ∫¶ÂíåÊûÅÂ∞èÁöÑCPUÂç†Áî®ÁéáÔºåÂèØÁî®‰∫éÁ°¨ÁõòÂíåÁßªÂä®Â≠òÂÇ®ËÆæÂ§á</span><br><span class="line">ext3Â¢ûÂä†Êó•ÂøóÂäüËÉΩÔºåÂèØÂõûÊ∫ØËøΩË∏™</span><br><span class="line">ext4Êó•ÂøóÂºèÊñá‰ª∂Á≥ªÁªüÔºåÊîØÊåÅ1EBÔºà1024*1024TBÔºâÔºåÊúÄÂ§ßÂçïÊñá‰ª∂16TBÔºåÊîØÊåÅËøûÁª≠ÂÜôÂÖ•ÂèØÂáèÂ∞ëÊñá‰ª∂Á¢éÁâá„ÄÇrhel6ÈªòËÆ§Êñá‰ª∂Á≥ªÁªü</span><br><span class="line">xfsÂèØ‰ª•ÁÆ°ÁêÜ500TÁöÑÁ°¨Áõò„ÄÇrhel7ÈªòËÆ§Êñá‰ª∂Á≥ªÁªü</span><br><span class="line">brtfsÊñá‰ª∂Á≥ªÁªüÈíàÂØπÂõ∫ÊÄÅÁõòÂÅö‰ºòÂåñÔºå</span><br></pre></td></tr></table></figure></li><li><p>windows</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FAT16ÔºöMS‚ÄîDOSÂíåwin95ÈááÁî®ÁöÑÁ£ÅÁõòÂàÜÂå∫Ê†ºÂºèÔºåÈááÁî®16‰ΩçÁöÑÊñá‰ª∂ÂàÜÈÖçË°®ÔºåÂè™ÊîØÊåÅ2GBÁöÑÁ£ÅÁõòÂàÜÂå∫ÔºåÊúÄÂ§ßÂçïÊñá‰ª∂2GBÔºå‰∏îÁ£ÅÁõòÂà©Áî®Áéá‰Ωé</span><br><span class="line">FAT32ÔºöÔºàÂç≥VfatÔºâÈááÁî®32‰ΩçÁöÑÊñá‰ª∂ÂàÜÈÖçË°®ÔºåÊîØÊåÅÊúÄÂ§ßÂàÜÂå∫128GBÔºåÊúÄÂ§ßÊñá‰ª∂4GB</span><br><span class="line">NTFSÔºöÊîØÊåÅÊúÄÂ§ßÂàÜÂå∫2TBÔºåÊúÄÂ§ßÊñá‰ª∂2TBÔºåÂÆâÂÖ®ÊÄßÂíåÁ®≥ÂÆöÊÄßÈùûÂ∏∏Â•ΩÔºå‰∏çÊòìÂá∫Áé∞Êñá‰ª∂Á¢éÁâá„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h2 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h2><ul><li><p><strong>Definition</strong>: A block is the smallest unit of storage that the filesystem can manage and read/write. Blocks are fixed-size data units (e.g., 4KB or 8KB), commonly used by the filesystem.</p></li><li><p><strong>Purpose</strong>: Blocks enable efficient storage and management of data on physical media, allowing the filesystem to allocate, read, and write specific portions of data without needing to process an entire file.</p></li><li><p><strong>In FUSE</strong>:</p><ul><li><p>FUSE-based filesystems often work with underlying block devices (like HDDs or SSDs) or other storage solutions (like networked file systems) that use block-level access.</p></li><li><p>FUSE translates file operations (e.g., open, read, write) into these block operations, allowing efficient data management despite being in userspace, which typically has more overhead than kernel space.</p></li></ul></li></ul><h2 id="Chunks"><a href="#Chunks" class="headerlink" title="Chunks"></a><strong>Chunks</strong></h2><ul><li><p><strong>Definition</strong>: A chunk is a larger, logical grouping of data that may span multiple blocks. Chunks are often used in distributed or object storage systems where data is split into parts for parallelism, redundancy, or ease of distribution.</p></li><li><p><strong>Purpose</strong>: Chunks allow data to be divided and distributed, making it possible for distributed filesystems to store data across multiple nodes, providing redundancy, load balancing, and better performance.</p></li><li><p><strong>In FUSE</strong>:</p><ul><li><p>Distributed filesystems or object storage systems accessible via FUSE (like Ceph, GlusterFS, or MinIO gateways) may break files into chunks. FUSE then handles data in terms of these chunks, passing it to the storage backend, which manages chunk distribution and retrieval.</p></li><li><p>Chunks provide advantages in scalability and reliability when FUSE is used to interface with distributed storage systems, allowing filesystems to grow seamlessly across multiple devices.</p></li></ul></li></ul><p><strong>How Blocks and Chunks Work Together on FUSE</strong></p><p>In a FUSE-based setup, <strong>blocks</strong> are typically handled at the disk or device level (within a single node), while <strong>chunks</strong> are managed at a higher level (often in a distributed or networked environment). FUSE enables interoperability by translating file operations, letting the application layer access chunks and blocks transparently.</p><p>For example, a file request from an application to a FUSE-mounted distributed filesystem may be:</p><p>‚Äã    1.    Split into chunks (for parallel access across nodes).</p><p>‚Äã    2.    Each chunk is further divided into blocks if stored on a block-based medium, facilitating storage efficiency and reliability.</p><h2 id="inode"><a href="#inode" class="headerlink" title="inode"></a>inode</h2><blockquote><p> In computer science, an <strong>inode</strong> (short for ‚Äúindex node‚Äù) is a data structure that represents a file or directory in a file system. Inodes are the basic building blocks of a file system, and they play a crucial role in managing files and directories.                                                                                                                </p></blockquote><ul><li><strong>properties</strong></li></ul><p>An inode is a unique identifier for a file or directory on a file system. It contains metadata about the file or directory, An inode typically has several properties:             </p><p> <strong>Type</strong>: The type of file or directory (e.g., regular file, directory, symbolic link)                        </p><p><strong>Permissions</strong>: The access rights for the file or directory (owner, group, other)                          </p><p><strong>Timestamps</strong>: Creation, modification, and access timestamps                                     </p><p><strong>Inode number</strong>: A unique identifier for the inode        </p><p><strong>Block count</strong>: The number of blocks allocated to the file                                      </p><p><strong>Block offset</strong>: The starting block offset for the file           </p><p><strong>Inodes vs. Blocks</strong>                                                                                                                             </p><p>When a file is created on a file system, it‚Äôs divided into smaller blocks of data, called <strong>blocks</strong>. Each block contains a portion of the file‚Äôs contents. The inode, on the other hand, contains metadata about the file, including the location of the blocks that make up the file.</p><p>Think of an inode as a ‚Äúdirectory entry‚Äù for a file, and a block as a chunk of data stored in a file system. When you create or delete a file, the inode is updated to reflect changes in the file‚Äôs metadata,                                 </p><p>while the blocks remain intact.</p><ul><li><strong>File System Operations</strong></li></ul><p>When you perform file system operations like create, delete, or modify a file, the following happens:                  </p><ol><li><strong>Create file</strong>:                         </li></ol><p>‚Äã    * A new inode is created with the specified type and permissions.                                </p><p>‚Äã    * Blocks are allocated to fill out the file‚Äôs contents.                                     </p><ol start="2"><li><strong>Delete file</strong>:                         </li></ol><p>‚Äã    * The inode associated with the file is deleted.                                        </p><p>‚Äã    * Any blocks allocated to the file are freed.        </p><ol start="3"><li><strong>Modify file</strong>:                         </li></ol><p>‚Äã    * The existing inode is updated with the new metadata (e.g., changes in permissions, timestamps).                </p><p>‚Äã    * No new blocks need to be allocated; any changes occur within the existing block structure.                  </p><ul><li><strong>Inode Number</strong>                          </li></ul><p>The inode number is a unique identifier for an inode. It‚Äôs used by the operating system and file system to manage files and directories. When you delete a file, the inode number is updated to indicate that it no longer exists.</p><p><strong>In summary</strong></p><p>Inodes represent files and directories in a file system.</p><p>They contain metadata such as type, permissions, timestamps, and inode number.</p><p>Blocks contain the actual data for a file or directory.</p><p>Inodes are updated when files or directories are created, deleted, or modified. </p><h2 id="dentry"><a href="#dentry" class="headerlink" title="dentry"></a>dentry</h2><blockquote><p>Directory Entry</p></blockquote><p>A dentry (directory entry) represents a mapping between a file name and an inode. Essentially, a dentry links a file or directory name to its respective inode.</p><p><strong>Key Characteristics of Dentries:</strong></p><p>‚Äã    ‚Ä¢    <strong>Path Resolution</strong>: Dentries assist in translating file paths to inodes, making it faster for the OS to locate files in complex directory structures.</p><p>‚Äã    ‚Ä¢    <strong>Caches for Performance</strong>: Dentries are cached to speed up file lookups, especially for frequently accessed files. When you access a file, the system checks the dentry cache first, reducing the need to repeatedly search the disk.</p><p>‚Äã    ‚Ä¢    <strong>Relationship with Inodes</strong>: Dentries reference inodes rather than storing file metadata or data directly.</p><p><strong>How Inodes and Dentries Work Together:</strong></p><p>When accessing a file (e.g., opening or modifying it), the filesystem:</p><ol><li><p>Uses the directory path to locate the <strong>dentry</strong> for each component of the path, starting from the root (/) to the desired file.</p></li><li><p>Each <strong>dentry</strong> provides a reference to the <strong>inode</strong> that holds the file‚Äôs metadata and data block locations.</p><ol start="3"><li>   Once the correct <strong>inode</strong> is found, the system can access the data blocks on the disk to perform the desired file operation.</li></ol></li></ol><p><strong>Summary:</strong></p><p>‚Äã    ‚Ä¢    <strong>Inodes</strong> store metadata and data pointers for each file, managing essential details and the physical location of data.</p><p>‚Äã    ‚Ä¢    <strong>Dentries</strong> map filenames to inodes, facilitating path resolution and improving filesystem performance through caching.</p><p>This division helps optimize file access and management, making filesystems more efficient and scalable.</p><h2 id="LVM"><a href="#LVM" class="headerlink" title="LVM"></a>LVM</h2><blockquote><p> (Logical Volume Manager) Represents the LVM system that manages the disks (physical volumes), creates VGs, and allocates LVs.</p></blockquote><p>‚Äã    ‚Ä¢    <strong>Disk</strong>: Represents the physical disks, such as /dev/sda or /dev/vdb.</p><p>‚Äã    ‚Ä¢    <strong>VG (Volume Group)</strong>: Aggregates the space of one or more physical disks.</p><p>‚Äã    ‚Ä¢    <strong>LV (Logical Volume)</strong>: A subdivision of the VG space, which can be mounted.</p><p>‚Äã    ‚Ä¢    <strong>Mount Point</strong>: Where the LV is mounted in the filesystem.</p><img src="/images/fs/lvm architecture.png"><h2 id="partitioning-vs-LVM"><a href="#partitioning-vs-LVM" class="headerlink" title="partitioning vs LVM"></a>partitioning vs LVM</h2><p>The key difference between <strong>partitions</strong> and <strong>LVM</strong> (Logical Volume Management) lies in how they manage and allocate disk space. Here‚Äôs a breakdown of each:</p><p><strong>Partitioning</strong>:</p><p>Partitioning is a traditional way to divide a disk into sections, with each section functioning as a separate storage unit. These partitions are created directly on the disk, and once created, they are static unless you re-partition the disk (which can be complex and risky if the partitions contain data).</p><ul><li><strong>Physical Disk-Based</strong>: Partitions are fixed divisions of a physical disk, where each partition has a specific size.</li><li><strong>Static</strong>: Once created, partitions are hard to resize, and managing space between partitions can be inflexible.</li><li><strong>Limited</strong>: Typically, you are limited to a small number of primary partitions (e.g., 4 primary partitions on an MBR disk, though extended partitions can allow more).</li><li><strong>Direct Mounting</strong>: Partitions can be formatted with a filesystem (e.g., <code>xfs</code>, <code>ext4</code>) and mounted directly to the filesystem.</li></ul><p>Example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda1  -&gt;  /boot</span><br><span class="line">/dev/sda2  -&gt;  /</span><br><span class="line">/dev/sda3  -&gt;  /home</span><br></pre></td></tr></table></figure><p><strong>LVM</strong></p><blockquote><p> Logical Volume Management</p></blockquote><p>LVM is a more flexible and advanced disk management system. Instead of dividing a disk into fixed partitions, it uses logical volumes that can span across multiple physical disks. LVM allows you to create, resize, and move logical volumes much more easily than traditional partitions.</p><ul><li><strong>Flexible</strong>: Logical volumes can be resized, expanded, or shrunk easily without affecting data. You can add more disks to an LVM group to increase space.</li><li><strong>Virtual</strong>: LVM creates a layer of abstraction over physical disks. You group one or more physical disks (or partitions) into a <strong>Volume Group (VG)</strong>, and from that pool of storage, you create <strong>Logical Volumes (LV)</strong>.</li><li><strong>Resizing</strong>: Logical volumes can be resized on the fly (especially for file systems like XFS or ext4 with online resize capabilities).</li><li><strong>Spanning Disks</strong>: LVM allows logical volumes to span multiple physical disks or partitions, meaning you are not limited by the size of a single disk.</li><li><strong>Snapshots and RAID</strong>: LVM supports features like snapshots and can be combined with RAID for redundancy.</li></ul><p>Components:</p><ol><li><strong>Physical Volume (PV)</strong>: These are physical disks or partitions that are part of an LVM system.</li><li><strong>Volume Group (VG)</strong>: A pool of storage made up of one or more physical volumes.</li><li><strong>Logical Volume (LV)</strong>: A virtual partition that you can format and mount like a traditional partition. It is created from the space in the volume group.</li></ol><p>Example:</p><ol><li>You create a <strong>Volume Group</strong> (<code>vg1</code>) using two physical disks (<code>/dev/sdb</code>, <code>/dev/sdc</code>).</li><li>From the volume group, you create <strong>Logical Volumes</strong> (<code>lv_root</code>, <code>lv_home</code>) and mount them.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/vg1/lv_root  -&gt;  /</span><br><span class="line">/dev/vg1/lv_home  -&gt;  /home</span><br></pre></td></tr></table></figure></li></ol><p><strong>Comparison</strong></p><table><thead><tr><th>Feature</th><th>Partition</th><th>LVM</th></tr></thead><tbody><tr><td><strong>Storage Flexibility</strong></td><td>Static size, hard to resize</td><td>Dynamic, easy to resize or move volumes</td></tr><tr><td><strong>Number of Volumes</strong></td><td>Limited (4 primary, extended partitions)</td><td>Unlimited logical volumes in a volume group</td></tr><tr><td><strong>Disk Spanning</strong></td><td>Partition tied to a single disk</td><td>Logical volumes can span multiple disks</td></tr><tr><td><strong>Resizing</strong></td><td>Complex and risky</td><td>Easily resizable without data loss</td></tr><tr><td><strong>Snapshots</strong></td><td>Not supported</td><td>Supports snapshots for backups</td></tr><tr><td><strong>Management</strong></td><td>Basic partition management tools</td><td>Advanced management with <code>lvcreate</code>, <code>lvextend</code>, etc.</td></tr></tbody></table><p><strong>Example Scenario</strong>:</p><ol><li><p><strong>Partition</strong>: You have a 500GB disk, and you partition it into <code>/boot</code>, <code>/</code>, and <code>/home</code>. If you need more space for <code>/home</code>, you‚Äôd have to resize or repartition the disk, which is not easy.</p></li><li><p><strong>LVM</strong>: With LVM, you create a Volume Group from a few physical volumes (disks or partitions), and you can create logical volumes (<code>/</code>, <code>/home</code>) from that pool of space. If <code>/home</code> needs more space, you can easily expand it by adding another disk or reallocating space within the volume group.</p></li></ol><p><strong>Summary</strong>:</p><ul><li><strong>Partitioning</strong> is a simple, traditional way to divide a disk, but it‚Äôs rigid and hard to manage once the partitions are set.</li><li><strong>LVM</strong> is a flexible, powerful storage management tool that allows you to create logical volumes that can be resized, expanded, and managed more easily, often spanning multiple disks.</li></ul><h2 id="volume-vs-fs"><a href="#volume-vs-fs" class="headerlink" title="volume vs fs"></a>volume vs fs</h2><p>The relationship between volumes and file systems is fundamental to understanding how data is organized and stored in computer systems.</p><p><strong>Volume</strong>:</p><ul><li>A volume is a single accessible storage area with a single file system.</li><li>It‚Äôs a logical device that can span one or more physical storage devices or parts of them.</li><li>In simple terms, you can think of a volume as a container for storing data.</li></ul><p><strong>File System</strong>:</p><ul><li>A file system is a method and data structure that the operating system uses to control how data is stored and retrieved on a volume.</li><li>It defines how files are named, stored, organized, and accessed on the volume.</li></ul><p>Relationship:</p><ol><li>One-to-One Mapping:<ul><li>Typically, there is a one-to-one relationship between a volume and a file system.</li><li>Each volume usually has one file system formatted on it.</li></ul></li><li>Formatting:<ul><li>When you ‚Äúformat‚Äù a volume, you‚Äôre actually creating a file system on that volume.</li><li>This process prepares the volume to store files and directories in a way that the operating system can understand.</li></ul></li><li>Mounting:<ul><li>When you ‚Äúmount‚Äù a volume, you‚Äôre making its file system accessible to the operating system.</li><li>The mount point becomes the root directory of that file system within the larger file hierarchy.</li></ul></li><li>Types:<ul><li>Different types of file systems (e.g., NTFS, ext4, XFS, FAT32) can be used on volumes, each with its own features and limitations.</li></ul></li><li>Management:<ul><li>Volume management often involves tasks like creating, resizing, or deleting volumes.</li><li>File system management includes tasks like formatting, checking for errors, and managing permissions.</li></ul></li><li>Abstraction:<ul><li>The volume provides a level of abstraction between the physical storage (like hard drives or SSDs) and the file system.</li><li>This abstraction allows for features like RAID, where multiple physical devices can appear as a single volume.</li></ul></li><li>Performance and Features:<ul><li>The choice of file system can affect the performance and features available on a volume.</li><li>For example, some file systems support larger file sizes, journaling, or built-in compression.</li></ul></li><li>Multiple File Systems:<ul><li>In some advanced setups, it‚Äôs possible to have multiple file systems on a single volume, though this is less common.</li></ul></li><li>Logical Volume Management (LVM):<ul><li>LVM allows for more flexible management of storage, where volumes can be easily resized, and multiple physical devices can be combined into a single logical volume.</li></ul></li><li>Cloud and Virtualization:<ul><li>In cloud and virtualized environments, volumes and file systems are often abstracted further, allowing for easy scaling and management.</li></ul></li></ol><h2 id="mount-vs-bind"><a href="#mount-vs-bind" class="headerlink" title="mount vs bind"></a>mount vs bind</h2><ul><li><p>Mount</p><ul><li><p><strong>Mounting</strong> is the process of making a file system accessible at a certain point in the directory tree.</p></li><li><p>Typically used to attach external storage devices, like USB drives or partitions, to a directory.</p></li><li><p>Example: <code>mount /dev/sdX1 /mnt/mydrive</code></p></li></ul></li><li><p>Bind</p><ul><li><p><strong>Bind mounting</strong> allows you to map a directory to another location in the same file system.</p></li><li><p>This is useful for accessing the same files from multiple locations without duplicating them.</p></li><li><p>Example: <code>mount --bind /source/directory /target/directory</code></p></li></ul></li><li><p>Key Differences</p><ul><li><p><strong>Purpose</strong>: Mount is for attaching entire file systems; bind is for duplicating directory paths.</p></li><li><p><strong>Use Cases</strong>: Mount is common for devices; bind is useful for creating alternative paths to existing directories within the same file system.</p></li></ul></li></ul><p>So, When you bind mount <code>directory1</code> (which is mounted to external file system A) to <code>directory2</code>, you create an alias for <code>directory1</code> at <code>directory2</code>. This means:</p><ul><li>Accessing <code>directory2</code> will show the contents of file system A.</li><li>Any data written to <code>directory2</code> will be stored in file system A, not the local file system.</li></ul><h2 id="hard-link-vs-soft-link"><a href="#hard-link-vs-soft-link" class="headerlink" title="hard link vs soft link"></a>hard link vs soft link</h2><table><thead><tr><th></th><th>Hard Link</th><th>Soft Link (Symbolic Link)</th></tr></thead><tbody><tr><td>Shared storage</td><td>Same file on disk</td><td>Separate file on disk</td></tr><tr><td>Modifying one affects both</td><td>Yes</td><td>No</td></tr><tr><td>Separated copy</td><td>One copy, two names</td><td>Two separate files</td></tr></tbody></table><ul><li><p>Hard links share the same storage location on disk and modify together.</p></li><li><p>Soft links point to an alias or shortcut that does not share the same storage location. Modifying one does not affect the other.</p></li></ul><h2 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a>tmpfs</h2><ul><li>tmpfs is a special filesystem that uses RAM (and swap) for fast, temporary file storage.</li><li>RAM is the hardware that holds the system‚Äôs active data, while tmpfs is a virtual filesystem that leverages RAM for storage.</li><li>tmpfs is useful for temporary data that doesn‚Äôt need to persist after reboots, providing fast I/O performance since it‚Äôs in memory.</li></ul><h2 id="nvme"><a href="#nvme" class="headerlink" title="nvme"></a>nvme</h2><p><strong>NVMe (Non-Volatile Memory Express)</strong> is a high-performance storage protocol designed to take full advantage of the speed and efficiency offered by modern solid-state drives (SSDs), particularly those using <strong>NAND flash</strong> or <strong>3D NAND</strong> memory. It was developed to overcome the limitations of older storage protocols (such as SATA and SAS) by optimizing the interaction between the storage device and the CPU over faster interfaces like <strong>PCIe (Peripheral Component Interconnect Express)</strong>.</p><ul><li>NVMe is both a <strong>protocol</strong> and a <strong>standard</strong> for connecting <strong>non-volatile memory</strong> (such as NAND flash memory) directly to a computer system via high-speed interfaces, most commonly <strong>PCIe</strong>. It allows data to be transferred at much faster speeds compared to older storage protocols, enabling devices to reach their full potential and significantly reducing latency.</li></ul><p><strong>nvme vs lvm</strong></p><ul><li><strong>NVMe</strong> is the hardware interface and protocol that provides high-speed storage, primarily used for demanding workloads.</li><li><strong>LVM</strong> is a logical volume manager that allows you to manage storage in a flexible way, and it can be used with <strong>NVMe drives</strong> to create logical volumes, resize them, and add new storage easily.</li></ul><table><thead><tr><th>Feature</th><th>NVMe</th><th>LVM</th></tr></thead><tbody><tr><td><strong>Type</strong></td><td>Storage protocol (hardware level)</td><td>Logical volume management (software layer)</td></tr><tr><td><strong>Main Purpose</strong></td><td>Fast, high-performance storage for SSDs</td><td>Manage storage volumes dynamically</td></tr><tr><td><strong>Speed</strong></td><td>Very high (compared to SATA)</td><td>No direct impact on speed, but provides flexibility</td></tr><tr><td><strong>Flexibility</strong></td><td>Limited to storage capacity and speed</td><td>Highly flexible with resizing and pooling storage</td></tr><tr><td><strong>Management</strong></td><td>Managed directly by the OS or filesystem</td><td>Provides abstraction and dynamic management</td></tr><tr><td><strong>Use Cases</strong></td><td>High-performance workloads, low-latency apps</td><td>Dynamic storage management, snapshots, pooling</td></tr><tr><td><strong>Interaction</strong></td><td>Can be used as a physical storage device for LVM</td><td>Can manage NVMe storage via logical volumes</td></tr><tr><td><strong>Tools</strong></td><td>nvme-cli, lsblk, fdisk, etc.</td><td>lvcreate, vgcreate, pvcreate, etc.</td></tr></tbody></table><h1 id="FUSE"><a href="#FUSE" class="headerlink" title="FUSE"></a>FUSE</h1><blockquote><p>Filesystem in Userspace</p></blockquote><ul><li><p>install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install fuse fuse-libs</span><br></pre></td></tr></table></figure></li></ul><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> list avaliable disk</span></span><br><span class="line">fdisk -l</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list nvme (sudo dnf install -y nvme-cli)</span></span><br><span class="line">nvme list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> list block disk</span></span><br><span class="line">lsblk -l</span><br></pre></td></tr></table></figure><h3 id="Check-Disk-Health"><a href="#Check-Disk-Health" class="headerlink" title="Check Disk Health"></a>Check Disk Health</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep -i &#x27;error&#x27;</span><br></pre></td></tr></table></figure><h3 id="umount"><a href="#umount" class="headerlink" title="umount"></a>umount</h3><ul><li><p>Unmount Using umount -l (Lazy Unmount)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount -l &lt;path/to/mount&gt;</span><br></pre></td></tr></table></figure><p>The -l (lazy) option detaches the filesystem immediately and postpones the actual unmount until it‚Äôs no longer in use. This should allow you to unmount the device without needing to terminate the processes that are holding it.</p></li></ul><h2 id="LVM-1"><a href="#LVM-1" class="headerlink" title="LVM"></a>LVM</h2><ul><li><p>Ê£ÄÊü•ÊåáÂÆövgÁöÑÂèØÁî®Á©∫Èó¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vgdisplay vg_nvme2n1 | grep &quot;Free&quot;</span><br></pre></td></tr></table></figure></li><li><p>delete lvm</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step 1:</span></span><br><span class="line">lsblk</span><br><span class="line">NAME                                                                                                  MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">sr0                                                                                                    11:0    1 1024M  0 rom  </span><br><span class="line">vda                                                                                                   252:0    0  300G  0 disk </span><br><span class="line">‚îú‚îÄvda1                                                                                                252:1    0    6G  0 part /boot</span><br><span class="line">‚îî‚îÄvda2                                                                                                252:2    0  290G  0 part </span><br><span class="line">  ‚îî‚îÄrl_172--20--7--230-root                                                                           253:0    0  290G  0 lvm  /</span><br><span class="line">vdb                                                                                                   252:16   0  100G  0 disk </span><br><span class="line">‚îî‚îÄceph--d79fdfae--bdd5--4ea7--a907--740181f88091-osd--block--37262a3f--354b--4d6a--95db--eb18abd939ce 253:1    0  100G  0 lvm </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step3:</span></span><br><span class="line">sudo vgchange -an ceph--d79fdfae--bdd5--4ea7--a907--740181f88091-osd--block--37262a3f--354b--4d6a--95db--eb18abd939ce</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step4</span></span><br><span class="line">sudo lvchange -an /dev/ceph-d79fdfae-bdd5-4ea7-a907-740181f88091/osd-block-37262a3f-354b-4d6a-95db-eb18abd939ce</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step5</span></span><br><span class="line">sudo vgremove ceph-d79fdfae-bdd5-4ea7-a907-740181f88091</span><br></pre></td></tr></table></figure><ul><li>create lvm </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1 create vg(volume group)</span></span><br><span class="line">sudo vgcreate s3_vg /dev/vdb</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2 create lv(logic volume)</span></span><br><span class="line">sudo lvcreate -L 50G -n minio_lv s3_vg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step3 format xfs on lvm</span></span><br><span class="line">sudo mkfs.xfs /dev/s3_vg/minio_lv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step4 create mount point</span></span><br><span class="line">sudo mkdir -p /mnt/minio</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step5 mount logic point</span></span><br><span class="line">sudo mount -o noatime /dev/s3_vg/minio_lv /mnt/minio</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step6 verify</span></span><br><span class="line">df -h /mnt/minio</span><br><span class="line"></span><br><span class="line">Filesystem                  Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/s3_vg-minio_lv   50G  389M   50G   1% /mnt/minio</span><br></pre></td></tr></table></figure><ul><li>umount lvm</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1 umount directory</span></span><br><span class="line">sudo umount /mnt/your_mount_point</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2 Deactivate the Logical Volume</span></span><br><span class="line">sudo lvchange -an /dev/volume_group/logical_volume</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step3 Remove the Logical Volume</span></span><br><span class="line">sudo lvremove /dev/volume_group/logical_volume</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (Optional) step4 Remove the Volume Group</span> </span><br><span class="line">sudo vgremove volume_group</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (Optional) step5 Remove the Physical Volume</span></span><br><span class="line">sudo pvremove /dev/sdX</span><br></pre></td></tr></table></figure><ul><li>check</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check vgs</span></span><br><span class="line">sudo vgs</span><br></pre></td></tr></table></figure><h2 id="partition"><a href="#partition" class="headerlink" title="partition"></a>partition</h2><ul><li><p>check specify disk partition</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 1</span></span><br><span class="line">sudo parted /dev/&lt;name&gt; print</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 2</span></span><br><span class="line">sudo fdisk -l /dev/nvme2n1</span><br></pre></td></tr></table></figure></li></ul><h1 id="toubleshooting"><a href="#toubleshooting" class="headerlink" title="toubleshooting"></a>toubleshooting</h1><ul><li><p>resolve <code>d?????????</code> status directory</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">umount -l /path/to/mount</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span> </span><br><span class="line">fusermount -uz /path/to/mount</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÊéíÊü•ÊåáÂÆöÂàÜÂå∫Âç†Áî®ËøõÁ®ã</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂÅáËÆæ /dev/nvme2n1p1 ÊòØ /dev/nvme2n1 ÁöÑÂ≠êÂàÜÂå∫ÔºåÂú®ÂØπ/dev/nvme2n1p1Êìç‰ΩúÁöÑÊó∂ÂÄô‰ºöÊèêÁ§∫ cannot open /dev/nvme2n1p1: Device or resource busyÔºåËøôÊó∂ÂèØ‰ª•ÊéíÊü•ÊòØÂê¶ÊòØ‰∏ªÂàÜÂå∫ÊòØÂê¶Ë¢´Âç†Áî®ÔºåÁÑ∂Âêé<span class="built_in">kill</span>ÊéâÁõ∏Â∫îprocess</span></span><br><span class="line">sudo lsof | grep /dev/nvme2n1</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> fs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes learn</title>
      <link href="/2024/08/05/Kubernetes%20learn/"/>
      <url>/2024/08/05/Kubernetes%20learn/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>ÂÆπÂô®ÊòØ‰∏Ä‰∏™‚ÄúÂçïËøõÁ®ã‚ÄùÊ®°Âûã</strong></p><p>‰∏Ä‰∏™‚ÄúÂÆπÂô®‚ÄùÔºåÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™Áî± Linux Namespace„ÄÅLinux Cgroups Âíå rootfs ‰∏âÁßçÊäÄÊúØÊûÑÂª∫Âá∫Êù•ÁöÑËøõÁ®ãÁöÑÈöîÁ¶ªÁéØÂ¢É</p><p>‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁöÑ Linux ÂÆπÂô®ÔºåÂÖ∂ÂÆûÂèØ‰ª•Ë¢´‚Äú‰∏ÄÂàÜ‰∏∫‰∫å‚ÄùÂú∞ÁúãÂæÖÔºö</p><ol><li>‰∏ÄÁªÑËÅîÂêàÊåÇËΩΩÂú® /var/lib/docker/aufs/mnt ‰∏äÁöÑ rootfsÔºåËøô‰∏ÄÈÉ®ÂàÜÊàë‰ª¨Áß∞‰∏∫‚ÄúÂÆπÂô®ÈïúÂÉè‚ÄùÔºàContainer ImageÔºâÔºåÊòØÂÆπÂô®ÁöÑÈùôÊÄÅËßÜÂõæÔºõ</li><li>‰∏Ä‰∏™Áî± Namespace+Cgroups ÊûÑÊàêÁöÑÈöîÁ¶ªÁéØÂ¢ÉÔºåËøô‰∏ÄÈÉ®ÂàÜÊàë‰ª¨Áß∞‰∏∫‚ÄúÂÆπÂô®ËøêË°åÊó∂‚ÄùÔºàContainer RuntimeÔºâÔºåÊòØÂÆπÂô®ÁöÑÂä®ÊÄÅËßÜÂõæ„ÄÇ</li></ol></blockquote><h1 id="version"><a href="#version" class="headerlink" title="version"></a>version</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Client Version: v1.30.3</span><br><span class="line">Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3</span><br><span class="line">Server Version: v1.30.0</span><br></pre></td></tr></table></figure><h1 id="define"><a href="#define" class="headerlink" title="define"></a>define</h1><blockquote><p>ÂÆπÂô®Êú¨Ë∫´Ê≤°Êúâ‰ª∑ÂÄºÔºåÊúâ‰ª∑ÂÄºÁöÑÊòØ‚ÄúÂÆπÂô®ÁºñÊéí‚Äù„ÄÇ</p></blockquote><p>Kubernetes is pronounced¬†<strong>coo-ber-net-ees</strong>, not coo-ber-neats. People also use the shortened version k8s a lot. Please don‚Äôt pronounce that one k-eights‚Äîit is still coo-ber-net-ees.</p><blockquote><p>Docker is a containerization platform, and Kubernetes is a container orchestrator for container platforms like Docker.¬†</p></blockquote><h2 id="architecture"><a href="#architecture" class="headerlink" title="architecture"></a>architecture</h2><p>We can break down the components into three main parts.</p><ol><li>The Control Plane - The Master.</li><li>Nodes - Where pods get scheduled.</li><li>Pods - Holds containers.</li></ol><p><img src="/images/k8s/k8s-architecture-overview.png"></p><blockquote><p>kubernetesËÆæËÆ°ÊÄùÊÉ≥<strong>‚Äú‰∏ÄÂàáÁöÜÂØπË±°‚Äù</strong>ÔºöÂ∫îÁî®ÊòØ Pod ÂØπË±°ÔºåÂ∫îÁî®ÁöÑÈÖçÁΩÆÊòØ ConfigMap ÂØπË±°ÔºåÂ∫îÁî®Ë¶ÅËÆøÈóÆÁöÑÂØÜÁ†ÅÂàôÊòØ Secret ÂØπË±°„ÄÇ</p><p><strong>Â£∞ÊòéÂºè APIÔºåÊòØ Kubernetes È°πÁõÆÁºñÊéíËÉΩÂäõ‚ÄúËµñ‰ª•ÁîüÂ≠ò‚ÄùÁöÑÊ†∏ÂøÉÊâÄÂú®</strong></p></blockquote><h2 id="dependency"><a href="#dependency" class="headerlink" title="dependency"></a>dependency</h2><blockquote><p>Namespace ÂÅöÈöîÁ¶ªÔºåCgroups ÂÅöÈôêÂà∂Ôºårootfs ÂÅöÊñá‰ª∂Á≥ªÁªü</p><p>ÂØπ ÂÆπÂô®È°πÁõÆÊù•ËØ¥ÔºåÊúÄÊ†∏ÂøÉÁöÑÂéüÁêÜÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏∫ÂæÖÂàõÂª∫ÁöÑÁî®Êà∑ËøõÁ®ãÔºö</p><ol><li>ÂêØÁî® Linux Namespace ÈÖçÁΩÆÔºõ</li><li>ËÆæÁΩÆÊåáÂÆöÁöÑ Cgroups ÂèÇÊï∞Ôºõ</li><li>ÂàáÊç¢ËøõÁ®ãÁöÑÊ†πÁõÆÂΩïÔºàChange RootÔºâ„ÄÇ</li></ol></blockquote><h3 id="namespace"><a href="#namespace" class="headerlink" title="namespace"></a>namespace</h3><blockquote><p> Linux Êìç‰ΩúÁ≥ªÁªüÊèê‰æõ‰∫ÜPID„ÄÅ Mount„ÄÅUTS„ÄÅIPC„ÄÅNetwork Âíå User Ëøô‰∫õ NamespaceÔºåÁî®Êù•ÂØπÂêÑÁßç‰∏çÂêåÁöÑËøõÁ®ã‰∏ä‰∏ãÊñáËøõË°å‚ÄúÈöúÁúºÊ≥ï‚ÄùÊìç‰Ωú</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PID NamespaceÔºöÈöîÁ¶ªËøõÁ®ã ID„ÄÇ</span><br><span class="line">Network NamespaceÔºöÈöîÁ¶ªÁΩëÁªúËÆæÂ§á„ÄÅÁΩëÁªúÊ†à„ÄÅÁ´ØÂè£Á≠âÁΩëÁªúËµÑÊ∫ê„ÄÇ</span><br><span class="line">Mount NamespaceÔºöÈöîÁ¶ªÊåÇËΩΩÁÇπ„ÄÇ</span><br><span class="line">IPC NamespaceÔºöÈöîÁ¶ªËøõÁ®ãÈó¥ÈÄö‰ø°ËµÑÊ∫êÔºåÂ¶Ç‰ø°Âè∑ÈáèÁ≠â„ÄÇ</span><br><span class="line">UTS NamespaceÔºöÈöîÁ¶ª‰∏ªÊú∫ÂêçÂíåÂüüÂêç„ÄÇ</span><br><span class="line">User NamespaceÔºöÈöîÁ¶ªÁî®Êà∑ÂíåÁî®Êà∑ÁªÑ ID„ÄÇ</span><br></pre></td></tr></table></figure><ul><li><p>ÂÆπÂô®Â∏ÆÂä©Áî®Êà∑ÂêØÂä®ÁöÑÔºåËøòÊòØÂéüÊù•ÁöÑÂ∫îÁî®ËøõÁ®ãÔºåÂè™‰∏çËøáÂú®ÂàõÂª∫Ëøô‰∫õËøõÁ®ãÊó∂ÔºåÂÆπÂô®‰∏∫ÂÆÉ‰ª¨Âä†‰∏ä‰∫ÜÂêÑÁßçÂêÑÊ†∑ÁöÑ Namespace ÂèÇÊï∞„ÄÇËøõÁ®ãÂ∞±‰ºöËßâÂæóËá™Â∑±ÊòØÂêÑËá™ PID Namespace ÈáåÁöÑÁ¨¨ 1 Âè∑ËøõÁ®ãÔºåÂè™ËÉΩÁúãÂà∞ÂêÑËá™ Mount Namespace ÈáåÊåÇËΩΩÁöÑÁõÆÂΩïÂíåÊñá‰ª∂ÔºåÂè™ËÉΩËÆøÈóÆÂà∞ÂêÑËá™ Network Namespace ÈáåÁöÑÁΩëÁªúËÆæÂ§áÔºåÂ∞±‰ªø‰ΩõËøêË°åÂú®‰∏Ä‰∏™‰∏™‚ÄúÂÆπÂô®‚ÄùÈáåÈù¢Ôºå‰∏é‰∏ñÈöîÁªù</p></li><li><p>Âú® Linux ÂÜÖÊ†∏‰∏≠ÔºåÊúâÂæàÂ§öËµÑÊ∫êÂíåÂØπË±°ÊòØ‰∏çËÉΩË¢´ Namespace ÂåñÁöÑÔºåÊúÄÂÖ∏ÂûãÁöÑ‰æãÂ≠êÂ∞±ÊòØÔºöÊó∂Èó¥</p></li><li><p>Linux Namespace ‰∏∫ Kubernetes Namespace Êèê‰æõ‰∫ÜÂ∫ïÂ±ÇÁöÑÈöîÁ¶ªËÉΩÂäõÔºåKubernetes Namespace ÂàôÊòØÂú®Ê≠§Âü∫Á°Ä‰∏äËøõË°åÊõ¥È´òÁ∫ßÂà´ÁöÑÊäΩË±°ÂíåÁÆ°ÁêÜ„ÄÇ</p></li></ul><h4 id="mount-namesapce"><a href="#mount-namesapce" class="headerlink" title="mount namesapce"></a>mount namesapce</h4><ul><li>Mount Namespace Ë∑üÂÖ∂‰ªñ Namespace ÁöÑ‰ΩøÁî®Áï•Êúâ‰∏çÂêåÁöÑÂú∞ÊñπÔºöÂÆÉÂØπÂÆπÂô®ËøõÁ®ãËßÜÂõæÁöÑÊîπÂèòÔºå‰∏ÄÂÆöÊòØ‰º¥ÈöèÁùÄÊåÇËΩΩÊìç‰ΩúÔºàmountÔºâÊâçËÉΩÁîüÊïà„ÄÇ</li><li>Mount Namespace Ê≠£ÊòØÂü∫‰∫éÂØπ chroot ÁöÑ‰∏çÊñ≠ÊîπËâØÊâçË¢´ÂèëÊòéÂá∫Êù•ÁöÑÔºåÂÆÉ‰πüÊòØ Linux Êìç‰ΩúÁ≥ªÁªüÈáåÁöÑÁ¨¨‰∏Ä‰∏™ Namespace</li></ul><h3 id="cgoups"><a href="#cgoups" class="headerlink" title="cgoups"></a>cgoups</h3><blockquote><p> <strong>Linux Cgroups ÁöÑÂÖ®Áß∞ÊòØ Linux Control Group„ÄÇÂÆÉÊúÄ‰∏ªË¶ÅÁöÑ‰ΩúÁî®ÔºåÂ∞±ÊòØÈôêÂà∂‰∏Ä‰∏™ËøõÁ®ãÁªÑËÉΩÂ§ü‰ΩøÁî®ÁöÑËµÑÊ∫ê‰∏äÈôêÔºåÂåÖÊã¨ CPU„ÄÅÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò„ÄÅÁΩëÁªúÂ∏¶ÂÆΩÁ≠âÁ≠â„ÄÇ</strong></p></blockquote><ul><li>Cgroups ÁªôÁî®Êà∑Êö¥Èú≤Âá∫Êù•ÁöÑÊìç‰ΩúÊé•Âè£ÊòØÊñá‰ª∂Á≥ªÁªüÔºåÂç≥ÂÆÉ‰ª•Êñá‰ª∂ÂíåÁõÆÂΩïÁöÑÊñπÂºèÁªÑÁªáÂú®Êìç‰ΩúÁ≥ªÁªüÁöÑ <code>/sys/fs/cgroup</code> Ë∑ØÂæÑ‰∏ã</li><li>Linux Cgroups ÁöÑËÆæËÆ°ËøòÊòØÊØîËæÉÊòìÁî®ÁöÑÔºåÁÆÄÂçïÁ≤óÊö¥Âú∞ÁêÜËß£ÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™Â≠êÁ≥ªÁªüÁõÆÂΩïÂä†‰∏ä‰∏ÄÁªÑËµÑÊ∫êÈôêÂà∂Êñá‰ª∂ÁöÑÁªÑÂêà</li><li>Cgroups ÊäÄÊúØÊòØÁî®Êù•Âà∂ÈÄ†Á∫¶ÊùüÁöÑ‰∏ªË¶ÅÊâãÊÆµÔºåËÄåNamespace ÊäÄÊúØÂàôÊòØÁî®Êù•‰øÆÊîπËøõÁ®ãËßÜÂõæÁöÑ‰∏ªË¶ÅÊñπÊ≥ï</li></ul><h3 id="rootfs"><a href="#rootfs" class="headerlink" title="rootfs"></a>rootfs</h3><blockquote><p>Rootfs(Ê†πÊñá‰ª∂Á≥ªÁªü) ÂÆÉÂè™ÊòØ‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªüÁöÑÊâÄÊúâÊñá‰ª∂ÂíåÁõÆÂΩïÔºåÂπ∂‰∏çÂåÖÂê´ÂÜÖÊ†∏ÔºåÊúÄÂ§ö‰πüÂ∞±Âá†ÁôæÂÖÜ</p><p>ÂÆπÂô®ÈÄöËøá Mount Namespace ÂçïÁã¨ÊåÇËΩΩÂÖ∂‰ªñ‰∏çÂêåÁâàÊú¨ÁöÑÊìç‰ΩúÁ≥ªÁªüÊñá‰ª∂</p><p><strong>rootfs Âè™ÊòØ‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªüÊâÄÂåÖÂê´ÁöÑÊñá‰ª∂„ÄÅÈÖçÁΩÆÂíåÁõÆÂΩïÔºåÂπ∂‰∏çÂåÖÊã¨Êìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏„ÄÇ</strong></p></blockquote><ul><li><p>ÊåÇËΩΩÂú®ÂÆπÂô®Ê†πÁõÆÂΩï‰∏ä, ‰∏∫ÂÆπÂô®ËøõÁ®ãÊèê‰æõÈöîÁ¶ªÂêéÊâßË°åÁéØÂ¢ÉÁöÑÊñá‰ª∂Á≥ªÁªüÔºåÂ∞±ÊòØÊâÄË∞ìÁöÑ‚ÄúÂÆπÂô®ÈïúÂÉè‚Äù„ÄÇ</p></li><li><p>ÂÆπÂô®Âè™ÊòØËøêË°åÂú®ÂÆø‰∏ªÊú∫‰∏äÁöÑ‰∏ÄÁßçÁâπÊÆäÁöÑËøõÁ®ãÔºåÈÇ£‰πàÂ§ö‰∏™ÂÆπÂô®‰πãÈó¥‰ΩøÁî®ÁöÑÂ∞±ËøòÊòØÂêå‰∏Ä‰∏™ÂÆø‰∏ªÊú∫ÁöÑÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏</p></li></ul><h2 id="CRI"><a href="#CRI" class="headerlink" title="CRI"></a>CRI</h2><blockquote><p><strong>Container Runtime Interface</strong> ÂÆπÂô®ËøêË°åÊó∂Êé•Âè£</p><p>kubelet Ë∞ÉÁî®‰∏ãÂ±ÇÂÆπÂô®ËøêË°åÊó∂ÁöÑÊâßË°åËøáÁ®ãÔºåÂπ∂‰∏ç‰ºöÁõ¥Êé•Ë∞ÉÁî® Docker ÁöÑ APIÔºåËÄåÊòØÈÄöËøáCRIÁöÑ gRPC Êé•Âè£Êù•Èó¥Êé•ÊâßË°å</p></blockquote><h3 id="ctr"><a href="#ctr" class="headerlink" title="ctr"></a>ctr</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check ctr images on k8s</span></span><br><span class="line">sudo ctr -n k8s.io images list | grep &#123;image&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete ctr images on k8s</span></span><br><span class="line">sudo ctr -n k8s.io images rm &#123;image&#125;:&#123;tag&#125;</span><br></pre></td></tr></table></figure><h1 id="API-object"><a href="#API-object" class="headerlink" title="API object"></a>API object</h1><blockquote><p>Kubernetes API ÂØπË±°ÔºåÁî±ÂÖÉÊï∞ÊçÆ metadata„ÄÅËßÑËåÉ spec ÂíåÁä∂ÊÄÅ statusÁªÑÊàê</p><p>ÂÖÉÊï∞ÊçÆÊòØÁî®Êù•Ê†áËØÜ API ÂØπË±°ÁöÑÔºåÊØè‰∏™ÂØπË±°ÈÉΩËá≥Â∞ëÊúâ 3 ‰∏™ÂÖÉÊï∞ÊçÆÔºönamespaceÔºåname Âíå uid</p></blockquote><ul><li>Ë∑ØÂæÑ</li></ul><p>Âú® Kubernetes È°πÁõÆ‰∏≠Ôºå‰∏Ä‰∏™ API ÂØπË±°Âú® Etcd ÈáåÁöÑÂÆåÊï¥ËµÑÊ∫êË∑ØÂæÑÔºåÊòØÁî±ÔºöGroupÔºàAPI ÁªÑÔºâ„ÄÅVersionÔºàAPI ÁâàÊú¨ÔºâÂíå ResourceÔºàAPI ËµÑÊ∫êÁ±ªÂûãÔºâ‰∏â‰∏™ÈÉ®ÂàÜÁªÑÊàêÁöÑ„ÄÇ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ‚ÄúCronJob‚ÄùÂ∞±ÊòØËøô‰∏™ API ÂØπË±°ÁöÑËµÑÊ∫êÁ±ªÂûãÔºàResourceÔºâÔºå‚Äúbatch‚ÄùÂ∞±ÊòØÂÆÉÁöÑÁªÑÔºàGroupÔºâÔºåv2alpha1 Â∞±ÊòØÂÆÉÁöÑÁâàÊú¨ÔºàVersionÔºâ„ÄÇ</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v2alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><blockquote><p>ÁÆ°ÁêÜ ÈïøÊúü‰º∫ÊúçÂûãÔºàlong-runningÔºâ‰∏öÂä°</p></blockquote><table><thead><tr><th>Aspect</th><th>Pod</th><th>Deployment</th></tr></thead><tbody><tr><td><strong>Definition</strong></td><td>The smallest deployable unit, containing one or more containers.</td><td>A higher-level abstraction to manage Pods and ReplicaSets.</td></tr><tr><td><strong>Purpose</strong></td><td>Represents a single instance of a running application.</td><td>Manages Pods by defining scaling, updates, and desired state.</td></tr><tr><td><strong>Ephemerality</strong></td><td>Ephemeral: Once a Pod dies, it is not automatically replaced.</td><td>Resilient: Automatically replaces Pods as needed.</td></tr><tr><td><strong>Scaling</strong></td><td>Requires manual intervention to scale.</td><td>Can define a desired number of replicas for automatic scaling.</td></tr><tr><td><strong>Rolling Updates</strong></td><td>No built-in support for rolling updates.</td><td>Supports rolling updates and rollbacks for live changes.</td></tr><tr><td><strong>Use Case</strong></td><td>Suitable for testing or single-instance workloads.</td><td>Suitable for production workloads requiring scalability and availability.</td></tr></tbody></table><h2 id="pod"><a href="#pod" class="headerlink" title="pod"></a>pod</h2><blockquote><p>Kubernetes Èáå‚ÄúÊúÄÂ∞è‚ÄùÁöÑ API ÂØπË±°ÊòØ Pod„ÄÇPod ÂèØ‰ª•Á≠â‰ª∑‰∏∫‰∏Ä‰∏™Â∫îÁî®ÔºåÊâÄ‰ª•ÔºåPod ÂèØ‰ª•Áî±Â§ö‰∏™Á¥ßÂØÜÂçè‰ΩúÁöÑÂÆπÂô®ÁªÑÊàê</p><p><strong>Pod Â∞±ÊòØ Kubernetes ‰∏ñÁïåÈáåÁöÑ‚ÄúÂ∫îÁî®‚ÄùÔºõËÄå‰∏Ä‰∏™Â∫îÁî®ÔºåÂèØ‰ª•Áî±Â§ö‰∏™ÂÆπÂô®ÁªÑÊàê</strong></p><p>PodÔºåÂÖ∂ÂÆûÊòØ‰∏ÄÁªÑÂÖ±‰∫´‰∫ÜÊüê‰∫õËµÑÊ∫êÁöÑÂÆπÂô®</p><p><strong>Âá°ÊòØË∞ÉÂ∫¶„ÄÅÁΩëÁªú„ÄÅÂ≠òÂÇ®Ôºå‰ª•ÂèäÂÆâÂÖ®Áõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÔºåÂü∫Êú¨‰∏äÊòØ Pod Á∫ßÂà´ÁöÑ</strong>Ôºõ</p><p><strong>Âá°ÊòØË∑üÂÆπÂô®ÁöÑ Linux Namespace Áõ∏ÂÖ≥ÁöÑÂ±ûÊÄßÔºå‰πü‰∏ÄÂÆöÊòØ Pod Á∫ßÂà´ÁöÑ</strong></p><p><strong>Âá°ÊòØ Pod ‰∏≠ÁöÑÂÆπÂô®Ë¶ÅÂÖ±‰∫´ÂÆø‰∏ªÊú∫ÁöÑ NamespaceÔºå‰πü‰∏ÄÂÆöÊòØ Pod Á∫ßÂà´ÁöÑÂÆö‰πâ</strong></p><p><strong>Pod ÈáåÁöÑÊâÄÊúâÂÆπÂô®ÔºåÂÖ±‰∫´ÁöÑÊòØÂêå‰∏Ä‰∏™ Network NamespaceÔºåÂπ∂‰∏îÂèØ‰ª•Â£∞ÊòéÂÖ±‰∫´Âêå‰∏Ä‰∏™ Volume</strong></p><p>Pod ÂèØ‰ª•Ë¢´ÁúãÊàê‰º†ÁªüÁéØÂ¢ÉÈáåÁöÑ‚ÄúÊú∫Âô®‚Äù„ÄÅÊääÂÆπÂô®Áúã‰ΩúÊòØËøêË°åÂú®Ëøô‰∏™‚ÄúÊú∫Âô®‚ÄùÈáåÁöÑ‚ÄúÁî®Êà∑Á®ãÂ∫è‚Äù</p><p>ÂÆπÂô®ÔºåÂ∞±ÊòØÊú™Êù•‰∫ëËÆ°ÁÆóÁ≥ªÁªü‰∏≠ÁöÑËøõÁ®ãÔºõÂÆπÂô®ÈïúÂÉèÂ∞±ÊòØËøô‰∏™Á≥ªÁªüÈáåÁöÑ‚Äú.exe‚ÄùÂÆâË£ÖÂåÖ</p></blockquote><ul><li>ÊØè‰∏™ Pod ÈÉΩ‰ºöË¢´ÂàÜÈÖç‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ IP Âú∞ÂùÄ„ÄÇPod ‰∏≠ÁöÑÊâÄÊúâÂÆπÂô®ÂÖ±‰∫´ÁΩëÁªúÁ©∫Èó¥ÔºåÂåÖÊã¨ IP Âú∞ÂùÄÂíåÁ´ØÂè£„ÄÇPod ÂÜÖÈÉ®ÁöÑÂÆπÂô®ÂèØ‰ª•‰ΩøÁî® <code>localhost</code> ‰∫íÁõ∏ÈÄö‰ø°„ÄÇPod ‰∏≠ÁöÑÂÆπÂô®‰∏éÂ§ñÁïåÈÄö‰ø°Êó∂ÔºåÂøÖÈ°ªÂàÜÈÖçÂÖ±‰∫´ÁΩëÁªúËµÑÊ∫êÔºà‰æãÂ¶Ç‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑÁ´ØÂè£Êò†Â∞ÑÔºâ„ÄÇ</li><li>ÂèØ‰ª•‰∏∫‰∏Ä‰∏™ Pod ÊåáÂÆöÂ§ö‰∏™ÂÖ±‰∫´ÁöÑ Volume„ÄÇPod ‰∏≠ÁöÑÊâÄÊúâÂÆπÂô®ÈÉΩÂèØ‰ª•ËÆøÈóÆÂÖ±‰∫´ÁöÑ volume„ÄÇVolume ‰πüÂèØ‰ª•Áî®Êù•ÊåÅ‰πÖÂåñ Pod ‰∏≠ÁöÑÂ≠òÂÇ®ËµÑÊ∫êÔºå‰ª•Èò≤ÂÆπÂô®ÈáçÂêØÂêéÊñá‰ª∂‰∏¢Â§±„ÄÇ</li></ul><h2 id="DaemonSet"><a href="#DaemonSet" class="headerlink" title="DaemonSet"></a>DaemonSet</h2><blockquote><p>ÁÆ°ÁêÜ ËäÇÁÇπÂêéÂè∞ÊîØÊíëÂûãÔºànode-daemonÔºâ‰∏öÂä°</p></blockquote><ol><li>Ëøô‰∏™ Pod ËøêË°åÂú® Kubernetes ÈõÜÁæ§ÈáåÁöÑÊØè‰∏Ä‰∏™ËäÇÁÇπÔºàNodeÔºâ‰∏äÔºõ</li><li>ÊØè‰∏™ËäÇÁÇπ‰∏äÂè™Êúâ‰∏Ä‰∏™ËøôÊ†∑ÁöÑ Pod ÂÆû‰æãÔºõ</li><li>ÂΩìÊúâÊñ∞ÁöÑËäÇÁÇπÂä†ÂÖ• Kubernetes ÈõÜÁæ§ÂêéÔºåËØ• Pod ‰ºöËá™Âä®Âú∞Âú®Êñ∞ËäÇÁÇπ‰∏äË¢´ÂàõÂª∫Âá∫Êù•ÔºõËÄåÂΩìÊóßËäÇÁÇπË¢´Âà†Èô§ÂêéÔºåÂÆÉ‰∏äÈù¢ÁöÑ Pod ‰πüÁõ∏Â∫îÂú∞‰ºöË¢´ÂõûÊî∂Êéâ„ÄÇ</li></ol><h2 id="job"><a href="#job" class="headerlink" title="job"></a>job</h2><blockquote><p>ÁÆ°ÁêÜ ÊâπÂ§ÑÁêÜÂûãÔºàbatchÔºâ‰∏öÂä°</p></blockquote><h2 id="StatefulSet"><a href="#StatefulSet" class="headerlink" title="StatefulSet"></a>StatefulSet</h2><blockquote><p>ÁÆ°ÁêÜ ÊúâÁä∂ÊÄÅÂ∫îÁî®ÂûãÔºàstateful applicationÔºâ‰∏öÂä°</p><p>StatefulSet ÁöÑÊ†∏ÂøÉÂäüËÉΩÔºåÂ∞±ÊòØÈÄöËøáÊüêÁßçÊñπÂºèËÆ∞ÂΩïËøô‰∫õÁä∂ÊÄÅÔºåÁÑ∂ÂêéÂú® Pod Ë¢´ÈáçÊñ∞ÂàõÂª∫Êó∂ÔºåËÉΩÂ§ü‰∏∫Êñ∞ Pod ÊÅ¢Â§çËøô‰∫õÁä∂ÊÄÅ</p></blockquote><ul><li><p>ÊãìÊâëÁä∂ÊÄÅ</p><ul><li><p>Headless Service</p><blockquote><p>ÈÄöËøá Headless Service ÁöÑÊñπÂºèÔºåStatefulSet ‰∏∫ÊØè‰∏™ Pod ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âõ∫ÂÆöÂπ∂‰∏îÁ®≥ÂÆöÁöÑ DNS ËÆ∞ÂΩïÔºåÊù•‰Ωú‰∏∫ÂÆÉÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pod-name&gt;.&lt;svc-name&gt;.&lt;namespace&gt;.svc.cluster.local</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li>Â≠òÂÇ®Áä∂ÊÄÅ</li></ul><blockquote><p>Kubernetes ‰∏≠ PVC Âíå PV ÁöÑËÆæËÆ°Ôºå<strong>ÂÆûÈôÖ‰∏äÁ±ª‰ºº‰∫é‚ÄúÊé•Âè£‚ÄùÂíå‚ÄúÂÆûÁé∞‚ÄùÁöÑÊÄùÊÉ≥</strong>„ÄÇ</p></blockquote><p><strong>Persistent Volume Claim(PVC)</strong></p><p><strong>persistent Volume(PV)</strong></p><h3 id="lifecycle-hook"><a href="#lifecycle-hook" class="headerlink" title="(lifecycle) hook"></a>(lifecycle) hook</h3><ul><li>PostStart</li><li>PreStop</li></ul><blockquote><p>Hook Handlers: Exec and HTTP</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lifecycle:</span></span><br><span class="line">      <span class="attr">postStart:</span></span><br><span class="line">        <span class="attr">exec:</span></span><br><span class="line">          <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;echo &#x27;PostStart hook&#x27; &gt; /usr/share/message&quot;</span>]</span><br><span class="line">      <span class="attr">preStop:</span></span><br><span class="line">        <span class="attr">httpGet:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">/shutdown</span></span><br><span class="line">          <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h3 id="bootstram-command"><a href="#bootstram-command" class="headerlink" title="bootstram command"></a>bootstram command</h3><p><code>sh -c</code> allows running multiple commands in a single shell</p><p><code>exec</code> ensures the mount process becomes the main process of the container</p><p>e.g.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">containers:</span><br><span class="line">- name: juicefs-mount</span><br><span class="line">  command: </span><br><span class="line">    - sh</span><br><span class="line">    - -c</span><br><span class="line">    - |</span><br><span class="line">      /usr/local/bin/juicefs format ... </span><br><span class="line">      exec /bin/mount.juicefs ...</span><br></pre></td></tr></table></figure><h2 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h2><ul><li><p>create</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret generic user --from-file=./username.txt</span><br></pre></td></tr></table></figure></li><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get secrets</span><br></pre></td></tr></table></figure></li></ul><h2 id="ConfigMap"><a href="#ConfigMap" class="headerlink" title="ConfigMap"></a>ConfigMap</h2><ul><li><p>create</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create configmap ui-config --from-file=example/ui.properties</span><br></pre></td></tr></table></figure></li><li><p>delete</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete configmap &lt;name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure></li><li><p>get yaml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get configmaps ui-config -o yaml</span><br></pre></td></tr></table></figure></li></ul><h2 id="CronJob"><a href="#CronJob" class="headerlink" title="CronJob"></a>CronJob</h2><h2 id="infra-container-pause-container"><a href="#infra-container-pause-container" class="headerlink" title="infra container (pause container)"></a>infra container (pause container)</h2><blockquote><p>Âú® Kubernetes È°πÁõÆÈáåÔºåPod ÁöÑÂÆûÁé∞ÈúÄË¶Å‰ΩøÁî®‰∏Ä‰∏™‰∏≠Èó¥ÂÆπÂô®ÔºåËøô‰∏™ÂÆπÂô®Âè´‰Ωú Infra ÂÆπÂô®„ÄÇÂú®Ëøô‰∏™ Pod ‰∏≠ÔºåInfra ÂÆπÂô®Ê∞∏ËøúÈÉΩÊòØÁ¨¨‰∏Ä‰∏™Ë¢´ÂàõÂª∫ÁöÑÂÆπÂô®ÔºåËÄåÂÖ∂‰ªñÁî®Êà∑ÂÆö‰πâÁöÑÂÆπÂô®ÔºåÂàôÈÄöËøá Join Network Namespace ÁöÑÊñπÂºèÔºå‰∏é Infra ÂÆπÂô®ÂÖ≥ËÅîÂú®‰∏ÄËµ∑„ÄÇ</p><p>Âú® Kubernetes È°πÁõÆÈáåÔºåInfra ÂÆπÂô®‰∏ÄÂÆöË¶ÅÂç†Áî®ÊûÅÂ∞ëÁöÑËµÑÊ∫êÔºåÊâÄ‰ª•ÂÆÉ‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÁâπÊÆäÁöÑÈïúÂÉèÔºåÂè´‰ΩúÔºö<code>k8s.gcr.io/pause</code>„ÄÇËøô‰∏™ÈïúÂÉèÊòØ‰∏Ä‰∏™Áî®Ê±áÁºñËØ≠Ë®ÄÁºñÂÜôÁöÑ„ÄÅÊ∞∏ËøúÂ§Ñ‰∫é‚ÄúÊöÇÂÅú‚ÄùÁä∂ÊÄÅÁöÑÂÆπÂô®ÔºåËß£ÂéãÂêéÁöÑÂ§ßÂ∞è‰πüÂè™Êúâ 100~200 KB Â∑¶Âè≥„ÄÇ</p></blockquote><ul><li>infra container Ë¥üË¥£ËøêË°åÁΩëÁªúÂíå IPC ÂëΩÂêçÁ©∫Èó¥ÁöÑÂàùÂßãÂåñ‰ªªÂä°Ôºå‰ª•Âèä‰∏∫ Pod ‰∏≠ÁöÑÂÖ∂‰ªñÂÆπÂô®Êèê‰æõÂÖ±‰∫´ÁöÑÁΩëÁªúÂíå IPC (Inter-Process Communication)ÁéØÂ¢É</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Maintains pod network namespace and keeps pod alive</span><br><span class="line">Also known as the &quot;pause container&quot;</span><br><span class="line">Automatically created for every pod</span><br><span class="line">Holds the network namespace for the pod</span><br><span class="line">Keeps the pod running</span><br><span class="line">Uses minimal resources</span><br><span class="line">Not visible in pod specifications</span><br><span class="line">Runs for the entire lifecycle of the pod</span><br></pre></td></tr></table></figure><h2 id="stragety"><a href="#stragety" class="headerlink" title="stragety"></a>stragety</h2><ul><li><p><strong>ImagePullPolicy</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Always Never IfNotPresent</span><br></pre></td></tr></table></figure></li><li><p><strong>Lifecycle</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">postStart preStop</span><br></pre></td></tr></table></figure></li><li><p><strong>restartPolicy</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AlwaysÔºöÂú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÔºåÂè™Ë¶ÅÂÆπÂô®‰∏çÂú®ËøêË°åÁä∂ÊÄÅÔºåÂ∞±Ëá™Âä®ÈáçÂêØÂÆπÂô®Ôºõ</span><br><span class="line">OnFailure: Âè™Âú®ÂÆπÂô®ÂºÇÂ∏∏Êó∂ÊâçËá™Âä®ÈáçÂêØÂÆπÂô®Ôºõ</span><br><span class="line">Never: ‰ªéÊù•‰∏çÈáçÂêØÂÆπÂô®„ÄÇ</span><br></pre></td></tr></table></figure></li><li><p><strong>PodPreset</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PodPreset ÈáåÂÆö‰πâÁöÑÂÜÖÂÆπÔºåÂè™‰ºöÂú® Pod API ÂØπË±°Ë¢´ÂàõÂª∫‰πãÂâçËøΩÂä†Âú®Ëøô‰∏™ÂØπË±°Êú¨Ë∫´‰∏äÔºåËÄå‰∏ç‰ºöÂΩ±Âìç‰ªª‰Ωï Pod ÁöÑÊéßÂà∂Âô®ÁöÑÂÆö‰πâ</span><br></pre></td></tr></table></figure></li><li><p><strong>Status</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pending running succeeded failed upknown</span><br></pre></td></tr></table></figure></li></ul><h2 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h2><blockquote><p>ÊâÄË∞ìÂÆπÂô®ÁöÑ VolumeÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü‰∏Ä‰∏™ÂÆø‰∏ªÊú∫‰∏äÁöÑÁõÆÂΩïÔºåË∑ü‰∏Ä‰∏™ÂÆπÂô®ÈáåÁöÑÁõÆÂΩïÁªëÂÆöÊåÇËΩΩÂú®‰∫Ü‰∏ÄËµ∑</p><p>ÊâÄË∞ìÁöÑ‚ÄúÊåÅ‰πÖÂåñ Volume‚ÄùÔºåÊåáÁöÑÂ∞±ÊòØËøô‰∏™ÂÆø‰∏ªÊú∫‰∏äÁöÑÁõÆÂΩïÔºåÂÖ∑Â§á‚ÄúÊåÅ‰πÖÊÄß‚Äù„ÄÇÂç≥Ëøô‰∏™ÁõÆÂΩïÈáåÈù¢ÁöÑÂÜÖÂÆπÔºåÊó¢‰∏ç‰ºöÂõ†‰∏∫ÂÆπÂô®ÁöÑÂà†Èô§ËÄåË¢´Ê∏ÖÁêÜÊéâÔºå‰πü‰∏ç‰ºöË∑üÂΩìÂâçÁöÑÂÆø‰∏ªÊú∫ÁªëÂÆö„ÄÇ</p></blockquote><p><strong>‚ÄúÊåÅ‰πÖÂåñ‚ÄùÂÆø‰∏ªÊú∫ÁõÆÂΩïÁöÑËøáÁ®ãÔºåÂèØ‰ª•ÂΩ¢Ë±°Âú∞Áß∞‰∏∫‚Äú‰∏§Èò∂ÊÆµÂ§ÑÁêÜ‚Äù</strong></p><ul><li>Á¨¨‰∏ÄÈò∂ÊÆµ AttachÔºöËôöÊãüÊú∫ÊåÇËΩΩËøúÁ®ãÁ£ÅÁõòÁöÑÊìç‰Ωú</li><li>Á¨¨‰∫åÈò∂ÊÆµ MountÔºöÂ∞ÜÁ£ÅÁõòËÆæÂ§áÊ†ºÂºèÂåñÂπ∂ÊåÇËΩΩÂà∞ Volume ÂÆø‰∏ªÊú∫ÁõÆÂΩïÁöÑÊìç‰Ωú</li></ul><h3 id="StorageClass"><a href="#StorageClass" class="headerlink" title="StorageClass"></a>StorageClass</h3><blockquote><p><strong>StorageClass</strong> defines the provisioner and parameters for dynamic storage provisioning.</p><p>a <strong>StorageClass</strong> is a <strong>global resource</strong> and is <strong>not limited to a specific namespace</strong>. It can be used by any pod across all namespaces in the cluster.</p></blockquote><ul><li><p>ÂÆö‰πâ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Á¨¨‰∏ÄÔºåPV ÁöÑÂ±ûÊÄß„ÄÇÊØîÂ¶ÇÔºåÂ≠òÂÇ®Á±ªÂûã„ÄÅVolume ÁöÑÂ§ßÂ∞èÁ≠âÁ≠â„ÄÇ</span><br><span class="line">Á¨¨‰∫åÔºåÂàõÂª∫ËøôÁßç PV ÈúÄË¶ÅÁî®Âà∞ÁöÑÂ≠òÂÇ®Êèí‰ª∂„ÄÇÊØîÂ¶ÇÔºåCeph Á≠âÁ≠â„ÄÇ</span><br></pre></td></tr></table></figure></li><li><p>ÂÖÖÂΩì PV ÁöÑÊ®°Êùø„ÄÇÂπ∂‰∏îÔºåÂè™ÊúâÂêåÂ±û‰∫é‰∏Ä‰∏™ StorageClass ÁöÑ PV Âíå PVCÔºåÊâçÂèØ‰ª•ÁªëÂÆöÂú®‰∏ÄËµ∑</p></li></ul><h3 id="PVC"><a href="#PVC" class="headerlink" title="PVC"></a>PVC</h3><blockquote><p><strong>PersistentVolumeClaim (PVC)</strong> requests storage and can specify a StorageClass to trigger the dynamic creation of a PersistentVolume.</p><p>The <strong>PVC size</strong> controls how much storage is made available to a pod, and <strong>all of that storage</strong> is accessible to the pod.</p><p>There is <strong>no way to further subdivide the storage provided to a pod</strong> by the PVC. Once the PVC is created, all storage allocated by it is available to the pod.</p></blockquote><ul><li><strong>PVCs are namespace-scoped</strong>: PVCs are created within a specific namespace and request storage from available PVs or a StorageClass.</li></ul><h3 id="PV"><a href="#PV" class="headerlink" title="PV"></a>PV</h3><blockquote><p><strong>PersistentVolume (PV)</strong> is either dynamically created based on the PVC‚Äôs request or manually created and bound to a PVC.</p><p>so PV cannot directly use a StorageClass for dynamic provisioning util a PVC to trigger the provisioning process.</p><p>in other words, <strong>PVs are either statically provisioned</strong> (manually created) or <strong>dynamically provisioned via a PVC</strong>.</p><p>so Even if you manually create a PV, it won‚Äôt be useful until a <strong>PVC binds to it</strong>.</p></blockquote><ul><li><strong>PVs are global resources</strong>: They can be used across namespaces.</li></ul><h3 id="provision"><a href="#provision" class="headerlink" title="provision"></a>provision</h3><ul><li><strong>static provisioning</strong>, the relationship between a PersistentVolume (PV) and a PersistentVolumeClaim (PVC) is strictly <strong>1:1</strong> at any given time.</li></ul><h2 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h2><blockquote><p>Role-Based Access Control</p><p>reference <a href="https://www.willshirley.top/2025/03/01/kubernetes%20RBAC/">Kubernetes RBAC</a></p></blockquote><h2 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h2><blockquote><p>Operator ÁöÑÂ∑•‰ΩúÂéüÁêÜÔºåÂÆûÈôÖ‰∏äÊòØÂà©Áî®‰∫Ü Kubernetes ÁöÑËá™ÂÆö‰πâ API ËµÑÊ∫êÔºà<a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/extend-api-custom-resource-definitions">custom resource definitions (CRDs)</a>ÔºâÔºåÊù•ÊèèËø∞Êàë‰ª¨ÊÉ≥Ë¶ÅÈÉ®ÁΩ≤ÁöÑ‚ÄúÊúâÁä∂ÊÄÅÂ∫îÁî®‚ÄùÔºõÁÑ∂ÂêéÂú®Ëá™ÂÆö‰πâÊéßÂà∂Âô®ÈáåÔºåÊ†πÊçÆËá™ÂÆö‰πâ API ÂØπË±°ÁöÑÂèòÂåñÔºåÊù•ÂÆåÊàêÂÖ∑‰ΩìÁöÑÈÉ®ÁΩ≤ÂíåËøêÁª¥Â∑•‰Ωú</p><p>In other words, Operators are software extensions that use custom resources to manage applications and their components</p></blockquote><h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><blockquote><p><em>Controller is just some logic about something that it is supposed to be managed and is usually visualised as an observe and adjust loop.</em></p><p><em>Observe the current state, compare it to the desired state and adjust the state</em></p></blockquote><h3 id="custom-resource-CR"><a href="#custom-resource-CR" class="headerlink" title="custom resource(CR)"></a>custom resource(CR)</h3><h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><blockquote><p><em>The state just holds the information of what the desired state of the resource is and the resource is the thing that you are managing.</em></p></blockquote><h3 id="Operator-vs-Deployment"><a href="#Operator-vs-Deployment" class="headerlink" title="Operator vs Deployment"></a>Operator vs Deployment</h3><table><thead><tr><th><strong>Feature</strong></th><th><strong>Operator</strong></th><th><strong>Deployment</strong></th></tr></thead><tbody><tr><td><strong>Definition</strong></td><td>A Kubernetes <strong>Operator</strong> automates the lifecycle of an application, handling deployment, upgrades, scaling, and failure recovery.</td><td>A <strong>Deployment</strong> is a Kubernetes object that manages a set of <strong>pods</strong> with defined scaling and update strategies.</td></tr><tr><td><strong>Automation Level</strong></td><td><strong>High</strong>: Operators provide full lifecycle automation.</td><td><strong>Basic</strong>: Deployments only handle pod management and scaling.</td></tr><tr><td><strong>Custom Resource (CRD)</strong></td><td>Uses <strong>Custom Resource Definitions (CRDs)</strong> to extend Kubernetes functionality.</td><td>Uses <strong>built-in resources</strong> like Deployment, Service, ReplicaSet.</td></tr><tr><td><strong>Scaling</strong></td><td>Can provide <strong>intelligent auto-scaling</strong> based on workload behavior.</td><td>Relies on <strong>Horizontal Pod Autoscaler (HPA)</strong> or manual scaling.</td></tr><tr><td><strong>Upgrade Handling</strong></td><td>Handles <strong>zero-downtime upgrades</strong> with rollback capabilities.</td><td>Uses RollingUpdate or Recreate strategies.</td></tr><tr><td><strong>Failure Recovery</strong></td><td>Can detect failures and take automated corrective actions.</td><td>Relies on Kubernetes itself to restart pods.</td></tr><tr><td><strong>Complexity</strong></td><td>More complex, requires coding and maintaining an Operator.</td><td>Simpler, uses YAML definitions.</td></tr></tbody></table><ul><li><p><strong>Operators use Deployments internally</strong> to manage application workloads.</p></li><li><p>A <strong>Deployment only manages pods</strong>, but an <strong>Operator enhances this by managing the entire application lifecycle</strong>.</p></li><li><p>Operators <strong>create, update, and delete Deployments</strong> dynamically based on defined logic.</p></li></ul><h2 id="CNI"><a href="#CNI" class="headerlink" title="CNI"></a>CNI</h2><p>TBD</p><h1 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h1><ul><li><p>ËøáÂéªÂæàÂ§öÁöÑÈõÜÁæ§ÁÆ°ÁêÜÈ°πÁõÆÔºàÊØîÂ¶Ç Yarn„ÄÅMesosÔºå‰ª•Âèä SwarmÔºâÊâÄÊìÖÈïøÁöÑÔºåÈÉΩÊòØÊää‰∏Ä‰∏™ÂÆπÂô®ÔºåÊåâÁÖßÊüêÁßçËßÑÂàôÔºåÊîæÁΩÆÂú®Êüê‰∏™ÊúÄ‰Ω≥ËäÇÁÇπ‰∏äËøêË°åËµ∑Êù•„ÄÇËøôÁßçÂäüËÉΩÔºåÊàë‰ª¨Áß∞‰∏∫‚ÄúË∞ÉÂ∫¶‚Äù„ÄÇ</p><p>ËÄå Kubernetes È°πÁõÆÊâÄÊìÖÈïøÁöÑÔºåÊòØÊåâÁÖßÁî®Êà∑ÁöÑÊÑèÊÑøÂíåÊï¥‰∏™Á≥ªÁªüÁöÑËßÑÂàôÔºåÂÆåÂÖ®Ëá™Âä®ÂåñÂú∞Â§ÑÁêÜÂ•ΩÂÆπÂô®‰πãÈó¥ÁöÑÂêÑÁßçÂÖ≥Á≥ª„ÄÇ<strong>ËøôÁßçÂäüËÉΩÔºåÂ∞±ÊòØÔºöÁºñÊéí„ÄÇ</strong></p></li><li><p>Êõ¥Êñ∞podÁöÑimage</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 1, config yaml</span></span><br><span class="line">imagePullPolicy: Always</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> method 2, manually delete pod</span></span><br><span class="line">kubectl delete pod &lt;pod-name&gt;</span><br></pre></td></tr></table></figure></li></ul><h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="node-pod-cidr-not-assigned"><a href="#node-pod-cidr-not-assigned" class="headerlink" title="node pod cidr not assigned"></a><strong>node pod cidr not assigned</strong></h2><ul><li>Step 1</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> master node</span></span><br><span class="line">sudo vim /etc/kubernetes/manifests/kube-controller-manager.yaml</span><br></pre></td></tr></table></figure><p><code>kube-controller-manager.yaml</code> info</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - command:</span><br><span class="line">    - kube-controller-manager</span><br><span class="line">    - --authentication-kubeconfig=/etc/kubernetes/controller-manager.conf</span><br><span class="line">    - --authorization-kubeconfig=/etc/kubernetes/controller-manager.conf</span><br><span class="line">...</span><br><span class="line">    - --allocate-node-cidrs=true</span><br><span class="line">    - --cluster-cidr=10.244.0.0/16</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li>step2 </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart kubelet</span><br></pre></td></tr></table></figure><h2 id="failed-to-set-bridge-addr-‚Äúcni0‚Äú-already-has-an-IP-address-different-from-xxx"><a href="#failed-to-set-bridge-addr-‚Äúcni0‚Äú-already-has-an-IP-address-different-from-xxx" class="headerlink" title="failed to set bridge addr: ‚Äúcni0‚Äú already has an IP address different from xxx"></a>failed to set bridge addr: ‚Äúcni0‚Äú already has an IP address different from xxx</h2><ul><li>check</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> node1</span></span><br><span class="line">cni0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.85.0.1  netmask 255.255.0.0  broadcast 10.85.255.255</span><br><span class="line">        ...</span><br><span class="line">flannel.1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1450</span><br><span class="line">        inet 10.244.0.0  netmask 255.255.255.255  broadcast 0.0.0.0  </span><br><span class="line"><span class="meta">#</span><span class="bash"> node2</span></span><br><span class="line">cni0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.85.0.1  netmask 255.255.0.0  broadcast 10.85.255.255</span><br><span class="line">        ...</span><br><span class="line">flannel.1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1450</span><br><span class="line">        inet 10.244.1.0  netmask 255.255.255.255  broadcast 0.0.0.0  </span><br><span class="line"><span class="meta">#</span><span class="bash"> node3</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> node2</span></span><br><span class="line">cni0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.85.0.1  netmask 255.255.0.0  broadcast 10.85.255.255</span><br><span class="line">        ...</span><br><span class="line">flannel.1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1450</span><br><span class="line">        inet 10.244.2.0  netmask 255.255.255.255  broadcast 0.0.0.0  </span><br></pre></td></tr></table></figure><blockquote><p>cni0‰∏éflannelÂ∫îËØ•ÈúÄË¶ÅÂú®‰∏Ä‰∏™ÁΩëÊÆµÈáå</p></blockquote><ul><li>delete <code>cni0 </code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> node1/node2/node3</span></span><br><span class="line">sudo ifconfig cni0 down </span><br><span class="line">sudo ip link delete cni0</span><br></pre></td></tr></table></figure><ul><li>restore <code>coredns</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> error info</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl get po -o wide -n kube-system</span></span><br><span class="line">NAME                                READY   STATUS             RESTARTS       AGE   IP             NODE  ...</span><br><span class="line">coredns-7b5944fdcf-mgwq2            0/1     CrashLoopBackOff   6 (2m3s ago)   15d   10.85.0.3      dingo7232 </span><br><span class="line">coredns-7b5944fdcf-sxfvt            0/1     CrashLoopBackOff   6 (2m8s ago)   15d   10.85.0.2      dingo7232 </span><br></pre></td></tr></table></figure><blockquote><p> delete coredns,  k8s system will auto recreate it </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> kubectl get po -o wide -n kube-system</span></span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE   IP             NODE...</span><br><span class="line">coredns-7b5944fdcf-fw87q            1/1     Running   0          11s   10.244.2.175   dingo7234   ...     </span><br><span class="line">coredns-7b5944fdcf-rzw9b            1/1     Running   0          22s   10.244.1.2     dingo7233   ...</span><br></pre></td></tr></table></figure><h2 id="namespace-Terminating"><a href="#namespace-Terminating" class="headerlink" title="namespace Terminating"></a>namespace Terminating</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1: check resource <span class="keyword">in</span> namespace</span></span><br><span class="line">kubectl api-resources --verbs=list --namespaced -o name | xargs -n 1 kubectl get -n &lt;your-ns-to-delete&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.: kubectl api-resources --verbs=list --namespaced -o name | xargs -n 1 kubectl get -n curve</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2: remove the finalizers</span></span><br><span class="line">kubectl -n &lt;namespace&gt; patch &lt;RessourceObject&gt; &lt;Object-name&gt; -p &#x27;&#123;&quot;metadata&quot;:&#123;&quot;finalizers&quot;:null&#125;&#125;&#x27; --type=merge</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.: kubectl -n curve patch curvefs my-fscluster -p <span class="string">&#x27;&#123;&quot;metadata&quot;:&#123;&quot;finalizers&quot;:null&#125;&#125;&#x27;</span> --<span class="built_in">type</span>=merge</span></span><br></pre></td></tr></table></figure><h2 id="pod-Terminating"><a href="#pod-Terminating" class="headerlink" title="pod Terminating"></a>pod Terminating</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete pod &lt;pod-name&gt; --grace-period=0 --force --namespace &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h2 id="flannel-with-kubeadm-init"><a href="#flannel-with-kubeadm-init" class="headerlink" title="flannel  with kubeadm init"></a>flannel  with kubeadm init</h2><blockquote><p>after install flannel , KubeletNotReady container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized</p><p>all nodes is NotReady</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot all nodes</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes delploy</title>
      <link href="/2024/08/05/kubernetes%20deploy/"/>
      <url>/2024/08/05/kubernetes%20deploy/</url>
      
        <content type="html"><![CDATA[<h1 id="k8s-deploy"><a href="#k8s-deploy" class="headerlink" title="k8s deploy"></a>k8s deploy</h1><h2 id="install-kubelet-kubeadm-kubectl"><a href="#install-kubelet-kubeadm-kubectl" class="headerlink" title="install kubelet kubeadm kubectl"></a>install kubelet kubeadm kubectl</h2><ul><li>Step1</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Set SELinux <span class="keyword">in</span> permissive mode (effectively disabling it)</span></span><br><span class="line">sudo setenforce 0</span><br><span class="line">sudo sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/config</span><br></pre></td></tr></table></figure><ul><li>Step2</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.ustc.edu.cn/kubernetes/core:/stable:/v1.30/rpm/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.ustc.edu.cn/kubernetes/core:/stable:/v1.30/rpm/repodata/repomd.xml.key</span><br><span class="line">exclude=kubelet kubeadm kubectl cri-tools kubernetes-cni</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><ul><li>step3</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes</span><br><span class="line">sudo systemctl enable --now kubelet</span><br></pre></td></tr></table></figure><h2 id="install-Container-Runtimes"><a href="#install-Container-Runtimes" class="headerlink" title="install Container Runtimes"></a>install Container Runtimes</h2><blockquote><p><a href="https://www.cloudraft.io/blog/container-runtimes">https://www.cloudraft.io/blog/container-runtimes</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RuntimePath to Unix domain socket</span><br><span class="line">containerdunix:///var/run/containerd/containerd.sock</span><br><span class="line">CRI-Ounix:///var/run/crio/crio.sock</span><br><span class="line">Docker Engine (using cri-dockerd)unix:///var/run/cri-dockerd.sock</span><br></pre></td></tr></table></figure><ul><li>Enable ipv4 packet forward</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sysctl params required by setup, params persist across reboots</span></span><br><span class="line">cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">EOF</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Apply sysctl params without reboot</span></span><br><span class="line">sudo sysctl --system</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Verify that net.ipv4.ip_forward is <span class="built_in">set</span> to 1</span></span><br><span class="line">sysctl net.ipv4.ip_forward</span><br></pre></td></tr></table></figure><ul><li>cgroup driver</li></ul><p>To set <code>systemd</code> as the cgroup driver, edit the <a href="https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/"><code>KubeletConfiguration</code></a> option of <code>cgroupDriver</code> and set it to <code>systemd</code>. For example:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">kubelet.config.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">KubeletConfiguration</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">cgroupDriver:</span> <span class="string">systemd</span></span><br></pre></td></tr></table></figure><h3 id="containerd"><a href="#containerd" class="headerlink" title="containerd"></a>containerd</h3><ul><li><p>stop docker service (is necessary ?) </p></li><li><p>init config.toml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo containerd config default | sudo tee /etc/containerd/config.toml</span><br></pre></td></tr></table></figure></li><li><p>config </p></li></ul><p>Configuring the <code>systemd</code> cgroup driver</p><p><code>sudo vim /etc/containerd/config.toml</code></p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#disabled_plugins = [&quot;cri&quot;]</span></span><br><span class="line"><span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.runc]</span></span><br><span class="line">  <span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.runc.options]</span></span><br><span class="line">    <span class="attr">SystemdCgroup</span> = <span class="literal">true</span></span><br><span class="line"><span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;]</span></span><br><span class="line">  <span class="attr">sandbox_image</span> = <span class="string">&quot;registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.9&quot;</span></span><br><span class="line">  <span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry]</span></span><br><span class="line">    <span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors]</span></span><br><span class="line">      <span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;docker.io&quot;]</span></span><br><span class="line">        <span class="attr">endpoint</span>=[<span class="string">&quot;https://registry-1.docker.io&quot;</span>, <span class="string">&quot;https://xxx.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">      <span class="section">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;registry.k8s.io&quot;]</span></span><br><span class="line">        <span class="attr">endpoint</span>=[<span class="string">&quot;https://xxx.mirror.aliyuncs.com&quot;</span>, <span class="string">&quot;https://k8s.m.daocloud.io&quot;</span>, <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,<span class="string">&quot;https://hub-mirror.c.163.com&quot;</span>]</span><br></pre></td></tr></table></figure><p><code>sudo systemctl restart containerd</code></p><ul><li><p>check containerd version</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">containerd --version</span><br><span class="line"><span class="meta">#</span><span class="bash"> containerd containerd.io 1.7.19</span> </span><br></pre></td></tr></table></figure></li></ul><h3 id="CRI-O-optional"><a href="#CRI-O-optional" class="headerlink" title="CRI-O (optional)"></a>CRI-O (optional)</h3><ul><li><p>set repo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/cri-o.repo</span><br><span class="line">[cri-o]</span><br><span class="line">name=CRI-O</span><br><span class="line">baseurl=https://mirrors.ustc.edu.cn/kubernetes/addons:/cri-o:/stable:/v1.30/rpm/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.ustc.edu.cn/kubernetes/addons:/cri-o:/stable:/v1.30/rpm/repodata/repomd.xml.key</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li><li><p>install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dnf install -y container-selinux</span><br><span class="line">dnf install -y cri-o</span><br><span class="line">systemctl start crio.service</span><br></pre></td></tr></table></figure></li><li><p>bootstrap cluster</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a</span><br><span class="line">modprobe br_netfilter</span><br><span class="line">sysctl -w net.ipv4.ip_forward=1</span><br><span class="line"></span><br><span class="line">kubeadm init</span><br></pre></td></tr></table></figure></li></ul><h3 id="Docker-Engine-optional"><a href="#Docker-Engine-optional" class="headerlink" title="Docker Engine (optional)"></a>Docker Engine (optional)</h3><ul><li><p>install docker (existing)</p></li><li><p>install <code>cri-dockerd</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> extract tgz</span></span><br><span class="line">tar -xzvf cri-dockerd-0.3.15.amd64.tgz</span><br><span class="line"></span><br><span class="line">sudo mv ./cri-dockerd /usr/local/bin/</span><br><span class="line">wget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service</span><br><span class="line">wget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket</span><br><span class="line">sudo mv cri-docker.socket cri-docker.service /etc/systemd/system/</span><br><span class="line">sudo sed -i -e &#x27;s,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,&#x27; /etc/systemd/system/cri-docker.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">enable</span> service</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl enable cri-docker.service</span><br><span class="line">sudo systemctl enable --now cri-docker.socket</span><br><span class="line">sudo systemctl status cri-docker.socket</span><br></pre></td></tr></table></figure></li></ul><h3 id="crictl"><a href="#crictl" class="headerlink" title="crictl"></a>crictl</h3><ul><li>Config containerd <code>vim /etc/crictl.yaml</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtime-endpoint:</span> <span class="string">unix:///run/containerd/containerd.sock</span></span><br><span class="line"><span class="attr">image-endpoint:</span> <span class="string">unix:///run/containerd/containerd.sock</span></span><br><span class="line"><span class="attr">timeout:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">pull-image-on-create:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><ul><li>verify mirror</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crictl info</span><br></pre></td></tr></table></figure><h2 id="kubeadm-deploy-cluster"><a href="#kubeadm-deploy-cluster" class="headerlink" title="kubeadm deploy cluster"></a>kubeadm deploy cluster</h2><h3 id="Initializing-control-plane-node"><a href="#Initializing-control-plane-node" class="headerlink" title="Initializing  control-plane node"></a>Initializing  control-plane node</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> use flannel as Pod network add-on (CNI plugin)</span></span><br><span class="line">sudo kubeadm init  --apiserver-advertise-address=10.220.32.16 --pod-network-cidr=10.244.0.0/16  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apply flannel(optional) CNI plugin</span> </span><br><span class="line">kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo kubeadm config images pull --config kubeadm.conf</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo kubeadm init --config kubeadm.conf</span></span><br></pre></td></tr></table></figure><ul><li><p>(optional) resert (back to kubeadm init)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubeadm reset --cri-socket unix:///var/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure></li><li><p>Use kubectl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure></li><li><p>check the CoreDNS Pod is <code>Running</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods --all-namespaces</span><br><span class="line"></span><br><span class="line">NAMESPACE     NAME                                READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   coredns-7b5944fdcf-mgwq2            1/1     Running   0          4h22m</span><br><span class="line">kube-system   coredns-7b5944fdcf-sxfvt            1/1     Running   0          4h22m</span><br><span class="line">kube-system   etcd-dingo7232                      1/1     Running   1          4h22m</span><br><span class="line">kube-system   kube-apiserver-dingo7232            1/1     Running   1          4h22m</span><br><span class="line">kube-system   kube-controller-manager-dingo7232   1/1     Running   1          4h22m</span><br><span class="line">kube-system   kube-proxy-w2lfk                    1/1     Running   0          4h22m</span><br><span class="line">kube-system   kube-scheduler-dingo7232            1/1     Running   1          4h22m</span><br></pre></td></tr></table></figure></li></ul><h3 id="join-node"><a href="#join-node" class="headerlink" title="join node"></a>join node</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubeadm join --token &lt;token&gt; &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</span><br></pre></td></tr></table></figure><ul><li>Check on control-plane</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure><h3 id="optional"><a href="#optional" class="headerlink" title="optional"></a>optional</h3><ul><li>other node use kubectl</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scp root@&lt;control-plane-host&gt;:/etc/kubernetes/admin.conf .</span><br><span class="line">kubectl --kubeconfig ./admin.conf get nodes</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or <span class="built_in">set</span> kubectl default config</span></span><br><span class="line">scp root@&lt;control-plane-host&gt;:/etc/kubernetes/admin.conf ~/.kube/config</span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> deploy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell bash</title>
      <link href="/2024/07/30/shell%20bash/"/>
      <url>/2024/07/30/shell%20bash/</url>
      
        <content type="html"><![CDATA[<ul><li>the shell assigns its <strong>exit code</strong> to the <code>$?</code> environment variable. The <code>$?</code> variable is how we usually test whether a script has succeeded or not in its execution.</li></ul><h1 id="syntax"><a href="#syntax" class="headerlink" title="syntax"></a>syntax</h1><h2 id="set-x"><a href="#set-x" class="headerlink" title="set -x"></a>set -x</h2><blockquote><p>‚Äã    1.    <strong>Debugging</strong>: When you‚Äôre trying to troubleshoot a script, set -x helps you see exactly what commands are being executed and in what order.</p><p>‚Äã    2.    <strong>Selective Debugging</strong>: You can use set -x and set +x around specific parts of your script to narrow down the problematic sections.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;This is a normal message&quot;</span><br><span class="line"></span><br><span class="line">set -x  # Start debugging from this point</span><br><span class="line">name=&quot;John&quot;</span><br><span class="line">echo &quot;Hello, $name&quot;</span><br><span class="line"></span><br><span class="line">set +x  # Stop debugging after this point</span><br><span class="line">echo &quot;Debugging mode is now off&quot;</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This is a normal message</span><br><span class="line">+ name=John</span><br><span class="line">+ echo &#x27;Hello, John&#x27;</span><br><span class="line">Hello, John</span><br><span class="line">Debugging mode is now off</span><br></pre></td></tr></table></figure><h2 id="shift-2"><a href="#shift-2" class="headerlink" title="shift 2"></a>shift 2</h2><ul><li>Removes the first two positional parameters from command line arguments</li><li>Shifts remaining parameters left by 2 positions</li><li>Useful when processing command line options/arguments in loops</li></ul><h1 id="point"><a href="#point" class="headerlink" title="point"></a>point</h1><ul><li><code>(cd third-party &amp;&amp; ...)</code> ËøôÊ†∑ÁöÑËØ≠Ê≥ïÔºåËøôÊòØ‰∏Ä‰∏™ÂëΩ‰ª§ÊõøÊç¢ÔºåÂÆÉÂÆûË¥®‰∏äÊòØÂÖà‰∏¥Êó∂ÊîπÂèòÂà∞ <code>third-party</code> ÁõÆÂΩïÊâßË°åÈáåÈù¢ÁöÑÂëΩ‰ª§ÔºåÁÑ∂ÂêéËÑöÊú¨‰ºöÁªßÁª≠Âú®ÂéüÂÖàÁöÑÁõÆÂΩï‰∏≠ÊâßË°å„ÄÇ</li></ul>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GO learn</title>
      <link href="/2024/07/28/golang%20learn/"/>
      <url>/2024/07/28/golang%20learn/</url>
      
        <content type="html"><![CDATA[<h1 id="env"><a href="#env" class="headerlink" title="env"></a>env</h1><ul><li><code>GOPATH</code></li></ul><p><code>GOPATH</code> ÊòØ Go Â∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩïÔºåÈÄöÂ∏∏ÂåÖÂê´‰∏â‰∏™Â≠êÁõÆÂΩïÔºö<code>src</code>„ÄÅ<code>pkg</code> Âíå <code>bin</code></p><blockquote><p>ÂèØÈÄöËøá go env GOPATH Êü•ÁúãGo Â∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩï„ÄÇ<code>GOPATH</code> ‰∏≠ÁöÑ <code>bin</code> ÁõÆÂΩïÈÄöÂ∏∏ÂåÖÂê´Áî± <code>go install</code>ÂÆâË£ÖÁöÑÂèØÊâßË°åÊñá‰ª∂</p></blockquote><h1 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h1><h2 id="sclice"><a href="#sclice" class="headerlink" title="sclice"></a>sclice</h2><blockquote><p>sclice selects a half-open range which includes the first element, but excludes the last one.</p></blockquote><ul><li><p>syntax <code>slice[low:high]</code></p></li><li><p>‚Äútake from 1 to the end‚Äù with <code>numbers[1:]</code>.</p></li><li><p>A slice does not store any data, it just describes a section of an underlying array. Changing the elements of a slice modifies the corresponding elements of its underlying array. Other slices that share the same underlying array will see those changes.</p></li><li><p>The default is zero for the low bound and the length of the slice for the high bound.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line"># is equal below </span><br><span class="line">a[<span class="number">0</span>:<span class="number">10</span>]</span><br><span class="line">a[:<span class="number">10</span>]</span><br><span class="line">a[<span class="number">0</span>:]</span><br><span class="line">a[:]</span><br></pre></td></tr></table></figure></li></ul><h2 id="Go‚Äôs-while"><a href="#Go‚Äôs-while" class="headerlink" title="Go‚Äôs while"></a>Go‚Äôs while</h2><p> C‚Äôs <code>while</code> is spelled <code>for</code> in Go.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> sum &lt; <span class="number">1000</span> &#123;</span><br><span class="line">sum += sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><ul><li> errors are values, so we can refactor it out into a variable and have a single source of truth for it.</li></ul>  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ErrInsufficientFunds = errors.New(<span class="string">&quot;cannot withdraw, insufficient funds&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *Wallet)</span> <span class="title">Withdraw</span><span class="params">(amount Bitcoin)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> amount &gt; w.balance &#123;</span><br><span class="line"><span class="keyword">return</span> ErrInsufficientFunds</span><br><span class="line">&#125;</span><br><span class="line">w.balance -= amount</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully">Don‚Äôt just check errors, handle them gracefully</a></li></ul><h2 id="pointer"><a href="#pointer" class="headerlink" title="pointer"></a>pointer</h2><blockquote><p>A pointer holds the memory address of a value.</p><p>The <code>&amp;</code> operator <strong>generates</strong> a pointer to its operand.</p><p>The <code>*</code> operator <strong>denotes</strong> the pointer‚Äôs underlying value.</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">i := <span class="number">42</span></span><br><span class="line"></span><br><span class="line">p := &amp;i         <span class="comment">// point to i</span></span><br><span class="line">fmt.Println(*p) <span class="comment">// read i through the pointer</span></span><br><span class="line">*p = <span class="number">21</span>         <span class="comment">// set i through the pointer</span></span><br><span class="line">fmt.Println(i)  <span class="comment">// see the new value of i</span></span><br></pre></td></tr></table></figure><p><strong>when you call a function or a method the arguments are</strong> <em><strong>copied</strong></em>.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//When calling func (w Wallet) Deposit(amount int) the w is a copy of whatever we called the method from.</span></span><br><span class="line"><span class="comment">//*Wallet rather than Wallet which you can read as &quot;a pointer to a wallet</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *Wallet)</span> <span class="title">Balance</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> (*w).balance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pointer receivers: Methods with pointer receivers can modify the value to which the receiver points. Since methods often need to modify their receiver, pointer receivers are more common than value receivers.</span></span><br></pre></td></tr></table></figure><ul><li>‰∏çÂèØÂØªÂùÄÁöÑÊÉÖÂÜµÔºö</li></ul><ol><li><strong>‰∏çÂèØÂèòÁöÑ</strong>ÂÄº‰∏çÂèØÂØªÂùÄ„ÄÇÂ∏∏Èáè„ÄÅÂü∫Êú¨Á±ªÂûãÁöÑÂÄºÂ≠óÈù¢Èáè„ÄÅÂ≠óÁ¨¶‰∏≤ÂèòÈáèÁöÑÂÄº„ÄÅÂáΩÊï∞‰ª•ÂèäÊñπÊ≥ïÁöÑÂ≠óÈù¢ÈáèÈÉΩÊòØÂ¶ÇÊ≠§„ÄÇÂÖ∂ÂÆûËøôÊ†∑ËßÑÂÆö‰πüÊúâÂÆâÂÖ®ÊÄßÊñπÈù¢ÁöÑËÄÉËôë„ÄÇ</li><li>ÁªùÂ§ßÂ§öÊï∞Ë¢´ËßÜ‰∏∫<strong>‰∏¥Êó∂ÁªìÊûú</strong>ÁöÑÂÄºÈÉΩÊòØ‰∏çÂèØÂØªÂùÄÁöÑ„ÄÇÁÆóÊúØÊìç‰ΩúÁöÑÁªìÊûúÂÄºÂ±û‰∫é‰∏¥Êó∂ÁªìÊûúÔºåÈíàÂØπÂÄºÂ≠óÈù¢ÈáèÁöÑË°®ËææÂºèÁªìÊûúÂÄº‰πüÂ±û‰∫é‰∏¥Êó∂ÁªìÊûú„ÄÇ‰ΩÜÊúâ‰∏Ä‰∏™‰æãÂ§ñÔºåÂØπÂàáÁâáÂ≠óÈù¢ÈáèÁöÑÁ¥¢ÂºïÁªìÊûúÂÄºËôΩÁÑ∂‰πüÂ±û‰∫é‰∏¥Êó∂ÁªìÊûúÔºå‰ΩÜÂç¥ÊòØÂèØÂØªÂùÄÁöÑ„ÄÇ</li><li>Ëã•ÊãøÂà∞ÊüêÂÄºÁöÑÊåáÈíàÂèØËÉΩ‰ºöÁ†¥ÂùèÁ®ãÂ∫èÁöÑ‰∏ÄËá¥ÊÄßÔºåÈÇ£‰πàÂ∞±ÊòØ<strong>‰∏çÂÆâÂÖ®ÁöÑ</strong>ÔºåËØ•ÂÄºÂ∞±‰∏çÂèØÂØªÂùÄ„ÄÇÁî±‰∫éÂ≠óÂÖ∏ÁöÑÂÜÖÈÉ®Êú∫Âà∂ÔºåÂØπÂ≠óÂÖ∏ÁöÑÁ¥¢ÂºïÁªìÊûúÂÄºÁöÑÂèñÂùÄÊìç‰ΩúÈÉΩÊòØ‰∏çÂÆâÂÖ®ÁöÑ„ÄÇÂè¶Â§ñÔºåËé∑ÂèñÁî±Â≠óÈù¢ÈáèÊàñÊ†áËØÜÁ¨¶‰ª£Ë°®ÁöÑÂáΩÊï∞ÊàñÊñπÊ≥ïÁöÑÂú∞ÂùÄÊòæÁÑ∂‰πüÊòØ‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ</li></ol><h2 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">interface</span>&#123;&#125;(container).(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>)</span><br></pre></td></tr></table></figure><h2 id="data-type"><a href="#data-type" class="headerlink" title="data type"></a>data type</h2><ul><li>ÂºïÁî®Á±ªÂûãÔºöÂàáÁâá„ÄÅÂ≠óÂÖ∏„ÄÅÈÄöÈÅì„ÄÅÂáΩÊï∞</li><li>ÂÄºÁ±ªÂûãÔºöÊï∞ÁªÑ„ÄÅÂü∫Á°ÄÊï∞ÊçÆÁ±ªÂûã‰ª•ÂèäÁªìÊûÑ‰ΩìÁ±ªÂûã</li></ul><h1 id="concurrency"><a href="#concurrency" class="headerlink" title="concurrency"></a>concurrency</h1><blockquote><p>Do not communicate by sharing memory; instead, share memory by communicating.</p></blockquote><h2 id="backstone"><a href="#backstone" class="headerlink" title="backstone"></a>backstone</h2><p>PMG stands for P (logical <strong>p</strong>rocessors), M (<strong>m</strong>achine threads), and G (<strong>g</strong>oroutines). The key point is that each logical processor (P) can only have one machine thread (M) running on it at any time. And for a goroutine (G) to run, it needs to be attached to a thread (M).</p><h2 id="sync"><a href="#sync" class="headerlink" title="sync"></a>sync</h2><ul><li><p><code>Mutex</code> allows us to add locks to our data</p><blockquote><p>mutual exclusionÔºåÁÆÄÁß∞ mutex</p></blockquote></li><li><p><code>WaitGroup</code> is a means of waiting for goroutines to finish jobs</p></li><li><p><code>RWMutex</code> ËØªÂÜôÈîÅ</p></li></ul><h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><blockquote><p>they provide a way to send data from one goroutine to another, ensuring smooth communication and synchronization in concurrent programs.</p></blockquote><h1 id="concepts"><a href="#concepts" class="headerlink" title="concepts"></a>concepts</h1><ul><li>subroutines</li></ul><p>Every programmer today is familiar with function calls (subroutines): F calls G, which stops F and runs G. G does its work, potentially calling and waiting for other functions, and eventually returns. When G returns, G is gone and F continues running. In this pattern, only one function is running at a time, while its callers wait, all the way up the call stack.</p><ul><li>coroutines</li></ul><p>In contrast to subroutines, coroutines run concurrently on different stacks, but it‚Äôs still true that only one is running at a time, while its caller waits. F starts G, but G does not run immediately. Instead, F must explicitly <em>resume</em> G, which then starts running. At any point, G may turn around and <em>yield</em> back to F. That pauses G and continues F from its resume operation. Eventually F calls resume again, which pauses F and continues G from its yield. On and on they go, back and forth, until G returns, which cleans up G and continues F from its most recent resume, with some signal to F that G is done and that F should no longer try to resume G. In this pattern, only one coroutine is running at a time, while its caller waits on a different stack. They take turns in a well-defined, coordinated manner.</p><h1 id="best-practise"><a href="#best-practise" class="headerlink" title="best practise"></a>best practise</h1><h2 id="directory"><a href="#directory" class="headerlink" title="directory"></a>directory</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">project-root/</span><br><span class="line">‚îú‚îÄ‚îÄ cmd/  # ÂåÖÂê´È°πÁõÆÁöÑ‰∏ªË¶ÅÂ∫îÁî®Á®ãÂ∫è„ÄÇÊØè‰∏™Â∫îÁî®Á®ãÂ∫èÈÉΩÊúâ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠êÁõÆÂΩï„ÄÇ</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ myapp/</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ main.go  # ‰∏ªÂ∫îÁî®Á®ãÂ∫èÂÖ•Âè£ÁÇπ</span><br><span class="line">‚îú‚îÄ‚îÄ internal/  # ÂåÖÂê´‰∏çÂ∏åÊúõÂÖ∂‰ªñÈ°πÁõÆÂØºÂÖ•ÁöÑÂåÖ</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ app/  # Â∫îÁî®Á®ãÂ∫èÁöÑÊ†∏ÂøÉÈÄªËæë</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ config/  # ÈÖçÁΩÆÁõ∏ÂÖ≥‰ª£Á†Å</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ models/  # Êï∞ÊçÆÊ®°Âûã</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ user.go</span><br><span class="line">‚îú‚îÄ‚îÄ pkg/  # ÂèØ‰ª•Ë¢´Â§ñÈÉ®Â∫îÁî®Á®ãÂ∫è‰ΩøÁî®ÁöÑÂ∫ì‰ª£Á†Å</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ database/  # Êï∞ÊçÆÂ∫ìÊìç‰ΩúÁõ∏ÂÖ≥‰ª£Á†Å</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.go</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ utils/  # ÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ helper.go</span><br><span class="line">‚îú‚îÄ‚îÄ api/  # APIÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºåÂ¶ÇÊûúÈ°πÁõÆÊèê‰æõAPI</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ v1/</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ api.go</span><br><span class="line">‚îú‚îÄ‚îÄ web/  # WebÂ∫îÁî®Áõ∏ÂÖ≥ÁöÑÊñá‰ª∂ÔºåÂ¶ÇÊ®°ÊùøÂíåÈùôÊÄÅËµÑ‰∫ß</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ templates/</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ static/</span><br><span class="line">‚îú‚îÄ‚îÄ scripts/  # ÂêÑÁßçÂ∑•ÂÖ∑ËÑöÊú¨ÔºåÂ¶ÇÊï∞ÊçÆÂ∫ìËøÅÁßªËÑöÊú¨</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ migrate.go</span><br><span class="line">‚îú‚îÄ‚îÄ tests/  # ÂçïÂÖÉÊµãËØïÂíåÈõÜÊàêÊµãËØï</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ app_test.go</span><br><span class="line">‚îú‚îÄ‚îÄ docs/  # È°πÁõÆÊñáÊ°£</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ README.md</span><br><span class="line">‚îú‚îÄ‚îÄ go.mod  # GoÊ®°ÂùóÊñá‰ª∂</span><br><span class="line">‚îú‚îÄ‚îÄ go.sum</span><br><span class="line">‚îú‚îÄ‚îÄ .gitignore</span><br><span class="line">‚îî‚îÄ‚îÄ README.md</span><br></pre></td></tr></table></figure><h2 id="dependency"><a href="#dependency" class="headerlink" title="dependency"></a>dependency</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> get depends by specify branch</span></span><br><span class="line">go get github.com/jackblack369/minio@feat-gateway</span><br></pre></td></tr></table></figure><h1 id="Paraphrasing"><a href="#Paraphrasing" class="headerlink" title="Paraphrasing"></a>Paraphrasing</h1><ul><li><p>Use channels when passing ownership of data</p></li><li><p>Use mutexes for managing state</p></li><li><p>ÂêçÁß∞ÁöÑÈ¶ñÂ≠óÊØç‰∏∫Â§ßÂÜôÁöÑÁ®ãÂ∫èÂÆû‰ΩìÊâçÂèØ‰ª•Ë¢´ÂΩìÂâçÂåÖÂ§ñÁöÑ‰ª£Á†ÅÂºïÁî®ÔºåÂê¶ÂàôÂÆÉÂ∞±Âè™ËÉΩË¢´ÂΩìÂâçÂåÖÂÜÖÁöÑÂÖ∂‰ªñ‰ª£Á†ÅÂºïÁî®„ÄÇ</p></li><li><p>‰∏ÄÂØπ‰∏çÂåÖË£π‰ªª‰Ωï‰∏úË•øÁöÑËä±Êã¨Âè∑ÔºåÈô§‰∫ÜÂèØ‰ª•‰ª£Ë°®Á©∫ÁöÑ‰ª£Á†ÅÂùó‰πãÂ§ñÔºåËøòÂèØ‰ª•Áî®‰∫éË°®Á§∫‰∏çÂåÖÂê´‰ªª‰ΩïÂÜÖÂÆπÁöÑÊï∞ÊçÆÁªìÊûÑÔºàÊàñËÄÖËØ¥Êï∞ÊçÆÁ±ªÂûãÔºâ</p></li><li><p>ÂáΩÊï∞Á±ªÂûãÂ±û‰∫éÂºïÁî®Á±ªÂûãÔºåÂÆÉÁöÑÈõ∂ÂÄºÊòØ<code>nil</code>„ÄÇ</p></li><li><p>ÁªìÊûÑ‰ΩìÁ±ªÂûã‰∏≠ÁöÑ‰∏Ä‰∏™Â≠óÊÆµÁúã‰ΩúÊòØÂÆÉÁöÑ‰∏Ä‰∏™Â±ûÊÄßÊàñËÄÖ‰∏ÄÈ°πÊï∞ÊçÆÔºåÂÜçÊääÈö∂Â±û‰∫éÂÆÉÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÁúã‰ΩúÊòØÈôÑÂä†Âú®ÂÖ∂‰∏≠Êï∞ÊçÆ‰πã‰∏äÁöÑ‰∏Ä‰∏™ËÉΩÂäõÊàñËÄÖ‰∏ÄÈ°πÊìç‰Ωú„ÄÇÂ∞ÜÂ±ûÊÄßÂèäÂÖ∂ËÉΩÂäõÔºàÊàñËÄÖËØ¥Êï∞ÊçÆÂèäÂÖ∂Êìç‰ΩúÔºâÂ∞ÅË£ÖÂú®‰∏ÄËµ∑ÔºåÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºàobject-oriented programmingÔºâÁöÑ‰∏Ä‰∏™‰∏ªË¶ÅÂéüÂàô„ÄÇ</p></li></ul><h1 id="test"><a href="#test" class="headerlink" title="test"></a>test</h1><ul><li><code>go test -v</code></li><li><code>go test -cover</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊµãËØïÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊüê‰∏™ÊñπÊ≥ï</span></span><br><span class="line">go test -v /path/to/package -run ^FuncName$</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. go <span class="built_in">test</span> -v ./http -run ^TestRunning$  <span class="comment"># Ê≥®ÊÑè &quot;./&quot; Ëøô‰∏™ÊòØÂøÖÈ°ªÁöÑ</span></span></span><br></pre></td></tr></table></figure><h1 id="tool"><a href="#tool" class="headerlink" title="tool"></a>tool</h1><ul><li><p>errcheck</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errcheck .</span><br></pre></td></tr></table></figure></li><li><p>format</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gofmt -w yourfile.go</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>mod</p><p><code>go mod tidy</code> is used to clean up the module directory by removing any unnecessary files, such as: Unused dependencies, Duplicate entries, Empty directories</p><p><code>go mod vendor</code> is a part of Go‚Äôs vendor tooling, which allows you to manage dependencies in your project by creating a separate directory called <code>vendor</code>. This directory contains all the dependencies required for your project.</p><p><strong>Purpose</strong>: <code>go mod tidy</code> is used for cleaning up the module directory, while <code>go mod vendor</code> is used for managing dependencies in a separate <code>vendor</code> directory.</p><p><strong>Output</strong>: <code>go mod tidy</code> updates the <code>go.mod</code> file, while <code>go mod vendor</code> creates or updates the <code>vendor</code> directory.</p></li></ul><h1 id="A-vs-B"><a href="#A-vs-B" class="headerlink" title="A vs B"></a>A vs B</h1><ul><li>Golang‚Äôs goroutine VS Python‚Äôs coroutine</li></ul><table><thead><tr><th><strong>Aspect</strong></th><th><strong>Go (Goroutines)</strong></th><th><strong>Python (Coroutines)</strong></th></tr></thead><tbody><tr><td><strong>Concurrency Model</strong></td><td>Preemptive, managed by Go runtime (M:N threading)</td><td>Cooperative, event-loop-based (async/await)</td></tr><tr><td><strong>Execution Model</strong></td><td>True concurrency, can run in parallel on multiple cores</td><td>Single-threaded, asynchronous (mostly I/O-bound)</td></tr><tr><td><strong>Syntax</strong></td><td><code>go func()</code></td><td><code>async def</code> and <code>await</code></td></tr><tr><td><strong>Task Management</strong></td><td>Automatic, via Go runtime</td><td>Manual, via event loop (e.g., <code>asyncio</code>)</td></tr><tr><td><strong>Performance</strong></td><td>Efficient, ideal for both I/O-bound and CPU-bound tasks</td><td>Efficient for I/O-bound, not CPU-bound tasks</td></tr><tr><td><strong>Error Handling</strong></td><td>Requires manual management via channels or sync</td><td>Propagates through <code>await</code>/event loop</td></tr></tbody></table><p><strong>1. Scheduling:</strong></p><p><strong>Goroutines:</strong> In Go, a goroutine is a lightweight thread that runs concurrently with other goroutines in the same process. The scheduler of the operating system determines which goroutine to run next.</p><p> <strong>Coroutines:</strong> In Python, a coroutine is an asynchronous function that can suspend its execution at specific points and resume from there later. Coroutines are scheduled by the runtime environment (e.g., CPython) itself.</p><p><strong>2. Context switching:</strong></p><p> <strong>Goroutines:</strong> In Go, context switching between goroutines is relatively cheap because goroutines share the same memory space as their parent process.</p><p> <strong>Coroutines:</strong> In Python, context switching between coroutines can be more expensive because each coroutine has its own stack and local variables.</p><p><strong>3. Yielding control:</strong></p><p> <strong>Goroutines:</strong> Go‚Äôs goroutines do not have a concept of yielding control to another goroutine or task. Once a goroutine is scheduled, it runs until completion.</p><p> <strong>Coroutines:</strong> Python coroutines can yield control to other coroutines using the <code>yield</code> keyword, allowing them to suspend and resume their execution at specific points.</p><p><strong>4. Looping:</strong></p><p> <strong>Goroutines:</strong> Go‚Äôs goroutines do not have a loop mechanism like Python‚Äôs coroutines. Goroutines must be scheduled manually using <code>runtime.Gosched()</code> or other scheduling APIs.</p><p> <strong>Coroutines:</strong> Python coroutines can use loops, such as <code>for</code> loops, to iterate over data and switch between different coroutine implementations.</p><p><strong>5. Error handling:</strong></p><p> <strong>Goroutines:</strong> Go‚Äôs goroutines handle errors internally when a panic occurs. The parent process receives the error through the <code>main</code> function.</p><p> <strong>Coroutines:</strong> Python coroutines can also handle errors, but they typically use exceptions or try-except blocks to manage errors.</p><p><strong>6. Global variables:</strong></p><p> <strong>Goroutines:</strong> Go‚Äôs goroutines do not have access to global variables by default. They must be passed explicitly using channels or shared data structures.</p><p> <strong>Coroutines:</strong> Python coroutines can access global variables, but it‚Äôs generally recommended to avoid sharing mutable state between coroutines.</p><h1 id="ide"><a href="#ide" class="headerlink" title="ide"></a>ide</h1><h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><ul><li><p>enable debug</p><p><strong>First options</strong> is to fix it by running <code>&quot;Go: Install/Update Tools&quot;</code> command from the Command Palette (<em><strong>Linux/Windows</strong></em>: Ctrl+Shift+P, <em><strong>Mac</strong></em>: ‚áß+‚åò+P). Then, mark <code>dlv</code> &amp; <code>dlv-dap</code> from the menu, and hit <strong>ok</strong> to start install/update.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> GO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>code thought</title>
      <link href="/2024/07/25/code%20thought/"/>
      <url>/2024/07/25/code%20thought/</url>
      
        <content type="html"><![CDATA[<h2 id="TDD"><a href="#TDD" class="headerlink" title="TDD"></a>TDD</h2><p>TDD, or Test-Driven Development, is a software development process that involves writing automated tests before writing the actual code. In other words, you write the test first, and then you implement the code to make the test pass.</p><p>Here‚Äôs how it typically works:</p><ol><li><p><strong>Write a test</strong>: You write an automated test that covers a specific piece of functionality or behavior in your system.</p></li><li><p><strong>Run the test and see it fail</strong>: Since you haven‚Äôt implemented the code yet, the test will naturally fail.</p></li><li><p><strong>Write the code</strong>: You then implement the code to make the test pass. This is where you write the actual logic, algorithms, or whatever is needed to satisfy the requirements of the test.</p></li><li><p><strong>Run the test and see it pass</strong>: Now that you‚Äôve written the code, run the test again, and if everything is correct, the test should pass!</p></li><li><p><strong>Refactor the code (if needed)</strong>: If there are any issues with the code or if you can improve the design, you refactor the code to make it more maintainable, efficient, or easier to understand.</p></li></ol><p>The key benefits of TDD include:</p><ol><li><p><strong>Improved code quality</strong>: Writing tests before writing code ensures that your code is robust and meets the requirements.</p></li><li><p><strong>Reduced bugs</strong>: By testing each piece of functionality thoroughly, you can catch errors early on, reducing the overall number of bugs in your system.</p></li><li><p><strong>Faster development</strong>: TDD helps you focus on implementing only what‚Äôs necessary to pass the test, making your development process more efficient.</p></li><li><p><strong>Better design</strong>: The process of writing tests and then implementing code encourages good design principles, such as separation of concerns, modularity, and maintainability.</p></li></ol><p>TDD is often used in conjunction with other testing methodologies, like unit testing, integration testing, or acceptance testing, to ensure that your software system is thoroughly tested and reliable.</p><h1 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h1><ul><li><p><a href="http://wiki.c2.com/?MakeItWorkMakeItRightMakeItFast">Make it work, make it right, make it fast</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Where &#x27;work&#x27; is making the tests pass, &#x27;right&#x27; is refactoring the code, and &#x27;fast&#x27; is optimizing the code to make it, for example, run quickly. We can only &#x27;make it fast&#x27; once we&#x27;ve made it work and made it right. We were lucky that the code we were given was already demonstrated to be working, and didn&#x27;t need to be refactored. We should never try to &#x27;make it fast&#x27; before the other two steps have been performed because[Premature optimization is the root of all evil](http://wiki.c2.com/?PrematureOptimization)</span><br></pre></td></tr></table></figure></li><li><p><a href="https://en.wikipedia.org/wiki/If_it_ain't_broke,_don't_fix_it">If it ain‚Äôt broke, don‚Äôt fix it</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/KISS_principle">KISS principle</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">Don‚Äôt repeat yourself</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/Feature_creep">Feature creep</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/List_of_software_development_philosophies">List of software development philosophies</a> -</p></li><li><p><a href="https://en.wikipedia.org/wiki/Minimum_viable_product">Minimum viable product</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/MoSCoW_method">MoSCoW method</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/Overengineering">Overengineering</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/Worse_is_better">Worse is better</a> </p></li><li><p><a href="https://en.wikipedia.org/wiki/SOLID">S.O.L.I.D.</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Unix_philosophy">Unix philosophy</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thought </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jwt points</title>
      <link href="/2024/06/27/jwt/"/>
      <url>/2024/06/27/jwt/</url>
      
        <content type="html"><![CDATA[<p>JWT Áî±‰∏â‰∏™ÈÉ®ÂàÜÁªÑÊàêÔºåÁî® . ÂàÜÈöîÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJ1c2VyLWtleSIsImV4cCI6MTU2NDA1MDgxMX0.Us8zh_4VjJXF-TmR5f8cif8mBU7SuefPlpxhH0jbPVI</span><br></pre></td></tr></table></figure><p>‚Äã    1.    HeaderÔºàÂ§¥ÈÉ®ÔºâÔºöeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</p><p>‚Äã    2.    PayloadÔºàË¥üËΩΩÔºâÔºöeyJrZXkiOiJ1c2VyLWtleSIsImV4cCI6MTU2NDA1MDgxMX0</p><p>‚Äã    3.    SignatureÔºàÁ≠æÂêçÔºâÔºöUs8zh_4VjJXF-TmR5f8cif8mBU7SuefPlpxhH0jbPVI</p><ul><li><p><strong>ÂèØÁõ¥Êé•‰ΩøÁî® Base64 Ëß£Á†Å Header Âíå Payload</strong></p></li><li><p><strong>signatureÈ™åÁ≠æ</strong></p><p>‰ΩøÁî® HeaderÈáåÈù¢ÁöÑÁÆóÊ≥ïÈ™åËØÅÁ≠æÂêçÈúÄË¶ÅÁî®Âà∞‰∏éÁ≠æÂêçÊó∂Áõ∏ÂêåÁöÑÂØÜÈí•ÔºàÂÖ¨Èí•Ôºâ„ÄÇ‰ª•‰∏ãÊòØÈ™åËØÅÁ≠æÂêçÁöÑÁ§∫‰æã‰ª£Á†ÅÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">verify_signature</span>(<span class="params">header, payload, secret, signature</span>):</span></span><br><span class="line">    message = <span class="string">f&quot;<span class="subst">&#123;header&#125;</span>.<span class="subst">&#123;payload&#125;</span>&quot;</span></span><br><span class="line">    expected_signature = hmac.new(secret.encode(), message.encode(), hashlib.sha256).digest()</span><br><span class="line">    expected_signature_base64 = base64.urlsafe_b64encode(expected_signature).rstrip(<span class="string">b&#x27;=&#x27;</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> hmac.compare_digest(expected_signature_base64, signature)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Á§∫‰æãÂØÜÈí•ÔºàÊõøÊç¢‰∏∫ÂÆûÈôÖÁöÑÂØÜÈí•Ôºâ</span></span><br><span class="line">secret = <span class="string">&quot;your-256-bit-secret&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># È™åËØÅÁ≠æÂêç</span></span><br><span class="line">is_valid = verify_signature(header, payload, secret, signature)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Signature is valid: <span class="subst">&#123;is_valid&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> jwt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python pytest</title>
      <link href="/2024/05/20/python%20pytest/"/>
      <url>/2024/05/20/python%20pytest/</url>
      
        <content type="html"><![CDATA[<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><ul><li><p>Êü•ÁúãÊµãËØïËØ¶ÊÉÖ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -v</span><br></pre></td></tr></table></figure></li><li><p>ÊµãËØï‰ø°ÊÅØÊâìÂç∞</p><blockquote><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåpytest ‰ºöÊçïËé∑ÊâÄÊúâÁöÑËæìÂá∫„ÄÇËøôÊÑèÂë≥ÁùÄÂú®ÊµãËØïËøêË°åÊúüÈó¥Ôºå <code>print</code> ËØ≠Âè•ÁöÑËæìÂá∫‰∏ç‰ºöÊòæÁ§∫Âú®ÊéßÂà∂Âè∞‰∏ä„ÄÇ</p><p>Â¶ÇÊûúÊÉ≥ÁúãÂà∞ <code>print</code> ËØ≠Âè•ÁöÑËæìÂá∫ÔºåÈúÄË¶Å‰ΩøÁî® <code>-s</code> ÈÄâÈ°πÊù•ÂëäËØâ pytest ‰∏çË¶ÅÊçïËé∑ËæìÂá∫</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -s test_web_base.py</span><br></pre></td></tr></table></figure></li><li><p>ÊµãËØïÊåáÂÆöÊñπÊ≥ï</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest tests/unit_tests/document_loaders/test_web_base.py::Á±ªÂêç::ÊñπÊ≥ïÂêç</span><br></pre></td></tr></table></figure></li><li><p>ÊµãËØïË¢´Ê†áËÆ∞ÁöÑÊñπÊ≥ï</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pytest.mark.finished</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_func1</span>():</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -m finished tests/test-function/test_with_mark.py</span><br></pre></td></tr></table></figure></li><li><p>ÁîüÊàêÊµãËØïÊä•Âëä</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest --html=report.html</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>conda</title>
      <link href="/2024/03/14/conda/"/>
      <url>/2024/03/14/conda/</url>
      
        <content type="html"><![CDATA[<h1 id="install"><a href="#install" class="headerlink" title="install"></a>install</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> download binary</span></span><br><span class="line">mkdir -p ~/miniconda3</span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh</span><br><span class="line">bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3</span><br><span class="line">rm ~/miniconda3/miniconda.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active</span></span><br><span class="line">source ~/miniconda3/bin/activate</span><br><span class="line">conda init --all</span><br></pre></td></tr></table></figure><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><ul><li><p>Êü•ÁúãÁéØÂ¢É</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure></li><li><p>Êñ∞Âª∫ÁéØÂ¢É</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name your_env_name</span><br></pre></td></tr></table></figure><p>ÊåáÂÆöpythonÁâàÊú¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name xxx python=3.10</span><br></pre></td></tr></table></figure></li><li><p>ÊøÄÊ¥ªÁéØÂ¢É</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate xxx</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÁéØÂ¢É</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name xxx --all</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> conda </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>copilot</title>
      <link href="/2024/03/13/copilot/"/>
      <url>/2024/03/13/copilot/</url>
      
        <content type="html"><![CDATA[<h1 id="keywords"><a href="#keywords" class="headerlink" title="keywords"></a>keywords</h1><ul><li><p>ÊèêÁ§∫ÂÜÖÂÆπÂÜôÂÖ• ‚û°Ô∏è</p></li><li><p>‰∏ã‰∏Ä‰∏™ÊèêÁ§∫ <code>option + ]</code>Ôºå‰∏ä‰∏Ä‰∏™ÊèêÁ§∫ <code>option + [</code></p></li><li><p>Êé•Êî∂‰∏ÄË°å<code>command + Âè≥ÊñπÂêë</code> ÔºåÂ§öË°å <code>control/fn + command + Âè≥ÊñπÂêë</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> copilot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> assistant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GPU learn</title>
      <link href="/2024/03/08/GPU%20learn/"/>
      <url>/2024/03/08/GPU%20learn/</url>
      
        <content type="html"><![CDATA[<h1 id="ÂëΩ‰ª§"><a href="#ÂëΩ‰ª§" class="headerlink" title="ÂëΩ‰ª§"></a>ÂëΩ‰ª§</h1><ul><li><p>Êü•ÁúãÂç°ÁöÑÊï∞Èáè</p><p><code>nvidia-smi -L</code></p></li><li><p>Êü•ÁúãÊòæÂç°‰∏äËøêË°åÁöÑÁ®ãÂ∫èÔºå‰ª•ÂèäÊâÄÂç†ÂÜÖÂ≠òÊÉÖÂÜµ</p><p><code>nvidia-smi --query-compute-apps=pid,process_name,used_memory,gpu_uuid --format=csv</code></p></li><li><p>Êü•ÁúãÊòæÂç°ÊâÄÂâ©ÂÜÖÂ≠ò</p><p><code>nvidia-smi --query-gpu=memory.free --format=csv,noheader,nounits</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> GPU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python pkg</title>
      <link href="/2024/03/05/python%20pkg/"/>
      <url>/2024/03/05/python%20pkg/</url>
      
        <content type="html"><![CDATA[<h1 id="pydanic"><a href="#pydanic" class="headerlink" title="pydanic"></a>pydanic</h1><h2 id="model-validator"><a href="#model-validator" class="headerlink" title="model_validator"></a>model_validator</h2><blockquote><p><code>model_validator</code> ÊòØ Pydantic Â∫ìÊèê‰æõÁöÑ‰∏Ä‰∏™Ë£ÖÈ•∞Âô®ÔºåÁî®‰∫éÂÆö‰πâÊ®°ÂûãÈ™åËØÅÂô®ÂáΩÊï∞„ÄÇÊ®°ÂûãÈ™åËØÅÂô®ÂáΩÊï∞ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊñπÊ≥ïÔºåÁî®‰∫éÂú®ÂàõÂª∫Ê®°ÂûãÂÆû‰æãÊàñÊõ¥Êñ∞Ê®°ÂûãÂ±ûÊÄßÊó∂ÊâßË°åËá™ÂÆö‰πâÁöÑÈ™åËØÅÈÄªËæë„ÄÇ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@model_validator(<span class="params">mode=<span class="string">&quot;after&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_engine_and_run_func</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> self.search_engine <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        self.search_engine = SearchEngine.from_search_config(self.config.search, proxy=self.config.proxy)</span><br><span class="line">    <span class="keyword">return</span> self</span><br></pre></td></tr></table></figure><p>Êàñ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@model_validator(<span class="params">mode=<span class="string">&quot;before&quot;</span></span>)</span></span><br><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_google</span>(<span class="params">cls, values: <span class="built_in">dict</span></span>) -&gt; <span class="built_in">dict</span>:</span></span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">ÂÖ∂‰∏≠values ÊòØÂÆû‰æãÂåñÂØπË±°ÁöÑÊâÄÊúâÂèÇÊï∞</span><br></pre></td></tr></table></figure><h1 id="sqlmodel"><a href="#sqlmodel" class="headerlink" title="sqlmodel"></a>sqlmodel</h1><h2 id="Âçï‰∏™ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏"><a href="#Âçï‰∏™ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏" class="headerlink" title="Âçï‰∏™ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏"></a>Âçï‰∏™ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏</h2><ul><li>ÊñπÂºè‰∏Ä</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Â∞ÜÂÆû‰æãÂØπË±°ËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÔºåÊéíÈô§Êú™ËÆæÁΩÆÂÄºÁöÑÂ≠óÊÆµ</span></span><br><span class="line">entity_dict = entity.<span class="built_in">dict</span>(exclude_unset=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><blockquote><p>‰ΩøÁî® Pydantic Ê®°ÂûãÂØπË±°ÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÁî®‰∫éÂ∞ÜÊ®°ÂûãÂØπË±°ËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÂΩ¢Âºè„ÄÇ<code>exclude_unset=True</code> ÂèÇÊï∞ÊòØÁî®Êù•ÊéßÂà∂ÊòØÂê¶ÊéíÈô§Êú™ËÆæÁΩÆÁöÑÂ±ûÊÄßÂ≠óÊÆµ„ÄÇÂΩìËÆæÁΩÆ‰∏∫ <code>True</code> Êó∂ÔºåÂ∞ÜÊéíÈô§ÈÇ£‰∫õÊú™ËÆæÁΩÆÂÄºÁöÑÂ≠óÊÆµÔºåÂç≥Âè™ÂåÖÂê´Â∑≤ÁªèËÆæÁΩÆÂÄºÁöÑÂ≠óÊÆµ„ÄÇ</p></blockquote><ul><li><p>ÊñπÂºè‰∫åÔºö</p><p>ÈÅçÂéÜÂ≠óÂÖ∏ÔºàÂØπÊ≤°ÊúâËÆæÁΩÆÁöÑÂ≠óÊÆµËøõË°åÈªòËÆ§ÂÄºËÆæÁΩÆÔºåËÆæÁΩÆÊéíÊü•ÊüêÂ≠óÊÆµÊîæÂÖ•Â≠óÂÖ∏Ôºâ</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> user_group_data.<span class="built_in">dict</span>(exclude_unset=<span class="literal">True</span>, exclude=&#123;<span class="string">&quot;team_roles&quot;</span>&#125;).items():</span><br><span class="line"><span class="keyword">if</span> value <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"><span class="built_in">setattr</span>(user_group, key, value)</span><br></pre></td></tr></table></figure><ul><li>ÊñπÂºè‰∏â</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resourceCreate: ResourceCreate</span><br><span class="line">...</span><br><span class="line">resource = Resource(**resourceCreate.<span class="built_in">dict</span>())</span><br></pre></td></tr></table></figure><h2 id="Âçï‰∏™ÂÆû‰Ωì‰∏éÂÆû‰ΩìËΩ¨Êç¢"><a href="#Âçï‰∏™ÂÆû‰Ωì‰∏éÂÆû‰ΩìËΩ¨Êç¢" class="headerlink" title="Âçï‰∏™ÂÆû‰Ωì‰∏éÂÆû‰ΩìËΩ¨Êç¢"></a>Âçï‰∏™ÂÆû‰Ωì‰∏éÂÆû‰ΩìËΩ¨Êç¢</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">role_update: RoleUpdate</span><br><span class="line">...</span><br><span class="line">role = Role.from_orm(role_update)</span><br></pre></td></tr></table></figure><h2 id="ÂàóË°®ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÂàóË°®"><a href="#ÂàóË°®ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÂàóË°®" class="headerlink" title="ÂàóË°®ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÂàóË°®"></a>ÂàóË°®ÂÆû‰ΩìËΩ¨Êç¢‰∏∫Â≠óÂÖ∏ÂàóË°®</h2><ul><li>ÊñπÂºè‰∏Ä <strong>session.query</strong> </li></ul><blockquote><p>Âú®Áõ¥Êé•ËøîÂõû Êü•ËØ¢ÁªìÊûÑÁöÑÊó∂ÂÄôÔºå‰ºòÂÖà‰ΩøÁî®ÔºåÂèØ‰ª•Áõ¥Êé•ÊääÁªìÊûúËΩ¨‰∏∫jsonÔºàe.g. res_json = jsonable_encoder(res_data)Ôºâ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db_rel_usergroup_roles = (session.query(RelUserGroupUser.user_id, Role.<span class="built_in">id</span>, Role.name, Role.nick_name, Role.label)</span><br><span class="line">                             .join(RelUsergroupRole, RelUserGroupUser.usergroup_id == RelUsergroupRole.usergroup_id)</span><br><span class="line">                             .join(Role, RelUsergroupRole.role_id == Role.<span class="built_in">id</span>)</span><br><span class="line">                             .<span class="built_in">filter</span>(RelUserGroupUser.user_id == user_id)</span><br><span class="line">                             .<span class="built_in">all</span>())</span><br><span class="line">        rel_usergroup_roles_info = []</span><br><span class="line">        <span class="keyword">for</span> rel_usergroup_role <span class="keyword">in</span> db_rel_usergroup_roles:</span><br><span class="line">            rel_usergroup_roles_info.append(Role(</span><br><span class="line">                <span class="built_in">id</span>=rel_usergroup_role[<span class="number">1</span>],</span><br><span class="line">                name=rel_usergroup_role[<span class="number">2</span>],</span><br><span class="line">                nick_name=rel_usergroup_role[<span class="number">3</span>],</span><br><span class="line">                label=rel_usergroup_role[<span class="number">4</span>]</span><br><span class="line">            ))</span><br><span class="line">        <span class="keyword">return</span> rel_usergroup_roles_info</span><br></pre></td></tr></table></figure><ul><li>ÊñπÂºè‰∫å <strong>session.exec</strong></li></ul><blockquote><p>Âú®ÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜÊü•ËØ¢ÁöÑ‰∏çÂêåÂ≠óÊÆµ‰ø°ÊÅØÊó∂Ôºå‰ºòÂÖà‰ΩøÁî®Ê≠§ÊñπÊ≥ï</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rel_usergroup_user_list = session.<span class="built_in">exec</span>(</span><br><span class="line">            select(RelUserGroupUser.usergroup_id, RelUserGroupUser.user_id, UserGroup.name, UserGroup.label, UserGroup.remark)</span><br><span class="line">            .where(RelUserGroupUser.user_id == user_id)</span><br><span class="line">            .join(UserGroup, UserGroup.<span class="built_in">id</span> == RelUserGroupUser.usergroup_id)</span><br><span class="line">        ).<span class="built_in">all</span>()</span><br><span class="line">        converted_list = []</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> rel_usergroup_user_list:</span><br><span class="line">            converted_obj = RelUserGroupUserRead(</span><br><span class="line">                user_id=row.user_id,</span><br><span class="line">                usergroup_id=row.usergroup_id,</span><br><span class="line">                usergroup_name=row.name,</span><br><span class="line">                usergroup_label=row.label</span><br><span class="line">            )</span><br><span class="line">            converted_list.append(converted_obj)</span><br><span class="line">        <span class="keyword">return</span> converted_list</span><br></pre></td></tr></table></figure><ul><li></li></ul><h2 id="Êü•ËØ¢ËøáÊª§"><a href="#Êü•ËØ¢ËøáÊª§" class="headerlink" title="Êü•ËØ¢ËøáÊª§"></a>Êü•ËØ¢ËøáÊª§</h2><ul><li><p>Á≠õÈÄâÊù°‰ª∂‰∏∫ÊàñÊù°‰ª∂</p></li><li><p>```python<br>resource_list = session.query(Resource).filter(or_(Resource.type == ‚Äúmenu‚Äù, Resource.type == ‚Äúelement‚Äù)).all()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## updateÊìç‰Ωú</span><br><span class="line"></span><br><span class="line">Â¶ÇÊûúÊèêÂâçÊúâ `session.get(entity, id)`ÔºåÈÇ£ÂêéÁª≠Âú®‰øÆÊîπÁõ∏ÂÖ≥Ë°®Â±ûÊÄß`enitty.colx = xxx` ‰πãÂêéÔºåÈúÄË¶ÅÁ¥ßÊé•`session.add(entity)`</span><br><span class="line"></span><br><span class="line">### sessionÁöÑËé∑Âèñ</span><br><span class="line"></span><br><span class="line">Âú®‰ΩøÁî® SQLModel ËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰ΩúÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô® `with Session(engine) as session` Êù•ÂàõÂª∫Âπ∂ÁÆ°ÁêÜÊï∞ÊçÆÂ∫ì‰ºöËØù„ÄÇËøôÊ†∑ÂèØ‰ª•Á°Æ‰øù‰ºöËØùÂú®‰ΩøÁî®ÂÆåÊØïÂêé‰ºöË¢´Ê≠£Á°ÆÂÖ≥Èó≠ÔºåÈáäÊîæÊï∞ÊçÆÂ∫ìËøûÊé•ËµÑÊ∫ê„ÄÇ</span><br><span class="line"></span><br><span class="line">Âú®‰æãÂ¶Ç `async def delete_user(*, user_id: int, session: Session = Depends(get_session)):`‰∏≠Ôºå`session` ÂèÇÊï∞ÊòØÈÄöËøá `Depends(get_session)` ËøõË°å‰æùËµñÊ≥®ÂÖ•ÁöÑÔºåFastAPI Ê°ÜÊû∂‰ºöË¥üË¥£Âú®ËØ∑Ê±ÇÂ§ÑÁêÜÂáΩÊï∞ÊâßË°åÂÆåÊØïÂêéËá™Âä®ÂÖ≥Èó≠‰ºöËØù„ÄÇÊâÄ‰ª•Âú®ËØ∑Ê±ÇÈÄªËæë‰∏≠Ôºå‰Ω†‰∏çÈúÄË¶ÅÊâãÂä®ÂÖ≥Èó≠‰ºöËØùËøûÊé•„ÄÇ</span><br><span class="line"></span><br><span class="line">## in_ËØ≠Ê≥ï‰ΩøÁî®</span><br><span class="line"></span><br><span class="line">## session.exec vs session.query</span><br><span class="line"></span><br><span class="line">Âú®SQLAlchemy‰∏≠Ôºå`session.query`Âíå`session.exec`ÈÉΩÂèØ‰ª•Áî®Êù•ÊâßË°åSQLÊü•ËØ¢„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰ª¨‰πãÈó¥Êúâ‰∏Ä‰∫õÂÖ≥ÈîÆÁöÑÂå∫Âà´„ÄÇ</span><br><span class="line"></span><br><span class="line">`session.query`ÊòØSQLAlchemy ORMÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆÉËøîÂõûÁöÑÊòØÊ®°ÂûãÂØπË±°„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•‰ΩøÁî®PythonÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÊù•ËÆøÈóÆÂíåÊìç‰ΩúËøîÂõûÁöÑÊï∞ÊçÆ„ÄÇËøôÂØπ‰∫éÁºñÂÜôÈù¢ÂêëÂØπË±°ÁöÑ‰ª£Á†ÅÈùûÂ∏∏ÊúâÁî®„ÄÇ</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">users = session.query(User).filter(User.name == &#x27;John&#x27;).all()</span><br><span class="line">for user in users:</span><br><span class="line">    print(user.id, user.name)</span><br></pre></td></tr></table></figure></li></ul><p>Âè¶‰∏ÄÊñπÈù¢Ôºå<code>session.exec</code>ÊòØSQLAlchemy CoreÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆÉËøîÂõûÁöÑÊòØÂéüÂßãÁöÑSQLÁªìÊûú„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÈúÄË¶Å‰ΩøÁî®ÂàóÂêç‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤Êù•ËÆøÈóÆËøîÂõûÁöÑÊï∞ÊçÆ„ÄÇËøôÂØπ‰∫éÊâßË°åÂ§çÊùÇÁöÑSQLÊü•ËØ¢ÊàñËÄÖÈúÄË¶ÅÊõ¥Êé•ËøëSQLÁöÑÊÄßËÉΩ‰ºòÂåñÂèØËÉΩÊõ¥ÊúâÁî®„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result = session.<span class="built_in">exec</span>(select(User).where(User.name == <span class="string">&#x27;John&#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> result:</span><br><span class="line">    <span class="built_in">print</span>(row[<span class="string">&#x27;id&#x27;</span>], row[<span class="string">&#x27;name&#x27;</span>])</span><br></pre></td></tr></table></figure><p>ÊÄªÁöÑÊù•ËØ¥:</p><p>Â¶ÇÊûúÊ≠£Âú®ÁºñÂÜôÈù¢ÂêëÂØπË±°ÁöÑ‰ª£Á†ÅÔºåÊàñËÄÖÊü•ËØ¢Áõ∏ÂØπÁÆÄÂçïÔºåÈÇ£‰πà<code>session.query</code>ÂèØËÉΩÊòØÊõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇ</p><p>Â¶ÇÊûúÈúÄË¶ÅÊâßË°åÂ§çÊùÇÁöÑSQLÊü•ËØ¢ÔºåÊàñËÄÖÈúÄË¶ÅÊõ¥Êé•ËøëSQLÁöÑÊÄßËÉΩ‰ºòÂåñÔºåÈÇ£‰πà<code>session.exec</code>ÂèØËÉΩÊòØÊõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇ</p><h1 id="auth"><a href="#auth" class="headerlink" title="auth"></a>auth</h1><blockquote><p>Security is always excessive until it‚Äôs not enough.</p></blockquote><h2 id="fastapi-jwt-auth"><a href="#fastapi-jwt-auth" class="headerlink" title="fastapi jwt auth"></a>fastapi jwt auth</h2><p>Âú® FastAPI JWT Auth ‰∏≠ÔºåRefresh TokenÔºàÂà∑Êñ∞‰ª§ÁâåÔºâÂíå Access TokenÔºàËÆøÈóÆ‰ª§ÁâåÔºâÊòØ‰∏§Áßç‰∏çÂêåÁöÑ‰ª§ÁâåÔºåÁî®‰∫éÂÆûÁé∞ËÆ§ËØÅÂíåÊéàÊùÉÊú∫Âà∂„ÄÇ</p><ol><li>Access TokenÔºàËÆøÈóÆ‰ª§ÁâåÔºâÔºöAccess Token ÊòØ‰∏Ä‰∏™Áü≠ÊúüÁöÑ‰ª§ÁâåÔºåÁî®‰∫éÈ™åËØÅÁî®Êà∑ÁöÑË∫´‰ªΩÂπ∂ÊéàÊùÉÁî®Êà∑ËÆøÈóÆÂèó‰øùÊä§ÁöÑËµÑÊ∫ê„ÄÇAccess Token ÊòØÈÄöËøáÁî®Êà∑Êèê‰æõÁöÑÂá≠ËØÅÔºàÂ¶ÇÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºâËøõË°åË∫´‰ªΩÈ™åËØÅÂêéÁîüÊàêÁöÑÔºåÈÄöÂ∏∏ÂÖ∑ÊúâËæÉÁü≠ÁöÑÊúâÊïàÊúüÔºà‰æãÂ¶ÇÂá†ÂàÜÈíüÊàñÂá†Â∞èÊó∂Ôºâ„ÄÇÂÆ¢Êà∑Á´ØÂú®ÊØèÊ¨°ËØ∑Ê±ÇÂèó‰øùÊä§ÁöÑËµÑÊ∫êÊó∂ÔºåÈúÄË¶ÅÂú®ËØ∑Ê±ÇÁöÑÂ§¥ÈÉ®ÊàñËØ∑Ê±ÇÂèÇÊï∞‰∏≠Êê∫Â∏¶ Access TokenÔºå‰ª•ËØÅÊòéÂÖ∂ÊúâÊùÉËÆøÈóÆËØ•ËµÑÊ∫ê„ÄÇ</li><li>Refresh TokenÔºàÂà∑Êñ∞‰ª§ÁâåÔºâÔºöRefresh Token ÊòØ‰∏Ä‰∏™ÈïøÊúüÊúâÊïàÁöÑ‰ª§ÁâåÔºåÁî®‰∫éÂú® Access Token ËøáÊúüÂêéÈáçÊñ∞Ëé∑ÂèñÊñ∞ÁöÑ Access Token„ÄÇÂΩì Access Token ËøáÊúüÊó∂ÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî® Refresh Token ÂêëÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±ÇÊù•Ëé∑ÂèñÊñ∞ÁöÑ Access TokenÔºåËÄåÊó†ÈúÄÈáçÊñ∞Êèê‰æõÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÁ≠âÂá≠ËØÅ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåRefresh Token ÁöÑÊúâÊïàÊúüË¶ÅÊØî Access Token Êõ¥Èïø„ÄÇ</li></ol><p>‰ΩøÁî® Refresh Token ÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊòØÂ¢ûÂº∫ÂÆâÂÖ®ÊÄßÂíåÂáèÂ∞ëÈ¢ëÁπÅÁöÑË∫´‰ªΩÈ™åËØÅÊìç‰Ωú„ÄÇÈÄöËøáÂ∞Ü Access Token ÁöÑÊúâÊïàÊúüËÆæÁΩÆËæÉÁü≠ÔºåÂèØ‰ª•Èôç‰Ωé‰ª§ÁâåÊ≥ÑÈú≤ÁöÑÈ£éÈô©„ÄÇÂΩì Access Token ËøáÊúüÊó∂Ôºå‰ΩøÁî® Refresh Token Ëé∑ÂèñÊñ∞ÁöÑ Access TokenÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ëÈ¢ëÁπÅÂú∞Ë¶ÅÊ±ÇÁî®Êà∑ÈáçÊñ∞Êèê‰æõÂá≠ËØÅÁöÑÊÉÖÂÜµ„ÄÇ</p><p>‰∏ÄËà¨ÁöÑÊµÅÁ®ãÊòØÔºåÂÆ¢Êà∑Á´ØÂú®ËøõË°åË∫´‰ªΩÈ™åËØÅÂêé‰ºöÊî∂Âà∞‰∏Ä‰∏™ Access Token Âíå‰∏Ä‰∏™ Refresh Token„ÄÇÂÆ¢Êà∑Á´Ø‰ΩøÁî® Access Token Êù•ËÆøÈóÆÂèó‰øùÊä§ÁöÑËµÑÊ∫êÔºåÂΩì Access Token ËøáÊúüÊó∂ÔºåÂÆ¢Êà∑Á´Ø‰ΩøÁî® Refresh Token ÂêëÊúçÂä°Âô®ËØ∑Ê±ÇÊñ∞ÁöÑ Access Token„ÄÇ</p><p>FastAPI JWT Auth Êèê‰æõ‰∫ÜÁõ∏Â∫îÁöÑÂäüËÉΩÂíåË£ÖÈ•∞Âô®Êù•Â§ÑÁêÜ Access Token Âíå Refresh Token ÁöÑÁîüÊàê„ÄÅÈ™åËØÅÂíåÂà∑Êñ∞Á≠âÊìç‰ΩúÔºå‰ª•Êñπ‰æøÂÆûÁé∞ JWT ËÆ§ËØÅÂíåÊéàÊùÉ„ÄÇ</p><p>refresh tokens <strong>cannot access</strong> an endpoint that is protected with <strong>jwt_required()</strong>, <strong>jwt_optional()</strong>, and <strong>fresh_jwt_required()</strong> </p><p>access tokens <strong>cannot access</strong> an endpoint that is protected with <strong>jwt_refresh_token_required()</strong>.</p><ul><li>Refresh Tokens</li></ul><p>These are long-lived tokens which can be used to create a new access tokens once an old access token has expired. </p><h1 id="TBD"><a href="#TBD" class="headerlink" title="TBD"></a>TBD</h1><ul><li>fire</li><li>networkx</li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pkg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>llm agent</title>
      <link href="/2024/01/24/llm%20agent/"/>
      <url>/2024/01/24/llm%20agent/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Agent = Large Language Model (LLM) + Observation + Thought + Action + Memory</p><p>MultiAgent = Agents + Environment + Standard Operating Procedure (SOP) + Communication + Economy</p><p>ReAct<a href="https://learnprompting.org/zh-Hans/docs/advanced_applications/react#fn-1">1</a>(reason, act) ÊòØ‰∏ÄÁßç‰ΩøÁî®Ëá™ÁÑ∂ËØ≠Ë®ÄÊé®ÁêÜËß£ÂÜ≥Â§çÊùÇ‰ªªÂä°ÁöÑËØ≠Ë®ÄÊ®°ÂûãËåÉ‰æãÔºåReActÊó®Âú®Áî®‰∫éÂÖÅËÆ∏LLMÊâßË°åÊüê‰∫õÊìç‰ΩúÁöÑ‰ªªÂä°</p></blockquote><h1 id="AutoGPT"><a href="#AutoGPT" class="headerlink" title="AutoGPT"></a>AutoGPT</h1><p><img src="/images/llm/How-Does-AutoGPT-Work.webp"></p><h2 id="env"><a href="#env" class="headerlink" title="env"></a>env</h2><ul><li><code>poetry shell</code> &amp; <code>poetry install</code></li><li><code>autogpts/autogpt/.env</code></li></ul><h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><h3 id="CLI-mode"><a href="#CLI-mode" class="headerlink" title="CLI mode"></a>CLI mode</h3><ul><li><p><code>autogpt.sh run</code></p><blockquote><p>This mode allows running a single agent, and saves the agent‚Äôs state when terminated. This means you can <em>resume</em> agents at a later time.</p></blockquote></li><li><p><code>autogpt.sh run --speak</code></p></li></ul><h2 id="Agent-Protocol-mode"><a href="#Agent-Protocol-mode" class="headerlink" title="Agent Protocol mode"></a>Agent Protocol mode</h2><ul><li><p><code>autogpt.sh server</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">1. Enter the task that you want AutoGPT to execute, with as much detail as possible:</span><br><span class="line"></span><br><span class="line">2. 2024-03-05 18:19:06,466 INFO  HTTP Request: POST https://openkey.cloud/v1/chat/completions &quot;HTTP/1.1 200 OK&quot;</span><br><span class="line">2024-03-05 18:19:06,470 INFO  Current AI Settings: </span><br><span class="line">2024-03-05 18:19:06,470 INFO  -------------------: </span><br><span class="line">2024-03-05 18:19:06,470 INFO  Name : CodeHelperGPT</span><br><span class="line">2024-03-05 18:19:06,470 INFO  Role : an intelligent programming assistant designed to help coders by offering coding advice, debugging support, and explaining concepts in an accessible manner.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  Constraints: </span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Exclusively use the commands listed below.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - You can only act proactively, and are unable to start background jobs or set up webhooks for yourself. Take this into account when planning your actions.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - You are unable to interact with physical objects. If this is absolutely necessary to fulfill a task or objective or to complete a step, you must ask the user to do it for you. If the user refuses this, and there is no other way to achieve your goals, you must terminate to avoid wasting time and energy.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Do not provide solutions that encourage or enable plagiarism.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Maintain a neutral stance and do not promote any specific programming language over others without considering the user&#x27;s preferences and project requirements.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Ensure that all shared code snippets and solutions are tested and functional to avoid spreading incorrect information.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Avoid engaging in activities or providing advice that violates copyright laws or software licenses.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  Resources: </span><br><span class="line">2024-03-05 18:19:06,471 INFO  - Internet access for searches and information gathering.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - The ability to read and write files.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  - You are a Large Language Model, trained on millions of pages of text, including a lot of factual knowledge. Make use of this factual knowledge to avoid unnecessary gathering of information.</span><br><span class="line">2024-03-05 18:19:06,471 INFO  Best practices: </span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Continuously review and analyze your actions to ensure you are performing to the best of your abilities.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Constructively self-criticize your big-picture behavior constantly.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Reflect on past decisions and strategies to refine your approach.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Every command has a cost, so be smart and efficient. Aim to complete tasks in the least number of steps.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Only make use of your information gathering abilities to find information that you don&#x27;t yet have knowledge of.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Consistently stay updated with the latest programming trends, algorithms, and best practices to provide the most relevant and efficient coding solutions.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Actively engage in problem-solving by asking clarifying questions when needed and offering multiple solutions when applicable, to foster a collaborative coding environment.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Translate complex programming concepts into easily understandable explanations, aiming for clarity and accessibility for programmers of all skill levels.</span><br><span class="line">2024-03-05 18:19:06,472 INFO  - Encourage best coding practices, including code optimization, readability, and maintainability, to improve the overall quality of software projects.</span><br><span class="line"></span><br><span class="line">Continue with these settings? [Y/n]</span><br><span class="line"></span><br><span class="line">3. Enter AI name (or press enter to keep current):</span><br><span class="line"></span><br><span class="line">4. Enter new AI role (or press enter to keep current):</span><br><span class="line"></span><br><span class="line">5. 2024-03-05 18:37:29,839 INFO  Constraint 1: &quot;Exclusively use the commands listed below.&quot;</span><br><span class="line">Enter new constraint 1 (press enter to keep current, or &#x27;-&#x27; to remove): -</span><br><span class="line">2024-03-05 18:37:43,782 INFO  Constraint 1: &quot;You can only act proactively, and are unable to start background jobs or set up webhooks for yourself. Take this into account when planning your actions.&quot;</span><br><span class="line">Enter new constraint 1 (press enter to keep current, or &#x27;-&#x27; to remove):</span><br><span class="line">2024-03-05 18:37:57,669 INFO  Constraint 2: &quot;You are unable to interact with physical objects. If this is absolutely necessary to fulfill a task or objective or to complete a step, you must ask the user to do it for you. If the user refuses this, and there is no other way to achieve your goals, you must terminate to avoid wasting time and energy.&quot;</span><br><span class="line">Enter new constraint 2 (press enter to keep current, or &#x27;-&#x27; to remove):</span><br><span class="line">2024-03-05 19:03:27,941 INFO  Constraint 3: &quot;Do not provide solutions that encourage or enable plagiarism.&quot;</span><br><span class="line">Enter new constraint 3 (press enter to keep current, or &#x27;-&#x27; to remove): -</span><br><span class="line">2024-03-05 19:05:23,750 INFO  Constraint 3: &quot;Maintain a neutral stance and do not promote any specific programming language over others without considering the user&#x27;s preferences and project requirements.&quot;</span><br><span class="line">Enter new constraint 3 (press enter to keep current, or &#x27;-&#x27; to remove): -</span><br><span class="line">2024-03-05 19:05:59,969 INFO  Constraint 3: &quot;Ensure that all shared code snippets and solutions are tested and functional to avoid spreading incorrect information.&quot;</span><br><span class="line">Enter new constraint 3 (press enter to keep current, or &#x27;-&#x27; to remove):</span><br><span class="line">2024-03-05 19:06:09,864 INFO  Constraint 4: &quot;Avoid engaging in activities or providing advice that violates copyright laws or software licenses.&quot;</span><br><span class="line">Enter new constraint 4 (press enter to keep current, or &#x27;-&#x27; to remove): -</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="Agent-State"><a href="#Agent-State" class="headerlink" title="Agent State"></a>Agent State</h2><p><code>data/agents</code></p><ul><li><p>Resume your agent at a later time.</p></li><li><p>Create ‚Äúcheckpoints‚Äù for your agent so you can always go back to specific points in its history.</p></li><li><p>Share your agent!</p></li></ul><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p><code>plugins_config.yaml</code></p><hr><p><strong>reference</strong></p><ul><li><a href="https://www.ionio.ai/blog/what-is-llm-agent-ultimate-guide-to-llm-agent-with-technical-breakdown">https://www.ionio.ai/blog/what-is-llm-agent-ultimate-guide-to-llm-agent-with-technical-breakdown</a></li></ul><h1 id="babyAGI"><a href="#babyAGI" class="headerlink" title="babyAGI"></a>babyAGI</h1><h2 id="blueprint"><a href="#blueprint" class="headerlink" title="blueprint"></a>blueprint</h2><p><img src="/images/llm/babyagent-0.png"></p><p><img src="/images/llm/babyagent-1.jpeg"></p><p><img src="/images/llm/babyagent-2.jpeg"></p><h1 id="fastGPT"><a href="#fastGPT" class="headerlink" title="fastGPT"></a>fastGPT</h1><h2 id="skill"><a href="#skill" class="headerlink" title="skill"></a>skill</h2><ul><li><p>È°πÁõÆÊäÄÊúØÊ†àÔºöNextJs + TS + ChakraUI + Mongo + Postgres (Vector Êèí‰ª∂)</p></li><li><p>ÂêéÁ´ØÁî® Typescript ÂÜôÁöÑ</p></li></ul><h1 id="metaGPT"><a href="#metaGPT" class="headerlink" title="metaGPT"></a>metaGPT</h1><p><img src="/images/llm/agent_run_flowchart.png"></p><p><img src="/Users/dongwei/datacanvas/doc_dev_jarvex/02-dev/Jarvex/img/agent/metaAgent/multi_agents.png"></p><p>![](/images/llm/metaGPT overview.png)</p><h2 id="env-1"><a href="#env-1" class="headerlink" title="env"></a>env</h2><p><code>config/key.yaml</code></p><ul><li><p>default </p><p><code>config2.py</code>ÁªìÂêà<code>metagpt/configs/*</code></p></li></ul><h2 id="setup-py"><a href="#setup-py" class="headerlink" title="setup.py"></a>setup.py</h2><p><code>pip install -e .</code></p><ul><li><p>ÂÆâË£Ö‰æùËµñÈ°π</p><p><code>pip install -e &#39;.[search-ddg]&#39;</code> Êàñ <code>pip install metagpt[search-ddg]</code></p></li></ul><h2 id="agent-example"><a href="#agent-example" class="headerlink" title="agent example"></a>agent example</h2><h3 id="research"><a href="#research" class="headerlink" title="research"></a>research</h3><ul><li><p>fire</p><p><code>python -m metagpt.roles.researcher &quot;dataiku vs. datarobot&quot;</code></p></li></ul><h3 id="multiple"><a href="#multiple" class="headerlink" title="multiple"></a>multiple</h3><h3 id="result"><a href="#result" class="headerlink" title="result"></a>result</h3><p><code>data</code>ÁõÆÂΩï</p>]]></content>
      
      
      <categories>
          
          <category> llm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> agent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>raycast</title>
      <link href="/2024/01/22/raycast/"/>
      <url>/2024/01/22/raycast/</url>
      
        <content type="html"><![CDATA[<h2 id="extension"><a href="#extension" class="headerlink" title="extension"></a>extension</h2><h2 id="cake"><a href="#cake" class="headerlink" title="cake"></a>cake</h2><ul><li><p>Â∫ÜÁ•ùÂΩ©Á∫∏</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confetti</span><br></pre></td></tr></table></figure></li><li><p>ÂºπË∑≥Á™óÂè£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toggle Bounce Animation</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> raycast </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>keyboard</title>
      <link href="/2024/01/19/keyboards/"/>
      <url>/2024/01/19/keyboards/</url>
      
        <content type="html"><![CDATA[<h1 id="niz-plum"><a href="#niz-plum" class="headerlink" title="niz plum"></a>niz plum</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ÂØπÁÖß</span><br><span class="line">ctrl -&gt; control</span><br><span class="line">win/lock -&gt; option</span><br><span class="line">alt -&gt; command</span><br></pre></td></tr></table></figure><h2 id="Â∑¶-Fn"><a href="#Â∑¶-Fn" class="headerlink" title="Â∑¶ Fn"></a>Â∑¶ Fn</h2><ul><li><p>Â∑¶Fn + num</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Fn + 1 = Ë∞É‰Ωé‰∫ÆÂ∫¶</span><br><span class="line">Fn + 2 = Ë∞ÉÈ´ò‰∫ÆÂ∫¶</span><br><span class="line">Fn + 3 = Ë∞ÉÂá∫ÊâÄÊúâÂ∫îÁî®Á™óÂè£</span><br><span class="line">Fn + 4 = spotlight</span><br><span class="line">Fn + 5 = voice</span><br><span class="line">Fn + 6 = F6</span><br><span class="line">Fn + 7 = Êí≠ÊîæÂêéÈÄÄ</span><br><span class="line">Fn + 8 = Êí≠ÊîæÊöÇÂÅú/ÊÅ¢Â§ç</span><br><span class="line">Fn + 9 = Êí≠ÊîæÂâçËøõ</span><br><span class="line">Fn + 10 = ÈùôÈü≥</span><br><span class="line">Fn + 11 = Èü≥ÈáèÂáèÂ∞è</span><br><span class="line">Fn + 12 = Èü≥ÈáèÂ¢ûÂ§ß</span><br></pre></td></tr></table></figure></li></ul><h2 id="Âè≥-Fn"><a href="#Âè≥-Fn" class="headerlink" title="Âè≥ Fn"></a>Âè≥ Fn</h2><ul><li><p>ÈîÅÂÆöÈîÆÁõò</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Âè≥Fn + Esc</span><br></pre></td></tr></table></figure></li><li><p>ÁîµÊ∫ê‰∏éËìùÁâôÂàáÊç¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Âè≥Fn + F11ÈîÆ</span><br></pre></td></tr></table></figure></li></ul><h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><ul><li><p>Â±èÂπïÁßªÂä®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl + win(option)</span><br></pre></td></tr></table></figure></li><li><p>win / alt ÊåâÈîÆÂàáÊç¢ ÔºàÂåπÈÖçwin/macÁ≥ªÁªüÔºâ</p><p>```<br>Fn + Alt ‰∏âÁßí</p></li></ul><hr><ul><li><p>reference</p><p><a href="https://blog.csdn.net/qq_43528451/article/details/113357550">https://blog.csdn.net/qq_43528451/article/details/113357550</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> keyboard </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openai learn</title>
      <link href="/2024/01/19/openai%20learn/"/>
      <url>/2024/01/19/openai%20learn/</url>
      
        <content type="html"><![CDATA[<h1 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h1><h1 id="request"><a href="#request" class="headerlink" title="request"></a>request</h1><h3 id="conversion"><a href="#conversion" class="headerlink" title="conversion"></a>conversion</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl POST https://chat.openai.com/backend-api/conversation</span><br></pre></td></tr></table></figure></li><li><p>payload</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;action&quot;</span>: <span class="string">&quot;next&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;messages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;aaa25811-d62c-4f23-963a-77c6eb90b899&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;content_type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;parts&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;‰Ω†ÊòØÂ¶Ç‰ΩïÂ∏¶‰∏ä‰∏ä‰∏ãÊñáËøõË°åÈóÆÁ≠îÁöÑÔºåÁî®python‰ª£Á†ÅËØ¥‰∏ãÁ§∫‰æã&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;metadata&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;conversation_id&quot;</span>: <span class="string">&quot;0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parent_message_id&quot;</span>: <span class="string">&quot;36d4ff94-fb3f-4f9b-beeb-d9c93f5752fe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;text-davinci-002-render-sha&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;timezone_offset_min&quot;</span>: <span class="number">-480</span>,</span><br><span class="line">  <span class="attr">&quot;suggestions&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;history_and_training_disabled&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;arkose_token&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">&quot;conversation_mode&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;primary_assistant&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;force_paragen&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;force_rate_limit&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ces-v1-t"><a href="#ces-v1-t" class="headerlink" title="ces/v1/t"></a>ces/v1/t</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chat.openai.com/ces/v1/t</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-01-19T08:35:53.805Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;integrations&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;Segment.io&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;userId&quot;</span>: <span class="string">&quot;user-EyJTf0sEV6sYCFhgOwqCHGD2&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;anonymousId&quot;</span>: <span class="string">&quot;dafc8561-54d1-4cb8-9cdf-91e5e4f7162e&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;event&quot;</span>: <span class="string">&quot;View Template Prompt Ignore Suggestions&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;track&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;origin&quot;</span>: <span class="string">&quot;chat&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;openai_app&quot;</span>: <span class="string">&quot;API&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;context&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;page&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;referrer&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;search&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;feel&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://chat.openai.com/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;userAgent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;locale&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;library&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;analytics.js&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;npm:next-1.56.0&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;userAgentData&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;brands&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Not_A Brand&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;8&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Chromium&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;120&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;brand&quot;</span>: <span class="string">&quot;Google Chrome&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;120&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;mobile&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;platform&quot;</span>: <span class="string">&quot;macOS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;messageId&quot;</span>: <span class="string">&quot;ajs-next-c0f7b6265ed3eab440b0d44f21f53ffa&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;sentAt&quot;</span>: <span class="string">&quot;2024-01-19T08:35:54.068Z&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bundled&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;Segment.io&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;unbundled&quot;</span>: [],</span><br><span class="line">    <span class="attr">&quot;bundledIds&quot;</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="rgstr"><a href="#rgstr" class="headerlink" title="rgstr"></a>rgstr</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://events.statsigapi.net/v1/rgstr</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;events&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;eventName&quot;</span>: <span class="string">&quot;chatgpt_prompt_ignore_suggestions&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;userID&quot;</span>: <span class="string">&quot;user-EyJTf0sEV6sYCFhgOwqCHGD2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;custom&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;is_paid&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">&quot;workspace_id&quot;</span>: <span class="string">&quot;b27c1f77-bb94-4e8f-a6d3-4b30a0eec927&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;locale&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;statsigEnvironment&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;tier&quot;</span>: <span class="string">&quot;production&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;value&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;metadata&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;time&quot;</span>: <span class="number">1705653353804</span>,</span><br><span class="line">      <span class="attr">&quot;statsigMetadata&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;currentPage&quot;</span>: <span class="string">&quot;https://chat.openai.com/c/0e02cc29-8cc2-4305-91a1-a3db1427f400&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;statsigMetadata&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;sdkType&quot;</span>: <span class="string">&quot;js-client&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;sdkVersion&quot;</span>: <span class="string">&quot;4.39.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;stableID&quot;</span>: <span class="string">&quot;f0eaa0cd-f15f-4d71-ab51-8a91e92aea53&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="backend-lat-r"><a href="#backend-lat-r" class="headerlink" title="backend/lat/r"></a>backend/lat/r</h3><ul><li><p>request</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chat.openai.com/backend-api/lat/r</span><br></pre></td></tr></table></figure></li><li><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;server_request_id&quot;</span>: <span class="string">&quot;847dbf366a92408c-SIN&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;text-davinci-002-render-sha&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;preflight_time_ms&quot;</span>: <span class="number">0.09999990463256836</span>,</span><br><span class="line">  <span class="attr">&quot;count_tokens&quot;</span>: <span class="number">472</span>,</span><br><span class="line">  <span class="attr">&quot;ts_first_token_ms&quot;</span>: <span class="number">1548.7000000476837</span>,</span><br><span class="line">  <span class="attr">&quot;ts_max_token_time_ms&quot;</span>: <span class="number">764</span>,</span><br><span class="line">  <span class="attr">&quot;ts_mean_token_without_first_ms&quot;</span>: <span class="number">30.007855625922005</span>,</span><br><span class="line">  <span class="attr">&quot;ts_median_token_without_first_ms&quot;</span>: <span class="number">21.799999952316284</span>,</span><br><span class="line">  <span class="attr">&quot;ts_min_token_time_ms&quot;</span>: <span class="number">0.09999990463256836</span>,</span><br><span class="line">  <span class="attr">&quot;ts_p95_token_without_first_ms&quot;</span>: <span class="number">88.99999988079071</span>,</span><br><span class="line">  <span class="attr">&quot;ts_p99_token_without_first_ms&quot;</span>: <span class="number">139.65999991893773</span>,</span><br><span class="line">  <span class="attr">&quot;ts_std_dev_token_ms&quot;</span>: <span class="number">44.98320283392762</span>,</span><br><span class="line">  <span class="attr">&quot;ts_total_request_ms&quot;</span>: <span class="number">15695.399999856949</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="client-chat-completions-create"><a href="#client-chat-completions-create" class="headerlink" title="client.chat.completions.create"></a>client.chat.completions.create</h2><ul><li><p>request</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">response = client.chat.completions.create(</span><br><span class="line">           model=<span class="string">&quot;gpt-3.5-turbo-1106&quot;</span>,</span><br><span class="line">           messages=[</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>,</span><br><span class="line">                   <span class="attr">&quot;content&quot;</span>: prompt_str,</span><br><span class="line">               &#125;,</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">                   <span class="attr">&quot;content&quot;</span>: user_input.question,</span><br><span class="line">               &#125;,</span><br><span class="line">           ],</span><br><span class="line">       )</span><br></pre></td></tr></table></figure></li><li><p>response</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;chatcmpl-8ify2KU1ANzQPQyD8WVMp6rZWgYtj&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;choices&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;finish_reason&quot;</span>: <span class="string">&quot;stop&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;index&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;logprobs&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;function_call&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;tool_calls&quot;</span>: <span class="literal">null</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;created&quot;</span>: <span class="number">1705658446</span>,</span><br><span class="line">    <span class="attr">&quot;model&quot;</span>: <span class="string">&quot;gpt-3.5-turbo-1106&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;chat.completion&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;system_fingerprint&quot;</span>: <span class="string">&quot;fp_c596c86df9&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;usage&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;completion_tokens&quot;</span>: <span class="number">51</span>,</span><br><span class="line">        <span class="attr">&quot;prompt_tokens&quot;</span>: <span class="number">1068</span>,</span><br><span class="line">        <span class="attr">&quot;total_tokens&quot;</span>: <span class="number">1119</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> fragment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>llm snippet</title>
      <link href="/2024/01/10/llm%20snippet/"/>
      <url>/2024/01/10/llm%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h1><h2 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h2><ul><li>Â§ßÊ®°ÂûãÂæÄÂæÄÂê´ÊúâÂ§ßÈáèÁöÑÂèÇÊï∞ÂíåÂ§çÊùÇÁöÑÁ•ûÁªèÁΩëÁªúÁªìÊûÑÔºåÈúÄË¶ÅÈ´òÂ∫¶ÁöÑÂπ∂Ë°åÂ§ÑÁêÜËÉΩÂäõÂíåÂ§ßÁöÑÂÜÖÂ≠òÂ∏¶ÂÆΩÊù•ÊúâÊïàÂú∞ËÆ≠ÁªÉÂíåËøêË°å„ÄÇGPUÂú®Ëøô‰∫õÊñπÈù¢ÁöÑ‰ºòÂäøËÆ©ÂÆÉÊàê‰∏∫ËøêË°åÂ§ßÂûãAIÊ®°ÂûãÁöÑÈ¶ñÈÄâÁ°¨‰ª∂„ÄÇ‰ΩÜËøô‰∏çÊÑèÂë≥ÁùÄCPUÂÆåÂÖ®Êó†Ê≥ïËøêË°åËøô‰∫õÊ®°ÂûãÔºåÂè™ÊòØÁõ∏ÂØπÊù•ËØ¥CPUËøêË°åËµ∑Êù•ÊïàÁéá‰ΩéÔºåÂèØËÉΩ‰ºöÈùûÂ∏∏ÊÖ¢ÔºåÂõ†Ê≠§Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÈÄöÂ∏∏ÈÄâÊã©GPUÊù•ËøõË°åÊ∑±Â∫¶Â≠¶‰π†‰ªªÂä°„ÄÇ</li></ul><h2 id="Fine-tuning-vs-Embedding"><a href="#Fine-tuning-vs-Embedding" class="headerlink" title="Fine-tuning vs Embedding"></a>Fine-tuning vs Embedding</h2><ul><li>If you are trying to ‚Äúteach‚Äù the model new information, embeddings is the way to go. If you want to change the structure or way it response, then use fine-tuning.</li></ul><hr><ul><li><strong>Fine-tuning:</strong> Teach the model <em>how</em> to answer a question (e.g. structure/format, personality, etc)</li><li><strong>Embedding:</strong> Provide the model with new/specific information with which to answer questions.</li></ul><hr><h1 id="model"><a href="#model" class="headerlink" title="model"></a>model</h1><h2 id="DeepSeek-R1-Distill-Qwen-14B"><a href="#DeepSeek-R1-Distill-Qwen-14B" class="headerlink" title="DeepSeek-R1-Distill-Qwen-14B"></a>DeepSeek-R1-Distill-Qwen-14B</h2><p>The relationship between <strong>DeepSeek</strong> and <strong>Qwen</strong> is likely a collaborative or integrated one. <strong>DeepSeek</strong> might be the technology or framework for efficient search and information retrieval, while <strong>Qwen-14B</strong> is the core language model providing the understanding and generation capabilities. If these two are combined (as in <strong>DeepSeek-R1-Distill-Qwen-14B</strong>), it might indicate that DeepSeek is using the Qwen model (likely distilling it to improve efficiency) for specific tasks like searching, information retrieval, or knowledge extraction.</p><ul><li><p><strong>DeepSeek</strong> enhances the <strong>Qwen-14B</strong> model (through distillation and integration) to make it more effective in specialized tasks like information retrieval or search.</p></li><li><p>The <strong>DeepSeek-R1-Distill-Qwen-14B</strong> model would then represent a <strong>customized, efficient version of Qwen-14B</strong>, fine-tuned for certain tasks with the DeepSeek framework added in.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> llm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sinppet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyter</title>
      <link href="/2024/01/09/python%20jupyter/"/>
      <url>/2024/01/09/python%20jupyter/</url>
      
        <content type="html"><![CDATA[<h2 id="È≠îÊ≥ïÊåá‰ª§"><a href="#È≠îÊ≥ïÊåá‰ª§" class="headerlink" title="È≠îÊ≥ïÊåá‰ª§"></a>È≠îÊ≥ïÊåá‰ª§</h2><table><thead><tr><th>È≠îÊ≥ïÊåá‰ª§</th><th>ÂäüËÉΩËØ¥Êòé</th></tr></thead><tbody><tr><td><code>%pwd</code></td><td>Êü•ÁúãÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩï</td></tr><tr><td><code>%ls</code></td><td>ÂàóÂá∫ÂΩìÂâçÊàñÊåáÂÆöÊñá‰ª∂Â§π‰∏ãÁöÑÂÜÖÂÆπ</td></tr><tr><td><code>%cat</code></td><td>Êü•ÁúãÊåáÂÆöÊñá‰ª∂ÁöÑÂÜÖÂÆπ</td></tr><tr><td><code>%hist</code></td><td>Êü•ÁúãËæìÂÖ•ÂéÜÂè≤</td></tr><tr><td><code>%matplotlib inline</code></td><td>ËÆæÁΩÆÂú®È°µÈù¢‰∏≠ÂµåÂÖ•matplotlibËæìÂá∫ÁöÑÁªüËÆ°ÂõæË°®</td></tr><tr><td><code>%config Inlinebackend.figure_format=&#39;svg&#39;</code></td><td>ËÆæÁΩÆÁªüËÆ°ÂõæË°®‰ΩøÁî®SVGÊ†ºÂºèÔºàÁü¢ÈáèÂõæÔºâ</td></tr><tr><td><code>%run</code></td><td>ËøêË°åÊåáÂÆöÁöÑÁ®ãÂ∫è</td></tr><tr><td><code>%load</code></td><td>Âä†ËΩΩÊåáÂÆöÁöÑÊñá‰ª∂Âà∞ÂçïÂÖÉÊ†º‰∏≠</td></tr><tr><td><code>%quickref</code></td><td>ÊòæÁ§∫IPythonÁöÑÂø´ÈÄüÂèÇËÄÉ</td></tr><tr><td><code>%timeit</code></td><td>Â§öÊ¨°ËøêË°å‰ª£Á†ÅÂπ∂ÁªüËÆ°‰ª£Á†ÅÊâßË°åÊó∂Èó¥</td></tr><tr><td><code>%prun</code></td><td>Áî®<code>cProfile.run</code>ËøêË°å‰ª£Á†ÅÂπ∂ÊòæÁ§∫ÂàÜÊûêÂô®ÁöÑËæìÂá∫</td></tr><tr><td><code>%who</code> / <code>%whos</code></td><td>ÊòæÁ§∫ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÂèòÈáè</td></tr><tr><td><code>%xdel</code></td><td>Âà†Èô§‰∏Ä‰∏™ÂØπË±°Âπ∂Ê∏ÖÁêÜÊâÄÊúâÂØπÂÆÉÁöÑÂºïÁî®</td></tr></tbody></table><h2 id="Âø´Êç∑ÈîÆ"><a href="#Âø´Êç∑ÈîÆ" class="headerlink" title="Âø´Êç∑ÈîÆ"></a>Âø´Êç∑ÈîÆ</h2><p>JupyterLab ÁöÑÂø´Êç∑ÈîÆÂèØ‰ª•ÂàÜ‰∏∫<strong>ÂëΩ‰ª§Ê®°Âºè</strong>‰∏ãÁöÑÂø´Êç∑ÈîÆÂíå<strong>ÁºñËæëÊ®°Âºè</strong>‰∏ãÁöÑÂø´Êç∑ÈîÆÔºå</p><p>ÊâÄË∞ìÁºñËæëÊ®°ÂºèÂ∞±ÊòØÂ§Ñ‰∫éËæìÂÖ•‰ª£Á†ÅÊàñÊí∞ÂÜôÊñáÊ°£Áä∂ÊÄÅÁöÑÊ®°ÂºèÔºåÂú®ÁºñËæëÊ®°Âºè‰∏ãÊåâ<code>Esc</code>ÂèØ‰ª•ÂõûÂà∞ÂëΩ‰ª§Ê®°ÂºèÔºåÂú®ÂëΩ‰ª§Ê®°Âºè‰∏ãÊåâ<code>Enter</code>ÂèØ‰ª•ËøõÂÖ•ÁºñËæëÊ®°Âºè„ÄÇ</p><ul><li>ÂëΩ‰ª§Ê®°Âºè‰∏ãÁöÑÂø´Êç∑ÈîÆÔºö</li></ul><table><thead><tr><th>Âø´Êç∑ÈîÆ</th><th>ÂäüËÉΩËØ¥Êòé</th></tr></thead><tbody><tr><td><code>Alt</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†ºÂπ∂Âú®‰∏ãÈù¢ÊèíÂÖ•Êñ∞ÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>Shift</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†ºÂπ∂ÈÄâ‰∏≠‰∏ãÊñπÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>Ctrl</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†º</td></tr><tr><td><code>j</code> / <code>k</code>„ÄÅ<code>Shift</code> + <code>j</code> / <code>Shift</code> + <code>k</code></td><td>ÈÄâ‰∏≠‰∏ãÊñπ/‰∏äÊñπÂçïÂÖÉÊ†º„ÄÅËøûÁª≠ÈÄâ‰∏≠‰∏ãÊñπ/‰∏äÊñπÂçïÂÖÉÊ†º</td></tr><tr><td><code>a</code> / <code>b</code></td><td>Âú®‰∏ãÊñπ/‰∏äÊñπÊèíÂÖ•Êñ∞ÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>c</code> / <code>x</code></td><td>Â§çÂà∂ÂçïÂÖÉÊ†º / Ââ™ÂàáÂçïÂÖÉÊ†º</td></tr><tr><td><code>v</code> / <code>Shift</code> + <code>v</code></td><td>Âú®‰∏ãÊñπ/‰∏äÊñπÁ≤òË¥¥ÂçïÂÖÉÊ†º</td></tr><tr><td><code>dd</code> / <code>z</code></td><td>Âà†Èô§ÂçïÂÖÉÊ†º / ÊÅ¢Â§çÂà†Èô§ÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>Shift</code> + <code>l</code></td><td>ÊòæÁ§∫ÊàñÈöêËóèÂΩìÂâç/ÊâÄÊúâÂçïÂÖÉÊ†ºË°åÂè∑</td></tr><tr><td><code>Space</code> / <code>Shift</code> + <code>Space</code></td><td>Âêë‰∏ã/Âêë‰∏äÊªöÂä®È°µÈù¢</td></tr></tbody></table><ul><li>ÁºñËæëÊ®°Âºè‰∏ãÁöÑÂø´Êç∑ÈîÆÔºö</li></ul><table><thead><tr><th>Âø´Êç∑ÈîÆ</th><th>ÂäüËÉΩËØ¥Êòé</th></tr></thead><tbody><tr><td><code>Shift</code> + <code>Tab</code></td><td>Ëé∑ÂæóÊèêÁ§∫‰ø°ÊÅØ</td></tr><tr><td><code>Ctrl</code> + <code>]</code>/ <code>Ctrl</code> + <code>[</code></td><td>Â¢ûÂä†/ÂáèÂ∞ëÁº©Ëøõ</td></tr><tr><td><code>Alt</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†ºÂπ∂Âú®‰∏ãÈù¢ÊèíÂÖ•Êñ∞ÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>Shift</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†ºÂπ∂ÈÄâ‰∏≠‰∏ãÊñπÁöÑÂçïÂÖÉÊ†º</td></tr><tr><td><code>Ctrl</code> + <code>Enter</code></td><td>ËøêË°åÂΩìÂâçÂçïÂÖÉÊ†º</td></tr><tr><td><code>Ctrl</code> + <code>Left</code> / <code>Right</code></td><td>ÂÖâÊ†áÁßªÂà∞Ë°åÈ¶ñ/Ë°åÂ∞æ</td></tr><tr><td><code>Ctrl</code> + <code>Up</code> / <code>Down</code></td><td>ÂÖâÊ†áÁßªÂä®‰ª£Á†ÅÂºÄÂ§¥/ÁªìÂ∞æÂ§Ñ</td></tr><tr><td><code>Up</code> / <code>Down</code></td><td>ÂÖâÊ†á‰∏äÁßª/‰∏ãÁßª‰∏ÄË°åÊàñÁßªÂà∞‰∏ä/‰∏ã‰∏Ä‰∏™ÂçïÂÖÉÊ†º</td></tr></tbody></table><blockquote><p><strong>ËØ¥Êòé</strong>ÔºöÂØπ‰∫é macOS Á≥ªÁªüÂèØ‰ª•Â∞Ü<code>Alt</code>ÈîÆÊõøÊç¢Êàê<code>Option</code>ÈîÆÔºåÂ∞Ü<code>Ctrl</code>ÈîÆÊõøÊç¢Êàê<code>Command</code>ÈîÆ„ÄÇ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> jupyter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ide </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java jenv</title>
      <link href="/2023/12/29/java%20jenv/"/>
      <url>/2023/12/29/java%20jenv/</url>
      
        <content type="html"><![CDATA[<h2 id="Jenv"><a href="#Jenv" class="headerlink" title="Jenv"></a>Jenv</h2><h3 id="ÂàóÂá∫Â∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨Ôºö"><a href="#ÂàóÂá∫Â∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨Ôºö" class="headerlink" title="ÂàóÂá∫Â∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨Ôºö"></a><strong>ÂàóÂá∫Â∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨Ôºö</strong></h3><p>ËøêË°å‰ª•‰∏ãÂëΩ‰ª§ÂàóÂá∫Â∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨Ôºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv versions</span><br></pre></td></tr></table></figure><p>Ëøô‰ºöÊòæÁ§∫ÊâÄÊúâÂ∑≤ÂÆâË£ÖÁöÑJavaÁâàÊú¨„ÄÇ</p><h3 id="5-ËÆæÁΩÆÂÖ®Â±ÄJavaÁâàÊú¨Ôºö"><a href="#5-ËÆæÁΩÆÂÖ®Â±ÄJavaÁâàÊú¨Ôºö" class="headerlink" title="5. ËÆæÁΩÆÂÖ®Â±ÄJavaÁâàÊú¨Ôºö"></a>5. <strong>ËÆæÁΩÆÂÖ®Â±ÄJavaÁâàÊú¨Ôºö</strong></h3><p>‰Ω†ÂèØ‰ª•ÈÄâÊã©ËÆæÁΩÆ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑJavaÁâàÊú¨ÔºåËØ•ÁâàÊú¨‰ºöË¢´ÈªòËÆ§‰ΩøÁî®„ÄÇËøêË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv global &lt;jdk_version&gt;</span><br></pre></td></tr></table></figure><p>Â∞Ü <code>&lt;jdk_version&gt;</code> ÊõøÊç¢‰∏∫‰Ω†ÊÉ≥Ë¶ÅËÆæÁΩÆ‰∏∫ÈªòËÆ§ÁöÑJavaÁâàÊú¨„ÄÇ</p><h3 id="6-ËÆæÁΩÆÈ°πÁõÆÁâπÂÆöÁöÑJavaÁâàÊú¨Ôºö"><a href="#6-ËÆæÁΩÆÈ°πÁõÆÁâπÂÆöÁöÑJavaÁâàÊú¨Ôºö" class="headerlink" title="6. ËÆæÁΩÆÈ°πÁõÆÁâπÂÆöÁöÑJavaÁâàÊú¨Ôºö"></a>6. <strong>ËÆæÁΩÆÈ°πÁõÆÁâπÂÆöÁöÑJavaÁâàÊú¨Ôºö</strong></h3><p>Â¶ÇÊûú‰Ω†ÊÉ≥Âú®ÁâπÂÆöÁöÑÈ°πÁõÆ‰∏≠‰ΩøÁî®‰∏çÂêåÁöÑJavaÁâàÊú¨ÔºåÂèØ‰ª•ËøõÂÖ•Âà∞È°πÁõÆÁöÑÁõÆÂΩïÔºåÁÑ∂ÂêéËøêË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jenv local &lt;jdk_version&gt;</span><br></pre></td></tr></table></figure><p>Ëøô‰ºöÂú®È°πÁõÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ <code>.java-version</code> Êñá‰ª∂ÔºåÊåáÂÆöÈ°πÁõÆÁâπÂÆöÁöÑJavaÁâàÊú¨„ÄÇ</p><h3 id="7-È™åËØÅJavaÁâàÊú¨Ôºö"><a href="#7-È™åËØÅJavaÁâàÊú¨Ôºö" class="headerlink" title="7. È™åËØÅJavaÁâàÊú¨Ôºö"></a>7. <strong>È™åËØÅJavaÁâàÊú¨Ôºö</strong></h3><p>Âú®ÁªàÁ´Ø‰∏≠ËøêË°å‰ª•‰∏ãÂëΩ‰ª§È™åËØÅÂΩìÂâçÁ≥ªÁªü‰ΩøÁî®ÁöÑJavaÁâàÊú¨Ôºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>Á°Æ‰øùËæìÂá∫ÊòæÁ§∫ÁöÑÊòØ‰Ω†ÊâÄÊúüÊúõÁöÑJavaÁâàÊú¨‰ø°ÊÅØ„ÄÇ</p><p>ÈÄöËøá‰ª•‰∏äÊ≠•È™§Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>jenv</code> ÁÆ°ÁêÜÂ§ö‰∏™JavaÁâàÊú¨ÔºåÂπ∂‰∏îÂú®‰∏çÂêåÁöÑÈ°πÁõÆ‰∏≠ÂàáÊç¢‰ΩøÁî®‰∏çÂêåÁöÑJavaÁâàÊú¨„ÄÇ</p><h2 id="Êñ∞Â¢ûjavaÁâàÊú¨"><a href="#Êñ∞Â¢ûjavaÁâàÊú¨" class="headerlink" title="Êñ∞Â¢ûjavaÁâàÊú¨"></a>Êñ∞Â¢ûjavaÁâàÊú¨</h2><ol><li>brew install openjdk21</li><li>sudo ln -sfn /opt/homebrew/opt/openjdk@21/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-21.jdk</li><li></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python env</title>
      <link href="/2023/12/18/python%20env/"/>
      <url>/2023/12/18/python%20env/</url>
      
        <content type="html"><![CDATA[<h1 id="pyenv"><a href="#pyenv" class="headerlink" title="pyenv"></a>pyenv</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂΩìÂâçÁâàÊú¨</span></span><br><span class="line">pyenv version</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊâÄÊúâÁâàÊú¨</span></span><br><span class="line">pyenv versions</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊâÄÊúâÂèØÂÆâË£ÖÁöÑÁâàÊú¨</span></span><br><span class="line">pyenv install --list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÆâË£ÖÊåáÂÆöÁâàÊú¨</span></span><br><span class="line">pyenv install 3.6.5</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÆâË£ÖÊñ∞ÁâàÊú¨Âêé<span class="built_in">rehash</span>‰∏Ä‰∏ã</span></span><br><span class="line">pyenv rehash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§ÊåáÂÆöÁâàÊú¨</span></span><br><span class="line">pyenv uninstall 3.5.2</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊåáÂÆöÁâàÊú¨</span></span><br><span class="line">pyenv shell &lt;version&gt; -- select just for current shell session</span><br><span class="line">pyenv local &lt;version&gt; -- automatically select whenever you are in the current directory (or its subdirectories)</span><br><span class="line">pyenv global &lt;version&gt; -- select globally for your user account</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊåáÂÆöÂ§ö‰∏™ÂÖ®Â±ÄÁâàÊú¨, 3ÁâàÊú¨‰ºòÂÖà</span></span><br><span class="line">pyenv global 3.6.5 2.7.14</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÆûÈôÖ‰∏äÂΩì‰Ω†ÂàáÊç¢ÁâàÊú¨Âêé, Áõ∏Â∫îÁöÑpipÂíåÂåÖ‰ªìÂ∫ìÈÉΩÊòØ‰ºöËá™Âä®ÂàáÊç¢ËøáÂéªÁöÑ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂΩìÂâçÈ°πÁõÆ‰ΩøÁî®ÁöÑpyenvÁâàÊú¨‰ºöÂú® `.python-version`Êñá‰ª∂‰∏≠‰ΩìÁé∞</span></span><br></pre></td></tr></table></figure><ul><li><p>reference</p><ul><li><a href="https://realpython.com/intro-to-pyenv/#specifying-your-python-version">specifying-your-python-version</a></li></ul></li></ul><h1 id="venv"><a href="#venv" class="headerlink" title="venv"></a>venv</h1><p>Âú® Linux ‰∏≠ÈÖçÁΩÆ Python È°πÁõÆÁöÑËøêË°åËôöÊãüÁéØÂ¢ÉÈÄöÂ∏∏‰ΩøÁî® <code>venv</code>ÔºàËôöÊãüÁéØÂ¢ÉÔºâÊ®°Âùó„ÄÇ‰ª•‰∏ãÊòØ‰∏ÄËà¨ÁöÑÊ≠•È™§Ôºö</p><ol><li><p><strong>ÂÆâË£Ö venv Ê®°ÂùóÔºàÂ¶ÇÊûúÂ∞öÊú™ÂÆâË£ÖÔºâÔºö</strong></p><p>Ê£ÄÊü•‰Ω†ÁöÑ Python ÁâàÊú¨Âπ∂Á°Æ‰øùÂÆâË£Ö‰∫Ü <code>venv</code> Ê®°Âùó„ÄÇ</p></li><li><p><strong>ÂàõÂª∫ËôöÊãüÁéØÂ¢ÉÔºö</strong></p><p>Âú®È°πÁõÆÁõÆÂΩï‰∏≠ÔºåËøêË°å‰ª•‰∏ãÂëΩ‰ª§ÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>myenv</code> ÁöÑËôöÊãüÁéØÂ¢ÉÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv &lt;envName&gt;  # default always use venv as env name </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use the desired Python version:</span></span><br><span class="line">python3.9 -m venv myenv</span><br></pre></td></tr></table></figure><p>ËøôÂ∞ÜÂú®ÂΩìÂâçÁõÆÂΩïÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>myenv</code> ÁöÑËôöÊãüÁéØÂ¢ÉÊñá‰ª∂Â§π„ÄÇ</p></li><li><p><strong>ÊøÄÊ¥ªËôöÊãüÁéØÂ¢ÉÔºö</strong></p><p>ÊøÄÊ¥ªËôöÊãüÁéØÂ¢ÉÂèØÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source myenv/bin/activate</span><br></pre></td></tr></table></figure><p>ËøôÂ∞ÜÊøÄÊ¥ªÂêç‰∏∫ <code>myenv</code> ÁöÑËôöÊãüÁéØÂ¢É„ÄÇÊøÄÊ¥ªÂêéÔºå‰Ω†ÁöÑÁªàÁ´ØÊèêÁ§∫Á¨¶ÂèØËÉΩ‰ºöÊòæÁ§∫ËôöÊãüÁéØÂ¢ÉÁöÑÂêçÁß∞„ÄÇ</p></li><li><p><strong>ÂÆâË£ÖÈ°πÁõÆ‰æùËµñÔºö</strong></p><p>Âú®ÊøÄÊ¥ªÁöÑËôöÊãüÁéØÂ¢É‰∏≠Ôºå‰ΩøÁî® <code>pip</code> ÂÆâË£ÖÈ°πÁõÆÊâÄÈúÄÁöÑ‰æùËµñÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠ <code>requirements.txt</code> ÊòØÂåÖÂê´È°πÁõÆ‰æùËµñÈ°πÁöÑÊñá‰ª∂„ÄÇ</p></li><li><p><strong>ÈÄÄÂá∫ËôöÊãüÁéØÂ¢ÉÔºö</strong></p><p>ÂΩì‰Ω†ÂÆåÊàêÈ°πÁõÆÂ∑•‰ΩúÂêéÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÂºèÈÄÄÂá∫ËôöÊãüÁéØÂ¢ÉÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure><p>ËøôÂ∞Ü‰ΩøËôöÊãüÁéØÂ¢ÉÈÄÄÂá∫ÔºåÂπ∂ÊÅ¢Â§çÂà∞Á≥ªÁªüÈªòËÆ§ÁéØÂ¢É„ÄÇ</p></li></ol><p>‰ΩøÁî®ËôöÊãüÁéØÂ¢ÉÊúâÂä©‰∫éÈöîÁ¶ªÈ°πÁõÆÁöÑ‰æùËµñÔºåÈÅøÂÖç‰∏éÁ≥ªÁªüÂÖ∂‰ªñÈ°πÁõÆÁöÑ‰æùËµñÂÜ≤Á™ÅÔºåÂπ∂Êèê‰æõÊõ¥Âπ≤ÂáÄÁöÑÂºÄÂèëÁéØÂ¢É„ÄÇ</p><p><strong>uvicorn</strong></p><blockquote><p>Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãËôöÊãüÁéØÂ¢É /path/to/venv/bin/ ‰∏ãÈù¢ÊòØÊúâ uvicorn ÁöÑÂêØÂä®ÂëΩ‰ª§ÁöÑÔºåÂç≥ /xxx/venv/bin/uvicorn</p></blockquote><p>Â¶ÇÊûúÂΩìÂâçËôöÊãüÁéØÂ¢É‰∏çËØÜÂà´<code>uvicorn</code>ÔºåÂèØÈÄöËøá</p><ul><li>ÊñπÂºè‰∏Ä</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m uvicorn xxx:app --reload</span><br></pre></td></tr></table></figure><ul><li>ÊñπÂºè‰∫å</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --force-reinstall uvicorn</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> env </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typora snippet</title>
      <link href="/2023/12/16/tool:%20typora/"/>
      <url>/2023/12/16/tool:%20typora/</url>
      
        <content type="html"><![CDATA[<h1 id="Draw-Diagrams"><a href="#Draw-Diagrams" class="headerlink" title="Draw Diagrams"></a>Draw Diagrams</h1><p><a href="https://support.typora.io/Draw-Diagrams-With-Markdown/">Draw Diagrams With Markdown</a></p>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>security</title>
      <link href="/2023/12/16/security/"/>
      <url>/2023/12/16/security/</url>
      
        <content type="html"><![CDATA[<h1 id="security-model"><a href="#security-model" class="headerlink" title="security model"></a>security model</h1><ul><li><p><a href="https://en.wikipedia.org/wiki/Access_control_list">Access control list</a> (ACL)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Attribute-based_access_control">Attribute-based access control</a> (ABAC)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Bell%E2%80%93LaPadula_model">Bell‚ÄìLaPadula model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Biba_model">Biba model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Brewer_and_Nash_model">Brewer and Nash model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Capability-based_security">Capability-based security</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Clark-Wilson_model">Clark-Wilson model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Context-based_access_control">Context-based access control</a> (CBAC)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Graham-Denning_model">Graham-Denning model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/HRU_(security)">Harrison-Ruzzo-Ullman</a> (HRU)</p></li><li><p><a href="https://en.wikipedia.org/wiki/High-water_mark_(computer_security)">High-water mark (computer security)</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Lattice-based_access_control">Lattice-based access control</a> (LBAC)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Mandatory_access_control">Mandatory access control</a> (MAC)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Multi-level_security">Multi-level security</a> (MLS)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Non-interference_(security)">Non-interference (security)</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Object-capability_model">Object-capability model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Protection_ring">Protection ring</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Role-based_access_control">Role-based access control</a> (RBAC)</p><p><img src="/images/rbac/rbac_auth.png"></p><p>reference</p><ul><li><p><a href="https://zhuanlan.zhihu.com/p/63769951">Áü•‰πé</a></p></li><li><p><a href="https://blog.csdn.net/ljw499356212/article/details/81055141">CSDN</a></p></li><li><p><a href="https://benheart.github.io/2016/11/19/rbac-design-doc.html">https://benheart.github.io/2016/11/19/rbac-design-doc.html</a></p></li></ul></li><li><p><a href="https://en.wikipedia.org/wiki/Take-grant_protection_model">Take-grant protection model</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Discretionary_access_control">Discretionary access control</a> (DAC)</p></li></ul><blockquote><p> SSO (single sign-on)</p></blockquote><blockquote><p><a href="https://ninjaauth.com/sso-single-sign-on">https://ninjaauth.com/sso-single-sign-on</a></p></blockquote><h1 id="oauth2"><a href="#oauth2" class="headerlink" title="oauth2"></a>oauth2</h1><h2 id="OAuth-2-0-terminology"><a href="#OAuth-2-0-terminology" class="headerlink" title="OAuth 2.0 terminology"></a>OAuth 2.0 terminology</h2><ul><li><strong>Resource Owner</strong>: Entity that can grant access to a protected resource. Typically, this is the end-user.</li><li><strong>Client</strong>: Application requesting access to a protected resource on behalf of the Resource Owner.</li><li><strong>Resource Server</strong>: Server hosting the protected resources. This is the API you want to access.</li><li><strong>Authorization Server</strong>: Server that authenticates the Resource Owner and issues Access Tokens after getting proper authorization. In this case, Auth0.</li><li><strong>User Agent</strong>: Agent used by the Resource Owner to interact with the Client (for example, a browser or a native application).</li></ul><p><img src="/images/security/user-journey-oauth.webp" alt="user-journey-oauth"></p><p>The best practice for implementing OAuth2 in a web application with a separate frontend and backend is to use the Backend for Frontend (BFF) pattern. Here‚Äôs how it works:</p><p>The frontend (e.g. a Single Page Application) initiates the OAuth2 flow by redirecting the user to the OAuth2 provider‚Äôs authorization endpoint. The provider then authenticates the user and redirects back to the frontend with an authorization code.</p><p>The frontend then sends this authorization code to the backend over a secure channel (e.g. HTTPS). The backend acts as a confidential client and exchanges the authorization code with the OAuth2 provider for an access token and refresh token.[1][3]</p><p>The backend stores the tokens securely and returns an opaque session cookie or token to the frontend. This session identifier represents the authenticated user session.[1]</p><p>For subsequent API requests, the frontend includes the session cookie/token. The backend validates the session and retrieves the access token, using it to authenticate the request to the backend API or other third-party APIs on behalf of the user.[1][3]</p><p>This pattern has several advantages:</p><ol><li><p>The access token is never exposed to the frontend, mitigating the risk of token theft.[1][3]</p></li><li><p>The backend can securely store and manage the refresh of access tokens without involving the frontend.[3]</p></li><li><p>The backend can act as a gatekeeper, validating requests and enforcing authorization rules before proxying to third-party APIs.[3]</p></li><li><p>The frontend only needs to handle the initial OAuth2 redirect and session management, simplifying its code.[1]</p></li></ol><p>To implement this, the backend must be registered as a confidential OAuth2 client with the provider. The frontend can use libraries like Auth0 or Google‚Äôs client-side libraries to initiate the OAuth2 flow.[1][4] The backend handles the code exchange and token management, often using server-side OAuth2 libraries or middleware.[1]</p><p>Citations:<br>[1] <a href="https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/">https://auth0.com/blog/backend-for-frontend-pattern-with-auth0-and-dotnet/</a><br>[2] <a href="https://community.qlik.com/t5/New-to-Qlik-Analytics/How-to-Secure-Backend-API-Endpoints-on-the-Front-End-Best/td-p/2423853">https://community.qlik.com/t5/New-to-Qlik-Analytics/How-to-Secure-Backend-API-Endpoints-on-the-Front-End-Best/td-p/2423853</a><br>[3] <a href="https://auth0.com/blog/the-backend-for-frontend-pattern-bff/">https://auth0.com/blog/the-backend-for-frontend-pattern-bff/</a><br>[4] <a href="https://infisical.com/blog/guide-to-implementing-oauth2">https://infisical.com/blog/guide-to-implementing-oauth2</a><br>[5] <a href="https://www.reddit.com/r/node/comments/skmjjn/0auth_implemented_on_frontend_or_backend/">https://www.reddit.com/r/node/comments/skmjjn/0auth_implemented_on_frontend_or_backend/</a></p><hr><p>reference</p><ul><li><a href="https://auth0.com/docs/get-started/authentication-and-authorization-flow/which-oauth-2-0-flow-should-i-use">https://auth0.com/docs/get-started/authentication-and-authorization-flow/which-oauth-2-0-flow-should-i-use</a></li></ul><h1 id="keycloak"><a href="#keycloak" class="headerlink" title="keycloak"></a>keycloak</h1><h3 id="ÂâçÊèê"><a href="#ÂâçÊèê" class="headerlink" title="ÂâçÊèê"></a>ÂâçÊèê</h3><ul><li>ÈúÄË¶Åjdk9‰ª•‰∏äÁéØÂ¢É</li></ul><h3 id="config-server"><a href="#config-server" class="headerlink" title="config server"></a>config server</h3><ul><li><p>ÁºñËæë <code>/conf/keycloak.conf </code>ÔºåÈÖçÁΩÆmysqlËøûÊé•‰ø°ÊÅØ (mysqlÂàõÂª∫keycloakÂ∫ì)</p></li><li><p>ÈÖçÁΩÆ <code>admin cli </code>ÁéØÂ¢ÉÂèòÈáè ÔºàÊñπ‰æøÁõ¥Êé•ÂëΩ‰ª§Êìç‰ΩúÔºåÁ≠âÂêå‰∫éÁïåÈù¢Êìç‰ΩúÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> keycloak</span></span><br><span class="line">export KCADM=&quot;/Users/dongwei/Applications/keycloak-23.0.3/bin/kcadm.sh&quot;</span><br><span class="line">export HOST_FOR_KCADM=localhost</span><br></pre></td></tr></table></figure></li></ul><h3 id="bootstrap"><a href="#bootstrap" class="headerlink" title="bootstrap"></a>bootstrap</h3><ul><li><p>È¶ñÊ¨°ÂêØÂä®</p><p><code>KEYCLOAK_ADMIN=admin KEYCLOAK_ADMIN_PASSWORD=xxxxxx ./bin/kc.sh start-dev</code></p></li><li><p>ÂêéÁª≠ÂêØÂä®</p><p><code>./bin/kc.sh start-dev</code></p></li><li><p>ÁîüÊïà <code>KCADM</code></p><p><code>$KCADM config credentials --server http://localhost:8080 --realm master --user admin</code></p><p>ÊèêÁ§∫ËæìÂÖ•ÂØÜÁ†ÅÂç≥ÂèØ (1sou2sou)</p></li></ul><p>‚Äã        È™åËØÅ <code>$KCADM get serverinfo</code></p><h3 id="config-realm"><a href="#config-realm" class="headerlink" title="config realm"></a>config realm</h3><ul><li><p>ÂàõÂª∫Êñ∞ÁöÑrealm</p><p><code>$KCADM create realms -s realm=&quot;jarvex&quot; -s enabled=true</code></p></li></ul><h3 id="config-clients"><a href="#config-clients" class="headerlink" title="config clients"></a>config clients</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">KCADM create clients -r jarvex -s clientId=<span class="string">&quot;jarvex-client-test-1&quot;</span> -s enabled=<span class="literal">true</span> -s name=<span class="string">&quot;test Client 1&quot;</span> -s protocol=openid-connect -s publicClient=<span class="literal">true</span> -s standardFlowEnabled=<span class="literal">true</span> -s <span class="string">&#x27;redirectUris=[&quot;http://127.0.0.1:8001/app/*&quot;]&#x27;</span> -s baseUrl=<span class="string">&quot;http://127.0.0.1:8001/app/&quot;</span> -s <span class="string">&#x27;webOrigins=[&quot;*&quot;]&#x27;</span></span></span><br></pre></td></tr></table></figure><h1 id="shiro"><a href="#shiro" class="headerlink" title="shiro"></a>shiro</h1><p>**ÂØπ‰∫é‰∏Ä‰∏™Â•ΩÁöÑÊ°ÜÊû∂Ôºå‰ªéÂ§ñÈÉ®Êù•ÁúãÂ∫îËØ•ÂÖ∑ÊúâÈùûÂ∏∏ÁÆÄÂçïÊòì‰∫é‰ΩøÁî®ÁöÑ APIÔºå‰∏î API Â•ëÁ∫¶ÊòéÁ°ÆÔºõ‰ªéÂÜÖÈÉ®Êù•ÁúãÁöÑËØùÔºåÂÖ∂Â∫îËØ•Êúâ‰∏Ä‰∏™ÂèØÊâ©Â±ïÁöÑÊû∂ÊûÑÔºåÂç≥ÈùûÂ∏∏ÂÆπÊòìÊèíÂÖ•Áî®Êà∑Ëá™ÂÆö‰πâÂÆûÁé∞ÔºåÂõ†‰∏∫‰ªª‰ΩïÊ°ÜÊû∂ÈÉΩ‰∏çËÉΩÊª°Ë∂≥ÊâÄÊúâÈúÄÊ±Ç„ÄÇ **</p><hr><ul><li><p>Subject</p><p>‰∏ª‰ΩìÔºå‰ª£Ë°®‰∫ÜÂΩìÂâçÁöÑÁî®Êà∑</p></li><li><p>SecurityManager</p><p>ÂÆâÂÖ®ÁÆ°ÁêÜÂô®ÔºåÂÆÉÁÆ°ÁêÜÁùÄÊâÄÊúâSubjectÔºåÁõ∏ÂΩì‰∫éspringmvc‰∏≠ÁöÑDispatcherServlet(ÂâçÁ´ØÊéßÂà∂Âô®)</p></li><li><p>Realm</p><p>ÂüüÔºåShiro‰ªéRealmËé∑ÂèñÂÆâÂÖ®Êï∞ÊçÆÔºàÂ¶ÇÁî®Êà∑„ÄÅËßíËâ≤„ÄÅÊùÉÈôêÔºâ ÔºåÊòØÈ™åËØÅ‰∏ª‰ΩìsubjectÁöÑÊï∞ÊçÆÊ∫ê</p></li></ul><p>ÊµÅÁ®ãÂ¶ÇÂõæÔºö</p><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/2.png"></p><p><strong>ÊµÅÁ®ãËØ¥Êòé</strong>Ôºö</p><ol><li>Â∫îÁî®‰ª£Á†ÅÈÄöËøá Subject Êù•ËøõË°åËÆ§ËØÅÂíåÊéàÊùÉÔºåËÄå Subject ÂèàÂßîÊâòÁªô SecurityManagerÔºõ</li><li>Êàë‰ª¨ÈúÄË¶ÅÁªô Shiro ÁöÑ SecurityManager Ê≥®ÂÖ• RealmÔºå‰ªéËÄåËÆ© SecurityManager ËÉΩÂæóÂà∞ÂêàÊ≥ïÁöÑÁî®Êà∑ÂèäÂÖ∂ÊùÉÈôêËøõË°åÂà§Êñ≠„ÄÇ</li></ol><p><strong>‰ªé‰ª•‰∏ä‰πüÂèØ‰ª•ÁúãÂá∫ÔºåShiro ‰∏çÊèê‰æõÁª¥Êä§Áî®Êà∑ / ÊùÉÈôêÔºåËÄåÊòØÈÄöËøá Realm ËÆ©ÂºÄÂèë‰∫∫ÂëòËá™Â∑±Ê≥®ÂÖ•„ÄÇ</strong> </p><hr><p>shiroÁöÑÂÜÖÈÉ®ÁªìÊûÑÂ¶ÇÂõæÔºö</p><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/3.png"></p><hr><h3 id="Ë∫´‰ªΩÈ™åËØÅ"><a href="#Ë∫´‰ªΩÈ™åËØÅ" class="headerlink" title="Ë∫´‰ªΩÈ™åËØÅ"></a>Ë∫´‰ªΩÈ™åËØÅ</h3><p><strong>principals</strong>ÔºöË∫´‰ªΩÔºåÂç≥‰∏ª‰ΩìÁöÑÊ†áËØÜÂ±ûÊÄßÔºåÂèØ‰ª•ÊòØ‰ªª‰Ωï‰∏úË•øÔºåÂ¶ÇÁî®Êà∑Âêç„ÄÅÈÇÆÁÆ±Á≠âÔºåÂîØ‰∏ÄÂç≥ÂèØ„ÄÇ </p><p><strong>credentials</strong>ÔºöËØÅÊòé / Âá≠ËØÅÔºåÂç≥Âè™Êúâ‰∏ª‰ΩìÁü•ÈÅìÁöÑÂÆâÂÖ®ÂÄºÔºåÂ¶ÇÂØÜÁ†Å / Êï∞Â≠óËØÅ‰π¶Á≠â„ÄÇ </p><ul><li>Ë∫´‰ªΩËÆ§ËØÅÊµÅÁ®ã</li></ul><p><img src="http://wiki.jikexueyuan.com/project/shiro/images/4.png"></p><hr><h3 id="ÊéàÊùÉ"><a href="#ÊéàÊùÉ" class="headerlink" title="ÊéàÊùÉ"></a>ÊéàÊùÉ</h3><p>ÊéàÊùÉÔºå‰πüÂè´ËÆøÈóÆÊéßÂà∂ÔºåÂç≥Âú®Â∫îÁî®‰∏≠ÊéßÂà∂Ë∞ÅËÉΩËÆøÈóÆÂì™‰∫õËµÑÊ∫êÔºàÂ¶ÇËÆøÈóÆÈ°µÈù¢/ÁºñËæëÊï∞ÊçÆ/È°µÈù¢Êìç‰ΩúÁ≠âÔºâ„ÄÇÂú®ÊéàÊùÉ‰∏≠ÈúÄ‰∫ÜËß£ÁöÑÂá†‰∏™ÂÖ≥ÈîÆÂØπË±°Ôºö‰∏ª‰ΩìÔºàSubjectÔºâ„ÄÅËµÑÊ∫êÔºàResourceÔºâ„ÄÅÊùÉÈôêÔºàPermissionÔºâ„ÄÅËßíËâ≤ÔºàRoleÔºâ„ÄÇ </p><ul><li><p>ÊéàÊùÉÊñπÂºè</p><p>ÁºñÁ®ãÂºè„ÄÅÊ≥®Ëß£Âºè„ÄÅjsp/gspÊ†áÁ≠æÂºè</p></li></ul><h1 id="casdoor"><a href="#casdoor" class="headerlink" title="casdoor"></a>casdoor</h1><h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><ul><li><p>docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -p 18000:8000 \</span><br><span class="line">  -v /usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro \</span><br><span class="line">  -v /home/dingodb/dongwei/docker/timezone:/etc/timezone:ro \</span><br><span class="line">  casbin/casdoor-all-in-one</span><br></pre></td></tr></table></figure><blockquote><p>ÂÆπÂô®ÂÜÖÈÉ®ÊúçÂä°Á´ØÂè£8000ÔºåÊò†Â∞ÑÊàêÂØπÂ§ñËÆøÈóÆÊé•Á´ØÂè£ 18000</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> security </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git mergetool</title>
      <link href="/2023/12/08/git%20mergetool/"/>
      <url>/2023/12/08/git%20mergetool/</url>
      
        <content type="html"><![CDATA[<h1 id="vimdiff"><a href="#vimdiff" class="headerlink" title="vimdiff"></a>vimdiff</h1><h2 id="ËøõÂÖ•ÂÜ≤Á™ÅËß£ÂÜ≥Á™óÂè£"><a href="#ËøõÂÖ•ÂÜ≤Á™ÅËß£ÂÜ≥Á™óÂè£" class="headerlink" title="ËøõÂÖ•ÂÜ≤Á™ÅËß£ÂÜ≥Á™óÂè£"></a>ËøõÂÖ•ÂÜ≤Á™ÅËß£ÂÜ≥Á™óÂè£</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mergetool</span><br></pre></td></tr></table></figure><p>Á™óÂè£ÊòæÁ§∫ÂõõÈÉ®ÂàÜÂÜÖÂÆπ</p><ul><li><p>LOCAL ‚Äì this is file from the current branch </p></li><li><p>BASE ‚Äì common ancestor, how file looked before both changes </p></li><li><p>REMOTE ‚Äì file you are merging into your branch </p></li><li><p>MERGED ‚Äì merge result, this is what gets saved in the repo</p></li></ul><p>ÁßªÂä®Á™óÂè£ÊñπÊ≥ï</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Ctrl w + h   # move to the split on the left </span><br><span class="line">Ctrl w + j   # move to the split below</span><br><span class="line">Ctrl w + k   # move to the split on top</span><br><span class="line">Ctrl w + l   # move to the split on the right</span><br></pre></td></tr></table></figure><p>Â§ÑÁêÜÂÜ≤Á™Å</p><ul><li><p>ÂèØÁßªÂä®Âà∞mergeÁ™óÂè£ÂéªÊâãÂä®Êîπ</p></li><li><p>‰ΩøÁî®ÂëΩ‰ª§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:diffg RE  # get from REMOTE</span><br><span class="line">:diffg BA  # get from BASE</span><br><span class="line">:diffg LO  # get from LOCAL</span><br></pre></td></tr></table></figure></li></ul><p>‰øùÂ≠òÈÄÄÂá∫</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wqa</span><br></pre></td></tr></table></figure><h1 id="Meld"><a href="#Meld" class="headerlink" title="Meld"></a>Meld</h1><p>todo</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AI</title>
      <link href="/2023/12/08/ai/"/>
      <url>/2023/12/08/ai/</url>
      
        <content type="html"><![CDATA[<h1 id="machine-learning"><a href="#machine-learning" class="headerlink" title="machine learning"></a>machine learning</h1><p><a href="https://developers.google.com/machine-learning/glossary/fundamentals?hl=zh-cn">Êú∫Âô®Â≠¶‰π†ÊúØËØ≠Ë°®</a></p><h1 id="Êú∫Âô®Â≠¶‰π†Á±ªÂûã"><a href="#Êú∫Âô®Â≠¶‰π†Á±ªÂûã" class="headerlink" title="Êú∫Âô®Â≠¶‰π†Á±ªÂûã"></a>Êú∫Âô®Â≠¶‰π†Á±ªÂûã</h1><p><a href="https://developers.google.com/machine-learning/intro-to-ml/what-is-ml?hl=zh-cn">‰ªÄ‰πàÊòØÊú∫Âô®Â≠¶‰π†Ôºü</a></p><p>Ê†πÊçÆÊú∫Âô®Â≠¶‰π†Á≥ªÁªüÂ≠¶‰π†ËøõË°åÈ¢ÑÊµãÊàñÁîüÊàêÂÜÖÂÆπÁöÑÊñπÂºèÔºåÊú∫Âô®Â≠¶‰π†Á≥ªÁªüÂèØÂàÜ‰∏∫‰ª•‰∏ã‰∏Ä‰∏™ÊàñÂ§ö‰∏™Á±ªÂà´Ôºö</p><ul><li>ÁõëÁù£ÂºèÂ≠¶‰π†</li><li>ÈùûÁõëÁù£ÂºèÂ≠¶‰π†</li><li>Âº∫ÂåñÂ≠¶‰π†</li><li>ÁîüÊàêÂºè AI</li></ul><ul><li>ÂÆûÁé∞Êú∫Âô®Â≠¶‰π†ÁöÑ‰∏ÄËà¨Ê≠•È™§Ôºö</li></ul><ol><li>Êï∞ÊçÆÊî∂ÈõÜ</li><li>Êï∞ÊçÆÂáÜÂ§á</li><li>Êï∞ÊçÆÂàÜÊûê</li><li>ËÆ≠ÁªÉÁÆóÊ≥ï</li><li>ÊµãËØïÁÆóÊ≥ï</li><li>Â∫îÁî®ÁÆóÊ≥ï</li></ol><h2 id="Êï∞ÊçÆ"><a href="#Êï∞ÊçÆ" class="headerlink" title="Êï∞ÊçÆ"></a>Êï∞ÊçÆ</h2><p>ËÆ≠ÁªÉÈõÜ„ÄÅÈ™åËØÅÈõÜ„ÄÅÊµãËØïÈõÜ</p><h1 id="FSM"><a href="#FSM" class="headerlink" title="FSM"></a>FSM</h1><blockquote><p>The FSM can change from one state to another in response to some inputs; the change from one state to another is called a <em>transition</em>.</p></blockquote><p><img src="./images/fsm/Automata_theory.png"></p><hr><p><strong>reference</strong></p><ul><li><a href="https://en.wikipedia.org/wiki/Finite-state_machine">https://en.wikipedia.org/wiki/Finite-state_machine</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tmux</title>
      <link href="/2023/11/15/tmux%20snippet/"/>
      <url>/2023/11/15/tmux%20snippet/</url>
      
        <content type="html"><![CDATA[<p>session -&gt; window -&gt; pane</p><h1 id="session"><a href="#session" class="headerlink" title="session"></a>session</h1><table><thead><tr><th>ÂäüËÉΩ</th><th>macos</th><th>linux</th></tr></thead><tbody><tr><td>Êñ∞Âª∫session</td><td>tmux new -s <session-name></td><td>same</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="Á™óÂè£"><a href="#Á™óÂè£" class="headerlink" title="Á™óÂè£"></a>Á™óÂè£</h1><table><thead><tr><th>ÂäüËÉΩ</th><th>macos</th><th>linux</th></tr></thead><tbody><tr><td>Êõ¥ÊîπÂΩìÂâçÁ™óÂè£ÁöÑÁ¥¢ÂºïÂè∑</td><td>ÂëΩ‰ª§Ê®°ÂºèÔºömove-window [space] -t [space]  xx</td><td>Same</td></tr></tbody></table><h1 id="Á™óÊ†º"><a href="#Á™óÊ†º" class="headerlink" title="Á™óÊ†º"></a>Á™óÊ†º</h1><table><thead><tr><th>ÂäüËÉΩ</th><th>macos</th><th>linux</th></tr></thead><tbody><tr><td>Ë∞ÉÊï¥Á™óÊ†ºÂ§ßÂ∞è</td><td>Ctrl + b, Esc + ÊñπÂêëÈîÆ</td><td>Ctrl + b, Ctrl + ÊñπÂêëÈîÆ</td></tr><tr><td>Á™óÊ†ºÂÜÖÂÆπÁøªÈ°µ</td><td>Ctrl + b, (Fn + ‰∏ä‰∏ãÈîÆ) Êàñ PgUp/PgDn</td><td>Ctrl + b, Ctrl + ‰∏ä‰∏ãÈîÆ</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="ÂÖ∂ÂÆÉ"><a href="#ÂÖ∂ÂÆÉ" class="headerlink" title="ÂÖ∂ÂÆÉ"></a>ÂÖ∂ÂÆÉ</h1><table><thead><tr><th>ÂäüËÉΩ</th><th>macos</th><th>linux</th></tr></thead><tbody><tr><td>ÂÜÖÂµåtmuxÊìç‰Ωú</td><td><strong>ÊåâÁùÄ ctrlÔºåÁÇπÂáª‰∏§Ê¨° b ÈîÆ</strong></td><td>Same</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="ÂëΩ‰ª§Ê®°Âºè"><a href="#ÂëΩ‰ª§Ê®°Âºè" class="headerlink" title="ÂëΩ‰ª§Ê®°Âºè"></a>ÂëΩ‰ª§Ê®°Âºè</h1><p><code>ctrl + b</code> ÁÑ∂ÂêéÊåâ‰∏ã<code>:</code></p><h2 id="‰ºöËØù-session"><a href="#‰ºöËØù-session" class="headerlink" title="‰ºöËØù(session)"></a>‰ºöËØù(session)</h2><ul><li><p>ÂàõÂª∫‰ºöËØù</p><p><code>new-session -s &lt;session name&gt;</code> </p></li><li><p>ÂàáÊç¢‰ºöËØù</p><p><code>switch-client -t &lt;session name or id&gt;</code></p></li><li><p>Âà†Èô§‰ºöËØù</p><p><code>tmux kill-session -t &lt;session-name&gt;</code></p></li></ul><h2 id="Á™óÂè£-window"><a href="#Á™óÂè£-window" class="headerlink" title="Á™óÂè£(window)"></a>Á™óÂè£(window)</h2><ul><li><p>Âø´ÈÄüÂÆö‰ΩçÊåáÂÆöÁºñÂè∑ÁöÑÁ™óÂè£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂÆö‰ΩçÁºñÂè∑Â∞è‰∫é10ÁöÑÁ™óÂè£</span></span><br><span class="line">Ctrl + b &lt;index&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂÆö‰ΩçÁºñÂè∑Â§ß‰∫éÁ≠â‰∫é10ÁöÑÁ™óÂè£</span></span><br><span class="line">Ctrl + b</span><br><span class="line">&#x27; (single quote)</span><br><span class="line">14</span><br><span class="line">Enter</span><br></pre></td></tr></table></figure></li><li><p>‰∫§Êç¢Á™óÂè£‰ΩçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ‰∫§Êç¢ÁºñÂè∑3‰∏éÁºñÂè∑1Á™óÂè£ÁöÑ‰ΩçÁΩÆ</span></span><br><span class="line">swap-window -s 3 -t 1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊääÂΩìÂâçÁ™óÂè£ÊîæÂà∞ÊåáÂÆöÁºñÂè∑1ÁöÑ‰ΩçÁΩÆ</span></span><br><span class="line">swap-window -t 0</span><br></pre></td></tr></table></figure></li><li><p>Êñ∞Âª∫Á™óÂè£</p><p><code>new-window -n &lt;window name&gt;</code></p></li><li><p>ÂàáÊç¢Á™óÂè£</p><p><code>select-window -t &lt;window id&gt;</code></p><p><code>select-window -n &lt;window name&gt;</code></p></li></ul><h2 id="Á™óÊ†º-pane"><a href="#Á™óÊ†º-pane" class="headerlink" title="Á™óÊ†º(pane)"></a>Á™óÊ†º(pane)</h2><ul><li><p>ÂàÜÂâ≤Á™óÊ†º</p><p><code>split-window -h</code> Ê∞¥Âπ≥</p><p><code>split-window -v</code> ÂûÇÁõ¥</p></li><li><p>ÊîπÂèò‰ΩçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check pane num</span></span><br><span class="line">Ctrl + b, Then press q # this will display pane numbers</span><br><span class="line"></span><br><span class="line">:swap-pane -s &lt;source-pane&gt; -t &lt;target-pane&gt;</span><br><span class="line">or </span><br><span class="line">:swap-pane -t &lt;target-pane&gt;</span><br></pre></td></tr></table></figure></li><li><p>ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåwindowÁöÑÊâÄÊúâpane</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">enable</span></span></span><br><span class="line">setw synchronize-panes on</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">disable</span></span></span><br><span class="line">setw synchronize-panes off</span><br></pre></td></tr></table></figure></li></ul><h1 id="Tmux-Plugin-Manager-TPM"><a href="#Tmux-Plugin-Manager-TPM" class="headerlink" title="Tmux Plugin Manager (TPM)"></a>Tmux Plugin Manager (TPM)</h1><ul><li><p>ÈÖçÁΩÆÊñá‰ª∂Âú∞ÂùÄ<code>~/.tmux.conf</code></p><p>‰øÆÊîπÈÖçÁΩÆÁîüÊïà <code>tmux source-file ~/.tmux.conf</code></p></li><li><h5 id="‰ΩøÁî®Âø´Êç∑ÈîÆÊèí‰ª∂ÁÆ°ÁêÜ"><a href="#‰ΩøÁî®Âø´Êç∑ÈîÆÊèí‰ª∂ÁÆ°ÁêÜ" class="headerlink" title="‰ΩøÁî®Âø´Êç∑ÈîÆÊèí‰ª∂ÁÆ°ÁêÜ"></a>‰ΩøÁî®Âø´Êç∑ÈîÆÊèí‰ª∂ÁÆ°ÁêÜ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># prefixË°®Á§∫ÊòØTmuxÁöÑÂø´Êç∑ÈîÆÂâçÁºÄ</span><br><span class="line">prefix shift-i      # ÂÆâË£Ö‰ª∂ÂàóË°®‰∏≠ÁöÑÊèí‰ª∂</span><br><span class="line">prefix shift-u      # Êõ¥Êñ∞‰ª∂ÂàóË°®‰∏≠ÁöÑÊèí‰ª∂</span><br><span class="line">prefix alt-u        # Âà†Èô§/Âç∏ËΩΩ‰∏çÂú®Êèí‰ª∂ÂàóË°®‰∏≠ÁöÑÊèí‰ª∂</span><br></pre></td></tr></table></figure></li><li><h5 id="‰ΩøÁî®ÂëΩ‰ª§Ë°åÊèí‰ª∂ÁÆ°ÁêÜ"><a href="#‰ΩøÁî®ÂëΩ‰ª§Ë°åÊèí‰ª∂ÁÆ°ÁêÜ" class="headerlink" title="‰ΩøÁî®ÂëΩ‰ª§Ë°åÊèí‰ª∂ÁÆ°ÁêÜ"></a>‰ΩøÁî®ÂëΩ‰ª§Ë°åÊèí‰ª∂ÁÆ°ÁêÜ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~/.tmux/plugins/tpm/bin/install_plugins                  # ÂÆâË£Ö‰ª∂ÂàóË°®‰∏≠ÁöÑÊèí‰ª∂</span><br><span class="line">~/.tmux/plugins/tpm/bin/update_plugins all|plugname      # Êõ¥Êñ∞ÊâÄÊúâÊèí‰ª∂ÊàñÊåáÂÆöÊèí‰ª∂</span><br><span class="line">~/.tmux/plugins/tpm/bin/clean_plugins                    # Âà†Èô§/Âç∏ËΩΩ‰∏çÂú®Êèí‰ª∂ÂàóË°®‰∏≠ÁöÑÊèí‰ª∂</span><br></pre></td></tr></table></figure></li><li><h5 id="‰øùÂ≠ò-ÊÅ¢Â§ç‰ºöËØù-tmux-resurrect"><a href="#‰øùÂ≠ò-ÊÅ¢Â§ç‰ºöËØù-tmux-resurrect" class="headerlink" title="‰øùÂ≠ò/ÊÅ¢Â§ç‰ºöËØù tmux-resurrect"></a>‰øùÂ≠ò/ÊÅ¢Â§ç‰ºöËØù tmux-resurrect</h5><blockquote><p>ÈªòËÆ§‰ºöËØùÊï∞ÊçÆË∑ØÂæÑ /.local/share/tmux/resurrect</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">‰øùÂ≠òTmux‰ºöËØùÔºöÂâçÁºÄÈîÆ + Ctrl-s</span><br><span class="line">ËøòÂéüTmux‰ºöËØùÔºö ÂâçÁºÄÈîÆ + Ctrl-r</span><br><span class="line"></span><br><span class="line">Tmux Resurrect ‰ºöÂ∞Ü Tmux ‰ºöËØùÁöÑËØ¶ÁªÜ‰ø°ÊÅØ‰ª•ÊñáÊú¨Êñá‰ª∂ÂΩ¢Âºè‰øùÂ≠òÂà∞ ~/.tmux/resurrect ÁõÆÂΩïÔºõ</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> tmux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python snippet</title>
      <link href="/2023/11/14/python%20snippet/"/>
      <url>/2023/11/14/python%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="ËôöÊãüÁéØÂ¢É"><a href="#ËôöÊãüÁéØÂ¢É" class="headerlink" title="ËôöÊãüÁéØÂ¢É"></a>ËôöÊãüÁéØÂ¢É</h1><p>È°πÁõÆÁ≤íÂ∫¶Ôºöpython -m venv venv<br>                    poetry<br>Á≥ªÁªüÁ≤íÂ∫¶Ôºöpyenv<br>                    conda</p><h1 id="Êåá‰ª§"><a href="#Êåá‰ª§" class="headerlink" title="Êåá‰ª§"></a>Êåá‰ª§</h1><ul><li><p>ÂÆâË£Ötar.gzÔºåËß£Âéã‰πãÂêéÔºåÊâßË°å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 setup.py install</span><br></pre></td></tr></table></figure></li></ul><h2 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h2><ul><li><p>ÂõΩÂÜÖÈïúÂÉè</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://pypi.mirrors.ustc.edu.cn/simple</span><br><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></li><li><p>ÂÆâË£ÖÂ≠êÊ®°Âùó</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install &#x27;fastapi_amis_admin[cli]&#x27;  # Ê≥®ÊÑèÂºïÂè∑</span><br></pre></td></tr></table></figure></li><li><p>Êü•ÁúãÊåáÂÆö‰æùËµñÁâàÊú¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip show package_name</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÊääÈ°πÁõÆÁöÑ‰æùËµñÊîæÂÖ•ÊåáÂÆöÊñá‰ª∂</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure></li><li><p>Ê∏ÖÈô§ÁºìÂ≠ò</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip cache purge</span><br></pre></td></tr></table></figure></li></ul><h1 id="Buildins"><a href="#Buildins" class="headerlink" title="Buildins"></a>Buildins</h1><ul><li>Ë£ÖÈ•∞Âô® <code>staticmethod</code> Áî®‰∫éÂÆö‰πâ‰∏éÁ±ªÊàñÂÆû‰æãÊó†ÂÖ≥ÁöÑÂáΩÊï∞ÔºåËÄå <code>classmethod</code> Áî®‰∫éÂÆö‰πâÈúÄË¶ÅËÆøÈóÆÁ±ªÊàñÁ±ªÂèòÈáèÁöÑÂáΩÊï∞„ÄÇ</li></ul><h1 id="profiler"><a href="#profiler" class="headerlink" title="profiler"></a>profiler</h1><h2 id="py-spy"><a href="#py-spy" class="headerlink" title="py-spy"></a>py-spy</h2><ul><li>record</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo py-spy record -o tableagent.svg --pid 37152</span><br></pre></td></tr></table></figure><h1 id="‰ø°Âàõ"><a href="#‰ø°Âàõ" class="headerlink" title="‰ø°Âàõ"></a>‰ø°Âàõ</h1><ul><li><p>ÂÆâË£Öpython3-devel</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install python3-devel</span><br></pre></td></tr></table></figure></li></ul><h1 id="ËßÑËåÉ"><a href="#ËßÑËåÉ" class="headerlink" title="ËßÑËåÉ"></a>ËßÑËåÉ</h1><ul><li><p><strong>ËØ∑ÈÄâÊã©Âõõ‰∏™Á©∫Ê†ºÁöÑÁº©ËøõÔºå‰∏çË¶Å‰ΩøÁî® TabÔºåÊõ¥‰∏çË¶Å Tab ÂíåÁ©∫Ê†ºÊ∑∑ÁùÄÁî®„ÄÇ</strong></p></li><li><p><strong>ÂÖ®Â±ÄÁöÑÁ±ªÂíåÂáΩÊï∞ÁöÑ‰∏äÊñπÈúÄË¶ÅÁ©∫‰∏§‰∏™Á©∫Ë°åÔºåËÄåÁ±ªÁöÑÂáΩÊï∞‰πãÈó¥ÈúÄË¶ÅÁ©∫‰∏Ä‰∏™Á©∫Ë°å</strong></p></li><li><p>‰ª£Á†ÅÁöÑÂ∞æÈÉ®ÔºåÊØè‰∏™‰ª£Á†ÅÊñá‰ª∂ÁöÑÊúÄÂêé‰∏ÄË°å‰∏∫Á©∫Ë°åÔºåÂπ∂‰∏îÂè™ÊúâËøô‰∏Ä‰∏™Á©∫Ë°å„ÄÇ</p></li><li><p>ÂèØ‰ª•‰ΩøÁî®<code>#</code>ËøõË°åÂçïÁã¨Ê≥®ÈáäÔºåËØ∑ËÆ∞ÂæóË¶ÅÂú®<code>#</code>Âêé„ÄÅÊ≥®ÈáäÂâçÂä†‰∏Ä‰∏™Á©∫Ê†º„ÄÇ</p></li><li><p>ÂØπ‰∫éÊìç‰ΩúÁ¨¶Ôºå‰æãÂ¶Ç<code>+</code>Ôºå<code>-</code>Ôºå<code>*</code>Ôºå<code>/</code>Ôºå<code>&amp;</code>Ôºå<code>|</code>Ôºå<code>=</code>Ôºå<code>==</code>Ôºå<code>!=</code>ÔºåËØ∑Âú®‰∏§ËæπÈÉΩ‰øùÁïôÁ©∫Ê†º„ÄÇ‰∏çËøá‰∏éÊ≠§ÂØπÂ∫îÔºåÊã¨Âè∑ÂÜÖÁöÑ‰∏§Á´ØÂπ∂‰∏çÈúÄË¶ÅÁ©∫Ê†º„ÄÇ</p></li><li><p>ÈááÁî® <code>from module import func</code> ËøôÊ†∑ÁöÑËØ≠Âè•ÔºåËØ∑Á°Æ‰øù func Âú®Êú¨Êñá‰ª∂‰∏≠‰∏ç‰ºöÂá∫Áé∞ÂëΩÂêçÂÜ≤Á™Å„ÄÇ‰∏çËøáÔºå‰Ω†ÂÖ∂ÂÆûÂèØ‰ª•ÈÄöËøá <code>from module import func as new_func</code> Êù•ËøõË°åÈáçÂëΩÂêçÔºå‰ªéËÄåÈÅøÂÖçÂÜ≤Á™Å„ÄÇ</p></li><li><p>Â¶ÇÊûúÊòØÁ±ªÁöÑÁßÅÊúâÂèòÈáèÔºåËØ∑ËÆ∞ÂæóÂâçÈù¢Â¢ûÂä†‰∏§‰∏™‰∏ãÂàíÁ∫ø„ÄÇ</p></li><li><p>ÂØπ‰∫éÂ∏∏ÈáèÔºåÊúÄÂ•ΩÁöÑÂÅöÊ≥ïÊòØÂÖ®ÈÉ®Â§ßÂÜôÔºåÂπ∂ÈÄöËøá‰∏ãÂàíÁ∫øËøûÊé•</p></li><li><p>ÂØπ‰∫éÂáΩÊï∞ÂêçÔºåÂêåÊ†∑‰πüËØ∑‰ΩøÁî®Â∞èÂÜôÁöÑÊñπÂºèÔºåÈÄöËøá‰∏ãÂàíÁ∫øËøûÊé•Ëµ∑Êù•Ôºå‰æãÂ¶ÇÔºö<code>launch_nuclear_missile()</code>„ÄÅ<code>check_input_validation()</code>„ÄÇ</p></li><li><p>ÂØπ‰∫éÁ±ªÂêçÔºåÂàôÂ∫îËØ•È¶ñÂ≠óÊØçÂ§ßÂÜôÔºåÁÑ∂ÂêéÂêàÂπ∂Ëµ∑Êù•Ôºå‰æãÂ¶ÇÔºö<code>class SpatialDropout2D()</code>„ÄÅ<code>class FeatureSet()</code>„ÄÇ</p></li></ul><h1 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h1><h2 id="SOLID"><a href="#SOLID" class="headerlink" title="SOLID"></a>SOLID</h2><ul><li><p>S <em>ÔºàÂçï‰∏ÄËÅåË¥£ÂéüÂàô Single responsibility principleÔºâ</em> </p><ul><li><strong>‰∏Ä‰∏™Á±ªÂ∫îËØ•‰ªÖ‰ªÖÂè™Êúâ‰∏Ä‰∏™Ë¢´‰øÆÊîπÁöÑÁêÜÁî±„ÄÇ</strong></li></ul></li><li><p>O <em>ÔºàÂºÄÊîæ-ÂÖ≥Èó≠ÂéüÂàô Open‚Äìclosed principleÔºâ</em></p><ul><li><strong>Á±ªÂ∫îËØ•ÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂ∞ÅÈó≠„ÄÇ</strong></li></ul></li><li><p>L <em>ÔºàÈáåÊ∞èÊõøÊç¢ÂéüÂàô Liskov Substitution PrincipleÔºâ</em></p><ul><li><strong>Â≠êÁ±ªÂ∫îËØ•ÂèØ‰ª•ÈöèÊÑèÊõøÊç¢ÂÆÉÁöÑÁà∂Á±ª ÔºåËÄå‰∏çÁ†¥ÂùèÁ®ãÂ∫è Êú¨Ë∫´ÁöÑÂäüËÉΩ</strong></li></ul></li><li><p>I <em>ÔºàÊé•Âè£ÈöîÁ¶ªÂéüÂàô Interface Segregation PrinciplesÔºâ</em></p><ul><li><strong>ÂÆ¢Êà∑ÔºàclientÔºâÂ∫îËØ•‰∏ç‰æùËµñ‰∫éÂÆÉ‰∏ç‰ΩøÁî®ÁöÑÊñπÊ≥ï</strong></li></ul></li><li><p>D <em>Ôºà‰æùËµñÂÄíÁΩÆÂéüÂàô Dependency Inversion PrincipleÔºâ</em></p><ul><li><strong>È´òÂ±ÇÊ®°Âùó‰∏çÂ∫îËØ•‰æùËµñ‰∫é‰ΩéÂ±ÇÊ®°ÂùóÔºå‰∫åËÄÖÈÉΩÂ∫îËØ•‰æùËµñ‰∫éÊäΩË±°„ÄÇ</strong></li></ul></li></ul><h2 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h2><ul><li>Â•Ω‰ª£Á†ÅÂú®Â§ÑÁêÜËæπÁïåÊÉÖÂÜµÊó∂Â∫îËØ•ÊòØÁÆÄÊ¥ÅÁöÑ„ÄÅ‚ÄúÊ∂¶Áâ©ÁªÜÊó†Â£∞‚ÄùÁöÑ</li></ul><h2 id="code-practise"><a href="#code-practise" class="headerlink" title="code practise"></a>code practise</h2><h4 id="ËæπÁïåÊÉÖÂÜµÔºàEdge-casesÔºâ"><a href="#ËæπÁïåÊÉÖÂÜµÔºàEdge-casesÔºâ" class="headerlink" title="ËæπÁïåÊÉÖÂÜµÔºàEdge casesÔºâ"></a>ËæπÁïåÊÉÖÂÜµÔºàEdge casesÔºâ</h4><ul><li>bad style: <ul><li>LBYLÔºàLook Before You LeapÔºâ</li></ul></li><li>better style:<ul><li>EAFPÔºàEasier to Ask for Forgiveness than PermissionÔºâ</li></ul></li><li>best style<ul><li>Âú®Êó•Â∏∏ÁºñÁ†ÅÊó∂ÔºåÊàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÂéªÊâãÂä®Ê†°È™åÊï∞ÊçÆ„ÄÇËÄåÊòØÂ∫îËØ•‰ΩøÁî®<em>ÔºàÊàñËÄÖËá™Â∑±ÂÆûÁé∞Ôºâ</em>ÂêàÈÄÇÁöÑÁ¨¨‰∏âÊñπÊ†°È™åÊ®°ÂùóÔºåÊääËøôÈÉ®ÂàÜËæπÁïåÂ§ÑÁêÜÂ∑•‰ΩúÊäΩË±°Âá∫ÂéªÔºåÁÆÄÂåñ‰∏ªÊµÅÁ®ã‰ª£Á†Å„ÄÇ</li></ul></li></ul><h1 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h1><h3 id="ÁªüËÆ°ËøêË°åÊó∂Èó¥"><a href="#ÁªüËÆ°ËøêË°åÊó∂Èó¥" class="headerlink" title="ÁªüËÆ°ËøêË°åÊó∂Èó¥"></a>ÁªüËÆ°ËøêË°åÊó∂Èó¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÊØ´ÁßíÂÄº</span></span><br><span class="line">start_time = time.perf_counter()</span><br><span class="line">xxx</span><br><span class="line">cost_time = <span class="built_in">int</span>((time.perf_counter() - start_time)* <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><h3 id="call-ÂáΩÊï∞"><a href="#call-ÂáΩÊï∞" class="headerlink" title="__call__ÂáΩÊï∞"></a><code>__call__ÂáΩÊï∞</code></h3><p><code>__call__</code> ÊñπÊ≥ïÊòØ Python ‰∏≠ÁöÑ‰∏Ä‰∏™ÁâπÊÆäÊñπÊ≥ïÔºà‰πüÁß∞‰∏∫È≠îÊúØÊñπÊ≥ïÔºâÔºåÁî®‰∫éÂ∞Ü‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®„ÄÇÂΩì‰∏Ä‰∏™ÂØπË±°Ë¢´‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂ÔºåPython Ëß£ÈáäÂô®‰ºöËá™Âä®Ë∞ÉÁî®ËØ•ÂØπË±°ÁöÑ <code>__call__</code> ÊñπÊ≥ï„ÄÇ</p><p>Âú®Á±ª‰∏≠ÂÆö‰πâ <code>__call__</code> ÊñπÊ≥ïÂèØ‰ª•‰ΩøÂØπË±°ÂÖ∑ÊúâÂèØË∞ÉÁî®ÁöÑË°å‰∏∫ÔºåÂ∞±ÂÉèË∞ÉÁî®ÂáΩÊï∞‰∏ÄÊ†∑„ÄÇËøôÊ†∑ÁöÑÂØπË±°Ë¢´Áß∞‰∏∫ÂèØË∞ÉÁî®ÂØπË±°„ÄÇÈÄöËøáÂÆûÁé∞ <code>__call__</code> ÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÂØπË±°Ë¢´Ë∞ÉÁî®Êó∂ÊâßË°åÁâπÂÆöÁöÑÈÄªËæë„ÄÇ</p><p>‰ª•‰∏ãÊòØ‰∏Ä‰∏™Á§∫‰æãÔºåÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂÆö‰πâÂíå‰ΩøÁî® <code>__call__</code> ÊñπÊ≥ïÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CallableClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Object is being called&quot;</span>)</span><br><span class="line"></span><br><span class="line">obj = CallableClass()</span><br><span class="line">obj()  <span class="comment"># Á≠âÂêå‰∫éË∞ÉÁî® obj.__call__()</span></span><br></pre></td></tr></table></figure><p>Âú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰∏≠ÔºåÊàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ <code>CallableClass</code> ÁöÑÁ±ªÔºåÂπ∂Âú®ÂÖ∂‰∏≠ÂÆûÁé∞‰∫Ü <code>__call__</code> ÊñπÊ≥ï„ÄÇÂΩìÂàõÂª∫ <code>CallableClass</code> ÁöÑÂÆû‰æã <code>obj</code> Âπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ôºå<code>__call__</code> ÊñπÊ≥ï‰ºöË¢´Ëá™Âä®Ë∞ÉÁî®ÔºåÂπ∂ÊâìÂç∞Âá∫ ‚ÄúObject is being called‚Äù„ÄÇ</p><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå<code>__call__</code> ÊñπÊ≥ïÂèØ‰ª•Â∏¶ÊúâÂèÇÊï∞ÔºåÂ∞±ÂÉèÊôÆÈÄöÁöÑÂáΩÊï∞‰∏ÄÊ†∑„ÄÇÊàë‰ª¨ÂèØ‰ª•Âú® <code>__call__</code> ÊñπÊ≥ï‰∏≠ÂÆö‰πâ‰ªªÊÑèÁöÑÈÄªËæëÔºåÂèØ‰ª•ËÆøÈóÆÂÆû‰æãÁöÑÂ±ûÊÄß„ÄÅË∞ÉÁî®ÂÖ∂‰ªñÊñπÊ≥ïÁ≠â„ÄÇ</p><p>‰ΩøÁî® <code>__call__</code> ÊñπÊ≥ïÂèØ‰ª•‰ΩøÂØπË±°ÂÖ∑ÊúâÁ±ª‰ººÂáΩÊï∞ÁöÑË°å‰∏∫ÔºåËøôÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÈùûÂ∏∏ÊúâÁî®Ôºå‰æãÂ¶ÇÂÆûÁé∞ÂèØË∞ÉÁî®ÁöÑÁ±ªÊàñÂÆûÁé∞ÂáΩÊï∞ÂºèÁºñÁ®ãÁöÑÊ¶ÇÂøµ„ÄÇ</p><h3 id="‰ΩøÁî®"><a href="#‰ΩøÁî®" class="headerlink" title="**‰ΩøÁî®"></a><code>**</code>‰ΩøÁî®</h3><ul><li><p><code>**</code> ËøêÁÆóÁ¨¶Áî®‰∫éËß£ÂåÖÂ≠óÂÖ∏ÊàñÂÖ≥ÈîÆÂ≠óÂèÇÊï∞„ÄÇÂΩìÂ∫îÁî®‰∫éÂ≠óÂÖ∏Êó∂Ôºå<code>**</code> ËøêÁÆóÁ¨¶ÂèØ‰ª•Â∞ÜÂ≠óÂÖ∏‰∏≠ÁöÑÈîÆÂÄºÂØπËß£ÂåÖ‰∏∫‰∏ÄÁ≥ªÂàóÂÖ≥ÈîÆÂ≠óÂèÇÊï∞‰º†ÈÄíÁªôÂáΩÊï∞ÊàñÊñπÊ≥ï„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_person_info</span>(<span class="params">name, age, city</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Name: <span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Age: <span class="subst">&#123;age&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;City: <span class="subst">&#123;city&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">person = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_person_info(**person)</span><br></pre></td></tr></table></figure></li></ul><h3 id="Â∏ÉÂ∞îÁúüÂÅáÂà§Êñ≠"><a href="#Â∏ÉÂ∞îÁúüÂÅáÂà§Êñ≠" class="headerlink" title="Â∏ÉÂ∞îÁúüÂÅáÂà§Êñ≠"></a>Â∏ÉÂ∞îÁúüÂÅáÂà§Êñ≠</h3><p>ËôΩÁÑ∂ÊâÄÊúâÁî®Êà∑Á±ªÂÆû‰æãÁöÑÂ∏ÉÂ∞îÂÄºÈÉΩÊòØÁúü„ÄÇ‰ΩÜÊòØ Python Êèê‰æõ‰∫ÜÊîπÂèòËøô‰∏™Ë°å‰∏∫ÁöÑÂäûÊ≥ïÔºö<strong>Ëá™ÂÆö‰πâÁ±ªÁöÑ <code>__bool__</code> È≠îÊ≥ïÊñπÊ≥ï</strong> <em>ÔºàÂú® Python 2.X ÁâàÊú¨‰∏≠‰∏∫ <code>__nonzero__</code>Ôºâ</em>„ÄÇÂΩìÁ±ªÂÆö‰πâ‰∫Ü <code>__bool__</code> ÊñπÊ≥ïÂêéÔºåÂÆÉÁöÑËøîÂõûÂÄºÂ∞Ü‰ºöË¢´ÂΩì‰ΩúÁ±ªÂÆû‰æãÁöÑÂ∏ÉÂ∞îÂÄº„ÄÇ</p><p>Âè¶Â§ñÔºå<code>__bool__</code> ‰∏çÊòØÂΩ±ÂìçÂÆû‰æãÂ∏ÉÂ∞îÁúüÂÅáÁöÑÂîØ‰∏ÄÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÁ±ªÊ≤°ÊúâÂÆö‰πâ <code>__bool__</code> ÊñπÊ≥ïÔºåPython Ëøò‰ºöÂ∞ùËØïË∞ÉÁî® <code>__len__</code> ÊñπÊ≥ï<em>Ôºà‰πüÂ∞±ÊòØÂØπ‰ªª‰ΩïÂ∫èÂàóÂØπË±°Ë∞ÉÁî® <code>len</code> ÂáΩÊï∞Ôºâ</em>ÔºåÈÄöËøáÁªìÊûúÊòØÂê¶‰∏∫ <code>0</code> Âà§Êñ≠ÂÆû‰æãÁúüÂÅá„ÄÇ</p><h3 id="Âú®Êù°‰ª∂Âà§Êñ≠‰∏≠‰ΩøÁî®-all-any"><a href="#Âú®Êù°‰ª∂Âà§Êñ≠‰∏≠‰ΩøÁî®-all-any" class="headerlink" title="Âú®Êù°‰ª∂Âà§Êñ≠‰∏≠‰ΩøÁî® all() / any()"></a>Âú®Êù°‰ª∂Âà§Êñ≠‰∏≠‰ΩøÁî® all() / any()</h3><p><code>all()</code> Âíå <code>any()</code> ‰∏§‰∏™ÂáΩÊï∞ÈùûÂ∏∏ÈÄÇÂêàÂú®Êù°‰ª∂Âà§Êñ≠‰∏≠‰ΩøÁî®„ÄÇËøô‰∏§‰∏™ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ÂèØËø≠‰ª£ÂØπË±°ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåÂÖ∂‰∏≠Ôºö</p><ul><li><code>all(seq)</code>Ôºö‰ªÖÂΩì <code>seq</code> ‰∏≠ÊâÄÊúâÂØπË±°ÈÉΩ‰∏∫Â∏ÉÂ∞îÁúüÊó∂ËøîÂõû <code>True</code>ÔºåÂê¶ÂàôËøîÂõû <code>False</code></li><li><code>any(seq)</code>ÔºöÂè™Ë¶Å <code>seq</code> ‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÂØπË±°‰∏∫Â∏ÉÂ∞îÁúüÂ∞±ËøîÂõû <code>True</code>ÔºåÂê¶ÂàôËøîÂõû <code>False</code></li></ul><h3 id="‰ΩøÁî®-partial-ÊûÑÈÄ†Êñ∞ÂáΩÊï∞"><a href="#‰ΩøÁî®-partial-ÊûÑÈÄ†Êñ∞ÂáΩÊï∞" class="headerlink" title="‰ΩøÁî® partial ÊûÑÈÄ†Êñ∞ÂáΩÊï∞"></a>‰ΩøÁî® partial ÊûÑÈÄ†Êñ∞ÂáΩÊï∞</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * y</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">double</span>(<span class="params">value</span>):</span></span><br><span class="line">    <span class="comment"># ËøîÂõûÂè¶‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®ÁªìÊûú</span></span><br><span class="line">    <span class="keyword">return</span> multiply(<span class="number">2</span>, value)</span><br></pre></td></tr></table></figure><p>ÂèØÂÜôÊàê</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line">double = functools.partial(multiply, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h3><blockquote><p>Mixin ÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ã‰∏≠ÁöÑ‰∏Ä‰∏™ÊúØËØ≠ÔºåÂÆÉË°®Á§∫‰∏ÄÁßçËÆæËÆ°Ê®°ÂºèÔºåÁî®‰∫éÂ∞Ü‰∏ÄÁªÑÂäüËÉΩÊàñË°å‰∏∫‰ª•Ê®°ÂùóÂåñÁöÑÊñπÂºèÊ∑ªÂä†Âà∞Á±ª‰∏≠ÔºåËÄå‰∏çÈúÄË¶Å‰ΩøÁî®ÁªßÊâøÁöÑÊñπÂºè„ÄÇ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendMailMixin</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_mail</span>(<span class="params">self, email</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Sending mail to <span class="subst">&#123;email&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, email</span>):</span></span><br><span class="line">        self.email = email</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdminUser</span>(<span class="params">User, SendMailMixin</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_admin_mail</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.send_mail(self.email)</span><br><span class="line"></span><br><span class="line">admin = AdminUser(<span class="string">&quot;admin@example.com&quot;</span>)</span><br><span class="line">admin.send_admin_mail()  <span class="comment"># ËæìÂá∫: Sending mail to admin@example.com</span></span><br></pre></td></tr></table></figure><p><strong>MixinÂíåabc.ABCÁöÑÂå∫Âà´:</strong></p><ol><li><strong>Áî®ÈÄî</strong>: Mixin‰æßÈáç‰∫é‰ª£Á†ÅÂ§çÁî®ÂíåÂäüËÉΩÊâ©Â±ï,ËÄåabc.ABCÂàôÁî®‰∫éÂÆö‰πâÊäΩË±°Á±ªÂíåÊé•Âè£„ÄÇ</li><li><strong>ÁªßÊâøÂÖ≥Á≥ª</strong>: MixinÈÄöÂ∏∏‰∏éÂÖ∂‰ªñÁ±ª‰∏ÄËµ∑‰ΩøÁî®Â§öÈáçÁªßÊâø,ËÄåabc.ABC‰Ωú‰∏∫Âü∫Á±ªË¢´ÂÖ∑‰ΩìÁ±ªÁªßÊâø„ÄÇ</li><li><strong>ÊäΩË±°Á®ãÂ∫¶</strong>: MixinÂèØ‰ª•ÂåÖÂê´ÂÖ∑‰ΩìÁöÑÂÆûÁé∞,ËÄåabc.ABC‰∏≠ÁöÑÊäΩË±°ÊñπÊ≥ïÂøÖÈ°ªÁî±Â≠êÁ±ªÂÆûÁé∞„ÄÇ</li><li><strong>Á±ªÂûãÊ£ÄÊü•</strong>: abc.ABCÂèØÁî®‰∫éÁ±ªÂûãÊ£ÄÊü•,ËÄåMixinÊó†Ê≥ïÁõ¥Êé•ËøõË°åÁ±ªÂûãÊ£ÄÊü•„ÄÇ</li></ol><h3 id="LOOP"><a href="#LOOP" class="headerlink" title="LOOP"></a>LOOP</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, name <span class="keyword">in</span> <span class="built_in">enumerate</span>(names):</span><br><span class="line">    <span class="built_in">print</span>(i, name)</span><br></pre></td></tr></table></figure><ul><li>‰ΩøÁî® product ÊâÅÂπ≥ÂåñÂ§öÂ±ÇÂµåÂ•óÂæ™ÁéØ</li><li>‰ΩøÁî® islice ÂÆûÁé∞Âæ™ÁéØÂÜÖÈöîË°åÂ§ÑÁêÜ</li><li>‰ΩøÁî® takewhile Êõø‰ª£ break ËØ≠Âè•</li><li>‰ΩøÁî®ÁîüÊàêÂô®ÁºñÂÜôËá™Â∑±ÁöÑ‰øÆÈ•∞ÂáΩÊï∞</li></ul><h3 id="‰øÆÊîπÂ§ñÂ±ÇÂèòÈáèÊó∂ËÆ∞Âæó‰ΩøÁî®-nonlocal"><a href="#‰øÆÊîπÂ§ñÂ±ÇÂèòÈáèÊó∂ËÆ∞Âæó‰ΩøÁî®-nonlocal" class="headerlink" title="‰øÆÊîπÂ§ñÂ±ÇÂèòÈáèÊó∂ËÆ∞Âæó‰ΩøÁî® nonlocal"></a>‰øÆÊîπÂ§ñÂ±ÇÂèòÈáèÊó∂ËÆ∞Âæó‰ΩøÁî® nonlocal</h3><ul><li>Èó≠ÂåÖÁöÑÂèÇÊï∞‰ΩøÁî®</li></ul><h3 id="Á±ªÂØπË±°"><a href="#Á±ªÂØπË±°" class="headerlink" title="Á±ªÂØπË±°"></a>Á±ªÂØπË±°</h3><ul><li><code>cls</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_send_request</span>(<span class="params">cls, method, endpoint, json=<span class="literal">None</span>, params=<span class="literal">None</span></span>):</span></span><br></pre></td></tr></table></figure><h3 id="‰ΩøÁî®-dataclass-ÁÆÄÂåñ‰ª£Á†Å"><a href="#‰ΩøÁî®-dataclass-ÁÆÄÂåñ‰ª£Á†Å" class="headerlink" title="‰ΩøÁî® dataclass ÁÆÄÂåñ‰ª£Á†Å"></a>‰ΩøÁî® dataclass ÁÆÄÂåñ‰ª£Á†Å</h3><p>ÊÄªÁªì‰∏Ä‰∏ã,dataclass‰∏ªË¶ÅÊèê‰æõ‰∫Ü‰ª•‰∏ãÂá†ÊñπÈù¢ÁöÑÂäüËÉΩ:</p><ol><li><p><strong>Ëá™Âä®ÁîüÊàêÊûÑÈÄ†ÂáΩÊï∞ÂíåÂü∫Êú¨ÊñπÊ≥ï</strong></p><ul><li>Ëá™Âä®ÁîüÊàê<code>__init__</code>ÊûÑÈÄ†ÂáΩÊï∞</li><li>Ëá™Âä®ÁîüÊàê<code>__repr__</code>„ÄÅ<code>__eq__</code>Á≠âÂü∫Êú¨ÊñπÊ≥ï</li></ul></li><li><p><strong>Êï∞ÊçÆÂ≠óÊÆµÁÆ°ÁêÜ</strong></p><ul><li>ÂÆö‰πâÊï∞ÊçÆÂ≠óÊÆµ</li><li>ÊîØÊåÅ‰∏∫Â≠óÊÆµËÆæÁΩÆÈªòËÆ§ÂÄº</li><li>ÊîØÊåÅÂ≠óÊÆµÁ±ªÂûãÊ≥®Ëß£</li><li>ÊîØÊåÅÂè™ËØªÂ≠óÊÆµ„ÄÅÂêéÊúüÂàùÂßãÂåñÂ≠óÊÆµ</li></ul></li><li><p><strong>Êï∞ÊçÆÁ±ªË°å‰∏∫ÂÆöÂà∂</strong></p><ul><li>ÂèØËá™ÂÆö‰πâÂ≠óÊÆµÊéíÂ∫è</li><li>ÂèØËá™ÂÆö‰πâÂ≠óÊÆµÂëΩÂêçËßÑÂàô(snake_case/CamelCase)</li><li>ÊîØÊåÅËá™ÂÆö‰πâ<code>__post_init__</code>ÊñπÊ≥ïÂÅöÊï∞ÊçÆÊ†°È™å</li><li>ÂèØÊéßÂà∂ÊòØÂê¶ÁîüÊàê<code>__repr__</code>ÊñπÊ≥ï</li><li>ÊîØÊåÅÁîüÊàê<code>__hash__</code>ÊñπÊ≥ïÁî®‰∫éÂìàÂ∏å</li></ul></li><li><p><strong>ÊÄßËÉΩ‰ºòÂåñ</strong></p><ul><li>ÊîØÊåÅ‰ΩøÁî®<code>__slots__</code>‰ºòÂåñÂÜÖÂ≠ò‰ΩøÁî®</li></ul></li><li><p><strong>‰∏éÈùôÊÄÅÁ±ªÂûãÊ£ÄÊü•Â∑•ÂÖ∑ÁªìÂêà</strong></p><ul><li>ÊîØÊåÅ‰∏émypyÁ≠âÁ±ªÂûãÊ£ÄÊü•Â∑•ÂÖ∑ÁªìÂêà‰ΩøÁî®</li></ul></li><li><p><strong>ÁªßÊâøÂíåÂµåÂ•ó</strong></p><ul><li>ÊîØÊåÅÊï∞ÊçÆÁ±ªÁöÑÁªßÊâø</li><li>ÊîØÊåÅÂµåÂ•óÊï∞ÊçÆÁ±ª‰Ωú‰∏∫Â≠óÊÆµ</li></ul></li></ol><p>ÈÄöËøáËøô‰∫õÂäüËÉΩ,dataclassÂèØ‰ª•ÊûÅÂ§ßÁÆÄÂåñÊï∞ÊçÆÁ±ªÁöÑÂÆö‰πâÂíå‰ΩøÁî®,ÂáèÂ∞ëÊ†∑Êùø‰ª£Á†Å„ÄÇÂÆÉ‰ΩøÂæóÂàõÂª∫Êï∞ÊçÆÁ±ªÂèòÂæóÈ´òÊïàÂíå‰ºòÈõÖ,ÂêåÊó∂ËøòÊèê‰æõ‰∫ÜË∂≥Â§üÁöÑÂÆöÂà∂Á©∫Èó¥„ÄÇÊó†ËÆ∫ÊòØÁÆÄÂçïÁöÑÊï∞ÊçÆÊåÅÊúâÂØπË±°ËøòÊòØÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑ,dataclassÈÉΩËÉΩÂèëÊå•ÂÆÉÁöÑ‰ºòÂäø,ÊèêÈ´ò‰ª£Á†ÅÁöÑÂèØËØªÊÄßÂíåÂèØÁª¥Êä§ÊÄß„ÄÇ</p><h1 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h1><h3 id="Êñá‰ª∂Â§ÑÁêÜ"><a href="#Êñá‰ª∂Â§ÑÁêÜ" class="headerlink" title="Êñá‰ª∂Â§ÑÁêÜ"></a>Êñá‰ª∂Â§ÑÁêÜ</h3><ul><li>pathlib</li></ul><h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><p>jsonÊ®°Âùó‰∏ªË¶ÅÊúâÂõõ‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂáΩÊï∞ÔºåÂàÜÂà´ÊòØÔºö</p><ul><li><code>dump</code> - Â∞ÜPythonÂØπË±°ÊåâÁÖßJSONÊ†ºÂºèÂ∫èÂàóÂåñÂà∞Êñá‰ª∂‰∏≠</li><li><code>dumps</code> - Â∞ÜPythonÂØπË±°Â§ÑÁêÜÊàêJSONÊ†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤</li><li><code>load</code> - Â∞ÜÊñá‰ª∂‰∏≠ÁöÑJSONÊï∞ÊçÆÂèçÂ∫èÂàóÂåñÊàêÂØπË±°</li><li><code>loads</code> - Â∞ÜÂ≠óÁ¨¶‰∏≤ÁöÑÂÜÖÂÆπÂèçÂ∫èÂàóÂåñÊàêPythonÂØπË±°</li></ul><h1 id="Grammar"><a href="#Grammar" class="headerlink" title="Grammar"></a>Grammar</h1><ul><li><code>*args</code> Êé•Êî∂Âπ∂Â§ÑÁêÜÊâÄÊúâ‰º†ÈÄíËøõÊù•ÁöÑ‰ΩçÁΩÆÂèÇÊï∞Ôºå<code>**kwargs</code> Êé•Êî∂Âπ∂Â§ÑÁêÜÊâÄÊúâ‰º†ÈÄíËøõÊù•ÁöÑÂÖ≥ÈîÆÂ≠óÂèÇÊï∞„ÄÇ</li></ul><h2 id="struture"><a href="#struture" class="headerlink" title="struture"></a>struture</h2><ul><li><p>Âú®Python‰∏≠ÔºåÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºàÂ¶ÇÊï¥Êï∞„ÄÅÂ∏ÉÂ∞îÂÄºÔºâÊòØ‰∏çÂèØÂèòÁöÑÔºåËøôÊÑèÂë≥ÁùÄÂΩì‰Ω†Â∞Ü‰∏Ä‰∏™Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÂèòÈáè‰º†ÈÄíÁªô‰∏Ä‰∏™ÂáΩÊï∞ÊàñÊñπÊ≥ïÊó∂Ôºå‰Ω†ÂÆûÈôÖ‰∏äÊòØ‰º†ÈÄí‰∫ÜÂÆÉÁöÑÂÄºÁöÑÂâØÊú¨ÔºåËÄå‰∏çÊòØÂÆÉÊú¨Ë∫´„ÄÇ</p><p>Âõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Âú®‰∏Ä‰∏™ÊñπÊ≥ïÂÜÖÈÉ®‰øÆÊîπ‰∫Ü‰∏Ä‰∏™Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÊàêÂëòÂèòÈáèÔºåËøô‰∏™‰øÆÊîπ‰∏ç‰ºöÂΩ±ÂìçÂà∞‰ªª‰ΩïÂÖ∂‰ªñÊñπÊ≥ï‰∏≠ÂØπËØ•ÊàêÂëòÂèòÈáèÁöÑÂºïÁî®„ÄÇ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gateway snippet</title>
      <link href="/2023/11/05/gateway%20snippet/"/>
      <url>/2023/11/05/gateway%20snippet/</url>
      
        <content type="html"><![CDATA[<p><img src="https://www.baeldung.com/wp-content/uploads/2020/05/spring-cloud-gateway-webfilters-2.jpg"></p><h1 id="Ê¶ÇÂøµ"><a href="#Ê¶ÇÂøµ" class="headerlink" title="Ê¶ÇÂøµ"></a>Ê¶ÇÂøµ</h1><ul><li>LBÔºå ‚ÄúLoad Balancing‚ÄùÔºàË¥üËΩΩÂùáË°°ÔºâÁöÑÁº©ÂÜô„ÄÇË¥üËΩΩÂùáË°°ÊòØ‰∏ÄÁßçÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠Â∏∏ËßÅÁöÑÁ≠ñÁï•ÔºåÁî®‰∫éÂ∞ÜËØ∑Ê±ÇÂùáÂåÄÂú∞ÂàÜÂèëÂà∞Â§ö‰∏™ÊúçÂä°ÂÆû‰æã‰∏äÔºå‰ª•ÈÅøÂÖçÊüê‰∏™ÂÆû‰æãË¥üËΩΩËøáÈáçÔºåÊèêÈ´òÊï¥‰ΩìÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÅÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄß„ÄÇ</li><li>restful header‰∏≠ÁöÑÊâÄÊúâkeyÔºåÂØπÂ∫îÁöÑÂÄºÂÖ∂ÂÆûÈÉΩÊòØÈõÜÂêàÔºåÂè™ÊòØÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÈõÜÂêàÈáåÈù¢Âè™Êúâ‰∏Ä‰∏™ÂÖÉÁ¥†</li></ul><h3 id="spring-cloud-gateway"><a href="#spring-cloud-gateway" class="headerlink" title="spring cloud gateway"></a>spring cloud gateway</h3><ul><li><code>DefaultErrorWebExceptionHandler</code> ÊòØ Spring Web ÁöÑÈªòËÆ§ÂÆûÁé∞Á±ªÔºåÂÆûÁé∞‰∫Ü <code>ErrorWebExceptionHandler</code> Êé•Âè£„ÄÇÂÆÉÊèê‰æõ‰∫ÜÈªòËÆ§ÁöÑÈîôËØØÂ§ÑÁêÜË°å‰∏∫ÔºåÂΩìÊ≤°ÊúâËá™ÂÆö‰πâÁöÑ <code>ErrorWebExceptionHandler</code> ÂÆûÁé∞Êó∂ÔºåSpring Boot Â∞Ü‰ΩøÁî® <code>DefaultErrorWebExceptionHandler</code> Êù•Â§ÑÁêÜÈîôËØØ„ÄÇ</li><li><strong>ÂéüÁîüÁöÑspring cloud gatewayËøõË°åËØ∑Ê±ÇËΩ¨ÂèëÔºåÊâÄÊúâÁöÑÂæÆÊúçÂä°ÂÆû‰æã‰∏égatewayÊúçÂä°ÂÆû‰æãÂú®nacos‰∏≠ÂøÖÈ°ªÊòØÂêå‰∏Ä‰∏™namesapceÂíåÂêå‰∏Ä‰∏™group„ÄÇ</strong></li></ul><h1 id="ÈùôÊÄÅË∑ØÁî±"><a href="#ÈùôÊÄÅË∑ØÁî±" class="headerlink" title="ÈùôÊÄÅË∑ØÁî±"></a>ÈùôÊÄÅË∑ØÁî±</h1><ul><li>‰ΩøÁî®spring cloud gatewayÈÄöËøá‰ª£Á†ÅÊñπÂºèÊàñÈÖçÁΩÆÊñá‰ª∂ÊñπÂºèÂÆûÁé∞</li></ul><h1 id="Âä®ÊÄÅË∑ØÁî±"><a href="#Âä®ÊÄÅË∑ØÁî±" class="headerlink" title="Âä®ÊÄÅË∑ØÁî±"></a>Âä®ÊÄÅË∑ØÁî±</h1><h2 id="spring-cloud-gateway-‰∏é-nacosÁªìÂêàÂÆûÁé∞"><a href="#spring-cloud-gateway-‰∏é-nacosÁªìÂêàÂÆûÁé∞" class="headerlink" title="spring cloud gateway ‰∏é nacosÁªìÂêàÂÆûÁé∞"></a>spring cloud gateway ‰∏é nacosÁªìÂêàÂÆûÁé∞</h2><blockquote><p>ÂÆûÁé∞ÊÄùË∑ØÔºö‰ΩøÁî®nacosÁöÑÈÖçÁΩÆ‰∏≠ÂøÉÔºåÂ∞ÜË∑ØÁî±ÈÖçÁΩÆÊîæÂú®nacos‰∏äÔºåÂÜô‰∏™ÁõëÂê¨Âô®ÁõëÂê¨nacos‰∏äÈÖçÁΩÆÁöÑÂèòÂåñÔºåÂ∞ÜÂèòÂåñÂêéÁöÑÈÖçÁΩÆÊõ¥Êñ∞Âà∞GateWayÂ∫îÁî®ÁöÑËøõÁ®ãÂÜÖ„ÄÇ</p></blockquote><ul><li><p>Âú∫ÊôØ‰∏ÄÔºàÂü∫Á°ÄÔºâ</p><p>ÂèØ‰ª•ÂÖàÂú®nacosÁöÑÈÖçÁΩÆÁÆ°ÁêÜ‰∏≠ÔºåÊ∑ªÂä†ÂæÆÊúçÂä°ÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºàÁ´ØÂè£„ÄÅË∑ØÁî±Á≠âÔºâÔºåÁÑ∂ÂêéÂêØÂä®ÂæÆÊúçÂä°Á®ãÂ∫èÔºà‰∏çÁî®ÈÖçÁΩÆÁõ∏ÂÖ≥Á´ØÂè£ÈÖçÁΩÆÔºâ</p></li><li><p>Âú∫ÊôØ‰∫åÔºàpredicateÔºâ</p><p>ÂèØ‰ª•ÊéßÂà∂ËØ∑Ê±ÇÁöÑcookie„ÄÅheader„ÄÅhost„ÄÅmethod„ÄÅpath„ÄÅquery„ÄÅRemoteAddr„ÄÅWeightÔºàÊåâÁÖßÊùÉÈáçÂ∞ÜËØ∑Ê±ÇÂàÜÂèëÂà∞‰∏çÂêåËäÇÁÇπÊúçÂä°Ôºâ</p></li><li><p>Âú∫ÊôØ‰∏âÔºàfiltersÔºâ</p><p>ÂèØ‰ª•ÊéßÂà∂ËØ∑Ê±ÇÁöÑAddRequestHeader„ÄÅAddResponseHeader„ÄÅDedupeResponseHeader„ÄÅDedupeResponseHeader„ÄÅCircuitBreakerÔºàÊñ≠Ë∑ØÂô®Ôºâ„ÄÅFallbackHeaders„ÄÅPrefixPath„ÄÅPreserveHostHeaderÔºàÂä†‰∏äËØ∑Ê±ÇËÄÖÁöÑip‰ø°ÊÅØÔºâ„ÄÅRequestRateLimiterÔºàÈôêÊµÅÔºâ„ÄÅRedirectTo„ÄÅRemoveRequestHeader„ÄÅRemoveResponseHeader„ÄÅRewritePathÔºàÂ∞ÜËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÁöÑË∑ØÂæÑÂÅöÂèòÊç¢Ôºâ„ÄÅRewriteLocationResponseHeader„ÄÅRewriteResponseHeader„ÄÅSecureHeaders„ÄÅSetPath„ÄÅSetRequestHeader„ÄÅSetResponseHeader„ÄÅSetStatus„ÄÅStripPrefix„ÄÅRetry„ÄÅRequestSize„ÄÅSetRequestHostHeader„ÄÅModifyRequestBody„ÄÅModifyResponseBody„ÄÅTokenRelayÔºàÈÖçÂêàÈâ¥ÊùÉÔºâ</p></li><li><p>Âú∫ÊôØÂõõÔºàÈôêÊµÅÔºâ</p><ul><li>ËØ∑Ê±ÇÂêå‰∏ÄÁõÆÊ†áÂú∞ÂùÄ</li></ul></li><li><p>Âú∫ÊôØ‰∫îÔºà‰øÆÊîπËØ∑Ê±ÇÂíåÂìçÂ∫îbodyÔºâ</p></li><li><p>Âú∫ÊôØÂÖ≠ÔºàÂú∞ÂùÄÂàÜÂèëÔºâ</p><ul><li>ÊúâÂ§ö‰∏™ÂêéÁ´ØÂ∫îÁî®ÊúçÂä°</li></ul></li></ul><hr><h2 id="Ê≥®ÊÑè"><a href="#Ê≥®ÊÑè" class="headerlink" title="Ê≥®ÊÑè"></a>Ê≥®ÊÑè</h2><ul><li><p>spring cloud gateway‰∏≠Â¶ÇÊûúÈÖçÁΩÆÊñá‰ª∂‰ΩøÁî®lbËÆøÈóÆÊúçÂä°ÔºåÈÇ£ÈúÄË¶ÅÂºïÂÖ•lbÁõ∏ÂÖ≥‰æùËµñÂåÖ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Ë∑®ÂüüËØ∑Ê±Ç"><a href="#Ë∑®ÂüüËØ∑Ê±Ç" class="headerlink" title="Ë∑®ÂüüËØ∑Ê±Ç"></a>Ë∑®ÂüüËØ∑Ê±Ç</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gateway:</span></span><br><span class="line">  <span class="comment"># Ë∑®ÂüüÈÖçÁΩÆ</span></span><br><span class="line">  <span class="attr">globalcors:</span></span><br><span class="line">    <span class="attr">corsConfigurations:</span></span><br><span class="line">      <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">allowedOrigins:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">        <span class="attr">allowedMethods:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">GET</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">POST</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">PUT</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">DELETE</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">OPTIONS</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">HEAD</span></span><br></pre></td></tr></table></figure><h1 id="ÂèÇËÄÉ"><a href="#ÂèÇËÄÉ" class="headerlink" title="ÂèÇËÄÉ"></a>ÂèÇËÄÉ</h1><ul><li><p><a href="https://cloud.spring.io/spring-cloud-gateway/reference/html/#configuring-route-predicate-factories-and-gateway-filter-factories">ÂÆòÁΩë</a></p></li><li><p><a href="https://blog.csdn.net/boling_cavalry/category_9278131.html">Á®ãÂ∫èÂëòÊ¨£ÂÆ∏</a></p></li><li><p>ÂÖ∂ÂÆÉ</p><ul><li><a href="https://blog.csdn.net/abu935009066/article/details/112245330">https://blog.csdn.net/abu935009066/article/details/112245330</a></li></ul></li><li><p><a href="http://47.109.59.205/2023/01/02/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/#3-Gateway%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3">http://47.109.59.205/2023/01/02/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/#3-Gateway%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> gateway </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python poetry</title>
      <link href="/2023/11/03/python%20env%20poetry/"/>
      <url>/2023/11/03/python%20env%20poetry/</url>
      
        <content type="html"><![CDATA[<h2 id="POETRY"><a href="#POETRY" class="headerlink" title="POETRY"></a>POETRY</h2><blockquote><p>ÊØè‰∏™‰ΩøÁî® Poetry ÁöÑÈ°πÁõÆÈÉΩ‰ºöÊúâËá™Â∑±ÁöÑËôöÊãüÁéØÂ¢ÉÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖç‰∏çÂêåÈ°πÁõÆ‰πãÈó¥ÁöÑ‰æùËµñÂÜ≤Á™Å„ÄÇÂõ†Ê≠§ÔºåÊØè‰∏™È°πÁõÆÁöÑ‰æùËµñÈ°πÈÉΩ‰ºöÁã¨Á´ãÂ≠òÊîæÂú®ÂêÑËá™ÁöÑËôöÊãüÁéØÂ¢É‰∏≠„ÄÇ</p></blockquote><ul><li><p>Êü•ÁúãÂÆâË£Ö‰æùËµñÁõÆÂΩï</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry env info --path</span><br></pre></td></tr></table></figure></li><li><p>ÂàóÂá∫ÊâÄÊúâËôöÊãüÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry env list</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÊåáÂÆöËôöÊãüÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry env remove &lt;ËôöÊãüÁéØÂ¢ÉÂêçÁß∞&gt;</span><br></pre></td></tr></table></figure></li><li><p>ËøõÂÖ• Poetry ÂàõÂª∫ÁöÑËôöÊãüÁéØÂ¢É</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry shell</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÈîÅÂÆöÂπ∂ÂÆâË£ÖÈ°πÁõÆ‰æùËµñÈ°πÁöÑÁ°ÆÂàáÁâàÊú¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">poetry lock</span><br><span class="line">poetry install</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÂÆâË£ÖtestÁõ∏ÂÖ≥‰æùËµñ</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry.group.test.dependencies]</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">&quot;^7.3.0&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry install --with test</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÈÄöËøá<code>requirement</code>Ê∑ªÂä†‰æùËµñ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry add $( cat requirements.txt )</span><br></pre></td></tr></table></figure></li><li><p>buildÁºñËØë</p><p>Â¶ÇÊûú‰ΩøÁî®<code>build backend</code>ÈùûÈªòËÆ§ÁöÑ<code>poetry core</code>ÔºåÂàôÁõ¥Êé•‰ΩøÁî®ÂÖ∂‰ªñÁºñËØëÂ∑•ÂÖ∑ÂëΩ‰ª§ÊâßË°åÁºñËØë</p></li></ul><p>‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ‰ΩøÁî®ÊµÅÁ®ãÂ¶Ç‰∏ã:</p><ol><li>Âú®‰∏Ä‰∏™Êñ∞È°πÁõÆ‰∏≠,È¶ñÂÖàÊâßË°å <code>poetry install</code> ÂÆâË£Ö‰æùËµñÂπ∂ÁîüÊàê <code>poetry.lock</code> Êñá‰ª∂„ÄÇ</li><li>Âú®ÂºÄÂèëËøáÁ®ã‰∏≠,Â¶ÇÊûúÈúÄË¶ÅÊñ∞Â¢ûÊàñÊõ¥Êñ∞‰æùËµñ,ÂÖàÊâßË°å <code>poetry add/remove ‰æùËµñÂêç</code>„ÄÇ</li><li>ÁÑ∂ÂêéÊâßË°å <code>poetry lock</code> Êõ¥Êñ∞ <code>poetry.lock</code> Êñá‰ª∂„ÄÇ</li><li>ÂÜçÊâßË°å <code>poetry install</code> ÂÆâË£ÖÊñ∞ÁöÑ‰æùËµñ„ÄÇ</li><li>ÂºÄÂèëÊàñËøêË°å‰ª£Á†ÅÊó∂,ÊâßË°å <code>poetry shell</code> ËøõÂÖ•ËôöÊãüÁéØÂ¢É„ÄÇ</li><li>Âú®ËôöÊãüÁéØÂ¢É‰∏≠ËøõË°åÂºÄÂèë„ÄÅÊµãËØïÂíåËøêË°å„ÄÇ</li></ol><h2 id="HATCH"><a href="#HATCH" class="headerlink" title="HATCH"></a>HATCH</h2><h3 id="ÂáÜÂ§á"><a href="#ÂáÜÂ§á" class="headerlink" title="ÂáÜÂ§á"></a>ÂáÜÂ§á</h3><ul><li><p>Êñ∞Âª∫È°πÁõÆ</p><p><code>hatch new &quot;Hatch Demo&quot;</code></p></li><li><p>Â∑≤ÊúâÈ°πÁõÆÂàùÂßãÂåñ</p><p><code>hatch new --init</code></p></li><li><p>ËôöÊãüÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m venv venv</span><br><span class="line">source venv/bin/activate</span><br></pre></td></tr></table></figure></li><li><p>ÂàõÂª∫hatchËôöÊãüÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch env create</span><br></pre></td></tr></table></figure></li><li><p>pycharmÈÖçÁΩÆ</p><p>ËôöÊãüÁéØÂ¢ÉÈúÄÈÖçÁΩÆÊàê <code>hatch shell</code>ÊèêÁ§∫ÁöÑÁõÆÂΩï</p></li><li><p>Êõ¥Êñ∞‰æùËµñ</p><ul><li>ËøêË°å <code>hatch shell</code>ÂëΩ‰ª§</li></ul></li><li><p>Êü•ÁúãÁéØÂ¢É‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch env show --ascii</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Êü•ÁúãÂΩìÂâçÈ°πÁõÆÁéØÂ¢É‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch env find</span><br></pre></td></tr></table></figure></li><li><p>ÈÄÄÂá∫ÂΩìÂâçÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Ê∏ÖÁêÜÁéØÂ¢É</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch env prune &lt;envName&gt;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Ê†ºÂºèÂåñ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch run lint:fmt</span><br></pre></td></tr></table></figure></li></ul><h3 id="ÁºñËØë"><a href="#ÁºñËØë" class="headerlink" title="ÁºñËØë"></a>ÁºñËØë</h3><ul><li><p>ÊñπÂºè‰∏ÄÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade build</span><br><span class="line">python3 -m build</span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰∏ÄÊó¶ÂÆåÊàêÂ∫îËØ•Âú® dist ÁõÆÂΩï‰∏ã‰∫ßÁîü‰∏§‰∏™Êñá‰ª∂Ôºö</span></span><br></pre></td></tr></table></figure><p>ÊñπÂºè‰∫åÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hatch build</span><br></pre></td></tr></table></figure></li></ul><h3 id="‰ª£Á†ÅÊ†ºÂºèÂåñ"><a href="#‰ª£Á†ÅÊ†ºÂºèÂåñ" class="headerlink" title="‰ª£Á†ÅÊ†ºÂºèÂåñ"></a>‰ª£Á†ÅÊ†ºÂºèÂåñ</h3><ul><li>ÈÖçÁΩÆ</li></ul><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.hatch.envs.lint.scripts]</span></span><br><span class="line"><span class="attr">typing</span> = <span class="string">&quot;mypy --install-types --non-interactive &#123;args:src/jarvex_auth tests&#125;&quot;</span></span><br><span class="line"><span class="attr">style</span> = [</span><br><span class="line">  <span class="string">&quot;ruff &#123;args:.&#125;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;black --check --diff &#123;args:.&#125;&quot;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="attr">fmt</span> = [</span><br><span class="line">  <span class="string">&quot;black &#123;args:.&#125;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;ruff --fix &#123;args:.&#125;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;style&quot;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="attr">all</span> = [</span><br><span class="line">  <span class="string">&quot;style&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typing&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>ÊâßË°åÂëΩ‰ª§<code>hatch run lint:fmt</code></li></ul><h2 id="Flit"><a href="#Flit" class="headerlink" title="Flit"></a>Flit</h2><h3 id="ÂÆâË£Ö‰æùËµñ"><a href="#ÂÆâË£Ö‰æùËµñ" class="headerlink" title="ÂÆâË£Ö‰æùËµñ"></a>ÂÆâË£Ö‰æùËµñ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flit install</span><br></pre></td></tr></table></figure><hr><p><strong>Reference</strong></p><ul><li><p><a href="https://drivendata.co/blog/python-packaging-2023">THE BASICS OF PYTHON PACKAGING IN EARLY</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/666166082">https://zhuanlan.zhihu.com/p/666166082</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python learn</title>
      <link href="/2023/10/31/python%20learn/"/>
      <url>/2023/10/31/python%20learn/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/python/python%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1.png"></p><h1 id="ËØ≠Ê≥ï"><a href="#ËØ≠Ê≥ï" class="headerlink" title="ËØ≠Ê≥ï"></a>ËØ≠Ê≥ï</h1><h2 id="Êï∞ÊçÆÁªìÊûÑ"><a href="#Êï∞ÊçÆÁªìÊûÑ" class="headerlink" title="Êï∞ÊçÆÁªìÊûÑ"></a>Êï∞ÊçÆÁªìÊûÑ</h2><h3 id="ÂàóË°®listÂíåÂÖÉÁªÑtuple"><a href="#ÂàóË°®listÂíåÂÖÉÁªÑtuple" class="headerlink" title="ÂàóË°®listÂíåÂÖÉÁªÑtuple"></a>ÂàóË°®listÂíåÂÖÉÁªÑtuple</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>] <span class="comment"># ÂàóË°®‰∏≠ÂêåÊó∂Âê´Êúâ int Âíå string Á±ªÂûãÁöÑÂÖÉÁ¥†</span></span><br><span class="line">l</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>]</span><br><span class="line"> </span><br><span class="line">tup = (<span class="string">&#x27;jason&#x27;</span>, <span class="number">22</span>) <span class="comment"># ÂÖÉÁªÑ‰∏≠ÂêåÊó∂Âê´Êúâ int Âíå string Á±ªÂûãÁöÑÂÖÉÁ¥†</span></span><br><span class="line">tup</span><br><span class="line">(<span class="string">&#x27;jason&#x27;</span>, <span class="number">22</span>)</span><br></pre></td></tr></table></figure><ul><li>ÂàóË°®ÊòØÂä®ÊÄÅÁöÑÔºåÈïøÂ∫¶ÂèØÂèòÔºåÂèØ‰ª•ÈöèÊÑèÁöÑÂ¢ûÂä†„ÄÅÂà†ÂáèÊàñÊîπÂèòÂÖÉÁ¥†„ÄÇÂàóË°®ÁöÑÂ≠òÂÇ®Á©∫Èó¥Áï•Â§ß‰∫éÂÖÉÁªÑÔºåÊÄßËÉΩÁï•ÈÄä‰∫éÂÖÉÁªÑ„ÄÇ</li><li>ÂÖÉÁªÑÊòØÈùôÊÄÅÁöÑÔºåÈïøÂ∫¶Â§ßÂ∞èÂõ∫ÂÆöÔºå‰∏çÂèØ‰ª•ÂØπÂÖÉÁ¥†ËøõË°åÂ¢ûÂä†„ÄÅÂà†ÂáèÊàñËÄÖÊîπÂèòÊìç‰Ωú„ÄÇÂÖÉÁªÑÁõ∏ÂØπ‰∫éÂàóË°®Êõ¥Âä†ËΩªÈáèÁ∫ßÔºåÊÄßËÉΩÁ®ç‰ºò„ÄÇ</li><li>setÊòØÁ©∫ÁöÑÊó∂ÂÄôÔºåËøõË°åÂíåÂÖ∂‰ªñÈùûÁ©∫setÂèñ‰∫§ÈõÜÔºåÊ∞∏ËøúÊòØÁ©∫</li></ul><h3 id="Â≠óÂÖ∏ÂíåÈõÜÂêà"><a href="#Â≠óÂÖ∏ÂíåÈõÜÂêà" class="headerlink" title="Â≠óÂÖ∏ÂíåÈõÜÂêà"></a>Â≠óÂÖ∏ÂíåÈõÜÂêà</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">d1 = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line">d2 = <span class="built_in">dict</span>(&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;male&#x27;</span>&#125;)</span><br><span class="line">d3 = <span class="built_in">dict</span>([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;jason&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">20</span>), (<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;male&#x27;</span>)])</span><br><span class="line">d4 = <span class="built_in">dict</span>(name=<span class="string">&#x27;jason&#x27;</span>, age=<span class="number">20</span>, gender=<span class="string">&#x27;male&#x27;</span>) </span><br><span class="line">d1 == d2 == d3 ==d4</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"> </span><br><span class="line">s1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">s2 = <span class="built_in">set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">s1 == s2</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><ul><li>Â≠óÂÖ∏Âú® Python3.7+ ÊòØÊúâÂ∫èÁöÑÊï∞ÊçÆÁªìÊûÑÔºåËÄåÈõÜÂêàÊòØÊó†Â∫èÁöÑÔºåÂÖ∂ÂÜÖÈÉ®ÁöÑÂìàÂ∏åË°®Â≠òÂÇ®ÁªìÊûÑÔºå‰øùËØÅ‰∫ÜÂÖ∂Êü•Êâæ„ÄÅÊèíÂÖ•„ÄÅÂà†Èô§Êìç‰ΩúÁöÑÈ´òÊïàÊÄß„ÄÇÊâÄ‰ª•ÔºåÂ≠óÂÖ∏ÂíåÈõÜÂêàÈÄöÂ∏∏ËøêÁî®Âú®ÂØπÂÖÉÁ¥†ÁöÑÈ´òÊïàÊü•Êâæ„ÄÅÂéªÈáçÁ≠âÂú∫ÊôØ„ÄÇ</li></ul><h3 id="Â≠óÁ¨¶‰∏≤"><a href="#Â≠óÁ¨¶‰∏≤" class="headerlink" title="Â≠óÁ¨¶‰∏≤"></a>Â≠óÁ¨¶‰∏≤</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">s2 = <span class="string">&quot;hello&quot;</span></span><br><span class="line">s3 = <span class="string">&quot;&quot;&quot;hello&quot;&quot;&quot;</span></span><br><span class="line">s1 == s2 == s3</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><ul><li>ËΩ¨‰πâÂ≠óÁ¨¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;a\nb\tc&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">a</span><br><span class="line">bc</span><br><span class="line"></span><br><span class="line"><span class="built_in">len</span>(s)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><ul><li><p>Â∏∏Áî®ÊñπÊ≥ï</p><ul><li><p>ÂíåÂÖ∂‰ªñÊï∞ÊçÆÁªìÊûÑÔºåÂ¶ÇÂàóË°®„ÄÅÂÖÉÁªÑ‰∏ÄÊ†∑ÔºåÂ≠óÁ¨¶‰∏≤ÁöÑÁ¥¢ÂºïÂêåÊ†∑‰ªé 0 ÂºÄÂßãÔºåindex=0 Ë°®Á§∫Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºàÂ≠óÁ¨¶ÔºâÔºå[index:index+2] ÂàôË°®Á§∫Á¨¨ index ‰∏™ÂÖÉÁ¥†Âà∞ index+1 ‰∏™ÂÖÉÁ¥†ÁªÑÊàêÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤„ÄÇ</p></li><li><p>Â≠óÁ¨¶‰∏≤ÊòØ‰∏çÂèØÂèòÁöÑÔºàimmutableÔºâ</p></li><li><p>Â≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;no data available for person with id: &#123;&#125;, name: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">id</span>, name)) <span class="string">&#x27;&#x27;&#x27;ÊúÄÊñ∞ËßÑËåÉ&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;no data available for person with id: %s, name: %s&#x27;</span> % (<span class="built_in">id</span>, name))<span class="string">&#x27;&#x27;&#x27;‰ª•ÂæÄËßÑËåÉÔºå%s Ë°®Á§∫Â≠óÁ¨¶‰∏≤ÂûãÔºå%d Ë°®Á§∫Êï¥Âûã&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><ul><li>json.dumps() Ëøô‰∏™ÂáΩÊï∞ÔºåÊé•Âèó Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Â∫èÂàóÂåñ‰∏∫ string</li><li>json.loads() Ëøô‰∏™ÂáΩÊï∞ÔºåÊé•Âèó‰∏Ä‰∏™ÂêàÊ≥ïÂ≠óÁ¨¶‰∏≤ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÂèçÂ∫èÂàóÂåñ‰∏∫Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûã</li></ul><h2 id="Êù°‰ª∂‰∏éÂæ™ÁéØ"><a href="#Êù°‰ª∂‰∏éÂæ™ÁéØ" class="headerlink" title="Êù°‰ª∂‰∏éÂæ™ÁéØ"></a>Êù°‰ª∂‰∏éÂæ™ÁéØ</h2><h3 id="Êù°‰ª∂"><a href="#Êù°‰ª∂" class="headerlink" title="Êù°‰ª∂"></a>Êù°‰ª∂</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># y = |x|</span></span><br><span class="line"><span class="keyword">if</span> x &lt; <span class="number">0</span>:</span><br><span class="line">    y = -x</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    y = x</span><br><span class="line"><span class="comment"># Âú∫ÊôØ‰∫å</span></span><br><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_1</span><br><span class="line"><span class="keyword">elif</span> condition_2:</span><br><span class="line">    statement_2</span><br><span class="line">...</span><br><span class="line"><span class="keyword">elif</span> condition_i:</span><br><span class="line">    statement_i</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    statement_n</span><br></pre></td></tr></table></figure><h3 id="Âæ™ÁéØ"><a href="#Âæ™ÁéØ" class="headerlink" title="Âæ™ÁéØ"></a>Âæ™ÁéØ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂàóË°®</span></span><br><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> l:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="comment"># Â≠óÂÖ∏</span></span><br><span class="line">d = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;dob&#x27;</span>: <span class="string">&#x27;2000-01-01&#x27;</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> d: <span class="comment"># ÈÅçÂéÜÂ≠óÂÖ∏ÁöÑÈîÆ</span></span><br><span class="line">    <span class="built_in">print</span>(k)</span><br><span class="line">name</span><br><span class="line">dob</span><br><span class="line">gender</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> d.values(): <span class="comment"># ÈÅçÂéÜÂ≠óÂÖ∏ÁöÑÂÄº</span></span><br><span class="line">    <span class="built_in">print</span>(v)</span><br><span class="line">jason</span><br><span class="line"><span class="number">2000</span>-01-01</span><br><span class="line">male    </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items(): <span class="comment"># ÈÅçÂéÜÂ≠óÂÖ∏ÁöÑÈîÆÂÄºÂØπ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;key: &#123;&#125;, value: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(k, v))</span><br><span class="line">key: name, value: jason</span><br><span class="line">key: dob, value: <span class="number">2000</span>-01-01</span><br><span class="line">key: gender, value: male </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        text = <span class="built_in">input</span>(<span class="string">&#x27;Please enter your questions, enter &quot;q&quot; to exit&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> text == <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Exit system&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        ...</span><br><span class="line">        ...</span><br><span class="line">        <span class="built_in">print</span>(response)</span><br><span class="line">    <span class="keyword">except</span> <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Encountered error: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br><span class="line">        <span class="keyword">break</span> </span><br></pre></td></tr></table></figure><h2 id="ÂºÇÂ∏∏"><a href="#ÂºÇÂ∏∏" class="headerlink" title="ÂºÇÂ∏∏"></a>ÂºÇÂ∏∏</h2><ul><li>ÂΩìÁ®ãÂ∫è‰∏≠Â≠òÂú®Â§ö‰∏™ except block Êó∂ÔºåÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™ except block ‰ºöË¢´ÊâßË°å„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂ¶ÇÊûúÂ§ö‰∏™ except Â£∞ÊòéÁöÑÂºÇÂ∏∏Á±ªÂûãÈÉΩ‰∏éÂÆûÈôÖÁõ∏ÂåπÈÖçÔºåÈÇ£‰πàÂè™ÊúâÊúÄÂâçÈù¢ÁöÑ except block ‰ºöË¢´ÊâßË°åÔºåÂÖ∂‰ªñÂàôË¢´ÂøΩÁï•„ÄÇ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    s = <span class="built_in">input</span>(<span class="string">&#x27;please enter two numbers separated by comma: &#x27;</span>)</span><br><span class="line">    num1 = <span class="built_in">int</span>(s.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>].strip())</span><br><span class="line">    num2 = <span class="built_in">int</span>(s.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>].strip())</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Value Error: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Index Error: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Other error&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;continue&#x27;</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li>Êó†ËÆ∫ÂèëÁîü‰ªÄ‰πàÊÉÖÂÜµÔºåfinally block ‰∏≠ÁöÑËØ≠Âè•ÈÉΩ‰ºöË¢´ÊâßË°åÔºåÂì™ÊÄïÂâçÈù¢ÁöÑ try Âíå excep block ‰∏≠‰ΩøÁî®‰∫Ü return ËØ≠Âè•„ÄÇ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    .... <span class="comment"># some data processing</span></span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;OS error: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Unexpected error:&#x27;</span>, sys.exc_info()[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><ul><li>Ëá™ÂÆö‰πâÂºÇÂ∏∏ÔºåÂÆö‰πâÂπ∂ÂÆûÁé∞‰∫ÜÂàùÂßãÂåñÂáΩÊï∞Âíå str ÂáΩÊï∞ÔºàÁõ¥Êé• print Êó∂Ë∞ÉÁî®ÔºâÔºö</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInputError</span>(<span class="params">Exception</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Exception raised when there&#x27;re errors in input&quot;&quot;&quot;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, value</span>):</span> <span class="comment"># Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ªÂûãÁöÑÂàùÂßãÂåñ</span></span><br><span class="line">        self.value = value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span> <span class="comment"># Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ªÂûãÁöÑ string Ë°®ËææÂΩ¢Âºè</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="string">&quot;&#123;&#125; is invalid input&quot;</span>.<span class="built_in">format</span>(<span class="built_in">repr</span>(self.value)))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyInputError(<span class="number">1</span>) <span class="comment"># ÊäõÂá∫ MyInputError Ëøô‰∏™ÂºÇÂ∏∏</span></span><br><span class="line"><span class="keyword">except</span> MyInputError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;error: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br></pre></td></tr></table></figure><h2 id="ÂáΩÊï∞"><a href="#ÂáΩÊï∞" class="headerlink" title="ÂáΩÊï∞"></a>ÂáΩÊï∞</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">param1, param2, ..., paramN</span>):</span></span><br><span class="line">    statements</span><br><span class="line">    <span class="keyword">return</span>/<span class="keyword">yield</span> value <span class="comment"># optional</span></span><br></pre></td></tr></table></figure><h3 id="ÂèÇÊï∞"><a href="#ÂèÇÊï∞" class="headerlink" title="ÂèÇÊï∞"></a>ÂèÇÊï∞</h3><ul><li><p>‰∏∫‰∫ÜËÉΩËÆ©‰∏Ä‰∏™ÂáΩÊï∞Êé•Âèó‰ªªÊÑèÊï∞ÈáèÁöÑ‰ΩçÁΩÆÂèÇÊï∞ÔºåÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™*ÂèÇÊï∞</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">avg</span>(<span class="params">first, *rest</span>):</span></span><br><span class="line">    ...</span><br><span class="line"><span class="comment"># Sample use</span></span><br><span class="line">avg(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li><p>‰∏∫‰∫ÜÊé•Âèó‰ªªÊÑèÊï∞ÈáèÁöÑÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Ôºå‰ΩøÁî®‰∏Ä‰∏™‰ª•**ÂºÄÂ§¥ÁöÑÂèÇÊï∞</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_element</span>(<span class="params">name, value, **attrs</span>):</span></span><br><span class="line">  ...</span><br><span class="line">make_element(<span class="string">&#x27;item&#x27;</span>, <span class="string">&#x27;Albatross&#x27;</span>, size=<span class="string">&#x27;large&#x27;</span>, quantity=<span class="number">6</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">anyargs</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(args) <span class="comment"># A tuple</span></span><br><span class="line">    <span class="built_in">print</span>(kwargs) <span class="comment"># A dict</span></span><br></pre></td></tr></table></figure></li><li><p>ÂèÇÊï∞ÈªòËÆ§ÂÄº‰∏çË¶ÅËÆæÁΩÆ []ÔºåËÄåÊòØÂÜôÊàê None</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">spam</span>(<span class="params">a, b=[]</span>):</span> <span class="comment"># NO! ÔºåÂêéÈù¢Â¶ÇÊûúÂ§öÊ¨°Ë∞ÉÁî®spamÊñπÊ≥ïÔºåÂàôbÁöÑÂÄº‰ºö‰∏ÄÁõ¥‰º†ÈÄí‰ΩøÁî®</span></span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line"><span class="comment">### ÂáΩÊï∞ÂµåÂ•ó</span></span><br><span class="line"></span><br><span class="line">- ÂáΩÊï∞ÁöÑÂµåÂ•óËÉΩÂ§ü‰øùËØÅÂÜÖÈÉ®ÂáΩÊï∞ÁöÑÈöêÁßÅ„ÄÇ</span><br><span class="line">- ÂêàÁêÜÁöÑ‰ΩøÁî®ÂáΩÊï∞ÂµåÂ•óÔºåËÉΩÂ§üÊèêÈ´òÁ®ãÂ∫èÁöÑËøêË°åÊïàÁéá</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">    f2()</span><br><span class="line">f1()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ËæìÂá∫</span></span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure></li></ul><h3 id="ÂáΩÊï∞ÂèòÈáè"><a href="#ÂáΩÊï∞ÂèòÈáè" class="headerlink" title="ÂáΩÊï∞ÂèòÈáè"></a>ÂáΩÊï∞ÂèòÈáè</h3><ul><li><p>Â±ÄÈÉ®ÂèòÈáèÔºöÂè™Âú®ÂáΩÊï∞ÂÜÖÈÉ®ÊúâÊïà„ÄÇ‰∏ÄÊó¶ÂáΩÊï∞ÊâßË°åÂÆåÊØïÔºåÂ±ÄÈÉ®ÂèòÈáèÂ∞±‰ºöË¢´ÂõûÊî∂</p></li><li><p>ÂÖ®Â±ÄÂèòÈáèÔºö‰∏çËÉΩÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÈöèÊÑèÊîπÂèòÂÖ®Â±ÄÂèòÈáèÁöÑÂÄºÔºåÂ¶ÇÊûúÊàë‰ª¨‰∏ÄÂÆöË¶ÅÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÊîπÂèòÂÖ®Â±ÄÂèòÈáèÁöÑÂÄºÔºåÂ∞±ÂøÖÈ°ªÂä†‰∏ä global Ëøô‰∏™Â£∞Êòé</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MIN_VALUE = <span class="number">1</span></span><br><span class="line">MAX_VALUE = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validation_check</span>(<span class="params">value</span>):</span></span><br><span class="line">    <span class="keyword">global</span> MIN_VALUE</span><br><span class="line">    ...</span><br><span class="line">    MIN_VALUE += <span class="number">1</span></span><br><span class="line">    ...</span><br><span class="line">validation_check(<span class="number">5</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="Èó≠ÂåÖ"><a href="#Èó≠ÂåÖ" class="headerlink" title="Èó≠ÂåÖ"></a>Èó≠ÂåÖ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nth_power</span>(<span class="params">exponent</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exponent_of</span>(<span class="params">base</span>):</span></span><br><span class="line">        <span class="keyword">return</span> base ** exponent</span><br><span class="line">    <span class="keyword">return</span> exponent_of <span class="comment"># ËøîÂõûÂÄºÊòØ exponent_of ÂáΩÊï∞</span></span><br><span class="line"> </span><br><span class="line">square = nth_power(<span class="number">2</span>) <span class="comment"># ËÆ°ÁÆó‰∏Ä‰∏™Êï∞ÁöÑÂπ≥Êñπ</span></span><br><span class="line">cube = nth_power(<span class="number">3</span>) <span class="comment"># ËÆ°ÁÆó‰∏Ä‰∏™Êï∞ÁöÑÁ´ãÊñπ </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(square(<span class="number">2</span>))  <span class="comment"># ËÆ°ÁÆó 2 ÁöÑÂπ≥Êñπ</span></span><br><span class="line"><span class="built_in">print</span>(cube(<span class="number">2</span>)) <span class="comment"># ËÆ°ÁÆó 2 ÁöÑÁ´ãÊñπ</span></span><br><span class="line"><span class="comment"># ËæìÂá∫</span></span><br><span class="line"><span class="number">4</span> <span class="comment"># 2^2</span></span><br><span class="line"><span class="number">8</span> <span class="comment"># 2^3</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">counter</span>():</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">increment</span>():</span></span><br><span class="line">        <span class="keyword">nonlocal</span> count</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> increment</span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂàõÂª∫‰∏Ä‰∏™ËÆ°Êï∞Âô®</span></span><br><span class="line">c1 = counter()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ë∞ÉÁî®ËÆ°Êï∞Âô®ÁöÑ increment ÂáΩÊï∞ÔºåÊØèÊ¨°Ë∞ÉÁî®‰ºö‰ΩøËÆ°Êï∞Âô®ÂÄºÂ¢ûÂä†</span></span><br><span class="line"><span class="built_in">print</span>(c1())  <span class="comment"># ËæìÂá∫: 1</span></span><br><span class="line"><span class="built_in">print</span>(c1())  <span class="comment"># ËæìÂá∫: 2</span></span><br><span class="line"><span class="built_in">print</span>(c1())  <span class="comment"># ËæìÂá∫: 3</span></span><br></pre></td></tr></table></figure><blockquote><p>Áî±‰∫éÈó≠ÂåÖÁöÑÂ≠òÂú®Ôºå<code>count</code> ÂèòÈáèÁöÑÁä∂ÊÄÅ‰ºöË¢´‰øùÁïô‰∏ãÊù•ÔºåËÄå‰∏çÊòØÊØèÊ¨°Ë∞ÉÁî® <code>counter</code> ÂáΩÊï∞ÈÉΩ‰ºöÈáçÊñ∞ÂàùÂßãÂåñÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÊåÅ‰πÖÁöÑËÆ°Êï∞Âô®ÂäüËÉΩ„ÄÇ</p></blockquote><ul><li><p>Èó≠ÂåÖÁöÑÂÖ≥ÈîÆÁâπÁÇπÊòØ:‰∏Ä‰∏™ÂÜÖÈÉ®ÂáΩÊï∞Ë¢´Â§ñÈÉ®ÂáΩÊï∞ËøîÂõû,ÂÜÖÈÉ®ÂáΩÊï∞Âú®ÊâßË°åÊó∂ËÆ∞‰Ωè‰∫ÜÂ§ñÈÉ®ÂáΩÊï∞ÁöÑÂèòÈáè„ÄÇÂÆÉÂÉè‰∏Ä‰∏™‚ÄùÂ∞èÁõíÂ≠ê‚Äù,Â∞ÅÈó≠Âπ∂ËÆ∞‰Ωè‰∫ÜÂ§ñÈÉ®ÂèòÈáè,Âç≥‰ΩøÂ§ñÈÉ®ÂáΩÊï∞Â∑≤ÁªèÊâßË°åÂÆåÊØï„ÄÇ</p></li><li><p>Èó≠ÂåÖÁöÑÂ•ΩÂ§ÑÂú®‰∫éÂÆÉÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂíåÂäüËÉΩÊâìÂåÖÂú®‰∏ÄËµ∑ÔºåÂΩ¢Êàê‰∏Ä‰∏™Áã¨Á´ãÁöÑÂçïÂÖÉÔºåÂèØ‰ª•Âú®‰∏çÂêåÁöÑÂú∞ÊñπÈáçÂ§ç‰ΩøÁî®ÔºåÂπ∂‰∏îÂèØ‰ª•‰øùÊåÅÊï∞ÊçÆÁöÑÁä∂ÊÄÅ„ÄÇËøôÁßçÊú∫Âà∂‰ΩøÂæóÈó≠ÂåÖÂú®ÂÆûÁé∞Áä∂ÊÄÅ‰øùÊåÅ„ÄÅÂõûË∞ÉÂáΩÊï∞„ÄÅË£ÖÈ•∞Âô®Á≠âÊñπÈù¢ÈùûÂ∏∏ÊúâÁî®„ÄÇ</p></li><li><p>ËøôÁßçÁâπÊÄßÂú®ÂÆûÈôÖÁºñÁ®ã‰∏≠ÂæàÊúâÁî®,ÊØîÂ¶ÇÂÆûÁé∞ÁßÅÊúâÂèòÈáè„ÄÅÁºìÂ≠òÁ≠â„ÄÇÂΩìÁÑ∂,ËøáÂ∫¶‰ΩøÁî®‰πü‰ºöÂΩ±Âìç‰ª£Á†ÅÂèØËØªÊÄß„ÄÇÊÄª‰πã,ÁêÜËß£‰∫ÜÈó≠ÂåÖÁöÑÂ∑•‰ΩúÂéüÁêÜ,Â∞±ËÉΩÊõ¥Â•ΩÂú∞ÊéåÊè°Ëøô‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑„ÄÇ</p></li></ul><h3 id="ÂåøÂêçÂáΩÊï∞"><a href="#ÂåøÂêçÂáΩÊï∞" class="headerlink" title="ÂåøÂêçÂáΩÊï∞"></a>ÂåøÂêçÂáΩÊï∞</h3><ul><li><strong>lambda ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºàexpressionÔºâÔºåÂπ∂‰∏çÊòØ‰∏Ä‰∏™ËØ≠Âè•ÔºàstatementÔºâ</strong></li><li><strong>lambda ÁöÑ‰∏ª‰ΩìÊòØÂè™Êúâ‰∏ÄË°åÁöÑÁÆÄÂçïË°®ËææÂºèÔºåÂπ∂‰∏çËÉΩÊâ©Â±ïÊàê‰∏Ä‰∏™Â§öË°åÁöÑ‰ª£Á†ÅÂùó</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">square = <span class="keyword">lambda</span> x: x**<span class="number">2</span></span><br><span class="line">square(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># ËæìÂá∫</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Á≠âÂêå‰∫é</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span></span><br><span class="line">square(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="ÂáΩÊï∞ÂºèÁºñÁ®ã"><a href="#ÂáΩÊï∞ÂºèÁºñÁ®ã" class="headerlink" title="ÂáΩÊï∞ÂºèÁºñÁ®ã"></a>ÂáΩÊï∞ÂºèÁºñÁ®ã</h3><ul><li><p>ÊâÄË∞ìÂáΩÊï∞ÂºèÁºñÁ®ãÔºåÊòØÊåá‰ª£Á†Å‰∏≠ÊØè‰∏ÄÂùóÈÉΩÊòØ‰∏çÂèØÂèòÁöÑÔºàimmutableÔºâÔºåÈÉΩÁî±Á∫ØÂáΩÊï∞Ôºàpure functionÔºâÁöÑÂΩ¢ÂºèÁªÑÊàê„ÄÇËøôÈáåÁöÑÁ∫ØÂáΩÊï∞ÔºåÊòØÊåáÂáΩÊï∞Êú¨Ë∫´Áõ∏‰∫íÁã¨Á´ã„ÄÅ‰∫í‰∏çÂΩ±ÂìçÔºåÂØπ‰∫éÁõ∏ÂêåÁöÑËæìÂÖ•ÔºåÊÄª‰ºöÊúâÁõ∏ÂêåÁöÑËæìÂá∫ÔºåÊ≤°Êúâ‰ªª‰ΩïÂâØ‰ΩúÁî®</p></li><li><p>‰∏ªË¶ÅÊèê‰æõ‰∫ÜËøô‰πàÂá†‰∏™ÂáΩÊï∞Ôºömap()„ÄÅfilter() Âíå reduce()ÔºåÈÄöÂ∏∏ÁªìÂêàÂåøÂêçÂáΩÊï∞ lambda ‰∏ÄËµ∑‰ΩøÁî®</p></li></ul><h2 id="Á±ª"><a href="#Á±ª" class="headerlink" title="Á±ª"></a>Á±ª</h2><blockquote><p><strong>Á±ªÔºå‰∏ÄÁæ§ÊúâÁùÄÁõ∏ÂêåÂ±ûÊÄßÂíåÂáΩÊï∞ÁöÑÂØπË±°ÁöÑÈõÜÂêà„ÄÇ</strong></p><p>OOPÊÄùÊÉ≥ÂõõË¶ÅÁ¥†Ôºö Á±ª ÂØπË±° Â±ûÊÄß ÂáΩÊï∞</p></blockquote><ul><li><p>Á±ªÂáΩÊï∞</p></li><li><p>ÊàêÂëòÂáΩÊï∞</p></li><li><p>ÈùôÊÄÅÂáΩÊï∞</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Document</span>():</span></span><br><span class="line">    </span><br><span class="line">    WELCOME_STR = <span class="string">&#x27;Welcome! The context for this book is &#123;&#125;.&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, title, author, context</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;init function called&#x27;</span>)</span><br><span class="line">        self.title = title</span><br><span class="line">        self.author = author</span><br><span class="line">        self.__context = context</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Á±ªÂáΩÊï∞</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_empty_book</span>(<span class="params">cls, title, author</span>):</span></span><br><span class="line">        <span class="keyword">return</span> cls(title=title, author=author, context=<span class="string">&#x27;nothing&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ÊàêÂëòÂáΩÊï∞</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_context_length</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.__context)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ÈùôÊÄÅÂáΩÊï∞</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_welcome</span>(<span class="params">context</span>):</span></span><br><span class="line">        <span class="keyword">return</span> Document.WELCOME_STR.<span class="built_in">format</span>(context)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">empty_book = Document.create_empty_book(<span class="string">&#x27;What Every Man Thinks About Apart from Sex&#x27;</span>, <span class="string">&#x27;Professor Sheridan Simove&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(empty_book.get_context_length())</span><br><span class="line"><span class="built_in">print</span>(empty_book.get_welcome(<span class="string">&#x27;indeed nothing&#x27;</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment">########## ËæìÂá∫ ##########</span></span><br><span class="line"> </span><br><span class="line">init function called</span><br><span class="line"><span class="number">7</span></span><br><span class="line">Welcome! The context <span class="keyword">for</span> this book <span class="keyword">is</span> indeed nothing.</span><br></pre></td></tr></table></figure><h3 id="ÊûÑÈÄ†ÂáΩÊï∞"><a href="#ÊûÑÈÄ†ÂáΩÊï∞" class="headerlink" title="ÊûÑÈÄ†ÂáΩÊï∞"></a>ÊûÑÈÄ†ÂáΩÊï∞</h3><ul><li>ÊØè‰∏™Á±ªÈÉΩÊúâÊûÑÈÄ†ÂáΩÊï∞ÔºåÁªßÊâøÁ±ªÂú®ÁîüÊàêÂØπË±°ÁöÑÊó∂ÂÄôÔºåÊòØ‰∏ç‰ºöËá™Âä®Ë∞ÉÁî®Áà∂Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÁöÑÔºåÂõ†Ê≠§‰Ω†ÂøÖÈ°ªÂú® <strong>init</strong>() ÂáΩÊï∞‰∏≠ÊòæÂºèË∞ÉÁî®Áà∂Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂÆÉ‰ª¨ÁöÑÊâßË°åÈ°∫Â∫èÊòØ Â≠êÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ -&gt; Áà∂Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</li></ul><h3 id="ÊäΩË±°ÂáΩÊï∞-ÊäΩË±°Á±ª"><a href="#ÊäΩË±°ÂáΩÊï∞-ÊäΩË±°Á±ª" class="headerlink" title="ÊäΩË±°ÂáΩÊï∞/ÊäΩË±°Á±ª"></a>ÊäΩË±°ÂáΩÊï∞/ÊäΩË±°Á±ª</h3><ul><li><p>ÊäΩË±°Á±ªÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÁ±ªÔºåÂÆÉÁîü‰∏ãÊù•Â∞±ÊòØ‰Ωú‰∏∫Áà∂Á±ªÂ≠òÂú®ÁöÑÔºå‰∏ÄÊó¶ÂØπË±°ÂåñÂ∞±‰ºöÊä•Èîô„ÄÇÂêåÊ†∑ÔºåÊäΩË±°ÂáΩÊï∞ÂÆö‰πâÂú®ÊäΩË±°Á±ª‰πã‰∏≠ÔºåÂ≠êÁ±ªÂøÖÈ°ªÈáçÂÜôËØ•ÂáΩÊï∞ÊâçËÉΩ‰ΩøÁî®„ÄÇÁõ∏Â∫îÁöÑÊäΩË±°ÂáΩÊï∞ÔºåÂàôÊòØ‰ΩøÁî®Ë£ÖÈ•∞Âô® @abstractmethod Êù•Ë°®Á§∫„ÄÇ</p></li><li><p>ÊäΩË±°Á±ªÂ∞±ÊòØËøô‰πà‰∏ÄÁßçÂ≠òÂú®ÔºåÂÆÉÊòØ‰∏ÄÁßçËá™‰∏äËÄå‰∏ãÁöÑËÆæËÆ°È£éËåÉÔºå‰Ω†Âè™ÈúÄË¶ÅÁî®Â∞ëÈáèÁöÑ‰ª£Á†ÅÊèèËø∞Ê∏ÖÊ•öË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºåÂÆö‰πâÂ•ΩÊé•Âè£ÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•‰∫§Áªô‰∏çÂêåÂºÄÂèë‰∫∫ÂëòÂéªÂºÄÂèëÂíåÂØπÊé•„ÄÇ</p></li></ul><h3 id="Ë£ÖÈ•∞Âô®"><a href="#Ë£ÖÈ•∞Âô®" class="headerlink" title="Ë£ÖÈ•∞Âô®"></a>Ë£ÖÈ•∞Âô®</h3><blockquote><p><strong>ÊâÄË∞ìÁöÑË£ÖÈ•∞Âô®ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÈÄöËøáË£ÖÈ•∞Âô®ÂáΩÊï∞ÔºåÊù•‰øÆÊîπÂéüÂáΩÊï∞ÁöÑ‰∏Ä‰∫õÂäüËÉΩÔºå‰ΩøÂæóÂéüÂáΩÊï∞‰∏çÈúÄË¶Å‰øÆÊîπ„ÄÇ</strong></p><p>Decorators is to modify the behavior of the function through a wrapper so we don‚Äôt have to actually modify the function.</p></blockquote><h4 id="ÂáΩÊï∞Ë£ÖÈ•∞Âô®"><a href="#ÂáΩÊï∞Ë£ÖÈ•∞Âô®" class="headerlink" title="ÂáΩÊï∞Ë£ÖÈ•∞Âô®"></a>ÂáΩÊï∞Ë£ÖÈ•∞Âô®</h4><ul><li><p>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ºöÊää<code>*args</code>Âíå<code>**kwargs</code>Ôºå‰Ωú‰∏∫Ë£ÖÈ•∞Âô®ÂÜÖÈÉ®ÂáΩÊï∞ wrapper() ÁöÑÂèÇÊï∞„ÄÇ<code>*args</code>Âíå<code>**kwargs</code>ÔºåË°®Á§∫Êé•Âèó‰ªªÊÑèÊï∞ÈáèÂíåÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåÂõ†Ê≠§Ë£ÖÈ•∞Âô®Â∞±ÂèØ‰ª•ÂÜôÊàê‰∏ãÈù¢ÁöÑÂΩ¢ÂºèÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&#x27;wrapper of decorator&#x27;</span>)</span><br><span class="line">          func(*args, **kwargs)</span><br><span class="line">      <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">- Ë£ÖÈ•∞Âô®ÂèØ‰ª•Êé•ÂèóÂéüÂáΩÊï∞‰ªªÊÑèÁ±ªÂûãÂíåÊï∞ÈáèÁöÑÂèÇÊï∞ÔºåÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉËøòÂèØ‰ª•Êé•ÂèóËá™Â∑±ÂÆö‰πâÁöÑÂèÇÊï∞„ÄÇ</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">repeat</span>(<span class="params">num</span>):</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">my_decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">          <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">              <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">                  <span class="built_in">print</span>(<span class="string">&#x27;wrapper of decorator&#x27;</span>)</span><br><span class="line">                  func(*args, **kwargs)</span><br><span class="line">          <span class="keyword">return</span> wrapper</span><br><span class="line">      <span class="keyword">return</span> my_decorator</span><br><span class="line">   </span><br><span class="line"><span class="meta">  @repeat(<span class="params"><span class="number">4</span></span>)</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">greet</span>(<span class="params">message</span>):</span></span><br><span class="line">      <span class="built_in">print</span>(message)</span><br><span class="line">   </span><br><span class="line">  greet(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># ËæìÂá∫Ôºö</span></span><br><span class="line">  wrapper of decorator</span><br><span class="line">  hello world</span><br><span class="line">  wrapper of decorator</span><br><span class="line">  hello world</span><br><span class="line">  wrapper of decorator</span><br><span class="line">  hello world</span><br><span class="line">  wrapper of decorator</span><br><span class="line">  hello world</span><br></pre></td></tr></table></figure></li></ul><h4 id="Á±ªË£ÖÈ•∞Âô®"><a href="#Á±ªË£ÖÈ•∞Âô®" class="headerlink" title="Á±ªË£ÖÈ•∞Âô®"></a>Á±ªË£ÖÈ•∞Âô®</h4><ul><li><p>Á±ªË£ÖÈ•∞Âô®‰∏ªË¶Å‰æùËµñ‰∫éÂáΩÊï∞<code>__call_()</code>ÔºåÊØèÂΩì‰Ω†Ë∞ÉÁî®‰∏Ä‰∏™Á±ªÁöÑÁ§∫‰æãÊó∂ÔºåÂáΩÊï∞<code>__call__()</code>Â∞±‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Count</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, func</span>):</span></span><br><span class="line">        self.func = func</span><br><span class="line">        self.num_calls = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        self.num_calls += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;num of calls is: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(self.num_calls))</span><br><span class="line">        <span class="keyword">return</span> self.func(*args, **kwargs)</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Count</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">example</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line"> </span><br><span class="line">example()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ËæìÂá∫</span></span><br><span class="line">num of calls <span class="keyword">is</span>: <span class="number">1</span></span><br><span class="line">hello world</span><br><span class="line"> </span><br><span class="line">example()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ËæìÂá∫</span></span><br><span class="line">num of calls <span class="keyword">is</span>: <span class="number">2</span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure></li></ul><h4 id="Ë£ÖÈ•∞Âô®ÁöÑÂµåÂ•ó"><a href="#Ë£ÖÈ•∞Âô®ÁöÑÂµåÂ•ó" class="headerlink" title="Ë£ÖÈ•∞Âô®ÁöÑÂµåÂ•ó"></a>Ë£ÖÈ•∞Âô®ÁöÑÂµåÂ•ó</h4><ul><li><p>ÊâßË°åÈ°∫Â∫è‰ªéÈáåÂà∞Â§ñ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@decorator1</span></span><br><span class="line"><span class="meta">@decorator2</span></span><br><span class="line"><span class="meta">@decorator3</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    ...</span><br><span class="line"><span class="comment"># Á≠âÂêå‰∫é</span></span><br><span class="line">decorator1(decorator2(decorator3(func)))</span><br></pre></td></tr></table></figure></li></ul><h3 id="metaclass"><a href="#metaclass" class="headerlink" title="metaclass"></a>metaclass</h3><h2 id="ÂçèÁ®ãÔºàAsyncioÔºâ"><a href="#ÂçèÁ®ãÔºàAsyncioÔºâ" class="headerlink" title="ÂçèÁ®ãÔºàAsyncioÔºâ"></a>ÂçèÁ®ãÔºàAsyncioÔºâ</h2><h3 id="ÂçïÁ∫øÁ®ã-ÂºÇÊ≠•I-O"><a href="#ÂçïÁ∫øÁ®ã-ÂºÇÊ≠•I-O" class="headerlink" title="ÂçïÁ∫øÁ®ã+ÂºÇÊ≠•I/O"></a>ÂçïÁ∫øÁ®ã+ÂºÇÊ≠•I/O</h3><blockquote><p>‰ª£Êìç‰ΩúÁ≥ªÁªüÂØπI/OÊìç‰ΩúÁöÑÊîπËøõ‰∏≠ÊúÄ‰∏∫ÈáçË¶ÅÁöÑÂ∞±ÊòØÊîØÊåÅÂºÇÊ≠•I/OÔºåÂú®PythonËØ≠Ë®Ä‰∏≠ÔºåÂçïÁ∫øÁ®ã+ÂºÇÊ≠•I/OÁöÑÁºñÁ®ãÊ®°ÂûãÁß∞‰∏∫ÂçèÁ®ã„ÄÇ</p><p>Êúâ‰∫ÜÂçèÁ®ãÁöÑÊîØÊåÅÔºåÂ∞±ÂèØ‰ª•Âü∫‰∫é‰∫ã‰ª∂È©±Âä®ÁºñÂÜôÈ´òÊïàÁöÑÂ§ö‰ªªÂä°Á®ãÂ∫è„ÄÇÂçèÁ®ãÊúÄÂ§ßÁöÑ‰ºòÂäøÂ∞±ÊòØÊûÅÈ´òÁöÑÊâßË°åÊïàÁéáÔºåÂõ†‰∏∫Â≠êÁ®ãÂ∫èÂàáÊç¢‰∏çÊòØÁ∫øÁ®ãÂàáÊç¢ÔºåËÄåÊòØÁî±Á®ãÂ∫èËá™Ë∫´ÊéßÂà∂ÔºåÂõ†Ê≠§ÔºåÊ≤°ÊúâÁ∫øÁ®ãÂàáÊç¢ÁöÑÂºÄÈîÄ„ÄÇÂçèÁ®ãÁöÑÁ¨¨‰∫å‰∏™‰ºòÂäøÂ∞±ÊòØ‰∏çÈúÄË¶ÅÂ§öÁ∫øÁ®ãÁöÑÈîÅÊú∫Âà∂ÔºåÂõ†‰∏∫Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÔºå‰πü‰∏çÂ≠òÂú®ÂêåÊó∂ÂÜôÂèòÈáèÂÜ≤Á™ÅÔºåÂú®ÂçèÁ®ã‰∏≠ÊéßÂà∂ÂÖ±‰∫´ËµÑÊ∫ê‰∏çÁî®Âä†ÈîÅÔºåÂè™ÈúÄË¶ÅÂà§Êñ≠Áä∂ÊÄÅÂ∞±Â•Ω‰∫ÜÔºåÊâÄ‰ª•ÊâßË°åÊïàÁéáÊØîÂ§öÁ∫øÁ®ãÈ´òÂæàÂ§ö„ÄÇ</p></blockquote><p>Â¶ÇÊûúÊÉ≥Ë¶ÅÂÖÖÂàÜÂà©Áî®CPUÁöÑÂ§öÊ†∏ÁâπÊÄßÔºåÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÊòØÂ§öËøõÁ®ã+ÂçèÁ®ãÔºåÊó¢ÂÖÖÂàÜÂà©Áî®Â§öÊ†∏ÔºåÂèàÂÖÖÂàÜÂèëÊå•ÂçèÁ®ãÁöÑÈ´òÊïàÁéáÔºåÂèØËé∑ÂæóÊûÅÈ´òÁöÑÊÄßËÉΩ„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">crawl_page</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;crawling &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(url))</span><br><span class="line">    sleep_time = <span class="built_in">int</span>(url.split(<span class="string">&#x27;_&#x27;</span>)[-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(sleep_time)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;OK &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(url))</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">urls</span>):</span></span><br><span class="line">    tasks = [asyncio.create_task(crawl_page(url)) <span class="keyword">for</span> url <span class="keyword">in</span> urls]</span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">        <span class="keyword">await</span> task</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    taskÈÅçÂéÜÁöÑÂè¶‰∏ÄÁßçÂÜôÊ≥ï</span></span><br><span class="line"><span class="string">    await asyncio.gather(*tasks)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"> </span><br><span class="line">%time asyncio.run(main([<span class="string">&#x27;url_1&#x27;</span>, <span class="string">&#x27;url_2&#x27;</span>, <span class="string">&#x27;url_3&#x27;</span>, <span class="string">&#x27;url_4&#x27;</span>]))</span><br><span class="line"> </span><br><span class="line"><span class="comment">########## ËæìÂá∫ ##########</span></span><br><span class="line"> </span><br><span class="line">crawling url_1</span><br><span class="line">crawling url_2</span><br><span class="line">crawling url_3</span><br><span class="line">crawling url_4</span><br><span class="line">OK url_1</span><br><span class="line">OK url_2</span><br><span class="line">OK url_3</span><br><span class="line">OK url_4</span><br><span class="line">Wall time: <span class="number">3.99</span> s</span><br></pre></td></tr></table></figure><ul><li>ÂçèÁ®ãÂíåÂ§öÁ∫øÁ®ãÁöÑÂå∫Âà´Ôºå‰∏ªË¶ÅÂú®‰∫é‰∏§ÁÇπÔºå‰∏ÄÊòØÂçèÁ®ã‰∏∫ÂçïÁ∫øÁ®ãÔºõ‰∫åÊòØÂçèÁ®ãÁî±Áî®Êà∑ÂÜ≥ÂÆöÔºåÂú®Âì™‰∫õÂú∞Êñπ‰∫§Âá∫ÊéßÂà∂ÊùÉÔºåÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™‰ªªÂä°„ÄÇ</li><li>ÂçèÁ®ãÁöÑÂÜôÊ≥ïÊõ¥Âä†ÁÆÄÊ¥ÅÊ∏ÖÊô∞ÔºåÊää async / await ËØ≠Ê≥ïÂíå create_task ÁªìÂêàÊù•Áî®ÔºåÂØπ‰∫é‰∏≠Â∞èÁ∫ßÂà´ÁöÑÂπ∂ÂèëÈúÄÊ±ÇÂ∑≤ÁªèÊØ´Êó†ÂéãÂäõ„ÄÇ</li><li>ÂÜôÂçèÁ®ãÁ®ãÂ∫èÁöÑÊó∂ÂÄôÔºå‰Ω†ÁöÑËÑëÊµ∑‰∏≠Ë¶ÅÊúâÊ∏ÖÊô∞ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÊ¶ÇÂøµÔºåÁü•ÈÅìÁ®ãÂ∫èÂú®‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÊöÇÂÅú„ÄÅÁ≠âÂæÖ I/OÔºå‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Å‰∏ÄÂπ∂ÊâßË°åÂà∞Â∫ï„ÄÇ</li></ul><h3 id="Êï∞ÊçÆÈöîÁ¶ª"><a href="#Êï∞ÊçÆÈöîÁ¶ª" class="headerlink" title="Êï∞ÊçÆÈöîÁ¶ª"></a>Êï∞ÊçÆÈöîÁ¶ª</h3><ul><li>Âú®ÂçèÁ®ã‰∏≠ÔºåÈÄöÂ∏∏‰ºö‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèÊàñÂçèÁ®ã‰∏ä‰∏ãÊñáÊù•Â≠òÂÇ®Êï∞ÊçÆÔºåÊØè‰∏™ÂçèÁ®ãÊã•ÊúâËá™Â∑±ÁöÑÊï∞ÊçÆÁ©∫Èó¥Ôºå‰∏ç‰ºöÂèóÂà∞ÂÖ∂‰ªñÂçèÁ®ãÁöÑÂΩ±Âìç„ÄÇÂçèÁ®ã‰πãÈó¥ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞‰º†ÈÄíÊàñÂÖ®Â±ÄÂèòÈáèÁ≠âÊñπÂºèÊù•ËøõË°åÊï∞ÊçÆ‰∫§‰∫íÔºå‰ΩÜÊòØÊï∞ÊçÆÁöÑ‰øÆÊîπÂè™‰ºöÂΩ±ÂìçÂΩìÂâçÂçèÁ®ãÁöÑÊï∞ÊçÆÁ©∫Èó¥Ôºå‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñÂçèÁ®ãÁöÑÊï∞ÊçÆ„ÄÇ</li></ul><h2 id="concurrency"><a href="#concurrency" class="headerlink" title="concurrency"></a>concurrency</h2><blockquote><p>Âπ∂ÂèëÈÄöÂ∏∏Áî®‰∫é I/O Êìç‰ΩúÈ¢ëÁπÅÁöÑÂú∫ÊôØÔºåËÄåÂπ∂Ë°åÂàôÈÄÇÁî®‰∫é CPU heavy ÁöÑÂú∫ÊôØ„ÄÇ</p></blockquote><h3 id="Âπ∂Âèë"><a href="#Âπ∂Âèë" class="headerlink" title="Âπ∂Âèë"></a>Âπ∂Âèë</h3><blockquote><p> Âú® Python ‰∏≠ÔºåÂπ∂ÂèëÂπ∂‰∏çÊòØÊåáÂêå‰∏ÄÊó∂ÂàªÊúâÂ§ö‰∏™Êìç‰ΩúÔºàthread„ÄÅtaskÔºâÂêåÊó∂ËøõË°å„ÄÇÁõ∏ÂèçÔºåÊüê‰∏™ÁâπÂÆöÁöÑÊó∂ÂàªÔºåÂÆÉÂè™ÂÖÅËÆ∏Êúâ‰∏Ä‰∏™Êìç‰ΩúÂèëÁîüÔºåÂè™‰∏çËøáÁ∫øÁ®ã / ‰ªªÂä°‰πãÈó¥‰ºö‰∫íÁõ∏ÂàáÊç¢ÔºåÁõ¥Âà∞ÂÆåÊàê</p></blockquote><p><img src="/images/python/concurrency.png" alt="concurrency"></p><blockquote><p>Âõæ‰∏≠Âá∫Áé∞‰∫Ü thread Âíå task ‰∏§ÁßçÂàáÊç¢È°∫Â∫èÁöÑ‰∏çÂêåÊñπÂºèÔºåÂàÜÂà´ÂØπÂ∫î Python ‰∏≠Âπ∂ÂèëÁöÑ‰∏§ÁßçÂΩ¢Âºè‚Äî‚Äîthreading Âíå asyncio„ÄÇ</p></blockquote><p><strong>futuresÂÆûÁé∞Âπ∂Âèë</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_all</span>(<span class="params">sites</span>):</span></span><br><span class="line">    <span class="keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="number">5</span>) <span class="keyword">as</span> executor:</span><br><span class="line">        executor.<span class="built_in">map</span>(download_one, sites)</span><br></pre></td></tr></table></figure><blockquote><p>ËôΩÁÑ∂Á∫øÁ®ãÁöÑÊï∞ÈáèÂèØ‰ª•Ëá™Â∑±ÂÆö‰πâÔºå‰ΩÜÊòØÁ∫øÁ®ãÊï∞Âπ∂‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºåÂõ†‰∏∫Á∫øÁ®ãÁöÑÂàõÂª∫„ÄÅÁª¥Êä§ÂíåÂà†Èô§‰πü‰ºöÊúâ‰∏ÄÂÆöÁöÑÂºÄÈîÄ„ÄÇÊâÄ‰ª•Â¶ÇÊûú‰Ω†ËÆæÁΩÆÁöÑÂæàÂ§ßÔºåÂèçËÄåÂèØËÉΩ‰ºöÂØºËá¥ÈÄüÂ∫¶ÂèòÊÖ¢„ÄÇÊàë‰ª¨ÂæÄÂæÄÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÁöÑÈúÄÊ±ÇÂÅö‰∏Ä‰∫õÊµãËØïÔºåÊù•ÂØªÊâæÊúÄ‰ºòÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇ</p></blockquote><p><strong>Â§öÁ∫øÁ®ãÊØèÊ¨°Âè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÁöÑÂéüÂõ†</strong></p><blockquote><p>‰∫ãÂÆû‰∏äÔºåPython ÁöÑËß£ÈáäÂô®Âπ∂‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏∫‰∫ÜËß£ÂÜ≥Áî±Ê≠§Â∏¶Êù•ÁöÑ race condition Á≠âÈóÆÈ¢òÔºåPython ‰æøÂºïÂÖ•‰∫ÜÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅÔºå‰πüÂ∞±ÊòØÂêå‰∏ÄÊó∂ÂàªÔºåÂè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å„ÄÇÂΩìÁÑ∂ÔºåÂú®ÊâßË°å I/O Êìç‰ΩúÊó∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãË¢´ block ‰∫ÜÔºåÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ‰æø‰ºöË¢´ÈáäÊîæÔºå‰ªéËÄåËÆ©Âè¶‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üÁªßÁª≠ÊâßË°å„ÄÇ</p></blockquote><h3 id="Âπ∂Ë°å"><a href="#Âπ∂Ë°å" class="headerlink" title="Âπ∂Ë°å"></a>Âπ∂Ë°å</h3><blockquote><p> ÊâÄË∞ìÁöÑÂπ∂Ë°åÔºåÊåáÁöÑÊòØÂêå‰∏ÄÊó∂Âàª„ÄÅÂêåÊó∂ÂèëÁîü„ÄÇPython ‰∏≠ÁöÑ multi-processing ‰æøÊòØËøô‰∏™ÊÑèÊÄù</p></blockquote><p><img src="/images/python/multi-processing.png"></p><ul><li>Âπ∂ÂèëÈÄöÂ∏∏Â∫îÁî®‰∫é I/O Êìç‰ΩúÈ¢ëÁπÅÁöÑÂú∫ÊôØÔºåÊØîÂ¶Ç‰Ω†Ë¶Å‰ªéÁΩëÁ´ô‰∏ä‰∏ãËΩΩÂ§ö‰∏™Êñá‰ª∂ÔºåI/O Êìç‰ΩúÁöÑÊó∂Èó¥ÂèØËÉΩ‰ºöÊØî CPU ËøêË°åÂ§ÑÁêÜÁöÑÊó∂Èó¥ÈïøÂæóÂ§ö„ÄÇ</li><li>ËÄåÂπ∂Ë°åÂàôÊõ¥Â§öÂ∫îÁî®‰∫é CPU heavy ÁöÑÂú∫ÊôØÔºåÊØîÂ¶Ç MapReduce ‰∏≠ÁöÑÂπ∂Ë°åËÆ°ÁÆóÔºå‰∏∫‰∫ÜÂä†Âø´ËøêË°åÈÄüÂ∫¶Ôºå‰∏ÄËà¨‰ºöÁî®Â§öÂè∞Êú∫Âô®„ÄÅÂ§ö‰∏™Â§ÑÁêÜÂô®Êù•ÂÆåÊàê„ÄÇ</li></ul><p><strong>futuresÂÆûÁé∞Âπ∂Ë°å</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_all</span>(<span class="params">sites</span>):</span></span><br><span class="line">    <span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor(max_workers=<span class="number">5</span>) <span class="keyword">as</span> executor:</span><br><span class="line">        to_do = []</span><br><span class="line">        <span class="keyword">for</span> site <span class="keyword">in</span> sites:</span><br><span class="line">            future = executor.submit(download_one, site)</span><br><span class="line">            to_do.append(future)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> future <span class="keyword">in</span> concurrent.futures.as_completed(to_do):</span><br><span class="line">            future.result()</span><br></pre></td></tr></table></figure><blockquote><p>ÂáΩÊï∞ ProcessPoolExecutor() Ë°®Á§∫ÂàõÂª∫ËøõÁ®ãÊ±†Ôºå‰ΩøÁî®Â§ö‰∏™ËøõÁ®ãÂπ∂Ë°åÁöÑÊâßË°åÁ®ãÂ∫è„ÄÇ‰∏çËøáÔºåËøôÈáåÊàë‰ª¨ÈÄöÂ∏∏ÁúÅÁï•ÂèÇÊï∞ workersÔºåÂõ†‰∏∫Á≥ªÁªü‰ºöËá™Âä®ËøîÂõû CPU ÁöÑÊï∞Èáè‰Ωú‰∏∫ÂèØ‰ª•Ë∞ÉÁî®ÁöÑËøõÁ®ãÊï∞„ÄÇ</p></blockquote><h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ‰º™‰ª£Á†Å</span></span><br><span class="line"><span class="keyword">if</span> io_bound:</span><br><span class="line">    <span class="keyword">if</span> io_slow:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Use Asyncio&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Use multi-threading&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> cpu_bound:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Use multi-processing&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="multiprocessing-vs-threading"><a href="#multiprocessing-vs-threading" class="headerlink" title="multiprocessing vs threading"></a>multiprocessing vs threading</h4><p> <code>multiprocessing</code> Ê®°ÂùóÂèØ‰ª•Áî®Êù•ÂàõÂª∫ÂíåÁÆ°ÁêÜÂ§ö‰∏™ËøõÁ®ãÔºå‰ªéËÄåÂÆûÁé∞Âπ∂Âèë‰ªªÂä°Â§ÑÁêÜ„ÄÇËÄå <code>threading</code> Ê®°ÂùóÂàôÊòØÁî®‰∫éÂ§öÁ∫øÁ®ãÁºñÁ®ã„ÄÇ‰∏§ËÄÖÂú®ÂÆûÁé∞Âπ∂Âèë‰ªªÂä°Êó∂Êúâ‰∏Ä‰∫õÂÖ≥ÈîÆÁöÑÂå∫Âà´Ôºö</p><ol><li><strong>ËøõÁ®ã vs Á∫øÁ®ã</strong>:<ul><li><strong>Â§öËøõÁ®ã (multiprocessing)</strong>: ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâËá™Â∑±Áã¨Á´ãÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÂíåÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ (GIL) ÊòØÂÆåÂÖ®Áã¨Á´ãÁöÑÔºåÂõ†Ê≠§Â§öËøõÁ®ãÈÄÇÂêà CPU ÂØÜÈõÜÂûã‰ªªÂä°ÔºåÂõ†‰∏∫‰∏çÂêåÁöÑËøõÁ®ãÂèØ‰ª•Âú®Â§ö‰∏™ CPU Ê†∏ÂøÉ‰∏äÂπ∂Ë°åËøêË°å„ÄÇ</li><li><strong>Â§öÁ∫øÁ®ã (threading)</strong>: Â§öÁ∫øÁ®ãÂÖ±‰∫´Âêå‰∏Ä‰∏™ËøõÁ®ãÁöÑÂÜÖÂ≠òÂíåËµÑÊ∫êÔºåÂõ†Ê≠§ÁÆ°ÁêÜËµ∑Êù•ÂèØËÉΩËæÉ‰∏∫Â§çÊùÇ„ÄÇPython ‰∏≠ÁöÑÁ∫øÁ®ãÂèóÂà∞ GIL ÁöÑÈôêÂà∂ÔºåÂç≥‰ΩøÂú®Â§öÁ∫øÁ®ã‰∏≠‰πüÊòØÂêå‰∏ÄÊó∂Èó¥Âè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å Python Â≠óËäÇÁ†Å„ÄÇÂ§öÁ∫øÁ®ãÈÄÇÂêà I/O ÂØÜÈõÜÂûã‰ªªÂä°ÔºàÂ¶ÇÁΩëÁªúÊìç‰Ωú„ÄÅÊñá‰ª∂ËØªÂÜôÁ≠âÔºâ„ÄÇ</li></ul></li><li><strong>ÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ (GIL)</strong>:<ul><li><strong>multiprocessing</strong>: ‰∏çÂèó GIL ÁöÑÈôêÂà∂ÔºåÂõ†‰∏∫ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑËß£ÈáäÂô®ÂÆû‰æã„ÄÇ</li><li><strong>threading</strong>: ÂèóGILÁöÑÈôêÂà∂ÔºåËøôÂú® CPU ÂØÜÈõÜÂûã‰ªªÂä°‰∏≠‰ºöÊàê‰∏∫Áì∂È¢àÔºå‰ΩÜÂú® I/O ÂØÜÈõÜÂûã‰ªªÂä°‰∏≠ÂΩ±Âìç‰∏çÂ§ß„ÄÇ</li></ul></li><li><strong>ÂÜÖÂ≠ò‰ΩøÁî®</strong>:<ul><li><strong>multiprocessing</strong>: ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂõ†Ê≠§‰ºö‰ΩøÁî®Êõ¥Â§öÁöÑÂÜÖÂ≠òÂºÄÈîÄ„ÄÇ</li><li><strong>threading</strong>: ÂÖ±‰∫´Âêå‰∏ÄÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂõ†Ê≠§ÂÜÖÂ≠òÂºÄÈîÄËæÉÂ∞èÔºå‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁ∫øÁ®ã‰πãÈó¥ÁöÑÊï∞ÊçÆÂêåÊ≠•ÂíåÁ´û‰∫âÈóÆÈ¢ò„ÄÇ</li></ul></li><li><strong>ÂêØÂä®Êó∂Èó¥ÂíåÂºÄÈîÄ</strong>:<ul><li><strong>multiprocessing</strong>: ËøõÁ®ãÂêØÂä®ÂíåÂàáÊç¢ÁöÑÂºÄÈîÄËæÉÂ§ßÔºåÈÄÇÂêàÈïøÊó∂Èó¥ËøêË°åÁöÑ‰ªªÂä°„ÄÇ</li><li><strong>threading</strong>: Á∫øÁ®ãÂêØÂä®ÂíåÂàáÊç¢ÁöÑÂºÄÈîÄËæÉÂ∞èÔºåÈÄÇÂêàÁü≠Êó∂Èó¥„ÄÅÈ´òÈ¢ëÁéá‰ªªÂä°ÁöÑÂπ∂ÂèëÂ§ÑÁêÜ„ÄÇ</li></ul></li><li><strong>Êï∞ÊçÆÂÖ±‰∫´ÂíåÈÄö‰ø°</strong>:<ul><li><strong>multiprocessing</strong>: ËøõÁ®ãÈó¥Êï∞ÊçÆÈÄö‰ø°ÈúÄË¶Å‰ΩøÁî®ËøõÁ®ãÈó¥ÈÄö‰ø° (IPC) Êú∫Âà∂ÔºåÂ¶ÇÈòüÂàó (Queue)„ÄÅÁÆ°ÈÅì (Pipe) ÊàñÂÖ±‰∫´ÂÜÖÂ≠ò (Shared Memory)ÔºåÂÆûÁé∞Ëµ∑Êù•ËæÉ‰∏∫Â§çÊùÇ„ÄÇ</li><li><strong>threading</strong>: Á∫øÁ®ãÈó¥Áõ¥Êé•ÂÖ±‰∫´ÂÜÖÂ≠òÔºåÂõ†Ê≠§Êï∞ÊçÆÂÖ±‰∫´ËæÉ‰∏∫Êñπ‰æøÔºå‰ΩÜÈúÄË¶ÅÊ≥®ÊÑèÂêåÊ≠•ÈóÆÈ¢òÔºå‰ΩøÁî®ÈîÅ (Lock)„ÄÅÊù°‰ª∂ÂèòÈáè (Condition) Á≠âÊú∫Âà∂Êù•ÈÅøÂÖçÁ´û‰∫âÊù°‰ª∂„ÄÇ</li></ul></li></ol><p>Âú®ÁºñÂÜôÂπ∂ÂèëÁ®ãÂ∫èÊó∂ÔºåÈÄâÊã© <code>multiprocessing</code> Êàñ <code>threading</code> ÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÂ∫îÁî®Âú∫ÊôØÂíå‰ªªÂä°Á±ªÂûã„ÄÇÂ¶ÇÊûúÊòØ CPU ÂØÜÈõÜÂûã‰ªªÂä°ÔºåÊé®Ëçê‰ΩøÁî® <code>multiprocessing</code>ÔºõÂ¶ÇÊûúÊòØ I/O ÂØÜÈõÜÂûã‰ªªÂä°Ôºå<code>threading</code> ÂèØËÉΩÊõ¥‰∏∫ÂêàÈÄÇ„ÄÇ</p><h4 id="multiprocessing-vs-concurrent-future-ProcessPoolExecutor"><a href="#multiprocessing-vs-concurrent-future-ProcessPoolExecutor" class="headerlink" title="multiprocessing vs concurrent.future.ProcessPoolExecutor"></a>multiprocessing vs concurrent.future.ProcessPoolExecutor</h4><ol><li>Ê®°Âùó‰ΩçÁΩÆ<ul><li><strong>multiprocessing</strong>: ‰Ωç‰∫é <code>multiprocessing</code> Ê®°Âùó‰∏≠ÔºåÊòØ‰∏ìÈó®Áî®‰∫éÂ§ÑÁêÜÂπ∂Ë°åËøõÁ®ãÁöÑÊ®°Âùó„ÄÇ</li><li><strong>concurrent.futures.ProcessPoolExecutor</strong>: ‰Ωç‰∫é <code>concurrent.futures</code> Ê®°Âùó‰∏≠ÔºåÊòØ <code>concurrent.futures</code> Êèê‰æõÁöÑÈ´òÂ±ÇÊ¨°ÂºÇÊ≠•Âπ∂ÂèëÊ°ÜÊû∂ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰∏ªË¶ÅÁî®‰∫éÁÆÄÂåñÂπ∂ÂèëÊâßË°å„ÄÇ</li></ul></li><li>‰ΩøÁî®ÊñπÂºè<ul><li><strong>multiprocessing</strong>: Êèê‰æõ‰∫ÜÁõ∏ÂØπÂ∫ïÂ±ÇÁöÑÊé•Âè£ÂíåÁÅµÊ¥ªÊÄßÔºå‰æãÂ¶Ç <code>Process</code>, <code>Queue</code>, <code>Pipe</code> Á≠â„ÄÇ‰Ω†ÂèØ‰ª•Áõ¥Êé•ÁÆ°ÁêÜËøõÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÔºåÊâãÂä®ÂêØÂä®ÂíåÁªàÊ≠¢ËøõÁ®ãÔºå‰ª•ÂèäÂ§ÑÁêÜËøõÁ®ãÈó¥ÈÄö‰ø°„ÄÇ</li><li><strong>concurrent.futures.ProcessPoolExecutor</strong>: Êèê‰æõ‰∫ÜÊõ¥È´òÁ∫ßÂà´ÁöÑÊé•Âè£ÔºåÁÆÄÂåñ‰∫ÜÂ§öËøõÁ®ãÁöÑÁÆ°ÁêÜ„ÄÇ‰ΩøÁî® <code>Executor</code> ÂØπË±°Êù•ÁÆ°ÁêÜËøõÁ®ãÊ±†ÔºåÊèê‰∫§‰ªªÂä°ÔºåËé∑ÂèñÁªìÊûúÊõ¥Âä†Êñπ‰æøÂíåÁõ¥ËßÇ„ÄÇ</li></ul></li><li>‰ªªÂä°Êèê‰∫§ÂíåÁªìÊûúËé∑Âèñ<ul><li><strong>multiprocessing</strong>: ‰Ω†ÈúÄË¶ÅËá™Â∑±ÊâãÂä®ÁÆ°ÁêÜ‰ªªÂä°ÁöÑÊèê‰∫§ÂíåÁªìÊûúÁöÑÊ±áÊÄªÔºåÈÄöÂ∏∏ÈÄöËøáÈòüÂàó (Queue) ÊàñÁÆ°ÈÅì (Pipe) Êù•ÂÆûÁé∞„ÄÇ</li><li><strong>concurrent.futures.ProcessPoolExecutor</strong>: Êèê‰æõ‰∫Ü <code>submit</code> Âíå <code>map</code> ÂáΩÊï∞Êù•Êèê‰∫§‰ªªÂä°ÔºåÂπ∂‰∏îËøîÂõû Future ÂØπË±°ÔºåÂèØ‰ª•Êñπ‰æøÂú∞Ëé∑Âèñ‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú„ÄÇ</li></ul></li><li>ÂºÇÊ≠•ÁâπÊÄß<ul><li><strong>multiprocessing</strong>: Êèê‰æõ‰∫Ü‰∏Ä‰∫õÂü∫Á°ÄÁöÑÂºÇÊ≠•ÁâπÊÄßÔºå‰ΩÜ‰∏ªË¶ÅËøòÊòØÂêåÊ≠•Ë∞ÉÁî®ÔºåÈúÄË¶ÅËá™Ë°åÂ§ÑÁêÜÂºÇÊ≠•ÁªìÊûú„ÄÇ</li><li><strong>concurrent.futures.ProcessPoolExecutor</strong>: ‰∏ìÈó®ËÆæËÆ°‰∏∫ÂºÇÊ≠•Ê°ÜÊû∂Ôºå‰∏é Python ÁöÑ <code>asyncio</code> Êõ¥Âä†ÂèãÂ•ΩÔºåÂèØ‰ª•‰ΩøÁî® <code>Future</code> ÂØπË±°ËøõË°åÂºÇÊ≠•‰ªªÂä°ÁöÑÁÆ°ÁêÜ„ÄÇ</li></ul></li></ol><h2 id="GIL"><a href="#GIL" class="headerlink" title="GIL"></a>GIL</h2><blockquote><p> Global Interpreter LockÔºåÂç≥ÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ</p><p> ‰ªª‰ΩïÁ∫øÁ®ãÊâßË°åÂâçÂøÖÈ°ªÂÖàËé∑ÂæóGILÈîÅÔºåÁÑ∂ÂêéÊØèÊâßË°å100Êù°Â≠óËäÇÁ†ÅÔºåËß£ÈáäÂô®Â∞±Ëá™Âä®ÈáäÊîæGILÈîÅÔºåËÆ©Âà´ÁöÑÁ∫øÁ®ãÊúâÊú∫‰ºöÊâßË°å</p></blockquote><p><strong>pythonÂºïËøõGILÁöÑÂéüÂõ†</strong></p><ul><li>‰∏ÄÊòØËÆæËÆ°ËÄÖ‰∏∫‰∫ÜËßÑÈÅøÁ±ª‰ºº‰∫éÂÜÖÂ≠òÁÆ°ÁêÜËøôÊ†∑ÁöÑÂ§çÊùÇÁöÑÁ´û‰∫âÈ£éÈô©ÈóÆÈ¢òÔºàrace conditionÔºâÔºõ</li><li>‰∫åÊòØÂõ†‰∏∫ CPython Â§ßÈáè‰ΩøÁî® C ËØ≠Ë®ÄÂ∫ìÔºå‰ΩÜÂ§ßÈÉ®ÂàÜ C ËØ≠Ë®ÄÂ∫ìÈÉΩ‰∏çÊòØÂéüÁîüÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºàÁ∫øÁ®ãÂÆâÂÖ®‰ºöÈôç‰ΩéÊÄßËÉΩÂíåÂ¢ûÂä†Â§çÊùÇÂ∫¶Ôºâ</li></ul><p><strong>Â∑•‰ΩúÊú∫Âà∂</strong></p><p><img src="/images/python/GIL.png"></p><p><strong>check interval</strong></p><blockquote><p>CPython ‰∏≠ËøòÊúâÂè¶‰∏Ä‰∏™Êú∫Âà∂ÔºåÂè´ÂÅö check_intervalÔºåÊÑèÊÄùÊòØ CPython Ëß£ÈáäÂô®‰ºöÂéªËΩÆËØ¢Ê£ÄÊü•Á∫øÁ®ã GIL ÁöÑÈîÅ‰ΩèÊÉÖÂÜµ„ÄÇÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥ÔºåPython Ëß£ÈáäÂô®Â∞±‰ºöÂº∫Âà∂ÂΩìÂâçÁ∫øÁ®ãÂéªÈáäÊîæ GILÔºåËøôÊ†∑Âà´ÁöÑÁ∫øÁ®ãÊâçËÉΩÊúâÊâßË°åÁöÑÊú∫‰ºö„ÄÇ</p></blockquote><p><img src="/images/python/check-interval.png"></p><h2 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h2><blockquote><p>assert ËØ≠Âè•ÔºåÂèØ‰ª•ËØ¥ÊòØ‰∏Ä‰∏™ debug ÁöÑÂ•ΩÂ∑•ÂÖ∑Ôºå‰∏ªË¶ÅÁî®‰∫éÊµãËØï‰∏Ä‰∏™Êù°‰ª∂ÊòØÂê¶Êª°Ë∂≥„ÄÇÂ¶ÇÊûúÊµãËØïÁöÑÊù°‰ª∂Êª°Ë∂≥ÔºåÂàô‰ªÄ‰πà‰πü‰∏çÂÅöÔºåÁõ∏ÂΩì‰∫éÊâßË°å‰∫Ü pass ËØ≠Âè•ÔºõÂ¶ÇÊûúÊµãËØïÊù°‰ª∂‰∏çÊª°Ë∂≥Ôºå‰æø‰ºöÊäõÂá∫ÂºÇÂ∏∏ AssertionErrorÔºåÂπ∂ËøîÂõûÂÖ∑‰ΩìÁöÑÈîôËØØ‰ø°ÊÅØÔºàoptionalÔºâ</p></blockquote><p>ËØ≠Ê≥ï</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert_stmt ::=  <span class="string">&quot;assert&quot;</span> expression [<span class="string">&quot;,&quot;</span> expression]</span><br></pre></td></tr></table></figure><p>‰æãÂ¶ÇÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">‰æãÂ≠ê<span class="number">1</span>Ôºö</span><br><span class="line"><span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line">Áõ∏ÂΩì‰∫é</span><br><span class="line"><span class="keyword">if</span> <span class="literal">__debug__</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression: <span class="keyword">raise</span> AssertionError</span><br><span class="line"></span><br><span class="line">‰æãÂ≠ê<span class="number">2</span>Ôºö</span><br><span class="line"><span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span>,  <span class="string">&#x27;assertion is wrong&#x27;</span></span><br><span class="line">Áõ∏ÂΩì‰∫é</span><br><span class="line"><span class="keyword">if</span> <span class="literal">__debug__</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression1: <span class="keyword">raise</span> AssertionError(expression2)</span><br><span class="line">    </span><br><span class="line">‰æãÂ≠ê<span class="number">3</span>Ôºà‰øÉÈîÄ‰ª∑Ê†ºÂ§ß‰∫é<span class="number">0</span>ÂÖÉÔºâÔºö</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_discount</span>(<span class="params">price, discount</span>):</span></span><br><span class="line">    updated_price = price * (<span class="number">1</span> - discount)</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">0</span> &lt;= updated_price &lt;= price, <span class="string">&#x27;price should be greater or equal to 0 and less or equal to original price&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> updated_price</span><br></pre></td></tr></table></figure><ul><li>‰∏çË¶ÅÂú®‰ΩøÁî® assert Êó∂Âä†ÂÖ•Êã¨Âè∑ÔºåÂê¶ÂàôÊó†ËÆ∫Ë°®ËææÂºèÂØπ‰∏éÈîôÔºåassert Ê£ÄÊü•Ê∞∏Ëøú‰∏ç‰ºö fail</li></ul><h2 id="with"><a href="#with" class="headerlink" title="with"></a>with</h2><blockquote><p>Âú® Python ‰∏≠ÔºåËß£ÂÜ≥ËµÑÊ∫êÊ≥ÑÈú≤ÁöÑÊñπÂºèÊòØ‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®Ôºàcontext managerÔºâ„ÄÇ‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®ÔºåËÉΩÂ§üÂ∏ÆÂä©‰Ω†Ëá™Âä®ÂàÜÈÖçÂπ∂‰∏îÈáäÊîæËµÑÊ∫êÔºåÂÖ∂‰∏≠ÊúÄÂÖ∏ÂûãÁöÑÂ∫îÁî®‰æøÊòØ with ËØ≠Âè•</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Á§∫‰æã‰∏ÄÔºö</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">Á≠âÂêå‰∫é</span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f.write(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">Á§∫‰æã‰∫åÔºö</span><br><span class="line">some_lock = threading.Lock()</span><br><span class="line"><span class="keyword">with</span> somelock:</span><br><span class="line">    ...</span><br><span class="line">Á≠âÂêå‰∫é</span><br><span class="line">some_lock = threading.Lock()</span><br><span class="line">some_lock.acquire()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    some_lock.release()</span><br></pre></td></tr></table></figure><ul><li><p>Âü∫‰∫éÁ±ªÁöÑ‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®</p><blockquote><p>ÂΩìÊàë‰ª¨Áî®Á±ªÊù•ÂàõÂª∫‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®Êó∂ÔºåÂøÖÈ°ª‰øùËØÅËøô‰∏™Á±ªÂåÖÊã¨ÊñπÊ≥ï<code>‚Äù__enter__()‚Äù</code>ÂíåÊñπÊ≥ï<code>‚Äú__exit__()‚Äù</code>„ÄÇÂÖ∂‰∏≠ÔºåÊñπÊ≥ï<code>‚Äú__enter__()‚Äù</code>ËøîÂõûÈúÄË¶ÅË¢´ÁÆ°ÁêÜÁöÑËµÑÊ∫êÔºåÊñπÊ≥ï<code>‚Äú__exit__()‚Äù</code>ÈáåÈÄöÂ∏∏‰ºöÂ≠òÂú®‰∏Ä‰∫õÈáäÊîæ„ÄÅÊ∏ÖÁêÜËµÑÊ∫êÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇËøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑÂÖ≥Èó≠Êñá‰ª∂Á≠âÁ≠â„ÄÇ</p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileManager</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, mode</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __init__ method&#x27;</span>)</span><br><span class="line">        self.name = name</span><br><span class="line">        self.mode = mode </span><br><span class="line">        self.file = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __enter__ method&#x27;</span>)</span><br><span class="line">        self.file = <span class="built_in">open</span>(self.name, self.mode)</span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __exit__ method&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> self.file:</span><br><span class="line">            self.file.close()</span><br><span class="line"><span class="comment"># ‰ΩøÁî®       </span></span><br><span class="line"><span class="keyword">with</span> FileManager(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ready to write to file&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>Âü∫‰∫éÁîüÊàêÂô®ÁöÑ‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®</li></ul><blockquote><p>‰ΩøÁî®Ë£ÖÈ•∞Âô® contextlib.contextmanagerÔºåÊù•ÂÆö‰πâËá™Â∑±ÊâÄÈúÄÁöÑÂü∫‰∫éÁîüÊàêÂô®ÁöÑ‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®ÔºåÁî®‰ª•ÊîØÊåÅ with ËØ≠Âè•</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"> </span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_manager</span>(<span class="params">name, mode</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = <span class="built_in">open</span>(name, mode)</span><br><span class="line">        <span class="keyword">yield</span> f</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        f.close()</span><br><span class="line">        </span><br><span class="line"><span class="keyword">with</span> file_manager(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="ASGI"><a href="#ASGI" class="headerlink" title="ASGI"></a>ASGI</h2><blockquote><p> the Asynchronous Server Gateway Interface.</p></blockquote><h2 id="ÊÄßËÉΩË∞ÉËØï"><a href="#ÊÄßËÉΩË∞ÉËØï" class="headerlink" title="ÊÄßËÉΩË∞ÉËØï"></a>ÊÄßËÉΩË∞ÉËØï</h2><h3 id="cProfile"><a href="#cProfile" class="headerlink" title="cProfile"></a>cProfile</h3><hr><h2 id="Áî®Ê≥ï-tips"><a href="#Áî®Ê≥ï-tips" class="headerlink" title="Áî®Ê≥ï tips"></a>Áî®Ê≥ï tips</h2><ul><li><p>ÂºïÁî®ËßÑËåÉ <code>from your_file import function_name, class_name</code></p></li><li><p>ÂÆö‰πâÂáΩÊï∞Êó∂ÔºåÊâÄÊúâÈùûÈªòËÆ§ÂèÇÊï∞Â∞ÜÂú®ÈªòËÆ§ÂèÇÊï∞‰πãÂâç</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span>(<span class="params">arg1, arg3, arg2=<span class="string">&quot;default&quot;</span></span>):</span></span><br><span class="line">    <span class="comment"># ÂáΩÊï∞ÂÆûÁé∞</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p><code>pass</code> ÊòØ‰∏Ä‰∏™Áî®‰∫éÊöÇÊó∂Âç†‰ΩçÊàñ‰Ωú‰∏∫Á©∫Âç†‰ΩçÁ¨¶ÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂÆÉÁ°Æ‰øù‰ª£Á†ÅËÉΩÂ§üÈ°∫Âà©ÈÄöËøáËØ≠Ê≥ïÊ£ÄÊü•ËÄå‰∏çÂÅö‰ªª‰ΩïÂÆûÈôÖÁöÑÊìç‰Ωú„ÄÇ</p></li><li><p>ÊØè‰∏™PythonÊñá‰ª∂ÈÉΩÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÂèòÈáè<code>__name__</code>„ÄÇÂΩì‰∏Ä‰∏™PythonÊñá‰ª∂Ë¢´Áõ¥Êé•ËøêË°åÊó∂Ôºå<code>__name__</code>ÁöÑÂÄºË¢´ËÆæÁΩÆ‰∏∫<code>&#39;__main__&#39;</code>„ÄÇÂΩì‰∏Ä‰∏™PythonÊñá‰ª∂Ë¢´ÂØºÂÖ•Âà∞Âè¶‰∏Ä‰∏™Êñá‰ª∂‰∏≠Êó∂Ôºå<code>__name__</code>ÁöÑÂÄºË¢´ËÆæÁΩÆ‰∏∫ËØ•Êñá‰ª∂ÁöÑÂêçÂ≠óÔºåÊâÄ‰ª•Áî®<code>if __name__ == &#39;__main__&#39;</code>Êù•ÈÅøÂºÄ import Êó∂ÊâßË°å„ÄÇ</p></li><li><p>ÊØîËæÉÂíåÊã∑Ë¥ù</p><ul><li><p><code>&#39;==&#39;</code>Êìç‰ΩúÁ¨¶ÊØîËæÉÂØπË±°‰πãÈó¥ÁöÑÂÄºÊòØÂê¶Áõ∏Á≠â</p></li><li><p><code>&#39;is&#39;</code>Êìç‰ΩúÁ¨¶ÔºåÁõ∏ÂΩì‰∫éÊØîËæÉÂØπË±°‰πãÈó¥ÁöÑ ID ÊòØÂê¶Áõ∏Á≠â</p><blockquote><p>ÂØπ‰∫éÊï¥ÂûãÊï∞Â≠óÊù•ËØ¥Ôºå‰ª•‰∏ä<code>a is b</code>‰∏∫ True ÁöÑÁªìËÆ∫ÔºåÂè™ÈÄÇÁî®‰∫é -5 Âà∞ 256 ËåÉÂõ¥ÂÜÖÁöÑÊï∞Â≠ó</p></blockquote></li></ul></li><li><p>ÂÄº‰º†ÈÄí„ÄÅÂºïÁî®‰º†ÈÄí</p><ul><li>ÂèòÈáèÁöÑËµãÂÄºÔºåÂè™ÊòØË°®Á§∫ËÆ©ÂèòÈáèÊåáÂêë‰∫ÜÊüê‰∏™ÂØπË±°ÔºåÂπ∂‰∏çË°®Á§∫Êã∑Ë¥ùÂØπË±°ÁªôÂèòÈáèÔºõËÄå‰∏Ä‰∏™ÂØπË±°ÔºåÂèØ‰ª•Ë¢´Â§ö‰∏™ÂèòÈáèÊâÄÊåáÂêë„ÄÇ</li><li>ÂèØÂèòÂØπË±°ÔºàÂàóË°®ÔºåÂ≠óÂÖ∏ÔºåÈõÜÂêàÁ≠âÁ≠âÔºâÁöÑÊîπÂèòÔºå‰ºöÂΩ±ÂìçÊâÄÊúâÊåáÂêëËØ•ÂØπË±°ÁöÑÂèòÈáè„ÄÇ</li><li>ÂØπ‰∫é‰∏çÂèØÂèòÂØπË±°ÔºàÂ≠óÁ¨¶‰∏≤ÔºåÊï¥ÂûãÔºåÂÖÉÁ•ñÁ≠âÁ≠âÔºâÔºåÊâÄÊúâÊåáÂêëËØ•ÂØπË±°ÁöÑÂèòÈáèÁöÑÂÄºÊÄªÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰πü‰∏ç‰ºöÊîπÂèò„ÄÇ‰ΩÜÊòØÈÄöËøáÊüê‰∫õÊìç‰ΩúÔºà+= Á≠âÁ≠âÔºâÊõ¥Êñ∞‰∏çÂèØÂèòÂØπË±°ÁöÑÂÄºÊó∂Ôºå‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°„ÄÇ</li><li>ÂèòÈáèÂèØ‰ª•Ë¢´Âà†Èô§Ôºå‰ΩÜÊòØÂØπË±°Êó†Ê≥ïË¢´Âà†Èô§„ÄÇ</li></ul></li><li><p>ÂÆπÂô®ÊòØÂèØËø≠‰ª£ÂØπË±°ÔºåÂèØËø≠‰ª£ÂØπË±°Ë∞ÉÁî® iter() ÂáΩÊï∞ÔºåÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇËø≠‰ª£Âô®ÂèØ‰ª•ÈÄöËøá next() ÂáΩÊï∞Êù•ÂæóÂà∞‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ªéËÄåÊîØÊåÅÈÅçÂéÜ„ÄÇ</p></li><li><p>ÁîüÊàêÂô®ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑËø≠‰ª£Âô®ÔºàÊ≥®ÊÑèËøô‰∏™ÈÄªËæëÂÖ≥Á≥ªÂèç‰πã‰∏çÊàêÁ´ãÔºâ„ÄÇ‰ΩøÁî®ÁîüÊàêÂô®Ôºå‰Ω†ÂèØ‰ª•ÂÜôÂá∫Êù•Êõ¥Âä†Ê∏ÖÊô∞ÁöÑ‰ª£Á†ÅÔºõÂêàÁêÜ‰ΩøÁî®ÁîüÊàêÂô®ÔºåÂèØ‰ª•Èôç‰ΩéÂÜÖÂ≠òÂç†Áî®„ÄÅ‰ºòÂåñÁ®ãÂ∫èÁªìÊûÑ„ÄÅÊèêÈ´òÁ®ãÂ∫èÈÄüÂ∫¶„ÄÇ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kafka plain &amp; sasl_scram</title>
      <link href="/2023/09/11/kafka%20config%20plain%20with%20sasl_scram/"/>
      <url>/2023/09/11/kafka%20config%20plain%20with%20sasl_scram/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Â∑≤È™åËØÅ kafka 2.3.1</p><p>Ê≠§ÊñπÊ°àÂèØ‰ª•Âä®ÊÄÅÂàõÂª∫Áî®Êà∑ÔºåÊàñ‰øÆÊîπÁî®Êà∑Ë¥¶Âè∑‰ø°ÊÅØ</p></blockquote><blockquote><p>SASLÔºàSimple Authentication and Security LayerÔºâ</p><p>ÂèÇËÄÉ <a href="https://kafka.apache.org/documentation/#security_sasl_scram">https://kafka.apache.org/documentation/#security_sasl_scram</a></p></blockquote><h1 id="ÊúçÂä°Á´Ø"><a href="#ÊúçÂä°Á´Ø" class="headerlink" title="ÊúçÂä°Á´Ø"></a>ÊúçÂä°Á´Ø</h1><blockquote><p>ÁéØÂ¢É zookeeperÁ´ØÂè£22181 Ôºåkafka brokerÁ´ØÂè£39092</p><p>Êó†ÈúÄÈáçÂêØzookeeper</p></blockquote><h2 id="Á¨¨‰∏ÄÊ≠•ÔºöÂàõÂª∫-SCRAM-ËØÅ‰π¶"><a href="#Á¨¨‰∏ÄÊ≠•ÔºöÂàõÂª∫-SCRAM-ËØÅ‰π¶" class="headerlink" title="Á¨¨‰∏ÄÊ≠•ÔºöÂàõÂª∫ SCRAM ËØÅ‰π¶"></a>Á¨¨‰∏ÄÊ≠•ÔºöÂàõÂª∫ SCRAM ËØÅ‰π¶</h2><blockquote><p>Âú®brokerÂêØÂä®‰πãÂâç</p></blockquote><ul><li><p>ÂàõÂª∫adminÁî®Êà∑ËØÅ‰π¶</p><p>ÂêØÂä®‰πãÂâçÔºàÂøÖÈ°ªÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-configs.sh --zookeeper 172.20.58.93:22181 --alter --add-config &#x27;SCRAM-SHA-256=[password=datacanvas],SCRAM-SHA-512=[password=datacanvas]&#x27; --entity-type users --entity-name admin</span><br></pre></td></tr></table></figure><blockquote><p>‰ºöÂú® zookeeperÁîü‰∫ßÁõÆÂΩï configÔºå‰∏äÈù¢zookeeperÂèÇÊï∞ÂÄº‰∏ékafka server.propertiesÁöÑzookeeper connectÈÖçÁΩÆ‰∏ÄËá¥Ôºå‰πüÂíåoffsetExplorerÁöÑchroot path‰∏ÄËá¥</p></blockquote></li><li><p>ÂàóÂá∫Áî®Êà∑Â∑≤ÊúâËØÅ‰π¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-configs.sh --zookeeper 172.20.58.93:22181 --describe --entity-type users --entity-name alice</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§Áî®Êà∑ËØÅ‰π¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-configs.sh --zookeeper 172.20.58.93:22181 --alter --delete-config &#x27;SCRAM-SHA-512&#x27; --entity-type users --entity-name alice</span><br></pre></td></tr></table></figure></li><li><p>ÂàõÂª∫ÊôÆÈÄöÁî®Êà∑aliceËØÅ‰π¶</p><blockquote><p>ÂèØÂú®ÂêØÂä®‰πãÂâçÊàñÂêØÂä®‰πãÂêéÁöÜÂèØ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-configs.sh --zookeeper 172.20.58.93:22181 --alter --add-config &#x27;SCRAM-SHA-256=[iterations=8192,password=alice-secret]&#x27; --entity-type users --entity-name alice</span><br></pre></td></tr></table></figure></li></ul><h2 id="Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka-server-jaas-confÊñá‰ª∂"><a href="#Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka-server-jaas-confÊñá‰ª∂" class="headerlink" title="Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka_server_jaas.confÊñá‰ª∂"></a>Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka_server_jaas.confÊñá‰ª∂</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">KafkaServer &#123;</span><br><span class="line">    org.apache.kafka.common.security.scram.ScramLoginModule required</span><br><span class="line">    username=&quot;admin&quot;</span><br><span class="line">    password=&quot;datacanvas&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start-sh"><a href="#Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start-sh" class="headerlink" title="Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start.sh"></a>Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start.sh</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KAFKA_OPTS=<span class="string">&quot;-Djava.security.auth.login.config=/home/sasl/kafka_2.13-3.3.2/config/kafka_server_jaas.conf&quot;</span></span><br></pre></td></tr></table></figure><ul><li>Ê≥®ÊÑè‰øÆÊîπË∑ØÂæÑ</li></ul><h2 id="Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver-properties"><a href="#Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver-properties" class="headerlink" title="Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver.properties"></a>Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver.properties</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">listeners</span>=<span class="string">PLAINTEXT://0.0.0.0:9092,SASL_PLAINTEXT://0.0.0.0:29092</span></span><br><span class="line"><span class="meta">advertised.listeners</span>=<span class="string">PLAINTEXT://172.20.58.93:9092,SASL_PLAINTEXT://172.20.58.93:29092</span></span><br><span class="line"><span class="meta">security.inter.broker.protocol</span>=<span class="string">SASL_PLAINTEXT</span></span><br><span class="line"><span class="meta">sasl.mechanism.inter.broker.protocol</span>=<span class="string">SCRAM-SHA-256</span></span><br><span class="line"><span class="meta">sasl.enabled.mechanisms</span>=<span class="string">SCRAM-SHA-256</span></span><br></pre></td></tr></table></figure><ul><li><p>listenersËÆæÁΩÆ‰∫Ü‰∏§ÁßçÂçèËÆÆ ÊòéÊñáËøûÊé•PLAINTEXT Âíå ÂÆâÂÖ®ËøûÊé• SASL_SSL</p><ul><li><code>0.0.0.0</code> Ë°®Á§∫ Kafka Broker Â∞ÜÁõëÂê¨ÊâÄÊúâÂèØÁî®ÁöÑÁΩëÁªúÊé•Âè£ÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂ∞ÜÊé•ÂèóÊù•Ëá™‰ªª‰Ωï IP Âú∞ÂùÄÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ</li></ul></li><li><p>Ê≥®ÊÑèzookeeerÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆ (/brokers)</p></li><li><p>ËÆæÁΩÆÈªòËÆ§ÂâØÊú¨Êï∞ default.replication.factor=3 Âíå num.partitions=1</p></li><li><p>ÊµãËØï‰ΩøÁî®<code>log.dirs=/home/sasl/data/kafka-logs</code></p></li><li><p> ACLsÁõ∏ÂÖ≥ÈÖçÁΩÆ</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># authorizer.class.name=kafka.security.auth.SimpleAclAuthorizer ÊóßÁâàÊú¨ÈÖçÁΩÆ</span></span><br><span class="line"><span class="meta">authorizer.class.name</span>=<span class="string">kafka.security.authorizer.AclAuthorizer</span></span><br><span class="line"><span class="comment"># ËøôÈáåÊ∑ªÂä†ANONYMOUS‰∏∫Ë∂ÖÁ∫ßÁî®Êà∑Ôºå‰∏ªË¶Å‰∏∫‰∫Ülistener for plain(Â¶Ç‰ΩïÂè™Áî®saslÔºåÂèØ‰ª•‰∏çÈÖçÁΩÆANONYMOUS)</span></span><br><span class="line"><span class="meta">super.users</span>=<span class="string">User:admin;User:ANONYMOUS </span></span><br><span class="line"><span class="meta">allow.everyone.if.no.acl.found</span>=<span class="string">false </span></span><br></pre></td></tr></table></figure><blockquote><p> ÈªòËÆ§‰∏∫true,ÈªòËÆ§ÊÉÖÂÜµÂè™ÈÄöËøáÁî®Êà∑ÂØÜÁ†ÅËÆ§ËØÅÁÆ°ÊéßÁî®Êà∑ÔºåaclÂè™‰ºöÂØπ‚Äìdeny-principalËµ∑ÊïàÔºàÊâÄ‰ª•ÈªòËÆ§ÂêåÊó∂‰ΩøÁî® plainÂíåscramÔºåÈúÄË¶Å‰øùÊåÅÈªòËÆ§true„ÄÇÂ¶ÇÊûúÂçïÁã¨‰ΩøÁî®scramÔºåÂàôÈúÄË¶ÅËÆæÁΩÆ‰∏∫falseÔºâ</p></blockquote><h2 id="Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config-properties"><a href="#Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config-properties" class="headerlink" title="Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config.properties"></a>Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config.properties</h2><p>Âú®configÁõÆÂΩïÊñ∞Â¢ûacl-config.propertiesËÆæÁΩÆ admin‰ø°ÊÅØ</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">sasl.jaas.config</span>=<span class="string">org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;admin&quot; password=&quot;datacanvas&quot;;</span></span><br><span class="line"><span class="meta">security.protocol</span>=<span class="string">SASL_PLAINTEXT</span></span><br><span class="line"><span class="meta">sasl.mechanism</span>=<span class="string">SCRAM-SHA-256</span></span><br></pre></td></tr></table></figure><h2 id="Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka-server"><a href="#Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka-server" class="headerlink" title="Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka server"></a>Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka server</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">bin/kafka-server-start.sh</span> <span class="string">-daemon ./config/server.properties</span></span><br></pre></td></tr></table></figure><h2 id="Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ"><a href="#Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ" class="headerlink" title="Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ"></a>Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ</h2><ul><li><p>ÊéàÊùÉbigdataÁî®Êà∑ÂèØ‰ª•ËÆøÈóÆ‰∏ªÈ¢òÂâçÁºÄ‰∏∫ODSÁöÑÊï∞ÊçÆÔºå‰∏îÈôêÂà∂Ê∂àË¥πÁªÑ GROUP-BIGDATA</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-acls.sh --bootstrap-server 172.20.58.93:29092 --command-config /path/to/config/acl-config.properties --add --allow-principal User:bigdata --operation Read --group GROUP-BIGDATA --topic ODS --resource-pattern-type prefixed</span><br></pre></td></tr></table></figure><ul><li>‚Äìresource-pattern-type prefixed ÊåáÂÆöODSÂâçÁºÄ</li></ul></li><li><p>ÁßªÈô§ÊùÉÈôê</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-acls.sh --bootstrap-server localhost:9092 --command-config /home/sasl/kafka_2.13-3.3.2/config/acl-config.properties --remove --allow-principal User:Bob --allow-principal User:Alice --allow-host 198.51.100.0 --allow-host 198.51.100.1 --operation Read --operation Write --topic Test-topic </span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Á¶ÅÊ≠¢Âà†Èô§ÊåáÂÆö‰∏ªÈ¢òÁöÑÊùÉÈôê</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-acls.sh --bootstrap-server 172.20.58.93:29092 --command-config /home/sasl/kafka_2.13-3.3.2/config/acl-config.properties --add --deny-principal User:bigdata --operation Write --operation Delete --topic ODS --resource-pattern-type prefixed</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="ÂÆ¢Êà∑Á´Ø"><a href="#ÂÆ¢Êà∑Á´Ø" class="headerlink" title="ÂÆ¢Êà∑Á´Ø"></a>ÂÆ¢Êà∑Á´Ø</h1><ul><li><p>PLAINËøûÊé•‰øùÊåÅÂéüÂÖàÊìç‰Ωú</p></li><li><p>SASL_PLAINTEXT</p><p>ËøûÊé•ÈÖçÁΩÆÊ∑ªÂä†Áî®Êà∑ÁôªÂΩï‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;admin&quot; password=&quot;datacanvas&quot;;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> config </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kafka plain &amp; sasl_plain</title>
      <link href="/2023/09/11/kafka%20config%20plain%20with%20sasl_plain/"/>
      <url>/2023/09/11/kafka%20config%20plain%20with%20sasl_plain/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Â∑≤È™åËØÅKafka 3.3.2</p><p>Ê≠§ÊñπÊ°àÁöÑÁº∫ÁÇπÔºåÂú®sasl_plaintextÊ®°Âºè‰∏ãÔºå‰∏çËÉΩÂä®ÊÄÅÂàõÂª∫Áî®Êà∑ÔºåÊàñ‰øÆÊîπÁî®Êà∑Ë¥¶Âè∑‰ø°ÊÅØ</p><p>‰ºòÁÇπÊòØÔºåÊó†ÈúÄÂú®zookeeper‰∏äÈÖçÁΩÆjaas</p></blockquote><h1 id="ÊúçÂä°Á´Ø"><a href="#ÊúçÂä°Á´Ø" class="headerlink" title="ÊúçÂä°Á´Ø"></a>ÊúçÂä°Á´Ø</h1><h2 id="Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka-server-jaas-confÊñá‰ª∂"><a href="#Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka-server-jaas-confÊñá‰ª∂" class="headerlink" title="Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka_server_jaas.confÊñá‰ª∂"></a>Á¨¨‰∏ÄÊ≠•ÔºöÂáÜÂ§ákafka_server_jaas.confÊñá‰ª∂</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">KafkaServer &#123;</span><br><span class="line">    org.apache.kafka.common.security.plain.PlainLoginModule required</span><br><span class="line">    username=&quot;admin&quot;</span><br><span class="line">    password=&quot;datacanvas&quot;</span><br><span class="line">    user_admin=&quot;datacanvas&quot;</span><br><span class="line">    user_qlb=&quot;qlbrtdsp&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start-sh"><a href="#Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start-sh" class="headerlink" title="Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start.sh"></a>Á¨¨‰∫åÊ≠•ÔºöËÆæÁΩÆkafka-server-start.sh</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KAFKA_OPTS=<span class="string">&quot;-Djava.security.auth.login.config=/home/sasl/kafka_2.13-3.3.2/config/kafka_server_jaas.conf&quot;</span></span><br></pre></td></tr></table></figure><ul><li>Ê≥®ÊÑè‰øÆÊîπË∑ØÂæÑ</li></ul><h2 id="Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver-properties"><a href="#Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver-properties" class="headerlink" title="Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver.properties"></a>Á¨¨‰∏âÊ≠•ÔºöËÆæÁΩÆserver.properties</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">listeners</span>=<span class="string">PLAINTEXT://0.0.0.0:9092,SASL_PLAINTEXT://0.0.0.0:29092</span></span><br><span class="line"><span class="meta">advertised.listeners</span>=<span class="string">PLAINTEXT://172.20.58.93:9092,SASL_PLAINTEXT://172.20.58.93:29092</span></span><br><span class="line"><span class="meta">security.inter.broker.protocol</span>=<span class="string">SASL_PLAINTEXT</span></span><br><span class="line"><span class="meta">sasl.mechanism.inter.broker.protocol</span>=<span class="string">PLAIN</span></span><br><span class="line"><span class="meta">sasl.enabled.mechanisms</span>=<span class="string">PLAIN</span></span><br></pre></td></tr></table></figure><ul><li><p>listenersËÆæÁΩÆ‰∫Ü‰∏§ÁßçÂçèËÆÆ ÊòéÊñáËøûÊé•PLAINTEXT Âíå ÂÆâÂÖ®ËøûÊé• SASL_PLAINTEXT</p><ul><li><code>0.0.0.0</code> Ë°®Á§∫ Kafka Broker Â∞ÜÁõëÂê¨ÊâÄÊúâÂèØÁî®ÁöÑÁΩëÁªúÊé•Âè£ÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂ∞ÜÊé•ÂèóÊù•Ëá™‰ªª‰Ωï IP Âú∞ÂùÄÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ</li></ul></li><li><p>Ê≥®ÊÑèzookeeerÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆ (/brokers)</p></li><li><p>ËÆæÁΩÆÈªòËÆ§ÂâØÊú¨Êï∞ default.replication.factor=3 Âíå num.partitions=1</p></li><li><p>ÊµãËØï‰ΩøÁî®<code>log.dirs=/home/sasl/data/kafka-logs</code></p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># authorizer.class.name=kafka.security.auth.SimpleAclAuthorizer ÊóßÁâàÊú¨ÈÖçÁΩÆ</span></span><br><span class="line"><span class="meta">authorizer.class.name</span>=<span class="string">kafka.security.authorizer.AclAuthorizer</span></span><br><span class="line"><span class="meta">super.users</span>=<span class="string">User:admin;User:ANONYMOUS</span></span><br><span class="line"><span class="meta">allow.everyone.if.no.acl.found</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure><h2 id="Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config-properties"><a href="#Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config-properties" class="headerlink" title="Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config.properties"></a>Á¨¨ÂõõÊ≠•ÔºöËÆæÁΩÆacl-config.properties</h2><p>Âú®configÁõÆÂΩïÊñ∞Â¢ûacl-config.propertiesËÆæÁΩÆ admin‰ø°ÊÅØ</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">sasl.jaas.config</span>=<span class="string">org.apache.kafka.common.security.plain.PlainLoginModule required username=&quot;admin&quot; password=&quot;datacanvas&quot;;</span></span><br><span class="line"><span class="meta">security.protocol</span>=<span class="string">SASL_PLAINTEXT</span></span><br><span class="line"><span class="meta">sasl.mechanism</span>=<span class="string">PLAIN</span></span><br></pre></td></tr></table></figure><h2 id="Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka-server"><a href="#Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka-server" class="headerlink" title="Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka server"></a>Á¨¨‰∫îÊ≠•ÔºöÂêØÂä®kafka server</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">bin/kafka-server-start.sh</span> <span class="string">-daemon ./config/server.properties</span></span><br></pre></td></tr></table></figure><h2 id="Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ"><a href="#Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ" class="headerlink" title="Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ"></a>Á¨¨ÂÖ≠Ê≠•ÔºöÈÖçÁΩÆACLÊéàÊùÉ</h2><ul><li><p>ÊéàÊùÉbigdataÁî®Êà∑ÂèØ‰ª•ËÆøÈóÆ‰∏ªÈ¢òÂâçÁºÄ‰∏∫ODSÁöÑÊï∞ÊçÆÔºå‰∏îÈôêÂà∂Ê∂àË¥πÁªÑ GROUP-BIGDATA</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-acls.sh --bootstrap-server 172.20.58.93:29092 --command-config /home/sasl/kafka_2.13-3.3.2/config/acl-config.properties --add --allow-principal User:bigdata --operation Read --topic ODS --group GROUP-BIGDATA --resource-pattern-type prefixed</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Á¶ÅÊ≠¢ÊåáÂÆöÁî®Êà∑ÂÜôÂÖ•„ÄÅÂà†Èô§‰∏ªÈ¢òÂâçÁºÄ‰∏∫ODSÁöÑÊï∞ÊçÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-acls.sh --bootstrap-server 172.20.58.93:29092 --command-config /home/sasl/kafka_2.13-3.3.2/config/acl-config.properties --add --deny-principal User:bigdata --operation Write --operation Delete --topic ODS --resource-pattern-type prefixed</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="ÂÆ¢Êà∑Á´Ø"><a href="#ÂÆ¢Êà∑Á´Ø" class="headerlink" title="ÂÆ¢Êà∑Á´Ø"></a>ÂÆ¢Êà∑Á´Ø</h1><ul><li><p>PLAINTEXTËøûÊé•‰øùÊåÅÂéüÂÖàÊìç‰Ωú</p></li><li><p>SASL_PLAINTEXT</p><p>ËøûÊé•ÈÖçÁΩÆÊ∑ªÂä†Áî®Êà∑ÁôªÂΩï‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.kafka.common.security.plain.PlainLoginModule required username=&quot;admin&quot; password=&quot;datacanvas&quot;;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> config </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XC point</title>
      <link href="/2023/03/13/xc/"/>
      <url>/2023/03/13/xc/</url>
      
        <content type="html"><![CDATA[<h1 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h1><ul><li>ARMÊû∂ÊûÑ</li></ul><p>‚Äã    È£ûËÖæCPU„ÄÅÈ≤≤ÈπèCPU</p><ul><li>X86Êû∂ÊûÑ</li></ul><p>‚Äã    Êµ∑ÂÖâCPUÔºà‰∏éAMDÂêà‰ΩúÔºâ</p><p>‚Äã    ÂÖÜËäØ„ÄÅÈæôËäØ„ÄÅÁî≥Â®Å</p>]]></content>
      
      
      <categories>
          
          <category> point </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVM Command</title>
      <link href="/2023/03/06/JVM%20command/"/>
      <url>/2023/03/06/JVM%20command/</url>
      
        <content type="html"><![CDATA[<h1 id="ÂÆûË∑µ‰∏Ä-Êü•ÁúãËøõÁ®ãÂèÇÊï∞"><a href="#ÂÆûË∑µ‰∏Ä-Êü•ÁúãËøõÁ®ãÂèÇÊï∞" class="headerlink" title="ÂÆûË∑µ‰∏Ä: Êü•ÁúãËøõÁ®ãÂèÇÊï∞"></a>ÂÆûË∑µ‰∏Ä: Êü•ÁúãËøõÁ®ãÂèÇÊï∞</h1><blockquote><p>Êü•ÁúãÊúçÂä°ËÆæÁΩÆÁöÑjvm</p><p>jps -v</p><p>Êü•ÁúãÊúçÂä°jvmÁöÑÈªòËÆ§ÂèÇÊï∞</p><p>jinfo -flags PID</p></blockquote><ul><li><p>ÂèÇËÄÉkafkaÊúçÂä°ÁöÑËøêË°åÂèÇÊï∞</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-server</span><br><span class="line">-XX:+UseG1GC</span><br><span class="line">-XX:MaxGCPauseMillis=20</span><br><span class="line">-XX:InitiatingHeapOccupancyPercent=35</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent</span><br></pre></td></tr></table></figure><p><strong>-XX:MaxGCPauseMillis=200</strong></p><p>‰∏∫ÊâÄÈúÄÁöÑÊúÄÈïøÊöÇÂÅúÊó∂Èó¥ËÆæÁΩÆÁõÆÊ†áÂÄº„ÄÇÈªòËÆ§ÂÄºÊòØ 200 ÊØ´Áßí„ÄÇËøô‰∏™Êï∞ÂÄºÊòØ‰∏Ä‰∏™ËΩØÁõÆÊ†áÔºå‰πüÂ∞±ÊòØËØ¥JVM‰ºöÂ∞Ω‰∏ÄÂàáËÉΩÂäõÊª°Ë∂≥Ëøô‰∏™ÊöÇÂÅúË¶ÅÊ±ÇÔºå‰ΩÜÊòØ‰∏çËÉΩ‰øùËØÅÊØèÊ¨°ÊöÇÂÅú‰∏ÄÂÆöÂú®Ëøô‰∏™Ë¶ÅÊ±Ç‰πãÂÜÖ„ÄÇ</p><p>Ê†πÊçÆÊµãËØïÂèëÁé∞ÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ÜËøô‰∏™ÂÄºËÆæÂÆöÊàê50ÊØ´ÁßíÊàñËÄÖÊõ¥‰ΩéÁöÑËØùÔºåJVM‰∏∫‰∫ÜËææÂà∞Ëøô‰∏™Ë¶ÅÊ±Ç‰ºöÂ∞ÜÂπ¥ËΩª‰ª£ÂÜÖÂ≠òÁ©∫Èó¥ËÆæÂÆöÁöÑÈùûÂ∏∏Â∞èÔºå‰ªéËÄåÂØºËá¥youngGCÁöÑÈ¢ëÁéáÂ§ßÂ§ßÂ¢ûÈ´ò„ÄÇÊâÄ‰ª•Êàë‰ª¨Âπ∂‰∏çËÆæÂÆöËøô‰∏™ÂèÇÊï∞„ÄÇ</p><p><strong>-XX:InitiatingHeapOccupancyPercent=45</strong></p><p>ËÆæÁΩÆËß¶ÂèëÊ†áËÆ∞Âë®ÊúüÁöÑ Java Â†ÜÂç†Áî®ÁéáÈòàÂÄº„ÄÇÈªòËÆ§Âç†Áî®ÁéáÊòØÊï¥‰∏™ Java Â†ÜÁöÑ 45%„ÄÇÂ∞±ÊòØËØ¥ÂΩì‰ΩøÁî®ÂÜÖÂ≠òÂç†Âà∞Â†ÜÊÄªÂ§ßÂ∞èÁöÑ45%ÁöÑÊó∂ÂÄôÔºåG1Â∞ÜÂºÄÂßã<strong>Âπ∂ÂèëÊ†áËÆ∞Èò∂ÊÆµ„ÄÇ</strong>‰∏∫Ê∑∑ÂêàGCÂÅöÂáÜÂ§áÔºåËøô‰∏™Êï∞ÂÄºÂú®ÊµãËØïÁöÑÊó∂ÂÄôÊàëÊÉ≥ËÆ©Ê∑∑ÂêàGCÊôö‰∏Ä‰∫õÂ§ÑÁêÜÊâÄ‰ª•ËÆæÂÆöÊàê‰∫Ü70%ÔºåÁªèËøáËßÇÂØüÂèëÁé∞Â¶ÇÊûúËøô‰∏™Êï∞ÂÄºËÆæÂÆöËøáÂ§ß‰ºöÂØºËá¥JVMÊó†Ê≥ïÂêØÂä®Âπ∂ÂèëÊ†áËÆ∞ÔºåÁõ¥Êé•ËøõË°åFullGCÂ§ÑÁêÜ„ÄÇ</p><p>G1ÁöÑFullGCÊòØÂçïÁ∫øÁ®ãÔºå‰∏Ä‰∏™22GÁöÑÂØπGCÂÆåÊàêÈúÄË¶Å8SÁöÑÊó∂Èó¥ÔºåÊâÄ‰ª•Ëøô‰∏™ÂÄºÂú®Ë∞É‰ºòÁöÑÊó∂ÂÄôÂÜôÁöÑ45%</p></li></ul><blockquote><p>‰πãÂâçÊü•ÁúãigniteÔºå12ÁßíÂõûÊî∂‰∫Ü71G</p></blockquote><h1 id="ÂÆûË∑µ‰∫åÔºöÊü•ÁúãËøõÁ®ãÂä†ËΩΩÁöÑÁ±ª"><a href="#ÂÆûË∑µ‰∫åÔºöÊü•ÁúãËøõÁ®ãÂä†ËΩΩÁöÑÁ±ª" class="headerlink" title="ÂÆûË∑µ‰∫åÔºöÊü•ÁúãËøõÁ®ãÂä†ËΩΩÁöÑÁ±ª"></a>ÂÆûË∑µ‰∫åÔºöÊü•ÁúãËøõÁ®ãÂä†ËΩΩÁöÑÁ±ª</h1><blockquote><p>jcmdÂëΩ‰ª§Ë¶Å‰ΩøÁî®ÂêØÂä®ÁõÆÊ†áËøõÁ®ãÁöÑÁî®Êà∑ÊâßË°å</p></blockquote><ol><li><p>‰ΩøÁî®dumpÂÜÖÂ≠ò‰ø°ÊÅØÂà∞heap.binÊñá‰ª∂<br>‰ΩøÁî®ÂëΩ‰ª§<code>jmap -dump:live,format=b,file=heap.bin pidÔºàËøõÁ®ãÂè∑Ôºâ</code>Â∞ÜËøõÁ®ãpidÁöÑÂ†ÜÊ†à‰ø°ÊÅØËæìÂá∫Âà∞heap.binÊñá‰ª∂‰∏≠</p></li><li><p>‰ΩøÁî®jhat ÂØπheap.bin Êñá‰ª∂ËøõË°åÂàÜÊûê<br>ÂëΩ‰ª§<code>jhat -J-mx512m heap.bin</code>Ôºå Â¶ÇÊûúËß£ÊûêËøáÁ®ã‰∏≠Âá∫Áé∞ÂÜÖÂ≠ò‰∏çË∂≥ÔºåÈúÄË¶ÅÂä†Â§ßÂÜÖÂ≠òÂ¶Ç:<code>jhat -J-mx800m heap.bin</code></p></li><li><p>ÈÄöËøáÊµèËßàÂô®ËÆøÈóÆ <code>http://ip:7000/</code>Âç≥ÂèØÁúãÂà∞ÂàÜÊûêÁªìÊûú„ÄÇÁÇπÂáªÊØè‰∏™Á±ªÔºåÂèØ‰ª•Êü•ÁúãËØ¶ÁªÜ‰ø°ÊÅØÔºåÂåÖÊã¨ËØ•Á±ªÊòØË¢´Âì™‰∏™Á±ªÂä†ËΩΩÂô®Âä†ËΩΩ„ÄÇ</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> jvm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql HA &amp; keepalived</title>
      <link href="/2022/01/19/mysql%20HA/"/>
      <url>/2022/01/19/mysql%20HA/</url>
      
        <content type="html"><![CDATA[<h1 id="Áü•ËØÜÁÇπ"><a href="#Áü•ËØÜÁÇπ" class="headerlink" title="Áü•ËØÜÁÇπ"></a>Áü•ËØÜÁÇπ</h1><ul><li><p>the size of blob column</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  A BLOB can be 65535 bytes (64 KB) maximum.</span><br><span class="line">If you need more consider using:</span><br><span class="line">a MEDIUMBLOB for 16777215 bytes (16 MB)</span><br><span class="line">a LONGBLOB for 4294967295 bytes (4 GB).</span><br></pre></td></tr></table></figure></li><li><p>join sql</p></li><li><p>string convert to timstamp</p><p><code>SELECT STR_TO_DATE(&#39;2014-05-28 11:30:10&#39;,&#39;%Y-%m-%d %H:%i:%s&#39;);</code></p></li></ul><h3 id="sqlËØ≠Âè•"><a href="#sqlËØ≠Âè•" class="headerlink" title="sqlËØ≠Âè•"></a>sqlËØ≠Âè•</h3><ul><li>IN</li></ul><p>Á°ÆÂÆöÁªôÂÆöÁöÑÂÄºÊòØÂê¶‰∏éÂ≠êÊü•ËØ¢ÊàñÂàóË°®‰∏≠ÁöÑÂÄºÁõ∏ÂåπÈÖç„ÄÇinÂú®Êü•ËØ¢ÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖàÊü•ËØ¢Â≠êÊü•ËØ¢ÁöÑË°®ÔºåÁÑ∂ÂêéÂ∞ÜÂÜÖË°®ÂíåÂ§ñË°®ÂÅö‰∏Ä‰∏™Á¨õÂç°Â∞îÁßØÔºåÁÑ∂ÂêéÊåâÁÖßÊù°‰ª∂ËøõË°åÁ≠õÈÄâ„ÄÇÊâÄ‰ª•Áõ∏ÂØπÂÜÖË°®ÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºåinÁöÑÈÄüÂ∫¶ËæÉÂø´„ÄÇ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    `<span class="keyword">user</span>`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    `<span class="keyword">user</span>`.id <span class="keyword">IN</span> (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            `<span class="keyword">order</span>`.user_id</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            `<span class="keyword">order</span>`</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>‰ª•‰∏äÊü•ËØ¢‰ΩøÁî®‰∫ÜinËØ≠Âè•,in()Âè™ÊâßË°å‰∏ÄÊ¨°,ÂÆÉÊü•Âá∫BË°®‰∏≠ÁöÑÊâÄÊúâidÂ≠óÊÆµÂπ∂ÁºìÂ≠òËµ∑Êù•.‰πãÂêé,Ê£ÄÊü•AË°®ÁöÑidÊòØÂê¶‰∏éBË°®‰∏≠ÁöÑidÁõ∏Á≠â,Â¶ÇÊûúÁõ∏Á≠âÂàôÂ∞ÜAË°®ÁöÑËÆ∞ÂΩïÂä†ÂÖ•ÁªìÊûúÈõÜ‰∏≠,Áõ¥Âà∞ÈÅçÂéÜÂÆåAË°®ÁöÑÊâÄÊúâËÆ∞ÂΩï„ÄÇ</p><p>ÂèØ‰ª•ÁúãÂá∫,ÂΩìBË°®Êï∞ÊçÆËæÉÂ§ßÊó∂‰∏çÈÄÇÂêà‰ΩøÁî®in(),Âõ†‰∏∫ÂÆÉ‰ºöBË°®Êï∞ÊçÆÂÖ®ÈÉ®ÈÅçÂéÜ‰∏ÄÊ¨°. Â¶Ç:AË°®Êúâ10000Êù°ËÆ∞ÂΩï,BË°®Êúâ1000000Êù°ËÆ∞ÂΩï,ÈÇ£‰πàÊúÄÂ§öÊúâÂèØËÉΩÈÅçÂéÜ10000<code>*</code>1000000Ê¨°,ÊïàÁéáÂæàÂ∑Æ. ÂÜçÂ¶Ç:AË°®Êúâ10000Êù°ËÆ∞ÂΩï,BË°®Êúâ100Êù°ËÆ∞ÂΩï,ÈÇ£‰πàÊúÄÂ§öÊúâÂèØËÉΩÈÅçÂéÜ10000*100Ê¨°,ÈÅçÂéÜÊ¨°Êï∞Â§ßÂ§ßÂáèÂ∞ë,ÊïàÁéáÂ§ßÂ§ßÊèêÂçá„ÄÇ</p><ul><li>exists</li></ul><p>ÊåáÂÆö‰∏Ä‰∏™Â≠êÊü•ËØ¢ÔºåÊ£ÄÊµãË°åÁöÑÂ≠òÂú®„ÄÇÈÅçÂéÜÂæ™ÁéØÂ§ñË°®ÔºåÁÑ∂ÂêéÁúãÂ§ñË°®‰∏≠ÁöÑËÆ∞ÂΩïÊúâÊ≤°ÊúâÂíåÂÜÖË°®ÁöÑÊï∞ÊçÆ‰∏ÄÊ†∑ÁöÑ„ÄÇÂåπÈÖç‰∏äÂ∞±Â∞ÜÁªìÊûúÊîæÂÖ•ÁªìÊûúÈõÜ‰∏≠„ÄÇ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span> <span class="keyword">from</span> A a <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> B b <span class="keyword">where</span> a.id<span class="operator">=</span>b.id)</span><br></pre></td></tr></table></figure><p>‰ª•‰∏äÊü•ËØ¢‰ΩøÁî®‰∫ÜexistsËØ≠Âè•,exists()‰ºöÊâßË°åA.lengthÊ¨°,ÂÆÉÂπ∂‰∏çÁºìÂ≠òexists()ÁªìÊûúÈõÜ,Âõ†‰∏∫exists()ÁªìÊûúÈõÜÁöÑÂÜÖÂÆπÂπ∂‰∏çÈáçË¶Å,ÈáçË¶ÅÁöÑÊòØÁªìÊûúÈõÜ‰∏≠ÊòØÂê¶ÊúâËÆ∞ÂΩï,Â¶ÇÊûúÊúâÂàôËøîÂõûtrue,Ê≤°ÊúâÂàôËøîÂõûfalse„ÄÇ</p><p>ÂΩìBË°®ÊØîAË°®Êï∞ÊçÆÂ§ßÊó∂ÈÄÇÂêà‰ΩøÁî®exists(),Âõ†‰∏∫ÂÆÉÊ≤°ÊúâÈÇ£‰πàÈÅçÂéÜÊìç‰Ωú,Âè™ÈúÄË¶ÅÂÜçÊâßË°å‰∏ÄÊ¨°Êü•ËØ¢Â∞±Ë°å. Â¶Ç:AË°®Êúâ10000Êù°ËÆ∞ÂΩï,BË°®Êúâ1000000Êù°ËÆ∞ÂΩï,ÈÇ£‰πàexists()‰ºöÊâßË°å10000Ê¨°ÂéªÂà§Êñ≠AË°®‰∏≠ÁöÑidÊòØÂê¶‰∏éBË°®‰∏≠ÁöÑidÁõ∏Á≠â. Â¶Ç:AË°®Êúâ10000Êù°ËÆ∞ÂΩï,BË°®Êúâ100000000Êù°ËÆ∞ÂΩï,ÈÇ£‰πàexists()ËøòÊòØÊâßË°å10000Ê¨°,Âõ†‰∏∫ÂÆÉÂè™ÊâßË°åA.lengthÊ¨°,ÂèØËßÅBË°®Êï∞ÊçÆË∂äÂ§ö,Ë∂äÈÄÇÂêàexists()ÂèëÊå•ÊïàÊûú. ÂÜçÂ¶Ç:AË°®Êúâ10000Êù°ËÆ∞ÂΩï,BË°®Êúâ100Êù°ËÆ∞ÂΩï,ÈÇ£‰πàexists()ËøòÊòØÊâßË°å10000Ê¨°,Ëøò‰∏çÂ¶Ç‰ΩøÁî®in()ÈÅçÂéÜ10000*100Ê¨°,Âõ†‰∏∫in()ÊòØÂú®ÂÜÖÂ≠òÈáåÈÅçÂéÜÊØîËæÉ,ËÄåexists()ÈúÄË¶ÅÊü•ËØ¢Êï∞ÊçÆÂ∫ì,Êàë‰ª¨ÈÉΩÁü•ÈÅìÊü•ËØ¢Êï∞ÊçÆÂ∫ìÊâÄÊ∂àËÄóÁöÑÊÄßËÉΩÊõ¥È´ò,ËÄåÂÜÖÂ≠òÊØîËæÉÂæàÂø´. </p><ul><li>where</li></ul><p>sqlÊü•ËØ¢Êù°‰ª∂‰∏≠<code>where 1=1,1=2Âíå1=0</code>ÔºåËøôÁßçÂÜôÊ≥ïÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÊãºÂáëÂä®ÊÄÅÁöÑsqlËØ≠Âè•ÔºåÂ¶ÇÊûú‰ΩøÁî®‰∏çÂ•Ω‰ºöËµ∑Âà∞ÂâØ‰ΩúÁî®ÁöÑÔºåÊòØÊ†πÊçÆ‰∏™‰∫∫ÁöÑ‰∏Ä‰∫õ‰π†ÊÉØÔºåÊòØ‰∏∫‰∫ÜÈÅøÂÖçwhere ÂÖ≥ÈîÆÂ≠óÂêéÈù¢ÁöÑÁ¨¨‰∏Ä‰∏™ËØçÁõ¥Êé•Â∞±ÊòØ ‚Äúand‚ÄùËÄåÂØºËá¥ËØ≠Ê≥ïÈîôËØØÔºåÊòØ‰∏∫‰∫ÜÂêéÈù¢ÈôÑÂä†and ‚Ä¶Êñπ‰æøÁ®ãÂ∫èÈÄªËæëÂ§ÑÁêÜÁî®ÁöÑ„ÄÇ </p><ul><li><p>select count(*)Âíåselect count(1)ÁöÑÂå∫Âà´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåSelect Count(*)ÂíåSelect Count(1)‰∏§ÁùÄËøîÂõûÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂÅáÂ¶ÇË°®Ê≤°Êúâ‰∏ªÈîÆ(Primary key), ÈÇ£‰πàcount(1)ÊØîcount(*)Âø´ÔºåÂ¶ÇÊûúÊúâ‰∏ªÈîÆÁöÑËØùÔºåÈÇ£‰∏ªÈîÆ‰Ωú‰∏∫countÁöÑÊù°‰ª∂Êó∂ÂÄôcount(‰∏ªÈîÆ)ÊúÄÂø´ÔºåÂ¶ÇÊûú‰Ω†ÁöÑË°®Âè™Êúâ‰∏Ä‰∏™Â≠óÊÆµÁöÑËØùÈÇ£count(*)Â∞±ÊòØÊúÄÂø´ÁöÑ„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h3 id="‰∫ãÁâ©ÈöîÁ¶ªÁ∫ßÂà´"><a href="#‰∫ãÁâ©ÈöîÁ¶ªÁ∫ßÂà´" class="headerlink" title="‰∫ãÁâ©ÈöîÁ¶ªÁ∫ßÂà´"></a>‰∫ãÁâ©ÈöîÁ¶ªÁ∫ßÂà´</h3><ul><li><p>read uncommittedÔºàËØªÂèñÊú™Êèê‰∫§Êï∞ÊçÆÔºâ</p><blockquote><p>Êàë‰ª¨Â∞Ü‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫read uncommittedÔºåÂç≥‰æøÊòØ‰∫ãÂä°Ê≤°ÊúâcommitÔºå‰ΩÜÊòØÊàë‰ª¨‰ªçÁÑ∂ËÉΩËØªÂà∞Êú™Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåËøôÊòØÊâÄÊúâÈöîÁ¶ªÁ∫ßÂà´‰∏≠ÊúÄ‰ΩéÁöÑ‰∏ÄÁßç„ÄÇ</p><p>ËÑèËØª</p></blockquote></li><li><p>read committedÔºàÂèØ‰ª•ËØªÂèñÂÖ∂‰ªñ‰∫ãÂä°Êèê‰∫§ÁöÑÊï∞ÊçÆÔºâ</p><blockquote><p>Â§ßÂ§öÊï∞Êï∞ÊçÆÂ∫ìÈªòËÆ§ÁöÑÈöîÁ¶ªÁ∫ßÂà´;</p><p>ÂΩìÊàë‰ª¨Â∞ÜÂΩìÂâç‰ºöËØùÁöÑÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫read committedÁöÑÊó∂ÂÄôÔºåÂΩìÂâç‰ºöËØùÂè™ËÉΩËØªÂèñÂà∞ÂÖ∂‰ªñ‰∫ãÂä°Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆËØª‰∏çÂà∞„ÄÇ</p></blockquote></li><li><p>repeatable readÔºàÂèØÈáçËØªÔºâ</p><blockquote><p>MySQLÈªòËÆ§ÁöÑÈöîÁ¶ªÁ∫ßÂà´</p><p>ÂΩìÊàë‰ª¨Â∞ÜÂΩìÂâç‰ºöËØùÁöÑÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫repeatable readÁöÑÊó∂ÂÄôÔºåÂΩìÂâç‰ºöËØùÂèØ‰ª•ÈáçÂ§çËØªÔºåÂ∞±ÊòØÊØèÊ¨°ËØªÂèñÁöÑÁªìÊûúÈõÜÈÉΩÁõ∏ÂêåÔºåËÄå‰∏çÁÆ°ÂÖ∂‰ªñ‰∫ãÂä°ÊúâÊ≤°ÊúâÊèê‰∫§„ÄÇ</p><p>ÂπªËØª</p></blockquote></li><li><p>serializableÔºà‰∏≤Ë°åÂåñÔºâ</p><blockquote><p>ÂΩìÊàë‰ª¨Â∞ÜÂΩìÂâç‰ºöËØùÁöÑÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫serializableÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñ‰ºöËØùÂØπËØ•Ë°®ÁöÑÂÜôÊìç‰ΩúÂ∞ÜË¢´ÊåÇËµ∑„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåËøôÊòØÈöîÁ¶ªÁ∫ßÂà´‰∏≠ÊúÄ‰∏•Ê†ºÁöÑÔºå‰ΩÜÊòØËøôÊ†∑ÂÅöÂäøÂøÖÂØπÊÄßËÉΩÈÄ†ÊàêÂΩ±Âìç„ÄÇÊâÄ‰ª•Âú®ÂÆûÈôÖÁöÑÈÄâÁî®‰∏äÔºåÊàë‰ª¨Ë¶ÅÊ†πÊçÆÂΩìÂâçÂÖ∑‰ΩìÁöÑÊÉÖÂÜµÈÄâÁî®ÂêàÈÄÇÁöÑ„ÄÇ</p></blockquote></li></ul><h3 id="DDL-VS-DML"><a href="#DDL-VS-DML" class="headerlink" title="DDL VS DML"></a>DDL VS DML</h3><p>DML statements are SQL statements that manipulate data. DML stands for Data Manipulation Language. The SQL statements that are in the DML class are INSERT, UPDATE and DELETE. Some people also lump the SELECT statement in the DML classification.</p><p>Data Definition Languages (DDL) are used to define the database structure. Any CREATE, DROP and ALTER commands are examples of DDL SQL statements.</p><h3 id="ËÆæÁΩÆËøúÁ®ãÁôªÂΩï"><a href="#ËÆæÁΩÆËøúÁ®ãÁôªÂΩï" class="headerlink" title="ËÆæÁΩÆËøúÁ®ãÁôªÂΩï"></a>ËÆæÁΩÆËøúÁ®ãÁôªÂΩï</h3><ul><li><p>mysql 8ÁâàÊú¨ËÆæÁΩÆÂèØÁî®rootËøúÁ®ãËÆøÈóÆÊúçÂä°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li></ul><h3 id="mysqldump"><a href="#mysqldump" class="headerlink" title="mysqldump"></a>mysqldump</h3><ul><li><p>ÂØºÂá∫Êï∞ÊçÆÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -h127.0.0.1 -P3306 -uroot -p database &gt; file.sql</span><br><span class="line">ÂÖ∂‰∏≠ -hÂíå-PÂèØ‰ª•ÁúÅÁï•Ôºà‰∏çËøámysqlÂú®docker‰∏≠‰∏çÂèØ‰ª•ÁúÅÁï•Ôºâ,databaseÊòØÊï∞ÊçÆÂ∫ìÂêçÁß∞</span><br></pre></td></tr></table></figure></li><li><p>ÂØºÂá∫Êï∞ÊçÆË°®Êï∞ÊçÆÔºàÊ†πÊçÆsqlÁöÑwhereÊù°‰ª∂Ôºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p database --tables tablename --where=&quot;id&gt;8&quot; &gt; result.sql </span><br></pre></td></tr></table></figure></li><li><p>ÊâßË°åsqlÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">source</span> /path/to/files/file.sql</span></span><br></pre></td></tr></table></figure></li><li><p>ÂØºÂá∫ÊâÄÊúâÊï∞ÊçÆÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p --all-databases &gt; backup_filename.sql</span><br></pre></td></tr></table></figure></li><li><p>Âè™ÂØºÂá∫Âª∫Ë°®ËØ≠Âè•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u your_username <span class="operator">-</span>p <span class="comment">--no-data your_database &gt; backup.sql</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Êñ∞Â¢û‰∏ªÈîÆ"><a href="#Êñ∞Â¢û‰∏ªÈîÆ" class="headerlink" title="Êñ∞Â¢û‰∏ªÈîÆ"></a>Êñ∞Â¢û‰∏ªÈîÆ</h3><p>suppose you don‚Äôt have column for auto increment like id, no, then you can add using following query:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT <span class="keyword">primary</span> key <span class="keyword">FIRST</span></span><br></pre></td></tr></table></figure><p>If you‚Äôve column, then alter to auto increment using following query:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name MODIFY column_name datatype(length) AUTO_INCREMENT <span class="keyword">PRIMARY</span></span><br></pre></td></tr></table></figure><h1 id="mysqlÊï∞ÊçÆÂ§á‰ªΩ"><a href="#mysqlÊï∞ÊçÆÂ§á‰ªΩ" class="headerlink" title="mysqlÊï∞ÊçÆÂ§á‰ªΩ"></a>mysqlÊï∞ÊçÆÂ§á‰ªΩ</h1><h2 id="ÊñπÊ°à‰∏ÄÔºöÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂"><a href="#ÊñπÊ°à‰∏ÄÔºöÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂" class="headerlink" title="ÊñπÊ°à‰∏ÄÔºöÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂"></a>ÊñπÊ°à‰∏ÄÔºöÂÆöÊúüÂ§á‰ªΩÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂</h2><h3 id="‰∏Ä„ÄÅÁºñÂÜôshellËÑöÊú¨"><a href="#‰∏Ä„ÄÅÁºñÂÜôshellËÑöÊú¨" class="headerlink" title="‰∏Ä„ÄÅÁºñÂÜôshellËÑöÊú¨"></a>‰∏Ä„ÄÅÁºñÂÜôshellËÑöÊú¨</h3><p>ËÑöÊú¨Êñá‰ª∂<strong>backup_mysql.sh</strong>‰ø°ÊÅØÂ¶Ç‰∏ãÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Áî®Êà∑Âêç</span></span><br><span class="line">username=root</span><br><span class="line"><span class="meta">#</span><span class="bash">ÂØÜÁ†Å</span></span><br><span class="line">password=Â°´ÂÜôÂØÜÁ†Å</span><br><span class="line"><span class="meta">#</span><span class="bash">Â∞ÜË¶ÅÂ§á‰ªΩÁöÑÊï∞ÊçÆÂ∫ì</span></span><br><span class="line">database_name=Â°´ÂÜôÈúÄË¶ÅÂ§á‰ªΩÁöÑÊï∞ÊçÆÂ∫ì</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">‰øùÂ≠òÂ§á‰ªΩÊñá‰ª∂ÊúÄÂ§ö‰∏™Êï∞</span></span><br><span class="line">count=30</span><br><span class="line"><span class="meta">#</span><span class="bash">Â§á‰ªΩ‰øùÂ≠òË∑ØÂæÑ</span></span><br><span class="line">backup_path=/data/mysql_backup</span><br><span class="line"><span class="meta">#</span><span class="bash">Êó•Êúü</span></span><br><span class="line">date_time=`date +%Y-%m-%d-%H-%M`</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Â¶ÇÊûúÊñá‰ª∂Â§π‰∏çÂ≠òÂú®ÂàôÂàõÂª∫</span></span><br><span class="line">if [ ! -d $backup_path ]; </span><br><span class="line">then     </span><br><span class="line">    mkdir -p $backup_path; </span><br><span class="line">fi</span><br><span class="line"><span class="meta">#</span><span class="bash">ÂºÄÂßãÂ§á‰ªΩ</span></span><br><span class="line">mysqldump -u $username -p$password $database_name &gt; $backup_path/$database_name-$date_time.sql</span><br><span class="line"><span class="meta">#</span><span class="bash">ÂºÄÂßãÂéãÁº©</span></span><br><span class="line">cd $backup_path</span><br><span class="line">tar -zcvf $database_name-$date_time.tar.gz $database_name-$date_time.sql</span><br><span class="line"><span class="meta">#</span><span class="bash">Âà†Èô§Ê∫êÊñá‰ª∂</span></span><br><span class="line">rm -rf $backup_path/$database_name-$date_time.sql</span><br><span class="line"><span class="meta">#</span><span class="bash">Êõ¥Êñ∞Â§á‰ªΩÊó•Âøó</span></span><br><span class="line">echo &quot;create $backup_path/$database_name-$date_time.tar.gz&quot; &gt;&gt; $backup_path/dump.log</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ÊâæÂá∫ÈúÄË¶ÅÂà†Èô§ÁöÑÂ§á‰ªΩ</span></span><br><span class="line">delfile=`ls -l -crt $backup_path/*.tar.gz | awk &#x27;&#123;print $9 &#125;&#x27; | head -1`</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Âà§Êñ≠Áé∞Âú®ÁöÑÂ§á‰ªΩÊï∞ÈáèÊòØÂê¶Â§ß‰∫éÈòàÂÄº</span></span><br><span class="line">number=`ls -l -crt  $backup_path/*.tar.gz | awk &#x27;&#123;print $9 &#125;&#x27; | wc -l`</span><br><span class="line"></span><br><span class="line">if [ $number -gt $count ]</span><br><span class="line">then</span><br><span class="line"><span class="meta">  #</span><span class="bash">Âà†Èô§ÊúÄÊó©ÁîüÊàêÁöÑÂ§á‰ªΩÔºåÂè™‰øùÁïôcountÊï∞ÈáèÁöÑÂ§á‰ªΩ</span></span><br><span class="line">  rm $delfile</span><br><span class="line"><span class="meta">  #</span><span class="bash">Êõ¥Êñ∞Âà†Èô§Êñá‰ª∂Êó•Âøó</span></span><br><span class="line">  echo &quot;delete $delfile&quot; &gt;&gt; $backup_path/dump.log</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>ËØ•ËÑöÊú¨ÂÆûÁé∞ÁöÑÂäüËÉΩÔºöÂ§á‰ªΩÊåáÂÆöÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆ‰ø°ÊÅØÂà∞ÊåáÂÆöÁõÆÂΩïÔºåÂπ∂Âè™‰øùÂ≠òÊåáÂÆöÊï∞ÈáèÁöÑÊúÄÊñ∞Êñá‰ª∂„ÄÇ</p><p>Ê≥®ÊÑèÔºöËÑöÊú¨‰∏≠ÈúÄË¶ÅË°•ÂÖ®ËÑöÊú¨‰∏≠ÁöÑ<strong>password</strong>Âíå<strong>database_name</strong>‰ø°ÊÅØÔºåÂèØ‰øÆÊîπÂ§á‰ªΩ‰øùÂ≠òË∑ØÂæÑ<strong>backup_path</strong>Ôºå‰ª•ÂèäÊúÄÂ§ö‰øùÂ≠òÁöÑÂ§á‰ªΩÊñá‰ª∂Êï∞Èáè<strong>count</strong>„ÄÇ</p><p>ÁºñÂÜôÂÆåËÑöÊú¨‰ø°ÊÅØ‰πãÂêéÔºåÈúÄË¶ÅÁªôËÑöÊú¨Ëµã‰∫àÂèØÊâßË°åÊùÉÈôê <code>chmod +x backup_mysql.sh</code></p><h3 id="‰∫å„ÄÅËÆæÂÆöÂÆöÊó∂‰ªªÂä°crontab"><a href="#‰∫å„ÄÅËÆæÂÆöÂÆöÊó∂‰ªªÂä°crontab" class="headerlink" title="‰∫å„ÄÅËÆæÂÆöÂÆöÊó∂‰ªªÂä°crontab"></a>‰∫å„ÄÅËÆæÂÆöÂÆöÊó∂‰ªªÂä°crontab</h3><p>ËøêË°åcrontab -eÂëΩ‰ª§ÔºåÊâìÂºÄ‰∏Ä‰∏™ÂèØÁºñËæëÁöÑÊñáÊú¨ÔºåËæìÂÖ•<code>0 1 * * * /path/to/backup_mysql.sh</code>  ‰øùÊú¨Âπ∂ÈÄÄÂá∫Âç≥Ê∑ªÂä†ÂÆåÊàê„ÄÇ</p><p>Ê≥®ÊÑèÔºöÂÖ∂‰∏≠<code>0 1 * * *</code>ÔºåË°®Á§∫ÊØèÂ§©ÂáåÊô®1ÁÇπËøõË°åÂ§á‰ªΩÊìç‰ΩúÔºåÂèØËá™Ë°å‰øÆÊîπ1ÁöÑÂÄºÔºàËåÉÂõ¥0ÔΩû23Ôºâ</p><p>ÂÖ∂‰∏≠Ë∑ØÂæÑ‰ø°ÊÅØ<code>/path/to/backup_mysql.sh</code>ÈúÄË¶Å‰øÆÊîπ‰∏∫ÂÆûÈôÖÁöÑËÑöÊú¨Ë∑ØÂæÑ„ÄÇ</p><h2 id="ÊñπÊ°à‰∫åÔºöÂèå‰∏ªÊú∫HAÈÉ®ÁΩ≤"><a href="#ÊñπÊ°à‰∫åÔºöÂèå‰∏ªÊú∫HAÈÉ®ÁΩ≤" class="headerlink" title="ÊñπÊ°à‰∫åÔºöÂèå‰∏ªÊú∫HAÈÉ®ÁΩ≤"></a>ÊñπÊ°à‰∫åÔºöÂèå‰∏ªÊú∫HAÈÉ®ÁΩ≤</h2><p><strong>ÂâçÊèê</strong>ÔºöÂáÜÂ§á‰∏§‰∏™Êú∫Âô®master1Ôºà172.20.3.113ÔºâÂíåmaster2Ôºà172.20.3.114ÔºâÔºå‰∏îÂàÜÂà´ÂÆâË£Ö‰∫ÜmysqlÔºåÂÖ∂‰∏≠IPÂú∞ÂùÄÊ†πÊçÆÁîü‰∫ßÂÖ∑‰ΩìipËøõË°åÊõøÊç¢</p><h3 id="‰∏Ä„ÄÅÈÖçÁΩÆmy-cnf‰ø°ÊÅØ"><a href="#‰∏Ä„ÄÅÈÖçÁΩÆmy-cnf‰ø°ÊÅØ" class="headerlink" title="‰∏Ä„ÄÅÈÖçÁΩÆmy.cnf‰ø°ÊÅØ"></a>‰∏Ä„ÄÅÈÖçÁΩÆmy.cnf‰ø°ÊÅØ</h3><ul><li><p>ÈÖçÁΩÆ/etc/my.cnfÊñá‰ª∂Ôºà‰ªémysql5.7ÂºÄÂßã‰∏ç‰ºöËá™Âä®ÁîüÊàêmy.cnfÊñá‰ª∂ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊâãÂä®ÂàõÂª∫Ôºâmy.cnfÊñá‰ª∂ÂÜÖÂÆπÂ§ßËá¥Â¶Ç‰∏ãÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8         #ËÆæÁΩÆmysqlÂÆ¢Êà∑Á´ØÈªòËÆ§Â≠óÁ¨¶ÈõÜ</span><br><span class="line">[mysqld]</span><br><span class="line">port = 3306  #ÂèØËá™Ë°åÊõ¥ÊîπÁ´ØÂè£</span><br><span class="line">basedir=/usr/local/mysql</span><br><span class="line">datadir=/usr/local/mysql/data</span><br><span class="line">max_connections = 500              #ÊúÄÂ§ßËøûÊé•Êï∞</span><br><span class="line">log_bin=mysql-bin</span><br><span class="line">server_id = 1                            #Êú∫Âô®1ËÆæÁΩÆ‰∏∫1ÔºåÊú∫Âô®2ËÆæÁΩÆ‰∏∫2</span><br><span class="line">binlog_format=ROW</span><br><span class="line">auto-increment-increment = 2            #Â≠óÊÆµÂèòÂåñÂ¢ûÈáèÂÄº</span><br><span class="line">auto-increment-offset = 1               #Êú∫Âô®1ËÆæÁΩÆ‰∏∫1ÔºåÊú∫Âô®2ËÆæÁΩÆ‰∏∫2</span><br><span class="line">slave-skip-errors = all                 #ÂøΩÁï•ÊâÄÊúâÂ§çÂà∂‰∫ßÁîüÁöÑÈîôËØØ</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce-gtid-consistency=ON</span><br><span class="line"></span><br><span class="line">character-set-server = utf8</span><br><span class="line">default-storage-engine = INNODB</span><br><span class="line">lower_case_table_names = 1</span><br></pre></td></tr></table></figure><ul><li><p>[mysql]‰ª£Ë°®Êàë‰ª¨‰ΩøÁî®mysqlÂëΩ‰ª§ÁôªÂΩïmysqlÊï∞ÊçÆÂ∫ìÊó∂ÁöÑÈªòËÆ§ËÆæÁΩÆ </p></li><li><p>[mysqld]‰ª£Ë°®Êï∞ÊçÆÂ∫ìËá™Ë∫´ÁöÑÈªòËÆ§ËÆæÁΩÆ</p><blockquote><p>Ê≥®ÊÑèÔºöÊú∫Âô®1ÂíåÊú∫Âô®2Âè™Êúâserver-id‰∏çÂêåÂíåauto-increment-offset‰∏çÂêå,ÂÖ∂‰ªñÂøÖÈ°ªÁõ∏Âêå„ÄÇ</p><p>ÈÉ®ÂàÜÈÖçÁΩÆÈ°πËß£ÈáäÂ¶Ç‰∏ãÔºö</p><p>binlog_format= ROWÔºöÊåáÂÆömysqlÁöÑbinlogÊó•ÂøóÁöÑÊ†ºÂºèÔºåÊó•Âøó‰∏≠‰ºöËÆ∞ÂΩïÊàêÊØè‰∏ÄË°åÊï∞ÊçÆË¢´‰øÆÊîπÁöÑÂΩ¢ÂºèÔºåÁÑ∂ÂêéÂú® slave Á´ØÂÜçÂØπÁõ∏ÂêåÁöÑÊï∞ÊçÆËøõË°å‰øÆÊîπ„ÄÇ</p><p>auto-increment-increment= 2ÔºöË°®Á§∫Ëá™Â¢ûÈïøÂ≠óÊÆµÊØèÊ¨°ÈÄíÂ¢ûÁöÑÈáèÔºåÂÖ∂ÈªòËÆ§ÂÄºÊòØ1„ÄÇÂÆÉÁöÑÂÄºÂ∫îËÆæ‰∏∫Êï¥‰∏™ÁªìÊûÑ‰∏≠ÊúçÂä°Âô®ÁöÑÊÄªÊï∞ÔºåÊú¨Ê°à‰æãÁî®Âà∞‰∏§Âè∞ÊúçÂä°Âô®ÔºåÊâÄ‰ª•ÂÄºËÆæ‰∏∫2„ÄÇ</p><p>auto-increment-offset= 2ÔºöÁî®Êù•ËÆæÂÆöÊï∞ÊçÆÂ∫ì‰∏≠Ëá™Âä®Â¢ûÈïøÁöÑËµ∑ÁÇπ(Âç≥ÂàùÂßãÂÄº)ÔºåÂõ†‰∏∫Ëøô‰∏§ËÉΩÊúçÂä°Âô®ÈÉΩËÆæÂÆö‰∫Ü‰∏ÄÊ¨°Ëá™Âä®Â¢ûÈïøÂÄº2ÔºåÊâÄ‰ª•ÂÆÉ‰ª¨ÁöÑËµ∑ÁÇπÂøÖÈ°ªÂæó‰∏çÂêåÔºåËøôÊ†∑ÊâçËÉΩÈÅøÂÖç‰∏§Âè∞ÊúçÂä°Âô®Êï∞ÊçÆÂêåÊ≠•Êó∂Âá∫Áé∞‰∏ªÈîÆÂÜ≤Á™Å„ÄÇ</p><p>Ê≥®ÔºöÂè¶Â§ñËøòÂèØ‰ª•Âú®my.cnfÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÊ∑ªÂä†‚Äúbinlog_do_db=Êï∞ÊçÆÂ∫ìÂêç‚ÄùÈÖçÁΩÆÈ°πÔºàÂèØ‰ª•Ê∑ªÂä†Â§ö‰∏™ÔºâÊù•ÊåáÂÆöË¶ÅÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂ¶ÇÊûúÈÖçÁΩÆ‰∫ÜËøô‰∏™ÈÖçÁΩÆÈ°πÔºåÂ¶ÇÊûúÊ≤°Ê∑ªÂä†Âú®ËØ•ÈÖçÁΩÆÈ°πÂêéÈù¢ÁöÑÊï∞ÊçÆÂ∫ìÔºåÂàôbinlog‰∏çËÆ∞ÂΩïÂÆÉÁöÑ‰∫ã‰ª∂„ÄÇ</p></blockquote></li></ul></li><li><p>ÂàáÊç¢Âà∞datacanvasÁî®Êà∑ËøõË°åmysqlÂêØÂä®ÊúçÂä° ÔºàÂª∫ËÆÆÔºâ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure><p>ÊàñËÄÖÂú®Â∑≤ÁªèÂàõÂª∫ËΩØËøûÊé•ÁöÑÂâçÊèê‰∏ãÔºåÂàáÊç¢Âà∞rootÁî®Êà∑ÔºåÂπ∂ÂêØÂä®mysqlÊúçÂä°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure></li><li><p>ÂÆ¢Êà∑Á´ØÁôªÂΩï</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysql -uroot -p</span><br></pre></td></tr></table></figure><p>  ËÆæÁΩÆÂèØËøúÁ®ãÁôªÂΩïrootÁî®Êà∑</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><blockquote><p>Ê≥®ÊÑèÔºö‰∏äÈù¢ÁöÑÂØÜÁ†Å‚Äô123456‚Äô‰øÆÊîπÊàêÁúüÂÆûÁöÑrootÂØÜÁ†Å</p></blockquote></li></ul><h4 id="ÂºÄÂßãËÆæÁΩÆÂèå‰∏ªÂ§á‰ªΩ"><a href="#ÂºÄÂßãËÆæÁΩÆÂèå‰∏ªÂ§á‰ªΩ" class="headerlink" title="ÂºÄÂßãËÆæÁΩÆÂèå‰∏ªÂ§á‰ªΩ"></a>ÂºÄÂßãËÆæÁΩÆÂèå‰∏ªÂ§á‰ªΩ</h4><ul><li><p>Âú®master1‰∏äÊìç‰Ωú</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ÂÖàÂú®master2‰∏äÊâßË°åÔºå</span><br><span class="line"><span class="keyword">show</span> master status;ÔºàËé∑Âèñmaster_log_fileÂíåmaster_log_pos‰ø°ÊÅØÔºâ</span><br><span class="line"></span><br><span class="line">Âú®master1‰∏äÊâßË°å</span><br><span class="line">change master <span class="keyword">to</span> master_host<span class="operator">=</span><span class="string">&#x27;172.20.3.114&#x27;</span>,master_port<span class="operator">=</span><span class="number">3306</span>,master_user<span class="operator">=</span><span class="string">&#x27;rt&#x27;</span>,master_password<span class="operator">=</span><span class="string">&#x27;rt123&#x27;</span>,master_log_file<span class="operator">=</span><span class="string">&#x27;mysql-bin.000003&#x27;</span>,master_log_pos<span class="operator">=</span><span class="number">194</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> slave;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> slave status\G</span><br></pre></td></tr></table></figure></li><li><p>Âú®master2‰∏äÊìç‰Ωú</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ÂÖàÂú®master1‰∏äÊâßË°åÔºå</span><br><span class="line"><span class="keyword">show</span> master status;ÔºàËé∑Âèñmaster_log_fileÂíåmaster_log_pos‰ø°ÊÅØÔºâ</span><br><span class="line">Âú®master2‰∏äÊâßË°å</span><br><span class="line">change master <span class="keyword">to</span> master_host<span class="operator">=</span><span class="string">&#x27;172.20.3.113&#x27;</span>,master_port<span class="operator">=</span><span class="number">3306</span>,master_user<span class="operator">=</span><span class="string">&#x27;rt&#x27;</span>,master_password<span class="operator">=</span><span class="string">&#x27;rt123&#x27;</span>,master_log_file<span class="operator">=</span><span class="string">&#x27;mysql-bin.000004&#x27;</span>,master_log_pos<span class="operator">=</span><span class="number">194</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> slave;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> slave status\G</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="‰∫å„ÄÅkeepalivedÂÆâË£ÖÈÖçÁΩÆ"><a href="#‰∫å„ÄÅkeepalivedÂÆâË£ÖÈÖçÁΩÆ" class="headerlink" title="‰∫å„ÄÅkeepalivedÂÆâË£ÖÈÖçÁΩÆ"></a>‰∫å„ÄÅkeepalivedÂÆâË£ÖÈÖçÁΩÆ</h3><p>ÈúÄË¶ÅÂú®master1Âíåmaster2ÁöÑÊú∫Âô®‰∏äÂÆâË£ÖkeepalivedÊúçÂä°ÔºåÂÆâË£ÖËøáÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÔºö</p><ul><li><p>ÈÄöËøáÂú∞ÂùÄ<a href="https://pkgs.org/download/keepalived%E4%B8%8B%E8%BD%BD%E7%9B%B8%E5%BA%94%E7%9A%84%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC%EF%BC%8C%E7%84%B6%E5%90%8E%E8%A7%A3%E5%8E%8B%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95%E3%80%82">https://pkgs.org/download/keepalived‰∏ãËΩΩÁõ∏Â∫îÁöÑÂÆâË£ÖÁâàÊú¨ÔºåÁÑ∂ÂêéËß£ÂéãÁöÑÁõ∏ÂÖ≥ÁõÆÂΩï„ÄÇ</a></p></li><li><p>Ê∫êÁ†ÅÁöÑÂÆâË£Ö‰∏ÄËà¨Áî±3‰∏™Ê≠•È™§ÁªÑÊàêÔºöÈÖçÁΩÆÔºàconfigureÔºâ„ÄÅÁºñËØëÔºàmakeÔºâ„ÄÅÂÆâË£Ö( make installÔºâ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/keepalived</span><br></pre></td></tr></table></figure><p> Â¶ÇÊûúÊèêÁ§∫ÈîôËØØ‰ø°ÊÅØ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configure: error: </span><br><span class="line">  !!! OpenSSL is not properly installed on your system. !!!</span><br><span class="line">  !!! Can not include OpenSSL headers files.            !!!</span><br></pre></td></tr></table></figure><p>ÈúÄË¶ÅÂÆâË£Öyum install openssl openssl-develÔºàRedHatÁ≥ªÁªüÔºâÔºå<br>ÂÜçÊ¨°ÊâßË°å./configure ‚Äìprefix=/usr/local/keepalived</p></li><li><p>Âú®ÂÆâË£ÖÁõÆÂΩïÊâßË°å<code>make &amp;&amp; make install</code>ËøõË°åÁºñËØëÂÆâË£Ö</p></li><li><p>keepalivedÈÖçÁΩÆÊñá‰ª∂ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãkeepalivedÂêØÂä®Êó∂‰ºöÂéª/etc/keepalivedÁõÆÂΩï‰∏ãÂä†ËΩΩÈÖçÁΩÆÊñá‰ª∂keepalived.conf</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">! Configuration File forkeepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">notification_email &#123;</span><br><span class="line">[email protected]</span><br><span class="line"> &#125;</span><br><span class="line">notification_email_from  [email protected]</span><br><span class="line">smtp_server 127.0.0.1</span><br><span class="line">smtp_connect_timeout 30</span><br><span class="line">router_id MYSQL_HA      #Ê†áËØÜÔºåÂèå‰∏ªÁõ∏Âêå</span><br><span class="line"> &#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line"> state BACKUP           #‰∏§Âè∞ÈÉΩËÆæÁΩÆBACKUP</span><br><span class="line"> interface eth0         #ÁΩëÂç°ÂêçÁß∞</span><br><span class="line"> virtual_router_id 51       #‰∏ªÂ§áÁõ∏Âêå</span><br><span class="line"> priority 100   #‰ºòÂÖàÁ∫ßÔºåÂè¶‰∏ÄÂè∞Êîπ‰∏∫90    </span><br><span class="line"> advert_int 1    </span><br><span class="line"> nopreempt  #‰∏çÊä¢Âç†ÔºåÂè™Âú®‰ºòÂÖàÁ∫ßÈ´òÁöÑÊú∫Âô®‰∏äËÆæÁΩÆÂç≥ÂèØÔºå‰ºòÂÖàÁ∫ß‰ΩéÁöÑÊú∫Âô®‰∏çËÆæÁΩÆ    </span><br><span class="line"> authentication &#123;</span><br><span class="line"> auth_type PASS    #Èâ¥ÊùÉÔºåÈªòËÆ§ÈÄöËøá</span><br><span class="line"> auth_pass 1111    # Èâ¥ÊùÉËÆøÈóÆÂØÜÁ†Å</span><br><span class="line"> &#125;</span><br><span class="line"> virtual_ipaddress &#123;</span><br><span class="line">  172.20.3.200    #ËôöÊãüip</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">virtual_server 172.20.3.200 3306 &#123;    </span><br><span class="line">     delay_loop 2   #ÊØè‰∏™2ÁßíÊ£ÄÊü•‰∏ÄÊ¨°real_serverÁä∂ÊÄÅ    </span><br><span class="line">     lb_algo wrr   #LVSÁÆóÊ≥ï    </span><br><span class="line">     lb_kind DR    #LVSÊ®°Âºè    </span><br><span class="line">     persistence_timeout 60   #‰ºöËØù‰øùÊåÅÊó∂Èó¥    </span><br><span class="line">     protocol TCP    </span><br><span class="line">     real_server 172.20.3.113 3306 &#123;    </span><br><span class="line">         weight 1    #ÊåáÂÆö‰∫ÜÂΩìÂâç‰∏ªÊú∫ÁöÑÊùÉÈáç    </span><br><span class="line">         notify_down /usr/local/keepalived/kill_keepalived.sh  #Ê£ÄÊµãÂà∞ÊúçÂä°downÂêéÊâßË°åÁöÑËÑöÊú¨    </span><br><span class="line">         TCP_CHECK &#123;    </span><br><span class="line">             connect_timeout 10    #ËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥</span><br><span class="line">             delay_before_retry 3   #ÈáçËøûÈó¥ÈöîÊó∂Èó¥    </span><br><span class="line">             connect_port 3306   #ÂÅ•Â∫∑Ê£ÄÊü•Á´ØÂè£  </span><br><span class="line">         &#125;  </span><br><span class="line">     &#125;</span><br><span class="line">     real_server 172.20.3.114 3306 &#123;</span><br><span class="line">        weight 2</span><br><span class="line">        notify_down /usr/local/keepalived/kill_keepalived.sh  #Ê£ÄÊµãÂà∞ÊúçÂä°downÂêéÊâßË°åÁöÑËÑöÊú¨</span><br><span class="line">        TCP_CHECK &#123;</span><br><span class="line">            connect_timeout 10</span><br><span class="line">            delay_before_retry 3</span><br><span class="line">            connect_port 3306</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ê≥®ÊÑèÔºöÂèÇÊï∞priority‰∏§‰∏™ÊúçÂä°Âô®ÈÖçÁΩÆ‰∏çÂêåÔºåÂÖ∂‰∏≠virtual_ipaddressÊòØËôöÊãüipÔºå‰πãÂêéÈ°πÁõÆÂèØÈÄöËøáËÆøÈóÆ 172.20.3.200:3306ËøõË°åËÆøÈóÆÂèå‰∏ªmysqlÊú∫Áæ§„ÄÇ</p><p>‰∏äËø∞ÈÖçÁΩÆ‰∏≠‰ºöÊ∂âÂèä/usr/local/keepalived/kill_keepalived.shÔºåÂàÜÂà´Âú®‰∏§Âè∞ÊúçÂä°Âô®‰∏äÁºñÂÜôkill_keepalived.shËÑöÊú¨ÂÜÖÂÆπÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">pkill keepalived</span><br></pre></td></tr></table></figure><p>   ÁÑ∂ÂêéÁªôËÑöÊú¨Âä†ÊùÉÈôê</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /usr/local/keepalived/kill_keepalived.sh</span><br></pre></td></tr></table></figure><ul><li>ÂêØÂä®keepalivedÊúçÂä°<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service keepalived start</span><br></pre></td></tr></table></figure>Â¶ÇÊûúÂêØÂä®Â§±Ë¥•ÔºåÂ∞ùËØïËæìÂÖ•<code>pkill -9 keepalived</code>ÔºåÁÑ∂ÂêéÂÜçÂ∞ùËØïÈáçÂêØ</li></ul><hr><h3 id="‰∏â„ÄÅËÆøÈóÆÂèå‰∏ªmysqlÈõÜÁæ§"><a href="#‰∏â„ÄÅËÆøÈóÆÂèå‰∏ªmysqlÈõÜÁæ§" class="headerlink" title="‰∏â„ÄÅËÆøÈóÆÂèå‰∏ªmysqlÈõÜÁæ§"></a>‰∏â„ÄÅËÆøÈóÆÂèå‰∏ªmysqlÈõÜÁæ§</h3><p>‰∏§Âè∞Êú∫Âô®ÁöÑmysqlÂíåkeepalivedÈÖçÁΩÆÂÆåÊàê‰πãÂêéÔºåÂç≥ÂèØÂú®È°πÁõÆ‰∏≠ÔºåÈÄöËøáËÆøÈóÆËôöÊãüipÂú∞ÂùÄÔºà172.20.3.200:3306ÔºâËøõË°åmysqlÈõÜÁæ§ÁöÑËÆøÈóÆ„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flink sql</title>
      <link href="/2022/01/04/flink%20sql/"/>
      <url>/2022/01/04/flink%20sql/</url>
      
        <content type="html"><![CDATA[<h1 id="table-vs-view"><a href="#table-vs-view" class="headerlink" title="table vs view"></a>table vs view</h1><blockquote><p>Temporary tables are always stored in memory and only exist for the duration of the Flink session they are created within. These tables are not visible to other sessions. They are not bound to any catalog or database but can be created in the namespace of one. Temporary tables are not dropped if their corresponding database is removed.</p></blockquote><blockquote><p>Tables can be either virtual (VIEWS) or regular (TABLES). VIEWS can be created from an existing Table object, usually the result of a Table API or SQL query. TABLES describe external data, such as a file, database table, or message queue.</p></blockquote><h1 id="grammer"><a href="#grammer" class="headerlink" title="grammer"></a>grammer</h1><ul><li>NOT ENFORCED</li></ul><blockquote><p>If you know that the data conforms to these constraints, you can use the NOT ENFORCED capability to help achieve two goals:</p><ul><li>Improve performance, primarily in insert, update, and delete operations on the table</li><li>Reduce space requirements that are associated with enforcing a primary key or unique constraint</li></ul></blockquote><h1 id="data-type"><a href="#data-type" class="headerlink" title="data type"></a>data type</h1><h3 id="Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö"><a href="#Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö" class="headerlink" title="Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö"></a>Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö</h3><ul><li>‚≠ê CHAR„ÄÅCHAR(n)ÔºöÂÆöÈïøÂ≠óÁ¨¶‰∏≤ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ Char ‰∏ÄÊ†∑Ôºån ‰ª£Ë°®Â≠óÁ¨¶ÁöÑÂÆöÈïøÔºåÂèñÂÄºËåÉÂõ¥ [1, 2,147,483,647]„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆö nÔºåÂàôÈªòËÆ§‰∏∫ 1„ÄÇ</li><li>‚≠ê VARCHAR„ÄÅVARCHAR(n)„ÄÅSTRINGÔºöÂèØÂèòÈïøÂ≠óÁ¨¶‰∏≤ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ String ‰∏ÄÊ†∑Ôºån ‰ª£Ë°®Â≠óÁ¨¶ÁöÑÊúÄÂ§ßÈïøÂ∫¶ÔºåÂèñÂÄºËåÉÂõ¥ [1, 2,147,483,647]„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆö nÔºåÂàôÈªòËÆ§‰∏∫ 1„ÄÇSTRING Á≠âÂêå‰∫é VARCHAR(2147483647)„ÄÇ</li></ul><h3 id="‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö"><a href="#‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö" class="headerlink" title="‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö"></a>‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö</h3><ul><li>‚≠ê BINARY„ÄÅBINARY(n)ÔºöÂÆöÈïø‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Ôºån ‰ª£Ë°®ÂÆöÈïøÔºåÂèñÂÄºËåÉÂõ¥ [1, 2,147,483,647]„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆö nÔºåÂàôÈªòËÆ§‰∏∫ 1„ÄÇ</li><li>‚≠ê VARBINARY„ÄÅVARBINARY(n)„ÄÅBYTESÔºöÂèØÂèòÈïø‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤Ôºån ‰ª£Ë°®Â≠óÁ¨¶ÁöÑÊúÄÂ§ßÈïøÂ∫¶ÔºåÂèñÂÄºËåÉÂõ¥ [1, 2,147,483,647]„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆö nÔºåÂàôÈªòËÆ§‰∏∫ 1„ÄÇBYTES Á≠âÂêå‰∫é VARBINARY(2147483647)„ÄÇ</li></ul><h3 id="Á≤æÁ°ÆÊï∞ÂÄºÁ±ªÂûãÔºö"><a href="#Á≤æÁ°ÆÊï∞ÂÄºÁ±ªÂûãÔºö" class="headerlink" title="Á≤æÁ°ÆÊï∞ÂÄºÁ±ªÂûãÔºö"></a>Á≤æÁ°ÆÊï∞ÂÄºÁ±ªÂûãÔºö</h3><ul><li>‚≠ê DECIMAL„ÄÅDECIMAL(p)„ÄÅDECIMAL(p, s)„ÄÅDEC„ÄÅDEC(p)„ÄÅDEC(p, s)„ÄÅNUMERIC„ÄÅNUMERIC(p)„ÄÅNUMERIC(p, s)ÔºöÂõ∫ÂÆöÈïøÂ∫¶ÂíåÁ≤æÂ∫¶ÁöÑÊï∞ÂÄºÁ±ªÂûãÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ BigDecimal ‰∏ÄÊ†∑Ôºåp ‰ª£Ë°®Êï∞ÂÄº‰ΩçÊï∞ÔºàÈïøÂ∫¶ÔºâÔºåÂèñÂÄºËåÉÂõ¥ [1, 38]Ôºõs ‰ª£Ë°®Â∞èÊï∞ÁÇπÂêéÁöÑ‰ΩçÊï∞ÔºàÁ≤æÂ∫¶ÔºâÔºåÂèñÂÄºËåÉÂõ¥ [0, p]„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆöÔºåp ÈªòËÆ§‰∏∫ 10Ôºås ÈªòËÆ§‰∏∫ 0„ÄÇ</li><li>‚≠ê TINYINTÔºö-128 Âà∞ 127 ÁöÑ 1 Â≠óËäÇÂ§ßÂ∞èÁöÑÊúâÁ¨¶Âè∑Êï¥Êï∞ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ byte ‰∏ÄÊ†∑„ÄÇ</li><li>‚≠ê SMALLINTÔºö-32,768 to 32,767 ÁöÑ 2 Â≠óËäÇÂ§ßÂ∞èÁöÑÊúâÁ¨¶Âè∑Êï¥Êï∞ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ short ‰∏ÄÊ†∑„ÄÇ</li><li>‚≠ê INT„ÄÅINTEGERÔºö-2,147,483,648 to 2,147,483,647 ÁöÑ 4 Â≠óËäÇÂ§ßÂ∞èÁöÑÊúâÁ¨¶Âè∑Êï¥Êï∞ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ int ‰∏ÄÊ†∑„ÄÇ</li><li>‚≠ê BIGINTÔºö-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 ÁöÑ 8 Â≠óËäÇÂ§ßÂ∞èÁöÑÊúâÁ¨¶Âè∑Êï¥Êï∞ÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ long ‰∏ÄÊ†∑„ÄÇ</li></ul><h3 id="ÊúâÊçüÁ≤æÂ∫¶Êï∞ÂÄºÁ±ªÂûãÔºö"><a href="#ÊúâÊçüÁ≤æÂ∫¶Êï∞ÂÄºÁ±ªÂûãÔºö" class="headerlink" title="ÊúâÊçüÁ≤æÂ∫¶Êï∞ÂÄºÁ±ªÂûãÔºö"></a>ÊúâÊçüÁ≤æÂ∫¶Êï∞ÂÄºÁ±ªÂûãÔºö</h3><ul><li>‚≠ê FLOATÔºö4 Â≠óËäÇÂ§ßÂ∞èÁöÑÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÂÄºÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ float ‰∏ÄÊ†∑„ÄÇ</li><li>‚≠ê DOUBLE„ÄÅDOUBLE PRECISIONÔºö8 Â≠óËäÇÂ§ßÂ∞èÁöÑÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÂÄºÔºåÂ∞±Âíå Java ‰∏≠ÁöÑ double ‰∏ÄÊ†∑„ÄÇ</li><li>‚≠ê ÂÖ≥‰∫é FLOAT Âíå DOUBLE ÁöÑÂå∫Âà´ÂèØËßÅ <a href="https://www.runoob.com/w3cnote/float-and-double-different.html">https://www.runoob.com/w3cnote/float-and-double-different.html</a></li></ul><h3 id="Êó•Êúü„ÄÅÊó∂Èó¥Á±ªÂûãÔºö"><a href="#Êó•Êúü„ÄÅÊó∂Èó¥Á±ªÂûãÔºö" class="headerlink" title="Êó•Êúü„ÄÅÊó∂Èó¥Á±ªÂûãÔºö"></a>Êó•Êúü„ÄÅÊó∂Èó¥Á±ªÂûãÔºö</h3><ul><li><p>‚≠ê DATEÔºöÁî± <code>Âπ¥-Êúà-Êó•</code> ÁªÑÊàêÁöÑ <code>‰∏çÂ∏¶Êó∂Âå∫Âê´‰πâ</code> ÁöÑÊó•ÊúüÁ±ªÂûãÔºåÂèñÂÄºËåÉÂõ¥ [0000-01-01, 9999-12-31]</p></li><li><p>‚≠ê TIME„ÄÅTIME(p)ÔºöÁî± <code>Â∞èÊó∂ÔºöÂàÜÈíüÔºöÁßí[.Â∞èÊï∞Áßí]</code> ÁªÑÊàêÁöÑ <code>‰∏çÂ∏¶Êó∂Âå∫Âê´‰πâ</code> ÁöÑÁöÑÊó∂Èó¥ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÁ≤æÂ∫¶È´òËææÁ∫≥ÁßíÔºåÂèñÂÄºËåÉÂõ¥ [00:00:00.000000000Âà∞23:59:59.9999999]„ÄÇÂÖ∂‰∏≠ p ‰ª£Ë°®Â∞èÊï∞ÁßíÁöÑ‰ΩçÊï∞ÔºåÂèñÂÄºËåÉÂõ¥ [0, 9]ÔºåÂ¶ÇÊûú‰∏çÊåáÂÆö pÔºåÈªòËÆ§‰∏∫ 0„ÄÇ</p></li><li><p>‚≠ê TIMESTAMP„ÄÅTIMESTAMP(p)„ÄÅTIMESTAMP WITHOUT TIME ZONE„ÄÅTIMESTAMP(p) WITHOUT TIME ZONEÔºöÁî± <code>Âπ¥-Êúà-Êó• Â∞èÊó∂ÔºöÂàÜÈíüÔºöÁßí[.Â∞èÊï∞Áßí]</code> ÁªÑÊàêÁöÑ <code>‰∏çÂ∏¶Êó∂Âå∫Âê´‰πâ</code> ÁöÑÊó∂Èó¥Á±ªÂûãÔºåÂèñÂÄºËåÉÂõ¥ [0000-01-01 00:00:00.000000000, 9999-12-31 23:59:59.999999999]„ÄÇÂÖ∂‰∏≠ p ‰ª£Ë°®Â∞èÊï∞ÁßíÁöÑ‰ΩçÊï∞ÔºåÂèñÂÄºËåÉÂõ¥ [0, 9]ÔºåÂ¶ÇÊûú‰∏çÊåáÂÆö pÔºåÈªòËÆ§‰∏∫ 6„ÄÇ</p><p>Timestamp precision can range from 0 (seconds) to 9 (nanoseconds). The default precision is 6.</p></li><li><p>‚≠ê TIMESTAMP WITH TIME ZONE„ÄÅTIMESTAMP(p) WITH TIME ZONEÔºöÁî± <code>Âπ¥-Êúà-Êó• Â∞èÊó∂ÔºöÂàÜÈíüÔºöÁßí[.Â∞èÊï∞Áßí] Êó∂Âå∫</code> ÁªÑÊàêÁöÑ <code>Â∏¶Êó∂Âå∫Âê´‰πâ</code> ÁöÑÊó∂Èó¥Á±ªÂûãÔºåÂèñÂÄºËåÉÂõ¥ [0000-01-01 00:00:00.000000000 +14:59, 9999-12-31 23:59:59.999999999 -14:59]„ÄÇÂÖ∂‰∏≠ p ‰ª£Ë°®Â∞èÊï∞ÁßíÁöÑ‰ΩçÊï∞ÔºåÂèñÂÄºËåÉÂõ¥ [0, 9]ÔºåÂ¶ÇÊûú‰∏çÊåáÂÆö pÔºåÈªòËÆ§‰∏∫ 6„ÄÇ</p></li><li><p>‚≠ê TIMESTAMP_LTZ„ÄÅTIMESTAMP_LTZ(p)ÔºöÁî± <code>Âπ¥-Êúà-Êó• Â∞èÊó∂ÔºöÂàÜÈíüÔºöÁßí[.Â∞èÊï∞Áßí] Êó∂Âå∫</code> ÁªÑÊàêÁöÑ <code>Â∏¶Êó∂Âå∫Âê´‰πâ</code> ÁöÑÊó∂Èó¥Á±ªÂûãÔºåÂèñÂÄºËåÉÂõ¥ [0000-01-01 00:00:00.000000000 +14:59, 9999-12-31 23:59:59.999999999 -14:59]„ÄÇÂÖ∂‰∏≠ p ‰ª£Ë°®Â∞èÊï∞ÁßíÁöÑ‰ΩçÊï∞ÔºåÂèñÂÄºËåÉÂõ¥ [0, 9]ÔºåÂ¶ÇÊûú‰∏çÊåáÂÆö pÔºåÈªòËÆ§‰∏∫ 6„ÄÇ</p></li><li><p>‚≠ê TIMESTAMP_LTZ ‰∏é TIMESTAMP WITH TIME ZONE ÁöÑÂå∫Âà´Âú®‰∫éÔºöTIMESTAMP WITH TIME ZONE ÁöÑÊó∂Âå∫‰ø°ÊÅØÊòØÊê∫Â∏¶Âú®Êï∞ÊçÆ‰∏≠ÁöÑÔºå‰∏æ‰æãÔºöÂÖ∂ËæìÂÖ•Êï∞ÊçÆÂ∫îËØ•ÊòØ 2022-01-01 00:00:00.000000000 +08:00ÔºõTIMESTAMP_LTZ ÁöÑÊó∂Âå∫‰ø°ÊÅØ‰∏çÊòØÊê∫Â∏¶Âú®Êï∞ÊçÆ‰∏≠ÁöÑÔºåËÄåÊòØÁî± Flink SQL ‰ªªÂä°ÁöÑÂÖ®Â±ÄÈÖçÁΩÆÂÜ≥ÂÆöÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Áî± <code>table.local-time-zone</code> ÂèÇÊï∞Êù•ËÆæÁΩÆÊó∂Âå∫„ÄÇ</p></li><li><p>‚≠ê INTERVAL YEAR TO MONTH„ÄÅ INTERVAL DAY TO SECONDÔºöinterval ÁöÑÊ∂âÂèäÂà∞ÁöÑÁßçÁ±ªÊØîËæÉÂ§ö„ÄÇINTERVAL ‰∏ªË¶ÅÊòØÁî®‰∫éÁªô TIMESTAMP„ÄÅTIMESTAMP_LTZ Ê∑ªÂä†ÂÅèÁßªÈáèÁöÑ„ÄÇ‰∏æ‰æãÔºåÊØîÂ¶ÇÁªô TIMESTAMP Âä†„ÄÅÂáèÂá†Â§©„ÄÅÂá†‰∏™Êúà„ÄÅÂá†Âπ¥„ÄÇINTERVAL Â≠êÂè•ÊÄªÂÖ±Ê∂âÂèäÂà∞ÁöÑËØ≠Ê≥ïÁßçÁ±ªÂ¶Ç‰∏ã Flink SQL Ê°à‰æãÊâÄÁ§∫„ÄÇ</p></li></ul><p>‚Äã    <strong>Ê≥®ÊÑèÔºö‰ΩÜÊòØÂú® Flink SQL ‰∏≠ÔºåÊó†Ê≥ïÁõ¥Êé•ÂéªÊéâÊó∂Èó¥Â≠óÊÆµÁöÑÂ∞èÊï∞ÁßíÈÉ®ÂàÜËÄå‰øùÁïôÊó∂Èó¥Á±ªÂûã„ÄÇ</strong></p><h3 id="ÂÖ∂ÂÆÉÁ±ªÂûã"><a href="#ÂÖ∂ÂÆÉÁ±ªÂûã" class="headerlink" title="ÂÖ∂ÂÆÉÁ±ªÂûã"></a>ÂÖ∂ÂÆÉÁ±ªÂûã</h3><ol><li>Â∏ÉÂ∞îÁ±ªÂûãÔºöBOOLEAN</li><li>‚≠ê NULL Á±ªÂûãÔºöNULL</li><li>‚≠ê Raw Á±ªÂûãÔºöRAW(‚Äòclass‚Äô, ‚Äòsnapshot‚Äô) „ÄÇÂè™‰ºöÂú®Êï∞ÊçÆÂèëÁîüÁΩëÁªú‰º†ËæìÊó∂ËøõË°åÂ∫èÂàóÂåñÔºåÂèçÂ∫èÂàóÂåñÊìç‰ΩúÔºåÂèØ‰ª•‰øùÁïôÂÖ∂ÂéüÂßãÊï∞ÊçÆ„ÄÇ‰ª• Java ‰∏æ‰æãÔºå<code>class</code> ÂèÇÊï∞‰ª£Ë°®ÂÖ∑‰ΩìÂØπÂ∫îÁöÑ Java Á±ªÂûãÔºå<code>snapshot</code> ‰ª£Ë°®Á±ªÂûãÂú®ÂèëÁîüÁΩëÁªú‰º†ËæìÊó∂ÁöÑÂ∫èÂàóÂåñÂô®</li></ol><h1 id="Êó∂Èó¥Â±ûÊÄß"><a href="#Êó∂Èó¥Â±ûÊÄß" class="headerlink" title="Êó∂Èó¥Â±ûÊÄß"></a>Êó∂Èó¥Â±ûÊÄß</h1><blockquote><p> ÂÉèÁ™óÂè£ÔºàÂú® <a href="https://nightlies.apache.org/flink/flink-docs-master/zh/docs/dev/table/tableapi/#group-windows">Table API</a> Âíå <a href="https://nightlies.apache.org/flink/flink-docs-master/zh/docs/dev/table/sql/queries/window-agg/">SQL</a> ÔºâËøôÁßçÂü∫‰∫éÊó∂Èó¥ÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÊúâÊó∂Èó¥‰ø°ÊÅØ„ÄÇÂõ†Ê≠§ÔºåTable API ‰∏≠ÁöÑË°®Â∞±ÈúÄË¶ÅÊèê‰æõ<em>ÈÄªËæëÊó∂Èó¥Â±ûÊÄß</em>Êù•Ë°®Á§∫Êó∂Èó¥Ôºå‰ª•ÂèäÊîØÊåÅÊó∂Èó¥Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú„ÄÇ</p></blockquote><p>ÊØèÁßçÁ±ªÂûãÁöÑË°®ÈÉΩÂèØ‰ª•ÊúâÊó∂Èó¥Â±ûÊÄßÔºåÊó∂Èó¥Â±ûÊÄßÂèØ‰ª•ÈÄöËøá</p><ol><li>Áî®CREATE TABLE DDLÂàõÂª∫Ë°®ÁöÑÊó∂ÂÄôÊåáÂÆö</li><li>ÂèØ‰ª•Âú® <code>DataStream</code> ‰∏≠ÊåáÂÆö</li><li>ÂèØ‰ª•Âú®ÂÆö‰πâ <code>TableSource</code> Êó∂ÊåáÂÆö„ÄÇ</li></ol><p>‰∏ÄÊó¶Êó∂Èó¥Â±ûÊÄßÂÆö‰πâÂ•ΩÔºåÂÆÉÂ∞±ÂèØ‰ª•ÂÉèÊôÆÈÄöÂàó‰∏ÄÊ†∑‰ΩøÁî®Ôºå‰πüÂèØ‰ª•Âú®Êó∂Èó¥Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú‰∏≠‰ΩøÁî®ÔºåÂè™Ë¶ÅÊó∂Èó¥Â±ûÊÄßÊ≤°ÊúâË¢´‰øÆÊîπÔºåËÄåÊòØÁÆÄÂçïÂú∞‰ªé‰∏Ä‰∏™Ë°®‰º†ÈÄíÂà∞Âè¶‰∏Ä‰∏™Ë°®ÔºåÂÆÉÂ∞±‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊó∂Èó¥Â±ûÊÄß„ÄÇ</p><p>Êó∂Èó¥Â±ûÊÄßÂèØ‰ª•ÂÉèÊôÆÈÄöÁöÑÊó∂Èó¥Êà≥ÁöÑÂàó‰∏ÄÊ†∑Ë¢´‰ΩøÁî®ÂíåËÆ°ÁÆó„ÄÇ‰∏ÄÊó¶Êó∂Èó¥Â±ûÊÄßË¢´Áî®Âú®‰∫ÜËÆ°ÁÆó‰∏≠ÔºåÂÆÉÂ∞±‰ºöË¢´Áâ©ÂåñÔºåËøõËÄåÂèòÊàê‰∏Ä‰∏™ÊôÆÈÄöÁöÑÊó∂Èó¥Êà≥„ÄÇÊôÆÈÄöÁöÑÊó∂Èó¥Êà≥ÊòØÊó†Ê≥ïË∑ü Flink ÁöÑÊó∂Èó¥‰ª•ÂèäwatermarkÁ≠â‰∏ÄËµ∑‰ΩøÁî®ÁöÑÔºåÊâÄ‰ª•ÊôÆÈÄöÁöÑÊó∂Èó¥Êà≥Â∞±Êó†Ê≥ïÁî®Âú®Êó∂Èó¥Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú‰∏≠ÔºàËøôÂè•ËØùÊòØÂè™Èôê‰∫éË¢´‰øÆÊîπÁöÑÊôÆÈÄöÊó∂Èó¥Êà≥ÔºåËøòÊòØÂåÖÂê´Êú™Ë¢´‰øÆÊîπÁöÑÊó∂Èó¥Êà≥Ôºâ„ÄÇ</p><h3 id="Â§ÑÁêÜÊó∂Èó¥"><a href="#Â§ÑÁêÜÊó∂Èó¥" class="headerlink" title="Â§ÑÁêÜÊó∂Èó¥"></a>Â§ÑÁêÜÊó∂Èó¥</h3><blockquote><p>Â§ÑÁêÜÊó∂Èó¥ÊòØÂü∫‰∫éÊú∫Âô®ÁöÑÊú¨Âú∞Êó∂Èó¥Êù•Â§ÑÁêÜÊï∞ÊçÆÔºåÂÆÉÊòØÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßçÊó∂Èó¥Ê¶ÇÂøµÔºå‰ΩÜÊòØÂÆÉ‰∏çËÉΩÊèê‰æõÁ°ÆÂÆöÊÄß„ÄÇÂÆÉÊó¢‰∏çÈúÄË¶Å‰ªéÊï∞ÊçÆÈáåËé∑ÂèñÊó∂Èó¥Ôºå‰πü‰∏çÈúÄË¶ÅÁîüÊàê watermark„ÄÇ</p></blockquote><p>ÂÆö‰πâÂ§ÑÁêÜÊó∂Èó¥ÁöÑ‰∏âÁßçÊñπÊ≥ï:</p><ol><li><p>Âú®ÂàõÂª∫Ë°®ÁöÑ DDL ‰∏≠ÂÆö‰πâ</p><blockquote><p>Áî® <code>PROCTIME()</code> Â∞±ÂèØ‰ª•ÂÆö‰πâÂ§ÑÁêÜÊó∂Èó¥ÔºåÂáΩÊï∞ <code>PROCTIME()</code> ÁöÑËøîÂõûÁ±ªÂûãÊòØ TIMESTAMP_LTZ </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CREATE TABLE <span class="title">user_actions</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  user_name STRING,</span></span></span><br><span class="line"><span class="params"><span class="function">  data STRING,</span></span></span><br><span class="line"><span class="params"><span class="function">  user_action_time AS PROCTIME()</span> -- Â£∞Êòé‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂàó‰Ωú‰∏∫Â§ÑÁêÜÊó∂Èó¥Â±ûÊÄß</span></span><br><span class="line"><span class="function">) <span class="title">WITH</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  ...</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>Âú® DataStream Âà∞ Table ËΩ¨Êç¢Êó∂ÂÆö‰πâ</p><blockquote><p>Â§ÑÁêÜÊó∂Èó¥Â±ûÊÄßÂèØ‰ª•Âú® schema ÂÆö‰πâÁöÑÊó∂ÂÄôÁî® <code>.proctime</code> ÂêéÁºÄÊù•ÂÆö‰πâ„ÄÇÊó∂Èó¥Â±ûÊÄß‰∏ÄÂÆö‰∏çËÉΩÂÆö‰πâÂú®‰∏Ä‰∏™Â∑≤ÊúâÂ≠óÊÆµ‰∏äÔºåÊâÄ‰ª•ÂÆÉÂè™ËÉΩÂÆö‰πâÂú® schema ÂÆö‰πâÁöÑÊúÄÂêé„ÄÇ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DataStream&lt;Tuple2&lt;String, String&gt;&gt; stream = ...;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â£∞Êòé‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂ≠óÊÆµ‰Ωú‰∏∫Êó∂Èó¥Â±ûÊÄßÂ≠óÊÆµ</span></span><br><span class="line">Table table = tEnv.fromDataStream(stream, $(<span class="string">&quot;user_name&quot;</span>), $(<span class="string">&quot;data&quot;</span>), $(<span class="string">&quot;user_action_time&quot;</span>).proctime());</span><br><span class="line"></span><br><span class="line">WindowedTable windowedTable = table.window(</span><br><span class="line">        Tumble.over(lit(<span class="number">10</span>).minutes())</span><br><span class="line">            .on($(<span class="string">&quot;user_action_time&quot;</span>))</span><br><span class="line">            .as(<span class="string">&quot;userActionWindow&quot;</span>));</span><br></pre></td></tr></table></figure></li><li><p>‰ΩøÁî® TableSource ÂÆö‰πâ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂÆö‰πâ‰∏Ä‰∏™Áî±Â§ÑÁêÜÊó∂Èó¥Â±ûÊÄßÁöÑ table source</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserActionSource</span> <span class="keyword">implements</span> <span class="title">StreamTableSource</span>&lt;<span class="title">Row</span>&gt;, <span class="title">DefinedProctimeAttribute</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TypeInformation&lt;Row&gt; <span class="title">getReturnType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[] names = <span class="keyword">new</span> String[] &#123;<span class="string">&quot;user_name&quot;</span> , <span class="string">&quot;data&quot;</span>&#125;;</span><br><span class="line">        TypeInformation[] types = <span class="keyword">new</span> TypeInformation[] &#123;Types.STRING(), Types.STRING()&#125;;</span><br><span class="line">        <span class="keyword">return</span> Types.ROW(names, types);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataStream&lt;Row&gt; <span class="title">getDataStream</span><span class="params">(StreamExecutionEnvironment execEnv)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// create stream</span></span><br><span class="line">        DataStream&lt;Row&gt; stream = ...;</span><br><span class="line">        <span class="keyword">return</span> stream;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getProctimeAttribute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ëøô‰∏™ÂêçÂ≠óÁöÑÂàó‰ºöË¢´ËøΩÂä†Âà∞ÊúÄÂêéÔºå‰Ωú‰∏∫Á¨¨‰∏âÂàó</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user_action_time&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// register table source</span></span><br><span class="line">tEnv.registerTableSource(<span class="string">&quot;user_actions&quot;</span>, <span class="keyword">new</span> UserActionSource());</span><br><span class="line"></span><br><span class="line">WindowedTable windowedTable = tEnv</span><br><span class="line">    .from(<span class="string">&quot;user_actions&quot;</span>)</span><br><span class="line">    .window(Tumble</span><br><span class="line">        .over(lit(<span class="number">10</span>).minutes())</span><br><span class="line">        .on($(<span class="string">&quot;user_action_time&quot;</span>))</span><br><span class="line">        .as(<span class="string">&quot;userActionWindow&quot;</span>));</span><br></pre></td></tr></table></figure></li></ol><h3 id="‰∫ã‰ª∂Êó∂Èó¥"><a href="#‰∫ã‰ª∂Êó∂Èó¥" class="headerlink" title="‰∫ã‰ª∂Êó∂Èó¥"></a>‰∫ã‰ª∂Êó∂Èó¥</h3><blockquote><p>‰∫ã‰ª∂Êó∂Èó¥ÂÖÅËÆ∏Á®ãÂ∫èÊåâÁÖßÊï∞ÊçÆ‰∏≠ÂåÖÂê´ÁöÑÊó∂Èó¥Êù•Â§ÑÁêÜÔºåËøôÊ†∑ÂèØ‰ª•Âú®Êúâ‰π±Â∫èÊàñËÄÖÊôöÂà∞ÁöÑÊï∞ÊçÆÁöÑÊÉÖÂÜµ‰∏ã‰∫ßÁîü‰∏ÄËá¥ÁöÑÂ§ÑÁêÜÁªìÊûú„ÄÇ‰∏∫‰∫ÜËÉΩÂ§üÂ§ÑÁêÜ‰π±Â∫èÁöÑ‰∫ã‰ª∂ÔºåÂπ∂‰∏îÂå∫ÂàÜÊ≠£Â∏∏Âà∞ËææÂíåÊôöÂà∞ÁöÑ‰∫ã‰ª∂ÔºåFlink ÈúÄË¶Å‰ªé‰∫ã‰ª∂‰∏≠Ëé∑Âèñ‰∫ã‰ª∂Êó∂Èó¥Âπ∂‰∏î‰∫ßÁîü <a href="https://nightlies.apache.org/flink/flink-docs-master/zh/docs/concepts/time/">watermarks</a>„ÄÇ</p></blockquote><p>ÂÆö‰πâ‰∫ã‰ª∂Êó∂Èó¥ÁöÑ‰∏âÁßçÊñπÊ≥ï:</p><ol><li><p>Âú® DDL ‰∏≠ÂÆö‰πâ</p><blockquote><p>WATERMARK ËØ≠Âè•Âú®‰∏Ä‰∏™Â∑≤ÊúâÂ≠óÊÆµ‰∏äÂÆö‰πâ‰∏Ä‰∏™ watermark ÁîüÊàêË°®ËææÂºèÔºåÂêåÊó∂Ê†áËÆ∞Ëøô‰∏™Â∑≤ÊúâÂ≠óÊÆµ‰∏∫Êó∂Èó¥Â±ûÊÄßÂ≠óÊÆµ„ÄÇ</p></blockquote><p>Flink ÊîØÊåÅÂíåÂú® TIMESTAMP ÂàóÂíå TIMESTAMP_LTZ Âàó‰∏äÂÆö‰πâ‰∫ã‰ª∂Êó∂Èó¥„ÄÇ</p><ul><li><p>Â¶ÇÊûúÊ∫êÊï∞ÊçÆ‰∏≠ÁöÑÊó∂Èó¥Êà≥Êï∞ÊçÆË°®Á§∫‰∏∫Âπ¥-Êúà-Êó•-Êó∂-ÂàÜ-ÁßíÔºåÂàôÈÄöÂ∏∏‰∏∫‰∏çÂ∏¶Êó∂Âå∫‰ø°ÊÅØÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÔºå‰æãÂ¶Ç <code>2020-04-15 20:13:40.564</code>ÔºåÂª∫ËÆÆÂ∞Ü‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÂÆö‰πâÂú® <code>TIMESTAMP</code> Âàó‰∏ä,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CREATE TABLE <span class="title">user_actions</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  user_name STRING,</span></span></span><br><span class="line"><span class="params"><span class="function">  data STRING,</span></span></span><br><span class="line"><span class="params"><span class="function">  user_action_time TIMESTAMP(<span class="number">3</span>)</span>,</span></span><br><span class="line"><span class="function">  -- Â£∞Êòé user_action_time ÊòØ‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÔºåÂπ∂‰∏îÁî® Âª∂Ëøü 5 ÁßíÁöÑÁ≠ñÁï•Êù•ÁîüÊàê watermark</span></span><br><span class="line"><span class="function">  WATERMARK FOR user_action_time AS user_action_time - INTERVAL &#x27;5&#x27; SECOND</span></span><br><span class="line"><span class="function">) <span class="title">WITH</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  ...</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">SELECT <span class="title">TUMBLE_START</span><span class="params">(user_action_time, INTERVAL <span class="string">&#x27;10&#x27;</span> MINUTE)</span>, <span class="title">COUNT</span><span class="params">(DISTINCT user_name)</span></span></span><br><span class="line"><span class="function">FROM user_actions</span></span><br><span class="line"><span class="function">GROUP BY <span class="title">TUMBLE</span><span class="params">(user_action_time, INTERVAL <span class="string">&#x27;10&#x27;</span> MINUTE)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>Â¶ÇÊûúÊ∫êÊï∞ÊçÆ‰∏≠ÁöÑÊó∂Èó¥Êà≥Êï∞ÊçÆ‰∏∫Â∏¶Êó∂Âå∫‰ø°ÊÅØÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÔºå‰æãÂ¶ÇÊ∫êÊï∞ÊçÆ‰∏≠ÁöÑÊó∂Èó¥Êà≥Êï∞ÊçÆË°®Á§∫‰∏∫‰∏Ä‰∏™Á∫™ÂÖÉ (epoch) Êó∂Èó¥ÔºåÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™ long ÂÄºÔºå‰æãÂ¶Ç <code>1618989564564</code>ÔºåÂª∫ËÆÆÂ∞Ü‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÂÆö‰πâÂú® <code>TIMESTAMP_LTZ</code> Âàó‰∏äÔºö</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CREATE TABLE <span class="title">user_actions</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function"> user_name STRING,</span></span></span><br><span class="line"><span class="params"><span class="function"> data STRING,</span></span></span><br><span class="line"><span class="params"><span class="function"> ts BIGINT,</span></span></span><br><span class="line"><span class="params"><span class="function"> time_ltz AS TO_TIMESTAMP_LTZ(ts, <span class="number">3</span>)</span>,</span></span><br><span class="line"><span class="function"> -- declare time_ltz as event time attribute and use 5 seconds delayed watermark strategy</span></span><br><span class="line"><span class="function"> WATERMARK FOR time_ltz AS time_ltz - INTERVAL &#x27;5&#x27; SECOND</span></span><br><span class="line"><span class="function">) <span class="title">WITH</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function"> ...</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">SELECT <span class="title">TUMBLE_START</span><span class="params">(time_ltz, INTERVAL <span class="string">&#x27;10&#x27;</span> MINUTE)</span>, <span class="title">COUNT</span><span class="params">(DISTINCT user_name)</span></span></span><br><span class="line"><span class="function">FROM user_actions</span></span><br><span class="line"><span class="function">GROUP BY <span class="title">TUMBLE</span><span class="params">(time_ltz, INTERVAL <span class="string">&#x27;10&#x27;</span> MINUTE)</span></span>;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Âú® DataStream Âà∞ Table ËΩ¨Êç¢Êó∂ÂÆö‰πâ</p><blockquote><p>‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÂèØ‰ª•Áî® <code>.rowtime</code> ÂêéÁºÄÂú®ÂÆö‰πâ <code>DataStream</code> schema ÁöÑÊó∂ÂÄôÊù•ÂÆö‰πâ„ÄÇ</p><p><a href="https://nightlies.apache.org/flink/flink-docs-master/zh/docs/concepts/time/">Êó∂Èó¥Êà≥Âíå watermark</a> Âú®Ëøô‰πãÂâç‰∏ÄÂÆöÊòØÂú® <code>DataStream</code> ‰∏äÂ∑≤ÁªèÂÆö‰πâÂ•Ω‰∫Ü„ÄÇ Âú®‰ªé DataStream ËΩ¨Êç¢Âà∞ Table Êó∂ÔºåÁî±‰∫é <code>DataStream</code> Ê≤°ÊúâÊó∂Âå∫Ê¶ÇÂøµÔºåÂõ†Ê≠§ Flink ÊÄªÊòØÂ∞Ü <code>rowtime</code> Â±ûÊÄßËß£ÊûêÊàê <code>TIMESTAMP WITHOUT TIME ZONE</code> Á±ªÂûãÔºåÂπ∂‰∏îÂ∞ÜÊâÄÊúâ‰∫ã‰ª∂Êó∂Èó¥ÁöÑÂÄºÈÉΩËßÜ‰∏∫ UTC Êó∂Âå∫ÁöÑÂÄº„ÄÇ</p></blockquote><ul><li>Option 1</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Âü∫‰∫é stream ‰∏≠ÁöÑ‰∫ã‰ª∂‰∫ßÁîüÊó∂Èó¥Êà≥Âíå watermark</span></span><br><span class="line">DataStream&lt;Tuple2&lt;String, String&gt;&gt; stream = inputStream.assignTimestampsAndWatermarks(...);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â£∞Êòé‰∏Ä‰∏™È¢ùÂ§ñÁöÑÈÄªËæëÂ≠óÊÆµ‰Ωú‰∏∫‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄß</span></span><br><span class="line">Table table = tEnv.fromDataStream(stream, $(<span class="string">&quot;user_name&quot;</span>), $(<span class="string">&quot;data&quot;</span>), $(<span class="string">&quot;user_action_time&quot;</span>).rowtime());</span><br></pre></td></tr></table></figure><ul><li>Option 2</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// ‰ªéÁ¨¨‰∏Ä‰∏™Â≠óÊÆµËé∑Âèñ‰∫ã‰ª∂Êó∂Èó¥ÔºåÂπ∂‰∏î‰∫ßÁîü watermark</span></span><br><span class="line">DataStream&lt;Tuple3&lt;Long, String, String&gt;&gt; stream = inputStream.assignTimestampsAndWatermarks(...);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Á¨¨‰∏Ä‰∏™Â≠óÊÆµÂ∑≤ÁªèÁî®‰Ωú‰∫ã‰ª∂Êó∂Èó¥ÊäΩÂèñ‰∫ÜÔºå‰∏çÁî®ÂÜçÁî®‰∏Ä‰∏™Êñ∞Â≠óÊÆµÊù•Ë°®Á§∫‰∫ã‰ª∂Êó∂Èó¥‰∫Ü</span></span><br><span class="line">Table table = tEnv.fromDataStream(stream, $(<span class="string">&quot;user_action_time&quot;</span>).rowtime(), $(<span class="string">&quot;user_name&quot;</span>), $(<span class="string">&quot;data&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage:</span></span><br><span class="line"></span><br><span class="line">WindowedTable windowedTable = table.window(Tumble</span><br><span class="line">      .over(lit(<span class="number">10</span>).minutes())</span><br><span class="line">      .on($(<span class="string">&quot;user_action_time&quot;</span>))</span><br><span class="line">      .as(<span class="string">&quot;userActionWindow&quot;</span>));</span><br></pre></td></tr></table></figure></li><li><p>‰ΩøÁî® TableSource ÂÆö‰πâ</p><blockquote><p>‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÂèØ‰ª•Âú®ÂÆûÁé∞‰∫Ü <code>DefinedRowTimeAttributes</code> ÁöÑ <code>TableSource</code> ‰∏≠ÂÆö‰πâ„ÄÇ<code>getRowtimeAttributeDescriptors()</code> ÊñπÊ≥ïËøîÂõû <code>RowtimeAttributeDescriptor</code> ÁöÑÂàóË°®ÔºåÂåÖÂê´‰∫ÜÊèèËø∞‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÁöÑÂ≠óÊÆµÂêçÂ≠ó„ÄÅÂ¶Ç‰ΩïËÆ°ÁÆó‰∫ã‰ª∂Êó∂Èó¥„ÄÅ‰ª•Âèä watermark ÁîüÊàêÁ≠ñÁï•Á≠â‰ø°ÊÅØ„ÄÇ</p><p>ÂêåÊó∂ÈúÄË¶ÅÁ°Æ‰øù <code>getDataStream</code> ËøîÂõûÁöÑ <code>DataStream</code> Â∑≤ÁªèÂÆö‰πâÂ•Ω‰∫ÜÊó∂Èó¥Â±ûÊÄß„ÄÇ</p><p>Âè™ÊúâÂú®ÂÆö‰πâ‰∫Ü <code>StreamRecordTimestamp</code> Êó∂Èó¥Êà≥ÂàÜÈÖçÂô®ÁöÑÊó∂ÂÄôÔºåÊâçËÆ§‰∏∫ <code>DataStream</code> ÊòØÊúâÊó∂Èó¥Êà≥‰ø°ÊÅØÁöÑ„ÄÇ Âè™ÊúâÂÆö‰πâ‰∫Ü <code>PreserveWatermarks</code> watermark ÁîüÊàêÁ≠ñÁï•ÁöÑ <code>DataStream</code> ÁöÑ watermark Êâç‰ºöË¢´‰øùÁïô„ÄÇÂèç‰πãÔºåÂàôÂè™ÊúâÊó∂Èó¥Â≠óÊÆµÁöÑÂÄºÊòØÁîüÊïàÁöÑ„ÄÇ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂÆö‰πâ‰∏Ä‰∏™Êúâ‰∫ã‰ª∂Êó∂Èó¥Â±ûÊÄßÁöÑ table source</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserActionSource</span> <span class="keyword">implements</span> <span class="title">StreamTableSource</span>&lt;<span class="title">Row</span>&gt;, <span class="title">DefinedRowtimeAttributes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TypeInformation&lt;Row&gt; <span class="title">getReturnType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[] names = <span class="keyword">new</span> String[] &#123;<span class="string">&quot;user_name&quot;</span>, <span class="string">&quot;data&quot;</span>, <span class="string">&quot;user_action_time&quot;</span>&#125;;</span><br><span class="line">        TypeInformation[] types =</span><br><span class="line">            <span class="keyword">new</span> TypeInformation[] &#123;Types.STRING(), Types.STRING(), Types.LONG()&#125;;</span><br><span class="line">        <span class="keyword">return</span> Types.ROW(names, types);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataStream&lt;Row&gt; <span class="title">getDataStream</span><span class="params">(StreamExecutionEnvironment execEnv)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ÊûÑÈÄ† DataStream</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// Âü∫‰∫é &quot;user_action_time&quot; ÂÆö‰πâ watermark</span></span><br><span class="line">        DataStream&lt;Row&gt; stream = inputStream.assignTimestampsAndWatermarks(...);</span><br><span class="line">        <span class="keyword">return</span> stream;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;RowtimeAttributeDescriptor&gt; <span class="title">getRowtimeAttributeDescriptors</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ê†áËÆ∞ &quot;user_action_time&quot; Â≠óÊÆµÊòØ‰∫ã‰ª∂Êó∂Èó¥Â≠óÊÆµ</span></span><br><span class="line">        <span class="comment">// Áªô &quot;user_action_time&quot; ÊûÑÈÄ†‰∏Ä‰∏™Êó∂Èó¥Â±ûÊÄßÊèèËø∞Á¨¶</span></span><br><span class="line">        RowtimeAttributeDescriptor rowtimeAttrDescr = <span class="keyword">new</span> RowtimeAttributeDescriptor(</span><br><span class="line">            <span class="string">&quot;user_action_time&quot;</span>,</span><br><span class="line">            <span class="keyword">new</span> ExistingField(<span class="string">&quot;user_action_time&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> AscendingTimestamps());</span><br><span class="line">        List&lt;RowtimeAttributeDescriptor&gt; listRowtimeAttrDescr = Collections.singletonList(rowtimeAttrDescr);</span><br><span class="line">        <span class="keyword">return</span> listRowtimeAttrDescr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// register the table source</span></span><br><span class="line">tEnv.registerTableSource(<span class="string">&quot;user_actions&quot;</span>, <span class="keyword">new</span> UserActionSource());</span><br><span class="line"></span><br><span class="line">WindowedTable windowedTable = tEnv</span><br><span class="line">    .from(<span class="string">&quot;user_actions&quot;</span>)</span><br><span class="line">    .window(Tumble.over(lit(<span class="number">10</span>).minutes()).on($(<span class="string">&quot;user_action_time&quot;</span>)).as(<span class="string">&quot;userActionWindow&quot;</span>));</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="format"><a href="#format" class="headerlink" title="format"></a>format</h3><ul><li><p>timestamp</p><p>ÂèØ‰ª•Â∞ÜÊó∂Èó¥Êà≥Á±ªÂûãÊï∞ÊçÆÊúÄÈ´òÁ≤æÁ°ÆÂæÆÁßí(Áôæ‰∏áÂàÜ‰πã‰∏ÄÁßí)ÔºåÊï∞ÊçÆÁ±ªÂûãÂÆö‰πâ‰∏∫timestamp(N),NÂèñÂÄºËåÉÂõ¥‰∏∫0-6ÔºåÈªòËÆ§‰∏∫0ÔºåÂ¶ÇÈúÄË¶ÅÁ≤æÁ°ÆÂà∞ÊØ´ÁßíÂàôËÆæÁΩÆ‰∏∫Timestamp(3)ÔºåÂ¶ÇÈúÄË¶ÅÁ≤æÁ°ÆÂà∞ÂæÆÁßíÂàôËÆæÁΩÆ‰∏∫timestamp(6)ÔºåÊï∞ÊçÆÁ≤æÂ∫¶ÊèêÈ´òÁöÑ‰ª£‰ª∑ÊòØÂÖ∂ÂÜÖÈÉ®Â≠òÂÇ®Á©∫Èó¥ÁöÑÂèòÂ§ßÔºå‰ΩÜ‰ªçÊú™ÊîπÂèòÊó∂Èó¥Êà≥Á±ªÂûãÁöÑÊúÄÂ∞èÂíåÊúÄÂ§ßÂèñÂÄºËåÉÂõ¥„ÄÇ</p></li></ul><h3 id="connector-kafka"><a href="#connector-kafka" class="headerlink" title="connector kafka"></a>connector kafka</h3><h1 id="deduplication"><a href="#deduplication" class="headerlink" title="deduplication"></a>deduplication</h1><ul><li><p>ËØ≠Ê≥ï</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [column_list]</span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line"></span><br><span class="line">   <span class="keyword">SELECT</span> [column_list],</span><br><span class="line"></span><br><span class="line">     <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> ([<span class="keyword">PARTITION</span> <span class="keyword">BY</span> col1[, col2...]]</span><br><span class="line"></span><br><span class="line">       <span class="keyword">ORDER</span> <span class="keyword">BY</span> col1 [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>][, col2 [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]...]) <span class="keyword">AS</span> rownum</span><br><span class="line"></span><br><span class="line">   <span class="keyword">FROM</span> table_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> rownum <span class="operator">&lt;=</span> N [<span class="keyword">AND</span> conditions]</span><br></pre></td></tr></table></figure><table><thead><tr><th>ÂèÇÊï∞</th><th>ËØ¥Êòé</th></tr></thead><tbody><tr><td>ROW_NUMBER()</td><td>ËÆ°ÁÆóË°åÂè∑ÁöÑOVERÁ™óÂè£ÂáΩÊï∞„ÄÇË°åÂè∑‰ªé1ÂºÄÂßãËÆ°ÁÆó„ÄÇ</td></tr><tr><td>PARTITION BY col1[, col2..]</td><td>ÂèØÈÄâ„ÄÇÊåáÂÆöÂàÜÂå∫ÁöÑÂàóÔºåÂç≥ÂéªÈáçÁöÑKEYS„ÄÇ</td></tr><tr><td>ORDER BY timeAttributeCol asc desc</td><td>ÊåáÂÆöÊéíÂ∫èÁöÑÂàóÔºåÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÁöÑÂ≠óÊÆµÔºàÂç≥ProctimeÊàñRowtimeÔºâ„ÄÇÂèØ‰ª•ÊåáÂÆöÈ°∫Â∫èÔºàKeep FirstRowÔºâÊàñËÄÖÂÄíÂ∫è ÔºàKeep LastRowÔºâ„ÄÇ</td></tr><tr><td>rownum</td><td>Â§ñÂ±ÇÊü•ËØ¢‰∏≠ÂØπÊéíÂêçËøõË°åËøáÊª§ÔºåÂè™ÂèñÂâçNÊù°</td></tr></tbody></table><ul><li>Deduplicate Keep FirstRow‰øùÁïôÈ¶ñË°åÁöÑÂéªÈáçÁ≠ñÁï•Ôºö‰øùÁïôKEY‰∏ãÁ¨¨‰∏ÄÊù°Âá∫Áé∞ÁöÑÊï∞ÊçÆÔºå‰πãÂêéÂá∫Áé∞ËØ•KEY‰∏ãÁöÑÊï∞ÊçÆ‰ºöË¢´‰∏¢ÂºÉÊéâ„ÄÇÂõ†‰∏∫STATE‰∏≠Âè™Â≠òÂÇ®‰∫ÜKEYÊï∞ÊçÆÔºåÊâÄ‰ª•ÊÄßËÉΩËæÉ‰ºò„ÄÇ</li><li>Deduplicate Keep LastRow‰øùÁïôÊú´Ë°åÁöÑÂéªÈáçÁ≠ñÁï•Ôºö‰øùÁïôKEY‰∏ãÊúÄÂêé‰∏ÄÊù°Âá∫Áé∞ÁöÑÊï∞ÊçÆ„ÄÇÂõ†Ê≠§ËøáÁ®ã‰∏≠‰ºö‰∫ßÁîüÂèòÊõ¥ÁöÑËÆ∞ÂΩïÔºå‰ºöÂêë‰∏ãÊ∏∏ÂèëÈÄÅÂèòÊõ¥ÁöÑÊ∂àÊÅØ„ÄÇÂõ†Ê≠§ÔºåsinkË°®ÈúÄË¶ÅÊîØÊåÅretractÊìç‰Ωú„ÄÇ</li></ul></li></ul><p>Âú® Deduplication ÂÖ≥‰∫éÊòØÂê¶‰ºöÂá∫Áé∞ÂõûÊí§ÊµÅ</p><ol><li>‚≠ê Order by ‰∫ã‰ª∂Êó∂Èó¥ DESCÔºö‰ºöÂá∫Áé∞ÂõûÊí§ÊµÅÔºåÂõ†‰∏∫ÂΩìÂâç key ‰∏ã <code>ÂèØËÉΩ‰ºöÊúâ</code> ÊØîÂΩìÂâç‰∫ã‰ª∂Êó∂Èó¥ËøòÂ§ßÁöÑÊï∞ÊçÆ</li><li>‚≠ê Order by ‰∫ã‰ª∂Êó∂Èó¥ ASCÔºö‰ºöÂá∫Áé∞ÂõûÊí§ÊµÅÔºåÂõ†‰∏∫ÂΩìÂâç key ‰∏ã <code>ÂèØËÉΩ‰ºöÊúâ</code> ÊØîÂΩìÂâç‰∫ã‰ª∂Êó∂Èó¥ËøòÂ∞èÁöÑÊï∞ÊçÆ</li><li>‚≠ê Order by Â§ÑÁêÜÊó∂Èó¥ DESCÔºö‰ºöÂá∫Áé∞ÂõûÊí§ÊµÅÔºåÂõ†‰∏∫ÂΩìÂâç key ‰∏ã <code>ÂèØËÉΩ‰ºöÊúâ</code> ÊØîÂΩìÂâçÂ§ÑÁêÜÊó∂Èó¥ËøòÂ§ßÁöÑÊï∞ÊçÆ</li><li>‚≠ê Order by Â§ÑÁêÜÊó∂Èó¥ ASCÔºö‰∏ç‰ºöÂá∫Áé∞ÂõûÊí§ÊµÅÔºåÂõ†‰∏∫ÂΩìÂâç key ‰∏ã <code>‰∏çÂèØËÉΩ‰ºöÊúâ</code> ÊØîÂΩìÂâçÂ§ÑÁêÜÊó∂Èó¥ËøòÂ∞èÁöÑÊï∞ÊçÆ</li></ol><hr><p>reference</p><p><a href="https://www.modb.pro/db/232004">https://www.modb.pro/db/232004</a></p><h1 id="join"><a href="#join" class="headerlink" title="join"></a>join</h1><blockquote><p>‰ΩøÁî® SQL ËøõË°åÊï∞ÊçÆÂàÜÊûêÁöÑËøáÁ®ã‰∏≠Ôºåjoin ÊòØÁªèÂ∏∏Ë¶Å‰ΩøÁî®ÁöÑÊìç‰Ωú„ÄÇ</p><p>Âú®Á¶ªÁ∫øÂú∫ÊôØ‰∏≠Ôºåjoin ÁöÑÊï∞ÊçÆÈõÜÊòØÊúâËæπÁïåÁöÑÔºåÂèØ‰ª•ÁºìÂ≠òÊï∞ÊçÆÊúâËæπÁïåÁöÑÊï∞ÊçÆÈõÜËøõË°åÊü•ËØ¢ÔºåÊúâNested Loop/Hash Join/Sort Merge Join Á≠âÂ§öË°® joinÔºõ</p><p>ËÄåÂú®ÂÆûÊó∂Âú∫ÊôØ‰∏≠Ôºåjoin ‰∏§‰æßÁöÑÊï∞ÊçÆÈÉΩÊòØÊó†ËæπÁïåÁöÑÊï∞ÊçÆÊµÅÔºåÊâÄ‰ª•ÁºìÂ≠òÊï∞ÊçÆÈõÜÂØπÈïøÊó∂Èó¥ job Êù•ËØ¥ÔºåÂ≠òÂÇ®ÂíåÊü•ËØ¢ÂéãÂäõÂæàÂ§ßÔºåÂè¶Â§ñÂèåÊµÅÁöÑÂà∞ËææÊó∂Èó¥ÂèØËÉΩ‰∏ç‰∏ÄËá¥ÔºåÈÄ†Êàê join ËÆ°ÁÆóÁªìÊûúÂáÜÁ°ÆÂ∫¶‰∏çÂ§üÔºõÂõ†Ê≠§ÔºåFlink SQL Êèê‰æõ‰∫ÜÂ§öÁßç join ÊñπÊ≥ïÔºåÊù•Â∏ÆÂä©Áî®Êà∑Â∫îÂØπÂêÑÁßç join Âú∫ÊôØ„ÄÇ</p></blockquote><h3 id="regular-join"><a href="#regular-join" class="headerlink" title="regular join"></a>regular join</h3><blockquote><p>regular join ÊòØÊúÄÈÄöÁî®ÁöÑ join Á±ªÂûãÔºå‰∏çÊîØÊåÅÊó∂Èó¥Á™óÂè£‰ª•ÂèäÊó∂Èó¥Â±ûÊÄßÔºå‰ªª‰Ωï‰∏Ä‰æßÊï∞ÊçÆÊµÅÊúâÊõ¥ÊîπÈÉΩÊòØÂèØËßÅÁöÑÔºåÁõ¥Êé•ÂΩ±ÂìçÊï¥‰∏™ join ÁªìÊûú„ÄÇÂ¶ÇÊûúÊúâ‰∏Ä‰æßÊï∞ÊçÆÊµÅÂ¢ûÂä†‰∏Ä‰∏™Êñ∞Á∫™ÂΩïÔºåÈÇ£‰πàÂÆÉÂ∞Ü‰ºöÊääÂè¶‰∏Ä‰æßÁöÑÊâÄÊúâÁöÑËøáÂéªÂíåÂ∞ÜÊù•ÁöÑÊï∞ÊçÆÂêàÂπ∂Âú®‰∏ÄËµ∑ÔºåÂõ†‰∏∫ regular join Ê≤°ÊúâÂâîÈô§Á≠ñÁï•ÔºåËøôÂ∞±ÂΩ±ÂìçÊúÄÊñ∞ËæìÂá∫ÁöÑÁªìÊûú; Ê≠£Âõ†‰∏∫ÂéÜÂè≤Êï∞ÊçÆ‰∏ç‰ºöË¢´Ê∏ÖÁêÜÔºåÊâÄ‰ª• regular join ÊîØÊåÅÊï∞ÊçÆÊµÅÁöÑ‰ªª‰ΩïÊõ¥Êñ∞Êìç‰Ωú„ÄÇ</p><p>ÂØπ‰∫é regular join Êù•ËØ¥ÔºåÊõ¥ÈÄÇÂêàÁî®‰∫éÁ¶ªÁ∫øÂú∫ÊôØÂíåÂ∞èÊï∞ÊçÆÈáèÂú∫ÊôØ„ÄÇ</p></blockquote><ul><li><p>ËØ≠Ê≥ï</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> columns</span><br><span class="line"><span class="keyword">FROM</span> t1  [<span class="keyword">AS</span> <span class="operator">&lt;</span>alias1<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">INNER</span><span class="operator">/</span><span class="keyword">FULL</span> <span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> t2</span><br><span class="line"><span class="keyword">ON</span> t1.column1 <span class="operator">=</span> t2.key<span class="operator">-</span>name1</span><br></pre></td></tr></table></figure></li></ul><h3 id="interval-join"><a href="#interval-join" class="headerlink" title="interval join"></a>interval join</h3><blockquote><p>Áõ∏ÂØπ‰∫é regular joinÔºåinterval Join ÂàôÂà©Áî®Á™óÂè£ÁöÑÁªô‰∏§‰∏™ËæìÂÖ•Ë°®ËÆæÂÆö‰∏Ä‰∏™ Join ÁöÑÊó∂Èó¥ÁïåÈôêÔºåË∂ÖÂá∫Êó∂Èó¥ËåÉÂõ¥ÁöÑÊï∞ÊçÆÂàôÂØπ join ‰∏çÂèØËßÅÂπ∂ÂèØ‰ª•Ë¢´Ê∏ÖÁêÜÊéâÔºåËøôÊ†∑Â∞±ËÉΩ‰øÆÊ≠£ regular join Âõ†‰∏∫Ê≤°ÊúâÂâîÈô§Êï∞ÊçÆÁ≠ñÁï•Â∏¶Êù• join ÁªìÊûúÁöÑËØØÂ∑Æ‰ª•ÂèäÈúÄË¶ÅÂ§ßÈáèÁöÑËµÑÊ∫ê„ÄÇ</p><p>‰ΩÜÊòØ‰ΩøÁî®interval joinÔºåÈúÄË¶ÅÂÆö‰πâÂ•ΩÊó∂Èó¥Â±ûÊÄßÂ≠óÊÆµÔºåÂèØ‰ª•ÊòØËÆ°ÁÆóÂèëÁîüÁöÑ Processing TimeÔºå‰πüÂèØ‰ª•ÊòØÊ†πÊçÆÊï∞ÊçÆÊú¨Ë∫´ÊèêÂèñÁöÑ Event TimeÔºõÂ¶ÇÊûúÊòØÂÆö‰πâÁöÑÊòØ Processing TimeÔºåÂàôFlink Ê°ÜÊû∂Êú¨Ë∫´Ê†πÊçÆÁ≥ªÁªüÂàíÂàÜÁöÑÊó∂Èó¥Á™óÂè£ÂÆöÊó∂Ê∏ÖÁêÜÊï∞ÊçÆÔºõÂ¶ÇÊûúÂÆö‰πâÁöÑÊòØ Event TimeÔºåFlink Ê°ÜÊû∂ÂàÜÈÖç Event Time Á™óÂè£Âπ∂Ê†πÊçÆËÆæÁΩÆÁöÑ watermark Êù•Ê∏ÖÁêÜÊï∞ÊçÆ„ÄÇ</p></blockquote><ul><li><p>ËØ≠Ê≥ï1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> columns</span><br><span class="line"><span class="keyword">FROM</span> t1  [<span class="keyword">AS</span> <span class="operator">&lt;</span>alias1<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">INNER</span><span class="operator">/</span><span class="keyword">FULL</span> <span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> t2</span><br><span class="line"><span class="keyword">ON</span> t1.column1 <span class="operator">=</span> t2.key<span class="operator">-</span>name1 <span class="keyword">AND</span> t1.timestamp <span class="keyword">BETWEEN</span> t2.timestamp  <span class="keyword">AND</span>  <span class="keyword">BETWEEN</span> t2.timestamp <span class="operator">+</span> <span class="operator">+</span> <span class="type">INTERVAL</span> <span class="string">&#x27;10&#x27;</span> <span class="keyword">MINUTE</span>;</span><br></pre></td></tr></table></figure></li><li><p>ËØ≠Ê≥ï2</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> columns</span><br><span class="line"><span class="keyword">FROM</span> t1  [<span class="keyword">AS</span> <span class="operator">&lt;</span>alias1<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">INNER</span><span class="operator">/</span><span class="keyword">FULL</span> <span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> t2</span><br><span class="line"><span class="keyword">ON</span> t1.column1 <span class="operator">=</span> t2.key<span class="operator">-</span>name1 <span class="keyword">AND</span> t2.timestamp <span class="operator">&lt;=</span> t1.timestamp <span class="keyword">and</span> t1.timestamp <span class="operator">&lt;=</span>  t2.timestamp <span class="operator">+</span> <span class="operator">+</span> <span class="type">INTERVAL</span> ‚Äô<span class="number">10</span><span class="string">&#x27; MINUTE ;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="temproal-table-join"><a href="#temproal-table-join" class="headerlink" title="temproal table join"></a>temproal table join</h3><blockquote><p>interval Join Êèê‰æõ‰∫ÜÂâîÈô§Êï∞ÊçÆÁöÑÁ≠ñÁï•ÔºåËß£ÂÜ≥ËµÑÊ∫êÈóÆÈ¢ò‰ª•ÂèäËÆ°ÁÆóÊõ¥Âä†ÂáÜÁ°ÆÔºåËøôÊòØÊúâ‰∏™ÂâçÊèêÔºöjoin ÁöÑ‰∏§‰∏™ÊµÅÈúÄË¶ÅÊó∂Èó¥Â±ûÊÄßÔºåÈúÄË¶ÅÊòéÁ°ÆÊó∂Èó¥ÁöÑ‰∏ãÁïåÔºåÊù•Êñπ‰æøÂâîÈô§Êï∞ÊçÆÔºõ</p><p>ÊòæÁÑ∂ÔºåËøôÁßçÂú∫ÊôØ‰∏çÈÄÇÂêàÁª¥Â∫¶Ë°®ÁöÑ joinÔºåÂõ†‰∏∫Áª¥Â∫¶Ë°®Ê≤°ÊúâÊó∂Èó¥ÁïåÈôêÔºåÂØπ‰∫éËøôÁßçÂú∫ÊôØÔºåFlink Êèê‰æõ‰∫Ü temproal table join Êù•Ë¶ÜÁõñÊ≠§Á±ªÂú∫ÊôØ„ÄÇ</p><p>Âú® regular joinÂíåinterval join‰∏≠Ôºåjoin ‰∏§‰æßÁöÑË°®ÊòØÂπ≥Á≠âÁöÑÔºå‰ªªÊÑèÁöÑ‰∏Ä‰∏™Ë°®ÁöÑÊõ¥Êñ∞ÔºåÈÉΩ‰ºöÂéªÂíåÂè¶Â§ñÁöÑÂéÜÂè≤Á∫™ÂΩïËøõË°åÂåπÈÖçÔºåtemproal table ÁöÑÊõ¥Êñ∞ÂØπÂè¶‰∏ÄË°®Âú®ËØ•Êó∂Èó¥ËäÇÁÇπ‰ª•ÂâçÁöÑËÆ∞ÂΩïÊòØ‰∏çÂèØËßÅÁöÑ„ÄÇ</p></blockquote><ul><li><p>ËØ≠Ê≥ï</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> columns</span><br><span class="line"><span class="keyword">FROM</span> t1  [<span class="keyword">AS</span> <span class="operator">&lt;</span>alias1<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">LEFT</span>] <span class="keyword">JOIN</span> t2 <span class="keyword">FOR</span> <span class="built_in">SYSTEM_TIME</span> <span class="keyword">AS</span> <span class="keyword">OF</span> t1.proctime [<span class="keyword">AS</span> <span class="operator">&lt;</span>alias2<span class="operator">&gt;</span>]</span><br><span class="line"><span class="keyword">ON</span> t1.column1 <span class="operator">=</span> t2.key<span class="operator">-</span>name1</span><br></pre></td></tr></table></figure></li></ul><h3 id="lookup-join"><a href="#lookup-join" class="headerlink" title="lookup join"></a>lookup join</h3><ul><li>Áª¥Ë°®ÂøÖÈ°ªÊåáÂÆö‰∏ªÈîÆ„ÄÇÁª¥Ë°®JOINÊó∂ÔºåONÁöÑÊù°‰ª∂ÂøÖÈ°ªÂåÖÂê´ÊâÄÊúâ‰∏ªÈîÆÁöÑÁ≠âÂÄºÊù°‰ª∂</li></ul><hr><p>reference:</p><p><a href="https://developer.aliyun.com/article/780048?accounttraceid=dd5fdbf3eed04f6185ed6461d8a33012zihq">Flink SQL ÂÆûÊàòÔºöÂèåÊµÅ join Âú∫ÊôØÂ∫îÁî®-ÈòøÈáå‰∫ëÂºÄÂèëËÄÖÁ§æÂå∫</a></p><p><a href="https://www.liangzl.com/get-article-detail-114889.html">Flink SQL ÂäüËÉΩËß£ÂØÜÁ≥ªÂàó ‚Äî‚Äî Áª¥Ë°® JOIN ‰∏éÂºÇÊ≠•‰ºòÂåñ</a></p><h1 id="watermark"><a href="#watermark" class="headerlink" title="watermark"></a>watermark</h1><p>WatermarkÊòØApache Flink‰∏∫‰∫ÜÂ§ÑÁêÜEventTime Á™óÂè£ËÆ°ÁÆóÊèêÂá∫ÁöÑ‰∏ÄÁßçÊú∫Âà∂,Êú¨Ë¥®‰∏ä‰πüÊòØ‰∏ÄÁßçÊó∂Èó¥Êà≥„ÄÇ</p><p>Áî±Apache Flink SourceÊàñËÄÖËá™ÂÆö‰πâÁöÑWatermarkÁîüÊàêÂô®ÊåâÁÖßÈúÄÊ±ÇPunctuatedÊàñËÄÖPeriodic‰∏§ÁßçÊñπÂºèÁîüÊàêÁöÑ‰∏ÄÁßçÁ≥ªÁªüEventÔºå‰∏éÊôÆÈÄöÊï∞ÊçÆÊµÅEvent‰∏ÄÊ†∑ÊµÅËΩ¨Âà∞ÂØπÂ∫îÁöÑ‰∏ãÊ∏∏ÁÆóÂ≠êÔºåÊé•Êî∂Âà∞Watermark EventÁöÑÁÆóÂ≠ê‰ª•Ê≠§‰∏çÊñ≠Ë∞ÉÊï¥Ëá™Â∑±ÁÆ°ÁêÜÁöÑEventTime clock„ÄÇ</p><p>Apache Flink Ê°ÜÊû∂‰øùËØÅWatermarkÂçïË∞ÉÈÄíÂ¢ûÔºåÁÆóÂ≠êÊé•Êî∂Âà∞‰∏Ä‰∏™WatermarkÊó∂ÂÄôÔºåÊ°ÜÊû∂Áü•ÈÅì‰∏ç‰ºöÂÜçÊúâ‰ªª‰ΩïÂ∞è‰∫éËØ•WatermarkÁöÑÊó∂Èó¥Êà≥ÁöÑÊï∞ÊçÆÂÖÉÁ¥†Âà∞Êù•‰∫ÜÔºåÊâÄ‰ª•WatermarkÂèØ‰ª•ÁúãÂÅöÊòØÂëäËØâApache FlinkÊ°ÜÊû∂Êï∞ÊçÆÊµÅÂ∑≤ÁªèÂ§ÑÁêÜÂà∞‰ªÄ‰πà‰ΩçÁΩÆ(Êó∂Èó¥Áª¥Â∫¶)ÁöÑÊñπÂºè„ÄÇ</p><p>WatermarkÁöÑ‰∫ßÁîüÂíåApache FlinkÂÜÖÈÉ®Â§ÑÁêÜÈÄªËæëÂ¶Ç‰∏ãÂõæÊâÄÁ§∫:</p><p><img src="/images/flink/flink_watermark.png"></p><h3 id="‰∫ßÁîüÊñπÂºè"><a href="#‰∫ßÁîüÊñπÂºè" class="headerlink" title="‰∫ßÁîüÊñπÂºè"></a>‰∫ßÁîüÊñπÂºè</h3><ul><li><p>Punctuated - Êï∞ÊçÆÊµÅ‰∏≠ÊØè‰∏Ä‰∏™ÈÄíÂ¢ûÁöÑEventTimeÈÉΩ‰ºö‰∫ßÁîü‰∏Ä‰∏™Watermark„ÄÇ Âú®ÂÆûÈôÖÁöÑÁîü‰∫ß‰∏≠PunctuatedÊñπÂºèÂú®TPSÂæàÈ´òÁöÑÂú∫ÊôØ‰∏ã‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑWatermarkÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂØπ‰∏ãÊ∏∏ÁÆóÂ≠êÈÄ†ÊàêÂéãÂäõÔºåÊâÄ‰ª•Âè™ÊúâÂú®ÂÆûÊó∂ÊÄßË¶ÅÊ±ÇÈùûÂ∏∏È´òÁöÑÂú∫ÊôØÊâç‰ºöÈÄâÊã©PunctuatedÁöÑÊñπÂºèËøõË°åWatermarkÁöÑÁîüÊàê„ÄÇ</p></li><li><p>Periodic - Âë®ÊúüÊÄßÁöÑÔºà‰∏ÄÂÆöÊó∂Èó¥Èó¥ÈöîÊàñËÄÖËææÂà∞‰∏ÄÂÆöÁöÑËÆ∞ÂΩïÊù°Êï∞Ôºâ‰∫ßÁîü‰∏Ä‰∏™Watermark„ÄÇÂú®ÂÆûÈôÖÁöÑÁîü‰∫ß‰∏≠PeriodicÁöÑÊñπÂºèÂøÖÈ°ªÁªìÂêàÊó∂Èó¥ÂíåÁßØÁ¥ØÊù°Êï∞‰∏§‰∏™Áª¥Â∫¶ÁªßÁª≠Âë®ÊúüÊÄß‰∫ßÁîüWatermarkÔºåÂê¶ÂàôÂú®ÊûÅÁ´ØÊÉÖÂÜµ‰∏ã‰ºöÊúâÂæàÂ§ßÁöÑÂª∂Êó∂„ÄÇ</p></li></ul><h1 id="upsert-kafka"><a href="#upsert-kafka" class="headerlink" title="upsert kafka"></a>upsert kafka</h1><p>The Kafka connector in Flink SQL can work in two streaming modes. </p><p><strong>Upsert mode</strong> allows us to get the latest value for a specific entity automatically without any manual deduplication. One of the typical scenarios where you can leverage this mode is a SQL join of two tables, where one of the tables is keeping history of changes per some entity id. Once you join on such an entity id which is non-unique by design, you get unwanted rows, but you usually want to see the latest value of that entity. With upsert mode, Flink automatically normalizes before the tables are joined. Eventually it allows you to easily answer typical business questions on getting a real-time view of the shared resources like cars, planes, workers, etc.</p><p><strong>Append mode</strong> is still an option to go with, if a business query does not need to filter out all historical events, but rather show the history of changes at the end. In this scenario, query may run faster with append mode, as Flink does not need to do any changelog normalization.</p><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><ul><li><p>upsert-kafka ÂèØ‰ª•ÈÖçÂêà checkpoint‰ΩøÁî®ÔºåËøôÊ†∑‰∏çÈúÄË¶ÅÂÜç‰ªéÂ§¥Ê∂àË¥π‰πãÂâçÁöÑÊï∞ÊçÆ</p></li><li><p>Â¶ÇÊûúkafka‰∏≠keyÊ≤°ÊúâÂÄºÔºåÊòØ‰∏çÁ¨¶Âêàupsert-kafkaÁöÑÊ†ºÂºèÁöÑÔºåflink sqlÂºïÁî®Ê≠§Á±ªtopic‰∏∫upsert-kafkaÔºåÂàô‰∏ç‰ºöËß¶ÂèëËÆ°ÁÆó</p></li></ul><h2 id="deduplication-1"><a href="#deduplication-1" class="headerlink" title="deduplication"></a>deduplication</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [column_list]</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> [column_list],</span><br><span class="line">     <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> ([<span class="keyword">PARTITION</span> <span class="keyword">BY</span> col1[, col2...]]</span><br><span class="line">       <span class="keyword">ORDER</span> <span class="keyword">BY</span> time_attr [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]) <span class="keyword">AS</span> rownum</span><br><span class="line">   <span class="keyword">FROM</span> table_name)</span><br><span class="line"><span class="keyword">WHERE</span> rownum <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><ul><li>Ê≥®ÊÑè Âú®ÂÜÖÂµåÁöÑ selectËØ≠Âè•‰∏≠ÔºåÂª∫ËÆÆ‰ΩøÁî® column_list Êü•ËØ¢ÊåáÂÆöÁöÑÂ≠óÊÆµÔºå‰∏çË¶Å‰ΩøÁî® * ‰ª£ÊåáÊâÄÊúâÊåáÊ†á„ÄÇÂê¶ÂàôÊü•ËØ¢upsert-kafka‰ºöÔºå‰∏ÄÁõ¥‰ªéÊúÄÊñ∞ÁöÑËÆ∞ÂΩïËØªÂèñ„ÄÇ</li></ul>]]></content>
      
      
      <categories>
          
          <category> flink </category>
          
      </categories>
      
      
        <tags>
            
            <tag> point </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hive snippet</title>
      <link href="/2022/01/04/hive%20snippet/"/>
      <url>/2022/01/04/hive%20snippet/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Hive-siteÈáåÈù¢ÁöÑÈÖçÁΩÆÔºÅÔºÅÔºÅ</p></blockquote><h2 id="level-1"><a href="#level-1" class="headerlink" title="level-1"></a>level-1</h2><h3 id="get-started"><a href="#get-started" class="headerlink" title="get started"></a>get started</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup hive --service metastore &amp;</span><br><span class="line">nohup hive --service hiveserver2 &amp;</span><br></pre></td></tr></table></figure><h3 id="beeline"><a href="#beeline" class="headerlink" title="beeline"></a>beeline</h3><p>1Ôºâmetadata ÔºöhiveÂÖÉÊï∞ÊçÆÔºåÂç≥hiveÂÆö‰πâÁöÑË°®ÂêçÔºåÂ≠óÊÆµÂêçÔºåÁ±ªÂûãÔºåÂàÜÂå∫ÔºåÁî®Êà∑Ëøô‰∫õÊï∞ÊçÆ„ÄÇ‰∏ÄËà¨Â≠òÂÇ®ÂÖ≥Á≥ªÂûã‰π¶Â∫ìmysql‰∏≠ÔºåÂú®ÊµãËØïÈò∂ÊÆµ‰πüÂèØ‰ª•Áî®hiveÂÜÖÁΩÆDerbyÊï∞ÊçÆÂ∫ì„ÄÇ</p><p>Ôºà2Ôºâmetastore ÔºöhivestoreÊúçÂä°Á´Ø„ÄÇ‰∏ªË¶ÅÊèê‰æõÂ∞ÜDDLÔºåDMLÁ≠âËØ≠Âè•ËΩ¨Êç¢‰∏∫MapReduceÔºåÊèê‰∫§Âà∞hdfs‰∏≠„ÄÇ</p><p>Ôºà3Ôºâhiveserver2ÔºöhiveÊúçÂä°Á´Ø„ÄÇÊèê‰æõhiveÊúçÂä°„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈÄöËøábeelineÔºåjdbcÔºàÂç≥Áî®java‰ª£Á†ÅÈìæÊé•ÔºâÁ≠âÂ§öÁßçÊñπÂºèÈìæÊé•Âà∞hive„ÄÇ</p><p>Ôºà4ÔºâbeelineÔºöhiveÂÆ¢Êà∑Á´ØÈìæÊé•Âà∞hiveÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑„ÄÇÂèØ‰ª•ÁêÜËß£ÊàêmysqlÁöÑÂÆ¢Êà∑Á´Ø„ÄÇÂ¶ÇÔºönavite cat Á≠â„ÄÇ</p><p><img src="https://img-blog.csdnimg.cn/20191122115956341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDQwMDQw,size_16,color_FFFFFF,t_70"></p><p>2 ËøûÊé•hiveÔºö<br>Ôºà1Ôºâ./bin/hive<br>ÈÄöËøá ./bin/hive ÂêØÂä®ÁöÑhiveÊúçÂä°ÔºåÁ¨¨‰∏ÄÊ≠•‰ºöÂÖàÂêØÂä®metastoreÊúçÂä°ÔºåÁÑ∂ÂêéÂú®ÂêØÂä®‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•Âà∞metastore„ÄÇÊ≠§Êó∂metastoreÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÈÉΩÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÂà´ÁöÑÊú∫Âô®Êó†Ê≥ïËøûÊé•Âà∞metastoreÔºåÊâÄ‰ª•‰πüÊó†Ê≥ïËøûÊé•Âà∞hive„ÄÇËøôÁßçÊñπÂºè‰∏çÂ∏∏Áî®Ôºå‰∏ÄÁõ¥Âè™Áî®‰∫éË∞ÉËØïÁéØËäÇ„ÄÇ</p><p>Ôºà2Ôºâ ./bin/hive  ‚Äìservice metastore<br><strong>ÈÄöËøáhive ‚Äìservice metastore ‰ºöÂêØÂä®‰∏Ä‰∏™ hive metastoreÊúçÂä°ÈªòËÆ§ÁöÑÁ´ØÂè£Âè∑‰∏∫Ôºö9083„ÄÇmetastoreÊúçÂä°ÈáåÈù¢ÈÖçÁΩÆmetadataÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ„ÄÇÊ≠§Êó∂ÂèØ‰ª•ÊúâÂ§ö‰∏™hiveÂÆ¢Êà∑Á´ØÂú®hive-site.xmlÈÖçÁΩÆhive.metastore.uris=thrift://ipxxx:9083  ÁöÑÊñπÂºèÈìæÊé•Âà∞hive„ÄÇmotestore ËôΩÁÑ∂ËÉΩ‰ΩøhiveÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÂàÜÂà´ÈÉ®ÁΩ≤Âà∞‰∏çÂêåÁöÑËäÇÁÇπÔºåÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÂÖ≥Ê≥®metadataÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇ‰ΩÜÊòØmetastoreÂè™ËÉΩÈÄöËøáÂè™ËÉΩÈÄöËøáÈÖçÁΩÆhive.metastore.urisÁöÑÊñπÂºèËøûÊé•ÔºåÊó†Ê≥ïÈÄöËøájdbcÁöÑÊñπÂºèËÆøÈóÆ„ÄÇ</strong></p><p>Ôºà3Ôºâ./bin/hiveserver2<br>hiveserver2 ‰ºöÂêØÂä®‰∏Ä‰∏™hiveÊúçÂä°Á´ØÈªòËÆ§Á´ØÂè£‰∏∫Ôºö10000ÔºåÂèØ‰ª•ÈÄöËøábeelineÔºåjdbcÔºåodbcÁöÑÊñπÂºèÈìæÊé•Âà∞hive„ÄÇ<strong>hiveserver2ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöÂÖàÊ£ÄÊü•ÊúâÊ≤°ÊúâÈÖçÁΩÆhive.metastore.urisÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ºöÂÖàÂêØÂä®‰∏Ä‰∏™metastoreÊúçÂä°ÔºåÁÑ∂ÂêéÂú®ÂêØÂä®hiveserver2„ÄÇÂ¶ÇÊûúÊúâÈÖçÁΩÆhive.metastore.uris„ÄÇ‰ºöËøûÊé•Âà∞ËøúÁ®ãÁöÑmetastoreÊúçÂä°„ÄÇËøôÁßçÊñπÂºèÊòØÊúÄÂ∏∏Áî®ÁöÑ„ÄÇ</strong>ÈÉ®ÁΩ≤Âú®ÂõæÂ¶Ç‰∏ãÔºö</p><ul><li>ÁôªÂΩïbin/beelineÔºåÂèØ‰ª•ÂêØÂä®ÂÆ¢Êà∑Á´ØÈìæÊé•Âà∞hiveserver2„ÄÇÊâßË°åbeelineÂêéÂú®ÊéßÂà∂ËæìÂÖ•¬†!connect jdbc:hive2://localhost:10000/default¬†root 123 Â∞±ÂèØ‰ª•ÈìæÊé•Âà∞¬†hiveserver2‰∫ÜÔºõdefaultË°®Á§∫ÈìæÊé•Âà∞default databaseÔºå root Âíå123 ÂàÜÂà´‰∏∫ÂØÜÁ†Å„ÄÇÊ≥®ÊÑèËøôÈáåÁöÑÂØÜÁ†Å‰∏çÊòØmysqlÁöÑÂØÜÁ†ÅÔºåÊòØhive‰∏≠ÁöÑÁî®Êà∑</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ËøûÊé•Â∫ì</span><br><span class="line">!connect jdbc:hive2://localhost:10000/default¬†root 123</span><br></pre></td></tr></table></figure><h3 id="hive‰∏≠Âá†ÁßçÂàÜÂâ≤Á¨¶"><a href="#hive‰∏≠Âá†ÁßçÂàÜÂâ≤Á¨¶" class="headerlink" title="hive‰∏≠Âá†ÁßçÂàÜÂâ≤Á¨¶"></a>hive‰∏≠Âá†ÁßçÂàÜÂâ≤Á¨¶</h3><p><strong>ÂàÜÈöîÁ¨¶</strong></p><p>\n    ÊØèË°å‰∏ÄÊù°ËÆ∞ÂΩï<br>^A    ÂàÜÈöîÂàóÔºàÂÖ´ËøõÂà∂ \001Ôºâ<br>^B    ÂàÜÈöîARRAYÊàñËÄÖSTRUCT‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÊàñËÄÖMAP‰∏≠Â§ö‰∏™ÈîÆÂÄºÂØπ‰πãÈó¥ÂàÜÈöîÔºàÂÖ´ËøõÂà∂ \002Ôºâ<br>^C    ÂàÜÈöîMAP‰∏≠ÈîÆÂÄºÂØπÁöÑ‚ÄúÈîÆ‚ÄùÂíå‚ÄúÂÄº‚ÄùÔºàÂÖ´ËøõÂà∂ \003Ôºâ</p><p><strong>Áî®Âà∞‰∫ÜÁ≥ªÁªüÈªòËÆ§ÂàÜÈöîÁ¨¶„ÄÇÈÄöÂ∏∏‰∏ãÈù¢2‰∏≠ÊÉÖÂÜµÊàë‰ª¨ÈúÄË¶ÅÈúÄË¶ÅÁî®Âà∞ÂàÜÈöîÁ¨¶</strong></p><p>1ÔºåÂà∂‰ΩútableÁöÑËæìÂÖ•Êñá‰ª∂ÔºåÊúâÊó∂ÂÄôÊàë‰ª¨ÈúÄË¶ÅËæìÂÖ•‰∏Ä‰∫õÁâπÊÆäÁöÑÂàÜÈöîÁ¨¶</p><p>2ÔºåÊäähiveË°®Ê†ºÂØºÂá∫Âà∞Êú¨Âú∞Êó∂ÔºåÁ≥ªÁªüÈªòËÆ§ÁöÑÂàÜÈöîÁ¨¶ÊòØ^AÔºåËøô‰∏™ÊòØÁâπÊÆäÂ≠óÁ¨¶ÔºåÁõ¥Êé•catÊàñËÄÖvimÊòØÁúã‰∏çÂà∞ÁöÑ</p><p><strong>ÂàÜÈöîÁ¨¶Âú®HIVE‰∏≠ÁöÑÁî®ÈÄî</strong></p><table><thead><tr><th>ÂàÜÈöîÁ¨¶</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td>\n</td><td>ÂØπ‰∫éÊñáÊú¨Êñá‰ª∂Êù•ËØ¥ÔºåÊØèË°åÈÉΩÊòØ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÂõ†Ê≠§Êç¢Ë°åÁ¨¶ÂèØ‰ª•ÂàÜÈöîËÆ∞ÂΩï</td></tr><tr><td>^A(Ctrl+A)</td><td>Áî®‰∫éÂàÜÈöîÂ≠óÊÆµ(Âàó)„ÄÇÂú®CREATE TABLEËØ≠Âè•‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂÖ´ËøõÂà∂ÁºñÁ†Å\001Ë°®Á§∫</td></tr><tr><td>^B(Ctrl+B)</td><td>Áî®‰∫éÂàÜÈöîARRAYÊàñËÄÖSTRUCT‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÊàñÁî®‰∫éMAP‰∏≠ÈîÆ-ÂÄºÂØπ‰πãÈó¥ÁöÑÂàÜÈöî„ÄÇÂú®CREATE TABLEËØ≠Âè•‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂÖ´ËøõÂà∂ÁºñÁ†Å\002Ë°®Á§∫</td></tr><tr><td>^C(Ctrl+C)</td><td>Áî®‰∫éMAP‰∏≠ÈîÆÂíåÂÄº‰πãÈó¥ÁöÑÂàÜÈöî„ÄÇÂú®CREATE TABLEËØ≠Âè•‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂÖ´ËøõÂà∂ÁºñÁ†Å\003Ë°®Á§∫</td></tr></tbody></table><blockquote><p>Hive ‰∏≠Ê≤°ÊúâÂÆö‰πâ‰∏ìÈó®ÁöÑÊï∞ÊçÆÊ†ºÂºèÔºåÊï∞ÊçÆÊ†ºÂºèÂèØ‰ª•Áî±Áî®Êà∑ÊåáÂÆöÔºåÁî®Êà∑ÂÆö‰πâÊï∞ÊçÆÊ†ºÂºèÈúÄË¶ÅÊåáÂÆö‰∏â‰∏™Â±ûÊÄßÔºöÂàóÂàÜÈöîÁ¨¶ÔºàÈÄöÂ∏∏‰∏∫Á©∫Ê†º„ÄÅ‚Äù\t‚Äù„ÄÅ‚Äù\x001‚Ä≥Ôºâ„ÄÅË°åÂàÜÈöîÁ¨¶Ôºà‚Äù\n‚ÄùÔºâ‰ª•ÂèäËØªÂèñÊñá‰ª∂Êï∞ÊçÆÁöÑÊñπÊ≥ï„ÄÇÁî±‰∫éÂú®Âä†ËΩΩÊï∞ÊçÆÁöÑËøáÁ®ã‰∏≠Ôºå‰∏çÈúÄË¶Å‰ªéÁî®Êà∑Êï∞ÊçÆÊ†ºÂºèÂà∞ Hive ÂÆö‰πâÁöÑÊï∞ÊçÆÊ†ºÂºèÁöÑËΩ¨Êç¢ÔºåÂõ†Ê≠§ÔºåHive Âú®Âä†ËΩΩÁöÑËøáÁ®ã‰∏≠‰∏ç‰ºöÂØπÊï∞ÊçÆÊú¨Ë∫´ËøõË°å‰ªª‰Ωï‰øÆÊîπÔºåËÄåÂè™ÊòØÂ∞ÜÊï∞ÊçÆÂÜÖÂÆπÂ§çÂà∂ÊàñËÄÖÁßªÂä®Âà∞Áõ∏Â∫îÁöÑ HDFS ÁõÆÂΩï‰∏≠„ÄÇ</p></blockquote><p>Êàë‰ª¨ÂèØ‰ª•Âú®createË°®Ê†ºÁöÑÊó∂ÂÄôÔºåÈÄâÊã©Â¶Ç‰∏ãÔºåË°®Ê†ºÂä†ËΩΩinputÁöÑÊñá‰ª∂ÁöÑÊó∂ÂÄôÂ∞±‰ºöÊåâÁÖß‰∏ãÈù¢Ê†ºÂºèÂåπÈÖç</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">row format delimited </span><br><span class="line">fields terminated by &#x27;\001&#x27; </span><br><span class="line">collection items terminated by &#x27;\002&#x27; </span><br><span class="line">map keys terminated by &#x27;\003&#x27;</span><br><span class="line">lines terminated by &#x27;\n&#x27; </span><br><span class="line">stored as textfile;</span><br></pre></td></tr></table></figure><h3 id="Â¶Ç‰ΩïÊü•ÁúãÂíå‰øÆÊîπÂàÜÂâ≤Á¨¶ÔºåÁâπÊÆäÁ¨¶Âè∑"><a href="#Â¶Ç‰ΩïÊü•ÁúãÂíå‰øÆÊîπÂàÜÂâ≤Á¨¶ÔºåÁâπÊÆäÁ¨¶Âè∑" class="headerlink" title="Â¶Ç‰ΩïÊü•ÁúãÂíå‰øÆÊîπÂàÜÂâ≤Á¨¶ÔºåÁâπÊÆäÁ¨¶Âè∑"></a>Â¶Ç‰ΩïÊü•ÁúãÂíå‰øÆÊîπÂàÜÂâ≤Á¨¶ÔºåÁâπÊÆäÁ¨¶Âè∑</h3><ol><li>Êü•ÁúãÈöêËóèÂ≠óÁ¨¶ÁöÑÊñπÊ≥ï</li></ol><p>1.1Ôºåcat -A filename</p><p><img src="http://image.okcode.net/26FFE1BCC5620E19E94B26122C71BA2E.png" alt="img"></p><p>1.2Ôºåvim filenameÂêé ÂëΩ‰ª§Ê®°Âºè‰∏ãËæìÂÖ•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set listÊòæÁ§∫ÁâπÊÆäÁ¨¶Âè∑</span><br><span class="line">set nolist ÂèñÊ∂àÊòæÁ§∫ÁâπÊÆäÁ¨¶Âè∑</span><br></pre></td></tr></table></figure><ol start="2"><li>‰øÆÊîπÈöêËóèÂ≠óÁ¨¶ÁöÑÊñπÊ≥ï</li></ol><p>È¶ñÂÖàÊåâÁÖß1.2ÊâìÂºÄÊòæÁ§∫ÁâπÊÆäÁ¨¶Âè∑„ÄÇËøõÂÖ•INSERTÊ®°Âºè</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ctrl + V ÂèØ‰ª•ËæìÂÖ• ^Á¨¶Âè∑</span><br><span class="line">ctrl + a ÂèØ‰ª•ËæìÂÖ•A---&#x27;\001&#x27;</span><br><span class="line">ctrl + b ÂèØ‰ª•ËæìÂÖ•A---&#x27;\002&#x27;</span><br><span class="line">ctrl + c ÂèØ‰ª•ËæìÂÖ•A---&#x27;\003&#x27;</span><br></pre></td></tr></table></figure><p> Ê≥®ÊÑèÔºöËôΩÁÑ∂ÈîÆÁõò‰∏ä‰Ω†ËÉΩÊâæÂà∞^ÂíåA‰ΩÜÁõ¥Êé•ËæìÂÖ•Êó∂‰∏çË°åÁöÑÔºåÂøÖÈ°ªÊåâÁÖß‰∏äÈù¢ÁöÑÊñπÊ≥ïËæìÂÖ•„ÄÇ</p><p>Á¨¨‰∏ÄË°åÊòØÁâπÊÆäÁ¨¶Âè∑È¢úËâ≤ËìùËâ≤ÔºåÁ¨¨‰∫åË°åÁõ¥Êé•ËæìÂÖ•‰∏çÊòØÁâπÊÆäÁ¨¶Âè∑„ÄÇ</p><p><img src="http://image.okcode.net/DD9ED976ABB6F4313B8F0F7C2DD5C33E.png" alt="img"></p><p>ÁâπÊÆäÂè∑Áõ¥Êé•catÊòØ‰∏çÂèØ‰ª•ÁúãËßÅÁöÑÔºå‰ΩÜÊòØÁ¨¨‰∫åË°åÊòØÂèØËßÅÁöÑÔºåÊâÄ‰ª•‰∏çÊòØÁâπÊÆäÁ¨¶Âè∑„ÄÇ</p><p><img src="http://image.okcode.net/75D96F800A1815F7A84A8CF543BD7063.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ROW FORMAT DELIMITED </span><br><span class="line">FIELDS TERMINATED BY &#x27;\u0001&#x27; </span><br><span class="line">COLLECTION ITEMS TERMINATED BY &#x27;\u0002&#x27; </span><br><span class="line">MAP KEYS TERMINATED BY &#x27;\u0003&#x27;</span><br><span class="line">\u0001ÊòØASCIIÁºñÁ†ÅÂÄºÔºåÂØπÂ∫îjava‰ª£Á†Å‰∏≠ÁöÑ&quot;\001&quot;</span><br></pre></td></tr></table></figure><p>ÊÑè‰πâÂ¶Ç‰∏ãÔºö</p><p>Ôºà1ÔºâFIELDSÔºåÂ≠óÊÆµ‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶ÊòØ‚Äô\u0001‚Äô</p><p>Ôºà2ÔºâCOLLECTION ITEMSÔºåÂ§ö‰∏™ÈõÜÂêà‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶ÊòØ‚Äô\u0002‚ÄôÔºå‰æãÂ¶ÇÔºàkv1Ôºåkv2Ôºåkv3ÔºâËøôÁßçÂ§ö‰∏™ÈîÆÂÄºÂØπ‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶Â∞±ÊòØ‚Äô\u0002‚Äô</p><p>Ôºà3ÔºâMAP KEYSÔºåÂçï‰∏™mapÁöÑkÂíåv‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶ÊòØ\u0003\Ôºå‰æãÂ¶Çkv1ÈáåÔºåk \u0003 v</p><h3 id="Êü•ÁúãorcÊñá‰ª∂"><a href="#Êü•ÁúãorcÊñá‰ª∂" class="headerlink" title="Êü•ÁúãorcÊñá‰ª∂"></a>Êü•ÁúãorcÊñá‰ª∂</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --orcfiledump &lt;hdfs-location-of-orc-file&gt;</span><br></pre></td></tr></table></figure><h3 id="‰øÆÊîπÂ≠óÊÆµÁ±ªÂûã"><a href="#‰øÆÊîπÂ≠óÊÆµÁ±ªÂûã" class="headerlink" title="‰øÆÊîπÂ≠óÊÆµÁ±ªÂûã"></a>‰øÆÊîπÂ≠óÊÆµÁ±ªÂûã</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span><span class="keyword">table</span><span class="operator">-</span>name<span class="operator">&gt;</span> CHANGE <span class="operator">&lt;</span><span class="keyword">old</span><span class="operator">-</span>col<span class="operator">-</span>name<span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="keyword">new</span><span class="operator">-</span>col<span class="operator">-</span>name<span class="operator">&gt;</span> <span class="operator">&lt;</span>data<span class="operator">-</span>type<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee CHANGE e_id e_id <span class="type">INT</span>;</span><br></pre></td></tr></table></figure><h3 id="Âª∫Ë°®"><a href="#Âª∫Ë°®" class="headerlink" title="Âª∫Ë°®"></a>Âª∫Ë°®</h3><ul><li><p>Create ORC table</p></li><li><p>Login to the web console</p></li><li><p>Launch Hive by typing <code>hive</code> in the web console. Run the below commands in Hive.</p></li><li><p>Use your database by using the below command. <code>$&#123;env:USER&#125;</code> gets replaced by your username automatically:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use $&#123;env:USER&#125;;</span><br></pre></td></tr></table></figure></li><li><p>To create an ORC file format:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE orc_table (</span><br><span class="line">    first_name STRING, </span><br><span class="line">    last_name STRING</span><br><span class="line"> ) </span><br><span class="line"> STORED AS ORC;</span><br></pre></td></tr></table></figure></li><li><p>To insert values in the table:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO orc_table VALUES (&#x27;John&#x27;,&#x27;Gill&#x27;);</span><br></pre></td></tr></table></figure></li><li><p>To retrieve all the values in the table:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM orc_table;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ÂÖ∂ÂÆÉ"><a href="#ÂÖ∂ÂÆÉ" class="headerlink" title="ÂÖ∂ÂÆÉ"></a>ÂÖ∂ÂÆÉ</h3><p>Êü•ÁúãhiveËøõÁ®ã</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps -ml  | grep Hive</span><br></pre></td></tr></table></figure><h2 id="level-2"><a href="#level-2" class="headerlink" title="level-2"></a>level-2</h2><h3 id="ÂÜÖÈÉ®Ë°®vsÂ§ñÈÉ®Ë°®"><a href="#ÂÜÖÈÉ®Ë°®vsÂ§ñÈÉ®Ë°®" class="headerlink" title="ÂÜÖÈÉ®Ë°®vsÂ§ñÈÉ®Ë°®"></a>ÂÜÖÈÉ®Ë°®vsÂ§ñÈÉ®Ë°®</h3><p><strong>ÂÜÖÈÉ®Ë°®</strong></p><ol><li>ÊåâÁÖßË°®Êï∞ÊçÆÁöÑÁîüÂëΩÂë®ÊúüÔºåÂèØ‰ª•Â∞ÜË°®ÂàÜ‰∏∫ÂÜÖÈÉ®Ë°®ÂíåÂ§ñÈÉ®Ë°®‰∏§Á±ªÔºõ</li><li>ÂÜÖÈÉ®Ë°®‰πüÂè´ÁÆ°ÁêÜË°®Êàñ‰∏¥Êó∂Ë°®ÔºåËØ•Á±ªÂûãË°®ÁöÑÁîüÂëΩÂë®ÊúüÊó∂Áî±hiveÊéßÂà∂ÁöÑÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊï∞ÊçÆÈÉΩÂ≠òÊîæÂú®/user/hive/warehouse/‰∏ãÈù¢Ôºõ</li><li>Âà†Èô§Ë°®Êó∂Êï∞ÊçÆ‰ºöË¢´Âà†Èô§Ôºõ</li><li>‰ª•‰∏ãÂëΩ‰ª§ÂàõÂª∫ÁöÑÂ∞±ÊòØÂÜÖÈÉ®Ë°®ÔºåÂèØËßÅÂâçÈù¢‰∏§ÁØáÊñáÁ´†‰∏≠ÂàõÂª∫ÁöÑË°®ÈÉΩÊòØÂÜÖÈÉ®Ë°®</li></ol><p><strong>Â§ñÈÉ®Ë°®</strong></p><ul><li>ÂàõÂª∫Ë°®ÁöÑSQLËØ≠Âè•‰∏≠Âä†‰∏äexternalÔºåÂàõÂª∫ÁöÑÂ∞±ÊòØÂ§ñÈÉ®Ë°®‰∫ÜÔºõ</li><li>Â§ñÈÉ®Ë°®ÁöÑÊï∞ÊçÆÁîüÂëΩÂë®Êúü‰∏çÂèóHiveÊéßÂà∂Ôºõ</li><li>Âà†Èô§Â§ñÈÉ®Ë°®ÁöÑÊó∂ÂÄô‰∏ç‰ºöÂà†Èô§Êï∞ÊçÆÔºõ</li><li>Â§ñÈÉ®Ë°®ÁöÑÊï∞ÊçÆÔºåÂèØ‰ª•ÂêåÊó∂‰Ωú‰∏∫Â§ö‰∏™Â§ñÈÉ®Ë°®ÁöÑÊï∞ÊçÆÊ∫êÂÖ±‰∫´‰ΩøÁî®Ôºõ</li><li>Êé•‰∏ãÊù•ÂºÄÂßãÂÆûË∑µÔºå‰∏ãÈù¢ÊòØÂª∫Ë°®ËØ≠Âè•Ôºö</li><li>Âú®ÂÆûÈôÖÁîü‰∫ß‰∏öÂä°Á≥ªÁªüÂºÄÂèë‰∏≠ÔºåÂ§ñÈÉ®Ë°®ÊòØÊàë‰ª¨‰∏ªË¶ÅÂ∫îÁî®ÁöÑË°®Á±ªÂûã</li></ul>]]></content>
      
      
      <categories>
          
          <category> hive </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yarn point</title>
      <link href="/2021/12/31/yarn%20snippet/"/>
      <url>/2021/12/31/yarn%20snippet/</url>
      
        <content type="html"><![CDATA[<p><strong>Yet Another Resource Negotiator</strong></p><p>YARN ÁúãÂÅö‰∏Ä‰∏™‰∫ëÊìç‰ΩúÁ≥ªÁªüÔºåÂÆÉË¥üË¥£‰∏∫Â∫îÁî®Á®ãÂ∫èÂêØ Âä® ApplicationMasterÔºàÁõ∏ÂΩì‰∫é‰∏ªÁ∫øÁ®ãÔºâÔºåÁÑ∂ÂêéÂÜçÁî± ApplicationMaster Ë¥üË¥£Êï∞ÊçÆÂàáÂàÜ„ÄÅ‰ªªÂä°ÂàÜÈÖç„ÄÅ ÂêØÂä®ÂíåÁõëÊéßÁ≠âÂ∑•‰ΩúÔºåËÄåÁî± ApplicationMaster ÂêØÂä®ÁöÑÂêÑ‰∏™ TaskÔºàÁõ∏ÂΩì‰∫éÂ≠êÁ∫øÁ®ãÔºâ‰ªÖË¥üË¥£Ëá™Â∑±ÁöÑËÆ° ÁÆó‰ªªÂä°„ÄÇÂΩìÊâÄÊúâ‰ªªÂä°ËÆ°ÁÆóÂÆåÊàêÂêéÔºåApplicationMaster ËÆ§‰∏∫Â∫îÁî®Á®ãÂ∫èËøêË°åÂÆåÊàêÔºåÁÑ∂ÂêéÈÄÄÂá∫„ÄÇ</p><p><img src="/images/yarn/yarn_construct.gif"></p><h2 id="Ê¶ÇÂøµ"><a href="#Ê¶ÇÂøµ" class="headerlink" title="Ê¶ÇÂøµ"></a>Ê¶ÇÂøµ</h2><h4 id="contrainer"><a href="#contrainer" class="headerlink" title="contrainer"></a>contrainer</h4><blockquote><p>ÂÆπÂô®ÔºàContainerÔºâËøô‰∏™‰∏úË•øÊòØ Yarn ÂØπËµÑÊ∫êÂÅöÁöÑ‰∏ÄÂ±ÇÊäΩË±°„ÄÇÂ∞±ÂÉèÊàë‰ª¨Âπ≥Êó∂ÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÁªèÂ∏∏ÈúÄË¶ÅÂØπÂ∫ïÂ±Ç‰∏Ä‰∫õ‰∏úË•øËøõË°åÂ∞ÅË£ÖÔºåÂè™Êèê‰æõÁªô‰∏äÂ±Ç‰∏Ä‰∏™Ë∞ÉÁî®Êé•Âè£‰∏ÄÊ†∑ÔºåYarn ÂØπËµÑÊ∫êÁöÑÁÆ°ÁêÜ‰πüÊòØÁî®Âà∞‰∫ÜËøôÁßçÊÄùÊÉ≥„ÄÇ</p></blockquote><p><img src="/images/yarn/contrainer.jpeg"></p><blockquote><p>Yarn Â∞ÜCPUÊ†∏Êï∞ÔºåÂÜÖÂ≠òËøô‰∫õËÆ°ÁÆóËµÑÊ∫êÈÉΩÂ∞ÅË£ÖÊàê‰∏∫‰∏Ä‰∏™‰∏™ÁöÑÂÆπÂô®ÔºàContainerÔºâ„ÄÇ¬†¬†¬†¬†</p></blockquote><ul><li>ÂÆπÂô®Áî± NodeManager ÂêØÂä®ÂíåÁÆ°ÁêÜÔºåÂπ∂Ë¢´ÂÆÉÊâÄÁõëÊéß„ÄÇ</li><li>ÂÆπÂô®Ë¢´ ResourceManager ËøõË°åË∞ÉÂ∫¶„ÄÇ</li></ul><h4 id="ResourceManager"><a href="#ResourceManager" class="headerlink" title="ResourceManager"></a>ResourceManager</h4><blockquote><p>Ë¥üË¥£ËµÑÊ∫êÁÆ°ÁêÜÁöÑÔºåÊï¥‰∏™Á≥ªÁªüÊúâ‰∏îÂè™Êúâ‰∏Ä‰∏™ RM ÔºåÊù•Ë¥üË¥£ËµÑÊ∫êÁöÑË∞ÉÂ∫¶„ÄÇÂÆÉ‰πüÂåÖÂê´‰∫Ü‰∏§‰∏™‰∏ªË¶ÅÁöÑÁªÑ‰ª∂ÔºöÂÆöÊó∂Ë∞ÉÁî®Âô®(Scheduler)‰ª•ÂèäÂ∫îÁî®ÁÆ°ÁêÜÂô®(ApplicationManager)„ÄÇ</p></blockquote><ol><li>ÂÆöÊó∂Ë∞ÉÂ∫¶Âô®(Scheduler)Ôºö‰ªéÊú¨Ë¥®‰∏äÊù•ËØ¥ÔºåÂÆöÊó∂Ë∞ÉÂ∫¶Âô®Â∞±ÊòØ‰∏ÄÁßçÁ≠ñÁï•ÔºåÊàñËÄÖËØ¥‰∏ÄÁßçÁÆóÊ≥ï„ÄÇÂΩì Client Êèê‰∫§‰∏Ä‰∏™‰ªªÂä°ÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÊ†πÊçÆÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫ê‰ª•ÂèäÂΩìÂâçÈõÜÁæ§ÁöÑËµÑÊ∫êÁä∂ÂÜµËøõË°åÂàÜÈÖç„ÄÇÊ≥®ÊÑèÔºåÂÆÉÂè™Ë¥üË¥£ÂêëÂ∫îÁî®Á®ãÂ∫èÂàÜÈÖçËµÑÊ∫êÔºåÂπ∂‰∏çÂÅöÁõëÊéß‰ª•ÂèäÂ∫îÁî®Á®ãÂ∫èÁöÑÁä∂ÊÄÅË∑üË∏™„ÄÇ</li><li>Â∫îÁî®ÁÆ°ÁêÜÂô®(ApplicationManager)ÔºöÂêåÊ†∑ÔºåÂê¨ÂêçÂ≠óÂ∞±ËÉΩÂ§ßÊ¶ÇÁü•ÈÅìÂÆÉÊòØÂπ≤ÂòõÁöÑ„ÄÇÂ∫îÁî®ÁÆ°ÁêÜÂô®Â∞±ÊòØË¥üË¥£ÁÆ°ÁêÜ Client Áî®Êà∑Êèê‰∫§ÁöÑÂ∫îÁî®„ÄÇ‰∏äÈù¢‰∏çÊòØËØ¥Âà∞ÂÆöÊó∂Ë∞ÉÂ∫¶Âô®ÔºàSchedulerÔºâ‰∏çÂØπÁî®Êà∑Êèê‰∫§ÁöÑÁ®ãÂ∫èÁõëÊéßÂòõÔºåÂÖ∂ÂÆûÂïäÔºåÁõëÊéßÂ∫îÁî®ÁöÑÂ∑•‰ΩúÊ≠£ÊòØÁî±Â∫îÁî®ÁÆ°ÁêÜÂô®ÔºàApplicationManagerÔºâÂÆåÊàêÁöÑ„ÄÇ</li></ol><h4 id="ApplicationMaster"><a href="#ApplicationMaster" class="headerlink" title="ApplicationMaster"></a>ApplicationMaster</h4><blockquote><p>ÊØèÂΩì Client Êèê‰∫§‰∏Ä‰∏™ Application Êó∂ÂÄôÔºåÂ∞±‰ºöÊñ∞Âª∫‰∏Ä‰∏™ ApplicationMaster „ÄÇÁî±Ëøô‰∏™ ApplicationMaster Âéª‰∏é ResourceManager Áî≥ËØ∑ÂÆπÂô®ËµÑÊ∫êÔºåËé∑ÂæóËµÑÊ∫êÂêé‰ºöÂ∞ÜË¶ÅËøêË°åÁöÑÁ®ãÂ∫èÂèëÈÄÅÂà∞ÂÆπÂô®‰∏äÂêØÂä®ÔºåÁÑ∂ÂêéËøõË°åÂàÜÂ∏ÉÂºèËÆ°ÁÆó„ÄÇ</p><p>ps: Â§ßÊï∞ÊçÆÂàÜÂ∏ÉÂºèËÆ°ÁÆóÁöÑÊÄùÊÉ≥ÔºåÂ§ßÊï∞ÊçÆÈöæ‰ª•ÁßªÂä®ÔºàÊµ∑ÈáèÊï∞ÊçÆÁßªÂä®ÊàêÊú¨Â§™Â§ßÔºåÊó∂Èó¥Â§™ÈïøÔºâÔºåÈÇ£Â∞±ÊääÂÆπÊòìÁßªÂä®ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèëÂ∏ÉÂà∞ÂêÑ‰∏™ËäÇÁÇπËøõË°åËÆ°ÁÆó„ÄÇ</p></blockquote><h4 id="NodeManager"><a href="#NodeManager" class="headerlink" title="NodeManager"></a>NodeManager</h4><blockquote><p>NodeManager ÊòØ ResourceManager Âú®ÊØèÂè∞Êú∫Âô®ÁöÑ‰∏ä‰ª£ÁêÜÔºåË¥üË¥£ÂÆπÂô®ÁöÑÁÆ°ÁêÜÔºåÂπ∂ÁõëÊéß‰ªñ‰ª¨ÁöÑËµÑÊ∫ê‰ΩøÁî®ÊÉÖÂÜµÔºàcpuÔºåÂÜÖÂ≠òÔºåÁ£ÅÁõòÂèäÁΩëÁªúÁ≠âÔºâÔºå‰ª•ÂèäÂêë ResourceManager/Scheduler Êèê‰æõËøô‰∫õËµÑÊ∫ê‰ΩøÁî®Êä•Âëä„ÄÇ</p></blockquote><h2 id="ÂëΩ‰ª§"><a href="#ÂëΩ‰ª§" class="headerlink" title="ÂëΩ‰ª§"></a>ÂëΩ‰ª§</h2><h3 id="submit-application-to-yarn"><a href="#submit-application-to-yarn" class="headerlink" title="submit application to yarn"></a>submit application to yarn</h3><p><img src="/images/yarn/submit_app_flow.jpeg"></p><ol><li>Client Âêë Yarn Êèê‰∫§ ApplicationÔºåËøôÈáåÊàë‰ª¨ÂÅáËÆæÊòØ‰∏Ä‰∏™ MapReduce ‰Ωú‰∏ö„ÄÇ</li><li>ResourceManager Âêë NodeManager ÈÄö‰ø°Ôºå‰∏∫ËØ• Application ÂàÜÈÖçÁ¨¨‰∏Ä‰∏™ÂÆπÂô®„ÄÇÂπ∂Âú®Ëøô‰∏™ÂÆπÂô®‰∏≠ËøêË°åËøô‰∏™Â∫îÁî®Á®ãÂ∫èÂØπÂ∫îÁöÑ ApplicationMaster„ÄÇ</li><li>ApplicationMaster ÂêØÂä®‰ª•ÂêéÔºåÂØπ ‰Ωú‰∏öÔºà‰πüÂ∞±ÊòØ ApplicationÔºâ ËøõË°åÊãÜÂàÜÔºåÊãÜÂàÜ task Âá∫Êù•ÔºåËøô‰∫õ task ÂèØ‰ª•ËøêË°åÂú®‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÆπÂô®‰∏≠„ÄÇÁÑ∂ÂêéÂêë ResourceManager Áî≥ËØ∑Ë¶ÅËøêË°åÁ®ãÂ∫èÁöÑÂÆπÂô®ÔºåÂπ∂ÂÆöÊó∂Âêë ResourceManager ÂèëÈÄÅÂøÉË∑≥„ÄÇ</li><li>Áî≥ËØ∑Âà∞ÂÆπÂô®ÂêéÔºåApplicationMaster ‰ºöÂéªÂíåÂÆπÂô®ÂØπÂ∫îÁöÑ NodeManager ÈÄö‰ø°ÔºåËÄåÂêéÂ∞Ü‰Ωú‰∏öÂàÜÂèëÂà∞ÂØπÂ∫îÁöÑ NodeManager ‰∏≠ÁöÑÂÆπÂô®ÂéªËøêË°åÔºåËøôÈáå‰ºöÂ∞ÜÊãÜÂàÜÂêéÁöÑ MapReduce ËøõË°åÂàÜÂèëÔºåÂØπÂ∫îÂÆπÂô®‰∏≠ËøêË°åÁöÑÂèØËÉΩÊòØ Map ‰ªªÂä°Ôºå‰πüÂèØËÉΩÊòØ Reduce ‰ªªÂä°„ÄÇ</li><li>ÂÆπÂô®‰∏≠ËøêË°åÁöÑ‰ªªÂä°‰ºöÂêë ApplicationMaster ÂèëÈÄÅÂøÉË∑≥ÔºåÊ±áÊä•Ëá™Ë∫´ÊÉÖÂÜµ„ÄÇÂΩìÁ®ãÂ∫èËøêË°åÂÆåÊàêÂêéÔºå ApplicationMaster ÂÜçÂêë ResourceManager Ê≥®ÈîÄÂπ∂ÈáäÊîæÂÆπÂô®ËµÑÊ∫ê„ÄÇ</li></ol><h3 id="ÂÅúÊ≠¢Â∫îÁî®"><a href="#ÂÅúÊ≠¢Â∫îÁî®" class="headerlink" title="ÂÅúÊ≠¢Â∫îÁî®"></a>ÂÅúÊ≠¢Â∫îÁî®</h3><p><code>yarn application -kill appID</code></p><h2 id="ÂèÇÊï∞ÈÖçÁΩÆ"><a href="#ÂèÇÊï∞ÈÖçÁΩÆ" class="headerlink" title="ÂèÇÊï∞ÈÖçÁΩÆ"></a>ÂèÇÊï∞ÈÖçÁΩÆ</h2><p>ÊØè‰∏™jobÊèê‰∫§Âà∞yarn‰∏äÊâßË°åÊó∂ÔºåÈÉΩ‰ºöÂàÜÈÖçContainerÂÆπÂô®ÂéªËøêË°åÔºåËÄåËøô‰∏™ÂÆπÂô®ÈúÄË¶ÅËµÑÊ∫êÊâçËÉΩËøêË°åÔºåËøô‰∏™ËµÑÊ∫êÂ∞±ÊòØCpuÂíåÂÜÖÂ≠ò„ÄÇ</p><h3 id="CPUËµÑÊ∫êË∞ÉÂ∫¶"><a href="#CPUËµÑÊ∫êË∞ÉÂ∫¶" class="headerlink" title="CPUËµÑÊ∫êË∞ÉÂ∫¶"></a>CPUËµÑÊ∫êË∞ÉÂ∫¶</h3><p>ÁõÆÂâçÁöÑCPUË¢´YarnÂàíÂàÜ‰∏∫ËôöÊãüCPUÔºåËøôÊòØyarnËá™Â∑±ÂºïÂÖ•ÁöÑÊ¶ÇÂøµÔºåÂõ†‰∏∫ÊØè‰∏™ÊúçÂä°Âô®ÁöÑCpuËÆ°ÁÆóËÉΩÂäõ‰∏ç‰∏ÄÊ†∑ÔºåÊúâÁöÑÊú∫Âô®ÂèØËÉΩÊòØ ÂÖ∂‰ªñÊú∫Âô®ÁöÑËÆ°ÁÆóËÉΩÂäõÁöÑ2ÂÄçÔºåÁÑ∂ÂêéÂèØ‰ª•ÈÄöËøáÂ§öÈÖçÁΩÆÂá†‰∏™ËôöÊãüÂÜÖÂ≠òÂº•Ë°•Â∑ÆÂºÇ„ÄÇÂú®yarn‰∏≠ÔºåcpuÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆÂ¶Ç‰∏ã„ÄÇ</p><p>yarn.nodemanager.resource.cpu-vcores</p><p>Ë°®Á§∫ËØ•ËäÇÁÇπÊúçÂä°Âô®‰∏äyarnÂèØ‰ª•‰ΩøÁî®ÁöÑËôöÊãüÁöÑCPU‰∏™Êï∞ÔºåÈªòËÆ§ÊòØ8ÔºåÊé®ËçêÈÖçÁΩÆ‰∏éÊ†∏ÂøÉ‰∏™Êï∞Áõ∏ÂêåÔºåÂ¶ÇÊûúËäÇÁÇπCPUÁöÑÊ†∏ÂøÉ‰∏™Êï∞‰∏çË∂≥8‰∏™ÔºåÈúÄË¶ÅË∞ÉÂ∞èËøô‰∏™ÂÄºÔºåyarn‰∏ç‰ºöÊô∫ËÉΩÁöÑÂéªÊ£ÄÊµãÁâ©ÁêÜÊ†∏Êï∞„ÄÇÂ¶ÇÊûúÊú∫Âô®ÊÄßËÉΩËæÉÂ•ΩÔºåÂèØ‰ª•ÈÖçÁΩÆ‰∏∫Áâ©ÁêÜÊ†∏Êï∞ÁöÑ2ÂÄç„ÄÇ</p><p>yarn.scheduler.minimum-allocation-vcores</p><p>Ë°®Á§∫Âçï‰∏™‰ªªÂä°ÊúÄÂ∞èÂèØ‰ª•Áî≥ËØ∑ÁöÑËôöÊãüÊ†∏ÂøÉÊï∞ÔºåÈªòËÆ§‰∏∫1</p><p>yarn.sheduler.maximum-allocation-vcores</p><p>Ë°®Á§∫Âçï‰∏™‰ªªÂä°ÊúÄÂ§ßÂèØ‰ª•Áî≥ËØ∑ÁöÑËôöÊãüÊ†∏Êï∞ÔºåÈªòËÆ§‰∏∫4ÔºõÂ¶ÇÊûúÁî≥ËØ∑ËµÑÊ∫êÊó∂ÔºåË∂ÖËøáËøô‰∏™ÈÖçÁΩÆÔºå‰ºöÊäõÂá∫ InvalidResourceRequestException</p><h3 id="MemoryËµÑÊ∫êË∞ÉÂ∫¶"><a href="#MemoryËµÑÊ∫êË∞ÉÂ∫¶" class="headerlink" title="MemoryËµÑÊ∫êË∞ÉÂ∫¶"></a>MemoryËµÑÊ∫êË∞ÉÂ∫¶</h3><p>yarn‰∏ÄËà¨ÂÖÅËÆ∏Áî®Êà∑ÈÖçÁΩÆÊØè‰∏™ËäÇÁÇπ‰∏äÂèØÁî®ÁöÑÁâ©ÁêÜËµÑÊ∫êÔºåÂèØÁî®ÊåáÁöÑÊòØÂ∞ÜÊú∫Âô®‰∏äÂÜÖÂ≠òÂáèÂéªhdfsÁöÑÔºåhbaseÁöÑÁ≠âÁ≠âÂâ©‰∏ãÁöÑÂèØÁî®ÁöÑÂÜÖÂ≠ò„ÄÇ</p><p>yarn.nodemanager.resource.memory-mb</p><p>ËÆæÁΩÆËØ•ËäÇÁÇπ‰∏äyarnÂèØ‰ΩøÁî®ÁöÑÂÜÖÂ≠òÔºåÈªòËÆ§‰∏∫8GÔºåÂ¶ÇÊûúËäÇÁÇπÂÜÖÂ≠ò‰∏çË∂≥8GÔºåË¶ÅÂáèÂ∞ëËøô‰∏™ÂÄºÔºåyarn‰∏ç‰ºöÊô∫ËÉΩÁöÑÂéªÊ£ÄÊµãÂÜÖÂ≠òËµÑÊ∫êÔºå‰∏ÄËà¨Ëøô‰∏™ÂÄºÂºèyarnÁöÑÂèØÁî®ÂÜÖÂ≠òËµÑÊ∫ê„ÄÇ</p><p>yarn.scheduler.minmum-allocation-mb</p><p>Âçï‰∏™‰ªªÂä°ÊúÄÂ∞èÁî≥ËØ∑Áâ©ÁêÜÂÜÖÂ≠òÈáèÔºåÈªòËÆ§ÊòØ1024MÔºåÊ†πÊçÆËá™Â∑±‰∏öÂä°ËÆæÂÆö</p><p>yarn.scheduler.maximum-allocation-mb</p><p>Âçï‰∏™‰ªªÂä°ÊúÄÂ§ßÂèØ‰ª•Áî≥ËØ∑ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÈáèÔºåÈªòËÆ§‰∏∫8291M</p><p>‰∫å„ÄÅÂ¶ÇÊûúËÆæÁΩÆËøôÂá†‰∏™ÂèÇÊï∞<br>Â¶ÇÊûú‰∏Ä‰∏™ÊúçÂä°Âô®ÊòØ32Ê†∏ÔºåËôöÊãüÂêé‰∏∫64Ê†∏Ôºå128GÂÜÖÂ≠òÔºåÊàë‰ª¨ËØ•Â¶Ç‰ΩïËÆæÁΩÆ‰∏äÈù¢ÁöÑ6‰∏™ÂèÇÊï∞Âë¢ÔºüÂç≥Â¶Ç‰ΩïÂÅöÂà∞ËµÑÊ∫êÊúÄÂ§ßÂåñÂà©Áî®</p><p>Áîü‰∫ß‰∏äÊàë‰ª¨‰∏ÄËà¨Ë¶ÅÈ¢ÑÁïô15-20%ÁöÑÂÜÖÂ≠òÔºåÈÇ£‰πàÂèØÁî®ÂÜÖÂ≠òÂ∞±ÊòØ128*0.8=102.4GÔºåÂéªÈô§ÂÖ∂‰ªñÁªÑ‰ª∂ÁöÑ‰ΩøÁî®ÔºåÊàë‰ª¨ËÆæÁΩÆÊàê90GÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p><p>1„ÄÅyarn.sheduler.maximum-allocation-vcores<br>1.<br>‰∏ÄËà¨Â∞±ËÆæÁΩÆÊàê4‰∏™ÔºåclouderaÂÖ¨Âè∏ÂÅöËøáÊÄßËÉΩÊµãËØïÔºåÂ¶ÇÊûúCPUÂ§ß‰∫éÁ≠â‰∫é5‰πãÂêéÔºåCPUÁöÑÂà©Áî®ÁéáÂèçËÄå‰∏çÊòØÂæàÂ•Ω„ÄÇËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•Ê†πÊçÆÁîüÊàêÊúçÂä°Âô®ÂÜ≥ÂÆöÔºåÊØîÂ¶ÇÂÖ¨Âè∏ÊúçÂä°Âô®ÂæàÂØåË£ïÔºåÈÇ£Â∞±Áõ¥Êé•ËÆæÁΩÆÊàê1:1ÔºõËÆæÁΩÆÊàê32ÔºåÂ¶ÇÊûú‰∏çÊòØÂæàÂØåË£ïÔºåÂèØ‰ª•Áõ¥Êé•ËÆæÁΩÆÊàê1:2„ÄÇÊàë‰ª¨‰ª•1:2Êù•ËÆ°ÁÆó„ÄÇ</p><p>2„ÄÅyarn.scheduler.minimum-allocation-vcores<br>1.<br>Â¶ÇÊûúËÆæÁΩÆvcoure = 1ÔºåÈÇ£‰πàÊúÄÂ§ßÂèØ‰ª•Ë∑ë64/1=64‰∏™containerÔºåÂ¶ÇÊûúËÆæÁΩÆÊàêËøôÊ†∑ÔºåÊúÄÂ∞ècontainerÊòØ64/4=16‰∏™„ÄÇ</p><p>3„ÄÅyarn.scheduler.minmum-allocation-mb</p><p>Â¶ÇÊûúËÆæÁΩÆÊàê2GÔºåÈÇ£‰πà90/2=45ÊúÄÂ§öÂèØ‰ª•Ë∑ë45‰∏™containerÔºåÂ¶ÇÊûúËÆæÁΩÆÊàê4GÔºåÈÇ£‰πàÊúÄÂ§öÂèØ‰ª•Ë∑ë24‰∏™ÔºõvcoreÊúâ‰∫õÊµ™Ë¥π„ÄÇ</p><p>4„ÄÅyarn.scheduler.maximum-allocation-mb</p><p>Ëøô‰∏™Ë¶ÅÊ†πÊçÆËá™Â∑±ÂÖ¨Âè∏ÁöÑ‰∏öÂä°ËÆæÂÆöÔºåÂ¶ÇÊûúÊúâÂ§ß‰ªªÂä°ÔºåÈúÄË¶Å5-6GÂÜÖÂ≠òÔºåÈÇ£Â∞±ËÆæÁΩÆ‰∏∫8GÔºåÈÇ£‰πàÊúÄÂ§ßÂèØ‰ª•Ë∑ë11‰∏™container„ÄÇ</p><h2 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h2><h3 id="ÈÖçÁΩÆÊåáÂÆöÁî®Êà∑ÂêØÂÅú"><a href="#ÈÖçÁΩÆÊåáÂÆöÁî®Êà∑ÂêØÂÅú" class="headerlink" title="ÈÖçÁΩÆÊåáÂÆöÁî®Êà∑ÂêØÂÅú"></a>ÈÖçÁΩÆÊåáÂÆöÁî®Êà∑ÂêØÂÅú</h3><p><code>start-yarn.sh</code>Âíå<code>stop-yarn.sh</code>Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">YARN_RESOURCEMANAGER_USER=xxx</span><br><span class="line">YARN_NODEMANAGER_USER=xxx</span><br></pre></td></tr></table></figure><p>ps: Â¶ÇÊûúÊüê‰∏™ËäÇÁÇπnodemanagerÊ≤°ÊúâÊãâËµ∑ÔºåÈúÄË¶ÅÊâßË°å<code>./yarn --daemon start nodemanager</code></p><h3 id="Âú®ËµÑÊ∫êÂ§üÁî®ÁöÑÊÉÖÂÜµÔºåÊó†Ê≥ïÂèëÂ∏ÉÊñ∞ÁöÑÂ∫îÁî®"><a href="#Âú®ËµÑÊ∫êÂ§üÁî®ÁöÑÊÉÖÂÜµÔºåÊó†Ê≥ïÂèëÂ∏ÉÊñ∞ÁöÑÂ∫îÁî®" class="headerlink" title="Âú®ËµÑÊ∫êÂ§üÁî®ÁöÑÊÉÖÂÜµÔºåÊó†Ê≥ïÂèëÂ∏ÉÊñ∞ÁöÑÂ∫îÁî®"></a>Âú®ËµÑÊ∫êÂ§üÁî®ÁöÑÊÉÖÂÜµÔºåÊó†Ê≥ïÂèëÂ∏ÉÊñ∞ÁöÑÂ∫îÁî®</h3><p>‰øÆÊîπ<code>capacity-scheduler.xml</code><br> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.capacity.maximum-am-resource-percent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--&lt;value&gt;0.1&lt;/value&gt;--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">   Maximum percent of resources in the cluster which can be used to run</span><br><span class="line">   application masters i.e. controls number of concurrent running</span><br><span class="line">   applications.</span><br><span class="line"> <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p><hr><p>reference:</p><p><a href="https://zhuanlan.zhihu.com/p/54192454">https://zhuanlan.zhihu.com/p/54192454</a></p>]]></content>
      
      
      <categories>
          
          <category> yarn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> point </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Real-time Data Warehouse</title>
      <link href="/2021/12/30/realtime%20datahouse/"/>
      <url>/2021/12/30/realtime%20datahouse/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ÂΩìËÆæËÆ°‰∏ÄÊ¨æ‰∫ßÂìÅÊàñËÄÖÂπ≥Âè∞ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÂàíÂàÜ‰∏∫‰∏§Â±ÇÔºåÂç≥Â∫ïÂ±ÇÂÆûÁé∞Âíå‰∏äÂ±ÇÊäΩË±°„ÄÇ</p></blockquote><p>ÂÆûÊó∂Êï∞‰ªìÂíå‰º†ÁªüÊï∞‰ªìÁöÑÂØπÊØî‰∏ªË¶ÅÂèØ‰ª•‰ªéÂõõ‰∏™ÊñπÈù¢ËÄÉËôëÔºö</p><ul><li>Á¨¨‰∏Ä‰∏™ÊòØ<strong>ÂàÜÂ±ÇÊñπÂºè</strong>ÔºåÁ¶ªÁ∫øÊï∞‰ªì‰∏∫‰∫ÜËÄÉËôëÂà∞ÊïàÁéáÈóÆÈ¢òÔºå‰∏ÄËà¨‰ºöÈááÂèñÁ©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÊñπÂºèÔºåÂ±ÇÁ∫ßÂàíÂàÜ‰ºöÊØîËæÉÂ§öÔºõÂàôÂÆûÊó∂Êï∞‰ªìËÄÉËôëÂà∞ÂÆûÊó∂ÊÄßÈóÆÈ¢òÔºå‰∏ÄËà¨ÂàÜÂ±Ç‰ºöÊØîËæÉÂ∞ëÔºåÂè¶Â§ñ‰πüÂáèÂ∞ë‰∫Ü‰∏≠Èó¥ÊµÅÁ®ãÂá∫ÈîôÁöÑÂèØËÉΩÊÄß„ÄÇ</li><li>Á¨¨‰∫å‰∏™ÊòØ<strong>‰∫ãÂÆûÊï∞ÊçÆ</strong>Â≠òÂÇ®ÊñπÈù¢ÔºåÁ¶ªÁ∫øÊï∞‰ªì‰ºöÂü∫‰∫é HDFSÔºåÂÆûÊó∂Êï∞‰ªìÂàô‰ºöÂü∫‰∫éÊ∂àÊÅØÈòüÂàóÔºàÂ¶Ç KafkaÔºâ„ÄÇ</li><li>Á¨¨‰∏â‰∏™ÊòØ<strong>Áª¥Â∫¶Êï∞ÊçÆ</strong>Â≠òÂÇ®ÔºåÂÆûÊó∂Êï∞‰ªì‰ºöÂ∞ÜÊï∞ÊçÆÊîæÂú® KV Â≠òÂÇ®‰∏äÈù¢„ÄÇ</li><li>Á¨¨Âõõ‰∏™ÊòØ<strong>Êï∞ÊçÆÂä†Â∑•</strong>ËøáÁ®ãÔºåÁ¶ªÁ∫øÊï∞‰ªì‰∏ÄËà¨‰ª• Hive„ÄÅSpark Á≠âÊâπÂ§ÑÁêÜ‰∏∫‰∏ªÔºåËÄåÂÆûÊó∂Êï∞‰ªìÂàôÊòØÂü∫‰∫éÂÆûÊó∂ËÆ°ÁÆóÂºïÊìéÂ¶Ç Storm„ÄÅFlink Á≠âÔºå‰ª•ÊµÅÂ§ÑÁêÜ‰∏∫‰∏ª„ÄÇ</li></ul><p>ÂÆûÊó∂Êï∞‰ªì‰∏ªË¶ÅÊúâ‰∏§‰∏™Ë¶ÅÁÇπ„ÄÇÈ¶ñÂÖàÊòØÂàÜÂ±ÇËÆæËÆ°‰∏äÔºå‰∏ÄËà¨‰πüÊòØÂèÇËÄÉÁ¶ªÁ∫øÊï∞‰ªìÁöÑËÆæËÆ°ÔºåÈÄöÂ∏∏‰ºöÂàÜ‰∏∫</p><p>ODSÊìç‰ΩúÊï∞ÊçÆÂ±Ç</p><p>DWDÊòéÁªÜÂ±Ç</p><p>DWSÊ±áÊÄªÂ±ÇÔºàËΩªÂ∫¶Ê±áÊÄª/È´òÂ∫¶Ê±áÊÄªÔºâ</p><p>ADSÂ∫îÁî®Â±Ç</p><p>ÂèØËÉΩËøò‰ºöÂàÜÂá∫‰∏ÄÂ±ÇDIMÁª¥Â∫¶Êï∞ÊçÆÂ±Ç„ÄÇÂè¶Â§ñÂàÜÂ±ÇËÆæËÆ°‰∏ä‰πüÊúâ‰∏çÂêåÁöÑÊÄùË∑ØÔºåÊØîÂ¶ÇÂèØ‰ª•Â∞ÜDWSÂíåADSÂΩí‰∏∫DMÊï∞ÊçÆÈõÜÂ∏ÇÂ±Ç</p><ul><li><p><strong>ODS(Operational Data Store): Ë¥¥Ê∫êÂ±Ç</strong></p><p>Ëøô‰∏ÄÂ±ÇÂèàÂè´ÂÅöË¥¥Ê∫êÂ±Ç,ÊúÄ‰∏∫Êé•ËøëÊï∞ÊçÆÊ∫êÁöÑ‰∏ÄÂ±Ç,ÈúÄË¶ÅÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÈáèÊòØÊúÄÂ§ßÁöÑ,Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰πüÊòØÊúÄÂéüÂßã„ÄÇÂØπ‰ºóÂ§öÊï∞ÊçÆÊ∫êËÄåË®ÄÔºå‰ªñ‰ª¨ÁöÑÊï∞ÊçÆÊ†ºÂºèÂü∫Êú¨‰∏ç‰∏ÄËá¥ÔºåÁªèËøáÁªü‰∏ÄËßÑÊ†ºÂåñÂêéÂèØ‰ª•ÂæóÂà∞ËßÑÊï¥ÁöÑÊï∞ÊçÆÔºåÂ∞ÜÊï∞ÊçÆÊ∫ê‰∏≠ÁöÑÊï∞ÊçÆÁªèËøáÊäΩÂèñ„ÄÅÊ∏ÖÊ¥ó„ÄÅ‰º†ËæìÂêéË£ÖÂÖ•ODSÂ±Ç„ÄÇ</p></li><li><p><strong>DWD(Data Warehouse Detail)ÔºöÊï∞ÊçÆÊòéÁªÜÂ±Ç</strong></p><p>‰∏öÂä°Â±Ç‰∏éÊï∞ÊçÆ‰ªìÂ∫ìÁöÑÈöîÁ¶ªÂ±ÇÔºå‰∏ªË¶ÅÂØπODSÂ±ÇÂÅö‰∏Ä‰∫õÊï∞ÊçÆÊ∏ÖÊ¥óÂíåËßÑËåÉÂåñÁöÑÊìç‰ΩúÔºåÂπ∂‰∏îÂèØ‰ª•ÊåâÁÖß‰∏çÂêåÁöÑË°å‰∏∫Áª¥Â∫¶ÂØπÊï∞ÊçÆËøõË°åÂàíÂàÜÔºå‰æãÂ¶ÇÊú¨ÊñáÂØπÊï∞ÊçÆÊ∫êÂ∞±ËøõË°å‰∫ÜÂàíÂàÜÔºå‰∏ªË¶ÅÂàÜ‰∏∫ÊµèËßà„ÄÅÊõùÂÖâ„ÄÅÁÇπÂáª„ÄÅ‰∫§ÊòìÁ≠â‰∏çÂêåÁöÑÁª¥Â∫¶ÔºåËøô‰∫õ‰∏çÂêåÁöÑÁª¥Â∫¶ËÉΩÂ§üÂØπ‰∏äÂ±ÇË∞ÉÁî®ÊñπÊèê‰æõÊõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÊï∞ÊçÆÊúçÂä°„ÄÇ</p></li><li><p><strong>DWS(Data WareHouse Servce)ÔºöÊï∞ÊçÆÊúçÂä°Â±Ç</strong></p><p>ÂØπÂêÑ‰∏™ÂüüËøõË°å‰∫ÜÈÄÇÂ∫¶Ê±áÊÄªÔºå‰∏ªË¶Å‰ª•Êï∞ÊçÆÂüü+‰∏öÂä°ÂüüÁöÑÁêÜÂøµÂª∫ËÆæÂÖ¨ÂÖ±Ê±áÊÄªÂ±ÇÔºå‰∏éÁ¶ªÁ∫øÊï∞‰ªì‰∏çÂêåÁöÑÊòØÔºåÂÆûÊó∂Êï∞‰ªìÁöÑÊ±áÊÄªÂ±ÇÂàÜ‰∏∫ËΩªÂ∫¶Ê±áÊÄªÂ±ÇÂíåÈ´òÂ∫¶Ê±áÊÄªÂ±ÇÔºå‰æãÂ¶ÇÂ∞ÜËΩªÂ∫¶Ê±áÊÄªÂ±ÇÊï∞ÊçÆÂÜôÂÖ• ADSÔºåÁî®‰∫éÂâçÁ´Ø‰∫ßÂìÅÂ§çÊùÇÁöÑOLAPÊü•ËØ¢Âú∫ÊôØÔºåÊª°Ë∂≥Ëá™Âä©ÂàÜÊûêÂíå‰∫ßÂá∫Êä•Ë°®ÁöÑÈúÄÊ±Ç„ÄÇ</p></li><li><p><strong>ADS(Application Data Store)ÔºöÂ∫îÁî®Êï∞ÊçÆÊúçÂä°Â±Ç</strong></p><p>‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÖ∑‰ΩìÈúÄÊ±ÇËÄåÊûÑÂª∫ÁöÑÂ∫îÁî®Â±ÇÔºåÈÄöËøá RPC Ê°ÜÊû∂ÂØπÂ§ñÊèê‰æõÊúçÂä°Ôºå‰æãÂ¶ÇÊú¨Êñá‰∏≠ÊèêÂà∞ÁöÑÊï∞ÊçÆÊä•Ë°®ÂàÜÊûê‰∏éÂ±ïÁ§∫„ÄÅÁõëÊéßÂëäË≠¶„ÄÅÊµÅÈáèË∞ÉÊéß„ÄÅÂºÄÊîæÂπ≥Âè∞Á≠âÂ∫îÁî®„ÄÇ</p></li><li><p><strong>DIM(Dimension)ÔºöÁª¥Ë°®</strong></p><p>Âú®ÂÆûÊó∂ËÆ°ÁÆó‰∏≠ÈùûÂ∏∏ÈáçË¶ÅÔºå‰πüÊòØÈáçÁÇπÁª¥Êä§ÁöÑÈÉ®ÂàÜÔºåÁª¥Ë°®ÈúÄË¶ÅÂÆûÊó∂Êõ¥Êñ∞Ôºå‰∏î‰∏ãÊ∏∏Âü∫‰∫éÊúÄÊñ∞ÁöÑÁª¥Ë°®ËøõË°åËÆ°ÁÆó</p></li></ul><hr><p>referenceÔºö</p><p><a href="https://cloud.tencent.com/developer/article/1618182">ÂÆûÊó∂Êï∞‰ªì | ‰Ω†ÊÉ≥Ë¶ÅÁöÑÊï∞‰ªìÂàÜÂ±ÇËÆæËÆ°‰∏éÊäÄÊúØÈÄâÂûã - ‰∫ë+Á§æÂå∫ - ËÖæËÆØ‰∫ë</a></p><ul><li>ÂÆûÊó∂Êï∞‰ªìÊòØÊåáÂú®Êï∞ÊçÆ‰ªìÂ∫ìÁöÑÂü∫Á°Ä‰∏äÔºåÂ¢ûÂä†‰∫ÜÂÆûÊó∂Êï∞ÊçÆÂ§ÑÁêÜÂíåÂàÜÊûêÂäüËÉΩÔºåÂèØ‰ª•Âú®Êï∞ÊçÆÁîüÊàêÂêéÁ´ãÂç≥ËøõË°åÂ§ÑÁêÜÂíåÂàÜÊûêÔºåÂπ∂ÂèäÊó∂ÂèçÈ¶àÁªô‰∏öÂä°Áî®Êà∑„ÄÇÂÆûÊó∂Êï∞‰ªìÁöÑÂª∫ËÆæÈúÄË¶ÅÂÖ≥Ê≥®‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö</li></ul><ol><li>Êï∞ÊçÆÊ∫êÊé•ÂÖ•ÔºöÂÆûÊó∂Êï∞‰ªìÈúÄË¶ÅÂèäÊó∂Âú∞Â§ÑÁêÜÂíåÂàÜÊûêÊï∞ÊçÆÔºåÂõ†Ê≠§Êï∞ÊçÆÊ∫êÁöÑÊé•ÂÖ•ÂøÖÈ°ªÂÆûÊó∂ÊàñËøëÂÆûÊó∂ÔºåÈúÄË¶ÅËÄÉËôëÊï∞ÊçÆÊ∫êÁöÑÂ§öÊ†∑ÊÄßÂíåÈ´òÂπ∂ÂèëÊÄß„ÄÇ</li><li>Êï∞ÊçÆË¥®ÈáèÔºöÊï∞ÊçÆÁöÑÂáÜÁ°ÆÊÄßÂíåÂÆåÊï¥ÊÄßÂØπ‰∫éÂÆûÊó∂Êï∞‰ªìÁöÑÂª∫ËÆæÂ∞§‰∏∫ÈáçË¶ÅÔºåÈúÄË¶ÅÂØπÊï∞ÊçÆËøõË°åÊ∏ÖÊ¥ó„ÄÅËøáÊª§„ÄÅÊ†°È™åÁ≠âÊìç‰ΩúÔºå‰øùËØÅÊï∞ÊçÆÁöÑË¥®Èáè„ÄÇ</li><li>Êï∞ÊçÆÈõÜÊàêÔºöÂÆûÊó∂Êï∞‰ªìÈúÄË¶ÅÊï¥ÂêàÂ§ö‰∏™Êï∞ÊçÆÊ∫êÁöÑÊï∞ÊçÆÔºåÂõ†Ê≠§ÈúÄË¶ÅËøõË°åÊï∞ÊçÆÈõÜÊàêÂíåËûçÂêàÔºåÁ°Æ‰øùÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÂíåÂáÜÁ°ÆÊÄß„ÄÇ</li><li>Êï∞ÊçÆÊ®°ÂûãËÆæËÆ°ÔºöÊï∞ÊçÆÊ®°ÂûãÊòØÂÆûÊó∂Êï∞‰ªìÂª∫ËÆæÁöÑÊ†∏ÂøÉÔºåÈúÄË¶ÅËÆæËÆ°ÂêàÁêÜÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÁ°Æ‰øùÊï∞ÊçÆÁöÑÂèØÊâ©Â±ïÊÄßÂíåÁÅµÊ¥ªÊÄß„ÄÇ</li><li>ÂÆûÊó∂ËÆ°ÁÆóÂíåÂàÜÊûêÔºöÂÆûÊó∂Êï∞‰ªìÈúÄË¶ÅÂÖ∑Â§áÂÆûÊó∂ËÆ°ÁÆóÂíåÂàÜÊûêËÉΩÂäõÔºåÈúÄË¶Å‰ΩøÁî®ÂÆûÊó∂ËÆ°ÁÆóÂºïÊìéÂíåÂàÜÊûêÂ∑•ÂÖ∑ÔºåÂØπÊï∞ÊçÆËøõË°åÂÆûÊó∂Â§ÑÁêÜÂíåÂàÜÊûê„ÄÇ</li><li>Êï∞ÊçÆÂÆâÂÖ®ÔºöÂÆûÊó∂Êï∞‰ªì‰∏≠ÁöÑÊï∞ÊçÆÂèØËÉΩÊ∂âÂèäÊïèÊÑü‰ø°ÊÅØÔºåÈúÄË¶ÅÈááÂèñ‰∏ÄÂÆöÁöÑÂÆâÂÖ®Êé™ÊñΩÔºå‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄßÂíåÈöêÁßÅÊÄß„ÄÇ</li><li>Á≥ªÁªüËøêÁª¥ÔºöÂÆûÊó∂Êï∞‰ªìÈúÄË¶ÅËøõË°åÁ≥ªÁªüËøêÁª¥ÂíåÁõëÊéßÔºåÂåÖÊã¨Êï∞ÊçÆÂ§á‰ªΩÂíåÊÅ¢Â§ç„ÄÅÁ≥ªÁªüË∞É‰ºò„ÄÅÊïÖÈöúÂ§ÑÁêÜÁ≠âÊñπÈù¢ÔºåÁ°Æ‰øùÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßÂíåÂèØÈù†ÊÄß„ÄÇ</li></ol><p>Áªº‰∏äÊâÄËø∞ÔºåÂÆûÊó∂Êï∞‰ªìÁöÑÂª∫ËÆæÈúÄË¶ÅÂÖ≥Ê≥®Êï∞ÊçÆÊ∫êÊé•ÂÖ•„ÄÅÊï∞ÊçÆË¥®Èáè„ÄÅÊï∞ÊçÆÈõÜÊàê„ÄÅÊï∞ÊçÆÊ®°ÂûãËÆæËÆ°„ÄÅÂÆûÊó∂ËÆ°ÁÆóÂíåÂàÜÊûê„ÄÅÊï∞ÊçÆÂÆâÂÖ®‰ª•ÂèäÁ≥ªÁªüËøêÁª¥Á≠âÂ§ö‰∏™ÊñπÈù¢ÔºåÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÈúÄÊ±ÇÂíåÂú∫ÊôØËøõË°åÁªºÂêàËÄÉËôëÂíåËßÑÂàí„ÄÇ</p><h2 id="Êï∞ÊçÆÊπñ"><a href="#Êï∞ÊçÆÊπñ" class="headerlink" title="Êï∞ÊçÆÊπñ"></a>Êï∞ÊçÆÊπñ</h2><p>Êï∞ÊçÆÊπñÔºåÁõÆÂâçÂÖ≥Ê≥®Â∫¶ÊØîËæÉÈ´òÁöÑÊúâ Databricks Êé®Âá∫ÁöÑ Delta Lake„ÄÅUber ÁöÑ Hudi ‰ª•Âèä Netflix ÁöÑ Iceberg</p><p>reference <a href="https://mp.weixin.qq.com/s/m8-iFg-ekykWGrG3gXlLew">https://mp.weixin.qq.com/s/m8-iFg-ekykWGrG3gXlLew</a></p>]]></content>
      
      
      <categories>
          
          <category> Data Warehouse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>database</title>
      <link href="/2021/12/29/database/"/>
      <url>/2021/12/29/database/</url>
      
        <content type="html"><![CDATA[<h1 id="hbase"><a href="#hbase" class="headerlink" title="hbase"></a>hbase</h1><table><thead><tr><th>ËäÇÁÇπ</th><th>Á´ØÂè£Âè∑</th><th>ÂçèËÆÆ</th><th>‰ΩøÁî®</th><th>ËØ¥Êòé</th></tr></thead><tbody><tr><td>zookeeper</td><td>2181</td><td></td><td>zkCli.sh -server zookeeper1:2181</td><td>ÂÆ¢Êà∑Á´ØÊé•ÂÖ•</td></tr><tr><td>2888,3888</td><td></td><td>N/A</td><td>ÈõÜÁæ§ÂÜÖÈÉ®ÈÄöËÆØ</td><td></td></tr><tr><td>HDFS Namenode</td><td>9000</td><td>HDFS</td><td>hdfs dfs -ls hdfs://namenode1:9000/</td><td>ÂÆ¢Êà∑Á´ØÊé•ÂÖ•</td></tr><tr><td>50070</td><td>HTTP</td><td><a href="http://namenode1:50070/">http://namenode1:50070/</a></td><td>ÈõÜÁæ§ÁõëÊéß</td><td></td></tr><tr><td>HDFS SecondaryNamenode</td><td>50090</td><td>HTTP</td><td><a href="http://namenode1:50090/">http://namenode1:50090/</a></td><td>secondaryÁõëÊéß</td></tr><tr><td>HDFS Datanode</td><td>50010</td><td></td><td>N/A</td><td>ÂÆ¢Êà∑Á´ØÊé•ÂÖ•/ÂÖ∂‰ªñËäÇÁÇπÊé•ÂÖ•</td></tr><tr><td>50020</td><td></td><td>N/A</td><td></td><td></td></tr><tr><td>50075</td><td>HTTP</td><td><a href="http://datanode1:50075/">http://datanode1:50075/</a></td><td>ËäÇÁÇπÁõëÊéß</td><td></td></tr><tr><td>HBase Master</td><td>16000</td><td></td><td>hbase-client-1.x.x.jar</td><td>RegionServerÊé•ÂÖ•</td></tr><tr><td>16010</td><td>HTTP</td><td><a href="http://namenode1:16010/">http://namenode1:16010/</a></td><td>ÈõÜÁæ§ÁõëÊéß</td><td></td></tr><tr><td>HBase RegionServer</td><td>16020</td><td></td><td>N/A</td><td>ÂÆ¢Êà∑Á´ØÊé•ÂÖ•</td></tr><tr><td>16030</td><td>HTTP</td><td><a href="http://datanode1:16030/">http://datanode1:16030/</a></td><td>ËäÇÁÇπÁõëÊéß</td><td></td></tr></tbody></table><h1 id="neo4j"><a href="#neo4j" class="headerlink" title="neo4j"></a>neo4j</h1><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><ul><li>cypherËØ≠Ê≥ïÂØπÂ§ßÂ∞èÂÜôÊïèÊÑüÔºåÊ≥®ÊÑèÂ±ûÊÄßÁöÑÂ§ßÂ∞èÂÜô</li><li>ÂØºÂÖ•csvÂá∫Áé∞‰π±Á†ÅÊó∂ÔºåÈúÄË¶ÅÈÄöËøáËÆ∞‰∫ãÊú¨Êõ¥ÊîπÁºñÁ†ÅÊ†ºÂºèÔºåÂ¶ÇÊûúÊñáÊú¨ËøáÂ§ßÔºåÈúÄË¶Å‰∏ÄÊÆµ‰∏ÄÊÆµÁöÑÂ§çÂà∂Á≤òË¥¥Âà∞Êñ∞ÊñáÊú¨‰∏≠Ôºå‰∏î‰ª•UTF-8Ê†ºÂºèÁºñÁ†Å</li><li>MERGEÂëΩ‰ª§ÊòØCREATEÂëΩ‰ª§ÂíåMATCHÂëΩ‰ª§ÁöÑÁªÑÂêà„ÄÇ<code>MERGE = CREATE + MATCH</code></li></ul><h2 id="ÈóÆÈ¢ò"><a href="#ÈóÆÈ¢ò" class="headerlink" title="ÈóÆÈ¢ò"></a>ÈóÆÈ¢ò</h2><p>1.<br>‚Äã    <strong>Áé∞Ë±°</strong>Ôºö Âú®Â§ñÈÉ®Â§ÑÁêÜcsvÊï∞ÊçÆÔºåÂØºÂÖ•ÊúçÂä°Âô®ÔºåÁÑ∂Âêéload csvÂà∞neo4j‰∏≠ÔºåÂèØËÉΩÁî±‰∫éÊñá‰ª∂ÊâÄÂ±ûÈóÆÈ¢òÔºå‰∏çËÉΩÊàêÂäüÂØºÂÖ•csvÔºåÊèêÁ§∫<code>Couldn&#39;t load the external resource</code>ÁöÑÈîôËØØ„ÄÇ<br>‚Äã    <strong>Ëß£ÂÜ≥</strong>ÔºöÂ§çÂà∂ÂèØ‰ª•ÂØºÂÖ•ÁöÑcsvÊñá‰ª∂‰∏∫ÂâØÊú¨ÔºåÊääÂæÖÂØºÂÖ•ÁöÑÊï∞ÊçÆÁ≤òË¥¥Âà∞ÂâØÊú¨‰∏≠Ôºåload csvÂâØÊú¨Âç≥ÂèØ</p><p>2.<br>‚Äã    <strong>Áé∞Ë±°</strong>Ôºö Âú®Â§ñÈÉ®Â§ÑÁêÜcsvÊï∞ÊçÆÔºåËøõË°åmergeÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÊèêÁ§∫<code>cannot merge using null property value for uid</code>ÁöÑÈîôËØØ„ÄÇ<br>‚Äã    <strong>Ëß£ÂÜ≥</strong>ÔºöÁªèÂèëÁé∞ÔºåÊòØÁî±‰∫éÊåá‰ª§‰∏≠ÁöÑÂ±ûÊÄßÊãºÂÜôÈîôËØØÔºåÂØºËá¥<code>Neo.ClientError.Statement.SemanticError</code>ÁöÑÈîôËØØÔºå‰æãÂ¶ÇÊää<code>sfzh</code>ÊãºÂÜôÊàê<code>sfhm</code>„ÄÇ</p><p>3.<br>‚Äã    <strong>Áé∞Ë±°</strong>Ôºö Â§ßÈáèÊï∞ÊçÆÁöÑÂØºÂÖ•ÈóÆÈ¢ò„ÄÇ<br>‚Äã    <strong>Ëß£ÂÜ≥</strong>ÔºöÈúÄ‰ΩøÁî®<a href="https://neo4j.com/docs/operations-manual/current/tools/import/" title="Â§ßÈáèÊï∞ÊçÆÁöÑÂØºÂÖ•">https://neo4j.com/docs/operations-manual/current/tools/import/</a><br>‚Äã    <strong>Ê≥®ÊÑè</strong>Ôºö<code>Import tool is only for newly created databases.</code><br>‚Äã        <code>You can use LOAD CSV cypher command to load into an existing database.</code>‰πüÂ∞±ÊòØËØ¥neo4j-admin importÂè™‰ºöÂú®Êñ∞Âª∫Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄô‰ºöÁî®Âà∞</p><h1 id="clickhouse"><a href="#clickhouse" class="headerlink" title="clickhouse"></a>clickhouse</h1><h2 id="Â≠òÂÇ®Êû∂ÊûÑ"><a href="#Â≠òÂÇ®Êû∂ÊûÑ" class="headerlink" title="Â≠òÂÇ®Êû∂ÊûÑ"></a>Â≠òÂÇ®Êû∂ÊûÑ</h2><blockquote><p>Clickhouse Â≠òÂÇ®‰∏≠ÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ DataPartÔºåÂÜôÂÖ•ÈìæË∑Ø‰∏∫‰∫ÜÊèêÂçáÂêûÂêêÔºåÊîæÂºÉ‰∫ÜÈÉ®ÂàÜÂÜôÂÖ•ÂÆûÊó∂ÂèØËßÅÊÄßÔºåÂç≥Êï∞ÊçÆÊîíÊâπÂÜôÂÖ•Ôºå‰∏ÄÊ¨°ÊâπÈáèÂÜôÂÖ•ÁöÑÊï∞ÊçÆ‰ºöËêΩÁõòÊàê‰∏Ä‰∏™ DataPart.</p><p>ÂÆÉ‰∏çÂÉè Druid ÈÇ£Ê†∑‰∏ÄÊù°‰∏ÄÊù°ÂÆûÊó∂ÊëÑÂÖ•„ÄÇ‰ΩÜ ClickHouse ÊääÊï∞ÊçÆÂª∂ËøüÊîíÊâπÂÜôÂÖ•ÁöÑÂ∑•‰Ωú‰∫§ÁªôÊù•ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÔºåÊØîÂ¶ÇËææÂà∞ 10 Êù°ËÆ∞ÂΩïÊàñÊØèËøá 5s Èó¥ÈöîÂÜôÂÖ•ÔºåÊç¢Âè•ËØùËØ¥Â∞±ÊòØÂèØ‰ª•Âú®Áî®Êà∑‰æßÂπ≥Ë°°ÂêûÂêêÈáèÂíåÊó∂Âª∂ÔºåÂ¶ÇÊûúÂú®‰∏öÂä°È´òÂ≥∞ÊúüÊµÅÈáè‰∏çÊòØÂ§™Â§ßÔºåÂèØ‰ª•ÁªìÂêàÂÆûÈôÖÂú∫ÊôØÂ∞ÜÂèÇÊï∞Ë∞ÉÂ∞èÔºå‰ª•ËææÂà∞ÊûÅËá¥ÁöÑÂÆûÊó∂ÊïàÊûú„ÄÇ</p></blockquote><h2 id="Êü•ËØ¢Êû∂ÊûÑ"><a href="#Êü•ËØ¢Êû∂ÊûÑ" class="headerlink" title="Êü•ËØ¢Êû∂ÊûÑ"></a>Êü•ËØ¢Êû∂ÊûÑ</h2><h3 id="ËÆ°ÁÆóËÉΩÂäõÊñπÈù¢"><a href="#ËÆ°ÁÆóËÉΩÂäõÊñπÈù¢" class="headerlink" title="ËÆ°ÁÆóËÉΩÂäõÊñπÈù¢"></a>ËÆ°ÁÆóËÉΩÂäõÊñπÈù¢</h3><p>Clickhouse ÈááÁî®ÂêëÈáèÂåñÂáΩÊï∞Âíå aggregator ÁÆóÂ≠êÊûÅÂ§ßÂú∞ÊèêÂçá‰∫ÜËÅöÂêàËÆ°ÁÆóÊÄßËÉΩÔºåÈÖçÂêàÂÆåÂ§áÁöÑ SQL ËÉΩÂäõ‰ΩøÂæóÊï∞ÊçÆÂàÜÊûêÂèòÂæóÊõ¥Âä†ÁÆÄÂçï„ÄÅÁÅµÊ¥ª„ÄÇ</p><h3 id="Êï∞ÊçÆÊâ´ÊèèÊñπÈù¢"><a href="#Êï∞ÊçÆÊâ´ÊèèÊñπÈù¢" class="headerlink" title="Êï∞ÊçÆÊâ´ÊèèÊñπÈù¢"></a>Êï∞ÊçÆÊâ´ÊèèÊñπÈù¢</h3><p>ClickHouse ÊòØÂÆåÂÖ®ÂàóÂºèÁöÑÂ≠òÂÇ®ËÆ°ÁÆóÂºïÊìéÔºåËÄå‰∏îÊòØ‰ª•ÊúâÂ∫èÂ≠òÂÇ®‰∏∫Ê†∏ÂøÉÔºåÂú®Êü•ËØ¢Êâ´ÊèèÊï∞ÊçÆÁöÑËøáÁ®ã‰∏≠ÔºåÈ¶ñÂÖà‰ºöÊ†πÊçÆÂ≠òÂÇ®ÁöÑÊúâÂ∫èÊÄß„ÄÅÂàóÂ≠òÂùóÁªüËÆ°‰ø°ÊÅØ„ÄÅÂàÜÂå∫ÈîÆÁ≠â‰ø°ÊÅØÊé®Êñ≠Âá∫ÈúÄË¶ÅÊâ´ÊèèÁöÑÂàóÂ≠òÂùóÔºåÁÑ∂ÂêéËøõË°åÂπ∂Ë°åÁöÑÊï∞ÊçÆÊâ´ÊèèÔºåÂÉèË°®ËææÂºèËÆ°ÁÆó„ÄÅËÅöÂêàÁÆóÂ≠êÈÉΩÊòØÂú®Ê≠£ËßÑÁöÑËÆ°ÁÆóÂºïÊìé‰∏≠Â§ÑÁêÜ„ÄÇ‰ªéËÆ°ÁÆóÂºïÊìéÂà∞Êï∞ÊçÆÊâ´ÊèèÔºåÊï∞ÊçÆÊµÅËΩ¨ÈÉΩÊòØ‰ª•ÂàóÂ≠òÂùó‰∏∫Âçï‰ΩçÔºåÈ´òÂ∫¶ÂêëÈáèÂåñÁöÑ„ÄÇ</p><h3 id="È´òÂπ∂ÂèëÊúçÂä°ÊñπÈù¢"><a href="#È´òÂπ∂ÂèëÊúçÂä°ÊñπÈù¢" class="headerlink" title="È´òÂπ∂ÂèëÊúçÂä°ÊñπÈù¢"></a>È´òÂπ∂ÂèëÊúçÂä°ÊñπÈù¢</h3><p>Clickhouse ÁöÑÂπ∂ÂèëËÉΩÂäõÂÖ∂ÂÆûÊòØ‰∏éÂπ∂Ë°åËÆ°ÁÆóÈáèÂíåÊú∫Âô®ËµÑÊ∫êÂÜ≥ÂÆöÁöÑ„ÄÇÂ¶ÇÊûúÊü•ËØ¢ÈúÄË¶ÅÊâ´ÊèèÁöÑÊï∞ÊçÆÈáèÂíåËÆ°ÁÆóÂ§çÊùÇÂ∫¶ÂæàÂ§ßÔºåÂπ∂ÂèëÂ∫¶Â∞±‰ºöÈôç‰ΩéÔºå‰ΩÜÊòØÂ¶ÇÊûú‰øùËØÅÂçï‰∏™ query ÁöÑ latency Ë∂≥Â§ü‰ΩéÔºàÂ¢ûÂä†ÂÜÖÂ≠òÂíå cpu ËµÑÊ∫êÔºâÔºåÈÉ®ÂàÜÂú∫ÊôØ‰∏ãÁî®Êà∑ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆÂêàÈÄÇÁöÑÁ≥ªÁªüÂèÇÊï∞Êù•ÊèêÂçáÂπ∂ÂèëËÉΩÂäõÔºåÊØîÂ¶Ç max_threads Á≠â„ÄÇÂÖ∂‰ªñÂàÜÊûêÂûãÁ≥ªÁªüÔºà‰æãÂ¶Ç ElasticsearchÔºâÁöÑÂπ∂ÂèëËÉΩÂäõ‰∏∫‰ªÄ‰πàÂæàÂ•ΩÔºå‰ªé Cache ËÆæËÆ°Â±ÇÈù¢Êù•ÁúãÔºåES ÁöÑ Cache ÂåÖÊã¨ Query Cache, Request CacheÔºåData CacheÔºåIndex CacheÔºå‰ªéÊü•ËØ¢ÁªìÊûúÂà∞Á¥¢ÂºïÊâ´ÊèèÁªìÊûúÂ±ÇÂ±ÇÁöÑ Cache Âä†ÈÄüÔºåÂõ†‰∏∫ Elasticsearch ËÆ§‰∏∫ÂÆÉÁöÑÂú∫ÊôØ‰∏ãÂ≠òÂú®ÁÉ≠ÁÇπÊï∞ÊçÆÔºåÂèØËÉΩË¢´ÂèçÂ§çÊü•ËØ¢„ÄÇÂèçËßÇ ClickHouseÔºåÂè™Êúâ‰∏Ä‰∏™Èù¢Âêë IO ÁöÑ UnCompressedBlockCache ÂíåÁ≥ªÁªüÁöÑ PageCacheÔºå‰∏∫‰∫ÜÂÆûÁé∞Êõ¥‰ºòÁßÄÁöÑÂπ∂ÂèëÔºåÊàë‰ª¨ÂæàÂÆπÊòìÊÉ≥Âà∞Âú® Clickhouse Â§ñÈù¢Âä†‰∏ÄÂ±Ç CacheÔºåÊØîÂ¶Ç redisÔºå‰ΩÜÊòØÂàÜÊûêÂú∫ÊôØ‰∏ãÁöÑÊï∞ÊçÆÂíåÊü•ËØ¢ÈÉΩÊòØÂ§öÂèòÁöÑÔºåÊü•ËØ¢ÁªìÊûúÁ≠â Cache ÈÉΩ‰∏çÂÆπÊòìÂëΩ‰∏≠ÔºåËÄå‰∏îÂú®ÂπøÊäï‰∏öÂä°‰∏≠ÂÆûÊó∂Êü•ËØ¢ÁöÑÊï∞ÊçÆÊòØÂü∫‰∫é T ‰πãÂêé‰∏çÊñ≠Êõ¥Êñ∞ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ§ñÊåÇÁºìÂ≠òÂ∞ÜÈôç‰ΩéÊï∞ÊçÆÊü•ËØ¢ÁöÑÊó∂ÊïàÊÄß„ÄÇ</p><h2 id="ÊäÄÂ∑ß"><a href="#ÊäÄÂ∑ß" class="headerlink" title="ÊäÄÂ∑ß"></a>ÊäÄÂ∑ß</h2><h3 id="ÂîØ‰∏ÄÈîÆÁ∫¶Êùü"><a href="#ÂîØ‰∏ÄÈîÆÁ∫¶Êùü" class="headerlink" title="ÂîØ‰∏ÄÈîÆÁ∫¶Êùü"></a>ÂîØ‰∏ÄÈîÆÁ∫¶Êùü</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> qilu.t_01(</span><br><span class="line">C1 String,</span><br><span class="line">C2 String,</span><br><span class="line">C3 String,</span><br><span class="line">C4 <span class="type">Date</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (C1) # Ë¶ÅËÆæÁΩÆ‰∏ªÈîÆ</span><br><span class="line">) engine<span class="operator">=</span>ReplacingMergeTree() # ÂºïÊìéË¶ÅÁî®ReplacingMergeTree</span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> C1; # Ë¶ÅËÆæÁΩÆÊéíÂ∫è</span><br><span class="line"></span><br><span class="line">optimize <span class="keyword">table</span> t_01 <span class="keyword">FINAL</span>; # Ë¶ÅÂº∫Âà∂ÂêàÂπ∂ÂàÜÂå∫</span><br></pre></td></tr></table></figure><h1 id="sqlite"><a href="#sqlite" class="headerlink" title="sqlite"></a>sqlite</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rocky</span></span><br><span class="line">dnf install -y sqlite</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ubuntu</span></span><br><span class="line">apt-get install -y sqlite3</span><br></pre></td></tr></table></figure><h2 id="export-sql-file"><a href="#export-sql-file" class="headerlink" title="export sql file"></a>export sql file</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> init database</span></span><br><span class="line">sqlite3 /path/to/databaseFile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dump database</span></span><br><span class="line"><span class="meta">sqlite&gt;</span><span class="bash"> .output /path/to/<span class="built_in">export</span>/sqlFile  <span class="comment"># config output file path</span></span></span><br><span class="line"><span class="meta">sqlite&gt;</span><span class="bash"> .dump</span></span><br><span class="line"><span class="meta">sqlite&gt;</span><span class="bash"> .<span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><h1 id="rqlite"><a href="#rqlite" class="headerlink" title="rqlite"></a>rqlite</h1><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $GOPATH/src/github.com/rqlite/rqlite</span><br><span class="line">go install ./...  # install in $GOPATH/bin/ directory</span><br></pre></td></tr></table></figure><h2 id="deploy-cluster"><a href="#deploy-cluster" class="headerlink" title="deploy cluster"></a>deploy cluster</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> node 1</span></span><br><span class="line">nohup rqlited -node-id 1 -http-addr host1:4001 -raft-addr host1:4002 ~/rqlite/node &gt; rqlite.log 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. rqlited -node-id 1 -http-addr 172.20.7.232:4001 -raft-addr 172.20.7.232:4002 ~/rqlite/node</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> enter shell with host1 ip</span></span><br><span class="line">rqlite -H x.x.x.x -p 4001 </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check health</span></span><br><span class="line">curl http://x.x.x.x:4001/status | jq .</span><br><span class="line">curl http://x.x.x.x:4001/status?pretty</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> join cluster</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> node 2</span></span><br><span class="line">rqlited -node-id 2 -http-addr host2:4001 -raft-addr host2:4002 -join host1:4002 ~/node</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. nohup rqlited -node-id 2 -http-addr 172.20.7.233:14001 -raft-addr 172.20.7.233:14002 -join 172.20.7.232:14002 ~/rqlite/node &gt; rqlite.log 2&gt;&amp;1 &amp;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> node 3</span></span><br><span class="line">rqlited -node-id 3 -http-addr host3:4001 -raft-addr host3:4002 -join host1:4002 ~/node</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. nohup rqlited -node-id 3 -http-addr 172.20.7.234:14001 -raft-addr 172.20.7.234:14002 -join 172.20.7.232:14002 ~/rqlite/node &gt; rqlite.log 2&gt;&amp;1 &amp;</span></span><br></pre></td></tr></table></figure><h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">.nodes</span><br><span class="line">172.20.7.232:14001&gt; .nodes</span><br><span class="line">1:</span><br><span class="line">  leader: false</span><br><span class="line">  time: 2.63e-7</span><br><span class="line">  time_s: 433ns</span><br><span class="line">  id: 1</span><br><span class="line">  api_addr: http://172.20.7.232:14001</span><br><span class="line">  addr: 172.20.7.232:14002</span><br><span class="line">  voter: true</span><br><span class="line">  reachable: true</span><br><span class="line">2:</span><br><span class="line">  time_s: 409ns</span><br><span class="line">  id: 2</span><br><span class="line">  api_addr: http://172.20.7.233:14001</span><br><span class="line">  addr: 172.20.7.233:14002</span><br><span class="line">  voter: true</span><br><span class="line">  reachable: true</span><br><span class="line">  leader: true</span><br><span class="line">  time: 2.34e-7</span><br><span class="line">3:</span><br><span class="line">  api_addr: http://172.20.7.234:14001</span><br><span class="line">  addr: 172.20.7.234:14002</span><br><span class="line">  voter: true</span><br><span class="line">  reachable: true</span><br><span class="line">  leader: false</span><br><span class="line">  time: 1.91e-7</span><br><span class="line">  time_s: 354ns</span><br><span class="line">  id: 3</span><br></pre></td></tr></table></figure><h2 id="Restoring-from-SQLite"><a href="#Restoring-from-SQLite" class="headerlink" title="Restoring from SQLite"></a><a href="https://rqlite.io/docs/guides/backup/#restoring-from-sqlite">Restoring from SQLite</a></h2><h2 id="load"><a href="#load" class="headerlink" title="load"></a>load</h2><ul><li><p>method 1</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Convert SQLite database file to <span class="built_in">set</span> of SQL statements and <span class="keyword">then</span> load</span></span><br><span class="line">~ $ echo &#x27;.dump&#x27; | sqlite3 restore.sqlite &gt; restore.dump</span><br><span class="line">~ $ curl -XPOST localhost:4001/db/load -H &quot;Content-type: text/plain&quot; --data-binary @restore.dump</span><br></pre></td></tr></table></figure></li><li><p>method 2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Load directly from the SQLite file, <span class="built_in">which</span> is the recommended process.</span></span><br><span class="line">~ $ curl -v -XPOST localhost:4001/db/load -H &quot;Content-type: application/octet-stream&quot; --data-binary @restore.dump  # restore.dump ÊòØ sqlite dumpÁöÑÊñá‰ª∂ÔºådumpÂêéÁºÄÂêçÂè™ÊòØÂ≠óÈù¢Âê´‰πâÔºå‰∏çÊòØÂº∫Âà∂Ë¶ÅÊ±ÇÔºåÂèÇËÄÉ‰∏äÊñásqliteÁöÑdumpÊñá‰ª∂ÔºåÂØπÂ∫îÁöÑÊòØ sqlFile Êàñ databaseFile</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. curl -v -XPOST 172.20.0.52:14001/db/load -H <span class="string">&quot;Content-type: application/octet-stream&quot;</span> --data-binary @dingoadm.db</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊàñËÄÖ curl -v -XPOST 172.20.0.52:14001/db/load -H <span class="string">&quot;Content-type: application/octet-stream&quot;</span> --data-binary @dingoadm.sql</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="postgreSQL"><a href="#postgreSQL" class="headerlink" title="postgreSQL"></a>postgreSQL</h1><h3 id="ÁªàÁ´ØÁôªÂΩïpg"><a href="#ÁªàÁ´ØÁôªÂΩïpg" class="headerlink" title="ÁªàÁ´ØÁôªÂΩïpg"></a>ÁªàÁ´ØÁôªÂΩïpg</h3><ul><li><p>Â¶ÇÊûú‰πãÂâçÊ≤°ÊúâÁôªÂΩïËøáÔºåÈúÄË¶ÅËÆæÁΩÆÂΩìÂâçÁî®Êà∑ËøõË°åÁôªÂΩïÊìç‰Ωú</p><p>There is no default username and password without you creating one. The simplest possible setup is to follow these steps to set up your own user as a superuser.</p><p>At a terminal prompt, create a postgres user with your own username</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres createuser --superuser $USER# $USERÊó†È°ªÊõøÊç¢</span><br></pre></td></tr></table></figure><p>Start the postgresql command prompt as your username but running as root since you didn‚Äôt set a password yet;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><p>At the postgresql prompt, set your password;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\password $USER    # ÂÖ∂‰∏≠$USERÈúÄË¶ÅÊõøÊç¢ÊàêÂΩìÂâçÁî®Êà∑Âêç</span><br></pre></td></tr></table></figure><p>After that, you should be able to log on just fine.</p></li></ul><ul><li><p>Â¶ÇÊûú‰πãÂâçËÆæÁΩÆ‰∫Ü‰∏äÈù¢ÁöÑÊ≠•È™§ÔºåÂèØÁõ¥Êé•ËøêË°å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql postgres</span><br></pre></td></tr></table></figure></li></ul><h3 id="ÂØºÂÖ•Êñá‰ª∂"><a href="#ÂØºÂÖ•Êñá‰ª∂" class="headerlink" title="ÂØºÂÖ•Êñá‰ª∂"></a>ÂØºÂÖ•Êñá‰ª∂</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">psql postgres# login command</span><br><span class="line">\c some_database# choose database</span><br><span class="line">\i \path\TO\file_name.sql# execute sql</span><br></pre></td></tr></table></figure><h3 id="ËøûÊé•ÊåáÂÆöschema"><a href="#ËøûÊé•ÊåáÂÆöschema" class="headerlink" title="ËøûÊé•ÊåáÂÆöschema"></a>ËøûÊé•ÊåáÂÆöschema</h3><ul><li><p>Â¶ÇÊûú‰∏çÊåáÂÆöschemaÁöÑËØùÔºå‰ºöÈªòËÆ§ËÆøÈóÆpublicÁöÑschema</p></li><li><p>ÊåáÂÆöschema</p><p><code>jdbc:postgresql://localhost:5432/mydatabase?currentSchema=myschema</code></p></li></ul><h1 id="starrocks"><a href="#starrocks" class="headerlink" title="starrocks"></a>starrocks</h1><h2 id="ÂÆâË£ÖÈÉ®ÁΩ≤"><a href="#ÂÆâË£ÖÈÉ®ÁΩ≤" class="headerlink" title="ÂÆâË£ÖÈÉ®ÁΩ≤"></a>ÂÆâË£ÖÈÉ®ÁΩ≤</h2><h2 id="Ê≥®ÊÑèÈ°π"><a href="#Ê≥®ÊÑèÈ°π" class="headerlink" title="Ê≥®ÊÑèÈ°π"></a>Ê≥®ÊÑèÈ°π</h2><ul><li><p>ÂÆâË£ÖÂâçÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export STARROCKS_HOME=xxx</span><br></pre></td></tr></table></figure></li><li><p>ÂêØÂä®mysqlÂÆ¢Êà∑Á´Ø</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h &lt;fe_ip&gt; -P&lt;fe_query_port&gt; -uroot -p # ÂØÜÁ†Å‰∏∫Á©∫ÔºåÁõ¥Êé•ÂõûËΩ¶Âç≥ÂèØ</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="FE"><a href="#FE" class="headerlink" title="FE"></a>FE</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp | grep 18030</span><br><span class="line">netstat -tunlp | grep 19010</span><br><span class="line">netstat -tunlp | grep 19020</span><br><span class="line">netstat -tunlp | grep 19030</span><br><span class="line"></span><br><span class="line">http_port = 18030</span><br><span class="line">rpc_port = 19020</span><br><span class="line">query_port = 19030</span><br><span class="line">edit_log_port = 19010</span><br></pre></td></tr></table></figure><ul><li><p>ÂêØÂä®FE<br><code>start_fe.sh --daemon</code></p></li><li><p>Êü•ÁúãFEÁä∂ÊÄÅ+<br><code>SHOW PROC &#39;/frontends&#39;\G</code></p></li><li><p>Ê∑ªÂä†Êñ∞FEËäÇÁÇπÔºàfollowÂíåobserver)<br><code>./start_fe.sh --helper 172.18.244.74:19010 --daemon</code></p><p>Ê≥®ÊÑèÔºö</p><ul><li><p>Âú®mysql commandÂÖàÂ∞ÜÂÆû‰æãÊ∑ªÂä†ËøõÈõÜÁæ§ÔºåÁÑ∂ÂêéÈÄê‰∏™ÂêØÂä®ÂÆû‰æã„ÄÇÔºàÂè™Âú®È¶ñÊ¨°Êñ∞Â¢ûËäÇÁÇπÊó∂Êìç‰ΩúÔºâ</p></li><li><p>ÂêÑ‰∏™ËäÇÁÇπÁöÑÊó∂Èó¥‰∏ÄÂÆöË¶ÅÂêåÊ≠•Ôºå‰∏çÁÑ∂FEÁöÑÂøÉË∑≥Ë∂ÖËøá5sÊó∂Â∑ÆÔºåÂ∞±‰ºöÊä•Èîô</p></li></ul></li><li><p>Êâ©ÂÆπFE<br><code>ALTER SYSTEM ADD FOLLOWER &#39;ip:19010&#39;;</code><br><code>ALTER SYSTEM ADD observer &#39;ip:19010&#39;;</code></p></li><li><p>Áº©ÂÆπFE<br><code>ALTER SYSTEM DROP follower &quot;ip:19010&quot;;</code><br><code>ALTER SYSTEM DROP observer &quot;ip:19010&quot;;</code></p></li></ul><hr><h2 id="BE"><a href="#BE" class="headerlink" title="BE"></a>BE</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp | grep 19060</span><br><span class="line">netstat -tunlp | grep 18040</span><br><span class="line">netstat -tunlp | grep 19050</span><br><span class="line">netstat -tunlp | grep 18060</span><br><span class="line"></span><br><span class="line">be_port = 19060</span><br><span class="line">be_http_port = 18040</span><br><span class="line">heartbeat_service_port = 19050</span><br><span class="line">brpc_port = 18060</span><br></pre></td></tr></table></figure><ul><li><p>Êü•ÁúãBEÁä∂ÊÄÅ<br><code>SHOW PROC &#39;/backends&#39;\G</code></p></li><li><p>ÂêØÂä®BE<br><code>./start_be.sh --daemon</code></p></li><li><p>Ê∑ªÂä†BEËäÇÁÇπ<br><code>ALTER SYSTEM ADD BACKEND &quot;172.18.244.74:19050&quot;;</code></p></li><li><p>Áº©ÂÆπBEËäÇÁÇπ<br><code>ALTER SYSTEM DECOMMISSION BACKEND &quot;172.18.244.74:19050&quot;;</code><br>Á≠âÂæÖËØ•ËäÇÁÇπBE‰ªéÂàóË°®‰∏≠Ê∂àÂ§±ÔºàÊü•ÁúãÂëΩ‰ª§SHOW PROC ‚Äò/backends‚Äô;ÔºâÔºåÂç≥ÂèØ‰ΩøÁî®./stop_be.shÂÅúÊéâÊúçÂä°</p></li><li><p>Â¥©Ê∫ÉÊéíÊü•Êó•Âøó<code>be.out</code></p></li></ul><hr><h2 id="ÈÖçÁΩÆ‰øÆÊîπ"><a href="#ÈÖçÁΩÆ‰øÆÊîπ" class="headerlink" title="ÈÖçÁΩÆ‰øÆÊîπ"></a>ÈÖçÁΩÆ‰øÆÊîπ</h2><ul><li>FE‰øÆÊîπÁ´ØÂè£‰ø°ÊÅØÔºåÈúÄË¶ÅÊ∏ÖÁêÜmeta</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. ÈáçÂª∫metaÁõÆÂΩï</span><br><span class="line">2. ÈáçÂêØ‰∏ªËäÇÁÇπFE</span><br><span class="line">3. ÁôªÂΩïmysql commandÔºåÊ∑ªÂä†Êñ∞FEËäÇÁÇπÔºàfollowÂíåobserverÔºâÔºåÊ∑ªÂä†BEËäÇÁÇπ</span><br><span class="line">4. ÂêØÂä®followerÂíåobserverËäÇÁÇπ</span><br></pre></td></tr></table></figure><ul><li>BE‰øÆÊîπÁ´ØÂè£‰ø°ÊÅØÔºåÈúÄË¶ÅÊ∏ÖÁêÜstorage</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ÈáçÂª∫storageÁõÆÂΩïÔºàÊòØÂê¶ÂèØ‰ª•‰øÆÊîπcluster_idËøõË°åÈõÜÁæ§Â§ÑÁêÜÔºâ</span><br><span class="line">2. ÈÄê‰∏™ÂêØÂä®BEÊúçÂä°</span><br><span class="line">3. ÁôªÂΩïmysql commandÔºåÊ∑ªÂä†Êñ∞BEËäÇÁÇπÔºàALTER SYSTEM ADD BACKEND &quot;ip:19050&quot;;Ôºâ</span><br></pre></td></tr></table></figure><ul><li>‰øÆÊîπÂØÜÁ†Å<br><code>SET PASSWORD = PASSWORD(&#39;datacanvas&#39;)</code></li></ul><h2 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h2><ul><li>ËäÇÁÇπÊó∂Èó¥ÈúÄË¶ÅÂêåÊ≠•ÔºàÂª∂ËøüÈúÄË¶ÅÂú®5ÁßíÂÜÖÔºâÔºå‰∏çÁÑ∂starrocksÊó†Ê≥ïÊâ©ÂÆπFEËäÇÁÇπ</li></ul><h1 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h1><h2 id="logstash"><a href="#logstash" class="headerlink" title="logstash"></a>logstash</h2><ul><li><p>Logstash Forwarder/BeatsË¥üË¥£Âú®Ê∫êÊúçÂä°Âô®‰∏äÊî∂ÈõÜÊó•ÂøóÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞ÈõÜ‰∏≠ÂºèÁöÑLogstashÊàñKafkaÊúçÂä°Âô®„ÄÇ</p></li><li><p>LogstashÊòØ‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑÊï∞ÊçÆÊî∂ÈõÜÂºïÊìéÔºåÂÆÉÂèØ‰ª•‰ªéÂ§ö‰∏™Êù•Ê∫êÔºàÂåÖÊã¨Êó•ÂøóÊñá‰ª∂„ÄÅÊ†áÂáÜËæìÂÖ•„ÄÅBeatsÁ≠âÔºâÈááÈõÜÊï∞ÊçÆÔºåËøõË°åËΩ¨Êç¢„ÄÅËøáÊª§ÂíåËß£ÊûêÔºåÊúÄÂêéÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞ÂêÑÁßçÁõÆÁöÑÂú∞ÔºåÊØîÂ¶ÇElasticsearch„ÄÅKafkaÁ≠â„ÄÇÂú®Êó•ÂøóÂ§ÑÁêÜ‰∏≠ÔºåLogstashÂ∏∏Ë¢´Áî®‰ΩúÊï∞ÊçÆÁöÑËΩ¨Êç¢ÂíåÈ¢ÑÂ§ÑÁêÜÂ∑•ÂÖ∑„ÄÇ</p></li></ul><h1 id="mybatis"><a href="#mybatis" class="headerlink" title="mybatis"></a>mybatis</h1><h2 id="Áü•ËØÜÁÇπ"><a href="#Áü•ËØÜÁÇπ" class="headerlink" title="Áü•ËØÜÁÇπ"></a>Áü•ËØÜÁÇπ</h2><ul><li><p>about date jdbcType</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#&#123;beginDate,jdbcType=DATE&#125; (no time of the day), or</span><br><span class="line">#&#123;beginDate,jdbcType=TIMESTAMP&#125; (if you need to include the time of the day).</span><br></pre></td></tr></table></figure></li></ul><p>And the Java parameter you want to apply should be of type:</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.sql.Date (date without time)</span><br><span class="line">java.sql.Timestamp (timestamp)</span><br><span class="line">java.util.Date (date and time).</span><br></pre></td></tr></table></figure><ul><li><p>the Greater Than/Equal Operator and the Less Than/Equal Operators:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ROWNUM &amp;gt;= 20</span><br><span class="line">ROWNUM &amp;lt;= 20</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÈóÆÈ¢òËß£ÂÜ≥"><a href="#ÈóÆÈ¢òËß£ÂÜ≥" class="headerlink" title="ÈóÆÈ¢òËß£ÂÜ≥"></a>ÈóÆÈ¢òËß£ÂÜ≥</h2><p>‰ΩøÁî®SpringMVC+MybatisÊ°ÜÊû∂ÂÜôÈ°πÁõÆÁöÑÊó∂ÂÄôÔºåÂú®mapperÈáåÈù¢ÁöÑsqlËØ≠Âè•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span></span><br><span class="line">and update_time <span class="symbol">&amp;gt;</span> #&#123;updateTime,jdbcType=TIMESTAMP&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Âá∫ÈîôÔºö<code>There is no getter for property named &#39;updateTime&#39; in &#39;class java.util.Date&#39;</code></p><p>ÂéüÂõ†ÊòØÔºö<br>Â¶ÇÊûúÂ∞ÜandËØ≠Âè•‰∏≠ÁöÑ#ÔΩõÂ±ûÊÄßÔΩùÂÜôÂú®ifËØ≠Âè•‰∏≠Ôºåmybatis‰ºöÂéªÂØπË±°‰∏≠‰ªéÂÆÉÁöÑgetÊñπÊ≥ï‰∏≠ÂèñÂÄºÔºåËÄåÊàë‰πãÂâçÊòØÁõ¥Êé•‰º†ÈÄíÁöÑÂÄºÔºåÂπ∂Ê≤°ÊúâÂ∞ÅË£ÖÂØπË±°„ÄÇ<br>Ëß£ÂÜ≥ÂäûÊ≥ïÔºö</p><pre><code> 1. ÊääupdateTimeÈúÄÊîπ‰∏∫date 2. ÊääupdateTime‰ª£Ë°®ÁöÑÂèÇÊï∞Â∞ÅË£ÖÂà∞‰∏Ä‰∏™ÂØπË±°‰∏≠</code></pre>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> point </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cdc &amp; ÂÆûÊó∂Êï∞‰ªì points</title>
      <link href="/2021/12/29/cdc/"/>
      <url>/2021/12/29/cdc/</url>
      
        <content type="html"><![CDATA[<p><strong>Change Data CaptureÔºàÂèòÊõ¥Êï∞ÊçÆËé∑ÂèñÔºâ</strong></p><p>Ê†∏ÂøÉÊÄùÊÉ≥ÊòØÔºåÁõëÊµãÂπ∂ÊçïËé∑Êï∞ÊçÆÂ∫ìÁöÑÂèòÂä®ÔºàÂåÖÊã¨Êï∞ÊçÆÊàñÊï∞ÊçÆË°®ÁöÑÊèíÂÖ•„ÄÅÊõ¥Êñ∞‰ª•ÂèäÂà†Èô§Á≠âÔºâÔºåÂ∞ÜËøô‰∫õÂèòÊõ¥ÊåâÂèëÁîüÁöÑÈ°∫Â∫èÂÆåÊï¥ËÆ∞ÂΩï‰∏ãÊù•ÔºåÂÜôÂÖ•Âà∞Ê∂àÊÅØ‰∏≠Èó¥‰ª∂‰∏≠‰ª•‰æõÂÖ∂‰ªñÊúçÂä°ËøõË°åËÆ¢ÈòÖÂèäÊ∂àË¥π„ÄÇ</p><h2 id="Â∫îÁî®Âú∫ÊôØ"><a href="#Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="Â∫îÁî®Âú∫ÊôØ"></a>Â∫îÁî®Âú∫ÊôØ</h2><ul><li><strong>Êï∞ÊçÆÂêåÊ≠•</strong>ÔºåÁî®‰∫éÂ§á‰ªΩÔºåÂÆπÁÅæÔºõ</li><li><strong>Êï∞ÊçÆÂàÜÂèë</strong>Ôºå‰∏Ä‰∏™Êï∞ÊçÆÊ∫êÂàÜÂèëÁªôÂ§ö‰∏™‰∏ãÊ∏∏Ôºõ</li><li><strong>Êï∞ÊçÆÈááÈõÜ</strong>(E)ÔºåÈù¢ÂêëÊï∞ÊçÆ‰ªìÂ∫ì/Êï∞ÊçÆÊπñÁöÑ ETL Êï∞ÊçÆÈõÜÊàê„ÄÇ</li></ul><h2 id="ÂàÜÁ±ª"><a href="#ÂàÜÁ±ª" class="headerlink" title="ÂàÜÁ±ª"></a>ÂàÜÁ±ª</h2><p>‰∏ªË¶ÅÂàÜ‰∏∫<strong>Âü∫‰∫éÊü•ËØ¢</strong>Âíå<strong>Âü∫‰∫é Binlog</strong> ‰∏§ÁßçÊñπÂºè</p><h3 id="‰º†Áªü-CDC-ETL"><a href="#‰º†Áªü-CDC-ETL" class="headerlink" title="‰º†Áªü CDC ETL"></a>‰º†Áªü CDC ETL</h3><p><img src="/images/cdc/cdc_etl.png"></p><h3 id="Âü∫‰∫é-Flink-CDC-ÁöÑ-ETL-ÂàÜÊûê"><a href="#Âü∫‰∫é-Flink-CDC-ÁöÑ-ETL-ÂàÜÊûê" class="headerlink" title="Âü∫‰∫é Flink CDC ÁöÑ ETL ÂàÜÊûê"></a>Âü∫‰∫é Flink CDC ÁöÑ ETL ÂàÜÊûê</h3><p><img src="/images/cdc/flink_cdc_etl.png"></p><h3 id="Âü∫‰∫é-Flink-CDC-ÁöÑËÅöÂêàÂàÜÊûê"><a href="#Âü∫‰∫é-Flink-CDC-ÁöÑËÅöÂêàÂàÜÊûê" class="headerlink" title="Âü∫‰∫é Flink CDC ÁöÑËÅöÂêàÂàÜÊûê"></a>Âü∫‰∫é Flink CDC ÁöÑËÅöÂêàÂàÜÊûê</h3><p><img src="/images/cdc/flink_cdc_aggregate.png"></p><h3 id="Âü∫‰∫é-Flink-CDC-ÁöÑÊï∞ÊçÆÊâìÂÆΩ"><a href="#Âü∫‰∫é-Flink-CDC-ÁöÑÊï∞ÊçÆÊâìÂÆΩ" class="headerlink" title="Âü∫‰∫é Flink CDC ÁöÑÊï∞ÊçÆÊâìÂÆΩ"></a>Âü∫‰∫é Flink CDC ÁöÑÊï∞ÊçÆÊâìÂÆΩ</h3><p><img src="/images/cdc/flink_cdc_merge.png"></p><h2 id="ÊÄßËÉΩÁÇπ"><a href="#ÊÄßËÉΩÁÇπ" class="headerlink" title="ÊÄßËÉΩÁÇπ"></a>ÊÄßËÉΩÁÇπ</h2><p>Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑ 4 Á±ªÂú∫ÊôØÔºö</p><p><strong>B</strong>    batch    Á¶ªÁ∫øËÆ°ÁÆó</p><p><strong>A</strong>    Analytical    ‰∫§‰∫íÂºèÂàÜÊûê</p><p><strong>S</strong>    Servering    È´òÂπ∂ÂèëÁöÑÂú®Á∫øÊúçÂä°</p><p><strong>T</strong>    Transaction    ‰∫ãÂä°ÈöîÁ¶ªÊú∫Âà∂</p><blockquote><p>Á¶ªÁ∫øËÆ°ÁÆóÈÄöÂ∏∏Âú®ËÆ°ÁÆóÂ±ÇÔºåÊâÄ‰ª•Â∫îËØ•ÈáçÁÇπËÄÉËôë A„ÄÅS Âíå T</p></blockquote><h2 id="ËÄÉËôëÁÇπ"><a href="#ËÄÉËôëÁÇπ" class="headerlink" title="ËÄÉËôëÁÇπ"></a>ËÄÉËôëÁÇπ</h2><ul><li><p>‰øùËØÅÁ´ØÂà∞Á´ØÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåÂåÖÊã¨Áª¥Â∫¶‰∏ÄËá¥ÊÄß‰ª•ÂèäÂÖ®ÊµÅÁ®ãÊï∞ÊçÆ‰∏ÄËá¥ÊÄß;</p></li><li><p>ÂÆûÊó∂ÊµÅÂ§ÑÁêÜËøáÁ®ã‰∏≠Êï∞ÊçÆÂà∞ËææÈ°∫Â∫èÊó†Ê≥ïÈ¢ÑÁü•Êó∂ÔºåÂ¶Ç‰Ωï‰øùËØÅÂèåÊµÅ join Êó∂Êï∞ÊçÆËÉΩÂèäÊó∂ÂÖ≥ËÅîÂêåÊó∂‰∏çÈÄ†ÊàêÊï∞ÊçÆÂ†µÂ°ûÔºõ</p></li><li><p>Oracle</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.Oracle ÊòØÁ¨¨‰∏âÊñπÂéÇÂïÜÁª¥Êä§ÁöÑÔºå‰∏çÂÖÅËÆ∏ÂØπÁ∫ø‰∏äÁ≥ªÁªüÊúâËøáÂ§öÁöÑ‰æµÂÖ•ÔºåÂÆπÊòìÈÄ†ÊàêÁõëÂê¨ÊïÖÈöúÁîöËá≥Á≥ªÁªüÁò´Áó™Ôºå</span><br><span class="line">2.ÂΩíÊ°£Êó•ÂøóÊòØÂú®ÂºÄÂêØÈÇ£‰∏ÄÂàªËµ∑ÊâçÂºÄÂßãÁîüÊàêÁöÑÔºå‰πãÂâçÁöÑÂ≠òÈáèÊï∞ÊçÆÈöæ‰ª•ËøõÂÖ• kafkaÔºå‰ΩÜÊòØÂêéÊù•ÂÆûÊó∂Êï∞ÊçÆÂèàÂøÖÈ°ª‰æùËµñÂâçÈù¢ÁöÑËÆ°ÁÆóÁªìÊûú</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÂÆûÊó∂Êï∞‰ªìÊñπÊ°à"><a href="#ÂÆûÊó∂Êï∞‰ªìÊñπÊ°à" class="headerlink" title="ÂÆûÊó∂Êï∞‰ªìÊñπÊ°à"></a>ÂÆûÊó∂Êï∞‰ªìÊñπÊ°à</h2><h3 id="Lambda-Êû∂ÊûÑ"><a href="#Lambda-Êû∂ÊûÑ" class="headerlink" title="Lambda Êû∂ÊûÑ"></a>Lambda Êû∂ÊûÑ</h3><blockquote><p>ÁõÆÂâç‰∏ªÊµÅÁöÑ‰∏ÄÂ•óÂÆûÊó∂Êï∞‰ªìÊû∂ÊûÑÔºåÂ≠òÂú®Á¶ªÁ∫øÂíåÂÆûÊó∂‰∏§Êù°ÈìæË∑Ø„ÄÇÂÆûÊó∂ÈÉ®ÂàÜ‰ª•Ê∂àÊÅØÈòüÂàóÁöÑÊñπÂºèÂÆûÊó∂Â¢ûÈáèÊ∂àË¥πÔºå‰∏ÄËà¨‰ª• Flink+Kafka ÁöÑÁªÑÂêàÂÆûÁé∞ÔºåÁª¥Â∫¶Ë°®Â≠òÂú®ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊàñËÄÖ HBaseÔºõÁ¶ªÁ∫øÈÉ®ÂàÜ‰∏ÄËà¨ÈááÁî® T+1 Âë®ÊúüË∞ÉÂ∫¶ÂàÜÊûêÂéÜÂè≤Â≠òÈáèÊï∞ÊçÆÔºåÊØèÂ§©ÂáåÊô®‰∫ßÂá∫ÔºåÊõ¥Êñ∞Ë¶ÜÁõñÂâç‰∏ÄÂ§©ÁöÑÁªìÊûúÊï∞ÊçÆÔºåËÆ°ÁÆóÂºïÊìéÈÄöÂ∏∏‰ºöÈÄâÊã© Hive ÊàñËÄÖ Spark„ÄÇ</p></blockquote><p><img src="/images/cdc/structure_lambda.png"></p><h3 id="Kappa-Êû∂ÊûÑ"><a href="#Kappa-Êû∂ÊûÑ" class="headerlink" title="Kappa Êû∂ÊûÑ"></a>Kappa Êû∂ÊûÑ</h3><blockquote><p>Áõ∏ËæÉ‰∫é Lambda Êû∂ÊûÑÔºåÂÆÉÁßªÈô§‰∫ÜÁ¶ªÁ∫øÁîü‰∫ßÈìæË∑ØÔºåÊÄùË∑ØÊòØÈÄöËøá‰º†ÈÄí‰ªªÊÑèÊÉ≥Ë¶ÅÁöÑ offset(ÂÅèÁßªÈáè)Êù•ËææÂà∞ÈáçÊñ∞Ê∂àË¥πÂ§ÑÁêÜÂéÜÂè≤Êï∞ÊçÆÁöÑÁõÆÁöÑ„ÄÇ‰ºòÁÇπÊòØÊû∂ÊûÑÁõ∏ÂØπÁÆÄÂåñÔºåÊï∞ÊçÆÊù•Ê∫êÂçï‰∏ÄÔºåÂÖ±Áî®‰∏ÄÂ•ó‰ª£Á†ÅÔºåÂºÄÂèëÊïàÁéáÈ´òÔºõÁº∫ÁÇπÊòØÂøÖÈ°ªË¶ÅÊ±ÇÊ∂àÊÅØÈòüÂàó‰∏≠‰øùÂ≠ò‰∫ÜÂ≠òÈáèÊï∞ÊçÆÔºåËÄå‰∏î‰∏ªË¶Å‰∏öÂä°ÈÄªËæëÂú®ËÆ°ÁÆóÂ±ÇÔºåÊØîËæÉÊ∂àËÄóÂÜÖÂ≠òËµÑÊ∫ê„ÄÇ</p></blockquote><p><img src="/images/cdc/structure_kappa.png"></p><h3 id="OLAP-Âèò‰ΩìÊû∂ÊûÑ"><a href="#OLAP-Âèò‰ΩìÊû∂ÊûÑ" class="headerlink" title="OLAP Âèò‰ΩìÊû∂ÊûÑ"></a>OLAP Âèò‰ΩìÊû∂ÊûÑ</h3><blockquote><p>ÊòØ Kappa Êû∂ÊûÑÁöÑËøõ‰∏ÄÊ≠•ÊºîÂåñÔºåÂÆÉÁöÑÊÄùË∑ØÊòØÂ∞ÜËÅöÂêàÂàÜÊûêËÆ°ÁÆóÁî± OLAP ÂºïÊìéÊâøÊãÖÔºåÂáèËΩªÂÆûÊó∂ËÆ°ÁÆóÈÉ®ÂàÜÁöÑËÅöÂêàÂ§ÑÁêÜÂéãÂäõ„ÄÇ‰ºòÁÇπÊòØËá™Áî±Â∫¶È´òÔºåÂèØ‰ª•Êª°Ë∂≥Êï∞ÊçÆÂàÜÊûêÂ∏àÁöÑÂÆûÊó∂Ëá™Âä©ÂàÜÊûêÈúÄÊ±ÇÔºåÂáèËΩª‰∫ÜËÆ°ÁÆóÂºïÊìéÁöÑÂ§ÑÁêÜÂéãÂäõÔºõÁº∫ÁÇπÊòØÂøÖÈ°ªË¶ÅÊ±ÇÊ∂àÊÅØÈòüÂàó‰∏≠‰øùÂ≠òÂ≠òÈáèÊï∞ÊçÆÔºå‰∏îÂõ†‰∏∫ÊòØÂ∞ÜËÆ°ÁÆóÈÉ®ÂàÜÁöÑÂéãÂäõËΩ¨ÁßªÂà∞‰∫ÜÊü•ËØ¢Â±ÇÔºåÂØπÊü•ËØ¢ÂºïÊìéÁöÑÂêûÂêêÂíåÂÆûÊó∂ÊëÑÂÖ•ÊÄßËÉΩË¶ÅÊ±ÇËæÉÈ´ò„ÄÇ</p></blockquote><p><img src="/images/cdc/structure_olap.png"></p><h3 id="Êï∞ÊçÆÊπñÊû∂ÊûÑ"><a href="#Êï∞ÊçÆÊπñÊû∂ÊûÑ" class="headerlink" title="Êï∞ÊçÆÊπñÊû∂ÊûÑ"></a>Êï∞ÊçÆÊπñÊû∂ÊûÑ</h3><blockquote><p>Â≠òÂÇ®„ÄÅËÆ°ÁÆóÂíåÊü•ËØ¢ÔºåÂàÜÂà´Áî±‰∏â‰∏™Áã¨Á´ã‰∫ßÂìÅË¥üË¥£ÔºåÂàÜÂà´ÊòØÊï∞ÊçÆÊπñ„ÄÅFlink Âíå Clickhouse„ÄÇÊï∞‰ªìÂàÜÂ±ÇÂ≠òÂÇ®ÂíåÁª¥Â∫¶Ë°®ÁÆ°ÁêÜÂùáÁî±Êï∞ÊçÆÊπñÊâøÊãÖÔºåFlink SQL Ë¥üË¥£ÊâπÊµÅ‰ªªÂä°ÁöÑ SQL ÂåñÂçèÂêåÂºÄÂèëÔºåClickhouse ÂÆûÁé∞Âèò‰ΩìÁöÑ‰∫ãÂä°Êú∫Âà∂Ôºå‰∏∫Áî®Êà∑Êèê‰æõÁ¶ªÁ∫øÂàÜÊûêÂíå‰∫§‰∫íÊü•ËØ¢„ÄÇCDC Âà∞Ê∂àÊÅØÈòüÂàóËøô‰∏ÄÈìæË∑ØÂ∞ÜÊù•ÊòØÂÆåÂÖ®ÂèØ‰ª•ÂéªÊéâÁöÑÔºåÂè™ÈúÄË¶Å Flink CDC ÂÆ∂Êóè‰∏≠ÂÜçÊ∑ªÂä† Oracle CDC ‰∏ÄÂëò„ÄÇÊú™Êù•ÔºåÂÆûÊó∂Êï∞‰ªìÊû∂ÊûÑÂ∞ÜÂæóÂà∞ÊûÅËá¥ÁöÑÁÆÄÂåñÂπ∂‰∏îÊÄßËÉΩÊúâË¥®ÁöÑÊèêÂçá„ÄÇ</p></blockquote><p><img src="/images/cdc/structure_rtdb.png"></p>]]></content>
      
      
      <categories>
          
          <category> cdc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> point </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macos</title>
      <link href="/2021/12/20/macos/"/>
      <url>/2021/12/20/macos/</url>
      
        <content type="html"><![CDATA[<h1 id="shortcuts"><a href="#shortcuts" class="headerlink" title="shortcuts"></a>shortcuts</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">‚åÉ‚åò+F   ÊúÄÂ§ßÂåñÁ™óÂè£</span><br><span class="line">‚åò+M    ÊúÄÂ∞èÂåñÁ™óÂè£</span><br><span class="line">‚åò+H    ÈöêËóèÁ®ãÂ∫èÁöÑÊâÄÊúâÁ™óÂè£</span><br><span class="line">‚åò+W    ÂÖ≥Èó≠Á™óÂè£</span><br><span class="line">‚åò+Q    ÂÖ≥Èó≠Á®ãÂ∫è</span><br><span class="line">shift + ‚åò + 5    Êà™Â±è</span><br><span class="line">HomeÈîÆ   Fn+Â∑¶ÊñπÂêë</span><br><span class="line">EndÈîÆ    Fn+Âè≥ÊñπÂêë</span><br><span class="line">Control+Space  ËæìÂÖ•Ê≥ïÂàáÊç¢</span><br><span class="line">command + shift + . ÊòæÁ§∫/ÈöêËóèÊñá‰ª∂ÊàñÁõÆÂΩï</span><br><span class="line">Fn-‰∏äÁÆ≠Â§¥ÔºöPage UpÔºöÂêë‰∏äÊªöÂä®‰∏ÄÈ°µ</span><br><span class="line">Fn-‰∏ãÁÆ≠Â§¥ÔºöPage DownÔºöÂêë‰∏ãÊªöÂä®‰∏ÄÈ°µ</span><br><span class="line">Fn-Â∑¶ÁÆ≠Â§¥ÔºöHomeÔºöÊªöÂä®Âà∞ÊñáÁ®øÂºÄÂ§¥</span><br><span class="line">Fn-Âè≥ÁÆ≠Â§¥ÔºöEndÔºöÊªöÂä®Âà∞ÊñáÁ®øÊú´Â∞æ</span><br></pre></td></tr></table></figure><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="brew"><a href="#brew" class="headerlink" title="brew"></a>brew</h2><ul><li><p>Disable  auto update when install </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">temp method 1:</span><br><span class="line">HOMEBREW_NO_AUTO_UPDATE=1 brew install &lt;formula&gt;</span><br><span class="line"></span><br><span class="line">temp method 2:</span><br><span class="line">export HOMEBREW_NO_AUTO_UPDATE=1</span><br><span class="line"></span><br><span class="line">permanently method:</span><br><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.bashrc</span></span><br><span class="line">export HOMEBREW_NO_AUTO_UPDATE=1</span><br><span class="line">source ~/.bashrc</span><br><span class="line">or</span><br><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.zshrc</span></span><br><span class="line">export HOMEBREW_NO_AUTO_UPDATE=1</span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure></li><li><p>upgrade app</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HOMEBREW_NO_AUTO_UPDATE=1 brew upgrade &lt;app&gt;  # disable update</span><br></pre></td></tr></table></figure></li></ul><h2 id="PORT"><a href="#PORT" class="headerlink" title="PORT"></a>PORT</h2><ul><li><p>Êü•ÁúãÊåáÂÆöËøõÁ®ãpidÁöÑÂç†Áî®Á´ØÂè£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i -P -n | grep LISTEN | grep &#123;pid&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="monitor"><a href="#monitor" class="headerlink" title="monitor"></a>monitor</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo asitop --interval 10</span><br></pre></td></tr></table></figure><h2 id="memory"><a href="#memory" class="headerlink" title="memory"></a>memory</h2><p>top -l 1 | head -n 10</p><h2 id="finder"><a href="#finder" class="headerlink" title="finder"></a>finder</h2><p>Âø´ÈÄüÂÆö‰ΩçÁõÆÂΩï Shift + Command + G</p><p>ÊòæÁ§∫ÈöêËóèÊñá‰ª∂ Shift + Command + .</p><h2 id="service"><a href="#service" class="headerlink" title="service"></a>service</h2><p>The Mac equivalent to <code>systemctl</code> or <code>service</code> is <code>launchctl</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Êü•ÁúãÊâÄÊúâÁöÑ plist ÊúçÂä°</span></span><br><span class="line">launchctl list</span><br><span class="line"></span><br><span class="line"><span class="comment"># Á¶ÅÁî®ÊúçÂä°</span></span><br><span class="line">launchctl <span class="built_in">disable</span> /Library/LaunchDaemons/com.simonkuang.macos.coredns.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂêØÁî®ÊúçÂä°</span></span><br><span class="line">launchctl <span class="built_in">disable</span> /Library/LaunchDaemons/com.simonkuang.macos.coredns.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># ÊùÄÊ≠ªËøõÁ®ãÔºà‰∏ç‰ºòÈõÖÂú∞ÊùÄÔºåÁõ¥Êé•ÊùÄËøõÁ®ãÔºâÂπ∂ÈáçÂêØÊúçÂä°„ÄÇÂØπ‰∏Ä‰∫õÂÅúÊ≠¢ÂìçÂ∫îÁöÑÊúçÂä°ÊúâÊïà„ÄÇ</span></span><br><span class="line">launchctl kickstart -k /Library/LaunchDaemons/com.simonkuang.macos.coredns.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âú®‰∏ç‰øÆÊîπ Disabled ÈÖçÁΩÆÁöÑÂâçÊèê‰∏ãÂêØÂä®ÊúçÂä°</span></span><br><span class="line">launchctl start /Library/LaunchDaemons/com.simonkuang.macos.coredns.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âú®‰∏ç‰øÆÊîπ Disabled ÈÖçÁΩÆÁöÑÂâçÊèê‰∏ãÂÅúÊ≠¢ÊúçÂä°</span></span><br><span class="line">launchctl stop /Library/LaunchDaemons/com.simonkuang.macos.coredns.plist</span><br></pre></td></tr></table></figure><h2 id="extract"><a href="#extract" class="headerlink" title="extract"></a>extract</h2><ul><li>zip</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ditto -V -x -k --sequesterRsrc filename.zip destination</span><br></pre></td></tr></table></figure><h2 id="File"><a href="#File" class="headerlink" title="File"></a>File</h2><ul><li>Ëß£ÂéãÂ∏¶Êúâ‰∏≠ÊñáÂêçÁß∞ÁöÑzipÂåÖ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ditto -V -x -k --sequesterRsrc filename.zip destination</span><br></pre></td></tr></table></figure><ul><li><p>Êü•ÁúãÁõÆÂΩï‰∏ãÊñá‰ª∂Â§πÂ§ßÂ∞è</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -d 1 -h    ÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ãÊâÄÊúâÊñá‰ª∂Â§πÁöÑÂ§ßÂ∞è -d ÊåáÊ∑±Â∫¶ÔºåÂêéÈù¢Âä†‰∏Ä‰∏™Êï∞ÂÄº</span><br><span class="line">Êàñ</span><br><span class="line">du -hd1</span><br></pre></td></tr></table></figure></li></ul><h2 id="Install-pkg"><a href="#Install-pkg" class="headerlink" title="Install pkg"></a>Install pkg</h2><p>a.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo installer -pkg /path/to/package.pkg -target /</span><br><span class="line"><span class="comment"># will install the package in /Applications.</span></span><br></pre></td></tr></table></figure><p>Here <code>/</code> is the mount point of <code>Macintosh HD</code> volume. <code>-target</code> accepts path like <code>&quot;/Volumes/Macintosh HD&quot;</code>, or <code>/dev/disk0</code> also.</p><p>b.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">installer -pkg myapp.pkg -target CurrentUserHomeDirectory</span><br><span class="line"><span class="comment">#will install the package in ~/Applications.</span></span><br></pre></td></tr></table></figure><h2 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h2><p><strong>Using base64 to decode some text</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base64 --decode</span><br><span class="line">VGhpcyBpcyBiYXNlNjQgZW5jb2RlZAo=</span><br><span class="line">[ctrl+d]</span><br></pre></td></tr></table></figure><h1 id="soft"><a href="#soft" class="headerlink" title="soft"></a>soft</h1><h2 id="wechat"><a href="#wechat" class="headerlink" title="wechat"></a>wechat</h2><ul><li><p>Âú®Á≥ªÁªüËØ≠Ë®ÄËÆæÁΩÆenglishÁöÑÊÉÖÂÜµ‰∏ãÔºåËÆæÁΩÆÂæÆ‰ø°ÁöÑlanguage</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.tencent.xinWeChat AppleLanguages &#x27;(&quot;zh-CN&quot;)&#x27;</span><br></pre></td></tr></table></figure></li></ul><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><ul><li><a href="https://stackoverflow.com/questions/10757169/location-of-my-cnf-file-on-macos">https://stackoverflow.com/questions/10757169/location-of-my-cnf-file-on-macos</a>)</li></ul><p>Êú™ÈÄöËøábrewÂÆâË£ÖÔºåÂÆâË£ÖË∑ØÂæÑ/usr/local/mysql</p><p>mysql    loginÔºö1qaz2wsx</p><ul><li><p>ÊöÇÊú™ÈÖçÁΩÆmy.cnfÊñá‰ª∂</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql --<span class="built_in">help</span> | grep my.cnf</span><br><span class="line">order of preference, my.cnf, <span class="variable">$MYSQL_TCP_PORT</span>,</span><br><span class="line">/etc/my.cnf /etc/mysql/my.cnf /usr/<span class="built_in">local</span>/mysql/etc/my.cnf ~/.my.cnf</span><br></pre></td></tr></table></figure></li><li><p><a href="https://stackoverflow.com/questions/10757169/location-of-my-cnf-file-on-macos">Location of my.cnf file on macOS</a></p></li></ul><h2 id="dbeaver"><a href="#dbeaver" class="headerlink" title="dbeaver"></a>dbeaver</h2><ul><li><p>scriptËÑöÊú¨‰ΩçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/dongwei/Library/DBeaverData/workspace6/dingoDB/Scripts</span><br></pre></td></tr></table></figure></li></ul><h2 id="age"><a href="#age" class="headerlink" title="age"></a>age</h2><p>Âä†ÂØÜÂ∑•ÂÖ∑ÔºåÈÄöËøábrewÂÆâË£Ö</p><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>ÁéØÂ¢ÉÈÖçÁΩÆ <code>ln -s /Applications/Docker.app/Contents/Resources/bin/docker /usr/local/bin/docker</code></p><p>ÂêØÂä®ÊúçÂä°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -a Docker</span><br></pre></td></tr></table></figure><h2 id="kafka"><a href="#kafka" class="headerlink" title="kafka"></a>kafka</h2><ul><li>ÂÆâË£ÖÁõÆÂΩï <code>/Users/dongwei/Applications/confluent-7.0.1</code></li><li>ÂêØÂä®ÂëΩ‰ª§ ÂÖàÂêØÂä®zookeeperÔºåÁÑ∂ÂêéÂêØÂä®kafka</li></ul><h2 id="wmvÔºàmicrosoftÈü≥È¢ëÊ†ºÂºèÔºâ"><a href="#wmvÔºàmicrosoftÈü≥È¢ëÊ†ºÂºèÔºâ" class="headerlink" title="wmvÔºàmicrosoftÈü≥È¢ëÊ†ºÂºèÔºâ"></a>wmvÔºàmicrosoftÈü≥È¢ëÊ†ºÂºèÔºâ</h2><ul><li>‰ΩøÁî®Êí≠ÊîæËΩØ‰ª∂elmedia player</li></ul><h2 id="shadowsocksR-NG"><a href="#shadowsocksR-NG" class="headerlink" title="shadowsocksR-NG"></a>shadowsocksR-NG</h2><p>‰ºöÊääËá™Â∑±ÁöÑlogÊñá‰ª∂Ôºö<strong>ss-local.log</strong></p><p>‰øùÂ≠òÂú®Ë∑ØÂæÑÔºö~/Library/Logs/ss-local.log</p><p><a href="https://www.twisted-meadows.com/shadowsocksx-ng">https://www.twisted-meadows.com/shadowsocksx-ng</a></p><h2 id="clashx"><a href="#clashx" class="headerlink" title="clashx"></a>clashx</h2><p>Ëß£ÊûêÂú∞ÂùÄÂá∫ÈîôÊó∂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ÊÇ®ÁöÑËøûÊé•‰∏çÊòØÁßÅÂØÜËøûÊé•</span><br><span class="line">ÊîªÂáªËÄÖÂèØËÉΩ‰ºöËØïÂõæ‰ªé [www.google.com](&lt;http://www.google.com/&gt;) Á™ÉÂèñÊÇ®ÁöÑ‰ø°ÊÅØÔºà‰æãÂ¶ÇÔºöÂØÜÁ†Å„ÄÅÈÄöËÆØÂÜÖÂÆπÊàñ‰ø°Áî®Âç°‰ø°ÊÅØÔºâ</span><br></pre></td></tr></table></figure><p>Êõ¥Êç¢ËäÇÁÇπÂç≥ÂèØ</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/11c3cef1-d99c-462a-b3c0-28a43b4b7f0a/Untitled.png" alt="Untitled"></p><h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><ul><li>Â§öË°åÁºñËæë  <code>option+shift+ÈÄâ‰∏≠</code></li></ul><h2 id="intellij-idea"><a href="#intellij-idea" class="headerlink" title="intellij idea"></a>intellij idea</h2><ul><li>ÂéªÈô§Êó†Áî®ÁöÑimportÂºïÁî®<code>control + option + o</code></li><li>‰ª£Á†ÅÊ†ºÂºèÂåñ  <code>command + option + l</code></li></ul><h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><p>‰ΩøÁî®brewÂÆâË£Ö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services start/stop/info redis</span><br></pre></td></tr></table></figure><h2 id="elastic"><a href="#elastic" class="headerlink" title="elastic"></a>elastic</h2><ul><li><p>ÂêØÂä®</p><p>./bin/elasticsearch</p></li></ul><h2 id="Translate"><a href="#Translate" class="headerlink" title="Translate"></a>Translate</h2><ul><li><p>homebrewÂÆâË£ÖÁöÑtranslate-shell</p><p><a href="https://www.soimort.org/translate-shell/">https://www.soimort.org/translate-shell/</a></p><p>ÊöÇÊó∂ËøòÊúâÈóÆÈ¢ò</p><p>ÂÆâË£ÖgawkÊó∂ÊèêÁ§∫Ôºà<a href="https://macappstore.org/gawk/%EF%BC%89">https://macappstore.org/gawk/Ôºâ</a></p><p>gawk: no bottle available!</p></li></ul><h2 id="karabiner"><a href="#karabiner" class="headerlink" title="karabiner"></a>karabiner</h2><h2 id="mc"><a href="#mc" class="headerlink" title="mc"></a>mc</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> binary file</span></span><br><span class="line">curl https://dl.min.io/client/mc/release/darwin-arm64/mc -o $HOME/Applications/minio-binaries/mc</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> directory</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HOME/Applications/minio-binaries</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> link</span></span><br><span class="line">sudo ln -s $HOME/Applications/minio-binaries/mc /usr/local/bin/mc</span><br></pre></td></tr></table></figure><h2 id="Á†¥Ëß£ËΩØ‰ª∂ÂÆâË£Ö"><a href="#Á†¥Ëß£ËΩØ‰ª∂ÂÆâË£Ö" class="headerlink" title="Á†¥Ëß£ËΩØ‰ª∂ÂÆâË£Ö"></a>Á†¥Ëß£ËΩØ‰ª∂ÂÆâË£Ö</h2><ul><li><p><a href="https://xmac.app/">https://xmac.app/</a></p><ul><li><p>‰∏ãËΩΩÂÆåÊàê‰πãÂêéÔºåÂÆâË£ÖdmgÊñá‰ª∂‰πãÂêéÔºåÈúÄË¶ÅÊâßË°åHelp.txtÈáåÈù¢ÁöÑÊñáÂ≠ó</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Option</span> <span class="symbol">I</span></span><br><span class="line"><span class="symbol">For</span> a certain application run in <span class="symbol">Terminal</span>:(ÊàëÈÄâÊã©ËøôÁßçÊñπÂºè)</span><br><span class="line">sudo xattr -rd com.apple.quarantine /<span class="symbol">Applications</span>/<span class="symbol">LockedApp</span>.app</span><br><span class="line"></span><br><span class="line"><span class="symbol">Option</span> <span class="symbol">II</span></span><br><span class="line"><span class="symbol">To</span> disable checks globally run in <span class="symbol">Terminal</span>:</span><br><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="ÊêúÁãóËæìÂÖ•Ê≥ï"><a href="#ÊêúÁãóËæìÂÖ•Ê≥ï" class="headerlink" title="ÊêúÁãóËæìÂÖ•Ê≥ï"></a>ÊêúÁãóËæìÂÖ•Ê≥ï</h2><ul><li>ÁÆÄÁπÅ‰ΩìÂàáÊç¢<ul><li><code>ctrol + shift + F</code></li></ul></li></ul><h2 id="ja-netfilter"><a href="#ja-netfilter" class="headerlink" title="ja-netfilter"></a>ja-netfilter</h2><blockquote><p>jetbrains activate tool</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Appearance &amp; Behavior -&gt; System Settings -&gt; Language and Region -&gt; Region</span><br><span class="line">ÈúÄË¶ÅÈÄâÊã© Asia(except china mainland)</span><br><span class="line">ÊøÄÊ¥ªËÑöÊú¨‰æùÁÑ∂‰ΩøÁî®ÂéüÊù•ÁöÑ script/install.sh</span><br></pre></td></tr></table></figure><h3 id="PlantUML"><a href="#PlantUML" class="headerlink" title="PlantUML"></a>PlantUML</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install plantuml</span><br></pre></td></tr></table></figure><h3 id="mermaid"><a href="#mermaid" class="headerlink" title="mermaid"></a>mermaid</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @mermaid-js/mermaid-cli</span><br></pre></td></tr></table></figure><h1 id="gpu"><a href="#gpu" class="headerlink" title="gpu"></a>gpu</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo asitop --interval 10</span><br></pre></td></tr></table></figure><h1 id="keyboard"><a href="#keyboard" class="headerlink" title="keyboard"></a>keyboard</h1><p><strong>Keyboard Combinations for Common Special Characters</strong></p><p>Here are a few of the most common symbols and their corresponding key combination.<br>Note that <strong>OPTION</strong> + <strong>2</strong> simply means hold down the option key (the alt key) and the number 2.</p><p><strong>Currency Symbols</strong></p><ul><li><strong>‚Ç¨</strong> (Euro sign): <strong>OPTION</strong> + <strong>2</strong></li><li><strong>¬¢</strong> (Cent sign): <strong>OPTION</strong> + <strong>4</strong></li><li><strong>¬•</strong> (Yen sign): <strong>OPTION</strong> + <strong>y</strong></li></ul><p><strong>Copyright and Trademark Symbols</strong></p><ul><li><strong>¬Æ</strong> (registered trademark): <strong>OPTION</strong> + <strong>r</strong></li><li><strong>¬©</strong> (copyright): <strong>OPTION</strong> + <strong>g</strong></li><li><strong>‚Ñ¢</strong> (trademark): <strong>OPTION</strong> + <strong>shift</strong> + <strong>2</strong></li></ul><p><strong>Mathematical Symbols</strong></p><ul><li><strong>√∑</strong> (division): <strong>OPTION</strong> + <strong>?</strong></li><li><strong>‚â§</strong> (less than or equal to): <strong>OPTION</strong> + <strong>&lt;</strong></li><li><strong>‚â•</strong> (greater than or equal to): <strong>OPTION</strong> + <strong>&gt;</strong></li><li><em><strong>*^*</strong></em> (circumflex): <em><strong>*OPTION** + **i*</strong></em></li><li><strong>‚àö</strong> (square root): <strong>OPTION</strong> + <strong>v</strong></li><li><strong>‚â†</strong> (not equal to): <strong>OPTION</strong> + <strong>=</strong></li><li><strong>‚âà</strong> (almost equal to): <strong>OPTION</strong> + <strong>x</strong></li><li><strong>¬±</strong> (plus-minus): <strong>OPTION</strong> + <strong>shift</strong> + <strong>=</strong></li><li><strong>‚àû</strong> (infinity): <strong>OPTION</strong> + <strong>5</strong></li><li><strong>√∏</strong> (empty set): <strong>OPTION</strong> + <strong>o</strong></li><li><strong>‚àë</strong> (N-ary summation or Sigma): <strong>OPTION</strong> + <strong>w</strong></li><li><strong>∆í</strong> (function): <strong>OPTION</strong> + <strong>f</strong></li><li><strong>‚à´</strong> (integral): <strong>OPTION</strong> + <strong>b</strong></li><li><strong>‚àÇ</strong> (partial differential): <strong>OPTION</strong> + <strong>d</strong></li></ul><p><strong>Punctuation and Quote Marks</strong></p><ul><li><strong>‚Äú</strong> (left double quotation mark): <strong>OPTION</strong> + <strong>[</strong></li><li><strong>‚Äù</strong> (right double quotation mark): <strong>OPTION</strong> + <strong>SHIFT</strong> + <strong>[</strong></li><li><strong>‚Äò</strong> (left single quotation mark): <strong>OPTION</strong> + <strong>]</strong></li><li><strong>‚Äô</strong> (right single quotation mark): <strong>OPTION</strong> + <strong>SHIFT</strong> + <strong>]</strong></li><li><strong>‚Äû</strong> (double low-9 quotation mark): <strong>OPTION</strong> + <strong>SHIFT</strong> + <strong>w</strong></li><li><strong>¬ø</strong> (inverted question mark): <strong>OPTION</strong> + <strong>SHIFT</strong> + <strong>?</strong></li><li>‚Ä¢ (bullet): <em>*<em>*</em>*OPTION**** + *</em>**8**<em>*</em>*</li></ul><p><strong>Miscellaneous</strong></p><ul><li><strong>Ô£ø</strong> (Apple symbol): <strong>OPTION</strong> + <strong>SHIFT</strong> + <strong>k</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> macos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker image</title>
      <link href="/2021/12/17/docker%20image/"/>
      <url>/2021/12/17/docker%20image/</url>
      
        <content type="html"><![CDATA[<h1 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h1><ul><li><strong>ÈïúÂÉèÔºàImageÔºâ</strong>ÔºöDocker ÈïúÂÉèÔºàImageÔºâÔºåÂ∞±Áõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™ root Êñá‰ª∂Á≥ªÁªü„ÄÇÊØîÂ¶ÇÂÆòÊñπÈïúÂÉè ubuntu:16.04 Â∞±ÂåÖÂê´‰∫ÜÂÆåÊï¥ÁöÑ‰∏ÄÂ•ó Ubuntu16.04 ÊúÄÂ∞èÁ≥ªÁªüÁöÑ root Êñá‰ª∂Á≥ªÁªü„ÄÇ</li><li><strong>ÂÆπÂô®ÔºàContainerÔºâ</strong>ÔºöÈïúÂÉèÔºàImageÔºâÂíåÂÆπÂô®ÔºàContainerÔºâÁöÑÂÖ≥Á≥ªÔºåÂ∞±ÂÉèÊòØÈù¢ÂêëÂØπË±°Á®ãÂ∫èËÆæËÆ°‰∏≠ÁöÑÁ±ªÂíåÂÆû‰æã‰∏ÄÊ†∑ÔºåÈïúÂÉèÊòØÈùôÊÄÅÁöÑÂÆö‰πâÔºåÂÆπÂô®ÊòØÈïúÂÉèËøêË°åÊó∂ÁöÑÂÆû‰Ωì„ÄÇÂÆπÂô®ÂèØ‰ª•Ë¢´ÂàõÂª∫„ÄÅÂêØÂä®„ÄÅÂÅúÊ≠¢„ÄÅÂà†Èô§„ÄÅÊöÇÂÅúÁ≠â„ÄÇ</li><li><strong>‰ªìÂ∫ìÔºàRepositoryÔºâ</strong>Ôºö‰ªìÂ∫ìÂèØÁúãÁùÄ‰∏Ä‰∏™‰ª£Á†ÅÊéßÂà∂‰∏≠ÂøÉÔºåÁî®Êù•‰øùÂ≠òÈïúÂÉè„ÄÇ</li></ul><h2 id="operate"><a href="#operate" class="headerlink" title="operate"></a>operate</h2><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊûÑÂª∫ Ôºà--no-cache ÂèØ‰ª•Ê∏ÖÁêÜÁºìÂ≠òËøõË°åÊûÑÂª∫Ôºâ</span></span><br><span class="line">docker build --no-cache -t your-image-name .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•Êâæ</span></span><br><span class="line">docker search xxx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check Image Architecture</span></span><br><span class="line">docker image inspect &lt;imageId&gt;  | jq &#x27;.[].Architecture&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊãâÂèñ</span></span><br><span class="line">docker pull xxx (--platform=amd64)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËøêË°å(ÂÆπÂô®)</span></span><br><span class="line">docker run xxx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§</span></span><br><span class="line">docker rmi xxx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§ÊâÄÊúâtag‰∏∫ none ÁöÑÈïúÂÉè</span></span><br><span class="line">docker images -q --filter &quot;dangling=true&quot; | sudo xargs docker rmi</span><br><span class="line"></span><br><span class="line">docker images : ÂàóÂá∫Êú¨Âú∞ÈïúÂÉè„ÄÇ</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËØ≠Ê≥ï</span></span><br><span class="line">docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line">OPTIONSËØ¥ÊòéÔºö</span><br><span class="line">-a :ÂàóÂá∫Êú¨Âú∞ÊâÄÊúâÁöÑÈïúÂÉèÔºàÂê´‰∏≠Èó¥Êò†ÂÉèÂ±ÇÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËøáÊª§Êéâ‰∏≠Èó¥Êò†ÂÉèÂ±ÇÔºâÔºõ</span><br><span class="line">‚Äìdigests :ÊòæÁ§∫ÈïúÂÉèÁöÑÊëòË¶Å‰ø°ÊÅØÔºõ</span><br><span class="line">-f :ÊòæÁ§∫Êª°Ë∂≥Êù°‰ª∂ÁöÑÈïúÂÉèÔºõ</span><br><span class="line">‚Äìformat :ÊåáÂÆöËøîÂõûÂÄºÁöÑÊ®°ÊùøÊñá‰ª∂Ôºõ</span><br><span class="line">‚Äìno-trunc :ÊòæÁ§∫ÂÆåÊï¥ÁöÑÈïúÂÉè‰ø°ÊÅØÔºõ</span><br><span class="line">-q :Âè™ÊòæÁ§∫ÈïúÂÉèID„ÄÇ</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remove all dangling images:</span></span><br><span class="line">docker image prune -f</span><br></pre></td></tr></table></figure><ul><li><p>ÂØºÂá∫ÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o &lt;output-file&gt;.tar &lt;image-name&gt;</span><br></pre></td></tr></table></figure></li><li><p>ÂØºÂÖ•ÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load --input $PATH/$NAME.tar</span><br></pre></td></tr></table></figure></li><li><p>Âú®ÈïúÂÉè‰∏≠ËøêË°åÂÆπÂô®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -p 8899:8899 --name test $REPOSITORY:$TAG</span><br><span class="line"></span><br><span class="line">-itÔºöË°®Á§∫‰∫§‰∫íÂºèÁªàÁ´ØÁöÑÂÆπÂô®ÔºåÈùûÂêØÂä®ÂêéÁ´ãÂàªÁªìÊùüÁöÑÂÆπÂô®</span><br><span class="line">--name testÔºöÁªôÂÆπÂô®Âèñ‰∏™ÂêçÂ≠óÔºåÂ´åÈ∫ªÁÉ¶ÂèØ‰ª•ÁúÅÂéª</span><br><span class="line"><span class="meta">$</span><span class="bash">REPOSITORY:<span class="variable">$TAG</span>ÔºöÂÆπÂô®ÊòØÁî®Âì™‰∏™ÈïúÂÉèÂêØÂä®ÁöÑÔºà‰∏Ä‰∏™ÂÆπÂô®ÔºåÂøÖÈ°ª‰æùËµñ‰∏Ä‰∏™ÈïúÂÉèÂêØÂä®Ôºâ</span></span><br><span class="line">-v ÊåáÂÆö‰∫ÜÂÆø‰∏ªÊú∫‰∏äÁöÑÁõÆÂΩïÁî®Êù•‰Ωú‰∏∫docker‰ªìÂ∫ìÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÁöÑËØùÔºåregistryÈïúÂÉèÈáçÂêØ‰πãÂêé‰ºö‰∏¢Â§±Â∑≤ÁªèÂ≠òÂÇ®Âú®Êú¨Âú∞‰ªìÂ∫ìÁöÑÈïúÂÉèÊñá‰ª∂</span><br><span class="line">üö®-p hostPort:containerPort</span><br><span class="line">üö®-v hostVolume:containerVolume Ëøô‰∏§‰∏™Âú∞ÂùÄÂ¶ÇÊûú‰∏çÂ≠òÂú®ÈÉΩ‰ºöÂàõÂª∫Ôºå‰∏ÄÊó¶ÂÆπÂô®ËøêË°åÔºå‰∏§ÈÉ®ÂàÜ‰ºöÂÆåÂÖ®ÂêåÊ≠•</span><br></pre></td></tr></table></figure><h4 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h4></li></ul><blockquote><p>Docker ImageÂèØ‰ª•ÁêÜËß£ÊàêÂ§ö‰∏™Âè™ËØªÊñá‰ª∂Âè†Âä†ËÄåÊàêÔºåÂõ†Ê≠§Docker ImageÊòØÂè™ËØªÁöÑ„ÄÇ</p><p>ÂΩìÊàë‰ª¨Â∞ÜÂÖ∂ËøêË°åËµ∑Êù•ÔºåÂ∞±Áõ∏ÂΩì‰∫éÂú®Âè™ËØªÁöÑImageÂ§ñÂåÖË£π‰∫Ü‰∏ÄÂ±ÇËØªÂÜôÂ±ÇÂèòÊàê‰∫ÜÂÆπÂô®„ÄÇ</p><p>ÂΩì‰Ω†Âà†Èô§ÂÆπÂô®‰πãÂêéÔºå‰ΩøÁî®Ëøô‰∏™ÈïúÂÉèÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®ÔºåÊ≠§Êó∂ÁöÑÈïúÂÉèÁöÑÂè™ËØªÂ±ÇËøòÂíåÂéüÊù•ÁöÑ‰∏ÄÊ†∑Ôºå‰ΩÜÊòØ‰Ω†Âú®ËØªÂÜôÂ±ÇÁöÑ‰øÆÊîπÂÖ®ÈÉ®ÈÉΩ‰ºö‰∏¢Â§±ÔºàÊ≤°Êúâ‰ΩøÁî®ÂéüÊúâvolumeÁöÑÂâçÊèê‰∏ãÔºâ„ÄÇ</p><p>docker‰ΩøÁî®volumeÂÆûÁé∞Êï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÔºå‰∏ç‰ªÖÂ¶ÇÊ≠§volumeËøòËÉΩÂ∏ÆÂä©ÂÆπÂô®ÂíåÂÆπÂô®‰πãÈó¥ÔºåÂÆπÂô®Âíåhost‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆ„ÄÇ</p></blockquote><ul><li><p>ËøõÂÖ•ÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it $IMAGE_ID bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> override the entrypoint or pass a different <span class="built_in">command</span></span></span><br><span class="line">docker run -it --entrypoint /bin/bash $IMAGE_ID</span><br></pre></td></tr></table></figure></li><li><p>ËøõÂÖ•ËøêË°åÁöÑÂÆπÂô®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it $CONTAINER_ID /bin/bash</span><br></pre></td></tr></table></figure><ul><li><p>Ê≥®ÊÑè</p><p>ÂëΩ‰ª§‰∏≠ÁöÑ/bin/bashÊòØÊ†πÊçÆ<code> docker inspect $image_id</code>ÔºåÊ†πÊçÆ‚ÄùCmd‚ÄùÈÖçÁΩÆÈ°πÂÜ≥ÂÆöÁöÑ</p></li></ul></li><li><p>ÊµãËØïËøêË°åÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊµãËØïËøêË°åÔºàÈïúÂÉèÔºâÔºå<span class="string">&#x27;sleep infinity&#x27;</span> <span class="built_in">command</span> could keep a container running interactively</span></span><br><span class="line">docker run -d $REPOSITORY:$TAG sleep infinity</span><br></pre></td></tr></table></figure></li></ul><h3 id="jar-gt-image"><a href="#jar-gt-image" class="headerlink" title="jar -&gt; image"></a>jar -&gt; image</h3><ul><li><p>step1: </p><p>ÁºñËæëdockerfile</p></li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Âü∫Á°ÄÈïúÂÉè</span></span><br><span class="line"><span class="keyword">FROM</span>  openjdk:<span class="number">8</span>-jre</span><br><span class="line"></span><br><span class="line"><span class="comment"># ÊåáÂÆöË∑ØÂæÑ</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /data/justMicroservice/learning-cloudalibaba</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> JAR_FILE=nacos-provider/target/nacos-provider-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br><span class="line"><span class="comment"># Â§çÂà∂jarÊñá‰ª∂Âà∞Ë∑ØÂæÑ</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> <span class="variable">$&#123;JAR_FILE&#125;</span> nacos-provider.jar</span></span><br><span class="line"><span class="comment"># ÂêØÂä®ÁΩëÂÖ≥ÊúçÂä°</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;nacos-provider.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><ul><li><p>Step2: </p><p>Âú®$pathÁöÑ‰∏ÄÁ∫ßÁõÆÂΩïÊâßË°åÔºàÊØîÂ¶Çdockerfile‰ΩçÁΩÆ/a/b/dockerfileÔºåÈÇ£ÂëΩ‰ª§Âú®aÁõÆÂΩï‰∏ãÊâßË°åÔºâ</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t $repository -f $path/dockerfile .</span><br></pre></td></tr></table></figure><h2 id="archive-artifact"><a href="#archive-artifact" class="headerlink" title="archive artifact"></a>archive artifact</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1</span></span><br><span class="line">docker save -o /tmp/my_app_image.tar my_app:latest</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2 save_image.tar is equal my_app_image.tar</span></span><br><span class="line">docker load -i /path/to/destination/save_immy_app_image.tarage.tar</span><br></pre></td></tr></table></figure><hr><h1 id="advanced"><a href="#advanced" class="headerlink" title="advanced"></a>advanced</h1><h2 id="add-git-commit-info-to-image-tag"><a href="#add-git-commit-info-to-image-tag" class="headerlink" title="add git commit info to image tag"></a>add git commit info to image tag</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">IMAGE_NAME=your-image-name</span><br><span class="line">echo &quot;image name: $IMAGE_NAME&quot;</span><br><span class="line"></span><br><span class="line">GIT_BRANCH=$(git symbolic-ref --short HEAD)</span><br><span class="line">LAST_COMMIT=$(git rev-parse HEAD)</span><br><span class="line">echo &quot;git commit info : $LAST_COMMIT&quot;</span><br><span class="line"></span><br><span class="line">docker build . -t $IMAGE_NAME:&quot;$GIT_BRANCH-$LAST_COMMIT&quot;</span><br></pre></td></tr></table></figure><h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><h2 id="ARG-vs-ENV"><a href="#ARG-vs-ENV" class="headerlink" title="ARG vs ENV"></a>ARG vs ENV</h2><table><thead><tr><th><strong>Feature</strong></th><th>ARG <strong>(Build-time)</strong></th><th>ENV <strong>(Runtime)</strong></th></tr></thead><tbody><tr><td>Available at build-time?</td><td>‚úÖ Yes</td><td>‚úÖ Yes</td></tr><tr><td>Available in the running container?</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr><tr><td>Can be overridden at build-time?</td><td>‚úÖ Yes (‚Äìbuild-arg)</td><td>‚ùå No</td></tr><tr><td>Can be overridden at runtime?</td><td>‚ùå No</td><td>‚úÖ Yes (-e)</td></tr><tr><td>Included in final image?</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr></tbody></table><h1 id="es"><a href="#es" class="headerlink" title="es"></a>es</h1><blockquote><p>Êñá‰∏≠hostAddressÈúÄË¶ÅÊõøÊç¢ÂÖ∑‰ΩìÁöÑipÂú∞ÂùÄ</p></blockquote><h2 id="ÁéØÂ¢ÉÂáÜÂ§á"><a href="#ÁéØÂ¢ÉÂáÜÂ§á" class="headerlink" title="ÁéØÂ¢ÉÂáÜÂ§á"></a>ÁéØÂ¢ÉÂáÜÂ§á</h2><blockquote><p>Êü•ÁúãÁé∞ÊúâÁéØÂ¢ÉÁõ∏ÂÖ≥ÂèÇÊï∞ulimit -a</p></blockquote><ul><li><p>ËÆæÁΩÆÊñá‰ª∂Âè•ÊüÑÊï∞ÔºåÂú®**/etc/security/limits.conf**‰∏≠ËÆæÁΩÆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># End of file</span><br><span class="line">* hard nofile 65536</span><br><span class="line">* soft nofile 65536</span><br></pre></td></tr></table></figure></li><li><p>‰øÆÊîπmax user processesËøõÁ®ãÊï∞ÔºåÂú®**/etc/security/limits.conf**‰∏≠ËÆæÁΩÆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* soft nproc 65536</span><br><span class="line">* hard nproc 65536</span><br></pre></td></tr></table></figure></li><li><p>Ë∞ÉÊï¥vm.max_map_countÁöÑÂ§ßÂ∞èÔºåËØ•ÂèÇÊï∞‰ºöÈôêÂà∂‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•Êã•ÊúâÁöÑVMA(ËôöÊãüÂÜÖÂ≠òÂå∫Âüü)ÁöÑÊï∞Èáè</p><p>ÈÄöËøá‰øÆÊîπ**/etc/sysctl.conf**ÂèÇÊï∞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.max_map_count=655360</span><br></pre></td></tr></table></figure><p>ÁÑ∂ÂêéÊâßË°å<code>sysctl -p</code></p></li><li><p>Ë∞ÉÊï¥stack sizeÁöÑÂ§ßÂ∞èÔºàÂèØÈÄâÔºâÔºåÂú®**/etc/security/limits.conf**‰∏≠ËÆæÁΩÆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* soft stack 1024</span><br><span class="line">* hard stack 1024</span><br></pre></td></tr></table></figure></li></ul><h2 id="manual-init-data"><a href="#manual-init-data" class="headerlink" title="manual init data"></a>manual init data</h2><ul><li><p>create index</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &#x27;Content-Type: application/json&#x27; -d &#x27;@/data/es_mapping.json&#x27; -X PUT &#x27;http://localhost:9200/indexName&#x27;</span><br></pre></td></tr></table></figure></li><li><p>import data</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &#x27;Content-Type: application/json&#x27; --data-binary &#x27;@/data/es_init_data.txt&#x27; &#x27;http://localhost:9200/_bulk&#x27;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÊãâÂèñËøúÁ®ã‰ªìÂ∫ìÈïúÂÉèÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure></li><li><p>ÂêØÂä®ÂÆπÂô®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d --name es_origin -e ES_JAVA_POTS=&quot;-Xms6g -Xmx6g&quot; -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; docker.elastic.co/elasticsearch/elasticsearch:7.16.1</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÈïúÂÉèÂà∂‰Ωú"><a href="#ÈïúÂÉèÂà∂‰Ωú" class="headerlink" title="ÈïúÂÉèÂà∂‰Ωú"></a>ÈïúÂÉèÂà∂‰Ωú</h2><ol><li>ÂØºÂá∫ESÁöÑÂ∑≤ÊúâÁ¥¢ÂºïÂíåÊï∞ÊçÆ</li></ol><ul><li><p>ÁéØÂ¢ÉÂáÜÂ§á</p><ul><li>ÂÆâË£ÖnodejsÔºåÂÆâË£ÖÊñá‰ª∂Âú∞ÂùÄ<a href="https://nodejs.org/en/download/">nodejs</a></li><li>ÂÆâË£ÖelasticdumpÔºåÂÆâË£ÖÂëΩ‰ª§<code>npm install -g elasticdump</code></li></ul></li><li><p>ÂØºÂá∫esÁ¥¢ÂºïÊñá‰ª∂<strong>es_mapping.json</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">/$</span><span class="bash">nodejs_home/lib/node_modules/elasticdump/bin/elasticdump \               --input=http://127.0.0.1:9200/indexName \</span></span><br><span class="line"><span class="bash">  --output=/data/es_mapping.json \</span></span><br><span class="line"><span class="bash">  --<span class="built_in">type</span>=mapping</span></span><br></pre></td></tr></table></figure><blockquote><p>Ê≥®ÊÑèÔºö$nodejs_home‰ª£Ë°®nodejsÁöÑÂÆâË£ÖÁõÆÂΩï</p></blockquote></li><li><p>ÂØºÂá∫esÊï∞ÊçÆ<strong>es_init_data.txt</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">/$</span><span class="bash">nodejs_home/lib/node_modules/elasticdump/bin/elasticdump \ </span>          </span><br><span class="line">  --input=http://127.0.0.1:9200/indexName \</span><br><span class="line">  --output=/data/es_init_data.txt \</span><br><span class="line">  --searchBody &#x27;&#123;&quot;query&quot;:&#123;&quot;match_all&quot;:&#123; &#125;&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><p>ÁºñÂÜôesÊï∞ÊçÆÂàùÂßãÂåñËÑöÊú¨ <strong>initEs.sh</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">create index</span></span><br><span class="line">curl -H &#x27;Content-Type: application/json&#x27; -d &#x27;@/data/es_mapping.json&#x27; -X PUT &#x27;http://127.0.0.1:9200/indexName&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash">import data</span></span><br><span class="line">curl -H &#x27;Content-Type: application/json&#x27; --data-binary &#x27;@/data/es_init_data.txt&#x27; &#x27;http://127.0.0.1:9200/_bulk&#x27;</span><br></pre></td></tr></table></figure><blockquote><p>initEs.shÊñá‰ª∂Âêå1,2Êìç‰Ωú‰∏≠ÁöÑÊñá‰ª∂Â≠òÊîæË∑ØÂæÑ‰øùÊåÅ‰∏ÄËá¥ÔºåÂùáÊîæÂú®/dataÁõÆÂΩï‰∏ã</p></blockquote></li><li><p>Âú®/dataÁõÆÂΩï‰∏ãÂàõÂª∫DockerfileÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM elasticsearch:7.16.1</span><br><span class="line">COPY ./data/* /data/</span><br><span class="line">RUN chown -R elasticsearch:root /data </span><br><span class="line">USER elasticsearch</span><br><span class="line">RUN elasticsearch -E discovery.type=single-node -p /tmp/epid &amp; /bin/bash /data/wait-for-it.sh -t 0 localhost:9200 -- /data/initEs.sh; kill $(cat /tmp/epid) &amp;&amp; wait $(cat /tmp/epid); exit 0;</span><br></pre></td></tr></table></figure></li><li><p>ÂàõÂª∫ÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dlabel:elasticsearch .</span><br></pre></td></tr></table></figure><blockquote><p>dlabel:esÊòØ REPOSITORY:TAGÊ†ºÂºèÔºåÂèØËá™Ë°åÊõ¥Êîπ</p></blockquote></li><li><p>ÁôªÂΩïËøúÁ®ã‰ªìÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login hostAddress</span><br></pre></td></tr></table></figure><p>Ê†πÊçÆÊèêÁ§∫ÔºåËæìÂÖ•Áî®Êà∑ÂêçadminÔºåÂØÜÁ†ÅHarbor12345</p></li><li><p>Êò†Â∞ÑËøúÁ®ã‰ªìÂ∫ìREPOSITORY:TAG</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag dlabel:elasticsearch hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure><blockquote><p>ÂÖ∂‰∏≠dlabel:elasticsearchÂíåÊìç‰Ωú3‰∏≠‰øùÊåÅ‰∏ÄËá¥</p></blockquote></li><li><p>Êé®ÈÄÅÂΩìÂú∞ÈïúÂÉèÂà∞ËøúÁ®ã‰ªìÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push hostAddress/dlabel/service:elasticsearch</span><br></pre></td></tr></table></figure></li></ol><h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><h2 id="ÈïúÂÉèÂà∂‰Ωú-1"><a href="#ÈïúÂÉèÂà∂‰Ωú-1" class="headerlink" title="ÈïúÂÉèÂà∂‰Ωú"></a>ÈïúÂÉèÂà∂‰Ωú</h2><ol><li><p>ÈúÄË¶ÅÂ§á‰ªΩÂΩìÂâçÈúÄË¶ÅÂêåÊ≠•ÁöÑÂÖ®ÈáèÊï∞ÊçÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it dlabel_mysql mysqldump -uroot -p123456 dls &gt; /path/to/backup.sql</span><br></pre></td></tr></table></figure><blockquote><p>Ê≥®ÊÑè‰∫ãÈ°πÔºö</p><p>ÂÖ∂‰∏≠dlabel_mysqlÔºåÊòØÂú®Á¨¨‰∫åÊ≠•‰∏≠ËÆæÁΩÆÁöÑnameÁöÑÂêçÁß∞</p><p>/path/to/backup.sqlÊòØÂØºÂá∫sqlÁöÑÂú∞ÂùÄË∑ØÂæÑÔºåÊ†πÊçÆÊìç‰ΩúÁ≥ªÁªü‰∏çÂêåÔºåÈúÄË¶ÅËá™Ë°åÊõ¥Êîπ</p><p>ÂÅáÂÆö‰ª•‰∏ãÊìç‰ΩúÊòØÂú®/path/toÁöÑÁõÆÂΩï‰∏ã</p></blockquote></li></ol><ol start="2"><li><p>Âú®/path/toÁõÆÂΩï‰∏ãÂàõÂª∫DockerfileÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Derived from official mysql image (our base image)</span></span><br><span class="line">FROM mysql:5.7.30</span><br><span class="line"><span class="meta">#</span><span class="bash"> Add the content of the sql-scripts/ directory to your image</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> All scripts <span class="keyword">in</span> docker-entrypoint-initdb.d/ are automatically</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> executed during container startup</span></span><br><span class="line">COPY ./backup.sql /docker-entrypoint-initdb.d/</span><br></pre></td></tr></table></figure><blockquote><p>Ê≥®ÊÑèCOPYÊåá‰ª§‰∏≠Ôºåbackup.sqlÈúÄË¶ÅÂíåÊìç‰Ωú1‰∏≠ÁöÑÂØºÂá∫Êñá‰ª∂Âêç‰øùÊåÅ‰∏ÄËá¥</p></blockquote></li><li><p>ÂàõÂª∫ÈïúÂÉè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dlabel:mysql20211216 .</span><br></pre></td></tr></table></figure><blockquote><p>dlabel:mysql20211216ÊòØ REPOSITORY:TAGÊ†ºÂºèÔºåÂèØËá™Ë°åÊõ¥Êîπ</p></blockquote></li><li><p>ÁôªÂΩïËøúÁ®ã‰ªìÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login hostAddress</span><br></pre></td></tr></table></figure><p>Ê†πÊçÆÊèêÁ§∫ÔºåËæìÂÖ•Áî®Êà∑ÂêçadminÔºåÂØÜÁ†ÅHarbor12345</p></li><li><p>Êò†Â∞ÑËøúÁ®ã‰ªìÂ∫ìREPOSITORY:TAG</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag dlabel:mysql20211216 hostAddress/dlabel/service:mysql20211216</span><br></pre></td></tr></table></figure><blockquote><p>ÂÖ∂‰∏≠dlabel:mysql20211216ÂíåÊìç‰Ωú3‰∏≠‰øùÊåÅ‰∏ÄËá¥</p><p>hostAddress/dlabel/service:mysql20211216ÔºåÊ†ºÂºè‰∏∫hostAddress/library/REPOSITORY:TAGÔºåÂÖ∂‰∏≠ÂèØËá™Ë°å‰øÆÊîπservice:mysql20211216ÂêçÁß∞</p></blockquote></li><li><p>Êé®ÈÄÅÂΩìÂú∞ÈïúÂÉèÂà∞ËøúÁ®ã‰ªìÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push hostAddress/dlabel/service:mysql20211216</span><br></pre></td></tr></table></figure></li><li><p>ÁôªÂΩï<strong><a href="http://hostaddress/">http://hostAddress</a></strong>Êü•ÁúãÈïúÂÉè‰∏ä‰º†ÊÉÖÂÜµ</p></li><li><p>Âú®ÈïúÂÉèËØ¶ÊÉÖÁïåÈù¢ÔºåÁÇπÂáª‚ÄúÊãâÂèñÂëΩÂêç‚ÄùÊåâÈíÆËøõË°åÂëΩ‰ª§Â§çÂà∂ÔºåÂú®ÁªàÁ´ØÊâßË°åÂëΩ‰ª§Âç≥ÂèØÊãâÂèñËØ•ÈïúÂÉè</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> image </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker compose</title>
      <link href="/2021/12/17/docker%20compose/"/>
      <url>/2021/12/17/docker%20compose/</url>
      
        <content type="html"><![CDATA[<h3 id="Docker-File-vs-Docker-Compose"><a href="#Docker-File-vs-Docker-Compose" class="headerlink" title="Docker File vs Docker Compose"></a>Docker File vs Docker Compose</h3><p>Dockerfile¬†is what‚Äôs used to create a container image, and a Compose file is what‚Äôs used to deploy an instance of that image as a container.</p><blockquote><p>Compose ÊòØÁî®‰∫éÂÆö‰πâÂíåËøêË°åÂ§öÂÆπÂô® Docker Â∫îÁî®Á®ãÂ∫èÁöÑÂ∑•ÂÖ∑„ÄÇÈÄöËøá ComposeÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî® YML Êñá‰ª∂Êù•ÈÖçÁΩÆÂ∫îÁî®Á®ãÂ∫èÈúÄË¶ÅÁöÑÊâÄÊúâÊúçÂä°„ÄÇÁÑ∂ÂêéÔºå‰ΩøÁî®‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÂ∞±ÂèØ‰ª•‰ªé YML Êñá‰ª∂ÈÖçÁΩÆ‰∏≠ÂàõÂª∫Âπ∂ÂêØÂä®ÊâÄÊúâÊúçÂä°„ÄÇ</p></blockquote><h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4><p>Dockerfile the predecessor of a container image. You build an image from a Dockerfile. A typical Dockerfile contains special build instructions, commands like¬†<code>RUN</code>,¬†<code>ADD</code>,¬†<code>COPY</code>,¬†<code>ENTRYPOINT</code>, etc.</p><h4 id="Compose-file"><a href="#Compose-file" class="headerlink" title="Compose file"></a>Compose file</h4><p>Compose files are used in two types of deployments: in the non-cluster deployment with¬†<code>docker-compose</code>¬†and a cluster deployment with¬†<code>docker swarm</code>.</p><p>Compose files are used in two types of deployments: in the non-cluster deployment with <code>docker-compose</code> and a cluster deployment with <code>docker swarm</code>.</p><p>To distinguish the two types, I‚Äôm going to address the compose file responsible for cluster deployment as stack files. I‚Äôll talk about stack files in a moment.</p><p>Compose files are part of a tool called <code>docker-compose</code>. It‚Äôs a client application to the docker daemon server, kind of like the <code>docker</code> CLI client, but instead of typing the whole <code>run</code> commands every time, with <code>docker-compose</code> you can re-use the same YAML file over and over again, and deploy the same container with the same configuration as you did in the first time.</p><p>It‚Äôs more readable, more maintainable, more intuitive. A single compose file can contain multiple container deployment configurations.</p><ul><li><p>ÊâßË°å<code>docker-compose up</code>ÔºåÊä•Èîô</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Couldn‚Äôt connect to Docker daemon at http+docker:<span class="comment">//localhost - is it running?</span></span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠<code>docker-compose.yml</code>‰ø°ÊÅØÂ¶Ç‰∏ãÔºö</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&quot;redis:alpine&quot;</span></span><br></pre></td></tr></table></figure><ul><li><p>Ëß£ÂÜ≥Ôºå‰ΩøÁî®sudoÊùÉÈôê</p><ol><li><p>Add user to docker group (if not already added)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure></li><li><p>create a symbolic link to /usr/bin using the following command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure></li><li><p>Restart docker service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure></li><li><p>execute</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up</span><br></pre></td></tr></table></figure></li></ol></li></ul></li></ul><p>ËøêË°ådocker compose upÊàñdocker compose up -d(ÂêéÂè∞ËøêË°å)ËøêË°åÊÇ®ÁöÑÊï¥‰∏™Â∫îÁî®Á®ãÂ∫è„ÄÇ <code>Ê≥®ÊÑèÔºöÊØèÊ¨°‰øÆÊîπ‰ªª‰∏ÄÈÖçÁΩÆÊñá‰ª∂ÂêéÔºåÈÉΩË¶Å‰ΩøÁî® docker-compose up --build ÈáçÊñ∞ÊûÑÂª∫</code></p><blockquote><p>Êúâ‰∫Üdocker-composeÔºåÂΩìÊàë‰ª¨ÊÉ≥ÂêØÂä®Â§ö‰∏™ÊúçÂä°Êó∂ÔºåÊó†ÈúÄÂÜç‰∏Ä‰∏™‰∏Ä‰∏™ËøõË°ådocker runÊìç‰ΩúÔºåËÄåÂè™ÈúÄË¶ÅÁºñÂÜôdocker-compose.ymlÈÖçÁΩÆÊñá‰ª∂ÔºåÂç≥ÂèØ‰∏ÄÊ¨°ËøêË°å‰Ω†ÁöÑÂÖ®ÈÉ®ÊúçÂä°„ÄÇ</p></blockquote><hr><table><thead><tr><th>Â±ûÊÄß</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td>docker-compose build</td><td>(ÊûÑÂª∫yml‰∏≠Êüê‰∏™ÊúçÂä°ÁöÑÈïúÂÉè)</td></tr><tr><td>docker-compose ps</td><td>(Êü•ÁúãÂ∑≤ÁªèÂêØÂä®ÁöÑÊúçÂä°Áä∂ÊÄÅÔºâ</td></tr><tr><td>docker-compose kill</td><td>(ÂÅúÊ≠¢Êüê‰∏™ÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose logs</td><td>(ÂèØ‰ª•Êü•ÁúãÊüê‰∏™ÊúçÂä°ÁöÑlogÔºâ</td></tr><tr><td>docker-compose port</td><td>(ÊâìÂç∞ÁªëÂÆöÁöÑpublic portÔºâ</td></tr><tr><td>docker-compose pull</td><td>(pullÊúçÂä°ÈïúÂÉè)</td></tr><tr><td>docker-compose up</td><td>(ÂêØÂä®ymlÂÆö‰πâÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose stop</td><td>(ÂÅúÊ≠¢yml‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose start</td><td>(ÂêØÂä®Ë¢´ÂÅúÊ≠¢ÁöÑyml‰∏≠ÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose kill</td><td>(Âº∫Ë°åÂÅúÊ≠¢yml‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose rm</td><td>ÔºàÂà†Èô§yml‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose restart</td><td>(ÈáçÂêØyml‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÊúçÂä°Ôºâ</td></tr><tr><td>docker-compose scale</td><td>(Êâ©Â±ïÊüê‰∏™ÊúçÂä°ÁöÑ‰∏™Êï∞ÔºåÂèØ‰ª•Âêë‰∏äÊàñÂêë‰∏ãÔºâ</td></tr><tr><td>docker-compose version</td><td>ÔºàÊü•ÁúãcomposeÁöÑÁâàÊú¨Ôºâ</td></tr></tbody></table><p>Êó•ÂøóËæìÂá∫  </p><p>ÁªàÁ´ØËæìÂá∫Ôºö<code>docker-compose --verbose up $service_name</code></p><p>ÊàñËÄÖdocker-compose.ymlÈÖçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stdin_open: true</span><br><span class="line">tty: true</span><br></pre></td></tr></table></figure><h3 id="ÈïúÂÉèÈáçÊñ∞ÁºñËØë"><a href="#ÈïúÂÉèÈáçÊñ∞ÁºñËØë" class="headerlink" title="ÈïúÂÉèÈáçÊñ∞ÁºñËØë"></a>ÈïúÂÉèÈáçÊñ∞ÁºñËØë</h3><p>Â¶ÇÊûú‰øÆÊîπ‰∫Ü DockerfileÂÜÖÂÆπÈáåÈù¢Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºåÈúÄË¶ÅÈáçÊñ∞ÁºñËØëÈïúÂÉèÔºåÂ¶ÇÊûú‰ΩøÁî®docker composeÔºåÂàôÈúÄË¶Å‰ΩøÁî®ÂëΩ‰ª§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up --build</span><br></pre></td></tr></table></figure><h3 id="ÂêéÂè∞ËøêË°å"><a href="#ÂêéÂè∞ËøêË°å" class="headerlink" title="ÂêéÂè∞ËøêË°å"></a>ÂêéÂè∞ËøêË°å</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker container</title>
      <link href="/2021/12/13/docker%20container/"/>
      <url>/2021/12/13/docker%20container/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåDocker ‰ºö‰∏∫‰Ω†Êèê‰æõ‰∏Ä‰∏™ÈöêÂê´ÁöÑ ENTRYPOINTÔºåÂç≥Ôºö/bin/sh -c„ÄÇÊâÄ‰ª•ÔºåÂú®‰∏çÊåáÂÆö ENTRYPOINT Êó∂ÔºåÊØîÂ¶ÇËøêË°åÂú®ÂÆπÂô®ÈáåÁöÑÂÆåÊï¥ËøõÁ®ãÊòØÔºö/bin/sh -c ‚Äúpython xxx.py‚ÄùÔºåÂç≥ CMD ÁöÑÂÜÖÂÆπÂ∞±ÊòØ ENTRYPOINT ÁöÑÂèÇÊï∞</p></blockquote><h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Add the current user</span></span><br><span class="line">sudo usermod -a -G docker $(whoami)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add a specific user</span></span><br><span class="line">sudo usermod -a -G docker custom-user</span><br></pre></td></tr></table></figure><h1 id="ÂÆπÂô®"><a href="#ÂÆπÂô®" class="headerlink" title="ÂÆπÂô®"></a>ÂÆπÂô®</h1><ul><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊ≠£Âú®ËøêË°å</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊâÄÊúâ</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure></li><li><p>docker run</p><blockquote><p>docker run is a higher-level command that combines multiple subcommands (docker create, docker start, docker exec, etc.) into a single step.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂàõÂª∫ÂÆπÂô®</span></span><br><span class="line">docker run -p &lt;ÂÆø‰∏ªÊú∫Á´ØÂè£&gt;:&lt;ÂÆπÂô®Á´ØÂè£&gt; &lt;ÈïúÂÉèÂêçÁß∞&gt;[:Ê†áÁ≠æ]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ËÆæÁΩÆÂÆπÂô®ÂÅúÊ≠¢‰πãÂêéËá™Âä®Ê∏ÖÁêÜÂÆπÂô®</span></span><br><span class="line">docker run --rm xxx  # --rm This flag tells Docker to automatically remove the container when it exits.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Run a New Container with Volume Mount</span></span><br><span class="line">docker run -it --name my-container -v /host/path:/container/path my-image</span><br></pre></td></tr></table></figure></li><li><p>other</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÂêØÂä®</span></span><br><span class="line">docker start ÂÆπÂô®ÂêçÊàñÂÆπÂô® id</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÁªàÊ≠¢</span></span><br><span class="line">docker stop [NAME]/[CONTAINER ID]:Â∞ÜÂÆπÂô®ÈÄÄÂá∫„ÄÇ</span><br><span class="line">docker kill [NAME]/[CONTAINER ID]:Âº∫Âà∂ÂÅúÊ≠¢‰∏Ä‰∏™ÂÆπÂô®„ÄÇ</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ê∏ÖÁêÜÂ∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®</span></span><br><span class="line">docker container prune</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂÆπÂô®Á´ØÂè£</span></span><br><span class="line">docker port &#123;container_id&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂÆπÂô®ÂêØÂä®ÂëΩ‰ª§</span></span><br><span class="line">docker inspect -f &#x27;&#123;&#123;.Config.Cmd&#125;&#125;&#x27; &#123;container_id&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂÆπÂô®ÊåÇËΩΩ‰ø°ÊÅØ</span></span><br><span class="line">docker inspect &#123;container_id&#125; --format=&#x27;&#123;&#123;json .Mounts&#125;&#125;&#x27; | jq</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§</span></span><br><span class="line">docker rm -f ÂÆπÂô®id</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊâπÈáèÂà†Èô§Â∑≤ÂÅúÊ≠¢ÁöÑÂÆπÂô®</span></span><br><span class="line">docker rm $(docker ps -a -q -f &quot;status=exited&quot;)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂØºÂá∫</span></span><br><span class="line">docker export ÂÆπÂô®id &gt; xxx.tar</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂØºÂÖ•</span></span><br><span class="line">docker import - test/xxx:v1</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÈáçÂêØ</span></span><br><span class="line">docker restart $container_id</span><br><span class="line"><span class="meta">#</span><span class="bash"> Êó•Âøó</span></span><br><span class="line">docker logs $container_id</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Â§çÂà∂Êñá‰ª∂ Âú®ÂÆπÂô®ËøêË°åÂíåÂÅúÊ≠¢ÁöÑÁä∂ÊÄÅÂùáÂèØÊâßË°å</span></span><br><span class="line">docker cp /host/path/ &lt;container_id&gt;:/path/to/file</span><br><span class="line">or</span><br><span class="line">docker cp &lt;container_id&gt;:/path/to/file /host/path/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Monitor Real-Time</span></span><br><span class="line">docker stats &lt;containerId&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check specify container<span class="string">&#x27;s PID</span></span></span><br><span class="line">docker inspect --format &#x27;&#123;&#123;.State.Pid&#125;&#125;&#x27; &lt;containerId&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h2><h3 id="Propagation-Modes"><a href="#Propagation-Modes" class="headerlink" title="Propagation Modes"></a>Propagation Modes</h3><blockquote><p>with rshared: Unmounting inside the container affects the host‚Äôs mount as well.</p><p>with rprivate: Unmounting inside the container only affects the container, leaving the host‚Äôs mounts untouched.</p></blockquote><ul><li><p>rprivate <strong>(Recursive Private)</strong>:</p><ul><li><p><strong>Isolated Mount Propagation</strong>: When a mount point is set to rprivate, any mount or unmount events within that mount are <strong>not propagated</strong> between the container and the host or vice versa. Changes in mounts within the container are isolated.</p><p><strong>Example</strong>: If you mount or unmount a file system inside the container, it won‚Äôt affect the corresponding mount on the host. Similarly, changes to the mounts on the host won‚Äôt reflect inside the container.</p></li></ul></li><li><p>rshared <strong>(Recursive Shared)</strong>:</p><ul><li><p><strong>Mount Propagation Between Host and Container</strong>: In rshared mode, mount and unmount events are <strong>propagated both ways</strong> between the host and the container.</p><p><strong>Example</strong>: If you unmount or mount something inside the container, it will be reflected on the host. Conversely, if the host unmounts or mounts a file system on that mount point, it will also reflect inside the container.</p></li></ul></li></ul><h2 id="network"><a href="#network" class="headerlink" title="network"></a>network</h2><table><thead><tr><th align="left">Driver</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>bridge</code></td><td align="left">The default network driver.</td></tr><tr><td align="left"><code>host</code></td><td align="left">Remove network isolation between the container and the Docker host.</td></tr><tr><td align="left"><code>none</code></td><td align="left">Completely isolate a container from the host and other containers.</td></tr><tr><td align="left"><code>overlay</code></td><td align="left">Overlay networks connect multiple Docker daemons together.</td></tr><tr><td align="left"><code>ipvlan</code></td><td align="left">IPvlan networks provide full control over both IPv4 and IPv6 addressing.</td></tr><tr><td align="left"><code>macvlan</code></td><td align="left">Assign a MAC address to a container.</td></tr></tbody></table><ul><li><p>ÂàóÂá∫dockerÁöÑÊâÄÊúâÁΩëÁªúÊ®°Âºè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure></li><li><p>ÈíàÂØπbridgeÂíåhostÂàÜÂà´Êü•ÊâæÊúâÂì™‰∫õcontainerÂú®ÂÖ∂‰∏≠</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network inspect bridge</span><br><span class="line">docker network inspect host</span><br></pre></td></tr></table></figure></li><li><p>Áõ¥Êé•Êü•ÁúãcontainerÁöÑ‰ø°ÊÅØÔºåÊâæÂà∞networkÊÆµÊü•Áúã„ÄÇÊàñËÄÖÁî®grepÁ≠õÈÄâÂá∫network„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker inspect ÂÆπÂô®Âêç/ÂÆπÂô®ID</span><br><span class="line">docker inspect ÂÆπÂô®Âêç/ÂÆπÂô®ID | grep -i ‚Äúnetwork‚Äù # ÂÖ∂‰∏≠grepÁöÑ‚Äú-i‚ÄùË°®Á§∫‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h2 id="Exit-Codes"><a href="#Exit-Codes" class="headerlink" title="Exit Codes"></a>Exit Codes</h2><p>Common exit codes associated with docker containers are:</p><ul><li><p><strong>Exit Code 0</strong>: Absence of an attached foreground process</p></li><li><p><strong>Exit Code 1</strong>: Indicates failure due to application error</p></li><li><p><strong>Exit Code 137</strong>: Indicates failure as container received SIGKILL (Manual intervention or ‚Äòoom-killer‚Äô [OUT-OF-MEMORY])</p></li><li><p><strong>Exit Code 139</strong>: Indicates failure as container received SIGSEGV</p></li><li><p><strong>Exit Code 143</strong>: Indicates failure as container received SIGTERM</p></li><li><p><strong>Exit Code 126</strong>: Permission problem or command is not executable</p></li><li><p><strong>Exit Code 127</strong>: Possible typos in shell script with unrecognizable characters</p></li></ul><h2 id="third-container"><a href="#third-container" class="headerlink" title="third container"></a>third container</h2><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ul><li><p>ÂØÜÁ†Å123456</p></li><li><p>ÂàõÂª∫ÂÆπÂô®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql-server -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br><span class="line">Ê≥®ÊÑèÔºö</span><br><span class="line">-d:ËÆ©ÂÆπÂô®Âú®ÂêéÂè∞ËøêË°å</span><br><span class="line">-P(Â§ßÂÜô):ÊòØÂÆπÂô®ÂÜÖÈÉ®Á´ØÂè£ÈöèÊú∫Êò†Â∞ÑÂà∞‰∏ªÊú∫ÁöÑÈ´òÁ´ØÂè£</span><br><span class="line">-p(Â∞èÂÜô):ÊòØÂÆπÂô®ÂÜÖÈÉ®Á´ØÂè£ÁªëÂÆöÂà∞ÊåáÂÆöÁöÑ‰∏ªÊú∫Á´ØÂè£</span><br></pre></td></tr></table></figure></li><li><p>ËøõÂÖ•ÂÆπÂô®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql-server /bin/bash</span><br><span class="line">Êàñ</span><br><span class="line">docker exec -it mysql-server /bin/sh</span><br></pre></td></tr></table></figure></li><li><p>ËÆøÈóÆ</p><p><code>docker exec -it mysql-server mysql -uroot -p</code></p></li><li><p>‰øÆÊîπroot ÂèØ‰ª•ÈÄöËøá‰ªª‰ΩïÂÆ¢Êà∑Á´ØËøûÊé•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure></li><li><p>‰ªéÂ§ñÈÉ®ËÆøÈóÆdocker mysql-server</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h127.0.0.1 -P3306 -uroot -p</span><br></pre></td></tr></table></figure></li><li><p>ÂØºÂÖ•sqlÊñá‰ª∂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ÂÖàÂ∞ÜÊñá‰ª∂ÂØºÂÖ•Âà∞ÂÆπÂô®</span><br><span class="line">#docker cp **.sql ÂÆπÂô®Âêç:/root/</span><br><span class="line">ËøõÂÖ•ÂÆπÂô®</span><br><span class="line">#docker exec -ti ÂÆπÂô®ÂêçÊàñID sh</span><br><span class="line">ÁôªÂΩïÊï∞ÊçÆÂ∫ì</span><br><span class="line"># mysql -uroot -p </span><br><span class="line">Â∞ÜÊñá‰ª∂ÂØºÂÖ•Êï∞ÊçÆÂ∫ì</span><br><span class="line">source Êï∞ÊçÆÂ∫ìÂêç &lt; /root/***.sql</span><br></pre></td></tr></table></figure></li><li><p>ÂØºÂá∫Êï∞ÊçÆÂ∫ì</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it  mysql-serverÔºàÂÆπÂô®ÂêçÔºâ mysqldump -uroot -p123456 Êï∞ÊçÆÂ∫ìÂêçÁß∞ &gt; /opt/sql_bak/test_db.sqlÔºàÂØºÂá∫Ë°®Ê†ºË∑ØÂæÑÔºâ</span><br></pre></td></tr></table></figure></li></ul><h3 id="portainer"><a href="#portainer" class="headerlink" title="portainer"></a>portainer</h3><ul><li><p>ÂØÜÁ†ÅÈáçÁΩÆ</p><ul><li><p>‰∏ãËΩΩÂ∏ÆÂä©ÈïúÂÉèportainer/helper-reset-password</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/helper-reset-password</span><br></pre></td></tr></table></figure></li><li><p>ÂÅúÊ≠¢ËøêË°åÁöÑportainer</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop &quot;id-portainer-container&quot;</span><br></pre></td></tr></table></figure></li><li><p>ËøêË°åÈáçÁΩÆÂëΩ‰ª§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -v portainer_data:/data portainer/helper-reset-password</span><br></pre></td></tr></table></figure></li><li><p>ÁªìÊûú</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>/<span class="number">06</span>/<span class="number">04</span> <span class="number">00</span>:<span class="number">13</span>:<span class="number">58</span> Password successfully updated <span class="keyword">for</span> user: admin</span><br><span class="line"><span class="number">2020</span>/<span class="number">06</span>/<span class="number">04</span> <span class="number">00</span>:<span class="number">13</span>:<span class="number">58</span> Use the following password to login: &amp;<span class="number">_4</span>#\<span class="number">3</span>^<span class="number">5</span>V8vLTd)E<span class="string">&quot;NWiJBs26G*9HPl1</span></span><br></pre></td></tr></table></figure></li><li><p>ÈáçÊñ∞ËøêË°åportainer,ÂØÜÁ†Å ‰∏∫üëÜÈáçÁΩÆÁöÑ &amp;_4#\3^5V8vLTd)E‚ÄùNWiJBs26G*9HPl1</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start &quot;id-portainer-container&quot;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Áé∞Âú®ÂØÜÁ†Å‰∏∫ admin/admin</p></li><li><p>ÈáçÊñ∞ÂÆâË£Ö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -p 8000:8000 -p 9443:9443 --name portainer \</span><br><span class="line">    --restart=always \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    -v portainer_data:/data \</span><br><span class="line">    cr.portainer.io/portainer/portainer-ce:2.9.3</span><br></pre></td></tr></table></figure></li></ul><h3 id="nacos"><a href="#nacos" class="headerlink" title="nacos"></a>nacos</h3><ul><li>run<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nacos -p 8848:8848 -e PREFER_HOST_MODE=hostname -e MODE=standalone nacos/nacos-server</span><br></pre></td></tr></table></figure><ul><li>Linux memory is insufficient<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e JVM_XMS=256m -e JVM_XMX=256m --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><blockquote><p>‰ΩøÁî®docker-compose up redisÂêØÂä®ÂÆπÂô®Êó∂ÔºåÂ¶ÇÊûúÈÖçÁΩÆËá™ÂÆö‰πâÈÖçÁΩÆÊñá‰ª∂ redis.confÔºåÈúÄË¶ÅËÆæÁΩÆ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bind 0.0.0.0</span><br><span class="line">daemonize no</span><br></pre></td></tr></table></figure><blockquote><p>docker-compose.ymlÊñá‰ª∂ÂÜÖÂÆπ</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span>                                                                            <span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&quot;redis:alpine&quot;</span></span><br><span class="line">    <span class="attr">stdin_open:</span> <span class="literal">true</span> <span class="comment">#ÊâìÂºÄÊ†áÂáÜËæìÂÖ•ÔºåÂèØ‰ª•Êé•ÂèóÂ§ñÈÉ®ËæìÂÖ•„ÄÇ</span></span><br><span class="line">    <span class="attr">tty:</span> <span class="literal">true</span>  <span class="comment">#Ê®°Êãü‰∏Ä‰∏™‰º™ÁªàÁ´Ø„ÄÇ</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/docker/projects/test/redis.conf:/data/redis.conf</span> <span class="comment"># ‰∏ªÊú∫Ë∑ØÂæÑ:ÂÆπÂô®Ë∑ØÂæÑ</span></span><br><span class="line">    <span class="comment">#   - /docker/projects/test/redis/data:/data</span></span><br><span class="line">    <span class="comment">#   - /docker/projects/test/redis/logs:/logs</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">--include</span> <span class="string">/data/redis.conf</span></span><br></pre></td></tr></table></figure><blockquote><p>‰ΩøÁî® docker-compose ‚Äìverbose up redisÂêØÂä®ÔºåÂèØÊü•ÁúãÂêØÂä®ËØ¶ÊÉÖ</p></blockquote><h2 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h2><h3 id="‰øÆÊîπÂ∑≤ÊúâÂÆπÂô®ÁöÑÁ´ØÂè£Êò†Â∞Ñ"><a href="#‰øÆÊîπÂ∑≤ÊúâÂÆπÂô®ÁöÑÁ´ØÂè£Êò†Â∞Ñ" class="headerlink" title="‰øÆÊîπÂ∑≤ÊúâÂÆπÂô®ÁöÑÁ´ØÂè£Êò†Â∞Ñ"></a>‰øÆÊîπÂ∑≤ÊúâÂÆπÂô®ÁöÑÁ´ØÂè£Êò†Â∞Ñ</h3><ol><li><p>ÂÅúÊ≠¢ÂÆπÂô® </p></li><li><p>ÂÅúÊ≠¢dockerÊúçÂä°(systemctl stop docker) </p></li><li><p>‰øÆÊîπËøô‰∏™ÂÆπÂô®ÁöÑhostconfig.jsonÊñá‰ª∂‰∏≠ÁöÑÁ´ØÂè£ÔºàÂéüÂ∏ñÊúâ‰∫∫ÊèêÂà∞ÔºåÂ¶ÇÊûúconfig.v2.jsonÈáåÈù¢‰πüËÆ∞ÂΩï‰∫ÜÁ´ØÂè£Ôºå‰πüË¶Å‰øÆÊîπÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/docker/3b6ef264a040* #ËøôÈáåÊòØCONTAINER ID</span><br><span class="line">vi hostconfig.json</span><br><span class="line">Â¶ÇÊûú‰πãÂâçÊ≤°ÊúâÁ´ØÂè£Êò†Â∞Ñ, Â∫îËØ•ÊúâËøôÊ†∑ÁöÑ‰∏ÄÊÆµ:</span><br><span class="line">&quot;PortBindings&quot;:&#123;&#125;</span><br><span class="line">Â¢ûÂä†‰∏Ä‰∏™Êò†Â∞Ñ, ËøôÊ†∑ÂÜô:</span><br><span class="line">&quot;PortBindings&quot;:&#123;&quot;3306/tcp&quot;:[&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;3307&quot;&#125;]&#125;</span><br><span class="line">Ââç‰∏Ä‰∏™Êï∞Â≠óÊòØÂÆπÂô®Á´ØÂè£, Âêé‰∏Ä‰∏™ÊòØÂÆø‰∏ªÊú∫Á´ØÂè£. </span><br><span class="line">ËÄå‰øÆÊîπÁé∞ÊúâÁ´ØÂè£Êò†Â∞ÑÊõ¥ÁÆÄÂçï, ÊääÁ´ØÂè£Âè∑ÊîπÊéâÂ∞±Ë°å.</span><br></pre></td></tr></table></figure></li><li><p>ÂêØÂä®dockerÊúçÂä°(systemctl start docker) </p></li><li><p>ÂêØÂä®ÂÆπÂô®</p></li></ol><h3 id="ÈÖçÁΩÆÂÆπÂô®ÁöÑÈïúÂÉèÊ∫êÔºàÂÆâË£ÖvimÔºâ"><a href="#ÈÖçÁΩÆÂÆπÂô®ÁöÑÈïúÂÉèÊ∫êÔºàÂÆâË£ÖvimÔºâ" class="headerlink" title="ÈÖçÁΩÆÂÆπÂô®ÁöÑÈïúÂÉèÊ∫êÔºàÂÆâË£ÖvimÔºâ"></a>ÈÖçÁΩÆÂÆπÂô®ÁöÑÈïúÂÉèÊ∫êÔºàÂÆâË£ÖvimÔºâ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"></span><br><span class="line">echo &quot;deb http://mirrors.163.com/debian/ jessie main non-free contrib&quot; &gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo &quot;deb http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo &quot;deb-src http://mirrors.163.com/debian/ jessie main non-free contrib&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">echo &quot;deb-src http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib&quot; &gt;&gt;/etc/apt/sources.list </span><br><span class="line"><span class="meta">#</span><span class="bash">Êõ¥Êñ∞ÂÆâË£ÖÊ∫ê</span> </span><br><span class="line">apt-get update </span><br><span class="line"><span class="meta">#</span><span class="bash">Â¶ÇÊûú‰∏ãËΩΩËøáÁ®ã‰∏≠Âç°Âú®[waiting <span class="keyword">for</span> headers] Âà†Èô§/var/cache/apt/archives/‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">ÂÆâË£Övim</span> </span><br><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure><h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><ul><li><p><strong>RUN</strong> is executed while the image is being build</p><p>while <strong>ENTRYPOINT</strong> is executed after the image has been built.</p></li></ul><h1 id="advanced"><a href="#advanced" class="headerlink" title="advanced"></a>advanced</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;/core/core.%e.%p.%t&quot; | sudo tee /proc/sys/kernel/core_pattern</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Elastic Stack learn</title>
      <link href="/2021/12/03/elasticstatic/"/>
      <url>/2021/12/03/elasticstatic/</url>
      
        <content type="html"><![CDATA[<p><strong>ELK</strong></p><blockquote><p>Elasticsearch ÊòØ‰∏Ä‰∏™ÊêúÁ¥¢ÂíåÂàÜÊûêÂºïÊìé„ÄÇLogstash ÊòØÊúçÂä°Âô®Á´ØÊï∞ÊçÆÂ§ÑÁêÜÁÆ°ÈÅìÔºåËÉΩÂ§üÂêåÊó∂‰ªéÂ§ö‰∏™Êù•Ê∫êÈááÈõÜÊï∞ÊçÆÔºåËΩ¨Êç¢Êï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞ËØ∏Â¶Ç Elasticsearch Á≠â‚ÄúÂ≠òÂÇ®Â∫ì‚Äù‰∏≠„ÄÇKibana ÂàôÂèØ‰ª•ËÆ©Áî®Êà∑Âú® Elasticsearch ‰∏≠‰ΩøÁî®ÂõæÂΩ¢ÂíåÂõæË°®ÂØπÊï∞ÊçÆËøõË°åÂèØËßÜÂåñ„ÄÇ</p></blockquote><p>Elasticsearch is the living heart of what is today‚Äôs the most popular log analytics platform ‚Äî the ELK Stack (Elasticsearch, Logstash and Kibana). Elasticsearch‚Äôs role is so central that it has become synonymous with the name of the stack itself.</p><p>Elasticsearch behaves like a REST API, so you can use either the¬†<code>POST</code>¬†or the¬†<code>PUT</code>¬†method to add data to it. You use¬†<code>PUT</code>¬†when you know the or want to specify the¬†<code>id</code>¬†of the data item, or¬†<code>POST</code>¬†if you want Elasticsearch to generate an¬†<code>id</code>¬†for the data item:</p><h3 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h3><h4 id="max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535"><a href="#max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535" class="headerlink" title="max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]"></a>max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]</h4><p>If you want to increase the limit shown by <code>ulimit -n</code>, you should:</p><ul><li><p>Modify <code>/etc/systemd/user.conf</code> and <code>/etc/systemd/system.conf</code> with the following line (this takes care of graphical login):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefaultLimitNOFILE=65535</span><br></pre></td></tr></table></figure></li><li><p>Modify <code>/etc/security/limits.conf</code> with the following lines (this takes care of non-GUI login):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* hard nofile 65535</span><br><span class="line">* soft nofile 65535</span><br></pre></td></tr></table></figure></li><li><p>Reboot your computer for changes to take effect.</p></li><li><p>check</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ulimit -Hn</span><br><span class="line">ulimit -Sn</span><br></pre></td></tr></table></figure></li></ul><h4 id="max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><a href="#max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144" class="headerlink" title="max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]"></a>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</h4><ul><li><p><code>vim /etc/sysctl.conf¬†</code></p><p>Êñ∞Â¢û<strong>vm.max_map_count=655360</strong></p></li><li><p><code>sysctl -p</code></p></li></ul><h4 id="the-default-discovery-settings-are-unsuitable-for-production-use-at-least-one-of-discovery-seed-hosts-discovery-seed-providers-cluster-initial-master-nodes-must-be-configured"><a href="#the-default-discovery-settings-are-unsuitable-for-production-use-at-least-one-of-discovery-seed-hosts-discovery-seed-providers-cluster-initial-master-nodes-must-be-configured" class="headerlink" title="the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured"></a>the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</h4><p>in short, if you are running Elasticsearch locally(single node) or just with a single node on the cloud then just use below config in your¬†<code>elasticsearch.yml</code>¬†to avoid the production check, and to make it work, more info about this config in¬†<a href="https://stackoverflow.com/a/60426167/4039431">this SO</a>¬†answer:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">discovery.type:</span> <span class="string">single-node</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Elasticsearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nacos snippet</title>
      <link href="/2021/12/01/nacos%20snippet/"/>
      <url>/2021/12/01/nacos%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="ÂéüÁêÜ"><a href="#ÂéüÁêÜ" class="headerlink" title="ÂéüÁêÜ"></a>ÂéüÁêÜ</h2><p><a href="https://juejin.cn/post/7136952484903256077">https://juejin.cn/post/7136952484903256077</a></p><h5 id="ÊúçÂä°Ê≥®ÂÜå"><a href="#ÊúçÂä°Ê≥®ÂÜå" class="headerlink" title="ÊúçÂä°Ê≥®ÂÜå"></a>ÊúçÂä°Ê≥®ÂÜå</h5><p>Spring Cloud Alibaba Nacos Discovery ÈÅµÂæ™‰∫Ü Spring Cloud Common Ê†áÂáÜÔºåÂÆûÁé∞‰∫Ü AutoServiceRegistration„ÄÅServiceRegistry„ÄÅRegistration Ëøô‰∏â‰∏™Êé•Âè£„ÄÇ</p><p>Âú® Spring Cloud Â∫îÁî®ÁöÑÂêØÂä®Èò∂ÊÆµÔºåÁõëÂê¨‰∫Ü WebServerInitializedEvent ‰∫ã‰ª∂ÔºåÂΩì Web ÂÆπÂô®ÂàùÂßãÂåñÂÆåÊàêÂêéÔºåÂç≥Êî∂Âà∞ WebServerInitializedEvent ‰∫ã‰ª∂ÂêéÔºå‰ºöËß¶ÂèëÊ≥®ÂÜåÁöÑÂä®‰ΩúÔºåË∞ÉÁî® ServiceRegistry ÁöÑ register ÊñπÊ≥ïÔºåÂ∞ÜÊúçÂä°Ê≥®ÂÜåÂà∞ Nacos Server„ÄÇ</p><p>![nacosÂÆ¢Êà∑Á´ØÊ≥®ÂÜåÊú∫Âà∂](/images/nacos/nacos client register mechanism.png)</p><ul><li><p>python nacos client</p><p><a href="https://pypi.org/project/nacos-client-python/">nacos-client-python</a></p></li></ul><h2 id="ÂêØÂä®"><a href="#ÂêØÂä®" class="headerlink" title="ÂêØÂä®"></a>ÂêØÂä®</h2><ul><li>2.xÁâàÊú¨ÂêØÂä®ÔºåÈúÄË¶ÅÊ∑ªÂä† -mÂ±ûÊÄß<code>./startup.sh -m standalone</code></li></ul><h2 id="ÂøÉË∑≥Êú∫Âà∂"><a href="#ÂøÉË∑≥Êú∫Âà∂" class="headerlink" title="ÂøÉË∑≥Êú∫Âà∂"></a>ÂøÉË∑≥Êú∫Âà∂</h2><h3 id="ÂÅ•Â∫∑Ê£ÄÊü•"><a href="#ÂÅ•Â∫∑Ê£ÄÊü•" class="headerlink" title="ÂÅ•Â∫∑Ê£ÄÊü•"></a>ÂÅ•Â∫∑Ê£ÄÊü•</h3><p>ÊúçÂä°Á´ØÊé•ÂèóÂà∞ÂÆ¢Êà∑Á´ØÁöÑÊúçÂä°Ê≥®ÂÜåËØ∑Ê±ÇÂêéÔºåÂú®ÂàõÂª∫Á©∫ÁöÑServiceÂêéÔºåÂ∞±‰ºöÂºÄÂêØÂÅ•Â∫∑Ê£ÄÊü•‰ªªÂä°</p><ul><li>Âú®Ë∂ÖËøá15ÁßíÊ≤°Êî∂Âà∞ÂÆ¢Êà∑Á´ØÂøÉË∑≥Êó∂ÔºåÂ∞±‰ºöÊääÊ≥®ÂÜåË°®‰∏≠ÂÆû‰æãÁöÑÂÅ•Â∫∑Áä∂ÊÄÅÊîπ‰∏∫false</li><li>Ë∂ÖÊó∂30ÁßíÊ≤°ÊúâÊî∂Âà∞ÂÆ¢Êà∑Á´ØÂøÉË∑≥Êó∂ÔºåÂ∞±‰ºö‰ªéÊ≥®ÂÜåË°®Ë°®ÂâîÈô§ËØ•ÂÆû‰æãÔºå‰ºö‰ΩøÁî®HTTP DELETEÊñπÂºèË∞ÉÁî®/v1/ns/instanceÂú∞ÂùÄ</li></ul><h2 id="open-API"><a href="#open-API" class="headerlink" title="open API"></a>open API</h2><ul><li>Ëé∑ÂèñÊâÄÊúâÊúçÂä°ÂàóË°®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET &#x27;http://127.0.0.1:8848/nacos/v2/ns/service/list&#x27;</span><br></pre></td></tr></table></figure><ul><li>Ëé∑ÂèñÂøÉË∑≥</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &#x27;127.0.0.1:8848/nacos/v2/ns/instance/beat&#x27; \</span><br><span class="line">-d &#x27;&#123;</span><br><span class="line">      &quot;namespaceId&quot;: &quot;jarvex_space&quot;,</span><br><span class="line">      &quot;serviceName&quot;: &quot;jarvex-common-group@@entity-server&quot;,</span><br><span class="line">      &quot;ip&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;port&quot;: &quot;5333&quot;</span><br><span class="line">&#125;&#x27;</span><br><span class="line">Êàñ</span><br><span class="line">curl -X PUT &#x27;127.0.0.1:8848/nacos/v2/ns/instance/beat&#x27; \</span><br><span class="line">      -d &#x27;namespaceId=jarvex_space&#x27; \</span><br><span class="line">      -d &#x27;serviceName=jarvex-common-group@@entity-server&#x27; \</span><br><span class="line">      -d &#x27;ip=127.0.0.1&#x27; \</span><br><span class="line">      -d &#x27;port=5333&#x27;</span><br></pre></td></tr></table></figure><ul><li><p>ÂàõÂª∫ÂëΩ‰ª§Á©∫Èó¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -d &#x27;namespaceId=jarvex_space&#x27; \</span><br><span class="line">  -d &#x27;namespaceName=jarvex&#x27; \</span><br><span class="line">  -X POST</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÊåÅ‰πÖÂåñÂÆû‰æã</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE &quot;http://127.0.0.1:8848/nacos/v2/ns/instance?serviceName=jarvex-gateway&amp;ip=192.168.1.148&amp;port=8085&amp;namespaceId=jarvex_space&amp;groupName=jarvex-common-group&amp;ephemeral=false&quot;</span><br></pre></td></tr></table></figure><h2 id="Âä®ÊÄÅÈÖçÁΩÆ"><a href="#Âä®ÊÄÅÈÖçÁΩÆ" class="headerlink" title="Âä®ÊÄÅÈÖçÁΩÆ"></a>Âä®ÊÄÅÈÖçÁΩÆ</h2><h3 id="ÊñπÊ°à‰∏Ä-nacos-configÈÖçÁΩÆ‰∏≠ÂøÉËé∑Âèñ"><a href="#ÊñπÊ°à‰∏Ä-nacos-configÈÖçÁΩÆ‰∏≠ÂøÉËé∑Âèñ" class="headerlink" title="ÊñπÊ°à‰∏Ä: nacos configÈÖçÁΩÆ‰∏≠ÂøÉËé∑Âèñ"></a>ÊñπÊ°à‰∏Ä: nacos configÈÖçÁΩÆ‰∏≠ÂøÉËé∑Âèñ</h3><ul><li><p>ÈÄöËøáÈÖçÁΩÆnacos configÂíå controllerËé∑Âèñ</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">config</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">enabled</span>: <span class="string">true</span></span><br><span class="line">  <span class="meta">server-addr</span>: <span class="string">$&#123;spring.cloud.nacos.server-addr&#125;</span></span><br><span class="line">  <span class="meta">file-extension</span>: <span class="string">yaml</span></span><br><span class="line">  <span class="attr">namespace</span>: <span class="string">public</span></span><br></pre></td></tr></table></figure><p>controllerÁ±ª‰ΩøÁî® @RefreshÔºåÂà∑Êñ∞Âä®ÊÄÅÈÖçÁΩÆ</p></li></ul><h3 id="ÊñπÊ°à‰∫åÔºönacos-client-ÁõëÂê¨ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÔºàrecommendedÔºâ"><a href="#ÊñπÊ°à‰∫åÔºönacos-client-ÁõëÂê¨ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÔºàrecommendedÔºâ" class="headerlink" title="ÊñπÊ°à‰∫åÔºönacos client ÁõëÂê¨ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÔºàrecommendedÔºâ"></a>ÊñπÊ°à‰∫åÔºönacos client ÁõëÂê¨ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÔºàrecommendedÔºâ</h3><ul><li>ÁºñÂÜôÁõëÂê¨Á±ª</li><li>ÊâãÂä®Âà∑Êñ∞ÈÖçÁΩÆ</li></ul><h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h3><ul><li><a href="https://www.lijunyi.xyz/docs/SpringCloud/SpringCloud.html#%E6%95%B4%E4%BD%93%E5%A4%A7%E7%BA%B2%F0%9F%92%A8">https://www.lijunyi.xyz/docs/SpringCloud/SpringCloud.html#%E6%95%B4%E4%BD%93%E5%A4%A7%E7%BA%B2%F0%9F%92%A8</a></li><li><a href="http://47.109.59.205/2023/01/02/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/#1-Nacos%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86">http://47.109.59.205/2023/01/02/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/#1-Nacos%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86</a></li><li><a href="https://cloud.tencent.com/developer/article/2096938">https://cloud.tencent.com/developer/article/2096938</a></li><li><a href="https://www.cnblogs.com/taojietaoge/p/16638226.html">https://www.cnblogs.com/taojietaoge/p/16638226.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> spring cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu snippet</title>
      <link href="/2021/10/08/ubuntu%20snippet/"/>
      <url>/2021/10/08/ubuntu%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="Á£ÅÁõòÊåÇËΩΩ"><a href="#Á£ÅÁõòÊåÇËΩΩ" class="headerlink" title="Á£ÅÁõòÊåÇËΩΩ"></a>Á£ÅÁõòÊåÇËΩΩ</h2><ol><li><p>Get the UUID of the partition</p><p><code>sudo blkid</code></p></li><li><p>Add partition to fstab</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /data was on /dev/sda3</span></span><br><span class="line">UUID=0009091A00027E42 /data            ntfs   defaults,iocharset=utf8,fmask=111,dmask=002        0       2</span><br></pre></td></tr></table></figure></li></ol><h2 id="deepin-wine"><a href="#deepin-wine" class="headerlink" title="deepin wine"></a>deepin wine</h2><h2 id="ÁôæÂ∫¶ÁΩëÁõòid"><a href="#ÁôæÂ∫¶ÁΩëÁõòid" class="headerlink" title="ÁôæÂ∫¶ÁΩëÁõòid"></a>ÁôæÂ∫¶ÁΩëÁõòid</h2><ul><li><p>‰∏ÄÁõ¥ÂÅúÁïôÂú®ÁôªÂΩïÁïåÈù¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Âà†Èô§„ÄÄÔΩû/baidunetdiskÊñá‰ª∂Â§πÔºåÂÜçÊ¨°ÂêØÂä®Âç≥ÂèØ</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÂÖâÈ©±Áõ∏ÂÖ≥"><a href="#ÂÖâÈ©±Áõ∏ÂÖ≥" class="headerlink" title="ÂÖâÈ©±Áõ∏ÂÖ≥"></a>ÂÖâÈ©±Áõ∏ÂÖ≥</h2><p>CDROM, DVD Ëøô‰∫õËÆæÂ§áÁé∞Âú®Êù•ËØ¥ÈÉΩÊòØÂ±û‰∫éÂè§Ëë£‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Êúâ‰∫õÁ¨¨‰∏âÊñπËΩØ‰ª∂ÊòØ‰ª•CDROMÁöÑÂΩ¢ÂºèÊèê‰æõÁöÑÔºåÊâÄ‰ª•ÊúâÊó∂ÂÄôËøò‰ºöÈÅáÂà∞Â¶Ç‰ΩïÊåÇËΩΩÁöÑÈóÆÈ¢ò?</p><p>Âú®Ubuntu Server 18.04‰∏≠ÔºåË¶ÅÊåÇËΩΩ CDROM(DVD)ÂèØ‰ª•ÈÅµÂæ™‰ª•‰∏ãÊ≠•È™§:</p><h4 id="ÊåÇËΩΩ-CDROM-DVD"><a href="#ÊåÇËΩΩ-CDROM-DVD" class="headerlink" title="ÊåÇËΩΩ CDROM(DVD)"></a>ÊåÇËΩΩ CDROM(DVD)</h4><ol><li>Á°ÆËÆ§ËÆæÂ§áÊñá‰ª∂Âêç, ËøõÂÖ• dev ÁõÆÂΩïÔºå ÊâßË°åÔºö</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /dev</span><br><span class="line">ls -lt | less</span><br></pre></td></tr></table></figure><p>Á≥ªÁªüÊòæÁ§∫‰∏Ä‰∏™ËÆæÂ§áÂàóË°®ÔºåÂèØ‰ª•ÁúãÂà∞ÂÖ∂‰∏≠Êúâ‰∏§‰∏™ÁâπÂà´ÁöÑÔºåÂàÜÂà´ÊòØ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdrom -&gt; sr0</span><br><span class="line">dvd -&gt; sr0</span><br></pre></td></tr></table></figure><p>ËØ¥ÊòéÁ≥ªÁªüÂ∑≤ÁªèÂ∞Ü cdrom, dvd ÂëΩÂêç‰∏∫ sr0 ÁöÑÂà´ÂêçÔºåÂÖ∂ÂÆûÊòØÂêå‰∏Ä‰∏™ËÆæÂ§á„ÄÇ</p><ol><li>ÊâßË°å mount ÂëΩ‰ª§ÊåÇËΩΩcdrom, Âõ†‰∏∫ ubuntu server 18.04‰∏≠ÔºåÂ∑≤ÁªèÂú®Ê†πÁõÆÂΩï‰∏ãÂª∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ cdrom ÁöÑÁõÆÂΩïÔºåÊàë‰ª¨Â∞±‰ΩøÁî®Ëøô‰∏™ÁõÆÂΩïÊù•ÊåÇËΩΩÔºåÊâßË°å:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount /dev/cdrom /cdrom</span><br></pre></td></tr></table></figure><h4 id="Âç∏ËΩΩ-CDROM-DVD"><a href="#Âç∏ËΩΩ-CDROM-DVD" class="headerlink" title="Âç∏ËΩΩ CDROM (DVD)"></a>Âç∏ËΩΩ CDROM (DVD)</h4><p>Ë¶ÅÊÉ≥Âç∏ËΩΩ CDROM, ÂèØ‰ª•ÁÆÄÂçïÁöÑÊâßË°å:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /cdrom</span><br></pre></td></tr></table></figure><p>Â¶ÇÊûúÊòØÊÉ≥Êé®Âá∫ÂΩìÂâçÁöÑÂÖâÁõòÔºåÂàôÂèØ‰ª•ÊâßË°å:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo eject /cdrom</span><br></pre></td></tr></table></figure><h2 id="postgre"><a href="#postgre" class="headerlink" title="postgre"></a>postgre</h2><p>Âú®Êú¨Êú∫ÂÆâË£ÖÔºåÈùûdockerÔºåuser: postgres     pw:postgres </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><h2 id="Êõ¥Êîπ-Ubuntu-18-04-ÁôªÈôÜËÉåÊôØ"><a href="#Êõ¥Êîπ-Ubuntu-18-04-ÁôªÈôÜËÉåÊôØ" class="headerlink" title="Êõ¥Êîπ Ubuntu 18.04 ÁôªÈôÜËÉåÊôØ"></a>Êõ¥Êîπ Ubuntu 18.04 ÁôªÈôÜËÉåÊôØ</h2><ol><li><p><code>sudo vi /etc/alternatives/gdm3.css</code></p></li><li><p>‰øÆÊîπ CSS Êñá‰ª∂ÂÜÖÂÆπ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#lockDialogGroup</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">/*Ëá™Â∑±ÂñúÊ¨¢ÁöÑÂõæÁâáÁöÑË∑ØÂæÑ„ÄÇÊ≥®ÊÑèÔºå‰∏çÈúÄË¶Åresource://ÂºÄÂ§¥*/</span>);</span><br><span class="line"><span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line"><span class="attribute">background-size</span>: cover;</span><br><span class="line"><span class="attribute">background-position</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="ÈÖçÂêàelectron-ssrËøõË°åÁªàÁ´ØÂ§ñÁΩëËÆøÈóÆ"><a href="#ÈÖçÂêàelectron-ssrËøõË°åÁªàÁ´ØÂ§ñÁΩëËÆøÈóÆ" class="headerlink" title="ÈÖçÂêàelectron-ssrËøõË°åÁªàÁ´ØÂ§ñÁΩëËÆøÈóÆ"></a>ÈÖçÂêàelectron-ssrËøõË°åÁªàÁ´ØÂ§ñÁΩëËÆøÈóÆ</h2><p>Âú®<code>/etc/profile</code>‰∏≠Ê∑ªÂä†ÈÖçÁΩÆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&quot;http://127.0.0.1:12333&quot;</span><br><span class="line">export https_proxy=&quot;http://127.0.0.1:12333&quot;</span><br></pre></td></tr></table></figure><p>ÁÑ∂Âêé<code>source /etc/profile</code>Âç≥ÂèØ</p><h2 id="ÂçáÁ∫ßÂà∞2204ÁâàÊú¨‰∏≠ÊñáËæìÂÖ•Ê≥ïÂè™Âú®ÁªàÁ´ØÂèØÁî®Ëß£ÂÜ≥"><a href="#ÂçáÁ∫ßÂà∞2204ÁâàÊú¨‰∏≠ÊñáËæìÂÖ•Ê≥ïÂè™Âú®ÁªàÁ´ØÂèØÁî®Ëß£ÂÜ≥" class="headerlink" title="ÂçáÁ∫ßÂà∞2204ÁâàÊú¨‰∏≠ÊñáËæìÂÖ•Ê≥ïÂè™Âú®ÁªàÁ´ØÂèØÁî®Ëß£ÂÜ≥"></a>ÂçáÁ∫ßÂà∞2204ÁâàÊú¨‰∏≠ÊñáËæìÂÖ•Ê≥ïÂè™Âú®ÁªàÁ´ØÂèØÁî®Ëß£ÂÜ≥</h2><blockquote><p>ÂèÇËÄÉÔºö<a href="https://zhuanlan.zhihu.com/p/508797663">https://zhuanlan.zhihu.com/p/508797663</a></p></blockquote><ul><li>/etc/profile Ê∑ªÂä†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export XMODIFIERS=@im=fcitx</span><br><span class="line">export GTK_IM_MODULE=fcitx</span><br><span class="line">export QT_IM_MODULE=fcitx</span><br></pre></td></tr></table></figure><ul><li>~/.pam_environment Ê∑ªÂä†‰ª•‰∏ãÂá†Ë°åÔºö</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GTK_IM_MODULE DEFAULT=fcitx</span><br><span class="line">QT_IM_MODULE DEFAULT=fcitx</span><br><span class="line">XMODIFIERS DEFAULT=@im=fcitx</span><br><span class="line">SDL_IM_MODULE DEFAULT=fcitx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVM Learn</title>
      <link href="/2021/09/01/JVM%20learn/"/>
      <url>/2021/09/01/JVM%20learn/</url>
      
        <content type="html"><![CDATA[<h2 id="Â†ÜÂÜÖ‰∏éÂ†ÜÂ§ñ"><a href="#Â†ÜÂÜÖ‰∏éÂ†ÜÂ§ñ" class="headerlink" title="Â†ÜÂÜÖ‰∏éÂ†ÜÂ§ñ"></a>Â†ÜÂÜÖ‰∏éÂ†ÜÂ§ñ</h2><h3 id="Â†Ü"><a href="#Â†Ü" class="headerlink" title="Â†Ü"></a>Â†Ü</h3><ul><li><p>Â∏∏ËØ¥ÁöÑÂ†ÜÔºåÊåáÁöÑÊòØÂ†ÜÂÜÖÂÜÖÂ≠òÔºåÁî±JVM„ÄåÊâòÁÆ°„ÄçÁöÑÂÜÖÂ≠òÂå∫Âüü„ÄÇÂØπÂ∫îÁöÑËã±ÊñáÊòØÔºöon-heap Memory„ÄÇÊâÄÊúâÁöÑÂØπË±°ÈÉΩÊòØÊîæÂú®Â†Ü‰∏≠„ÄÇ</p></li><li><p>Â†ÜÁöÑÁâπÁÇπÔºö</p></li><li><ul><li>Áî±GCÁÆ°ÁêÜÔºå‰∏ÄÊó¶Â†ÜÂ§ßÂ∞èÂ§ß‰∫é1GB‰ºöÂá∫Áé∞ÊØîËæÉÊòéÊòæÁöÑÊöÇÂÅú„ÄÇ</li><li>ÂØπË±°Â≠òÂÇ®Âà∞GC‰∏≠Êó†ÈúÄËøõË°åÂ∫èÂàóÂåñ„ÄÅÂèçÂ∫èÂàóÂåñÁöÑ„ÄÇ</li></ul></li></ul><h3 id="Â†ÜÂ§ñ"><a href="#Â†ÜÂ§ñ" class="headerlink" title="Â†ÜÂ§ñ"></a>Â†ÜÂ§ñ</h3><ul><li><p>Â†ÜÂ§ñÂ∞±ÊòØJVMÂºÄËæüÂá∫Êù•ÁöÑÔºåÂ†Ü‰ª•Â§ñÁöÑ‰∏ÄÂùó„ÄåÈùûÊâòÁÆ°„ÄçÂÜÖÂ≠òÂå∫Âüü„ÄÇÂØπÂ∫îÁöÑËã±ÊñáÊòØÔºöoff-heap Memory„ÄÇÂ†ÜÂ§ñÂÜÖÂ≠ò‰πüÊòØ JVM ËøõÁ®ãÂºÄËæüÁöÑ‰∏ÄÂùóÂÜÖÂ≠òÁ©∫Èó¥„ÄÇÂè™‰∏çËøáÔºåGC‰∏ç‰ºö„ÄåÂÖâÈ°æ„ÄçËøôÈáå„ÄÇ</p></li><li><p>Â†ÜÂ§ñÁöÑÁâπÁÇπÔºö</p></li><li><ul><li>Áî±Êìç‰ΩúÁ≥ªÁªüÁõ¥Êé•ÁÆ°ÁêÜ„ÄÇÂà´ÁöÑËøõÁ®ãËÉΩÂ§üÁõ¥Êé•ËÆøÈóÆ„ÄÇ</li><li>ÁâπÂà´ÈÄÇÂêàÂàÜÈÖçÊ¨°Êï∞Â∞ëÔºåËØªÂÜôÈùûÂ∏∏È¢ëÁπÅÁöÑÂú∫ÊôØ„ÄÇ</li><li>ÂèØ‰ª•ÈÅøÂÖçÂú®ÂàÜÈÖçGBÁ∫ßÂà´ÁöÑÂÜÖÂ≠òËÄåÈÄ†ÊàêGCÂºÄÈîÄ„ÄÇ</li></ul></li><li><p>Â†ÜÂ§ñÁöÑÁº∫ÁÇπÔºö</p></li><li><ul><li>ÂÆπÊòìÂá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÊºèÔºåÈöæ‰ª•ÊéíÊü•„ÄÇ</li><li>ÂØπË±°ÁöÑÂ≠òÂÇ®ÈúÄË¶ÅÂ∫èÂàóÂåñ„ÄÅÂíåÂèçÂ∫èÂàóÂåñ„ÄÇ</li></ul></li></ul><p>Âõ†‰∏∫Â†ÜÂ§ñÂÜÖÂ≠òÁî±Ê≠§ÁâπÁÇπÔºåÂæàÂ§öÈ´òÊÄßËÉΩÁöÑÂ∫îÁî®ÁªÑ‰ª∂Âü∫‰∫éoff-heapÊù•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p><h4 id="Â†ÜÂ§ñÂÜÖÂ≠òÂ∏∏ÈÖçÂêà‰ΩøÁî®System-GC"><a href="#Â†ÜÂ§ñÂÜÖÂ≠òÂ∏∏ÈÖçÂêà‰ΩøÁî®System-GC" class="headerlink" title="Â†ÜÂ§ñÂÜÖÂ≠òÂ∏∏ÈÖçÂêà‰ΩøÁî®System GC"></a>Â†ÜÂ§ñÂÜÖÂ≠òÂ∏∏ÈÖçÂêà‰ΩøÁî®System GC</h4><blockquote><p>Â†ÜÂ§ñÂÜÖÂ≠ò‰∏ªË¶ÅÈíàÂØπjava.nio.DirectByteBufferÔºåËøô‰∫õÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ã‰ºöÈÄöËøáUnsafeÊé•Âè£Áõ¥Êé•ÈÄöËøáos::mallocÊù•ÂàÜÈÖçÂÜÖÂ≠òÔºåÁÑ∂ÂêéÂ∞ÜÂÜÖÂ≠òÁöÑËµ∑ÂßãÂú∞ÂùÄÂíåÂ§ßÂ∞èÂ≠òÂà∞java.nio.DirectByteBufferÂØπË±°ÈáåÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Áõ¥Êé•Êìç‰ΩúËøô‰∫õÂÜÖÂ≠ò„ÄÇËøô‰∫õÂÜÖÂ≠òÂè™ÊúâÂú®DirectByteBufferÂõûÊî∂Êéâ‰πãÂêéÊâçÊúâÊú∫‰ºöË¢´ÂõûÊî∂ÔºåÂõ†Ê≠§Â¶ÇÊûúËøô‰∫õÂØπË±°Â§ßÈÉ®ÂàÜÈÉΩÁßªÂà∞‰∫ÜoldÔºå‰ΩÜÊòØ‰∏ÄÁõ¥Ê≤°ÊúâËß¶ÂèëCMS GCÊàñËÄÖFull GCÔºåÈÇ£‰πàÊÇ≤ÂâßÂ∞Ü‰ºöÂèëÁîüÔºåÂõ†‰∏∫‰Ω†ÁöÑÁâ©ÁêÜÂÜÖÂ≠òË¢´‰ªñ‰ª¨ËÄóÂ∞Ω‰∫ÜÔºåÂõ†Ê≠§‰∏∫‰∫ÜÈÅøÂÖçËøôÁßçÊÇ≤ÂâßÁöÑÂèëÁîüÔºåÈÄöËøá-XX:MaxDirectMemorySizeÊù•ÊåáÂÆöÊúÄÂ§ßÁöÑÂ†ÜÂ§ñÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂΩì‰ΩøÁî®ËææÂà∞‰∫ÜÈòàÂÄºÁöÑÊó∂ÂÄôÂ∞ÜË∞ÉÁî®System.gcÊù•ÂÅö‰∏ÄÊ¨°full gcÔºå‰ª•Ê≠§Êù•ÂõûÊî∂ÊéâÊ≤°ÊúâË¢´‰ΩøÁî®ÁöÑÂ†ÜÂ§ñÂÜÖÂ≠ò„ÄÇ</p></blockquote><h3 id="System-gcÂ∏∏ËØÜ"><a href="#System-gcÂ∏∏ËØÜ" class="headerlink" title="System.gcÂ∏∏ËØÜ"></a>System.gcÂ∏∏ËØÜ</h3><ul><li>system.gcÂÖ∂ÂÆûÊòØÂÅö‰∏ÄÊ¨°full gc</li><li>system.gc‰ºöÊöÇÂÅúÊï¥‰∏™ËøõÁ®ã</li><li>system.gc‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊàë‰ª¨Ë¶ÅÁ¶ÅÊéâÔºå‰ΩøÁî®-XX:+DisableExplicitGC</li><li>system.gcÂú®cms gc‰∏ãÊàë‰ª¨ÈÄöËøá-XX:+ExplicitGCInvokesConcurrentÊù•ÂÅö‰∏ÄÊ¨°Á®çÂæÆÈ´òÊïàÁÇπÁöÑGC(ÊïàÊûúÊØîFull GCË¶ÅÂ•Ω‰∫õ)</li><li>system.gcÊúÄÂ∏∏ËßÅÁöÑÂú∫ÊôØÊòØRMI/NIO‰∏ãÁöÑÂ†ÜÂ§ñÂÜÖÂ≠òÂàÜÈÖçÁ≠â</li></ul><h1 id="jvmÂ∏∏Áî®ÂèÇÊï∞ÁöÑËÆæÁΩÆÂíåÂê´‰πâ"><a href="#jvmÂ∏∏Áî®ÂèÇÊï∞ÁöÑËÆæÁΩÆÂíåÂê´‰πâ" class="headerlink" title="jvmÂ∏∏Áî®ÂèÇÊï∞ÁöÑËÆæÁΩÆÂíåÂê´‰πâ"></a>jvmÂ∏∏Áî®ÂèÇÊï∞ÁöÑËÆæÁΩÆÂíåÂê´‰πâ</h1><p><strong>1.ËÆæÁΩÆÂ†ÜÁöÑÊúÄÂ§ßÂíåÊúÄÂ∞èÂÄº</strong><br> -Xmx20M(ÊúÄÂ§ßÂÄº) ,-Xms20M(ÊúÄÂ∞èÂÄº)„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XmsÂíå-XmxÂÆûÈôÖ‰∏äÊòØ -XX:InitialHeapSize Âíå-XX:MaxHeapSize ÁöÑÁº©ÂÜô</span><br></pre></td></tr></table></figure><p><strong>2.ËÆæÁΩÆÊ†àÁöÑÂ§ßÂ∞è</strong><br> -Xss128kÔºö ËÆæÁΩÆÊØè‰∏™Á∫øÁ®ãÁöÑÂ†ÜÊ†àÂ§ßÂ∞è„ÄÇJDK5.0‰ª•ÂêéÊØè‰∏™Á∫øÁ®ãÂ†ÜÊ†àÂ§ßÂ∞è‰∏∫1MÔºå‰ª•ÂâçÊØè‰∏™Á∫øÁ®ãÂ†ÜÊ†àÂ§ßÂ∞è‰∏∫256K„ÄÇÊõ¥ÂÖ∑Â∫îÁî®ÁöÑÁ∫øÁ®ãÊâÄÈúÄÂÜÖÂ≠òÂ§ßÂ∞èËøõË°åË∞ÉÊï¥„ÄÇÂú®Áõ∏ÂêåÁâ©ÁêÜÂÜÖ Â≠ò‰∏ãÔºåÂáèÂ∞èËøô‰∏™ÂÄºËÉΩÁîüÊàêÊõ¥Â§öÁöÑÁ∫øÁ®ã„ÄÇ‰ΩÜÊòØÊìç‰ΩúÁ≥ªÁªüÂØπ‰∏Ä‰∏™ËøõÁ®ãÂÜÖÁöÑÁ∫øÁ®ãÊï∞ËøòÊòØÊúâÈôêÂà∂ÁöÑÔºå‰∏çËÉΩÊó†ÈôêÁîüÊàêÔºåÁªèÈ™åÂÄºÂú®3000~5000Â∑¶Âè≥„ÄÇ</p><p>ÂäüËÉΩÂºÄÂÖ≥:</p><table><thead><tr><th>ÂèÇÊï∞</th><th>ÈªòËÆ§ÂÄºÊàñÈôêÂà∂</th><th>ËØ¥Êòé</th></tr></thead><tbody><tr><td>-XX:-AllowUserSignalHandlers</td><td>Èôê‰∫éLinuxÂíåSolarisÔºåÈªòËÆ§‰∏çÂêØÁî®</td><td>ÂÖÅËÆ∏‰∏∫javaËøõÁ®ãÂÆâË£Ö‰ø°Âè∑Â§ÑÁêÜÂô®,‰ø°Âè∑Â§ÑÁêÜÂèÇËßÅÁ±ª:sun.misc.Signal, sun.misc.SignalHandler</td></tr><tr><td>-XX:+DisableExplicitGC</td><td>ÈªòËÆ§ÂêØÁî®</td><td>Á¶ÅÊ≠¢Âú®ËøêË°åÊúüÊòæÂºèÂú∞Ë∞ÉÁî®System.gc()</td></tr><tr><td>-XX:+FailOverToOldVerifier</td><td>Java6Êñ∞ÂºïÂÖ•ÈÄâÈ°πÔºåÈªòËÆ§ÂêØÁî®</td><td>Â¶ÇÊûúÊñ∞ÁöÑClassÊ†°È™åÂô®Ê£ÄÊü•Â§±Ë¥•ÔºåÂàô‰ΩøÁî®ËÄÅÁöÑÊ†°È™åÂô®(Â§±Ë¥•ÂéüÂõ†:Âõ†‰∏∫JDK6ÊúÄÈ´òÂêë‰∏ãÂÖºÂÆπÂà∞JDK1.2ÔºåËÄåJDK1.2ÁöÑclass info ‰∏éJDK6ÁöÑinfoÂ≠òÂú®ËæÉÂ§ßÁöÑÂ∑ÆÂºÇÔºåÊâÄ‰ª•Êñ∞Ê†°È™åÂô®ÂèØËÉΩ‰ºöÂá∫Áé∞Ê†°È™åÂ§±Ë¥•ÁöÑÊÉÖÂÜµ)</td></tr><tr><td>-XX:+HandlePromotionFailure</td><td>java5‰ª•ÂâçÊòØÈªòËÆ§‰∏çÂêØÁî®Ôºåjava6ÈªòËÆ§ÂêØÁî®</td><td>ÂÖ≥Èó≠Êñ∞Áîü‰ª£Êî∂ÈõÜÊãÖ‰øù</td></tr><tr><td>-XX:+MaxFDLimit</td><td>Èôê‰∫éSolarisÔºåÈªòËÆ§ÂêØÁî®</td><td>ËÆæÁΩÆjavaËøõÁ®ãÂèØÁî®Êñá‰ª∂ÊèèËø∞Á¨¶‰∏∫Êìç‰ΩúÁ≥ªÁªüÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÄº„ÄÇ</td></tr><tr><td>-XX:PreBlockSpin=10</td><td>-XX:+UseSpinning ÂøÖÈ°ªÂÖàÂêØÁî®ÔºåÂØπ‰∫éjava6Êù•ËØ¥Â∑≤ÁªèÈªòËÆ§ÂêØÁî®‰∫ÜÔºåËøôÈáåÈªòËÆ§Ëá™Êóã10Ê¨°</td><td>ÊéßÂà∂Â§öÁ∫øÁ®ãËá™ÊóãÈîÅ‰ºòÂåñÁöÑËá™ÊóãÊ¨°Êï∞</td></tr><tr><td>-XX:-RelaxAccessControlCheck</td><td>ÈªòËÆ§‰∏çÂêØÁî®</td><td>Âú®ClassÊ†°È™åÂô®‰∏≠ÔºåÊîæÊùæÂØπËÆøÈóÆÊéßÂà∂ÁöÑÊ£ÄÊü•,‰ΩúÁî®‰∏éreflectionÈáåÁöÑsetAccessibleÁ±ª‰ºº</td></tr><tr><td>-XX:+ScavengeBeforeFullGC</td><td>ÈªòËÆ§ÂêØÁî®</td><td>Âú®Full GCÂâçËß¶Âèë‰∏ÄÊ¨°Minor GC</td></tr><tr><td>-XX:+UseAltSigs</td><td>Èôê‰∫éSolarisÔºåÈªòËÆ§ÂêØÁî®</td><td>‰∏∫‰∫ÜÈò≤Ê≠¢‰∏éÂÖ∂‰ªñÂèëÈÄÅ‰ø°Âè∑ÁöÑÂ∫îÁî®Á®ãÂ∫èÂÜ≤Á™ÅÔºåÂÖÅËÆ∏‰ΩøÁî®ÂÄôË°•‰ø°Âè∑Êõø‰ª£ SIGUSR1ÂíåSIGUSR2</td></tr><tr><td>-XX:+UseBoundThreads</td><td>Èôê‰∫éSolaris, ÈªòËÆ§ÂêØÁî®</td><td>ÁªëÂÆöÊâÄÊúâÁöÑÁî®Êà∑Á∫øÁ®ãÂà∞ÂÜÖÊ†∏Á∫øÁ®ã, ÂáèÂ∞ëÁ∫øÁ®ãËøõÂÖ•È••È•øÁä∂ÊÄÅÔºàÂæó‰∏çÂà∞‰ªª‰Ωïcpu timeÔºâÁöÑÊ¨°Êï∞</td></tr><tr><td>-XX:-UseConcMarkSweepGC</td><td>ÈªòËÆ§‰∏çÂêØÁî®</td><td>ÂêØÁî®CMS‰ΩéÂÅúÈ°øÂûÉÂúæÊî∂ÈõÜÂô®,ÂáèÂ∞ëFGCÁöÑÊöÇÂÅúÊó∂Èó¥</td></tr><tr><td>-XX:+UseGCOverheadLimit</td><td>ÈªòËÆ§ÂêØÁî®</td><td>ÈôêÂà∂GCÁöÑËøêË°åÊó∂Èó¥„ÄÇÂ¶ÇÊûúGCËÄóÊó∂ËøáÈïøÔºåÂ∞±ÊäõOOM</td></tr><tr><td>-XX:+UseLWPSynchronization</td><td>Èôê‰∫ésolarisÔºåÈªòËÆ§ÂêØÁî®</td><td>‰ΩøÁî®ËΩªÈáèÁ∫ßËøõÁ®ãÔºàÂÜÖÊ†∏Á∫øÁ®ãÔºâÊõøÊç¢Á∫øÁ®ãÂêåÊ≠•</td></tr><tr><td>-XX:-UseParallelGC</td><td>-serverÊó∂ÂêØÁî®,ÂÖ∂‰ªñÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§‰∏çÂêØÁî®</td><td>Á≠ñÁï•‰∏∫Êñ∞Áîü‰ª£‰ΩøÁî®Âπ∂Ë°åÊ∏ÖÈô§ÔºåÂπ¥ËÄÅ‰ª£‰ΩøÁî®ÂçïÁ∫øÁ®ãMark-Sweep-CompactÁöÑÂûÉÂúæÊî∂ÈõÜÂô®</td></tr><tr><td>-XX:-UseParallelOldGC</td><td>ÈªòËÆ§‰∏çÂêØÁî®</td><td>Á≠ñÁï•‰∏∫ËÄÅÂπ¥‰ª£ÂíåÊñ∞Áîü‰ª£ÈÉΩ‰ΩøÁî®Âπ∂Ë°åÊ∏ÖÈô§ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®</td></tr><tr><td>-XX:-UseSerialGC</td><td>-clientÊó∂ÂêØÁî®,ÂÖ∂‰ªñÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§‰∏çÂêØÁî®</td><td>‰ΩøÁî®‰∏≤Ë°åÂûÉÂúæÊî∂ÈõÜÂô®</td></tr><tr><td>-XX:-UseSpinning</td><td>java1.4.2Âíå1.5ÈúÄË¶ÅÊâãÂä®ÂêØÁî®, java6ÈªòËÆ§Â∑≤ÂêØÁî®</td><td>ÂêØÁî®Â§öÁ∫øÁ®ãËá™ÊóãÈîÅ‰ºòÂåñ</td></tr><tr><td>-XX:+UseTLAB</td><td>1.4.2‰ª•ÂâçÂíå‰ΩøÁî®-clientÈÄâÈ°πÊó∂ÔºåÈªòËÆ§‰∏çÂêØÁî®ÔºåÂÖ∂‰ΩôÁâàÊú¨ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®Á∫øÁ®ãÊú¨Âú∞ÁºìÂ≠òÂå∫</td></tr><tr><td>-XX:+UseSplitVerifier</td><td>java5ÈªòËÆ§‰∏çÂêØÁî®, java6ÈªòËÆ§ÂêØÁî®</td><td>‰ΩøÁî®Êñ∞ÁöÑClassÁ±ªÂûãÊ†°È™åÂô®</td></tr><tr><td>-XX:+UseThreadPriorities</td><td>ÈªòËÆ§ÂêØÁî®</td><td>‰ΩøÁî®Êú¨Âú∞Á∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ß</td></tr><tr><td>-XX:+UseVMInterruptibleIO</td><td>Èôê‰∫ésolarisÔºåÈªòËÆ§ÂêØÁî®</td><td>Âú®solaris‰∏≠ÔºåÂÖÅËÆ∏ËøêË°åÊó∂‰∏≠Êñ≠Á∫øÁ®ã</td></tr></tbody></table><p>ÊÄßËÉΩÂèÇÊï∞:</p><table><thead><tr><th>ÂèÇÊï∞</th><th>ÈªòËÆ§ÂÄºÊàñÈôêÂà∂</th><th>ËØ¥Êòé</th></tr></thead><tbody><tr><td>-XX:+AggressiveOpts</td><td>JDK 5 update 6ÂêéÂºïÂÖ•Ôºå‰ΩÜÈúÄË¶ÅÊâãÂä®ÂêØÁî®, JDK6ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®JVMÂºÄÂèëÂõ¢ÈòüÊúÄÊñ∞ÁöÑË∞É‰ºòÊàêÊûú„ÄÇ‰æãÂ¶ÇÁºñËØë‰ºòÂåñÔºåÂÅèÂêëÈîÅÔºåÂπ∂Ë°åÂπ¥ËÄÅ‰ª£Êî∂ÈõÜÁ≠â</td></tr><tr><td>-XX:CompileThreshold=10000</td><td>1000</td><td>ÈÄöËøáJITÁºñËØëÂô®ÔºåÂ∞ÜÊñπÊ≥ïÁºñËØëÊàêÊú∫Âô®Á†ÅÁöÑËß¶ÂèëÈòÄÂÄºÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Ë∞ÉÁî®ÊñπÊ≥ïÁöÑÊ¨°Êï∞Ôºå‰æãÂ¶ÇË∞É1000Ê¨°ÔºåÂ∞ÜÊñπÊ≥ïÁºñËØë‰∏∫Êú∫Âô®Á†Å</td></tr><tr><td>-XX:LargePageSizeInBytes=4m</td><td>ÈªòËÆ§4m, amd64‰ΩçÔºö2m</td><td>ËÆæÁΩÆÂ†ÜÂÜÖÂ≠òÁöÑÂÜÖÂ≠òÈ°µÂ§ßÂ∞è</td></tr><tr><td>-XX:MaxHeapFreeRatio=70</td><td>70</td><td>GCÂêéÔºåÂ¶ÇÊûúÂèëÁé∞Á©∫Èó≤Â†ÜÂÜÖÂ≠òÂç†Âà∞Êï¥‰∏™È¢Ñ‰º∞‰∏äÈôêÂÄºÁöÑ70%ÔºåÂàôÊî∂Áº©È¢Ñ‰º∞‰∏äÈôêÂÄº</td></tr><tr><td>-XX:MaxNewSize=size</td><td>1.3.1 Sparc: 32m, 1.3.1 x86: 2.5m</td><td>Êñ∞Áîü‰ª£Âç†Êï¥‰∏™Â†ÜÂÜÖÂ≠òÁöÑÊúÄÂ§ßÂÄº</td></tr><tr><td>-XX:MaxPermSize=64m</td><td>5.0‰ª•Âêé: 64 bit VMs‰ºöÂ¢ûÂ§ßÈ¢ÑËÆæÂÄºÁöÑ30%, 1.4 amd64: 96m, 1.3.1 -client: 32m, ÂÖ∂‰ªñÈªòËÆ§ 64m</td><td>PermÔºà‰øóÁß∞ÊñπÊ≥ïÂå∫ÔºâÂç†Êï¥‰∏™Â†ÜÂÜÖÂ≠òÁöÑÊúÄÂ§ßÂÄº</td></tr><tr><td>-XX:MinHeapFreeRatio=40</td><td>40</td><td>GCÂêéÔºåÂ¶ÇÊûúÂèëÁé∞Á©∫Èó≤Â†ÜÂÜÖÂ≠òÂç†Âà∞Êï¥‰∏™È¢Ñ‰º∞‰∏äÈôêÂÄºÁöÑ40%ÔºåÂàôÂ¢ûÂ§ß‰∏äÈôêÂÄº</td></tr><tr><td>-XX:NewRatio=2</td><td>Sparc -client: 8, x86 -server: 8, x86 -client: 12, -client: 4 (1.3), 8 (1.3.1+), x86: 12, ÂÖ∂‰ªñÈªòËÆ§ 2</td><td>Êñ∞Áîü‰ª£ÂíåÂπ¥ËÄÅ‰ª£ÁöÑÂ†ÜÂÜÖÂ≠òÂç†Áî®ÊØî‰æã, ‰æãÂ¶Ç2Ë°®Á§∫Êñ∞Áîü‰ª£Âç†Âπ¥ËÄÅ‰ª£ÁöÑ1/2ÔºåÂç†Êï¥‰∏™Â†ÜÂÜÖÂ≠òÁöÑ1/3</td></tr><tr><td>-XX:NewSize=2.125m</td><td>5.0‰ª•Âêé: 64 bit Vms ‰ºöÂ¢ûÂ§ßÈ¢ÑËÆæÂÄºÁöÑ30%, x86: 1m, x86, 5.0‰ª•Âêé: 640k, ÂÖ∂‰ªñÈªòËÆ§ 2.125m</td><td>Êñ∞Áîü‰ª£È¢Ñ‰º∞‰∏äÈôêÁöÑÈªòËÆ§ÂÄº</td></tr><tr><td>-XX:ReservedCodeCacheSize=32m</td><td>Solaris 64-bit, amd64, -server x86: 48m, 1.5.0_06‰πãÂâç, Solaris 64-bit amd64: 1024m, ÂÖ∂‰ªñÈªòËÆ§ 32m</td><td>ËÆæÁΩÆ‰ª£Á†ÅÁºìÂ≠òÁöÑÊúÄÂ§ßÂÄºÔºåÁºñËØëÊó∂Áî®</td></tr><tr><td>-XX:SurvivorRatio=8</td><td>Solaris amd64: 6, Sparc in 1.3.1: 25, Solaris platforms 5.0‰ª•Ââç: 32, ÂÖ∂‰ªñÈªòËÆ§ 8</td><td>Eden‰∏éSurvivorÁöÑÂç†Áî®ÊØî‰æã„ÄÇ‰æãÂ¶Ç8Ë°®Á§∫Ôºå‰∏Ä‰∏™survivorÂå∫Âç†Áî® 1/8 ÁöÑEdenÂÜÖÂ≠òÔºåÂç≥1/10ÁöÑÊñ∞Áîü‰ª£ÂÜÖÂ≠òÔºå‰∏∫‰ªÄ‰πà‰∏çÊòØ1/9Ôºü Âõ†‰∏∫Êàë‰ª¨ÁöÑÊñ∞Áîü‰ª£Êúâ2‰∏™survivorÔºåÂç≥S0ÂíåS1„ÄÇÊâÄ‰ª•survivorÊÄªÂÖ±ÊòØÂç†Áî®Êñ∞Áîü‰ª£ÂÜÖÂ≠òÁöÑ 2/10ÔºåEden‰∏éÊñ∞Áîü‰ª£ÁöÑÂç†ÊØîÂàô‰∏∫ 8/10</td></tr><tr><td>-XX:TargetSurvivorRatio=50</td><td>50</td><td>ÂÆûÈôÖ‰ΩøÁî®ÁöÑsurvivorÁ©∫Èó¥Â§ßÂ∞èÂç†ÊØî„ÄÇÈªòËÆ§ÊòØ50%ÔºåÊúÄÈ´ò90%</td></tr><tr><td>-XX:ThreadStackSize=512</td><td>Sparc: 512, Solaris x86: 320 (5.0‰ª•Ââç 256), Sparc 64 bit: 1024, Linux amd64: 1024 (5.0 ‰ª•Ââç 0), ÂÖ∂‰ªñÈªòËÆ§ 512.</td><td>Á∫øÁ®ãÂ†ÜÊ†àÂ§ßÂ∞è</td></tr><tr><td>-XX:+UseBiasedLocking</td><td>JDK 5 update 6ÂêéÂºïÂÖ•Ôºå‰ΩÜÈúÄË¶ÅÊâãÂä®ÂêØÁî®, JDK6ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®ÂÅèÂêëÈîÅ</td></tr><tr><td>-XX:+UseFastAccessorMethods</td><td>ÈªòËÆ§ÂêØÁî®</td><td>‰ºòÂåñÂéüÂßãÁ±ªÂûãÁöÑgetterÊñπÊ≥ïÊÄßËÉΩ(get/set:Primitive Type)</td></tr><tr><td>-XX:-UseISM</td><td>ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®solarisÁöÑISM</td></tr><tr><td>-XX:+UseLargePages</td><td>JDK 5 update 5ÂêéÂºïÂÖ•Ôºå‰ΩÜÈúÄË¶ÅÊâãÂä®ÂêØÁî®, JDK6ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®Â§ßÂÜÖÂ≠òÂàÜÈ°µ</td></tr><tr><td>-XX:+UseMPSS</td><td>1.4.1 ‰πãÂâç: ‰∏çÂêØÁî®, ÂÖ∂‰ΩôÁâàÊú¨ÈªòËÆ§ÂêØÁî®</td><td>ÂêØÁî®solarisÁöÑMPSSÔºå‰∏çËÉΩ‰∏éISMÂêåÊó∂‰ΩøÁî®</td></tr><tr><td>-XX:+UseStringCache</td><td>ÈªòËÆ§ÂºÄÂêØ</td><td>ÂêØÁî®ÁºìÂ≠òÂ∏∏Áî®ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</td></tr><tr><td>-XX:AllocatePrefetchLines=1</td><td>1</td><td>Number of cache lines to load after the last object allocation using prefetch instructions generated in JIT compiled code. Default values are 1 if the last allocated object was an instance and 3 if it was an array.</td></tr><tr><td>-XX:AllocatePrefetchStyle=1</td><td>1</td><td>Generated code style for prefetch instructions. 0 ‚Äì no prefetch instructions are generate<em>d</em>, 1 ‚Äì execute prefetch instructions after each allocation, 2 ‚Äì use TLAB allocation watermark pointer to gate when prefetch instructions are executed.</td></tr><tr><td>-XX:+UseCompressedStrings</td><td>Java 6 update 21Êúâ‰∏ÄÈÄâÈ°π</td><td>ÂÖ∂‰∏≠ÔºåÂØπ‰∫é‰∏çÈúÄË¶Å16‰ΩçÂ≠óÁ¨¶ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂèØ‰ª•‰ΩøÁî®byte[] ËÄåÈùûchar[]„ÄÇÂØπ‰∫éËÆ∏Â§öÂ∫îÁî®ÔºåËøôÂèØ‰ª•ËäÇÁúÅÂÜÖÂ≠òÔºå‰ΩÜÈÄüÂ∫¶ËæÉÊÖ¢Ôºà5ÔºÖ-10ÔºÖÔºâ</td></tr><tr><td>-XX:+OptimizeStringConcat</td><td>Âú®Java 6Êõ¥Êñ∞20‰∏≠ÂºïÂÖ•</td><td>‰ºòÂåñÂ≠óÁ¨¶‰∏≤ËøûÊé•Êìç‰ΩúÂú®ÂèØËÉΩÁöÑÊÉÖÂÜµ‰∏ã</td></tr></tbody></table><p>Ë∞ÉËØïÂèÇÊï∞:</p><table><thead><tr><th>ÂèÇÊï∞</th><th>ÈªòËÆ§ÂÄºÊàñÈôêÂà∂</th><th>ËØ¥Êòé</th></tr></thead><tbody><tr><td>-XX:-CITime</td><td></td><td>ÊâìÂç∞ÂèëË¥πÂú®JITÁºñËØë‰∏äÁöÑÊó∂Èó¥</td></tr><tr><td>-XX:ErrorFile=./hs_err_pid<pid>.log</td><td>JDK6‰∏≠ÂºïÂÖ•</td><td>ÈîôËØØÊñá‰ª∂</td></tr><tr><td>-XX:-ExtendedDTraceProbes</td><td>JDK6‰∏≠ÂºïÂÖ•‰ªÖÂú®Solaris</td><td>ÂêØÁî®ÊÄßËÉΩÁöÑÂΩ±ÂìçDTraceÊé¢ÊµãÂô®</td></tr><tr><td>-XX:HeapDumpPath=./java_pid<pid>.hprof</td><td>1.4.2 update 12, 5.0 update 7</td><td>ÊåáÂÆöHeapDumpÁöÑÊñá‰ª∂Ë∑ØÂæÑÊàñÁõÆÂΩï</td></tr><tr><td>-XX:-HeapDumpOnOutOfMemoryError</td><td>1.4.2 update 12, 5.0 update 7</td><td>ÂΩìÊäõÂá∫OOMÊó∂ËøõË°åHeapDump</td></tr><tr><td>-XX:OnError=‚Äù<cmd args>;<cmd args>‚Äù</td><td>1.4.2 update 9</td><td>ÂΩìÂèëÁîüÈîôËØØÊó∂ÊâßË°åÁî®Êà∑ÊåáÂÆöÁöÑÂëΩ‰ª§</td></tr><tr><td>-XX:OnOutOfMemoryError=‚Äù<cmd args>; <cmd args>‚Äù</td><td>1.4.2 update 12, 6</td><td>ÂΩìÂèëÁîüOOMÊó∂ÊâßË°åÁî®Êà∑ÊåáÂÆöÁöÑÂëΩ‰ª§</td></tr><tr><td>-XX:-PrintClassHistogram</td><td>1.4.2</td><td>ÂΩìCtrl+BreakÂèëÁîüÊó∂ÊâìÂç∞ClassÂÆû‰æã‰ø°ÊÅØ,‰∏éjmap -histoÁõ∏Âêå</td></tr><tr><td>-XX:-PrintConcurrentLocks</td><td>6</td><td>ÂΩìCtrl+BreakÂèëÁîüÊó∂ÊâìÂç∞java.util.concurrentÁöÑÈîÅ‰ø°ÊÅØ, ‰∏éjstack -lÁõ∏Âêå</td></tr><tr><td>-XX:-PrintCommandLineFlags</td><td>5</td><td>ÊâìÂç∞ÂëΩ‰ª§Ë°å‰∏äÁöÑÊ†áËÆ∞</td></tr><tr><td>-XX:-PrintCompilation</td><td></td><td>ÂΩìÊñπÊ≥ïË¢´ÁºñËØëÊó∂ÊâìÂç∞‰ø°ÊÅØ</td></tr><tr><td>-XX:-PrintGC</td><td></td><td>ÂΩìGCÂèëÁîüÊó∂ÊâìÂç∞‰ø°ÊÅØ</td></tr><tr><td>-XX:-PrintGCDetails</td><td>1.4.0</td><td>ÊâìÂç∞GCËØ¶ÁªÜ‰ø°ÊÅØ</td></tr><tr><td>-XX:-PrintGCTimeStamps</td><td>1.4.0</td><td>ÊâìÂç∞GCÁî®Êó∂</td></tr><tr><td>-XX:-PrintTenuringDistribution</td><td></td><td>ÊâìÂç∞TenuringÂπ¥ÈæÑ‰ø°ÊÅØ</td></tr><tr><td>-XX:-TraceClassLoading</td><td></td><td>Ë∑üË∏™Á±ªÂä†ËΩΩ</td></tr><tr><td>-XX:-TraceClassLoadingPreorder</td><td>1.4.2</td><td>Ë∑üË∏™ÊâÄÊúâÂä†ËΩΩÁöÑÂºïÁî®Á±ª</td></tr><tr><td>-XX:-TraceClassResolution</td><td>1.4.2</td><td>Ë∑üË∏™Â∏∏ÈáèÊ±†ÁöÑÂèòÂåñ</td></tr><tr><td>-XX:-TraceClassUnloading</td><td></td><td>Ë∑üË∏™Á±ªÁöÑÂç∏ËΩΩ</td></tr><tr><td>-XX:-TraceLoaderConstraints</td><td>6</td><td>Trace recording of loader constraints</td></tr><tr><td>-XX:+PerfSaveDataToFile</td><td></td><td>ÈÄÄÂá∫Êó∂‰øùÂ≠òjvmstat‰∫åËøõÂà∂Êñá‰ª∂</td></tr><tr><td>-XX:ParallelGCThreads=</td><td></td><td>ËÆæÁΩÆÊñ∞Áîü‰ª£‰∏éËÄÅÂπ¥‰ª£Âπ∂Ë°åÂûÉÂúæÂõûÊî∂Âô®ÁöÑÁ∫øÁ®ãÊï∞</td></tr><tr><td>-XX:+UseCompressedOops</td><td></td><td>Enables the use of compressed pointers (object references represented as 32 bit offsets instead of 64-bit pointers) for optimized 64-bit performance with Java heap sizes less than 32gb.</td></tr><tr><td>-XX:+AlwaysPreTouch</td><td></td><td>Pre-touch the Java heap during JVM initialization. Every page of the heap is thus demand-zeroed during initialization rather than incrementally during application execution.</td></tr><tr><td>-XX:AllocatePrefetchDistance=</td><td></td><td>Sets the prefetch distance for object allocation. Memory about to be written with the value of new objects is prefetched into cache at this distance (in bytes) beyond the address of the last allocated object. Each Java thread has its own allocation point. The default value varies with the platform on which the JVM is running.</td></tr><tr><td>-XX:InlineSmallCode=</td><td></td><td>ÂΩìÁºñËØëÁöÑ‰ª£Á†ÅÂ∞è‰∫éÊåáÂÆöÁöÑÂÄºÊó∂,ÂÜÖËÅîÁºñËØëÁöÑ‰ª£Á†Å</td></tr><tr><td>-XX:MaxInlineSize=35</td><td></td><td>ÂÜÖËÅîÊñπÊ≥ïÁöÑÊúÄÂ§ßÂ≠óËäÇÊï∞</td></tr><tr><td>-XX:FreqInlineSize=</td><td></td><td>ÂÜÖËÅîÈ¢ëÁπÅÊâßË°åÁöÑÊñπÊ≥ïÁöÑÊúÄÂ§ßÂ≠óËäÇÁ†ÅÂ§ßÂ∞è</td></tr><tr><td>-XX:LoopUnrollLimit=</td><td></td><td>Unroll loop bodies with server compiler intermediate representation node count less than this value. The limit used by the server compiler is a function of this value, not the actual value. The default value varies with the platform on which the JVM is running.</td></tr><tr><td>-XX:InitialTenuringThreshold=7</td><td></td><td>ËÆæÁΩÆÂàùÂßãÁöÑÂØπË±°Âú®Êñ∞Áîü‰ª£‰∏≠ÊúÄÂ§ßÂ≠òÊ¥ªÊ¨°Êï∞</td></tr><tr><td>-XX:MaxTenuringThreshold=</td><td></td><td>ËÆæÁΩÆÂØπË±°Âú®Êñ∞Áîü‰ª£‰∏≠ÊúÄÂ§ßÁöÑÂ≠òÊ¥ªÊ¨°Êï∞,ÊúÄÂ§ßÂÄº15,Âπ∂Ë°åÂõûÊî∂Êú∫Âà∂ÈªòËÆ§‰∏∫15,CMSÈªòËÆ§‰∏∫4</td></tr></tbody></table><h1 id="Garbage-Collectors"><a href="#Garbage-Collectors" class="headerlink" title="Garbage Collectors"></a>Garbage Collectors</h1><p>The JVM (Java Virtual Machine) has several different garbage collectors, including the <strong>Parallel Scavenge collector</strong> and the <strong>G1 (Garbage-First) collector</strong>. Both collectors have a ‚Äúyoung generation‚Äù that is responsible for storing newly created objects, but they work in different ways.</p><ul><li>Parallel Scavenge collector</li></ul><p>The Parallel Scavenge collector‚Äôs young generation, also known as the ‚ÄúPS young generation‚Äù, is divided into two regions called ‚ÄúEden‚Äù and ‚ÄúSurvivor‚Äù. The Eden region is where newly created objects are initially allocated, while the Survivor regions are used to store objects that have survived one or more garbage collection cycles. The idea is to quickly identify and collect objects that are no longer needed, while promoting long-lived objects to the older generation.</p><ul><li>G1 collector</li></ul><p>The G1 collector also has a young generation, which is referred to as the ‚ÄúG1 young generation‚Äù. Unlike the PS young generation, the G1 young generation does not have fixed regions like Eden and Survivor. Instead, the G1 collector divides the heap into equal-sized ‚Äúregions‚Äù that can be used for both young and old objects, depending on their age and usage patterns. The G1 collector also uses a ‚Äúremembered set‚Äù to keep track of references between regions, which allows it to more efficiently identify and collect objects that are no longer needed.</p><p>Overall, both the PS and G1 collectors have their own strengths and weaknesses, and the best choice depends on the specific requirements and characteristics of the application. The G1 collector is generally considered to be more flexible and adaptive to different usage patterns, but the PS collector may be better suited for applications with short-lived objects and high object creation rates.</p><h1 id="classLoader"><a href="#classLoader" class="headerlink" title="classLoader"></a>classLoader</h1><h2 id="classÂÜ≤Á™Å"><a href="#classÂÜ≤Á™Å" class="headerlink" title="classÂÜ≤Á™Å"></a>classÂÜ≤Á™Å</h2><p>ÂèØ‰ª•ÊâìÂç∞Âá∫Á±ªÁöÑÂä†ËΩΩÈ°∫Â∫èÔºåÂèØ‰ª•Áî®Êù•ÊéíÊü• class ÁöÑÂÜ≤Á™ÅÈóÆÈ¢òÔºö</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+TraceClassLoading</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker best practices</title>
      <link href="/2021/08/16/docker%20solution/"/>
      <url>/2021/08/16/docker%20solution/</url>
      
        <content type="html"><![CDATA[<h1 id="best-practices"><a href="#best-practices" class="headerlink" title="best practices"></a>best practices</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="dnf"><a href="#dnf" class="headerlink" title="dnf"></a>dnf</h3><ul><li><p>repo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li><li><p>install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf -y install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure></li><li><p>start</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl --now enable docker</span><br></pre></td></tr></table></figure></li><li><p>(optional) allow a non-root user to manage docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Add the current user</span></span><br><span class="line">sudo usermod -aG docker $USER</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add a specific user</span></span><br><span class="line">sudo usermod -a -G docker custom-user</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">logout</span> and login new session</span> </span><br></pre></td></tr></table></figure></li></ul><h2 id="config-default-data-directory"><a href="#config-default-data-directory" class="headerlink" title="config default data directory"></a>config default data directory</h2><ul><li><p>default data directory <code>/var/lib/docker</code></p></li><li><p>change default directory</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1</span></span><br><span class="line">systemctl stop docker</span><br><span class="line">systemctl stop docker.socket</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2</span></span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;data-root&quot;: &quot;/path/to/directory&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step3 (optional)</span></span><br><span class="line">sudo mv /var/lib/docker /path/to/directory</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2</span></span><br><span class="line">systemctl start docker.socket</span><br><span class="line">systemctl start docker </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check modify available</span></span><br><span class="line">docker info | grep &quot;Docker Root Dir&quot;</span><br></pre></td></tr></table></figure></li></ul><h2 id="non-root-user-manage-docker"><a href="#non-root-user-manage-docker" class="headerlink" title="non-root user manage docker"></a>non-root user manage docker</h2><ol><li><p>Create the <code>docker</code> group.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br></pre></td></tr></table></figure></li><li><p>Add your user to the <code>docker</code> group.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure></li><li><p>Log out and log back in so that your group membership is re-evaluated.</p><p>If testing on a virtual machine, it may be necessary to restart the virtual machine for changes to take effect.</p><p>On a desktop Linux environment such as X Windows, log out of your session completely and then log back in.</p><p>On Linux, you can also run the following command to activate the changes to groups:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newgrp docker </span><br></pre></td></tr></table></figure></li><li><p>Verify that you can run <code>docker</code> commands without <code>sudo</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure></li></ol><h2 id="migration"><a href="#migration" class="headerlink" title="migration"></a>migration</h2><p>reference </p><p><a href="https://bobcares.com/blog/move-docker-container-to-another-host/">5 ways to move Docker container to another host</a></p><p><a href="https://morioh.com/p/d8d9e7732952">Build a Docker Image with MySQL Database</a></p><h3 id="Plan-A"><a href="#Plan-A" class="headerlink" title="Plan A"></a>Plan A</h3><ul><li>Step1    create an Image From a Container</li></ul><blockquote><p>Create a new image from a container‚Äôs changes</p><p><a href="https://docs.docker.com/engine/reference/commandline/commit/">commit command</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><p>options</p><table><thead><tr><th>Name, shorthand</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--author</code> , <code>-a</code></td><td></td><td>Author (e.g., ‚Äúwill brook‚Äù)</td></tr><tr><td><code>--change</code> , <code>-c</code></td><td></td><td>Apply Dockerfile instruction to the created image</td></tr><tr><td><code>--message</code> , <code>-m</code></td><td></td><td>Commit message</td></tr><tr><td><code>--pause</code> , <code>-p</code></td><td><code>true</code></td><td>Pause container during commit</td></tr></tbody></table><ul><li>Step 2    export the image to a file  </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker save -o /path/to/your_image.tar your_image_name</span><br></pre></td></tr></table></figure><ul><li>Step 3 load the Docker image file</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker load -i your_image.tar</span><br></pre></td></tr></table></figure><h3 id="Plan-B"><a href="#Plan-B" class="headerlink" title="Plan B"></a>Plan B</h3><ul><li>Step 1</li></ul><p>First save the new image by finding the container ID (using¬†<a href="https://docs.docker.com/engine/reference/commandline/ps/"><code>docker container ls</code></a>) and then committing it to a new image name. Note that only¬†<code>a-z0-9-_.</code>¬†are allowed when naming images:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> create image from container</span></span><br><span class="line">docker container commit c16378f943fe rhel-httpd:latest</span><br></pre></td></tr></table></figure><ul><li>Step 2</li></ul><p> tag the image with the host name or IP address, and the port of the registry:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> re-tag repository:tag info about image</span></span><br><span class="line">docker image tag rhel-httpd:latest registry-host:5000/myadmin/rhel-httpd:latest</span><br><span class="line">or</span><br><span class="line">docker tag 0e5574283393 registry-host:5000/myadmin/rhel-httpd:latest</span><br></pre></td></tr></table></figure><ul><li>Step 3</li></ul><p>log in from Docker client:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login &lt;harbor_address&gt;</span><br></pre></td></tr></table></figure><ul><li>Step 4</li></ul><p>push the image to the registry using the image ID. </p><p>In this example the registry is on host named¬†<code>registry-host</code>¬†and listening on port¬†<code>5000</code>. (harborÈªòËÆ§ÈÖçÁΩÆÁ´ØÂè£80ÔºåËØ¶ËßÅharbor.yml)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> push repository:tag,</span></span><br><span class="line">docker image push registry-host:5000/myadmin/rhel-httpd:latest</span><br><span class="line">or</span><br><span class="line">docker push registry-host:5000/myname/myimage</span><br></pre></td></tr></table></figure><h2 id="Pull-Image-from-Harbor"><a href="#Pull-Image-from-Harbor" class="headerlink" title="Pull Image from Harbor"></a>Pull Image from Harbor</h2><p><a href="https://goharbor.io/docs/2.0.0/install-config/run-installer-script/#connect-http">Connecting to Harbor via HTTP</a></p><ul><li>Step 1</li></ul><p>add the option¬†<code>--insecure-registry</code>¬†to your client‚Äôs Docker daemon. By default, the daemon file is located at¬†<code>/etc/docker/daemon.json</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;insecure-registries&quot; : [&quot;ip:port&quot;, &quot;0.0.0.0&quot;] #Â¶ÇÊûúport‰∏∫80ÔºåÂàôÂèØÁúÅÁï•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Restart Docker Engine.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><ul><li>Step 2</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hostAddress/library/REPOSITORY:TAG</span><br></pre></td></tr></table></figure><h2 id="check-docker-disk-usage"><a href="#check-docker-disk-usage" class="headerlink" title="check docker disk usage"></a>check docker disk usage</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system df</span><br></pre></td></tr></table></figure><h2 id="removes-unused-containers-images-and-volumes"><a href="#removes-unused-containers-images-and-volumes" class="headerlink" title="removes unused containers, images, and volumes"></a>removes unused containers, images, and volumes</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker system prune -a</span><br><span class="line">or </span><br><span class="line">docker system prune</span><br></pre></td></tr></table></figure><h2 id="check-specify-repo-image-info"><a href="#check-specify-repo-image-info" class="headerlink" title="check specify repo image info"></a>check specify repo image info</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1: image list</span></span><br><span class="line">curl -s -u username:password &quot;https://&lt;repo-addr&gt;/api/v2.0/projects/&lt;project&gt;/repositories&quot; | jq .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> step2: check specify image tag list</span></span><br><span class="line">curl -s -u username:password &quot;https://&lt;repo-addr&gt;/api/v2.0/projects/&lt;project&gt;/repositories/&lt;image&gt;/artifacts&quot; | jq -r &#x27;.[].tags[].name&#x27;</span><br></pre></td></tr></table></figure><h2 id="fetch-current-login-user-info"><a href="#fetch-current-login-user-info" class="headerlink" title="fetch current login user info"></a>fetch current login user info</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.docker/config.json</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span> like below</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;auths&quot;: &#123;</span><br><span class="line">    &quot;https://harbor.xxx.cn&quot;: &#123;</span><br><span class="line">      &quot;auth&quot;: &quot;xxxxx=&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;credsStore&quot;: &quot;desktop&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> decode base64 password</span> </span><br><span class="line">echo &#x27;xxx=&#x27; | base64 -d</span><br></pre></td></tr></table></figure><h1 id="troubleshoot"><a href="#troubleshoot" class="headerlink" title="troubleshoot"></a>troubleshoot</h1><ul><li>Failed to load listeners: no sockets found via socket activation: make sure the service was started by systemd</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">edit the docker‚Äôs systemd unit file and change the ExecStart:</span><br><span class="line">sudo systemctl edit docker.service</span><br><span class="line"></span><br><span class="line">edite The value ExecStart, change fd:// to unix://:</span><br><span class="line">[Service]</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/usr/bin/dockerd -H unix://</span><br></pre></td></tr></table></figure><ul><li>Error creating default ‚Äúbridge‚Äù network: cannot create network (docker0): conflicts with network (docker0): networks have same bridge name</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /var/lib/docker/network</span><br><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure><ul><li>accident delete /var/run/docker.sock</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop docker</span><br><span class="line">sudo systemctl restart docker.socket</span><br><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure><ul><li><p>check run image error </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;.State.Status&#125;&#125; &#123;&#123;.State.ExitCode&#125;&#125; &#123;&#123;.State.Error&#125;&#125;&#x27; $(docker ps -alq)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> practice </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ÊâìÂç°</title>
      <link href="/2021/04/16/record/"/>
      <url>/2021/04/16/record/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ÈáëÈí±Êç¢‰∏çÊù•ÁöÑ‰∏úË•øÊâçÁÆóÁèçË¥µÔºåÊØîÂ¶ÇÊó∂Èó¥„ÄÅÂÅ•Â∫∑„ÄÅÁü•ËØÜ</p></blockquote><p>‚úîÔ∏è </p><pre><code>    April   2021</code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td><a href="#41">1</a></td><td><a href="#42">2</a></td><td><a href="#43">3</a></td></tr><tr><td><a href="#44">4</a></td><td><a href="#45">5</a></td><td><a href="#46">6</a></td><td><a href="#47">7</a></td><td><a href="#48">8</a></td><td><a href="#49">9</a></td><td><a href="#410">10</a></td></tr><tr><td><a href="#411">11</a></td><td><a href="#412">12</a></td><td><a href="#413">13</a></td><td><a href="#414">14</a></td><td><a href="#415">15</a></td><td><a href="#416">16</a> ‚úîÔ∏è</td><td><a href="#417">17</a></td></tr><tr><td><a href="#418">18</a></td><td><a href="#419">19</a></td><td><a href="#420">20</a></td><td><a href="#421">21</a></td><td><a href="#422">22</a></td><td><a href="#423">23</a></td><td><a href="#424">24</a></td></tr><tr><td><a href="#425">25</a></td><td><a href="#426">26</a></td><td><a href="#427">27</a></td><td><a href="#428">28</a></td><td><a href="#429">29</a></td><td><a href="#430">30</a></td><td></td></tr></tbody></table><pre><code>     June   2021          </code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr><td></td><td></td><td><a href="#61">1</a></td><td><a href="#62">2</a></td><td><a href="#63">3</a></td><td><a href="#64">4</a></td><td><a href="#65">5</a></td></tr><tr><td><a href="#66">6</a></td><td><a href="#67">7</a></td><td><a href="#68">8</a></td><td><a href="#69">9</a></td><td><a href="#610">10</a></td><td><a href="#611">11</a></td><td><a href="#612">12</a></td></tr><tr><td><a href="#613">13</a></td><td><a href="#614">14</a></td><td><a href="#615">15</a></td><td><a href="#616">16</a></td><td><a href="#617">17</a></td><td><a href="#618">18</a></td><td><a href="#619">19</a></td></tr><tr><td><a href="#620">20</a></td><td><a href="#621">21</a></td><td><a href="#622">22</a></td><td><a href="#623">23</a></td><td><a href="#624">24</a></td><td><a href="#625">25</a></td><td><a href="#626">26</a></td></tr><tr><td><a href="#627">27</a></td><td><a href="#628">28</a></td><td><a href="#629">29</a>‚úîÔ∏è</td><td><a href="#630">30</a>‚úîÔ∏è</td><td></td><td></td><td></td></tr></tbody></table><pre><code>     July   2021          </code></pre><table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td><a href="#2021%E5%B9%B407%E6%9C%8801%E6%97%A5">1</a></td><td><a href="#72">2</a></td><td><a href="#73">3</a></td></tr><tr><td><a href="#74">4</a></td><td><a href="#75">5</a></td><td><a href="#76">6</a></td><td><a href="#77">7</a></td><td><a href="#78">8</a></td><td><a href="#79">9</a></td><td><a href="#710">10</a></td></tr><tr><td><a href="#711">11</a></td><td><a href="#712">12</a></td><td><a href="#713">13</a></td><td><a href="#714">14</a></td><td><a href="#715">15</a></td><td><a href="#716">16</a></td><td><a href="#717">17</a></td></tr><tr><td><a href="#718">18</a></td><td><a href="#719">19</a></td><td><a href="#720">20</a></td><td><a href="#721">21</a></td><td><a href="#722">22</a></td><td><a href="#723">23</a></td><td><a href="#724">24</a></td></tr><tr><td><a href="#725">25</a></td><td><a href="#726">26</a></td><td><a href="#727">27</a></td><td><a href="#728">28</a></td><td><a href="#729">29</a></td><td><a href="#730">30</a></td><td><a href="#731">31</a></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> will </category>
          
      </categories>
      
      
        <tags>
            
            <tag> record </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zookeeper learn</title>
      <link href="/2020/10/08/zookeeper%20learn/"/>
      <url>/2020/10/08/zookeeper%20learn/</url>
      
        <content type="html"><![CDATA[<h2 id="ÂèÇÊï∞ÈÖçÁΩÆ"><a href="#ÂèÇÊï∞ÈÖçÁΩÆ" class="headerlink" title="ÂèÇÊï∞ÈÖçÁΩÆ"></a>ÂèÇÊï∞ÈÖçÁΩÆ</h2><ul><li>tickTime</li></ul><p>Length of a single tick, in milliseconds. ZooKeeper uses tick as the basic time unit to regulate timeouts. Default is 2000.</p><ul><li>initLimit</li></ul><p>Number of ticks after which the ZooKeeper server times out during the synchronization process. Default is 10.</p><ul><li>syncLimit</li></ul><p>Maximum number of ticks for the followers to wait to synchronize with the leader before the followers time out. Default is 5.</p><ul><li>dataDir</li></ul><p>Absolute path for the ZooKeeper to store the in-memory snapshots of the data and the transactional log of updates to the database.</p><ul><li>clientPort</li></ul><p>Port on which the ZooKeeper server listens for client connections.</p><ul><li>maxClientCnxns</li></ul><p>Maximum number of concurrent connections that a single client can make to a single member of the ZooKeeper ensemble. Default is 10.</p><h2 id="ÁªàÁ´ØÊìç‰Ωú"><a href="#ÁªàÁ´ØÊìç‰Ωú" class="headerlink" title="ÁªàÁ´ØÊìç‰Ωú"></a>ÁªàÁ´ØÊìç‰Ωú</h2><h3 id="ÁôªÂΩï"><a href="#ÁôªÂΩï" class="headerlink" title="ÁôªÂΩï"></a>ÁôªÂΩï</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkCli.sh -server 127.0.0.1:2181</span><br></pre></td></tr></table></figure><h3 id="Êñ∞Â¢óËäÇÁÇπ"><a href="#Êñ∞Â¢óËäÇÁÇπ" class="headerlink" title="Êñ∞Â¢óËäÇÁÇπ"></a>Êñ∞Â¢óËäÇÁÇπ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create [-s] [-e] path data #ÂÖ∂‰∏≠-s ‰∏∫ÊúâÂ∫èËäÇÁÇπÔºå-e‰∏¥Êó∂ËäÇÁÇπ„ÄÇ‰∏çÂÜô -s/-e ÈªòËÆ§‰∏∫ÂàõÂª∫ÊåÅ‰πÖÂåñËäÇÁÇπ</span><br></pre></td></tr></table></figure><h3 id="Êü•ÁúãËäÇÁÇπ"><a href="#Êü•ÁúãËäÇÁÇπ" class="headerlink" title="Êü•ÁúãËäÇÁÇπ"></a>Êü•ÁúãËäÇÁÇπ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get path</span><br></pre></td></tr></table></figure><p><img src="/images/zookeeper/zkInfo.png"></p><ul><li>Êü•ÁúãËäÇÁÇπÁä∂ÊÄÅ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat path  #ËøîÂõûÁªìÊûúÂíågetÂëΩ‰ª§Á±ª‰ººÔºå‰ΩÜ‰∏ç‰ºöËøîÂõûËäÇÁÇπÊï∞ÊçÆÂÜÖÂÆπ„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h3 id="‰øÆÊîπËäÇÁÇπ"><a href="#‰øÆÊîπËäÇÁÇπ" class="headerlink" title="‰øÆÊîπËäÇÁÇπ"></a>‰øÆÊîπËäÇÁÇπ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set path data [dataVersion]</span><br></pre></td></tr></table></figure><p>ÂèØ‰ª•Áî®setÂëΩ‰ª§‰øÆÊîπËäÇÁÇπÊï∞ÊçÆ„ÄÇ‰πüÂèØ‰ª•Âü∫‰∫éÁâàÊú¨Âè∑ËøõË°å‰øÆÊîπÔºåÂΩì‰º†ÂÖ•ÁöÑdataVersion‰∏éÂΩìÂâçÁâàÊú¨Âè∑‰∏ç‰∏ÄËá¥Êó∂Ôºåzookeeper‰ºöÊãíÁªù‰øÆÊîπ„ÄÇ</p><p><img src="/images/zookeeper/modify.png"></p><h3 id="ËøîÂõûËäÇÁÇπÂàóË°®"><a href="#ËøîÂõûËäÇÁÇπÂàóË°®" class="headerlink" title="ËøîÂõûËäÇÁÇπÂàóË°®"></a>ËøîÂõûËäÇÁÇπÂàóË°®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls   path</span><br><span class="line">ls2  path</span><br></pre></td></tr></table></figure><h3 id="Âà†Èô§ËäÇÁÇπ"><a href="#Âà†Èô§ËäÇÁÇπ" class="headerlink" title="Âà†Èô§ËäÇÁÇπ"></a>Âà†Èô§ËäÇÁÇπ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete path [dataVersion]</span><br></pre></td></tr></table></figure><p>¬†‰∏éÊõ¥Êñ∞ËäÇÁÇπÁ±ª‰ººÔºåÂà†Èô§‰πüÂèØ‰ª•‰º†ÂÖ•ÁâàÊú¨Âè∑ÔºåÂΩì‰º†ÂÖ•ÁöÑdataVersion‰∏éÂΩìÂâçÁâàÊú¨Âè∑‰∏ç‰∏ÄËá¥Êó∂Ôºåzookeeper‰ºöÊãíÁªùÂà†Èô§„ÄÇ</p><ul><li>Ë¶ÅÊÉ≥Âà†Èô§Êüê‰∏™ËäÇÁÇπÂèäÂÖ∂Âêé‰ª£ËäÇÁÇπÔºåÂèØ‰ª•‰ΩøÁî®ÈÄíÂΩíÂà†Èô§<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmr path</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> zookeeper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flink runtime framework</title>
      <link href="/2020/10/01/flink%20architecture/"/>
      <url>/2020/10/01/flink%20architecture/</url>
      
        <content type="html"><![CDATA[<h1 id="ËøêË°åÊó∂Ê°ÜÊû∂"><a href="#ËøêË°åÊó∂Ê°ÜÊû∂" class="headerlink" title="ËøêË°åÊó∂Ê°ÜÊû∂"></a>ËøêË°åÊó∂Ê°ÜÊû∂</h1><p><img src="/images/flink/flink_runtime_architecture.png"></p><h1 id="‰Ωú‰∏öË∞ÉÂ∫¶Ê°ÜÊû∂"><a href="#‰Ωú‰∏öË∞ÉÂ∫¶Ê°ÜÊû∂" class="headerlink" title="‰Ωú‰∏öË∞ÉÂ∫¶Ê°ÜÊû∂"></a>‰Ωú‰∏öË∞ÉÂ∫¶Ê°ÜÊû∂</h1><p><img src="/images/flink/flink_schedule_architecture.png"></p><h1 id="tableÊ®°ÂùóÊû∂ÊûÑ"><a href="#tableÊ®°ÂùóÊû∂ÊûÑ" class="headerlink" title="tableÊ®°ÂùóÊû∂ÊûÑ"></a>tableÊ®°ÂùóÊû∂ÊûÑ</h1><p><img src="/images/flink/flink_table_architecture.png"></p><h1 id="ËøõÁ®ã"><a href="#ËøõÁ®ã" class="headerlink" title="ËøõÁ®ã"></a>ËøõÁ®ã</h1><h2 id="TaskExecutor"><a href="#TaskExecutor" class="headerlink" title="TaskExecutor"></a>TaskExecutor</h2><ol><li><code>taskmanager.numberOfTaskSlots</code>ÔºöÊåáÂÆöÊØè‰∏™TaskExecutorÁöÑ‰ªªÂä°ÊßΩÊï∞Èáè„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ•Â±ûÊÄßËÆæÁΩÆ‰∏∫1ÔºåË°®Á§∫ÊØè‰∏™TaskExecutorÂè™ËÉΩÊâßË°å‰∏Ä‰∏™‰ªªÂä°„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂú®Âêå‰∏ÄËäÇÁÇπ‰∏äÂπ∂Ë°åÊâßË°åÂ§ö‰∏™‰ªªÂä°ÔºåÂàôÈúÄË¶ÅÂ∞ÜËØ•Â±ûÊÄßËÆæÁΩÆ‰∏∫Â§ß‰∫é1ÁöÑÂÄº„ÄÇ</li><li><code>taskmanager.memory.process.size</code>ÔºöÊåáÂÆöTaskExecutorËøõÁ®ãÁöÑÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ•Â±ûÊÄßËÆæÁΩÆ‰∏∫1GB„ÄÇÂèØ‰ª•Ê†πÊçÆËäÇÁÇπÁöÑËµÑÊ∫êÊÉÖÂÜµÂíå‰Ωú‰∏öÁöÑÂÜÖÂ≠òÈúÄÊ±ÇËøõË°åÈÄÇÂΩìË∞ÉÊï¥„ÄÇ</li><li><code>taskmanager.cpu.cores</code>ÔºöÊåáÂÆöTaskExecutorÂèØ‰ª•‰ΩøÁî®ÁöÑCPUÊ†∏ÂøÉÊï∞Èáè„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ•Â±ûÊÄßËÆæÁΩÆ‰∏∫ÊâÄÊúâÂèØÁî®ÁöÑCPUÊ†∏ÂøÉÊï∞„ÄÇÂèØ‰ª•Ê†πÊçÆËäÇÁÇπÁöÑCPUËµÑÊ∫êÊÉÖÂÜµÂíå‰Ωú‰∏öÁöÑCPUÈúÄÊ±ÇËøõË°åÈÄÇÂΩìË∞ÉÊï¥„ÄÇ</li><li><code>taskmanager.tmp.dirs</code>ÔºöÊåáÂÆöTaskExecutor‰ΩøÁî®ÁöÑ‰∏¥Êó∂Êñá‰ª∂ÁõÆÂΩï„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ•Â±ûÊÄßËÆæÁΩÆ‰∏∫Á≥ªÁªüÁöÑ‰∏¥Êó∂ÁõÆÂΩï„ÄÇÂèØ‰ª•Ê†πÊçÆËäÇÁÇπÁöÑÁ£ÅÁõòÁ©∫Èó¥ÊÉÖÂÜµÂíå‰Ωú‰∏öÁöÑÁ£ÅÁõòÈúÄÊ±ÇËøõË°åÈÄÇÂΩìË∞ÉÊï¥„ÄÇ</li></ol><h1 id="ÁõÆÂΩïÁªìÊûÑ"><a href="#ÁõÆÂΩïÁªìÊûÑ" class="headerlink" title="ÁõÆÂΩïÁªìÊûÑ"></a>ÁõÆÂΩïÁªìÊûÑ</h1><ul><li>flink-annotations: FlinkËá™ÂÆö‰πâÁöÑ‰∏Ä‰∫õÊ≥®Ëß£ÔºåÁî®‰∫éÈÖçÁΩÆ„ÄÅÊéßÂà∂ÁºñËØëÁ≠âÂäüËÉΩ„ÄÇ</li><li>flink-clients: FlinkÂÆ¢Êà∑Á´ØÔºåÁî®‰∫éÂêëFlinkÈõÜÁæ§Êèê‰∫§‰ªªÂä°„ÄÅÊü•ËØ¢Áä∂ÊÄÅÁ≠â„ÄÇÂÖ∂‰∏≠org.apache.flink.client.cli.CliFrontendÂ∞±ÊòØÊâßË°å./flink runÁöÑÂÖ•Âè£„ÄÇ</li><li>flink-connectors: FlinkËøûÊé•Âô®ÔºåÁõ∏ÂΩì‰∫éFlinkËØªÂÜôÂ§ñÈÉ®Á≥ªÁªüÁöÑÂÆ¢Êà∑Á´Ø„ÄÇËøô‰∫õËøûÊé•Âô®ÊåáÂÆö‰∫ÜÂ§ñÈÉ®Â≠òÂÇ®Â¶Ç‰Ωï‰Ωú‰∏∫FlinkÁöÑsourceÊàñsink„ÄÇ‰æãÂ¶ÇÂØπ‰∫ékafkaÊù•ËØ¥Ôºåflink-connector-kafka-xxÂÆö‰πâ‰∫ÜFlinkKafkaConsumerÂíåFlinkKafkaProducerÁ±ªÂàÜÂà´‰Ωú‰∏∫FlinkÁöÑsourceÂíåsinkÔºåÂÆûÁé∞‰∫ÜÂØπkafkaÊ∂àË¥πÂíåÁîü‰∫ßÁöÑÂäüËÉΩ„ÄÇ‰ªéÂõæ‰∫åÂèØ‰ª•ÁúãÂá∫Ôºåflink 1.9ÁõÆÂâçÊîØÊåÅÁöÑÂ§ñÈÉ®Â≠òÂÇ®ÊúâCassandra„ÄÅES„ÄÅKafka„ÄÅHiveÁ≠â‰∏Ä‰∫õÂºÄÊ∫êÂ§ñÈÉ®Â≠òÂÇ®„ÄÇ</li><li>flink-container: FlinkÂØπdockerÂíåkubernetesÁöÑÊîØÊåÅ„ÄÇ</li><li>flink-contrib: Á§æÂå∫ÂºÄÂèëËÄÖÊèê‰æõÁöÑ‰∏Ä‰∫õÊñ∞ÁâπÊÄß„ÄÇ</li><li>flink-core: FlinkÊ†∏ÂøÉÁöÑAPI„ÄÅÁ±ªÂûãÁöÑÂÆö‰πâÔºåÂåÖÊã¨Â∫ïÂ±ÇÁöÑÁÆóÂ≠ê„ÄÅÁä∂ÊÄÅ„ÄÅÊó∂Èó¥ÁöÑÂÆûÁé∞ÔºåÊòØFlinkÊúÄÈáçË¶ÅÁöÑÈÉ®ÂàÜ„ÄÇFlinkÂÜÖÈÉ®ÁöÑÂêÑÁßçÂèÇÊï∞ÈÖçÁΩÆ‰πüÈÉΩÂÆö‰πâÂú®Ëøô‰∏™Ê®°ÂùóÁöÑconfiguration‰∏≠„ÄÇÔºàËøôÈÉ®ÂàÜ‰ª£Á†ÅËøòÊ≤°ÊÄé‰πàÁúãËøáÔºåÂ∞±‰∏çÁªÜËÆ≤‰∫ÜÔºâ„ÄÇ</li><li>flink-dist: FlinkÁºñËØëÂ•Ω‰πãÂêéÁöÑjarÂåÖ‰ºöÊîæÂú®Ëøô‰∏™Êñá‰ª∂Â§π‰∏ãÔºå‰πüÂ∞±ÊòØÁΩë‰∏ä‰∏ãËΩΩÁöÑÂèØÊâßË°åÁöÑÁâàÊú¨„ÄÇÂÖ∂‰∏≠‰πüÂåÖÊã¨ÈõÜÁæ§ÂêØÂä®„ÄÅÁªàÊ≠¢ÁöÑËÑöÊú¨ÔºåÈõÜÁæ§ÁöÑÈÖçÁΩÆÊñá‰ª∂Á≠â„ÄÇ</li><li>flink-docs: Ëøô‰∏™Ê®°ÂùóÂπ∂‰∏çÊòØFlinkÁöÑÊñáÊ°£ÔºåËÄåÊòØFlinkÊñáÊ°£ÁîüÊàêÁöÑ‰ª£Á†Å„ÄÇÂÖ∂‰∏≠org.apache.flink.docs.configuration.ConfigOptionsDocGeneratorÊòØÈÖçÁΩÆÊñáÊ°£ÁöÑÁîüÊàêÂô®Ôºå‰øÆÊîπÁõ∏ÂÖ≥ÈÖçÁΩÆÁöÑkeyÊàñËÄÖÈªòËÆ§ÂÄºÔºåÈáçÊñ∞ËøêË°åËøô‰∏™Á±ªÂ∞±‰ºöÊõ¥Êñ∞docÊñá‰ª∂Â§π‰∏ãÁöÑhtmlÊñá‰ª∂„ÄÇÂêåÊ†∑org.apache.flink.docs.rest.RestAPIDocGeneratorÊòØFlink RestAPIÊñáÊ°£ÁöÑÁîüÊàêÂô®„ÄÇ</li><li>flink-fliesystems: FlinkÂØπÂêÑÁßçÊñá‰ª∂Á≥ªÁªüÁöÑÊîØÊåÅÔºåÂåÖÊã¨HDFS„ÄÅAzure„ÄÅAWS S3„ÄÅÈòøÈáå‰∫ëOSSÁ≠âÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü„ÄÇ</li><li>flink-formats: FlinkÂØπÂêÑÁßçÊ†ºÂºèÁöÑÊï∞ÊçÆËæìÂÖ•ËæìÂá∫ÁöÑÊîØÊåÅ„ÄÇÂåÖÊã¨Json„ÄÅCSV„ÄÅAvroÁ≠âÂ∏∏Áî®ÁöÑÊ†ºÂºè„ÄÇ</li><li>flink-java: Flink javaÁöÑAPIÔºåÂ∞±ÊòØÂÜôflinkÂ∫îÁî®Êó∂Áî®Âà∞ÁöÑmap„ÄÅwindow„ÄÅkeyBy„ÄÅStateÁ≠âÁ±ªÊàñÂáΩÊï∞ÁöÑÂÆûÁé∞„ÄÇ</li><li>flink-jepsen: ÂØπFlinkÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊ≠£Á°ÆÊÄßÁöÑÊµãËØïÔºå‰∏ªË¶ÅÈ™åËØÅFlinkÁöÑÂÆπÈîôÊú∫Âà∂„ÄÇ</li><li>flink-libraries: FlinkÁöÑÈ´òÁ∫ßAPIÔºåÂåÖÊã¨CEPÔºàÂ§çÊùÇ‰∫ã‰ª∂Â§ÑÁêÜÔºâ„ÄÅGellyÂõæÂ§ÑÁêÜÂ∫ìÁ≠â„ÄÇ</li><li>flink-mesos: FlinkÂØπmesosÈõÜÁæ§ÁÆ°ÁêÜÁöÑÊîØÊåÅ„ÄÇ</li><li>flink-metrics: FlinkÁõëÊéß‰∏äÊä•„ÄÇÊîØÊåÅ‰∏äÊä•Âà∞influxdb„ÄÅprometheusÁ≠âÁõëÊéßÁ≥ªÁªü„ÄÇÂÖ∑‰ΩìÁöÑ‰ΩøÁî®ÈÖçÁΩÆÂèØ‰ª•Âú®flink-coreÊ®°ÂùóÁöÑorg.apache.flink.configuration.MetricOptions‰∏≠ÊâæÂà∞„ÄÇ</li><li>flink-python: FlinkÂØπpythonÁöÑÊîØÊåÅÔºåÁõÆÂâçËøòÊØîËæÉÂº±„ÄÇ</li><li>flink-queryable-state: FlinkÂØπÂèØÊü•ËØ¢Áä∂ÊÄÅÁöÑÊîØÊåÅÔºåÂÖ∂‰∏≠flink-queryable-state-runtimeÂ≠êÊ®°ÂùóÂÆûÁé∞‰∫ÜStateClientProxyÂíåStateServer„ÄÇËøô‰∏§ÈÉ®ÂàÜÈÉΩËøêË°åÂú®TaskManager‰∏äÔºåStateClientProxyË¥üË¥£Êé•Êî∂Â§ñÈÉ®ËØ∑Ê±ÇÔºåStateServeË¥üË¥£ÁÆ°ÁêÜÂÜÖÈÉ®ÁöÑqueryable state„ÄÇflink-queryable-state-client-javaÂ≠êÊ®°ÂùóÂÆûÁé∞‰∫ÜQueryableStateClientÔºå‰Ωú‰∏∫Â§ñÈÉ®Á≥ªÁªüËÆøÈóÆqueryable stateÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</li><li>flink-runtime: flinkËøêË°åÊó∂Ê†∏ÂøÉ‰ª£Á†ÅÔºåÂú®Á¨¨‰∫åËäÇÁªÜËØ¥„ÄÇ</li><li>flink-runtime-web: Flink Web DashboardÁöÑÂÆûÁé∞„ÄÇÈªòËÆ§ÂêØÂä®standaloneÈõÜÁæ§ÂêéÔºåËÆøÈóÆ<a href="http://localhost:8081/">http://localhost:8081</a> Âá∫Áé∞ÁöÑÁïåÈù¢„ÄÇ</li><li>flink-scala: Flink scalaÁöÑAPI„ÄÇ</li><li>flink-scala-shell: FlinkÊèê‰æõÁöÑscalaÂëΩ‰ª§Ë°å‰∫§‰∫íÊé•Âè£„ÄÇ</li><li>flink-state-backends: flinkÁä∂ÊÄÅÂ≠òÂÇ®ÁöÑÊñπÂºèÔºåÁõÆÂâçËøô‰∏™Ê®°Âùó‰∏≠Âè™ÊúâRocksDBStateBackendÔºåÊú™Êù•ÂèØËÉΩ‰ºöÊîØÊåÅÊõ¥Â§öÁßçÁöÑÁä∂ÊÄÅÂ≠òÂÇ®Ôºå‰ª•ÈÄÇÂ∫î‰∏çÂêåÁöÑ‰∏öÂä°Âú∫ÊôØ„ÄÇMemoryStateBackendÂíåFsStateBackendÁöÑÂÆûÁé∞Âπ∂‰∏çÂú®Ëøô‰∏™ÁõÆÂΩï‰∏ãÔºåËÄåÊòØÂú®flink-runtimeÁõÆÂΩï‰∏ã„ÄÇ</li><li>flink-streaming-java: Flink StreamingÁöÑjava API„ÄÇ</li><li>flink-streaming-scala: Flink StreamingÁöÑscala API„ÄÇ</li><li>flink-table: Flink Table APIÔºåÂú®Á¨¨‰∏âÂ∞èËäÇ‰∏≠ÁªÜËØ¥„ÄÇ</li><li>flink-yarn: FlinkÂØπyarnÈõÜÁæ§ÁÆ°ÁêÜÁöÑÊîØÊåÅ„ÄÇ</li></ul><hr><ul><li><p>flink-runtimeÊ®°ÂùóÊòØFlinkÊúÄÊ†∏ÂøÉÁöÑÊ®°Âùó‰πã‰∏ÄÔºåÂÆûÁé∞‰∫ÜFlinkÁöÑËøêË°åÊó∂Ê°ÜÊû∂ÔºåÂ¶ÇJobManager„ÄÅTaskManager„ÄÅResourceManager„ÄÅScheduler„ÄÅCheckpoint Coordinator</p></li><li><p>flink-tableÊ®°ÂùóÂ±û‰∫éFlinkÁöÑ‰∏äÂ±ÇAPIÔºåÂåÖÊã¨javaÂíåscalaÁâàÊú¨ÁöÑtable-apiÔºå‰ª•ÂèäSQLÁöÑËß£ÊûêÂíåSQLÁöÑÊâßË°å„ÄÇ</p><blockquote><p>ÈöèÁùÄFlink SQLË∂äÊù•Ë∂äÂèóÈáçËßÜÔºåflink-table‰ªéflink-libraries‰∏≠Áßª‰∫ÜÂá∫Êù•ÔºåÊàê‰∏∫‰∫ÜÁã¨Á´ãÁöÑ‰∏ÄÁ∫ßÁõÆÂΩï„ÄÇFlink 1.9‰∏≠ÔºåÈòøÈáåÊääblink-plannerÂºÄÊ∫ê‰∫ÜÂá∫Êù•ÔºåËøôÊ†∑Êï¥‰∏™flink-table‰∏≠Â∞±Êúâ‰∫Ü2‰∏™planner„ÄÇ‰ªéÈïøÊúüÊù•ÁúãÔºåÊµÅÊâπÁöÑÁªü‰∏ÄÊòØ‰∏Ä‰∏™Ë∂ãÂäøÔºåÂõ†Ê≠§blink-plannerÂè™‰ΩøÁî®‰∫ÜStreamTableEnvironment‰∏≠Áõ∏ÂÖ≥ÁöÑAPIÔºåËÄåÊ≤°Êúâ‰ΩøÁî®BatchTableEnvironmentÔºåÂ∞ÜÊâπÂΩìÂÅö‰∏Ä‰∏™ÊúâÈôêÁöÑÊµÅÊù•Â§ÑÁêÜÔºåÂ∏åÊúõÈÄöËøáËøôÁßçÊñπÂºèÂÆûÁé∞ÊµÅÂíåÊâπÁöÑÁªü‰∏Ä„ÄÇÁî±‰∫éblink-table-plannerÊõ¥Â•ΩÁöÑÊîØÊåÅÊµÅÊâπÁªü‰∏ÄÔºå‰∏îÊÄßËÉΩÊõ¥Â•ΩÔºåÂú®Êú™Êù•ÁöÑÁâàÊú¨‰∏≠ÔºåÂæàÊúâÂèØËÉΩÂÆåÂÖ®Êõø‰ª£flink-table-plannerÁöÑÂäüËÉΩÔºåËÄåflink-table-plannerÂèØËÉΩÂ∞Ü‰ºöË¢´ÁßªÈô§„ÄÇ</p></blockquote></li></ul><h1 id="checkpoint"><a href="#checkpoint" class="headerlink" title="checkpoint"></a>checkpoint</h1><blockquote><p>Âü∫‰∫é Chandy-Lamport ÁÆóÊ≥ïÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑ‰∏ÄËá¥ÊÄßÁöÑÂø´ÁÖßÔºå‰ªéËÄåÊèê‰æõ‰∫Ü‰∏ÄËá¥ÊÄßÁöÑËØ≠‰πâ„ÄÇ</p><p>Chandy-Lamport ÁÆóÊ≥ïÂÆûÈôÖ‰∏äÂú® 1985 Âπ¥ÁöÑÊó∂ÂÄôÂ∑≤ÁªèË¢´ÊèêÂá∫Êù•Ôºå‰ΩÜÂπ∂Ê≤°ÊúâË¢´ÂæàÂπøÊ≥õÁöÑÂ∫îÁî®ÔºåËÄå Flink ÂàôÊääËøô‰∏™ÁÆóÊ≥ïÂèëÊâ¨ÂÖâÂ§ß‰∫Ü„ÄÇ</p></blockquote><p>checkpointÊòØ‰ΩøFlink ËÉΩ‰ªéÊïÖÈöúÊÅ¢Â§çÁöÑ‰∏ÄÁßçÂÜÖÈÉ®Êú∫Âà∂„ÄÇÊ£ÄÊü•ÁÇπÊòØ Flink Â∫îÁî®Áä∂ÊÄÅÁöÑ‰∏Ä‰∏™‰∏ÄËá¥ÊÄßÂâØÊú¨ÔºåÂåÖÊã¨‰∫ÜËæìÂÖ•ÁöÑËØªÂèñ‰ΩçÁÇπ„ÄÇÂú®ÂèëÁîüÊïÖÈöúÊó∂ÔºåFlink ÈÄöËøá‰ªéÊ£ÄÊü•ÁÇπÂä†ËΩΩÂ∫îÁî®Á®ãÂ∫èÁä∂ÊÄÅÊù•ÊÅ¢Â§çÔºåÂπ∂‰ªéÊÅ¢Â§çÁöÑËØªÂèñ‰ΩçÁÇπÁªßÁª≠Â§ÑÁêÜÔºåÂ∞±Â•ΩÂÉè‰ªÄ‰πà‰∫ãÊÉÖÈÉΩÊ≤°ÂèëÁîü‰∏ÄÊ†∑„ÄÇFlinkÁöÑÁä∂ÊÄÅÂ≠òÂÇ®Âú®FlinkÁöÑÂÜÖÈÉ®,ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØ‰∏çÂÜç‰æùËµñÂ§ñÈÉ®Á≥ªÁªü,Èôç‰Ωé‰∫ÜÂØπÂ§ñÈÉ®Á≥ªÁªüÁöÑ‰æùËµñ,Âú®FlinkÁöÑÂÜÖÈÉ®,ÈÄöËøáËá™Ë∫´ÁöÑËøõÁ®ãÂéªËÆøÈóÆÁä∂ÊÄÅÂèòÈáè.ÂêåÊó∂‰ºöÂÆöÊúüÁöÑÂÅöcheckpointÊåÅ‰πÖÂåñ,ÊäächeckpointÂ≠òÂÇ®Âú®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊåÅ‰πÖÂåñÁ≥ªÁªü‰∏≠,Â¶ÇÊûúÂèëÁîüÊïÖÈöú,Â∞±‰ºö‰ªéÊúÄËøëÁöÑ‰∏ÄÊ¨°checkpoint‰∏≠Â∞ÜÊï¥‰∏™ÊµÅÁöÑÁä∂ÊÄÅËøõË°åÊÅ¢Â§ç.</p><h1 id="state"><a href="#state" class="headerlink" title="state"></a>state</h1><blockquote><p>‰∏∞ÂØåÁöÑState APIÔºöValueState„ÄÅListState„ÄÅMapState„ÄÅ BroadcastState</p></blockquote><ul><li>what ?</li></ul><p>StateÊòØÊåáÊµÅËÆ°ÁÆóËøáÁ®ã‰∏≠ËÆ°ÁÆóËäÇÁÇπÁöÑ‰∏≠Èó¥ËÆ°ÁÆóÁªìÊûúÊàñÂÖÉÊï∞ÊçÆÂ±ûÊÄßÔºåÊØîÂ¶Ç Âú®aggregationËøáÁ®ã‰∏≠Ë¶ÅÂú®state‰∏≠ËÆ∞ÂΩï‰∏≠Èó¥ËÅöÂêàÁªìÊûúÔºåÊØîÂ¶Ç Apache Kafka ‰Ωú‰∏∫Êï∞ÊçÆÊ∫êÊó∂ÂÄôÔºåÊàë‰ª¨‰πüË¶ÅËÆ∞ÂΩïÂ∑≤ÁªèËØªÂèñËÆ∞ÂΩïÁöÑoffsetÔºåËøô‰∫õStateÊï∞ÊçÆÂú®ËÆ°ÁÆóËøáÁ®ã‰∏≠‰ºöËøõË°åÊåÅ‰πÖÂåñ(ÊèíÂÖ•ÊàñÊõ¥Êñ∞)„ÄÇÊâÄ‰ª•Apache Flink‰∏≠ÁöÑStateÂ∞±ÊòØ‰∏éÊó∂Èó¥Áõ∏ÂÖ≥ÁöÑÔºåApache Flink‰ªªÂä°ÁöÑÂÜÖÈÉ®Êï∞ÊçÆÔºàËÆ°ÁÆóÊï∞ÊçÆÂíåÂÖÉÊï∞ÊçÆÂ±ûÊÄßÔºâÁöÑÂø´ÁÖß„ÄÇ</p><ul><li>why ?</li></ul><p>‰∏éÊâπËÆ°ÁÆóÁõ∏ÊØîÔºåStateÊòØÊµÅËÆ°ÁÆóÁâπÊúâÁöÑÔºåÊâπËÆ°ÁÆóÊ≤°ÊúâfailoverÊú∫Âà∂ÔºåË¶Å‰πàÊàêÂäüÔºåË¶Å‰πàÈáçÊñ∞ËÆ°ÁÆó„ÄÇÊµÅËÆ°ÁÆóÂú® Â§ßÂ§öÊï∞Âú∫ÊôØ ‰∏ãÊòØÂ¢ûÈáèËÆ°ÁÆóÔºåÊï∞ÊçÆÈÄêÊù°Â§ÑÁêÜÔºàÂ§ßÂ§öÊï∞Âú∫ÊôØ)ÔºåÊØèÊ¨°ËÆ°ÁÆóÊòØÂú®‰∏ä‰∏ÄÊ¨°ËÆ°ÁÆóÁªìÊûú‰πã‰∏äËøõË°åÂ§ÑÁêÜÁöÑÔºåËøôÊ†∑ÁöÑÊú∫Âà∂ÂäøÂøÖË¶ÅÂ∞Ü‰∏ä‰∏ÄÊ¨°ÁöÑËÆ°ÁÆóÁªìÊûúËøõË°åÂ≠òÂÇ®ÔºàÁîü‰∫ßÊ®°ÂºèË¶ÅÊåÅ‰πÖÂåñÔºâÔºåÂè¶Â§ñÁî±‰∫é Êú∫Âô®ÔºåÁΩëÁªúÔºåËÑèÊï∞ÊçÆÁ≠âÂéüÂõ†ÂØºËá¥ÁöÑÁ®ãÂ∫èÈîôËØØÔºåÂú®ÈáçÂêØjobÊó∂ÂÄôÈúÄË¶Å‰ªéÊàêÂäüÁöÑÊ£ÄÊü•ÁÇπ(checkpointÔºåÂêéÈù¢ÁØáÁ´†‰ºö‰∏ìÈó®‰ªãÁªç)ËøõË°åstateÁöÑÊÅ¢Â§ç„ÄÇÂ¢ûÈáèËÆ°ÁÆóÔºåFailoverËøô‰∫õÊú∫Âà∂ÈÉΩÈúÄË¶ÅstateÁöÑÊîØÊíë„ÄÇ</p><ul><li>how ?</li></ul><h2 id="Â≠òÂÇ®ÂÆûÁé∞"><a href="#Â≠òÂÇ®ÂÆûÁé∞" class="headerlink" title="Â≠òÂÇ®ÂÆûÁé∞"></a>Â≠òÂÇ®ÂÆûÁé∞</h2><ul><li><p>Âü∫‰∫éÂÜÖÂ≠òÁöÑHeapStateBackend - Âú®debugÊ®°Âºè‰ΩøÁî®Ôºå‰∏ç Âª∫ËÆÆÂú®Áîü‰∫ßÊ®°Âºè‰∏ãÂ∫îÁî®Ôºõ</p></li><li><p>Âü∫‰∫éHDFSÁöÑFsStateBackend - ÂàÜÂ∏ÉÂºèÊñá‰ª∂ÊåÅ‰πÖÂåñÔºåÊØèÊ¨°ËØªÂÜôÈÉΩ‰∫ßÁîüÁΩëÁªúIOÔºåÊï¥‰ΩìÊÄßËÉΩ‰∏ç‰Ω≥Ôºõ</p></li><li><p>Âü∫‰∫éRocksDBÁöÑRocksDBStateBackend - Êú¨Âú∞Êñá‰ª∂+ÂºÇÊ≠•HDFSÊåÅ‰πÖÂåñÔºõ</p><blockquote><p>Apache FlinkÁâàÊú¨ÈÄâÊã©Áî®RocksDB+HDFSÁöÑÊñπÂºèËøõË°åStateÁöÑÂ≠òÂÇ®ÔºåStateÂ≠òÂÇ®ÂàÜ‰∏§‰∏™Èò∂ÊÆµÔºåÈ¶ñÂÖàÊú¨Âú∞Â≠òÂÇ®Âà∞RocksDBÔºåÁÑ∂ÂêéÂºÇÊ≠•ÁöÑÂêåÊ≠•Âà∞ËøúÁ®ãÁöÑHDFS„ÄÇ ËøôÊ†∑ËÄåËÆæËÆ°Êó¢Ê∂àÈô§‰∫ÜHeapStateBackendÁöÑÂ±ÄÈôêÔºàÂÜÖÂ≠òÂ§ßÂ∞èÔºåÊú∫Âô®ÂùèÊéâ‰∏¢Â§±Á≠âÔºâÔºå‰πüÂáèÂ∞ë‰∫ÜÁ∫ØÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁöÑÁΩëÁªúIOÂºÄÈîÄ„ÄÇ</p></blockquote></li><li><p>ËøòÊúâ‰∏Ä‰∏™ÊòØÂü∫‰∫éNiagara(AlibabaÂÜÖÈÉ®ÂÆûÁé∞)NiagaraStateBackend - ÂàÜÂ∏ÉÂºèÊåÅ‰πÖÂåñ- Âú®AlibabaÁîü‰∫ßÁéØÂ¢ÉÂ∫îÁî®Ôºõ</p></li></ul><h2 id="ÂàÜÁ±ª"><a href="#ÂàÜÁ±ª" class="headerlink" title="ÂàÜÁ±ª"></a>ÂàÜÁ±ª</h2><p>ÈÄöËøáÁÆóÂ≠êÂíåÊï∞ÊçÆÂ±ÇÈù¢ÂàíÂàÜ</p><ul><li><p>ÁÆóÂ≠êÁ±ªstate</p><p>KeyedState - ËøôÈáåÈù¢ÁöÑkeyÊòØÊàë‰ª¨Âú®SQLËØ≠Âè•‰∏≠ÂØπÂ∫îÁöÑGroupBy/PartitioneByÈáåÈù¢ÁöÑÂ≠óÊÆµÔºåkeyÁöÑÂÄºÂ∞±ÊòØgroupby/PartitionByÂ≠óÊÆµÁªÑÊàêÁöÑRowÁöÑÂ≠óËäÇÊï∞ÁªÑÔºåÊØè‰∏Ä‰∏™keyÈÉΩÊúâ‰∏Ä‰∏™Â±û‰∫éËá™Â∑±ÁöÑStateÔºåkey‰∏ékey‰πãÈó¥ÁöÑStateÊòØ‰∏çÂèØËßÅÁöÑ</p></li><li><p>Êï∞ÊçÆÁ±ªstate</p><p>OperatorState - Apache FlinkÂÜÖÈÉ®ÁöÑSource ConnectorÁöÑÂÆûÁé∞‰∏≠Â∞±‰ºöÁî®OperatorStateÊù•ËÆ∞ÂΩïsourceÊï∞ÊçÆËØªÂèñÁöÑoffset„ÄÇ</p></li></ul><h2 id="MemoryStateBackend"><a href="#MemoryStateBackend" class="headerlink" title="MemoryStateBackend"></a>MemoryStateBackend</h2><p>1 Âü∫‰∫éÂÜÖÂ≠òÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÂô®ÔºåËÅöÂêàÁ±ªÁÆóÂ≠êÁöÑÁä∂ÊÄÅ‰ºöÂ≠òÂÇ®Âú®JobManagerÁöÑÂÜÖÂ≠ò‰∏≠</p><p>2 ÂçïÊ¨°Áä∂ÊÄÅÂ§ßÂ∞èÈªòËÆ§ÊúÄÂ§ßË¢´ÈôêÂà∂‰∏∫5MBÔºåÂèØ‰ª•ÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞Êù•ÊåáÂÆöÁä∂ÊÄÅÂàùÂßãÂåñÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇÊó†ËÆ∫ÂçïÊ¨°Áä∂ÊÄÅÂ§ßÂ∞èÊúÄÂ§ßË¢´ÈôêÂà∂‰∏∫Â§öÂ∞ëÔºåÈÉΩ‰∏çÂèØÂ§ß‰∫éakkaÁöÑframeÂ§ßÂ∞èÔºà1.5MBÔºåJobManagerÂíåTaskManager‰πãÈó¥‰º†ËæìÊï∞ÊçÆÁöÑÊúÄÂ§ßÊ∂àÊÅØÂÆπÈáèÔºâ„ÄÇÁä∂ÊÄÅÁöÑÊÄªÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá JobManager ÁöÑÂÜÖÂ≠ò„ÄÇ</p><p>3 ÊòØFlinkÈªòËÆ§ÁöÑÂêéÁ´ØÁä∂ÊÄÅÁÆ°ÁêÜÂô®ÔºåÈªòËÆ§ÊòØÂºÇÊ≠•ÁöÑ</p><p>4 ‰∏ªÊú∫ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂèØËÉΩ‰ºö‰∏¢Â§±Ôºå‰ªªÂä°ÂèØËÉΩÊó†Ê≥ïÊÅ¢Â§ç</p><p>5 Â∞ÜÂ∑•‰Ωústate‰øùÂ≠òÂú®TaskManagerÁöÑÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂Â∞ÜcheckpointÊï∞ÊçÆÂ≠òÂÇ®Âú®JobManagerÁöÑÂÜÖÂ≠ò‰∏≠</p><p>ÈÄÇÁî®ÔºöÊú¨Âú∞ÂºÄÂèëÂíåË∞ÉËØï„ÄÅÁä∂ÊÄÅÊØîËæÉÂ∞ëÁöÑ‰Ωú‰∏ö</p><h2 id="FsStateBackend"><a href="#FsStateBackend" class="headerlink" title="FsStateBackend"></a>FsStateBackend</h2><p>1 Âü∫‰∫éÊñá‰ª∂Á≥ªÁªüÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÂô®ÔºàËøôÈáåÁöÑÊñá‰ª∂Á≥ªÁªüÂèØ‰ª•ÊòØÊú¨Âú∞<strong>ÂÖ±‰∫´</strong>Êñá‰ª∂Á≥ªÁªüÔºå‰πüÂèØ‰ª•ÊòØhdfsÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü„ÄÇÔºâ</p><p>2 Â¶ÇÊûú‰ΩøÁî®ÔºåÈªòËÆ§ÊòØÂºÇÊ≠•</p><p>3 ÊØîËæÉÁ®≥ÂÆöÔºå3‰∏™ÂâØÊú¨ÔºåÊØîËæÉÂÆâÂÖ®„ÄÇ‰∏ç‰ºöÂá∫Áé∞‰ªªÂä°Êó†Ê≥ïÊÅ¢Â§çÁ≠âÈóÆÈ¢ò</p><p>4 Áä∂ÊÄÅÂ§ßÂ∞èÂèóÁ£ÅÁõòÂÆπÈáèÈôêÂà∂</p><p>5 Â∞ÜÂ∑•‰Ωústate‰øùÂ≠òÂú®TaskManagerÁöÑÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂Â∞ÜcheckpointÊï∞ÊçÆÂ≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠</p><p>ÈÄÇÁî®ÔºöÁä∂ÊÄÅÊØîËæÉÂ§ßÔºåÁ™óÂè£ÊØîËæÉÈïøÔºåÂ§ßÁöÑKVÁä∂ÊÄÅ</p><h2 id="RocksDBStateBackend"><a href="#RocksDBStateBackend" class="headerlink" title="RocksDBStateBackend"></a>RocksDBStateBackend</h2><ol><li><p>RocksDBStateBackend ÈááÁî®ÂºÇÊ≠•ÁöÑÊñπÂºèËøõË°åÁä∂ÊÄÅÊï∞ÊçÆÁöÑ SnapshotÔºå ‰ªªÂä°‰∏≠ÁöÑÁä∂ÊÄÅÊï∞ÊçÆÈ¶ñÂÖàË¢´ÂÜô‰∫∫ RocksDB ‰∏≠ÔºåÁÑ∂ÂêéÂÜçÂºÇÊ≠•Âú∞Â∞ÜÁä∂ÊÄÅÊï∞ÊçÆÂÜô‰∫∫Êñá‰ª∂Á≥ªÁªü‰∏≠ÔºåËøôÊ†∑Âú®rocksDB‰∏≠‰ªÖ‰ºöÂ≠òÂÇ®Ê≠£Âú®ËøõË°åËÆ°ÁÆóÁöÑÁÉ≠Êï∞ÊçÆÔºåÂØπ‰∫éÈïøÊó∂Èó¥ÊâçÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÂàôÂÜô‰∫∫Á£ÅÁõò‰∏≠ËøõË°åÂ≠òÂÇ®„ÄÇËÄåÂØπ‰∫é‰ΩìÈáèÊØîËæÉÂ∞èÁöÑÂÖÉÊï∞ÊçÆÁä∂ÊÄÅÔºåÂàôÁõ¥Êé•Â≠òÂÇ®Âú® JobManager ÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</p></li><li><p>‰∏é FsStateBackend Áõ∏ÊØîÔºåRocksDBState Backend Âú®ÊÄßËÉΩ‰∏äË¶ÅÊØî FsStateBackend È´ò‰∏Ä‰∫õÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫ÂÄüÂä©‰∫é RocksDB Â≠òÂÇ®‰∫ÜÊúÄÊñ∞ÁÉ≠Êï∞ÊçÆÔºåÁÑ∂ÂêéÈÄöËøáÂºÇÊ≠•ÁöÑÊñπÂºèÂÜçÂêåÊ≠•Âà∞Êñá‰ª∂Á≥ªÁªü‰∏≠Ôºå‰ΩÜ RocksDBState Backend Âíå Memory State Backend Áõ∏ÊØîÊÄßËÉΩÂ∞±‰ºöËæÉÂº±‰∏Ä‰∫õ„ÄÇ</p></li><li><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØROCksDBÈÄöËøáJNIÁöÑÊñπÂºèËøõË°åÊï∞ÊçÆÁöÑ‰∫§‰∫íÔºåËÄåJNIÊûÑÂª∫Âú®byte[]Êï∞ÊçÆÁªìÊûÑ‰πã‰∏äÔºåÂõ†Ê≠§ÊØèÊ¨°ËÉΩÂ§ü‰º†ËæìÁöÑÊúÄÂ§ßÊï∞ÊçÆÈáè‰∏∫2^31Â≠óËäÇÔºå‰πüÂ∞±ÊòØËØ¥ÊØèÊ¨°Âú®RocksDBState Backend ÂêàÂπ∂ÁöÑÁä∂ÊÄÅÊï∞ÊçÆÈáèÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 2^31 Â≠óËäÇÈôêÂà∂ÔºåÂê¶ÂàôÂ∞Ü‰ºöÂØºËá¥Áä∂ÊÄÅÊï∞ÊçÆÊó†Ê≥ïÂêåÊ≠•ÔºåËøôÊòØRocksDB ÈááÁî®JNI ÊñπÂºèÁöÑÈôêÂà∂ÔºåÁî®Êà∑Âú®‰ΩøÁî®ËøáÁ®ã‰∏≠Â∫îÂΩìÊ≥®ÊÑè„ÄÇ</p></li></ol><p>Áªº‰∏äÂèØ‰ª•ÁúãÂá∫ÔºåRocksDBState Backend Âíå FsState Backend ‰∏ÄÊ†∑ÔºåÈÄÇÂêà‰∫é‰ªªÂä°Áä∂ÊÄÅÊï∞ÊçÆÈùûÂ∏∏Â§ßÁöÑÂú∫ÊôØ„ÄÇÂú®Flink ÊúÄÊñ∞ÁâàÊú¨‰∏≠ÔºåÂ∑≤ÁªèÊèê‰æõ‰∫ÜÂü∫‰∫é RocksDBState Backend ÂÆûÁé∞ÁöÑÂ¢ûÈáè Checkpoints ÂäüËÉΩÔºåÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÁä∂ÊÄÅÊï∞ÊçÆÂêåÊ≠•Âà∞‰ªãË¥®‰∏≠ÁöÑÊïàÁéáÂíåÊÄßËÉΩÔºåÂú®ÂêéÁª≠ÁöÑÁ§æÂå∫ÂèëÂ±ï‰∏≠ÔºåRocksDBStateBackend ‰πü‰ºö‰Ωú‰∏∫Áä∂ÊÄÅÁÆ°ÁêÜÂô®ÈáçÁÇπ‰ΩøÁî®ÁöÑÊñπÂºè‰πã‰∏Ä„ÄÇ</p><h1 id="time"><a href="#time" class="headerlink" title="time"></a>time</h1><blockquote><p>ÂÆûÁé∞‰∫Ü Watermark ÁöÑÊú∫Âà∂ÔºåËÉΩÂ§üÊîØÊåÅÂü∫‰∫é‰∫ã‰ª∂ÁöÑÊó∂Èó¥ÁöÑÂ§ÑÁêÜÔºåÊàñËÄÖËØ¥Âü∫‰∫éÁ≥ªÁªüÊó∂Èó¥ÁöÑÂ§ÑÁêÜÔºåËÉΩÂ§üÂÆπÂøçÊï∞ÊçÆÁöÑÂª∂Êó∂„ÄÅÂÆπÂøçÊï∞ÊçÆÁöÑËøüÂà∞„ÄÅÂÆπÂøç‰π±Â∫èÁöÑÊï∞ÊçÆ„ÄÇ</p></blockquote><p><img src="/images/flink/flink_time.png"></p><ul><li><p>Event TimeÔºöÊòØ‰∫ã‰ª∂ÂàõÂª∫ÁöÑÊó∂Èó¥„ÄÇÂÆÉÈÄöÂ∏∏Áî±‰∫ã‰ª∂‰∏≠ÁöÑÊó∂Èó¥Êà≥ÊèèËø∞Ôºå‰æãÂ¶ÇÈááÈõÜÁöÑÊó•ÂøóÊï∞ÊçÆ‰∏≠ÔºåÊØè‰∏ÄÊù°Êó•ÂøóÈÉΩ‰ºöËÆ∞ÂΩïËá™Â∑±ÁöÑÁîüÊàêÊó∂Èó¥ÔºåFlink ÈÄöËøáÊó∂Èó¥Êà≥ÂàÜÈÖçÂô®ËÆøÈóÆ‰∫ã‰ª∂Êó∂Èó¥Êà≥„ÄÇ</p></li><li><p>Ingestion TimeÔºöÊòØÊï∞ÊçÆËøõÂÖ• Flink ÁöÑÊó∂Èó¥„ÄÇ</p></li><li><p>Processing TimeÔºöÊòØÊØè‰∏Ä‰∏™ÊâßË°åÂü∫‰∫éÊó∂Èó¥Êìç‰ΩúÁöÑÁÆóÂ≠êÁöÑÊú¨Âú∞Á≥ªÁªüÊó∂Èó¥Ôºå‰∏éÊú∫Âô®Áõ∏ÂÖ≥ÔºåÈªòËÆ§ÁöÑÊó∂Èó¥Â±ûÊÄßÂ∞±ÊòØ Processing Time„ÄÇ</p><blockquote><p>‰æãÂ¶ÇÔºå‰∏ÄÊù°Êó•ÂøóËøõÂÖ• Flink ÁöÑÊó∂Èó¥‰∏∫ 2019-08-12 10:00:00.123ÔºåÂà∞Ëææ Window ÁöÑÁ≥ªÁªüÊó∂Èó¥‰∏∫ 2019-08-12 10:00:01.234ÔºåÊó•ÂøóÁöÑÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p><p>2019-08-02 18:37:15.624 INFO Fail over to rm2</p><p>ÂØπ‰∫é‰∏öÂä°Êù•ËØ¥ÔºåË¶ÅÁªüËÆ° 1min ÂÜÖÁöÑÊïÖÈöúÊó•Âøó‰∏™Êï∞ÔºåÂì™‰∏™Êó∂Èó¥ÊòØÊúÄÊúâÊÑè‰πâÁöÑÔºü‚Äî‚Äî eventTimeÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÊ†πÊçÆÊó•ÂøóÁöÑÁîüÊàêÊó∂Èó¥ËøõË°åÁªüËÆ°„ÄÇ</p></blockquote></li></ul><h1 id="window"><a href="#window" class="headerlink" title="window"></a>window</h1><blockquote><p>Flink Êèê‰æõ‰∫ÜÂºÄÁÆ±Âç≥Áî®ÁöÑÂêÑÁßçÁ™óÂè£ÔºåÊØîÂ¶ÇÊªëÂä®Á™óÂè£„ÄÅÊªöÂä®Á™óÂè£„ÄÅ‰ºöËØùÁ™óÂè£‰ª•ÂèäÈùûÂ∏∏ÁÅµÊ¥ªÁöÑËá™ÂÆö‰πâÁöÑÁ™óÂè£„ÄÇ</p></blockquote><p><img src="/images/flink/flink_window.png"></p><ul><li><p>ÊªöÂä®Á™óÂè£ÔºàTumbling WindowÔºâ</p><p>Â∞ÜÊï∞ÊçÆ‰æùÊçÆÂõ∫ÂÆöÁöÑÁ™óÂè£ÈïøÂ∫¶ÂØπÊï∞ÊçÆËøõË°åÂàáÁâá, ÊªöÂä®Á™óÂè£ÂàÜÈÖçÂô®Â∞ÜÊØè‰∏™ÂÖÉÁ¥†ÂàÜÈÖçÂà∞‰∏Ä‰∏™ÊåáÂÆöÁ™óÂè£Â§ßÂ∞èÁöÑÁ™óÂè£‰∏≠ÔºåÊªöÂä®Á™óÂè£Êúâ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂ§ßÂ∞èÔºåÂπ∂‰∏î‰∏ç‰ºöÂá∫Áé∞ÈáçÂè†</p><p>ÁâπÁÇπÔºö<strong>Êó∂Èó¥ÂØπÈΩêÔºåÁ™óÂè£ÈïøÂ∫¶Âõ∫ÂÆöÔºåÊ≤°ÊúâÈáçÂè†</strong></p><p>ÈÄÇÁî®Âú∫ÊôØÔºöÈÄÇÂêàÂÅö BI ÁªüËÆ°Á≠âÔºàÂÅöÊØè‰∏™Êó∂Èó¥ÊÆµÁöÑËÅöÂêàËÆ°ÁÆóÔºâ</p><p>‰æãÂ¶ÇÔºöÂ¶ÇÊûú‰Ω†ÊåáÂÆö‰∫Ü‰∏Ä‰∏™ 5 ÂàÜÈíüÂ§ßÂ∞èÁöÑÊªöÂä®Á™óÂè£ÔºåÁ™óÂè£ÁöÑÂàõÂª∫Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p><p><img src="/images/flink/flink_window_tumbling.png"></p></li><li><p>ÊªëÂä®Á™óÂè£ÔºàSliding WindowÔºâ</p><p>ÊªëÂä®Á™óÂè£ÊòØÂõ∫ÂÆöÁ™óÂè£ÁöÑÊõ¥Âπø‰πâÁöÑ‰∏ÄÁßçÂΩ¢ÂºèÔºåÊªëÂä®Á™óÂè£Áî±Âõ∫ÂÆöÁöÑÁ™óÂè£ÈïøÂ∫¶ÂíåÊªëÂä®Èó¥ÈöîÁªÑÊàê„ÄÇ</p><p>ÁâπÁÇπÔºö<strong>Êó∂Èó¥ÂØπÈΩêÔºåÁ™óÂè£ÈïøÂ∫¶Âõ∫ÂÆöÔºåÊúâÈáçÂè†</strong></p><p>ÊªëÂä®Á™óÂè£ÂàÜÈÖçÂô®Â∞ÜÂÖÉÁ¥†ÂàÜÈÖçÂà∞Âõ∫ÂÆöÈïøÂ∫¶ÁöÑÁ™óÂè£‰∏≠Ôºå‰∏éÊªöÂä®Á™óÂè£Á±ª‰ººÔºåÁ™óÂè£ÁöÑÂ§ßÂ∞èÁî±Á™óÂè£Â§ßÂ∞èÂèÇÊï∞Êù•ÈÖçÁΩÆÔºåÂè¶‰∏Ä‰∏™Á™óÂè£ÊªëÂä®ÂèÇÊï∞ÊéßÂà∂ÊªëÂä®Á™óÂè£ÂºÄÂßãÁöÑÈ¢ëÁéá„ÄÇÂõ†Ê≠§ÔºåÊªëÂä®Á™óÂè£Â¶ÇÊûúÊªëÂä®ÂèÇÊï∞Â∞è‰∫éÁ™óÂè£Â§ßÂ∞èÁöÑËØùÔºåÁ™óÂè£ÊòØÂèØ‰ª•ÈáçÂè†ÁöÑÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂÖÉÁ¥†‰ºöË¢´ÂàÜÈÖçÂà∞Â§ö‰∏™Á™óÂè£‰∏≠„ÄÇ</p><p>ÈÄÇÁî®Âú∫ÊôØÔºöÂØπÊúÄËøë‰∏Ä‰∏™Êó∂Èó¥ÊÆµÂÜÖÁöÑÁªüËÆ°ÔºàÊ±ÇÊüêÊé•Âè£ÊúÄËøë 5min ÁöÑÂ§±Ë¥•ÁéáÊù•ÂÜ≥ÂÆöÊòØÂê¶Ë¶ÅÊä•Ë≠¶Ôºâ„ÄÇ</p><p>‰æãÂ¶ÇÔºå‰Ω†Êúâ 10 ÂàÜÈíüÁöÑÁ™óÂè£Âíå 5 ÂàÜÈíüÁöÑÊªëÂä®ÔºåÈÇ£‰πàÊØè‰∏™Á™óÂè£‰∏≠ 5 ÂàÜÈíüÁöÑÁ™óÂè£ÈáåÂåÖÂê´ÁùÄ‰∏ä‰∏™ 10 ÂàÜÈíü‰∫ßÁîüÁöÑÊï∞ÊçÆÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p><p><img src="/images/flink/flink_window_sliding.png"></p></li><li><p>‰ºöËØùÁ™óÂè£ÔºàSession WindowÔºâ</p><p>Áî±‰∏ÄÁ≥ªÂàó‰∫ã‰ª∂ÁªÑÂêà‰∏Ä‰∏™ÊåáÂÆöÊó∂Èó¥ÈïøÂ∫¶ÁöÑ timeout Èó¥ÈöôÁªÑÊàêÔºåÁ±ª‰ºº‰∫é web Â∫îÁî®ÁöÑ sessionÔºå‰πüÂ∞±ÊòØ‰∏ÄÊÆµÊó∂Èó¥Ê≤°ÊúâÊé•Êî∂Âà∞Êñ∞Êï∞ÊçÆÂ∞±‰ºöÁîüÊàêÊñ∞ÁöÑÁ™óÂè£„ÄÇ</p><p>ÁâπÁÇπÔºö<strong>Êó∂Èó¥Êó†ÂØπÈΩê</strong></p><p>session Á™óÂè£ÂàÜÈÖçÂô®ÈÄöËøá session Ê¥ªÂä®Êù•ÂØπÂÖÉÁ¥†ËøõË°åÂàÜÁªÑÔºåsession Á™óÂè£Ë∑üÊªöÂä®Á™óÂè£ÂíåÊªëÂä®Á™óÂè£Áõ∏ÊØîÔºå‰∏ç‰ºöÊúâÈáçÂè†ÂíåÂõ∫ÂÆöÁöÑÂºÄÂßãÊó∂Èó¥ÂíåÁªìÊùüÊó∂Èó¥ÁöÑÊÉÖÂÜµÔºåÁõ∏ÂèçÔºåÂΩìÂÆÉÂú®‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÊó∂Èó¥Âë®ÊúüÂÜÖ‰∏çÂÜçÊî∂Âà∞ÂÖÉÁ¥†ÔºåÂç≥ÈùûÊ¥ªÂä®Èó¥Èöî‰∫ßÁîüÔºåÈÇ£‰∏™Ëøô‰∏™Á™óÂè£Â∞±‰ºöÂÖ≥Èó≠„ÄÇ‰∏Ä‰∏™ session Á™óÂè£ÈÄöËøá‰∏Ä‰∏™ session Èó¥ÈöîÊù•ÈÖçÁΩÆÔºåËøô‰∏™ session Èó¥ÈöîÂÆö‰πâ‰∫ÜÈùûÊ¥ªË∑ÉÂë®ÊúüÁöÑÈïøÂ∫¶ÔºåÂΩìËøô‰∏™ÈùûÊ¥ªË∑ÉÂë®Êúü‰∫ßÁîüÔºåÈÇ£‰πàÂΩìÂâçÁöÑ session Â∞ÜÂÖ≥Èó≠Âπ∂‰∏îÂêéÁª≠ÁöÑÂÖÉÁ¥†Â∞ÜË¢´ÂàÜÈÖçÂà∞Êñ∞ÁöÑ session Á™óÂè£‰∏≠Âéª„ÄÇ</p></li></ul><p>‚Äã        <img src="/images/flink/flink_window_session.png"></p><hr><p>flink API</p><p><img src="/images/flink/flink_runtime.png"></p><blockquote><p>Flink ÂàÜÂà´Êèê‰æõ‰∫ÜÈù¢ÂêëÊµÅÂºèÂ§ÑÁêÜÁöÑÊé•Âè£ÔºàDataStream APIÔºâÂíåÈù¢ÂêëÊâπÂ§ÑÁêÜÁöÑÊé•Âè£ÔºàDataSet APIÔºâ„ÄÇÂõ†Ê≠§ÔºåFlink Êó¢ÂèØ‰ª•ÂÆåÊàêÊµÅÂ§ÑÁêÜÔºå‰πüÂèØ‰ª•ÂÆåÊàêÊâπÂ§ÑÁêÜ„ÄÇFlink ÊîØÊåÅÁöÑÊãìÂ±ïÂ∫ìÊ∂âÂèäÊú∫Âô®Â≠¶‰π†ÔºàFlinkMLÔºâ„ÄÅÂ§çÊùÇ‰∫ã‰ª∂Â§ÑÁêÜÔºàCEPÔºâ„ÄÅ‰ª•ÂèäÂõæËÆ°ÁÆóÔºàGellyÔºâÔºåËøòÊúâÂàÜÂà´ÈíàÂØπÊµÅÂ§ÑÁêÜÂíåÊâπÂ§ÑÁêÜÁöÑ Table API„ÄÇ</p></blockquote><h1 id="cdc"><a href="#cdc" class="headerlink" title="cdc"></a>cdc</h1><p><a href="https://developer.aliyun.com/article/848448?spm=a2c6h.12873639.0.d102020001.6a5a2de1EwwX6V&utm_content=g_1000316418">Flink Forward Aisa Á≥ªÂàó‰∏ìÂàäÔΩúFlink CDC Êñ∞‰∏Ä‰ª£Êï∞ÊçÆÈõÜÊàêÊ°ÜÊû∂ - ÊäÄÊúØÂéüÁêÜ„ÄÅÂÖ•Èó®‰∏éÁîü‰∫ßÂÆûË∑µ-ÈòøÈáå‰∫ëÂºÄÂèëËÄÖÁ§æÂå∫</a></p><h1 id="cep"><a href="#cep" class="headerlink" title="cep"></a>cep</h1><ul><li><p>Â∫îÁî®Âú∫ÊôØ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">È£éÈô©ÊéßÂà∂</span><br><span class="line">ÂØπÁî®Êà∑ÂºÇÂ∏∏Ë°å‰∏∫Ê®°ÂºèËøõË°åÂÆûÊó∂Ê£ÄÊµãÔºåÂΩì‰∏Ä‰∏™Áî®Êà∑ÂèëÁîü‰∫Ü‰∏çËØ•ÂèëÁîüÁöÑË°å‰∏∫ÔºåÂà§ÂÆöËøô‰∏™Áî®Êà∑ÊòØ‰∏çÊòØÊúâËøùËßÑÊìç‰ΩúÁöÑÂ´åÁñë„ÄÇ</span><br><span class="line"></span><br><span class="line">Á≠ñÁï•Ëê•ÈîÄ</span><br><span class="line">Áî®È¢ÑÂÖàÂÆö‰πâÂ•ΩÁöÑËßÑÂàôÂØπÁî®Êà∑ÁöÑË°å‰∏∫ËΩ®ËøπËøõË°åÂÆûÊó∂Ë∑üË∏™ÔºåÂØπË°å‰∏∫ËΩ®ËøπÂåπÈÖçÈ¢ÑÂÆö‰πâËßÑÂàôÁöÑÁî®Êà∑ÂÆûÊó∂ÂèëÈÄÅÁõ∏Â∫îÁ≠ñÁï•ÁöÑÊé®Âπø„ÄÇ</span><br><span class="line"></span><br><span class="line">ËøêÁª¥ÁõëÊéß</span><br><span class="line">ÁÅµÊ¥ªÈÖçÁΩÆÂ§öÊåáÊ†á„ÄÅÂ§ö‰æùËµñÊù•ÂÆûÁé∞Êõ¥Â§çÊùÇÁöÑÁõëÊéßÊ®°Âºè„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h1 id="streaming-warehouse"><a href="#streaming-warehouse" class="headerlink" title="streaming warehouse"></a>streaming warehouse</h1><p>ÊµÅÂºèÊï∞‰ªìÔºàStreaming WarehouseÔºâÊõ¥ÂáÜÁ°ÆÂú∞ËØ¥ÔºåÂÖ∂ÂÆûÊòØ‚Äúmake data warehouse streaming‚ÄùÔºåÂ∞±ÊòØËÆ©Êï¥‰∏™Êï∞‰ªìÁöÑÊï∞ÊçÆÂÖ®ÂÆûÊó∂Âú∞ÊµÅÂä®Ëµ∑Êù•Ôºå‰∏îÊòØ‰ª•Á∫ØÊµÅÁöÑÊñπÂºèËÄå‰∏çÊòØÂæÆÊâπÔºàmini-batchÔºâÁöÑÊñπÂºèÊµÅÂä®„ÄÇ</p><p>ÁõÆÊ†áÊòØÂÆûÁé∞‰∏Ä‰∏™ÂÖ∑Â§áÁ´ØÂà∞Á´ØÂÆûÊó∂ÊÄßÁöÑÁ∫ØÊµÅÊúçÂä°ÔºàStreaming ServiceÔºâÔºåÁî®‰∏ÄÂ•ó API ÂàÜÊûêÊâÄÊúâÊµÅÂä®‰∏≠ÁöÑÊï∞ÊçÆÔºåÂΩìÊ∫êÂ§¥Êï∞ÊçÆÂèëÁîüÂèòÂåñÔºåÊØîÂ¶ÇÊçïÊçâÂà∞Âú®Á∫øÊúçÂä°ÁöÑ Log ÊàñÊï∞ÊçÆÂ∫ìÁöÑ Binlog ‰ª•ÂêéÔºåÂ∞±ÊåâÁÖßÊèêÂâçÂÆö‰πâÂ•ΩÁöÑ Query ÈÄªËæëÊàñÊï∞ÊçÆÂ§ÑÁêÜÈÄªËæëÔºåÂØπÊï∞ÊçÆËøõË°åÂàÜÊûêÔºåÂàÜÊûêÂêéÁöÑÊï∞ÊçÆËêΩÂà∞Êï∞‰ªìÁöÑÊüê‰∏Ä‰∏™ÂàÜÂ±ÇÔºåÂÜç‰ªéÁ¨¨‰∏Ä‰∏™ÂàÜÂ±ÇÂêë‰∏ã‰∏Ä‰∏™ÂàÜÂ±ÇÊµÅÂä®ÔºåÁÑ∂ÂêéÊï∞‰ªìÊâÄÊúâÂàÜÂ±Ç‰ºöÂÖ®ÈÉ®ÊµÅÂä®Ëµ∑Êù•ÔºåÊúÄÁªàÊµÅÂà∞‰∏Ä‰∏™Âú®Á∫øÁ≥ªÁªüÈáåÔºåÁî®Êà∑ÂèØ‰ª•ÁúãÂà∞Êï¥‰∏™Êï∞‰ªìÁöÑÂÖ®ÂÆûÊó∂ÊµÅÂä®ÊïàÊûú„ÄÇ</p><p>Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåÊï∞ÊçÆÊòØ‰∏ªÂä®ÁöÑÔºåËÄåÊü•ËØ¢ÊòØË¢´Âä®ÁöÑÔºåÂàÜÊûêÁî±Êï∞ÊçÆÁöÑÂèòÂåñÊù•È©±Âä®„ÄÇÂêåÊó∂Âú®ÂûÇÁõ¥ÊñπÂêë‰∏äÔºåÂØπÊØè‰∏Ä‰∏™Êï∞ÊçÆÊòéÁªÜÂ±ÇÔºåÁî®Êà∑ÈÉΩÂèØ‰ª•ÊâßË°å Query ËøõË°å‰∏ªÂä®Êü•ËØ¢ÔºåÂπ∂‰∏îËÉΩÂÆûÊó∂Ëé∑ÂæóÊü•ËØ¢ÁªìÊûú„ÄÇÊ≠§Â§ñÔºåÂÆÉËøòËÉΩÂÖºÂÆπÁ¶ªÁ∫øÂàÜÊûêÂú∫ÊôØÔºåAPI ‰æùÁÑ∂ÊòØÂêå‰∏ÄÂ•óÔºåÂÆûÁé∞ÁúüÊ≠£ÁöÑ‰∏Ä‰ΩìÂåñ„ÄÇ</p><h1 id="Flink-on-YARNÊ®°Âºè"><a href="#Flink-on-YARNÊ®°Âºè" class="headerlink" title="Flink on YARNÊ®°Âºè"></a>Flink on YARNÊ®°Âºè</h1><p>Âú®ËøôÁßçÊ®°Âºè‰∏ãFlinkÁöÑËµÑÊ∫êÁî±YARNÊù•ËøõË°åÁÆ°ÁêÜÔºåFlinkÊúçÂä°Ë¢´Êèê‰∫§Âà∞YARNÁöÑResourceManagerÂêéÔºåYARNÁöÑNodeManager‰ºö‰∏∫FlinkÁîüÊàêÂØπÂ∫îÁöÑÂÆπÂô®ÔºåFlinkÂÜçÂ∞ÜJobManagerÂíåTaskManagerÂÆû‰æãÈÉ®ÁΩ≤Âà∞ÂÆπÂô®‰∏≠„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãFlinkÂèØ‰ª•ÈÄöËøáJobManagerÊâÄÈúÄË¶ÅÁöÑslotsÊï∞ÈáèÊù•Âä®ÊÄÅÁöÑË∞ÉÊï¥TaskManagerÁöÑËµÑÊ∫êÔºåËææÂà∞‰∫ÜËµÑÊ∫êÁöÑÂèØÊãìÂ±ïÊÄß„ÄÇFlinkÂÆòÊñπ‰πüÊé®ËçêÊ≠£ÂºèÁöÑÁîü‰∫ßÁéØÂ¢É‰ΩøÁî®ËøôÁßçÈÉ®ÁΩ≤Ê®°Âºè„ÄÇ<br>Âú®YARN‰∏äÔºåÂèàÂàÜ‰∏∫‰∏âÁßçÈÉ®ÁΩ≤Ê®°ÂºèÔºö</p><h2 id="Session-Mode"><a href="#Session-Mode" class="headerlink" title="Session Mode"></a>Session Mode</h2><p>ÂÖ±‰∫´JobManagerÂíåTaskManagerÔºåÊâÄÊúâÊèê‰∫§ÁöÑ‰ªªÂä°ÈÉΩÂú®‰∏Ä‰∏™ÈõÜÁæ§‰∏≠ËøêË°åÔºåÈõÜÁæ§ÁöÑÁîüÂëΩÂë®ÊúüÁã¨Á´ã‰∫é‰ªªÂä°Ôºå‰ªªÂä°ÁöÑÂºÄÂßã„ÄÅÁªìÊùü‰∏çÂΩ±ÂìçÈõÜÁæ§ÁöÑÁîüÂëΩÂë®Êúü„ÄÇÁ±ª‰ºº‰∫é‰∏äÈù¢ÁöÑStandalone-clusterÊ®°ÂºèÔºå‰ªªÂä°‰∏é‰ªªÂä°‰πãÈó¥‰∏çÈöîÁ¶ªÔºåÂÖ±‰∫´Âêå‰∏ÄÂ•óËµÑÊ∫ê„ÄÇ</p><h2 id="Per-Job-Mode"><a href="#Per-Job-Mode" class="headerlink" title="Per-Job Mode"></a>Per-Job Mode</h2><p>‰∏∫ÊØè‰∏™‰ªªÂä°ÂàõÂª∫ÂçïÁã¨ÁöÑJobManagerÂíåTaskManagerÈõÜÁæ§ÔºåÊØè‰∏™‰ªªÂä°‰πãÈó¥‰∫íÁõ∏ÈöîÁ¶ª‰∫í‰∏çÂπ≤Êâ∞ÔºåÈõÜÁæ§ÁöÑÁîüÂëΩÂë®ÊúüÈöèÁùÄ‰ªªÂä°ÁöÑÁîüÂëΩÂë®ÊúüÁªìÊùüËÄåÁªìÊùü„ÄÇËøôÁßçÊ®°ÂºèÁöÑ‰ºòÁÇπÂ∞±ÊòØ‰ªªÂä°Áã¨Âç†‰∏Ä‰∏™ÈõÜÁæ§ÔºåËµÑÊ∫êÁöÑÈöîÁ¶ªÊÄßÂ•Ω„ÄÇ</p><h2 id="Application-Mode"><a href="#Application-Mode" class="headerlink" title="Application Mode"></a>Application Mode</h2><p>‰∏Ä‰∏™ApplicationÂèØ‰ª•Â≠òÂú®Â§ö‰∏™‰ªªÂä°ÔºåËøôÊó∂YARN‰∏∫ÊØè‰∏™ApplicationÂàõÂª∫ÈõÜÁæ§ÔºåApplication‰∏≠ÁöÑ‰ªªÂä°ÂÖ±‰∫´ËØ•ÈõÜÁæ§ÔºåËµÑÊ∫êÁöÑÈöîÁ¶ªÊòØApplicationÁ∫ßÂà´ÁöÑÔºåÈõÜÁæ§ÁöÑÁîüÂëΩÂë®ÊúüÈöèÁùÄApplicationÁöÑÁîüÂëΩÂë®ÊúüÁªìÊùü„ÄÇËøôÁßçÊ®°ÂºèÊõ¥ÂÉèÊòØSession ModeÂíåPre-Job ModeÁöÑÊäò‰∏≠ÊñπÊ°àÔºåÊó¢ÂÅöÂà∞‰∫ÜËµÑÊ∫êÁöÑÈöîÁ¶ªÔºåÂèàÊèêÈ´ò‰∫Ü‰ªªÂä°‰πãÈó¥ËµÑÊ∫êÁöÑÂà©Áî®Áéá„ÄÇ</p><h2 id="interaction"><a href="#interaction" class="headerlink" title="interaction"></a>interaction</h2><p><img src="/images/flinkOnYarn/flink_on_yarn.png"> </p><h2 id="two-way-to-submit-job-on-yarn"><a href="#two-way-to-submit-job-on-yarn" class="headerlink" title="two way to submit job on yarn"></a>two way to submit job on yarn</h2><p><img src="/images/flinkOnYarn/submit_job.png"></p><h3 id="first-wayÔºöyarn-session"><a href="#first-wayÔºöyarn-session" class="headerlink" title="first wayÔºöyarn session"></a>first wayÔºöyarn session</h3><blockquote><p>(Start a long-running Flink cluster on YARN)ËøôÁßçÊñπÂºèÈúÄË¶ÅÂÖàÂêØÂä®ÈõÜÁæ§ÔºåÁÑ∂ÂêéÂú®Êèê‰∫§‰Ωú‰∏öÔºåÊé•ÁùÄ‰ºöÂêëyarnÁî≥ËØ∑‰∏ÄÂùóÁ©∫Èó¥ÂêéÔºåËµÑÊ∫êÊ∞∏Ëøú‰øùÊåÅ‰∏çÂèò„ÄÇÂ¶ÇÊûúËµÑÊ∫êÊª°‰∫ÜÔºå‰∏ã‰∏Ä‰∏™‰Ωú‰∏öÂ∞±Êó†Ê≥ïÊèê‰∫§ÔºåÂè™ËÉΩÁ≠âÂà∞yarn‰∏≠ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™‰Ωú‰∏öÊâßË°åÂÆåÊàêÂêéÔºåÈáäÊîæ‰∫ÜËµÑÊ∫êÔºåÈÇ£‰∏ã‰∏Ä‰∏™‰Ωú‰∏öÊâç‰ºöÊ≠£Â∏∏Êèê‰∫§.</p><p>ps:ÊâÄÊúâ‰Ωú‰∏öÂÖ±‰∫´DispatcherÂíåResourceManagerÔºõÂÖ±‰∫´ËµÑÊ∫êÔºõÈÄÇÂêàËßÑÊ®°Â∞èÊâßË°åÊó∂Èó¥Áü≠ÁöÑ‰Ωú‰∏ö.ÈÄÇÁî®‰∫éÊú¨Âú∞ÊµãËØïÊàñËÄÖÂºÄÂèë</p></blockquote><h4 id="mode-one-ÂÆ¢Êà∑Á´ØÊ®°Âºè"><a href="#mode-one-ÂÆ¢Êà∑Á´ØÊ®°Âºè" class="headerlink" title="mode one: ÂÆ¢Êà∑Á´ØÊ®°Âºè"></a>mode one: ÂÆ¢Êà∑Á´ØÊ®°Âºè</h4><blockquote><p>ÂèØ‰ª•ÂêØÂä®Â§ö‰∏™yarn sessionÔºå‰∏Ä‰∏™yarn sessionÊ®°ÂºèÂØπÂ∫î‰∏Ä‰∏™JobManager,Âπ∂ÊåâÁÖßÈúÄÊ±ÇÊèê‰∫§‰Ωú‰∏öÔºåÂêå‰∏Ä‰∏™Session‰∏≠ÂèØ‰ª•Êèê‰∫§Â§ö‰∏™Flink‰Ωú‰∏ö„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂÅúÊ≠¢Flink Yarn ApplicationÔºåÈúÄË¶ÅÈÄöËøáyarn application -killÂëΩ‰ª§Êù•ÂÅúÊ≠¢.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/yarn-session.sh -n 2 -jm 1024 -tm 4096 -s 6</span><br></pre></td></tr></table></figure><ul><li><p>YarnSessionClusterEntrypointËøõÁ®ã</p><p>‰ª£Ë°®Êú¨ËäÇÁÇπÂèØ‰ª•ÂëΩ‰ª§ÊñπÂºèÊèê‰∫§jobÔºåËÄå‰∏îÂèØ‰ª•‰∏çÁî®ÊåáÂÆö-mÂèÇÊï∞„ÄÇ</p><ul><li><p>Êú¨ËäÇÁÇπÊèê‰∫§‰ªªÂä°</p><p><code>bin/flink run ~/flink-demo-wordcount.jar</code></p></li><li><p>Â¶ÇÊûúÈúÄË¶ÅÂú®ÂÖ∂‰ªñ‰∏ªÊú∫ËäÇÁÇπÊèê‰∫§‰ªªÂä°</p><p><code>bin/flink run -m vmhome10.com:43258 examples/batch/WordCount.jar</code></p></li></ul></li><li><p>FlinkYarnSessionCliËøõÁ®ã</p><p>‰ª£Ë°®yarn-sessionÈõÜÁæ§ÂÖ•Âè£ÔºåÂÆûÈôÖÂ∞±ÊòØjobmanagerËäÇÁÇπÔºå‰πüÊòØyarnÁöÑApplicationMasterËäÇÁÇπ„ÄÇ</p></li></ul><h4 id="mode-two-ÂàÜÁ¶ªÂºèÊ®°Âºè"><a href="#mode-two-ÂàÜÁ¶ªÂºèÊ®°Âºè" class="headerlink" title="mode two: ÂàÜÁ¶ªÂºèÊ®°Âºè"></a>mode two: ÂàÜÁ¶ªÂºèÊ®°Âºè</h4><blockquote><p>JobManagerÁöÑ‰∏™Êï∞Âè™ËÉΩÊòØ‰∏Ä‰∏™ÔºåÂêå‰∏Ä‰∏™Session‰∏≠ÂèØ‰ª•Êèê‰∫§Â§ö‰∏™Flink‰Ωú‰∏ö„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂÅúÊ≠¢Flink Yarn ApplicationÔºåÈúÄË¶ÅÈÄöËøáyarn application -killÂëΩ‰ª§Êù•ÂÅúÊ≠¢„ÄÇÈÄöËøá-dÊåáÂÆöÂàÜÁ¶ªÊ®°Âºè.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/yarn-session.sh -nm test3 -d</span><br></pre></td></tr></table></figure><blockquote><p>Âú®ÊâÄÊúâÁöÑËäÇÁÇπÂè™‰ºöÂá∫Áé∞‰∏Ä‰∏™ YarnSessionClusterEntrypointËøõÁ®ã</p></blockquote><h3 id="second-way-flink-run"><a href="#second-way-flink-run" class="headerlink" title="second way: flink run"></a>second way: flink run</h3><blockquote><p>Áõ¥Êé•Âú®YARN‰∏äÊèê‰∫§ËøêË°åFlink‰Ωú‰∏ö(Run a Flink job on YARN)ÔºåËøôÁßçÊñπÂºèÁöÑÂ•ΩÂ§ÑÊòØ‰∏Ä‰∏™‰ªªÂä°‰ºöÂØπÂ∫î‰∏Ä‰∏™job,Âç≥Ê≤°Êèê‰∫§‰∏Ä‰∏™‰Ωú‰∏ö‰ºöÊ†πÊçÆËá™Ë∫´ÁöÑÊÉÖÂÜµÔºåÂêëyarnÁî≥ËØ∑ËµÑÊ∫êÔºåÁõ¥Âà∞‰Ωú‰∏öÊâßË°åÂÆåÊàêÔºåÂπ∂‰∏ç‰ºöÂΩ±Âìç‰∏ã‰∏Ä‰∏™‰Ωú‰∏öÁöÑÊ≠£Â∏∏ËøêË°åÔºåÈô§ÈùûÊòØyarn‰∏äÈù¢Ê≤°Êúâ‰ªª‰ΩïËµÑÊ∫êÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ</p><p>ps:ÈÄÇÁî®‰∫éÁîü‰∫ßÁéØÂ¢ÉÔºåÂèØÂêØÂä®Â§ö‰∏™yarn session Ôºàbin/yarn-session.sh -nm ipOrHostNameÔºâ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink run -m addressOfJobmanager -yn 1 -yjm 1024 -ytm 1024 ./examples/batch/WordCount.jar</span><br></pre></td></tr></table></figure><p>Ê≥®ÊÑè‰ΩøÁî®ÂèÇÊï∞-m yarn-clusterÊèê‰∫§Âà∞yarnÈõÜÁæ§„ÄÇ</p><ul><li><p>ËøêË°åÂà∞ÊåáÂÆöÁöÑyarn session</p><p>ÂèØ‰ª•ÊåáÂÆö -yid,‚ÄìyarnapplicationId <arg> Attach to running YARN sessionÊù•ÈôÑÂä†Âà∞Âà∞ÁâπÂÆöÁöÑyarn session‰∏äËøêË°å</p></li></ul><hr><p>reference</p><p><a href="https://www.jianshu.com/p/1b05202c4fb6">Flink on yarnÈÉ®ÁΩ≤Ê®°Âºè - ÁÆÄ‰π¶</a></p><p><a href="https://www.cnblogs.com/asker009/p/11327533.html">flink on yarnÊ®°Âºè‰∏ã‰∏§ÁßçÊèê‰∫§jobÊñπÂºè - ÊàëÊòØÂ±ûËΩ¶ÁöÑ - ÂçöÂÆ¢Âõ≠</a></p><p><a href="https://blog.csdn.net/u013411339/article/details/95421500?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164455981216780357293300%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=164455981216780357293300&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-21-95421500.nonecase&utm_term=%E2%80%9Cflink+cep%E2%80%9D&spm=1018.2226.3001.4450">Flink-On-YarnÁöÑÈÉ®ÁΩ≤Ê®°Âºè</a></p><h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="‰æùËµñÂÜ≤Á™Å"><a href="#‰æùËµñÂÜ≤Á™Å" class="headerlink" title="‰æùËµñÂÜ≤Á™Å"></a>‰æùËµñÂÜ≤Á™Å</h2><p><a href="https://flink.apache.org/getting-help/#i-see-a-classcastexception-x-cannot-be-cast-to-x">https://flink.apache.org/getting-help/#i-see-a-classcastexception-x-cannot-be-cast-to-x</a></p><p><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/debugging/debugging_classloading">https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/debugging/debugging_classloading</a></p><p>ÊéíÊü•ÂäûÊ≥ï</p><ul><li>‰ΩøÁî®arthasÂÆö‰Ωç‰æùËµñÁ±ªÊâÄÂú®jarÂåÖ</li></ul><p>Ëß£ÂÜ≥ÂäûÊ≥ï</p><ul><li><p>ÂØπÂÜ≤Á™ÅjarÂåÖ‰ΩøÁî®maven shaded ÁöÑexcludeÊàñrelocation ËøõË°åÊìç‰Ωú</p></li><li><p>‰ΩøÁî®7zipÁ≠âËß£ÂéãËΩØ‰ª∂ÂØπjarÊñá‰ª∂Ëß£ÂéãÂà†Èô§Ôºà‰∫∫Â∑•shadedÔºâ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> flink </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java profiler</title>
      <link href="/2019/11/11/java%20profiler/"/>
      <url>/2019/11/11/java%20profiler/</url>
      
        <content type="html"><![CDATA[<h2 id="Ê†∏ÂøÉ"><a href="#Ê†∏ÂøÉ" class="headerlink" title="Ê†∏ÂøÉ"></a>Ê†∏ÂøÉ</h2><p>‚ÄúÁ∫∏‰∏äÂæóÊù•ÁªàËßâÊµÖÔºåÁªùÁü•Ê≠§‰∫ãË¶ÅË∫¨Ë°å‚Äù„ÄÇ</p><p>Â≠¶‰ºöÈÄèËøáÁé∞Ë±°ÁúãÊú¨Ë¥®</p><p><strong>1. ÊâéÂÆûÁöÑËÆ°ÁÆóÊú∫Âü∫Á°Ä</strong></p><blockquote><p>Êàë‰ª¨ÈúÄË¶ÅÂÇ®Â§áËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ„ÄÅÊìç‰ΩúÁ≥ªÁªü„ÄÅÁΩëÁªúÂçèËÆÆ‰ª•ÂèäÊï∞ÊçÆÂ∫ìÁ≠âÂü∫Á°ÄÁü•ËØÜ„ÄÇÂÖ∑‰ΩìÁöÑÊÄßËÉΩÈóÆÈ¢òÂæÄÂæÄËøò‰∏é‰º†Ëæì„ÄÅËÆ°ÁÆó„ÄÅÂ≠òÂÇ®Êï∞ÊçÆÁ≠âÁõ∏ÂÖ≥ÔºåÈÇ£Êàë‰ª¨ËøòÈúÄË¶ÅÂÇ®Â§áÊï∞ÊçÆÁªìÊûÑ„ÄÅÁÆóÊ≥ï‰ª•ÂèäÊï∞Â≠¶Á≠âÂü∫Á°ÄÁü•ËØÜ„ÄÇ</p></blockquote><p><strong>2. ‰π†ÊÉØÈÄèËøáÊ∫êÁ†Å‰∫ÜËß£ÊäÄÊúØÊú¨Ë¥®</strong></p><blockquote><p>Êàë‰ª¨ÈúÄË¶ÅÊ∑±ÂÖ•Ê∫êÁ†ÅÔºåÈÄöËøáÂàÜÊûêÊù•Â≠¶‰π†„ÄÅÊÄªÁªì‰∏ÄÈ°πÊäÄÊúØÁöÑÂÆûÁé∞ÂéüÁêÜÂíå‰ºòÁº∫ÁÇπÔºåËøôÊ†∑Êàë‰ª¨Â∞±ËÉΩÊõ¥ÂÆ¢ËßÇÂú∞ÂéªÂ≠¶‰π†‰∏ÄÈ°πÊäÄÊúØÔºåËøòËÉΩÈÄèËøáÊ∫êÁ†ÅÊù•Â≠¶‰π†Áâõ‰∫∫ÁöÑÊÄùÁª¥ÊñπÂºèÔºåÊî∂Ëé∑Êõ¥Â•ΩÁöÑÁºñÁ†ÅÂÆûÁé∞ÊñπÂºè„ÄÇ</p></blockquote><p><strong>3. ÂñÑ‰∫éËøΩÈóÆÂíåÊÄªÁªì</strong></p><blockquote><p>‚ÄúÁü•ÂÖ∂ÁÑ∂‰∏îÁü•ÊâÄ‰ª•ÁÑ∂‚ÄùÊâçÊòØÊàë‰ª¨ÁßØÁ¥ØÁªèÈ™åÁöÑÂÖ≥ÈîÆ„ÄÇÁü•ÈÅì‰∫Ü‰∏ÄÈ°πÊäÄÊúØËÉåÂêéÁöÑÂÆûÁé∞ÂéüÁêÜÔºåÊàë‰ª¨ÊâçËÉΩÂú®ÈÅáÂà∞ÊÄßËÉΩÈóÆÈ¢òÊó∂ÔºåÂÅöÂà∞Ëß¶Á±ªÊóÅÈÄö„ÄÇ</p></blockquote><h2 id="Ë∞É‰ºòÊîøÁ≠ñ"><a href="#Ë∞É‰ºòÊîøÁ≠ñ" class="headerlink" title="Ë∞É‰ºòÊîøÁ≠ñ"></a>Ë∞É‰ºòÊîøÁ≠ñ</h2><ul><li>ÂàÜÊûêÊü•ÊâæÈóÆÈ¢òÊòØ‰∏Ä‰∏™Â§çÊùÇËÄåÂèàÁªÜËá¥ÁöÑËøáÁ®ãÔºåÊüê‰∏™ÊÄßËÉΩÈóÆÈ¢òÂèØËÉΩÊòØ‰∏Ä‰∏™ÂéüÂõ†ÂØºËá¥ÁöÑÔºå‰πüÂèØËÉΩÊòØÂá†‰∏™ÂéüÂõ†ÂÖ±ÂêåÂØºËá¥ÁöÑÁªìÊûú„ÄÇÊàë‰ª¨ÂàÜÊûêÊü•ÊâæÈóÆÈ¢òÂèØ‰ª•ÈááÁî®Ëá™‰∏ãËÄå‰∏äÁöÑÊñπÂºèÔºåËÄåÊàë‰ª¨Ëß£ÂÜ≥Á≥ªÁªüÊÄßËÉΩÈóÆÈ¢òÔºåÂàôÂèØ‰ª•ÈááÁî®Ëá™‰∏äËÄå‰∏ãÁöÑÊñπÂºèÈÄêÁ∫ß‰ºòÂåñ„ÄÇ</li></ul><p><strong>1. ‰ºòÂåñ‰ª£Á†Å</strong></p><p><strong>2. ‰ºòÂåñËÆæËÆ°</strong></p><p><strong>3. ‰ºòÂåñÁÆóÊ≥ï</strong></p><p><strong>4. Êó∂Èó¥Êç¢Á©∫Èó¥</strong></p><p><strong>5. Á©∫Èó¥Êç¢Êó∂Èó¥</strong></p><p><strong>6. ÂèÇÊï∞Ë∞É‰ºò</strong></p><p><strong>7. ÂÖúÂ∫ïÁ≠ñÁï•ÔºåÁ°Æ‰øùÁ≥ªÁªüÁ®≥ÂÆöÊÄß</strong></p><h3 id="Êï∞ÊçÆÁªìÊûÑ"><a href="#Êï∞ÊçÆÁªìÊûÑ" class="headerlink" title="Êï∞ÊçÆÁªìÊûÑ"></a>Êï∞ÊçÆÁªìÊûÑ</h3><p><strong>Êï∞ÁªÑ</strong>ÔºöÈááÁî®‰∏ÄÊÆµËøûÁª≠ÁöÑÂ≠òÂÇ®ÂçïÂÖÉÊù•Â≠òÂÇ®Êï∞ÊçÆ„ÄÇÂØπ‰∫éÊåáÂÆö‰∏ãÊ†áÁöÑÊü•ÊâæÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1)Ôºå‰ΩÜÂú®Êï∞ÁªÑ‰∏≠Èó¥‰ª•ÂèäÂ§¥ÈÉ®ÊèíÂÖ•Êï∞ÊçÆÊó∂ÔºåÈúÄË¶ÅÂ§çÂà∂ÁßªÂä®ÂêéÈù¢ÁöÑÂÖÉÁ¥†„ÄÇ</p><p><strong>ÈìæË°®</strong>Ôºö‰∏ÄÁßçÂú®Áâ©ÁêÜÂ≠òÂÇ®ÂçïÂÖÉ‰∏äÈùûËøûÁª≠„ÄÅÈùûÈ°∫Â∫èÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºåÊï∞ÊçÆÂÖÉÁ¥†ÁöÑÈÄªËæëÈ°∫Â∫èÊòØÈÄöËøáÈìæË°®‰∏≠ÁöÑÊåáÈíàÈìæÊé•Ê¨°Â∫èÂÆûÁé∞ÁöÑ„ÄÇÁî±‰∫éÈìæË°®‰∏çÁî®ÂøÖÈ°ªÊåâÈ°∫Â∫èÂ≠òÂÇ®ÔºåÊâÄ‰ª•ÈìæË°®Âú®ÊèíÂÖ•ÁöÑÊó∂ÂÄôÂèØ‰ª•ËææÂà∞ O(1) ÁöÑÂ§çÊùÇÂ∫¶Ôºå‰ΩÜÊü•Êâæ‰∏Ä‰∏™ÁªìÁÇπÊàñËÄÖËÆøÈóÆÁâπÂÆöÁºñÂè∑ÁöÑÁªìÁÇπÈúÄË¶Å O(n) ÁöÑÊó∂Èó¥„ÄÇ</p><p><strong>ÂìàÂ∏åË°®</strong>ÔºöÊ†πÊçÆÂÖ≥ÈîÆÁ†ÅÂÄºÔºàKey valueÔºâÁõ¥Êé•ËøõË°åËÆøÈóÆÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÈÄöËøáÊääÂÖ≥ÈîÆÁ†ÅÂÄºÊò†Â∞ÑÂà∞Ë°®‰∏≠‰∏Ä‰∏™‰ΩçÁΩÆÊù•ËÆøÈóÆËÆ∞ÂΩïÔºå‰ª•Âä†Âø´Êü•ÊâæÁöÑÈÄüÂ∫¶„ÄÇËøô‰∏™Êò†Â∞ÑÂáΩÊï∞Âè´ÂÅöÂìàÂ∏åÂáΩÊï∞ÔºåÂ≠òÊîæËÆ∞ÂΩïÁöÑÊï∞ÁªÑÂ∞±Âè´ÂÅöÂìàÂ∏åË°®„ÄÇ</p><p><strong>Ê†ë</strong>ÔºöÁî± nÔºàn‚â•1Ôºâ‰∏™ÊúâÈôêÁªìÁÇπÁªÑÊàêÁöÑ‰∏Ä‰∏™ÂÖ∑ÊúâÂ±ÇÊ¨°ÂÖ≥Á≥ªÁöÑÈõÜÂêàÔºåÂ∞±ÂÉèÊòØ‰∏ÄÊ£µÂÄíÊåÇÁöÑÊ†ë„ÄÇ</p><h3 id="Â≠óÁ¨¶‰∏≤ÊÄßËÉΩ‰ºòÂåñ"><a href="#Â≠óÁ¨¶‰∏≤ÊÄßËÉΩ‰ºòÂåñ" class="headerlink" title="Â≠óÁ¨¶‰∏≤ÊÄßËÉΩ‰ºòÂåñ"></a>Â≠óÁ¨¶‰∏≤ÊÄßËÉΩ‰ºòÂåñ</h3><p><a href="https://imgchr.com/i/MGD7wV"><img src="https://s2.ax1x.com/2019/11/13/MGD7wV.md.jpg" alt="MGD7wV.md.jpg"></a></p><ul><li><p>‰∏Ä‰∏™ char Â≠óÁ¨¶Âç† 16 ‰ΩçÔºå2 ‰∏™Â≠óËäÇ„ÄÇËøô‰∏™ÊÉÖÂÜµ‰∏ãÔºåÂ≠òÂÇ®ÂçïÂ≠óËäÇÁºñÁ†ÅÂÜÖÁöÑÂ≠óÁ¨¶ÔºàÂç†‰∏Ä‰∏™Â≠óËäÇÁöÑÂ≠óÁ¨¶ÔºâÂ∞±ÊòæÂæóÈùûÂ∏∏Êµ™Ë¥π„ÄÇJDK1.9 ÁöÑ String Á±ª‰∏∫‰∫ÜËäÇÁ∫¶ÂÜÖÂ≠òÁ©∫Èó¥Ôºå‰∫éÊòØ‰ΩøÁî®‰∫ÜÂç† 8 ‰ΩçÔºå1 ‰∏™Â≠óËäÇÁöÑ byte Êï∞ÁªÑÊù•Â≠òÊîæÂ≠óÁ¨¶‰∏≤</p></li><li><p>String ÂØπË±°ÁöÑ‰∏çÂèØÂèòÊÄß</p></li><li><p>ÂØπË±°ÂíåÂØπË±°ÂºïÁî®</p></li><li><p>‰ΩøÁî® String.intern Êù•ËäÇÁúÅÂÜÖÂ≠òÁ©∫Èó¥Ôºå‰ªéËÄå‰ºòÂåñ String ÂØπË±°ÁöÑÂ≠òÂÇ®</p><blockquote><p>ÂÖ∑‰ΩìÂÅöÊ≥ïÂ∞±ÊòØÔºåÂú®ÊØèÊ¨°ËµãÂÄºÁöÑÊó∂ÂÄô‰ΩøÁî® String ÁöÑ intern ÊñπÊ≥ïÔºåÂ¶ÇÊûúÂ∏∏ÈáèÊ±†‰∏≠ÊúâÁõ∏ÂêåÂÄºÔºåÂ∞±‰ºöÈáçÂ§ç‰ΩøÁî®ËØ•ÂØπË±°ÔºåËøîÂõûÂØπË±°ÂºïÁî®ÔºåËøôÊ†∑‰∏ÄÂºÄÂßãÁöÑÂØπË±°Â∞±ÂèØ‰ª•Ë¢´ÂõûÊî∂Êéâ„ÄÇËøôÁßçÊñπÂºèÂèØ‰ª•‰ΩøÈáçÂ§çÊÄßÈùûÂ∏∏È´òÁöÑÂú∞ÂùÄ‰ø°ÊÅØÂ≠òÂÇ®Â§ßÂ∞è‰ªé 20G ÈôçÂà∞Âá†ÁôæÂÖÜ„ÄÇ</p><p>Â¶ÇÊûúË∞ÉÁî® intern ÊñπÊ≥ïÔºå‰ºöÂéªÊü•ÁúãÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†‰∏≠ÊòØÂê¶ÊúâÁ≠â‰∫éËØ•ÂØπË±°ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±Âú®Â∏∏ÈáèÊ±†‰∏≠Êñ∞Â¢ûËØ•ÂØπË±°ÔºåÂπ∂ËøîÂõûËØ•ÂØπË±°ÂºïÁî®ÔºõÂ¶ÇÊûúÊúâÔºåÂ∞±ËøîÂõûÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂºïÁî®„ÄÇÂ†ÜÂÜÖÂ≠ò‰∏≠ÂéüÊúâÁöÑÂØπË±°Áî±‰∫éÊ≤°ÊúâÂºïÁî®ÊåáÂêëÂÆÉÔºåÂ∞Ü‰ºöÈÄöËøáÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂„ÄÇ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String a =<span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>).intern();</span><br><span class="line">String b = <span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>).intern();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(a==b) &#123;<span class="comment">// a Âíå b ÂºïÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™ÂØπË±°„ÄÇ</span></span><br><span class="line">    System.out.print(<span class="string">&quot;a==b&quot;</span>);<span class="comment">//Ê≠£Â∏∏ËæìÂá∫</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Áî® String.indexOf() ÊñπÊ≥ï‰ª£Êõø Split() ÊñπÊ≥ïÂÆåÊàêÂ≠óÁ¨¶‰∏≤ÁöÑÂàÜÂâ≤ </p></li></ul><h3 id="ÊÖéÈáç‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè"><a href="#ÊÖéÈáç‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè" class="headerlink" title="ÊÖéÈáç‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè"></a>ÊÖéÈáç‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè</h3><p><a href="https://imgchr.com/i/MGDWWQ"><img src="https://s2.ax1x.com/2019/11/13/MGDWWQ.md.jpg" alt="MGDWWQ.md.jpg"></a></p><blockquote><p>Ê≠£ÂàôË°®ËææÂºèÊòØ‰∏Ä‰∏™Áî®Ê≠£ÂàôÁ¨¶Âè∑ÂÜôÂá∫ÁöÑÂÖ¨ÂºèÔºåÁ®ãÂ∫èÂØπËøô‰∏™ÂÖ¨ÂºèËøõË°åËØ≠Ê≥ïÂàÜÊûêÔºåÂª∫Á´ã‰∏Ä‰∏™ËØ≠Ê≥ïÂàÜÊûêÊ†ëÔºåÂÜçÊ†πÊçÆËøô‰∏™ÂàÜÊûêÊ†ëÁªìÂêàÊ≠£ÂàôË°®ËææÂºèÁöÑÂºïÊìéÁîüÊàêÊâßË°åÁ®ãÂ∫èÔºàËøô‰∏™ÊâßË°åÁ®ãÂ∫èÊàë‰ª¨ÊääÂÆÉÁß∞‰ΩúÁä∂ÊÄÅÊú∫Ôºå‰πüÂè´Áä∂ÊÄÅËá™Âä®Êú∫ÔºâÔºåÁî®‰∫éÂ≠óÁ¨¶ÂåπÈÖç„ÄÇ</p><p>Â¶ÇÊûú‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËÉΩ‰Ωø‰Ω†ÁöÑ‰ª£Á†ÅÁÆÄÊ¥ÅÊñπ‰æøÔºåÈÇ£‰πàÂú®ÂÅöÂ•ΩÊÄßËÉΩÊéíÊü•ÁöÑÂâçÊèê‰∏ãÔºåÂèØ‰ª•Âéª‰ΩøÁî®ÔºõÂ¶ÇÊûú‰∏çËÉΩÔºåÈÇ£‰πàÊ≠£ÂàôË°®ËææÂºèËÉΩ‰∏çÁî®Â∞±‰∏çÁî®Ôºå‰ª•Ê≠§ÈÅøÂÖçÈÄ†ÊàêÊõ¥Â§öÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</p></blockquote><h3 id="ArrayList-VS-LinkedList"><a href="#ArrayList-VS-LinkedList" class="headerlink" title="ArrayList VS LinkedList"></a>ArrayList VS LinkedList</h3><ul><li>Áî±‰∫é ArrayList ÊòØÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºåËÄåÊï∞ÁªÑÊòØ‰∏ÄÂùóËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂú®Ê∑ªÂä†ÂÖÉÁ¥†Âà∞Êï∞ÁªÑÂ§¥ÈÉ®ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÂØπÂ§¥ÈÉ®‰ª•ÂêéÁöÑÊï∞ÊçÆËøõË°åÂ§çÂà∂ÈáçÊéíÔºåÊâÄ‰ª•ÊïàÁéáÂæà‰ΩéÔºõËÄå LinkedList ÊòØÂü∫‰∫éÈìæË°®ÂÆûÁé∞ÔºåÂú®Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÈÄöËøáÂæ™ÁéØÊü•ÊâæÂà∞Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÔºåÂ¶ÇÊûúË¶ÅÊ∑ªÂä†ÁöÑ‰ΩçÁΩÆÂ§Ñ‰∫é List ÁöÑÂâçÂçäÊÆµÔºåÂ∞±‰ªéÂâçÂæÄÂêéÊâæÔºõËã•ÂÖ∂‰ΩçÁΩÆÂ§Ñ‰∫éÂêéÂçäÊÆµÔºåÂ∞±‰ªéÂêéÂæÄÂâçÊâæ„ÄÇÂõ†Ê≠§ LinkedList Ê∑ªÂä†ÂÖÉÁ¥†Âà∞Â§¥ÈÉ®ÊòØÈùûÂ∏∏È´òÊïàÁöÑ„ÄÇ</li><li>LinkedList ÁöÑ for Âæ™ÁéØÊÄßËÉΩÊòØÊúÄÂ∑ÆÁöÑÔºåËÄå ArrayList ÁöÑ for Âæ™ÁéØÊÄßËÉΩÊòØÊúÄÂ•ΩÁöÑ„ÄÇ</li></ul><h2 id="jconsole"><a href="#jconsole" class="headerlink" title="jconsole"></a>jconsole</h2><h3 id="jconsoleÈÖçÁΩÆËøúÁ®ãÁõëÊéß"><a href="#jconsoleÈÖçÁΩÆËøúÁ®ãÁõëÊéß" class="headerlink" title="jconsoleÈÖçÁΩÆËøúÁ®ãÁõëÊéß"></a>jconsoleÈÖçÁΩÆËøúÁ®ãÁõëÊéß</h3><ul><li><p>ËøúÁ®ãjvmËøõÁ®ãÈúÄÈÖçÁΩÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">env.java.opts: </span><br><span class="line">-Dcom.sun.management.jmxremote </span><br><span class="line">-Dcom.sun.management.jmxremote.port=9999</span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=false </span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=false</span><br></pre></td></tr></table></figure><blockquote><p>ÂÖ∂‰∏≠9999‰∏∫ÊåáÂÆöÁõëÊéßÁ´ØÂè£</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> course </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ignite snippet</title>
      <link href="/2019/11/01/ignite_snippet/"/>
      <url>/2019/11/01/ignite_snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="ÂëΩ‰ª§"><a href="#ÂëΩ‰ª§" class="headerlink" title="ÂëΩ‰ª§"></a>ÂëΩ‰ª§</h1><ul><li><p>Ê∏ÖÁ©∫Êï∞ÊçÆ</p><p><code>cache -clear -c=xxxxx</code></p></li><li><p>lostPart</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache -rebalance -c=xxxx</span><br><span class="line">cache -rebalance ÂëΩ‰ª§‰∏çÈúÄË¶Å‰æùËµñ‰∫é cache -stop ÁöÑÊìç‰Ωú„ÄÇÂêØÂä®ÊàñÈáçÊñ∞ÂêØÂä®ÂàÜÂå∫ÈáçÂπ≥Ë°°ÂèØ‰ª•Âú®ÁºìÂ≠òËøêË°åÊúüÈó¥ËøõË°åÔºå‰∏çÈúÄË¶ÅÂÅúÊ≠¢ÁºìÂ≠ò„ÄÇ</span><br></pre></td></tr></table></figure></li><li><p>ÂÅúÊ≠¢Â§ö‰∏™ÁºìÂ≠òË°®</p></li></ul><p>‚Äã    <code>cache -stop --caches=myCache_*</code></p><ul><li>ÈáçÊñ∞Âπ≥Ë°°Â§ö‰∏™ÁºìÂ≠òË°®</li></ul><p>‚Äã    <code>cache -rebalance --caches=myCache1,myCache2,myCache3</code></p><ul><li><p>ÂÅúÊ≠¢ÊâÄÊúâÁºìÂ≠òË°®Ôºå</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache -stop --all </span><br><span class="line">cache -start --all</span><br></pre></td></tr></table></figure></li><li><p>ÈáçÊñ∞Âä†ËΩΩÊâÄÊúâÁºìÂ≠òË°®Âπ∂ÈáçÊñ∞Âπ≥Ë°°</p><p><code>cache -l -r --all</code></p><p><code>cache -clear</code> ÂëΩ‰ª§Âè™ÊòØÊ∏ÖÁ©∫ÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÁºìÂ≠ò‰ªçÁÑ∂Â§Ñ‰∫éÊ¥ªÂä®Áä∂ÊÄÅÔºåÂèØ‰ª•ÁªßÁª≠‰ΩøÁî®ÔºõËÄå<code>cache -stop</code> ÂëΩ‰ª§ÂàôÂÅúÊ≠¢‰∫ÜÁºìÂ≠òÔºåÂπ∂‰∏îÊ∏ÖÁ©∫‰∫ÜÊâÄÊúâÊï∞ÊçÆÔºåÈúÄË¶Å‰ΩøÁî® <code>cache -start</code> ÂëΩ‰ª§ÈáçÊñ∞ÂêØÂä®ÁºìÂ≠òÔºåÂπ∂ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ„ÄÇ</p></li></ul><p>‚Äã    <code>cache -start</code> ÂëΩ‰ª§Áî®‰∫éÂêØÂä®‰∏Ä‰∏™Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÁºìÂ≠ò„ÄÇÂ¶ÇÊûúÁºìÂ≠ò‰πãÂâçÂ∑≤ÁªèÂ≠òÂú®Âπ∂Ë¢´ÂÅúÊ≠¢Ôºå‰ΩøÁî® <code>cache -start</code> ÂëΩ‰ª§ÂèØ‰ª•ÈáçÊñ∞ÂêØÂä®ËØ•ÁºìÂ≠òÔºåÂπ∂ÂºÄÂßãÂä†ËΩΩÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúËØ•ÁºìÂ≠ò‰πãÂâç‰∏çÂ≠òÂú®ÔºåÂàô‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁºìÂ≠òÂπ∂ÂºÄÂßãÂä†ËΩΩÊï∞ÊçÆ„ÄÇ</p><ul><li>Êü•ÁúãË°®ÁöÑÁä∂ÊÄÅ</li></ul><p>‰ΩøÁî® <code>cache -state</code> ÂëΩ‰ª§Êü•ÁúãÊåáÂÆöÁºìÂ≠òË°®ÁöÑÁä∂ÊÄÅÔºåÂåÖÊã¨ÁºìÂ≠òÂ§ßÂ∞è„ÄÅÂàÜÂå∫Êï∞Èáè„ÄÅÂ§çÂà∂ÂíåÂ§á‰ªΩÊï∞Á≠â‰ø°ÊÅØ„ÄÇ</p><hr><p>ËÆæÁΩÆÂ§çÂà∂ÂíåÂ§á‰ªΩÊï∞ÈáèÔºö<br>cache -rebalance -r <replicas> -b <backups><br>ÂÖ∂‰∏≠<replicas>ÊòØË¶ÅËÆæÁΩÆÁöÑÂ§çÂà∂Êï∞ÈáèÔºå<backups>ÊòØË¶ÅËÆæÁΩÆÁöÑÂ§á‰ªΩÊï∞Èáè„ÄÇ</p><p>ËÆæÁΩÆÂ§á‰ªΩÊï∞Èáè‰∏∫1ÔºåÂç≥ÊØè‰∏™ÂàÜÂå∫ÈÉΩÂú®‰∏Ä‰∏™‰∏çÂêåÁöÑËäÇÁÇπ‰∏ä‰øùÁïô1‰∏™Â§á‰ªΩÊï∞Èáè<br>ËÆæÁΩÆÂ§çÂà∂Êï∞Èáè‰∏∫2ÔºåÂç≥ÊØè‰∏™ÁºìÂ≠òË°®ÁöÑÂàÜÂå∫ÈÉΩ‰ºöÂú®ÈõÜÁæ§‰∏≠ÁöÑ‰∏§‰∏™ËäÇÁÇπ‰∏äÂ§çÂà∂</p><p>Â§çÂà∂ÂíåÂ§á‰ªΩÈÉΩÊòØ‰∏∫‰∫ÜÊèêÈ´òÊï∞ÊçÆÂèØÁî®ÊÄßÂíåÂèØÈù†ÊÄßÔºå‰ΩÜÂ§çÂà∂ÊòØÂ∞ÜÂêå‰∏Ä‰ªΩÊï∞ÊçÆÂ≠òÂÇ®Âú®Â§ö‰∏™ËäÇÁÇπ‰∏äÔºåËÄåÂ§á‰ªΩÊòØÂ∞ÜÊï∞ÊçÆÂâØÊú¨Â≠òÂÇ®Âú®ÈõÜÁæ§‰∏≠ÁöÑ‰∏çÂêåËäÇÁÇπ‰∏ä„ÄÇÂú®ÈÖçÁΩÆIgniteÁºìÂ≠òË°®Êó∂ÔºåÂèØ‰ª•ÂêåÊó∂ËÆæÁΩÆÂ§çÂà∂ÂíåÂ§á‰ªΩÁöÑÊï∞ÈáèÊù•Á°Æ‰øùÊï∞ÊçÆÁöÑÈ´òÂèØÁî®ÊÄßÂíåÂèØÈù†ÊÄß„ÄÇ</p><hr><p>Â¶ÇÊûúÊúâ‰∏â‰∏™IgniteËäÇÁÇπÔºåÂèØ‰ª•ÊåâÁÖß‰ª•‰∏ãÂª∫ËÆÆËÆæÁΩÆÁºìÂ≠òË°®ÁöÑÂ§çÂà∂ÂíåÂ§á‰ªΩÊï∞ÈáèÔºö</p><p>Â§çÂà∂Âõ†Â≠êÂª∫ËÆÆËÆæÁΩÆ‰∏∫2ÔºåËøôÊ†∑ÊØè‰∏™ÂàÜÂå∫ÁöÑÊï∞ÊçÆÈÉΩ‰ºöÂú®‰∏§‰∏™ËäÇÁÇπ‰∏äËøõË°åÂ§á‰ªΩÔºåÂΩì‰∏Ä‰∏™ËäÇÁÇπÊïÖÈöúÊó∂ÔºåÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄß„ÄÇ<br>‰æãÂ¶ÇÔºå‰ΩøÁî®ignitevisorcmd.shÂëΩ‰ª§ÂèØ‰ª•ËøôÊ†∑ËÆæÁΩÆÔºöcache -set-replicas myCache 2<br>Â§á‰ªΩÊï∞ÈáèÂª∫ËÆÆËÆæÁΩÆ‰∏∫1ÔºåËøôÊ†∑ÊØè‰∏™ÂàÜÂå∫ÁöÑÊï∞ÊçÆÈÉΩ‰ºöÂú®‰∏Ä‰∏™ËäÇÁÇπ‰∏äËøõË°åÂ§á‰ªΩÔºåÂΩì‰∏Ä‰∏™ËäÇÁÇπÊïÖÈöúÊó∂ÔºåÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÔºåÂπ∂‰∏îÂáèÂ∞ëÈ¢ùÂ§ñÁöÑÁΩëÁªúÂºÄÈîÄ„ÄÇ<br>‰æãÂ¶ÇÔºå‰ΩøÁî®ignitevisorcmd.shÂëΩ‰ª§ÂèØ‰ª•ËøôÊ†∑ËÆæÁΩÆÔºöcache -set-backups myCache 1</p><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËÆæÁΩÆÂ§çÂà∂ÂíåÂ§á‰ªΩÊï∞Èáè‰ºöÂ¢ûÂä†ÁΩëÁªúÂíåÂ≠òÂÇ®ÂºÄÈîÄÔºåÂõ†Ê≠§ÈúÄË¶ÅÊ†πÊçÆÂÖ∑‰ΩìÂú∫ÊôØËøõË°åÊùÉË°°ÂíåË∞ÉÊï¥„ÄÇ<br>Ê≠§Â§ñÔºåËøòÈúÄË¶ÅÊ†πÊçÆÊï∞ÊçÆÂ§ßÂ∞è„ÄÅËÆøÈóÆÊ®°Âºè„ÄÅËäÇÁÇπÈÖçÁΩÆÁ≠âÂõ†Á¥†ËøõË°åÊÄßËÉΩÊµãËØïÂíå‰ºòÂåñ„ÄÇ</p><h1 id="Áü•ËØÜÁÇπ"><a href="#Áü•ËØÜÁÇπ" class="headerlink" title="Áü•ËØÜÁÇπ"></a>Áü•ËØÜÁÇπ</h1><h2 id="ignite-2-7-0"><a href="#ignite-2-7-0" class="headerlink" title="ignite-2.7.0"></a>ignite-2.7.0</h2><ul><li>ÁºñËØëignite-coreÊ®°ÂùóÁöÑÊó∂ÂÄôÈúÄË¶Å‰ΩøÁî®jdk8ÔºåÂõ†‰∏∫‰ºöÊä•jdk.internal.misc.SharedSecretsÊâæ‰∏çÂà∞ÁöÑÈîôËØØÂéüÂõ†Ôºö‰º∞ËÆ°ÊòØÂú®GridUnsafe.java‰∏≠ÁöÑmiscPackageÊñπÊ≥ï‰ª•ÂèäjavaNioAccessObjectÁöÑ<code>Class&lt;?&gt; cls = Class.forName(pkgName + &quot;.misc.SharedSecrets&quot;);</code>Âá∫Áé∞ÁöÑÈóÆÈ¢òÔºåjdk11‰∏≠SharedSecretsÂá∫Áé∞ÁöÑ‰ΩçÁΩÆÊòØ<code>jdk.internal.access.SharedSecrets</code></li></ul><h3 id="ÊåÅ‰πÖÂåñ"><a href="#ÊåÅ‰πÖÂåñ" class="headerlink" title="ÊåÅ‰πÖÂåñ"></a>ÊåÅ‰πÖÂåñ</h3><ul><li>IgniteÁöÑÂéüÁîüÊåÅ‰πÖÂåñ‰ºöÂú®Á£ÅÁõò‰∏äÂ≠òÂÇ®‰∏Ä‰∏™Êï∞ÊçÆÁöÑË∂ÖÈõÜÔºå‰ª•ÂèäÊ†πÊçÆÂÆπÈáèÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®‰∏Ä‰∏™Â≠êÈõÜ„ÄÇÊØîÂ¶ÇÔºåÂ¶ÇÊûúÊúâ100‰∏™Êù°ÁõÆÔºåÁÑ∂ÂêéÂÜÖÂ≠òÂè™ËÉΩÂ≠òÂÇ®20Êù°ÔºåÈÇ£‰πàÁ£ÅÁõò‰∏ä‰ºöÂ≠òÂÇ®ÊâÄÊúâÁöÑ100Êù°ÔºåÁÑ∂Âêé‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÂú®ÂÜÖÂ≠ò‰∏≠ÁºìÂ≠ò20Êù°„ÄÇ</li><li>ÂíåÁ∫ØÂÜÖÂ≠òÁöÑ‰ΩøÁî®Âú∫ÊôØ‰∏ÄÊ†∑ÔºåÂΩìÊâìÂºÄÊåÅ‰πÖÂåñÊó∂ÔºåÊØè‰∏™Áã¨Á´ãÁöÑËäÇÁÇπÂè™‰ºöÊåÅ‰πÖÂåñÊï∞ÊçÆÁöÑ‰∏Ä‰∏™Â≠êÈõÜÔºå‰∏çÁÆ°ÊòØ‰∏ªËøòÊòØÂ§áËäÇÁÇπÔºåÈÉΩÊòØÂè™ÂåÖÊã¨ËäÇÁÇπÊâÄÂ±ûÁöÑÂàÜÂå∫ÁöÑÊï∞ÊçÆÔºåÊÄªÁöÑÊù•ËØ¥ÔºåÊï¥‰∏™ÈõÜÁæ§ÂåÖÊã¨‰∫ÜÂÆåÊï¥ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</li><li>Âú®ÂºÄÂèëÂ∫îÁî®Êó∂ÂèØËÉΩÈúÄË¶Å‰øÆÊîπËá™ÂÆö‰πâÂØπË±°Â≠óÊÆµÁöÑÁ±ªÂûã„ÄÇ‰æãÂ¶ÇÂÅáËÆæÂØπË±°AÁöÑÂ≠óÊÆµÁ±ªÂûã<code>A.range</code>‰∏∫<code>int</code>Á±ªÂûãÔºåÁÑ∂ÂêéÂÜ≥ÂÆöÂ∞Ü<code>A.range</code>ÁöÑÁ±ªÂûã‰øÆÊîπ‰∏∫<code>long</code>Á±ªÂûã„ÄÇ‰πãÂêé‰ºöÂèëÁé∞ÈõÜÁæ§ÊàñÂ∫îÁî®Â∞ÜÊó†Ê≥ïÈáçÂêØÔºåÂõ†‰∏∫Ignite‰∏çÊîØÊåÅÂ≠óÊÆµ/ÂàóÁ±ªÂûãÁöÑÊõ¥Êîπ„ÄÇ</li><li>Êó†Ê≥ïÂèòÊõ¥Êûö‰∏æÂÄºÁöÑÈ°∫Â∫èÔºå‰πüÊó†Ê≥ïÂú®Êûö‰∏æÂÄºÂàóË°®ÁöÑÂºÄÂßãÊàñËÄÖ‰∏≠ÈÉ®Ê∑ªÂä†Êñ∞ÁöÑÂ∏∏ÈáèÔºå‰ΩÜÊòØÂèØ‰ª•Âú®ÂàóË°®ÁöÑÊú´Â∞æÊ∑ªÂä†Êñ∞ÁöÑÂ∏∏Èáè„ÄÇ</li></ul><h3 id="ZooKeeper-Discovery"><a href="#ZooKeeper-Discovery" class="headerlink" title="ZooKeeper Discovery"></a>ZooKeeper Discovery</h3><p>ZooKeeper DiscoveryÊòØ‰∏∫ÈúÄË¶Å‰øùÊåÅÊòìÊâ©Â±ïÊÄßÂíåÁ∫øÊÄßÊÄßËÉΩÁöÑÂ§ßËßÑÊ®°ÈÉ®ÁΩ≤ËÄåËÆæËÆ°ÁöÑ„ÄÇÁÑ∂ËÄåÔºåÂêåÊó∂‰ΩøÁî®IgniteÂíåZooKeeperÈúÄË¶ÅÈÖçÁΩÆÂíåÁÆ°ÁêÜ‰∏§‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºåËøôÂèØËÉΩÊòØ‰∏Ä‰∏™ÊåëÊàò„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Âª∫ËÆÆ‰Ω†Âè™ÊúâÂú®ËÆ°ÂàíÊâ©Â±ïÂà∞100‰∏™Êàñ1000‰∏™ËäÇÁÇπÊó∂Êâç‰ΩøÁî®ZooKeeper Discovery„ÄÇÂê¶ÂàôÔºåÊúÄÂ•Ω‰ΩøÁî®TCP/IPÂèëÁé∞„ÄÇ</p><hr><h3 id="ÁõÆÂΩïÁªìÊûÑ"><a href="#ÁõÆÂΩïÁªìÊûÑ" class="headerlink" title="ÁõÆÂΩïÁªìÊûÑ"></a>ÁõÆÂΩïÁªìÊûÑ</h3><ul><li><p>marshaller</p><blockquote><p> $IGNITE_HOME/work/db/marshaller    Á±ªclasspath‰ø°ÊÅØ</p></blockquote></li><li><p>binary_meta</p><blockquote><p>$IGNITE_HOME/work/db/binary_meta    Á±ªÁöÑÂÖÉÁ¥†‰ø°ÊÅØ</p></blockquote></li></ul><p><strong>‰∏ãÈù¢‰∏â‰∏™ÈÖçÁΩÆÈ°πÊòØÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËøõË°åÈÖçÁΩÆ</strong></p><ul><li><p>storagePath</p><blockquote><p>$RDX_HOME/data/ignite/persistent    ÊåÅ‰πÖÂåñÊñá‰ª∂</p></blockquote></li><li><p>walPath</p><blockquote><p>$RDX_HOME/data/ignite/wal_store    ÊåÅ‰πÖÂåñÊï∞ÊçÆÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºàÁ±ªÂêç„ÄÅÂÖÉÁ¥†Âêç„ÄÅ‰ΩçÁΩÆÔºâ</p></blockquote><ul><li>walPathÂíåstoragePathÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁöÑÂÖ≥ËÅî</li></ul></li><li><p>walArchivePath</p><blockquote><p>$RDX_HOME/data/ignite/wal_archive</p></blockquote><ul><li>ÂíåwalPathÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁªìÊûÑ‰∏ÄÊ†∑Ôºå‰∫åËÄÖÁöÑÂÖ≥Á≥ª</li></ul></li></ul><h3 id="Ignite-and-ZooKeeper-Configuration-Considerations"><a href="#Ignite-and-ZooKeeper-Configuration-Considerations" class="headerlink" title="Ignite and ZooKeeper Configuration Considerations"></a>Ignite and ZooKeeper Configuration Considerations</h3><ul><li>zookeeper‰∏≠ tickTimeÂíåsyncLimitÂèÇÊï∞ÁöÑÂÆö‰πâ</li></ul><p>When using ZooKeeper Discovery, you need to make sure that the configuration parameters of the ZooKeeper cluster and Ignite cluster match each other.</p><p>Consider a sample ZooKeeper configuration, as follows:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick</span><br><span class="line">tickTime=2000</span><br><span class="line"></span><br><span class="line"># The number of ticks that can pass between sending a request and getting an acknowledgement</span><br><span class="line">syncLimit=5</span><br></pre></td></tr></table></figure><ul><li>Âú®zookeeper‰∏≠ tickTimeÂíåsyncLimitÂèÇÊï∞ÁöÑ‰ΩúÁî®</li></ul><p>Configured this way, ZooKeeper server detects its own segmentation from the rest of the ZooKeeper cluster only after¬†<code>tickTime * syncLimit</code>¬†elapses. Until this event is detected at ZooKeeper level, all Ignite nodes connected to the segmented ZooKeeper server do not try to reconnect to the other ZooKeeper servers.</p><ul><li>Âú®ignite‰∏≠ sessionTimeoutÂèÇÊï∞‰∏ézookeeperÁöÑtickTimeÂíåsyncLimitÂèÇÊï∞ÁöÑÂÖ≥ËÅî</li></ul><p>On the other hand, there is a¬†<code>sessionTimeout</code>¬†parameter on the Ignite side that defines how soon ZooKeeper closes an Ignite node‚Äôs session if the node gets disconnected from the ZooKeeper cluster. If¬†<code>sessionTimeout</code>¬†is smaller than¬†<code>tickTime * syncLimit</code>¬†, then the Ignite node is notified by the segmented ZooKeeper server too late ‚Äî its session expires before it tries to reconnect to other ZooKeeper servers.</p><p>To avoid this situation,¬†<code>sessionTimeout</code>¬†should be bigger than¬†<code>tickTime * syncLimit</code>.</p><h1 id="sqlline"><a href="#sqlline" class="headerlink" title="sqlline"></a>sqlline</h1><blockquote><p>TIPS:</p><ol><li><p>Keep in mind that, in Ignite, the concepts of a SQL table and a key-value cache are two equivalent representations of the same (internal) data structure. You can access your data using either the key-value API or SQL statements, or both.</p></li><li><p>A cache is a collection of key-value pairs that can be accessed through the key-value API. A SQL table in Ignite corresponds to the notion of tables in traditional RDBMSs with some additional constraints; for example, each SQL table must have a primary key.</p><p>A table with a primary key can be presented as a key-value cache, in which the primary key column serves as the key, and the rest of the table columns represent the fields of the object (the value).</p></li></ol></blockquote><h2 id="ÁôªÂΩï"><a href="#ÁôªÂΩï" class="headerlink" title="ÁôªÂΩï"></a>ÁôªÂΩï</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">IGNITE_HOME/bin/sqlline.sh --verbose=<span class="literal">true</span> -u jdbc:ignite:thin://ipÂú∞ÂùÄ/PUBLIC</span></span><br></pre></td></tr></table></figure><h1 id="issues"><a href="#issues" class="headerlink" title="issues"></a>issues</h1><h3 id="BinaryObjectException-Conflicting-enum-values"><a href="#BinaryObjectException-Conflicting-enum-values" class="headerlink" title="BinaryObjectException: Conflicting enum values"></a>BinaryObjectException: Conflicting enum values</h3><ul><li><p>ÂéüÂõ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â≠òÂÖ•igniteÁöÑÊï∞ÊçÆÊ†ºÂºè</span><br><span class="line">key: String , value: Map&lt;Enum, BigDecimal&gt;</span><br><span class="line">EnumÁ±ªÂûãÂåÖÂê´</span><br><span class="line">&#123;A,B,C&#125;</span><br><span class="line"></span><br><span class="line">Âú®‰πãÂêéÁî±‰∫é‰∏öÂä°ÂèòÊõ¥ÔºåÈúÄË¶ÅÊñ∞Â¢ûÊñ∞ÁöÑenumÈ°πÁõÆÔºåÂπ∂Ê∑ªÂä†DÂú®A‰∏éB‰πãÈó¥</span><br><span class="line">&#123;A,D,B,C&#125;</span><br></pre></td></tr></table></figure></li><li><p>ÂàÜÊûê</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Áî±‰∫éÂú®Êï∞ÊçÆÂ≠òÂÖ•ignite‰πãÂêéÔºåignite‰ºö‰øùÂ≠òÊï∞ÊçÆÁõ∏ÂÖ≥ÁöÑschema‰ø°ÊÅØ,Ê≠§Êó∂Âú®enumÈ°πÁõÆ‰πãÈó¥‰øÆÊîπitemÔºå‰ºöÊâì‰π±‰πãÂâçÁöÑindex</span><br></pre></td></tr></table></figure></li><li><p>Ëß£ÂÜ≥ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ÊñπÊ≥ï‰∏ÄÔºö</span><br><span class="line">Êõ¥ÊîπenumÁ±ªÁöÑÂêçÁß∞Ôºå‰∏çÂÜç‰ΩøÁî®ÂéüÊúâÁöÑschema‰ø°ÊÅØ</span><br><span class="line">ÊñπÊ≥ï‰∫åÔºö</span><br><span class="line">enumÁ±ªÊñ∞Â¢ûÈ°πÁõÆÊó∂ÔºåÈúÄË¶ÅÂú®ÊúÄÂêéÈù¢Ê∑ªÂä†ÔºåÈÅøÂÖçÊâì‰π±Â∑≤ÊúâÁöÑschemaÁ¥¢Âºï</span><br><span class="line">ÊñπÊ≥ï‰∏âÔºàÊú™È™åËØÅÔºâÔºö</span><br><span class="line">Âà†Èô§ $IGNITE_HOME/work/binary_meta/NodexÈáåÈù¢ÁöÑÊñá‰ª∂</span><br></pre></td></tr></table></figure></li><li><p>ÂÆòÊñπËØ¥Êòé</p><blockquote><ul><li>You cannot change the types of existing fields.</li><li>You cannot change the order of enum values or add new constants at the beginning or in the middle of the list of enum‚Äôs values. You can add new constants to the end of the list though.</li></ul></blockquote></li><li><p><strong>Â§ÑÁêÜconflict enum values, ÈúÄË¶ÅÊ∏ÖÈô§Êï∞ÊçÆ</strong></p></li></ul><blockquote><p>ÈúÄË¶ÅÊ∏ÖÁêÜ $IGNITE_HOME/work/dbÁõÆÂΩï‰∏ãÁöÑ binary_meta„ÄÅmarshaller</p><p>ÈúÄË¶ÅÈ™åËØÅÊòØÂê¶Ê∏ÖÁêÜ storagePath„ÄÅwalPath„ÄÅwalArchivePath</p></blockquote><h3 id="gc"><a href="#gc" class="headerlink" title="gc"></a>gc</h3><p><img src="/images/ignite/gc_collect.png"></p><blockquote><p>3sËøõË°ågc  (110060-52672)/1024=56.04G</p></blockquote><p><img src="/images/ignite/gc_2.png"></p><blockquote><p>17sËøõË°ågc (109952-52658)/1024=55.95G</p></blockquote><h3 id="IgniteCacheException"><a href="#IgniteCacheException" class="headerlink" title="IgniteCacheException"></a>IgniteCacheException</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ERROR org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.spi</span><span class="variable">.communication</span><span class="variable">.tcp</span><span class="variable">.TcpCommunicationSpi</span>  [] - Failed to send message to remote node [node=ZookeeperClusterNode [id=<span class="number">1</span>c8a032d-<span class="number">042</span>e-<span class="number">4386</span>-<span class="number">9</span>ce8-<span class="number">2605</span>c0699304, addrs=[<span class="number">17</span><span class="variable">.9</span><span class="variable">.11</span><span class="variable">.11</span>], order=<span class="number">1</span>, loc=false, client=false], msg=GridIoMessage [plc=<span class="number">2</span>, topic=TOPIC_CACHE, topicOrd=<span class="number">8</span>, ordered=false, timeout=<span class="number">0</span>, skipOnTimeout=false, msg=GridNearLockRequest [topVer=AffinityTopologyVersion [topVer=<span class="number">358</span>, minorTopVer=<span class="number">0</span>], miniId=<span class="number">1</span>, dhtVers=GridCacheVersion[] [<span class="literal">null</span>], subjId=a5dbdc1d-e76e-<span class="number">49</span>c2-<span class="number">85</span>d7-ed7f1c7db7bd, taskNameHash=<span class="number">0</span>, createTtl=-<span class="number">1</span>, accessTtl=-<span class="number">1</span>, flags=<span class="number">3</span>, txLbl=<span class="literal">null</span>, filter=<span class="literal">null</span>, <span class="keyword">super</span>=GridDistributedLockRequest [nodeId=a5dbdc1d-e76e-<span class="number">49</span>c2-<span class="number">85</span>d7-ed7f1c7db7bd, nearXidVer=GridCacheVersion [topVer=<span class="number">245500806</span>, order=<span class="number">1638786801426</span>, nodeOrder=<span class="number">336</span>], threadId=<span class="number">11960694</span>, futId=<span class="number">96</span>c1bf42d71-<span class="number">90702925</span>-<span class="number">3</span>ef9-<span class="number">4</span>c70-b7a7-<span class="number">4</span>be2fb6d75ba, timeout=<span class="number">0</span>, isInTx=true, isInvalidate=false, isRead=true, isolation=REPEATABLE_READ, retVals=[true], txSize=<span class="number">0</span>, flags=<span class="number">0</span>, keysCnt=<span class="number">1</span>, <span class="keyword">super</span>=GridDistributedBaseMessage [ver=GridCacheVersion [topVer=<span class="number">245500806</span>, order=<span class="number">1638786801426</span>, nodeOrder=<span class="number">336</span>], committedVers=<span class="literal">null</span>, rolledbackVers=<span class="literal">null</span>, cnt=<span class="number">1</span>, <span class="keyword">super</span>=GridCacheIdMessage [cacheId=-<span class="number">182240380</span>, <span class="keyword">super</span>=GridCacheMessage [msgId=<span class="number">1360862</span>, depInfo=<span class="literal">null</span>, lastAffChangedTopVer=AffinityTopologyVersion [topVer=<span class="number">336</span>, minorTopVer=<span class="number">0</span>], err=<span class="literal">null</span>, skipPrepare=false]]]]]]]</span><br><span class="line"></span><br><span class="line">org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Failed to connect to node due to unrecoverable exception (is node still alive?). Make sure that each ComputeTask <span class="keyword">and</span> cache Transaction has a timeout set in order to prevent parties from waiting <span class="keyword">forever</span> in <span class="keyword">case</span> of network issues [nodeId=d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895, addrs=[x/x<span class="variable">.x</span><span class="variable">.x</span><span class="variable">.x</span>:<span class="number">47100</span>], err= <span class="keyword">class</span> org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Remote node does <span class="keyword">not</span> observe current node in topology : d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895]</span><br><span class="line"></span><br><span class="line">Caused by: org<span class="variable">.apache</span><span class="variable">.ignite</span><span class="variable">.IgniteCheckedException</span>: Remote node does <span class="keyword">not</span> observe current node in topology : d0a258e5-ec1b-<span class="number">4</span>f79-<span class="number">89</span>ad-<span class="number">80</span>c27708f895</span><br></pre></td></tr></table></figure><ul><li>gcÁöÑÁ≠ñÁï•</li><li>ignite clientÁöÑÂºÇÂ∏∏ÊçïËé∑</li><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> ignite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flink Memory Model</title>
      <link href="/2019/10/01/flink%20Memory%20Model/"/>
      <url>/2019/10/01/flink%20Memory%20Model/</url>
      
        <content type="html"><![CDATA[<h2 id="ÂÜÖÂ≠òÊ®°Âûã"><a href="#ÂÜÖÂ≠òÊ®°Âûã" class="headerlink" title="ÂÜÖÂ≠òÊ®°Âûã"></a>ÂÜÖÂ≠òÊ®°Âûã</h2><h3 id="jobmanager"><a href="#jobmanager" class="headerlink" title="jobmanager"></a>jobmanager</h3><p><img src="/images/flink/jobmanager.jpg"></p><ul><li>JVM HeapÂ§ßÂ∞èËÆæÁΩÆÂØπÂ∫îÈÖçÁΩÆÊñá‰ª∂<code>flink-conf.yaml</code>ÁöÑ<strong>jobmanager.heap.size</strong></li></ul><h3 id="taskmanager"><a href="#taskmanager" class="headerlink" title="taskmanager"></a>taskmanager</h3><p><img src="/images/flink/taskmanager.jpg"></p><ul><li>Total Flink MemoryÂØπÂ∫î<code>flink-conf.yaml</code>ÁöÑ<strong>taskmanager.memory.flink.size</strong></li><li>JVM MetaspaceÂØπÂ∫î<code>flink-conf.yaml</code>ÁöÑ<strong>taskmanager.memory.jvm-metaspace.size</strong></li><li>Total Process MemoryÂØπÂ∫î<code>flink-conf.yaml</code>ÁöÑ<strong>taskmanager.memory.process.size</strong></li></ul><h4 id="FlinkÊÄªÂÜÖÂ≠òÔºàTotal-Flink-MemoryÔºâ"><a href="#FlinkÊÄªÂÜÖÂ≠òÔºàTotal-Flink-MemoryÔºâ" class="headerlink" title="FlinkÊÄªÂÜÖÂ≠òÔºàTotal Flink MemoryÔºâ"></a>FlinkÊÄªÂÜÖÂ≠òÔºàTotal Flink MemoryÔºâ</h4><ul><li><p><strong>Âê´‰πâ</strong><br>TaskManagerËøõÁ®ãÂç†Áî®ÁöÑÊâÄÊúâ‰∏éFlinkÁõ∏ÂÖ≥ÁöÑÂÜÖÂ≠òÔºà‰∏çÂåÖÊã¨JVMÂÖÉÁ©∫Èó¥ÂíåÂÖ∂‰ªñÈ¢ùÂ§ñÂºÄÈîÄÔºâ„ÄÇÂÖ∑‰ΩìÂåÖÂê´4Â§ßÂùóÔºöFlinkÊ°ÜÊû∂ÂÜÖÂ≠òÔºàÂ†ÜÂÜÖ„ÄÅÂ†ÜÂ§ñÔºâ„ÄÅÊâòÁÆ°ÂÜÖÂ≠òÔºà‰ªÖÂ†ÜÂ§ñÔºâ„ÄÅÁΩëÁªúÁºìÂ≠òÔºà‰ªÖÂ†ÜÂ§ñÔºâ„ÄÅ‰ªªÂä°ÂÜÖÂ≠òÔºàÂ†ÜÂÜÖ„ÄÅÂ†ÜÂ§ñÔºâ„ÄÇ</p></li><li><p><strong>ÂèÇÊï∞</strong><br><code>taskmanager.memory.flink.size</code>ÔºöÊó†ÈªòËÆ§ÂÄºÔºåÈúÄË¶ÅÁî®Êà∑ÊåáÂÆö„ÄÇ</p></li></ul><h4 id="FlinkÊ°ÜÊû∂ÔºàFrameworkÔºâÂÜÖÂ≠ò"><a href="#FlinkÊ°ÜÊû∂ÔºàFrameworkÔºâÂÜÖÂ≠ò" class="headerlink" title="FlinkÊ°ÜÊû∂ÔºàFrameworkÔºâÂÜÖÂ≠ò"></a>FlinkÊ°ÜÊû∂ÔºàFrameworkÔºâÂÜÖÂ≠ò</h4><ul><li><p>Âê´‰πâ<br>Flink RuntimeÂ∫ïÂ±ÇÂç†Áî®ÁöÑÂÜÖÂ≠òÔºå‰∏ÄËà¨Êù•ËÆ≤Áõ∏ÂØπÂõ∫ÂÆöÔºå‰∏çÈúÄË¶ÅÊõ¥Êîπ„ÄÇÊûÅÁâπÊÆäÊÉÖÂÜµ‰∏ãÊâçÈúÄË¶ÅË∞ÉÂ§ß‰∏Ä‰∫õÔºåÊØîÂ¶ÇÈùûÂ∏∏È´òÁöÑÁÆóÂ≠êÂπ∂Ë°åÂ∫¶ÔºåÊàñËÄÖ‰∏éÂ§ñÈÉ®Á≥ªÁªüÔºàÂ¶ÇHadoopÔºâÊúâÂØÜÈõÜ‰∫§‰∫íÁ≠âÁ≠â„ÄÇ</p></li><li><p>ÂèÇÊï∞</p><p><code>taskmanager.memory.framework.heap.size</code>ÔºöÂ†ÜÂÜÖÈÉ®ÂàÜÔºàFramework HeapÔºâÔºåÈªòËÆ§ÂÄº128MBÔºõ</p><p><code>taskmanager.memory.framework.off-heap.size</code>ÔºöÂ†ÜÂ§ñÈÉ®ÂàÜÔºàFramework Off-HeapÔºâÔºå‰ª•Áõ¥Êé•ÂÜÖÂ≠òÂΩ¢ÂºèÂàÜÈÖçÔºåÈªòËÆ§ÂÄº128MB„ÄÇ</p></li></ul><h4 id="ÊâòÁÆ°ÔºàManagedÔºâÂÜÖÂ≠ò"><a href="#ÊâòÁÆ°ÔºàManagedÔºâÂÜÖÂ≠ò" class="headerlink" title="ÊâòÁÆ°ÔºàManagedÔºâÂÜÖÂ≠ò"></a>ÊâòÁÆ°ÔºàManagedÔºâÂÜÖÂ≠ò</h4><ul><li><p>Âê´‰πâ<br>Á∫ØÂ†ÜÂ§ñÂÜÖÂ≠òÔºåÁî±MemoryManagerÁÆ°ÁêÜÔºåÁî®‰∫é‰∏≠Èó¥ÁªìÊûúÁºìÂ≠ò„ÄÅÊéíÂ∫è„ÄÅÂìàÂ∏åË°®Á≠âÔºå‰ª•ÂèäRocksDBÁä∂ÊÄÅÂêéÁ´Ø„ÄÇÂèØËßÅÔºåRocksDBÊ∂àËÄóÁöÑÂÜÖÂ≠òÂèØ‰ª•Áî±Áî®Êà∑ÊòæÂºèÊéßÂà∂‰∫ÜÔºå‰∏çÂÜçÂÉèÊóßÁâàÊú¨‰∏ÄÊ†∑Èöæ‰ª•È¢ÑÊµãÂíåË∞ÉËäÇ„ÄÇ</p></li><li><p>ÂèÇÊï∞</p><p><code>taskmanager.memory.managed.fraction</code>ÔºöÊâòÁÆ°ÂÜÖÂ≠òÂç†FlinkÊÄªÂÜÖÂ≠ò<code>taskmanager.memory.flink.sizeÁöÑÊØî‰æã</code>ÔºåÈªòËÆ§ÂÄº0.4Ôºõ<code>taskmanager.memory.managed.size</code>ÔºöÊâòÁÆ°ÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÔºåÊó†ÈªòËÆ§ÂÄºÔºå‰∏ÄËà¨‰πü‰∏çÊåáÂÆöÔºåËÄåÊòØ‰æùÁÖß‰∏äËø∞ÊØî‰æãÊù•Êé®ÂÆöÔºåÊõ¥Âä†ÁÅµÊ¥ª„ÄÇ</p></li></ul><h4 id="ÁΩëÁªúÔºàNetworkÔºâÁºìÂ≠ò"><a href="#ÁΩëÁªúÔºàNetworkÔºâÁºìÂ≠ò" class="headerlink" title="ÁΩëÁªúÔºàNetworkÔºâÁºìÂ≠ò"></a>ÁΩëÁªúÔºàNetworkÔºâÁºìÂ≠ò</h4><ul><li><p>Âê´‰πâ<br>Á∫ØÂ†ÜÂ§ñÂÜÖÂ≠òÔºåÁî®‰∫éTaskManager‰πãÈó¥Ôºàshuffle„ÄÅÂπøÊí≠Á≠âÔºâÂèä‰∏éÂ§ñÈÉ®ÁªÑ‰ª∂ÁöÑÊï∞ÊçÆ‰º†ËæìÔºå‰ª•Áõ¥Êé•ÂÜÖÂ≠òÂΩ¢ÂºèÂàÜÈÖç„ÄÇ</p></li><li><p>ÂèÇÊï∞</p><p><code>taskmanager.memory.network.min</code>ÔºöÁΩëÁªúÁºìÂ≠òÁöÑÊúÄÂ∞èÂÄºÔºåÈªòËÆ§64MBÔºõ<code>taskmanager.memory.network.max</code>ÔºöÁΩëÁªúÁºìÂ≠òÁöÑÊúÄÂ§ßÂÄºÔºåÈªòËÆ§1GBÔºõ<code>taskmanager.memory.network.fraction</code>ÔºöÁΩëÁªúÁºìÂ≠òÂç†FlinkÊÄªÂÜÖÂ≠ò<code>taskmanager.memory.flink.size</code>ÁöÑÊØî‰æãÔºåÈªòËÆ§ÂÄº0.1„ÄÇËã•Ê†πÊçÆÊ≠§ÊØî‰æãÁÆóÂá∫ÁöÑÂÜÖÂ≠òÈáèÊØîÊúÄÂ∞èÂÄºÂ∞èÊàñÊØîÊúÄÂ§ßÂÄºÂ§ßÔºåÂ∞±‰ºöÈôêÂà∂Âà∞ÊúÄÂ∞èÂÄºÊàñËÄÖÊúÄÂ§ßÂÄº„ÄÇ</p></li></ul><h4 id="‰ªªÂä°ÔºàTaskÔºâÂÜÖÂ≠ò"><a href="#‰ªªÂä°ÔºàTaskÔºâÂÜÖÂ≠ò" class="headerlink" title="‰ªªÂä°ÔºàTaskÔºâÂÜÖÂ≠ò"></a>‰ªªÂä°ÔºàTaskÔºâÂÜÖÂ≠ò</h4><ul><li><p>Âê´‰πâ<br>È°æÂêçÊÄù‰πâÔºåÊòØÁÆóÂ≠êÈÄªËæëÂíåÁî®Êà∑‰ª£Á†Å„ÄÅËá™ÂÆö‰πâÊï∞ÊçÆÁªìÊûÑÁúüÊ≠£Âç†Áî®ÁöÑÂÜÖÂ≠ò„ÄÇ</p></li><li><p>ÂèÇÊï∞</p><p><code>taskmanager.memory.task.heap.size</code>ÔºöÂ†ÜÂÜÖÈÉ®ÂàÜÔºàTask HeapÔºâÔºåÊó†ÈªòËÆ§ÂÄºÔºå‰∏ÄËà¨‰∏çÂª∫ËÆÆËÆæÁΩÆÔºå‰ºöËá™Âä®Áî®FlinkÊÄªÂÜÖÂ≠òÂáèÂéªÊ°ÜÊû∂„ÄÅÊâòÁÆ°„ÄÅÁΩëÁªú‰∏âÈÉ®ÂàÜÁöÑÂÜÖÂ≠òÊé®ÁÆóÂæóÂá∫„ÄÇ<code>taskmanager.memory.task.off-heap.size</code>ÔºöÂ†ÜÂ§ñÈÉ®ÂàÜÔºàTask Off-HeapÔºâÔºå‰ª•Áõ¥Êé•ÂÜÖÂ≠òÂΩ¢ÂºèÂàÜÈÖçÔºåÈªòËÆ§ÂÄº‰∏∫0ÔºåÂç≥‰∏ç‰ΩøÁî®„ÄÇ</p></li></ul><h5 id="TaskManagerËøõÁ®ãÊÄªÂÜÖÂ≠òÔºàTotal-Process-MemoryÔºâ"><a href="#TaskManagerËøõÁ®ãÊÄªÂÜÖÂ≠òÔºàTotal-Process-MemoryÔºâ" class="headerlink" title="TaskManagerËøõÁ®ãÊÄªÂÜÖÂ≠òÔºàTotal Process MemoryÔºâ"></a>TaskManagerËøõÁ®ãÊÄªÂÜÖÂ≠òÔºàTotal Process MemoryÔºâ</h5><ul><li><p><strong>Âê´‰πâ</strong><br>Âú®ÂÆπÂô®ÂåñÈÉ®ÁΩ≤Ôºàon YARN/K8s/MesosÔºâÁéØÂ¢É‰∏ã‰ΩøÁî®ÔºåÊòØFlinkÊÄªÂÜÖÂ≠ò„ÄÅJVMÂÖÉÁ©∫Èó¥‰∏éJVMÈ¢ùÂ§ñÂÜÖÂ≠òÂºÄÈîÄÁöÑÂíåÔºå‰πüÂ∞±ÊòØÂÆπÂô®Êú¨Ë∫´ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ</p></li><li><p><strong>ÂèÇÊï∞</strong><br><code>taskmanager.memory.process.size</code>ÔºöÊó†ÈªòËÆ§ÂÄºÔºåÈúÄË¶ÅÁî®Êà∑ÊåáÂÆö„ÄÇ</p></li></ul><h5 id="JVMÂÖÉÁ©∫Èó¥ÔºàMetaspaceÔºâ"><a href="#JVMÂÖÉÁ©∫Èó¥ÔºàMetaspaceÔºâ" class="headerlink" title="JVMÂÖÉÁ©∫Èó¥ÔºàMetaspaceÔºâ"></a>JVMÂÖÉÁ©∫Èó¥ÔºàMetaspaceÔºâ</h5><ul><li><p><strong>Âê´‰πâ</strong><br>Â≠òÊîæÂ∑≤Ë¢´ËôöÊãüÊú∫Âä†ËΩΩÁöÑ<strong>Á±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáèÔºåÂç≥ÁºñËØëÂô®ÁºñËØëÂêéÁöÑ‰ª£Á†Å</strong></p></li><li><p><strong>ÂèÇÊï∞</strong><br><code>taskmanager.memory.jvm-metaspace.size</code>ÔºöÈªòËÆ§ÂÄº256MB„ÄÇ</p></li></ul><h4 id="JVMÈ¢ùÂ§ñÂºÄÈîÄÔºàOverheadÔºâ"><a href="#JVMÈ¢ùÂ§ñÂºÄÈîÄÔºàOverheadÔºâ" class="headerlink" title="JVMÈ¢ùÂ§ñÂºÄÈîÄÔºàOverheadÔºâ"></a>JVMÈ¢ùÂ§ñÂºÄÈîÄÔºàOverheadÔºâ</h4><ul><li><p>Âê´‰πâ<br>‰∏∫JVMÈ¢ÑÁïôÁöÑÂÖ∂‰ªñÊú¨Âú∞ÂÜÖÂ≠òÔºåÁî®‰∫éÁ∫øÁ®ãÊ†à„ÄÅ‰ª£Á†ÅÁºìÂ≠òÁ≠âÔºå‰ΩúÁî®Êúâ‰∫õÁ±ª‰ºº‰∫é‰πãÂâçÁâàÊú¨‰∏≠‰∏∫ÂÆπÂô®È¢ÑÁïôÁöÑÊà™Êñ≠ÔºàcutoffÔºâÂÜÖÂ≠ò„ÄÇÂΩìÁÑ∂Âú®1.10ÁâàÊú¨‰∏≠ÔºåÂéüÂÖàÁöÑcontainerized.heap-cutoff-ratio‰∏écontainerized.heap-cutoff-minÂèÇÊï∞ÂØπTMÂ∞±‰∏çÂÜçÁîüÊïà‰∫Ü„ÄÇ</p></li><li><p>ÂèÇÊï∞</p><p><code>taskmanager.memory.jvm-overhead.min</code>ÔºöJVMÈ¢ùÂ§ñÂºÄÈîÄÁöÑÊúÄÂ∞èÂÄºÔºåÈªòËÆ§192MBÔºõ<code>taskmanager.memory.jvm-overhead.max</code>ÔºöJVMÈ¢ùÂ§ñÂºÄÈîÄÁöÑÊúÄÂ§ßÂÄºÔºåÈªòËÆ§1GBÔºõ<code>taskmanager.memory.jvm-overhead.fraction</code>ÔºöJVMÈ¢ùÂ§ñÂºÄÈîÄÂç†TMËøõÁ®ãÊÄªÂÜÖÂ≠ò<code>taskmanager.memory.process.size</code>ÔºàÊ≥®ÊÑè‰∏çÊòØFlinkÊÄªÂÜÖÂ≠òÔºâÁöÑÊØî‰æãÔºåÈªòËÆ§ÂÄº0.1„ÄÇËã•Ê†πÊçÆÊ≠§ÊØî‰æãÁÆóÂá∫ÁöÑÂÜÖÂ≠òÈáèÊØîÊúÄÂ∞èÂÄºÂ∞èÊàñÊØîÊúÄÂ§ßÂÄºÂ§ßÔºåÂ∞±‰ºöÈôêÂà∂Âà∞ÊúÄÂ∞èÂÄºÊàñËÄÖÊúÄÂ§ßÂÄº„ÄÇ</p></li></ul><h3 id="FlinkÂÜÖÂ≠òÂèÇÊï∞‰∏éJVMÂèÇÊï∞ÁöÑÂÖ≥Á≥ª"><a href="#FlinkÂÜÖÂ≠òÂèÇÊï∞‰∏éJVMÂèÇÊï∞ÁöÑÂÖ≥Á≥ª" class="headerlink" title="FlinkÂÜÖÂ≠òÂèÇÊï∞‰∏éJVMÂèÇÊï∞ÁöÑÂÖ≥Á≥ª"></a>FlinkÂÜÖÂ≠òÂèÇÊï∞‰∏éJVMÂèÇÊï∞ÁöÑÂÖ≥Á≥ª</h3><p>‰∏äËø∞ÂÜÖÂ≠òÂèÇÊï∞‰ºöÁõ¥Êé•ÂΩ±ÂìçÂêØÂä®TaskManagerÊó∂‰ΩøÁî®ÁöÑJVMÂèÇÊï∞Ôºå‰ΩøÁî®Áõ∏ÂÖ≥Â∑•ÂÖ∑ÂèØ‰ª•ËßÇÂØüÂà∞„ÄÇ</p><ul><li><p><code>-Xmx</code>/<code>-Xms</code>ÔºöÂØπÂ∫îÂ†ÜÂÜÖÊ°ÜÊû∂ÂÜÖÂ≠ò‰∏é‰ªªÂä°ÂÜÖÂ≠ò‰πãÂíåÔºõ</p></li><li><p><code>-XX:MaxDirectMemorySize</code>ÔºöÂØπÂ∫î‰∏âÂùóÁõ¥Êé•ÂÜÖÂ≠òÔºåÂç≥Â†ÜÂ§ñÊ°ÜÊû∂ÂÜÖÂ≠ò„ÄÅ‰ªªÂä°ÂÜÖÂ≠ò‰∏éÁΩëÁªúÁºìÂ≠ò‰πãÂíåÔºõ</p></li><li><p><code>-XX:MaxMetaspaceSize</code>ÔºöÂØπÂ∫îJVMÂÖÉÁ©∫Èó¥ËÆæÁΩÆ„ÄÇ</p></li></ul><h2 id="ÈÖçÁΩÆ‰ºòÂåñ"><a href="#ÈÖçÁΩÆ‰ºòÂåñ" class="headerlink" title="ÈÖçÁΩÆ‰ºòÂåñ"></a>ÈÖçÁΩÆ‰ºòÂåñ</h2><ul><li><strong>ËäÇÁÇπÂπ≥ÂùáÂàÜÈÖç</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cluster.evenly-spread-out-slots:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><hr><p>reference</p><p><a href="https://blog.51cto.com/u_14222592/2892910">Flink 1.10‰πãÊîπËøõÁöÑTaskManagerÂÜÖÂ≠òÊ®°Âûã‰∏éÈÖçÁΩÆ„ÄêÈôÑÊ∫êÁ†Å„Äë_wx5c7a97e3804fd_51CTOÂçöÂÆ¢</a></p>]]></content>
      
      
      <categories>
          
          <category> flink </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javascript&#39;s this</title>
      <link href="/2019/08/14/javascript&#39;s%20this/"/>
      <url>/2019/08/14/javascript&#39;s%20this/</url>
      
        <content type="html"><![CDATA[<p>ÊñáÂ≠óËΩ¨ËΩΩËá™<a href="https://juejin.im/post/5d51feaef265da039005219e#heading-5">JS ‰∏≠ this Âú®ÂêÑ‰∏™Âú∫ÊôØ‰∏ãÁöÑÊåáÂêë</a></p><h2 id="1-this-ÁöÑÂ••Áßò"><a href="#1-this-ÁöÑÂ••Áßò" class="headerlink" title="1. this ÁöÑÂ••Áßò"></a>1. this ÁöÑÂ••Áßò</h2><p>ÂæàÂ§öÊó∂ÂÄô, JS ‰∏≠ÁöÑ <code>this</code> ÂØπ‰∫éÂí±‰ª¨ÁöÑÂàùÂ≠¶ËÄÖÂæàÂÆπÊòì‰∫ßÁîüÂõ∞ÊÉë‰∏çËß£„ÄÇ <code>this</code> ÁöÑÂäüËÉΩÂæàÂº∫Â§ßÔºå‰ΩÜÈúÄË¶Å‰∏ÄÂÆö‰ªòÂá∫ÊâçËÉΩÊÖ¢ÊÖ¢ÁêÜËß£ÂÆÉ„ÄÇ</p><p>ÂØπJava„ÄÅPHPÊàñÂÖ∂‰ªñÊ†áÂáÜËØ≠Ë®ÄÊù•ÁúãÔºå<code>this</code> Ë°®Á§∫Á±ªÊñπÊ≥ï‰∏≠ÂΩìÂâçÂØπË±°ÁöÑÂÆû‰æã„ÄÇÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå<code>this</code>‰∏çËÉΩÂú®ÊñπÊ≥ï‰πãÂ§ñ‰ΩøÁî®ÔºåËøôÊ†∑Â∞±ÊØîËæÉ‰∏ç‰ºöÈÄ†ÊàêÊ∑∑Ê∑Ü„ÄÇ</p><p>Âú®JË¶Å‰∏≠ÊÉÖÂÜµÂ∞±ÊúâÊâÄ‰∏çÂêå: <code>this</code>Ë°®Á§∫ÂáΩÊï∞ÁöÑÂΩìÂâçÊâßË°å‰∏ä‰∏ãÊñáÔºåJS ‰∏≠ÂáΩÊï∞Ë∞ÉÁî®‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁßçÊñπÂºèÔºö</p><ul><li>ÂáΩÊï∞Ë∞ÉÁî®: <code>alert(&#39;Hello World!&#39;)</code></li><li>ÊñπÊ≥ïË∞ÉÁî®: <code>console.log(&#39;Hello World!&#39;)</code></li><li>ÊûÑÈÄ†ÂáΩÊï∞: <code>new RegExp(&#39;\\d&#39;)</code></li><li>ÈöêÂºèË∞ÉÁî®: <code>alert.call(undefined, &#39;Hello World!&#39;)</code></li></ul><p>ÊØèÁßçË∞ÉÁî®Á±ªÂûã‰ª•Ëá™Â∑±ÁöÑÊñπÂºèÂÆö‰πâ‰∏ä‰∏ãÊñáÔºåÊâÄ‰ª•Â∞±ÂæàÂÆπÊòì‰∫ßÁîüÊ∑∑Ê∑Ü„ÄÇ</p><p>Ê≠§Â§ñÔºå‰∏•Ê†ºÊ®°Âºè‰πü‰ºöÂΩ±ÂìçÊâßË°å‰∏ä‰∏ãÊñá„ÄÇ</p><p>ÁêÜËß£<code>this</code>ÂÖ≥ÈîÆÊòØË¶ÅÊ∏ÖÊ•öÁöÑÁü•ÈÅìÂáΩÊï∞Ë∞ÉÁî®ÂèäÂÖ∂Â¶Ç‰ΩïÂΩ±Âìç‰∏ä‰∏ãÊñá„ÄÇ</p><p>Êú¨Êñá‰∏ªË¶ÅËØ¥ÊòéÂáΩÊï∞ÁöÑË∞ÉÁî®ÊñπÂºèÂèäÂ¶Ç‰ΩïÂΩ±Âìç <code>this</code>ÔºåÂπ∂‰∏îËØ¥ÊòéÊâßË°å‰∏ä‰∏ãÊñáÁöÑÂ∏∏ËßÅÈô∑Èò±„ÄÇ</p><p>Âú®ÂºÄÂßã‰πãÂâçÔºåÂÖàÁü•ÈÅìÂá†‰∏™ÊúØËØ≠Ôºö</p><p>Ë∞ÉÁî®ÂáΩÊï∞Ê≠£Âú®ÊâßË°åÂàõÂª∫ÂáΩÊï∞‰ΩìÁöÑ‰ª£Á†ÅÔºåÊàñËÄÖÂè™ÊòØË∞ÉÁî®ÂáΩÊï∞„ÄÇ ‰æãÂ¶ÇÔºåparseIntÂáΩÊï∞Ë∞ÉÁî®ÊòØparseIntÔºà‚Äô15‚ÄôÔºâ„ÄÇ</p><ul><li><strong>ÂáΩÊï∞Ë∞ÉÁî®</strong>ÔºöÊâßË°åÊûÑÊàêÂáΩÊï∞‰∏ª‰ΩìÁöÑ‰ª£Á†ÅÔºö‰æãÂ¶ÇÔºå<code>parseInt</code>ÂáΩÊï∞Ë∞ÉÁî®ÊòØ<code>parseInt(&#39;15&#39;)</code>„ÄÇ</li><li><strong>Ë∞ÉÁî®ÁöÑ‰∏ä‰∏ãÊñá</strong>ÔºöÊåá <code>this</code> Âú®ÂáΩÊï∞‰ΩìÂÜÖÁöÑÂÄº„ÄÇ ‰æãÂ¶ÇÔºå<code>map.set(&#39;key&#39;, &#39;value&#39;)</code>ÁöÑË∞ÉÁî®‰∏ä‰∏ãÊñáÊòØ <code>map</code>„ÄÇ</li><li><strong>ÂáΩÊï∞ÁöÑ‰ΩúÁî®Âüü</strong>ÔºöÊòØÂú®ÂáΩÊï∞‰Ωì‰∏≠ÂèØËÆøÈóÆÁöÑÂèòÈáè„ÄÅÂØπË±°ÂíåÂáΩÊï∞ÁöÑÈõÜÂêà„ÄÇ</li></ul><h2 id="2-ÂáΩÊï∞Ë∞ÉÁî®"><a href="#2-ÂáΩÊï∞Ë∞ÉÁî®" class="headerlink" title="2.ÂáΩÊï∞Ë∞ÉÁî®"></a>2.ÂáΩÊï∞Ë∞ÉÁî®</h2><p>ÂΩì‰∏Ä‰∏™Ë°®ËææÂºè‰∏∫ÂáΩÊï∞Êé•ÁùÄ‰∏Ä‰∏™<code>(</code>Ôºå‰∏Ä‰∫õÁî®ÈÄóÂè∑ÂàÜÈöîÁöÑÂèÇÊï∞‰ª•Âèä‰∏Ä‰∏™<code>Ôºâ</code>Êó∂ÔºåÂáΩÊï∞Ë∞ÉÁî®Ë¢´ÊâßË°åÔºå‰æãÂ¶Ç<code>parseInt(&#39;18&#39;)</code>„ÄÇ</p><p>ÂáΩÊï∞Ë∞ÉÁî®Ë°®ËææÂºè‰∏çËÉΩÊòØÂ±ûÊÄßÊñπÂºèÁöÑË∞ÉÁî®ÔºåÂ¶Ç <code>obj.myFunc()</code>ÔºåËøôÁßçÊòØÂàõÂª∫‰∏Ä‰∏™ÊñπÊ≥ïË∞ÉÁî®„ÄÇÂÜçÂ¶Ç <code>[1,5].join(&#39;,&#39;)</code>‰∏çÊòØÂáΩÊï∞Ë∞ÉÁî®ÔºåËÄåÊòØÊñπÊ≥ïË∞ÉÁî®Ôºå<strong>ËøôÁßçÂå∫Âà´ÈúÄË¶ÅËÆ∞‰ΩèÂìàÔºåÂæàÈáçË¶ÅÊª¥</strong>„ÄÇ</p><p>ÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æãÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function hello(name) &#123;</span><br><span class="line">  return &#x27;Hello &#x27; + name + &#x27;!&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">// ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">const message = hello(&#x27;World&#x27;);</span><br><span class="line">console.log(message); // =&gt; &#x27;Hello World!&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>hello(&#39;World&#39;)</code>ÊòØÂáΩÊï∞Ë∞ÉÁî®: <code>hello</code>Ë°®ËææÂºèÁ≠â‰ª∑‰∫é‰∏Ä‰∏™ÂáΩÊï∞ÔºåË∑üÂú®ÂÆÉÂêéÈù¢ÁöÑÊòØ‰∏ÄÂØπÊã¨Âè∑‰ª•Âèä<code>&#39;World&#39;</code>ÂèÇÊï∞„ÄÇ</p><p>‰∏Ä‰∏™Êõ¥È´òÁ∫ßÁöÑ‰æãÂ≠êÊòØ<strong>IIFE</strong>(Á´ãÂç≥Ë∞ÉÁî®ÁöÑÂáΩÊï∞Ë°®ËææÂºè)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const message = (function(name) &#123;</span><br><span class="line">   return &#x27;Hello &#x27; + name + &#x27;!&#x27;;</span><br><span class="line">&#125;)(&#x27;World&#x27;);</span><br><span class="line">console.log(message) // =&gt; &#x27;Hello World!&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><strong>IIFE</strong>‰πüÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®:Á¨¨‰∏ÄÂØπÂúÜÊã¨Âè∑<code>(function(name) &#123;...&#125;)</code>ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÂÆÉÁöÑËÆ°ÁÆóÁªìÊûúÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂØπË±°ÔºåÂêéÈù¢Ë∑üÁùÄ‰∏ÄÂØπÂúÜÊã¨Âè∑ÔºåÂúÜÊã¨Âè∑ÁöÑÂèÇÊï∞ÊòØ<code>‚ÄúWorld‚Äù</code>„ÄÇ</p><h4 id="2-1-Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑthis"><a href="#2-1-Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑthis" class="headerlink" title="2.1. Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑthis"></a>2.1. Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑthis</h4><blockquote><p>this Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂØπË±°</p></blockquote><p>Â±ÄÂØπË±°Áî±ÊâßË°åÁéØÂ¢ÉÂÜ≥ÂÆö„ÄÇÂú®ÊµèËßàÂô®‰∏≠Ôºå<code>this</code>ÊòØ <code>window</code> ÂØπË±°„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884b811a409ab?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>Âú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÔºåÊâßË°å‰∏ä‰∏ãÊñáÊòØÂÖ®Â±ÄÂØπË±°„ÄÇ</p><p>ÂÜçÊù•ÁúãÁúã‰∏ãÈù¢ÂáΩÊï∞‰∏≠ÁöÑ‰∏ä‰∏ãÊñáÂèàÊòØ‰ªÄ‰πàÈ¨ºÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function sum(a, b) &#123;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">   this.myNumber = 20; // Â∞Ü&#x27;myNumber&#x27;Â±ûÊÄßÊ∑ªÂä†Âà∞ÂÖ®Â±ÄÂØπË±°</span><br><span class="line">   return a + b;</span><br><span class="line">&#125;</span><br><span class="line">// sum() is invoked as a function</span><br><span class="line">// sum() ‰∏≠ÁöÑ `this` ÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂØπË±°ÔºàwindowÔºâ</span><br><span class="line">sum(15, 16);     // =&gt; 31</span><br><span class="line">window.myNumber; // =&gt; 20</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Âú®Ë∞ÉÁî®<code>sum(15,16)</code>Êó∂ÔºåJS Ëá™Âä®Â∞Ü<code>this</code>ËÆæÁΩÆ‰∏∫ÂÖ®Â±ÄÂØπË±°ÔºåÂú®ÊµèËßàÂô®‰∏≠ËØ•ÂØπË±°ÊòØ<code>window</code>„ÄÇ</p><p>ÂΩì<code>this</code>Âú®‰ªª‰ΩïÂáΩÊï∞‰ΩúÁî®Âüü(ÊúÄÈ°∂Â±Ç‰ΩúÁî®Âüü:ÂÖ®Â±ÄÊâßË°å‰∏ä‰∏ãÊñá)‰πãÂ§ñ‰ΩøÁî®Ôºå<code>this</code> Ë°®Á§∫ <code>window</code> ÂØπË±°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.log(this === window); // =&gt; true</span><br><span class="line">this.myString = &#x27;Hello World!&#x27;;</span><br><span class="line">console.log(window.myString); // =&gt; &#x27;Hello World!&#x27;</span><br><span class="line"></span><br><span class="line">&lt;!-- In an html file --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h4 id="2-2-‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑÂáΩÊï∞Ë∞ÉÁî®-this-ÂèàÊòØ‰ªÄ‰πàÊ†∑ÁöÑ"><a href="#2-2-‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑÂáΩÊï∞Ë∞ÉÁî®-this-ÂèàÊòØ‰ªÄ‰πàÊ†∑ÁöÑ" class="headerlink" title="2.2 ‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑÂáΩÊï∞Ë∞ÉÁî® this ÂèàÊòØ‰ªÄ‰πàÊ†∑ÁöÑ"></a>2.2 ‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑÂáΩÊï∞Ë∞ÉÁî® this ÂèàÊòØ‰ªÄ‰πàÊ†∑ÁöÑ</h4><blockquote><p><code>this</code> Âú®‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑÂáΩÊï∞Ë∞ÉÁî®‰∏≠‰∏∫ <strong>undefined</strong></p></blockquote><p>‰∏•Ê†ºÊ®°ÂºèÊòØÂú® ECMAScript 5.1‰∏≠ÂºïÂÖ•ÁöÑÔºåÂÆÉÊèê‰æõ‰∫ÜÊõ¥Â•ΩÁöÑÂÆâÂÖ®ÊÄßÂíåÊõ¥Âº∫ÁöÑÈîôËØØÊ£ÄÊü•„ÄÇ</p><p>Ë¶ÅÂêØÁî®‰∏•Ê†ºÊ®°ÂºèÔºåÂáΩÊï∞Â§¥ÈÉ®ÂÜôÂÖ•<code>use strict</code> Âç≥ÂèØ„ÄÇ</p><p>ÂêØÁî®ÂêéÔºå‰∏•Ê†ºÊ®°Âºè‰ºöÂΩ±ÂìçÊâßË°å‰∏ä‰∏ãÊñáÔºå<code>this</code> Âú®Â∏∏ËßÑÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÂÄº‰∏∫<code>undefined</code>„ÄÇ ‰∏é‰∏äËø∞ÊÉÖÂÜµ<code>2.1</code>Áõ∏ÂèçÔºåÊâßË°å‰∏ä‰∏ãÊñá‰∏çÂÜçÊòØÂÖ®Â±ÄÂØπË±°„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884ceb97a4874?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>‰∏•Ê†ºÊ®°ÂºèÂáΩÊï∞Ë∞ÉÁî®Á§∫‰æãÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function multiply(a, b) &#123;</span><br><span class="line">  &#x27;use strict&#x27;; // ÂêØÁî®‰∏•Ê†ºÊ®°Âºè</span><br><span class="line">  console.log(this === undefined); // =&gt; true</span><br><span class="line">  return a * b;</span><br><span class="line">&#125;</span><br><span class="line">multiply(2, 5); // =&gt; 10</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÂΩì<code>multiply(2,5)</code>‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ôºå<code>this</code>ÊòØ<code>undefined</code>„ÄÇ</p><p>‰∏•Ê†ºÊ®°Âºè‰∏ç‰ªÖÂú®ÂΩìÂâç‰ΩúÁî®Âüü‰∏≠ÊúâÊïàÔºåÂú®ÂÜÖÈÉ®‰ΩúÁî®Âüü‰∏≠‰πüÊòØÊúâÊïàÁöÑ(ÂØπ‰∫éÂú®ÂÜÖÈÉ®Â£∞ÊòéÁöÑÊâÄÊúâÂáΩÊï∞):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function execute() &#123;</span><br><span class="line">   &#x27;use strict&#x27;; // ÂºÄÂêØ‰∏•Ê†ºÊ®°Âºè  </span><br><span class="line">   function concat(str1, str2) &#123;</span><br><span class="line">     // ‰∏•Ê†ºÊ®°Âºè‰ªçÁÑ∂ÊúâÊïà  </span><br><span class="line">     console.log(this === undefined); // =&gt; true</span><br><span class="line">     return str1 + str2;</span><br><span class="line">   &#125;</span><br><span class="line">   // concat() Âú®‰∏•Ê†ºÊ®°Âºè‰∏ã‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">   // this in concat() is undefined</span><br><span class="line">   concat(&#x27;Hello&#x27;, &#x27; World!&#x27;); // =&gt; &quot;Hello World!&quot;</span><br><span class="line">&#125;</span><br><span class="line">execute();</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>&#39;use strict&#39;</code>Ë¢´ÊèíÂÖ•Âà∞ÊâßË°å‰ΩìÁöÑÈ°∂ÈÉ®ÔºåÂú®ÂÖ∂‰ΩúÁî®ÂüüÂÜÖÂêØÁî®‰∏•Ê†ºÊ®°Âºè„ÄÇ Âõ†‰∏∫ÂáΩÊï∞<code>concat</code>ÊòØÂú®ÊâßË°åÁöÑ‰ΩúÁî®Âüü‰∏≠Â£∞ÊòéÁöÑÔºåÊâÄ‰ª•ÂÆÉÁªßÊâø‰∫Ü‰∏•Ê†ºÊ®°Âºè„ÄÇ</p><p>Âçï‰∏™JSÊñá‰ª∂ÂèØËÉΩÂåÖÂê´‰∏•Ê†ºÂíåÈùû‰∏•Ê†ºÊ®°Âºè„ÄÇ Âõ†Ê≠§ÔºåÂØπ‰∫éÁõ∏ÂêåÁöÑË∞ÉÁî®Á±ªÂûãÔºåÂèØ‰ª•Âú®Âçï‰∏™ËÑöÊú¨‰∏≠ÂÖ∑Êúâ‰∏çÂêåÁöÑ‰∏ä‰∏ãÊñáË°å‰∏∫Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function nonStrictSum(a, b) &#123;</span><br><span class="line">  // Èùû‰∏•Ê†ºÊ®°Âºè</span><br><span class="line">  console.log(this === window); // =&gt; true</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;</span><br><span class="line">function strictSum(a, b) &#123;</span><br><span class="line">  &#x27;use strict&#x27;;</span><br><span class="line">  // ÂêØÁî®‰∏•Ê†ºÊ®°Âºè</span><br><span class="line">  console.log(this === undefined); // =&gt; true</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nonStrictSum(5, 6); // =&gt; 11</span><br><span class="line">strictSum(8, 12); // =&gt; 20</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h4 id="2-3-Èô∑Èò±-this-Âú®ÂÜÖÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊó∂ÂÄô"><a href="#2-3-Èô∑Èò±-this-Âú®ÂÜÖÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊó∂ÂÄô" class="headerlink" title="2.3 Èô∑Èò±:this Âú®ÂÜÖÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊó∂ÂÄô"></a>2.3 Èô∑Èò±:<code>this</code> Âú®ÂÜÖÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊó∂ÂÄô</h4><p>ÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰∏Ä‰∏™Â∏∏ËßÅÈô∑Èò±ÊòØÔºåËÆ§‰∏∫<code>this</code>Âú®ÂÜÖÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊÉÖÂÜµ‰∏éÂ§ñÈÉ®ÂáΩÊï∞‰∏≠ÁöÑÊÉÖÂÜµÁõ∏Âêå„ÄÇ</p><p>Ê≠£Á°ÆÂú∞ËØ¥ÔºåÂÜÖÈÉ®ÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÂè™‰æùËµñ‰∫éÂÆÉÁöÑË∞ÉÁî®Á±ªÂûãÔºåËÄå‰∏ç‰æùËµñ‰∫éÂ§ñÈÉ®ÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñá„ÄÇ</p><p>Ë¶ÅÂ∞Ü <code>this</code> ËÆæÁΩÆ‰∏∫ÊâÄÈúÄÁöÑÂÄºÔºåÂèØ‰ª•ÈÄöËøá <code>.call()</code>Êàñ<code>.apply()</code>‰øÆÊîπÂÜÖÈÉ®ÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÊàñ‰ΩøÁî®<code>.bind()</code>ÂàõÂª∫ÁªëÂÆöÂáΩÊï∞„ÄÇ</p><p>‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòØËÆ°ÁÆó‰∏§‰∏™Êï∞ÁöÑÂíåÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     function calculate() &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; false</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     return calculate();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; NaN</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>sum()</code>ÊòØÂØπË±°‰∏äÁöÑÊñπÊ≥ïË∞ÉÁî®ÔºåÊâÄ‰ª•<code>sum</code>‰∏≠ÁöÑ‰∏ä‰∏ãÊñáÊòØ<code>numbers</code>ÂØπË±°„ÄÇ<code>calculate</code>ÂáΩÊï∞ÊòØÂú®<code>sum</code>‰∏≠ÂÆö‰πâÁöÑÔºå‰Ω†ÂèØËÉΩÂ∏åÊúõÂú®<code>calculate()</code>‰∏≠<code>this</code>‰πüË°®Á§∫<code>number</code>ÂØπË±°„ÄÇ</p><p><code>calculate()</code>ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®(‰∏çÊòØÊñπÊ≥ïË∞ÉÁî®)ÔºåÂÆÉÂ∞Ü<code>this</code>‰Ωú‰∏∫ÂÖ®Â±ÄÂØπË±°<code>window</code>(Èùû‰∏•Ê†ºÊ®°‰∏ã)„ÄÇÂç≥‰ΩøÂ§ñÈÉ®ÂáΩÊï∞<code>sum</code>Â∞Ü‰∏ä‰∏ãÊñá‰Ωú‰∏∫<code>number</code>ÂØπË±°ÔºåÂÆÉÂú®<code>calculate</code>ÈáåÈù¢Ê≤°ÊúâÂΩ±Âìç„ÄÇ</p><p><code>sum()</code>ÁöÑË∞ÉÁî®ÁªìÊûúÊòØ<code>NaN</code>Ôºå‰∏çÊòØÈ¢ÑÊúüÁöÑÁªìÊûú<code>5 + 10 = 15</code>ÔºåËøôÈÉΩÊòØÂõ†‰∏∫Ê≤°ÊúâÊ≠£Á°ÆË∞ÉÁî®<code>calculate</code>„ÄÇ</p><p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå<code>calculate</code>ÂáΩÊï∞‰∏≠‰∏ä‰∏ãÊñáÂ∫îËØ•‰∏é <code>sum</code> ‰∏≠ÁöÑ‰∏ÄÊ†∑Ôºå‰ª•‰æøÂèØ‰ª•ËÆøÈóÆ<code>numberA</code>Âíå<code>numberB</code>Â±ûÊÄß„ÄÇ</p><p>‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÊòØÈÄöËøáË∞ÉÁî®<code>calculator.call(this)</code>ÊâãÂä®Â∞Ü<code>calculate</code>‰∏ä‰∏ãÊñáÊõ¥Êîπ‰∏∫ÊâÄÈúÄÁöÑ‰∏ä‰∏ãÊñá„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     function calculate() &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; true</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     // ‰ΩøÁî® .call() ÊñπÊ≥ï‰øÆÊîπ‰∏ä‰∏ãÊñá</span><br><span class="line">     return calculate.call(this);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; 15</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>call(this)</code>ÂÉèÂæÄÂ∏∏‰∏ÄÊ†∑ÊâßË°å<code>calculate</code>ÂáΩÊï∞Ôºå‰ΩÜ <code>call</code> ‰ºöÊää‰∏ä‰∏ãÊñá‰øÆÊîπ‰∏∫ÊåáÂÆö‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÂÄº„ÄÇ</p><p>Áé∞Âú®<code>this.numberA</code> + <code>this.numberB</code>Áõ∏ÂΩì‰∫é<code>numbers.numberA + numbers.numberB</code>„ÄÇ ËØ•ÂáΩÊï∞ËøîÂõûÈ¢ÑÊúüÁªìÊûú<code>5 + 10 = 15</code>„ÄÇ</p><p>Âè¶‰∏ÄÁßçÂ∞±ÊòØ‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">   numberA: 5,</span><br><span class="line">   numberB: 10,</span><br><span class="line">   sum: function() &#123;</span><br><span class="line">     console.log(this === numbers); // =&gt; true</span><br><span class="line">     const calculate = () =&gt; &#123;</span><br><span class="line">       console.log(this === numbers); // =&gt; true</span><br><span class="line">       return this.numberA + this.numberB;</span><br><span class="line">     &#125;</span><br><span class="line">     return calculate();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">numbers.sum(); // =&gt; 15</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h2 id="3-ÊñπÊ≥ïË∞ÉÁî®"><a href="#3-ÊñπÊ≥ïË∞ÉÁî®" class="headerlink" title="3.ÊñπÊ≥ïË∞ÉÁî®"></a>3.ÊñπÊ≥ïË∞ÉÁî®</h2><p>ÊñπÊ≥ïÊòØÂ≠òÂÇ®Âú®ÂØπË±°Â±ûÊÄß‰∏≠ÁöÑÂáΩÊï∞„ÄÇ‰æãÂ¶Ç</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const myObject = &#123;</span><br><span class="line">  // helloFunction ÊòØ‰∏Ä‰∏™ÊñπÊ≥ï</span><br><span class="line">  helloFunction: function() &#123;</span><br><span class="line">    return &#x27;Hello World!&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const message = myObject.helloFunction();</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>helloFunction</code>ÊòØ<code>myObject</code>ÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºåË¶ÅË∞ÉÁî®ËØ•ÊñπÊ≥ïÔºåÂèØ‰ª•ËøôÊ†∑Â≠êË∞ÉÁî® :<code>myObject.helloFunction</code>„ÄÇ</p><p>ÂΩì‰∏Ä‰∏™Ë°®ËææÂºè‰ª•Â±ûÊÄßËÆøÈóÆÁöÑÂΩ¢ÂºèÊâßË°åÊó∂ÔºåÊâßË°åÁöÑÊòØÊñπÊ≥ïË∞ÉÁî®ÔºåÂÆÉÁõ∏ÂΩì‰∫é‰ª•‰∏™ÂáΩÊï∞Êé•ÁùÄ(Ôºå‰∏ÄÁªÑÁî®ÈÄóÂè∑ÂàÜÈöîÁöÑÂèÇÊï∞‰ª•Âèä)„ÄÇ</p><p>Âà©Áî®ÂâçÈù¢ÁöÑ‰æãÂ≠êÔºå<code>myObject.helloFunction()</code>ÊòØÂØπË±°<code>myObject</code>‰∏äÁöÑ‰∏Ä‰∏™<code>helloFunction</code>ÁöÑÊñπÊ≥ïË∞ÉÁî®„ÄÇ<code>[1, 2].join(&#39;,&#39;)</code> Êàñ<code>/\s/.test(&#39;beautiful world&#39;)</code>‰πüË¢´ËÆ§‰∏∫ÊòØÊñπÊ≥ïË∞ÉÁî®„ÄÇ</p><p>Âå∫ÂàÜÂáΩÊï∞Ë∞ÉÁî®ÂíåÊñπÊ≥ïË∞ÉÁî®ÈùûÂ∏∏ÈáçË¶ÅÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊòØ‰∏çÂêåÁöÑÁ±ªÂûã„ÄÇ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÊñπÊ≥ïË∞ÉÁî®ÈúÄË¶Å‰∏Ä‰∏™Â±ûÊÄßËÆøÈóÆÂô®ÂΩ¢ÂºèÊù•Ë∞ÉÁî®ÂáΩÊï∞(<code>obj.myFunc()</code>Êàñ<code>obj[&#39;myFunc&#39;]()</code>)ÔºåËÄåÂáΩÊï∞Ë∞ÉÁî®‰∏çÈúÄË¶Å(<code>myFunc()</code>)„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;Hello&#x27;, &#x27;World&#x27;].join(&#x27;, &#x27;); // ÊñπÊ≥ïË∞ÉÁî®</span><br><span class="line">(&#123; ten: function() &#123; return 10; &#125; &#125;).ten(); // ÊñπÊ≥ïË∞ÉÁî®</span><br><span class="line">const obj = &#123;&#125;;</span><br><span class="line">obj.myFunction = function() &#123;</span><br><span class="line">  return new Date().toString();</span><br><span class="line">&#125;;</span><br><span class="line">obj.myFunction(); // ÊñπÊ≥ïË∞ÉÁî®</span><br><span class="line"></span><br><span class="line">const otherFunction = obj.myFunction;</span><br><span class="line">otherFunction();     // ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">parseFloat(&#x27;16.60&#x27;); // ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">isNaN(0);            // ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÁêÜËß£ÂáΩÊï∞Ë∞ÉÁî®ÂíåÊñπÊ≥ïË∞ÉÁî®‰πãÈó¥ÁöÑÂå∫Âà´ÊúâÂä©‰∫éÊ≠£Á°ÆËØÜÂà´‰∏ä‰∏ãÊñá„ÄÇ</p><h4 id="3-1-ÊñπÊ≥ïË∞ÉÁî®‰∏≠-this-ÊòØËÇø‰πàÊ†∑"><a href="#3-1-ÊñπÊ≥ïË∞ÉÁî®‰∏≠-this-ÊòØËÇø‰πàÊ†∑" class="headerlink" title="3.1 ÊñπÊ≥ïË∞ÉÁî®‰∏≠ this ÊòØËÇø‰πàÊ†∑"></a>3.1 ÊñπÊ≥ïË∞ÉÁî®‰∏≠ this ÊòØËÇø‰πàÊ†∑</h4><blockquote><p>Âú®ÊñπÊ≥ïË∞ÉÁî®‰∏≠Ôºå<code>this</code>ÊòØÊã•ÊúâËøô‰∏™ÊñπÊ≥ïÁöÑÂØπË±°</p></blockquote><p>ÂΩìË∞ÉÁî®ÂØπË±°‰∏äÁöÑÊñπÊ≥ïÊó∂Ôºå<code>this</code>Â∞±ÂèòÊàê‰∫ÜÂØπË±°Êú¨Ë∫´„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884d308092da0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ÔºåËØ•ÂØπË±°Êúâ‰∏Ä‰∏™ÈÄíÂ¢ûÊï∞Â≠óÁöÑÊñπÊ≥ï</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const calc = &#123;</span><br><span class="line">  num: 0,</span><br><span class="line">  increment: function() &#123;</span><br><span class="line">    console.log(this === calc); // =&gt; true</span><br><span class="line">    this.num += 1;</span><br><span class="line">    return this.num;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// method invocation. this is calc</span><br><span class="line">calc.increment(); // =&gt; 1</span><br><span class="line">calc.increment(); // =&gt; 2</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Ë∞ÉÁî®<code>calc.increment()</code>‰Ωø<code>increment</code>ÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÊàê‰∏∫<code>calc</code>ÂØπË±°„ÄÇÊâÄ‰ª•‰ΩøÁî®<code>this.num</code>Êù•Â¢ûÂä†<code>num</code>Â±ûÊÄßÊòØÊúâÊïàÁöÑ„ÄÇ</p><p>ÂÜçÊù•ÁúãÁúãÂè¶‰∏Ä‰∏™‰æãÂ≠ê„ÄÇJSÂØπË±°‰ªéÂéüÂûãÁªßÊâø‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂΩìÂú®ÂØπË±°‰∏äË∞ÉÁî®ÁªßÊâøÁöÑÊñπÊ≥ïÊó∂ÔºåË∞ÉÁî®ÁöÑ‰∏ä‰∏ãÊñá‰ªçÁÑ∂ÊòØÂØπË±°Êú¨Ë∫´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const myDog = Object.create(&#123;</span><br><span class="line">  sayName: function() &#123;</span><br><span class="line">     console.log(this === myDog); // =&gt; true</span><br><span class="line">     return this.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myDog.name = &#x27;Milo&#x27;;</span><br><span class="line">// ÊñπÊ≥ïË∞ÉÁî® this ÊåáÂêë myDog</span><br><span class="line">myDog.sayName(); // =&gt; &#x27;Milo&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>Object.create()</code>ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂØπË±°<code>myDog</code>ÔºåÂπ∂Ê†πÊçÆÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ËÆæÁΩÆÂÖ∂ÂéüÂûã„ÄÇ<code>myDog</code>ÂØπË±°ÁªßÊâø<code>sayName</code>ÊñπÊ≥ï„ÄÇ</p><p>ÊâßË°å<code>myDog. sayname()</code>Êó∂Ôºå<code>myDog</code>ÊòØË∞ÉÁî®ÁöÑ‰∏ä‰∏ãÊñá„ÄÇ</p><p>Âú®EC6 <code>class</code> ËØ≠Ê≥ï‰∏≠ÔºåÊñπÊ≥ïË∞ÉÁî®‰∏ä‰∏ãÊñá‰πüÊòØÂÆû‰æãÊú¨Ë∫´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Planet &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this.name = name;    </span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    console.log(this === earth); // =&gt; true</span><br><span class="line">    return this.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var earth = new Planet(&#x27;Earth&#x27;);</span><br><span class="line">// method invocation. the context is earth</span><br><span class="line">earth.getName(); // =&gt; &#x27;Earth&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h4 id="3-2-Èô∑Èò±-Â∞ÜÊñπÊ≥ï‰∏éÂÖ∂ÂØπË±°ÂàÜÁ¶ª"><a href="#3-2-Èô∑Èò±-Â∞ÜÊñπÊ≥ï‰∏éÂÖ∂ÂØπË±°ÂàÜÁ¶ª" class="headerlink" title="3.2 Èô∑Èò±:Â∞ÜÊñπÊ≥ï‰∏éÂÖ∂ÂØπË±°ÂàÜÁ¶ª"></a>3.2 Èô∑Èò±:Â∞ÜÊñπÊ≥ï‰∏éÂÖ∂ÂØπË±°ÂàÜÁ¶ª</h4><p>ÊñπÊ≥ïÂèØ‰ª•‰ªéÂØπË±°‰∏≠ÊèêÂèñÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂèòÈáè<code>const alone = myObj.myMethod</code>„ÄÇÂΩìÊñπÊ≥ïÂçïÁã¨Ë∞ÉÁî®Êó∂Ôºå‰∏éÂéüÂßãÂØπË±°<code>alone()</code>ÂàÜÁ¶ªÔºå‰Ω†ÂèØËÉΩËÆ§‰∏∫ÂΩìÂâçÁöÑ<code>this</code>Â∞±ÊòØÂÆö‰πâÊñπÊ≥ïÁöÑÂØπË±°<code>myObject</code>„ÄÇ</p><p>Â¶ÇÊûúÊñπÊ≥ïÂú®Ê≤°ÊúâÂØπË±°ÁöÑÊÉÖÂÜµ‰∏ãË∞ÉÁî®ÔºåÈÇ£‰πàÂáΩÊï∞Ë∞ÉÁî®Â∞±‰ºöÂèëÁîüÔºåÊ≠§Êó∂ÁöÑ<code>this</code>ÊåáÂêëÂÖ®Â±ÄÂØπË±°<code>window</code>‰∏•Ê†ºÊ®°Âºè‰∏ãÊòØ<code>undefined</code>„ÄÇ</p><p>‰∏ãÈù¢ÁöÑÁ§∫‰æãÂÆö‰πâ‰∫Ü<code>Animal</code>ÊûÑÈÄ†ÂáΩÊï∞Âπ∂ÂàõÂª∫‰∫ÜÂÆÉÁöÑ‰∏Ä‰∏™ÂÆû‰æã:<code>myCat</code>„ÄÇÁÑ∂Âêé<code>setTimout()</code>Âú®1ÁßíÂêéÊâìÂç∞<code>myCat</code>ÂØπË±°‰ø°ÊÅØ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = function() &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; false</span><br><span class="line">    console.log(&#x27;The &#x27; + this.type + &#x27; has &#x27; + this.legs + &#x27; legs&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&#x27;Cat&#x27;, 4);</span><br><span class="line">// The undefined has undefined legs</span><br><span class="line">setTimeout(myCat.logInfo, 1000);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>‰Ω†ÂèØËÉΩËÆ§‰∏∫<code>setTimout</code>Ë∞ÉÁî®<code>myCat.loginfo()</code>Êó∂ÔºåÂÆÉÂ∫îËØ•ÊâìÂç∞ÂÖ≥‰∫é<code>myCat</code>ÂØπË±°ÁöÑ‰ø°ÊÅØ„ÄÇ</p><p>‰∏çÂπ∏ÁöÑÊòØÔºåÊñπÊ≥ïÂú®‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÊó∂‰∏éÂØπË±°ÊòØÂàÜÁ¶ªÔºå<code>setTimout(myCat.logInfo)</code>‰ª•‰∏ãÊÉÖÂÜµÊòØÁ≠âÊïàÁöÑÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimout(myCat.logInfo);</span><br><span class="line">// Á≠â‰ª∑‰∫é</span><br><span class="line">const extractedLogInfo = myCat.logInfo;</span><br><span class="line">setTimout(extractedLogInfo);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Â∞ÜÂàÜÁ¶ªÁöÑ<code>logInfo</code>‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ôºå<code>this</code>ÊòØÂÖ®Â±Ä <code>window</code>,ÊâÄ‰ª•ÂØπË±°‰ø°ÊÅØÊ≤°ÊúâÊ≠£Á°ÆÂú∞ÊâìÂç∞„ÄÇ</p><p>ÂáΩÊï∞ÂèØ‰ª•‰ΩøÁî®<code>.bind()</code>ÊñπÊ≥ï‰∏éÂØπË±°ÁªëÂÆö,Â∞±ÂèØ‰ª•Ëß£ÂÜ≥ <code>this</code> ÊåáÂêëÁöÑÈóÆÈ¢ò„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = function() &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; true</span><br><span class="line">    console.log(&#x27;The &#x27; + this.type + &#x27; has &#x27; + this.legs + &#x27; legs&#x27;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&#x27;Cat&#x27;, 4);</span><br><span class="line">// logs &quot;The Cat has 4 legs&quot;</span><br><span class="line">setTimeout(myCat.logInfo.bind(myCat), 1000);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>myCat.logInfo.bind(myCat)</code>ËøîÂõû‰∏Ä‰∏™Êñ∞ÂáΩÊï∞ÔºåÂÆÉÁöÑÊâßË°åÊñπÂºè‰∏é<code>logInfo</code>ÂÆåÂÖ®Áõ∏ÂêåÔºå‰ΩÜÊòØÊ≠§Êó∂ÁöÑ <code>this</code> ÊåáÂêë <code>myCat</code>ÔºåÂç≥‰ΩøÂú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠‰πüÊòØÂ¶ÇÊ≠§„ÄÇ</p><p>Âè¶‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÊòØÂ∞Ü<code>logInfo()</code>ÊñπÊ≥ïÂÆö‰πâ‰∏∫‰∏Ä‰∏™ÁÆ≠Â§¥ÂáΩÊï∞Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Animal(type, legs) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.legs = legs;  </span><br><span class="line">  this.logInfo = () =&gt; &#123;</span><br><span class="line">    console.log(this === myCat); // =&gt; true</span><br><span class="line">    console.log(&#x27;The &#x27; + this.type + &#x27; has &#x27; + this.legs + &#x27; legs&#x27;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">const myCat = new Animal(&#x27;Cat&#x27;, 4);</span><br><span class="line">// logs &quot;The Cat has 4 legs&quot;</span><br><span class="line">setTimeout(myCat.logInfo, 1000);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h2 id="4-ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®"><a href="#4-ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®" class="headerlink" title="4. ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®"></a>4. ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®</h2><p>ÂΩì<code>new</code>ÂÖ≥ÈîÆËØçÁ¥ßÊé•ÁùÄÂáΩÊï∞ÂØπË±°,(,‰∏ÄÁªÑÈÄóÂè∑ÂàÜÈöîÁöÑÂèÇÊï∞‰ª•Âèä)Êó∂Ë¢´Ë∞ÉÁî®ÔºåÊâßË°åÁöÑÊòØÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®Â¶Ç<code>new RegExp(&#39;\\d&#39;)</code>„ÄÇ</p><p>Â£∞Êòé‰∫Ü‰∏Ä‰∏™<code>Country</code>ÂáΩÊï∞ÔºåÂπ∂‰∏îÂ∞ÜÂÆÉ‰Ωú‰∏∫‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Country(name, traveled) &#123;</span><br><span class="line">   this.name = name ? name : &#x27;United Kingdom&#x27;;</span><br><span class="line">   this.traveled = Boolean(traveled);</span><br><span class="line">&#125;</span><br><span class="line">Country.prototype.travel = function() &#123;</span><br><span class="line">  this.traveled = true;</span><br><span class="line">&#125;;</span><br><span class="line">// ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">const france = new Country(&#x27;France&#x27;, false);</span><br><span class="line">// ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">const unitedKingdom = new Country;</span><br><span class="line"></span><br><span class="line">france.travel(); // Travel to France</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>new Country(&#39;France&#39;, false)</code>ÊòØ<code>Country</code>ÂáΩÊï∞ÁöÑÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®„ÄÇÂÆÉÁöÑÊâßË°åÁªìÊûúÊòØ‰∏Ä‰∏™<code>name</code>Â±ûÊÄß‰∏∫<code>&#39;France&#39;</code>ÁöÑÊñ∞ÁöÑÂØπË±°„ÄÇ Â¶ÇÊûúËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®Êó∂‰∏çÈúÄË¶ÅÂèÇÊï∞ÔºåÈÇ£‰πàÊã¨Âè∑ÂèØ‰ª•ÁúÅÁï•Ôºö<code>new Country</code>„ÄÇ</p><p>‰ªéES6ÂºÄÂßãÔºåJS ÂÖÅËÆ∏Áî®<code>class</code>ÂÖ≥ÈîÆËØçÊù•ÂÆö‰πâÊûÑÈÄ†ÂáΩÊï∞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class City &#123;</span><br><span class="line">  constructor(name, traveled) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.traveled = false;</span><br><span class="line">  &#125;</span><br><span class="line">  travel() &#123;</span><br><span class="line">    this.traveled = true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const paris = new City(&#x27;Paris&#x27;, false);</span><br><span class="line">paris.travel();</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>new City(&#39;Paris&#39;)</code>ÊòØÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®„ÄÇËøô‰∏™ÂØπË±°ÁöÑÂàùÂßãÂåñÁî±Ëøô‰∏™Á±ª‰∏≠‰∏Ä‰∏™ÁâπÊÆäÁöÑÊñπÊ≥ï<code>constructor</code>Êù•Â§ÑÁêÜ„ÄÇÂÖ∂‰∏≠Ôºå<code>this</code>ÊåáÂêëÊñ∞ÂàõÂª∫ÁöÑÂØπË±°„ÄÇ</p><p>ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÁ©∫ÁöÑÂØπË±°ÔºåÂÆÉ‰ªéÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂéüÂûãÁªßÊâø‰∫ÜÂ±ûÊÄß„ÄÇÊûÑÈÄ†ÂáΩÊï∞ÁöÑ‰ΩúÁî®Â∞±ÊòØÂéªÂàùÂßãÂåñËøô‰∏™ÂØπË±°„ÄÇ ÂèØËÉΩ‰Ω†Â∑≤ÁªèÁü•ÈÅì‰∫ÜÔºåÂú®ËøôÁßçÁ±ªÂûãÁöÑË∞ÉÁî®‰∏≠Ôºå‰∏ä‰∏ãÊñáÊåáÂêëÊñ∞ÂàõÂª∫ÁöÑÂÆû‰æã„ÄÇ</p><p>ÂΩìÂ±ûÊÄßËÆøÈóÆ<code>myObject.myFunction</code>ÂâçÈù¢Êúâ‰∏Ä‰∏™<code>new</code>ÂÖ≥ÈîÆËØçÊó∂ÔºåJS‰ºöÊâßË°åÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ËÄå‰∏çÊòØÂéüÊù•ÁöÑÊñπÊ≥ïË∞ÉÁî®„ÄÇ</p><p>‰æãÂ¶Ç<code>new myObject.myFunction()</code>ÔºöÂÆÉÁõ∏ÂΩì‰∫éÂÖàÁî®Â±ûÊÄßËÆøÈóÆÊääÊñπÊ≥ïÊèêÂèñÂá∫Êù•<code>extractedFunction = myObject.myFunction</code>ÔºåÁÑ∂ÂêéÂà©Áî®ÊääÂÆÉ‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°Ôºö <code>new extractedFunction()</code>„ÄÇ</p><h2 id="4-1-ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ-this"><a href="#4-1-ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ-this" class="headerlink" title="4.1. ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ this"></a>4.1. ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ this</h2><blockquote><p>Âú®ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ this ÊåáÂêëÊñ∞ÂàõÂª∫ÁöÑÂØπË±°</p></blockquote><p>ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰∏ä‰∏ãÊñáÊòØÊñ∞ÂàõÂª∫ÁöÑÂØπË±°„ÄÇÂÆÉÂà©Áî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂèÇÊï∞ÂàùÂßãÂåñÊñ∞ÁöÑÂØπË±°ÔºåËÆæÂÆöÂ±ûÊÄßÁöÑÂàùÂßãÂÄºÔºåÊ∑ªÂä†‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞Á≠âÁ≠â„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884d774863ecb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>Êù•ÁúãÁúã‰∏ãÈù¢Á§∫‰æã‰∏≠ÁöÑ‰∏ä‰∏ãÊñá</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Foo () &#123;</span><br><span class="line">  console.log(this instanceof Foo); // =&gt; true</span><br><span class="line">  this.property = &#x27;Default Value&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const fooInstance = new Foo();</span><br><span class="line">fooInstance.property; // =&gt; &#x27;Default Value&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>new Foo()</code> Ê≠£Âú®ËøõË°åÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÔºåÂÖ∂‰∏≠‰∏ä‰∏ãÊñáÊòØ<code>fooInstance</code>„ÄÇ Âú®<code>Foo</code>ÂÜÖÈÉ®ÂàùÂßãÂåñÂØπË±°Ôºö<code>this.property</code>Ë¢´ËµãÂÄº‰∏∫ÈªòËÆ§ÂÄº„ÄÇ</p><p>ÂêåÊ†∑ÁöÑÊÉÖÂÜµÂú®Áî®<code>class</code>ËØ≠Ê≥ïÔºà‰ªéES6Ëµ∑ÔºâÊó∂‰πü‰ºöÂèëÁîüÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´ÊòØÂàùÂßãÂåñÂú®<code>constructor</code>ÊñπÊ≥ï‰∏≠ËøõË°å:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Bar &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    console.log(this instanceof Bar); // =&gt; true</span><br><span class="line">    this.property = &#x27;Default Value&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const barInstance = new Bar();</span><br><span class="line">barInstance.property; // =&gt; &#x27;Default Value&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h4 id="4-2-Èô∑Èò±-Âøò‰∫Ü‰ΩøÁî®-new"><a href="#4-2-Èô∑Èò±-Âøò‰∫Ü‰ΩøÁî®-new" class="headerlink" title="4.2. Èô∑Èò±: Âøò‰∫Ü‰ΩøÁî® new"></a>4.2. Èô∑Èò±: Âøò‰∫Ü‰ΩøÁî® new</h4><p>Êúâ‰∫õJSÂáΩÊï∞‰∏çÊòØÂè™Âú®‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâçÂàõÂª∫Êñ∞ÁöÑÂØπË±°Ôºå‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂‰πü‰ºöÔºå‰æãÂ¶Ç<code>RegExp</code>Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var reg1 = new RegExp(&#x27;\\w+&#x27;);</span><br><span class="line">var reg2 = RegExp(&#x27;\\w+&#x27;);</span><br><span class="line"></span><br><span class="line">reg1 instanceof RegExp;      // =&gt; true</span><br><span class="line">reg2 instanceof RegExp;      // =&gt; true</span><br><span class="line">reg1.source === reg2.source; // =&gt; true</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÂΩìÊâßË°åÁöÑ <code>new RegExp(&#39;\\w+&#39;)</code>Âíå<code>RegExp(&#39;\\w+&#39;)</code>Êó∂ÔºåJS ‰ºöÂàõÂª∫Á≠â‰ª∑ÁöÑÊ≠£ÂàôË°®ËææÂºèÂØπË±°„ÄÇ</p><p>‰ΩøÁî®ÂáΩÊï∞Ë∞ÉÁî®Êù•ÂàõÂª∫ÂØπË±°Â≠òÂú®‰∏Ä‰∏™ÊΩúÂú®ÁöÑÈóÆÈ¢ò(‰∏çÂåÖÊã¨Â∑•ÂéÇÊ®°Âºè)ÔºåÂõ†‰∏∫‰∏Ä‰∫õÊûÑÈÄ†ÂáΩÊï∞ÂèØËÉΩ‰ºöÂøΩÁï•Âú®Áº∫Â∞ë<code>new</code>ÂÖ≥ÈîÆÂ≠óÊó∂ÂàùÂßãÂåñÂØπË±°ÁöÑÈÄªËæë„ÄÇ</p><p>‰∏ãÈù¢ÁöÑ‰æãÂ≠êËØ¥Êòé‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Vehicle(type, wheelsCount) &#123;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.wheelsCount = wheelsCount;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">// ÂøòËÆ∞‰ΩøÁî® new</span><br><span class="line">const car = Vehicle(&#x27;Car&#x27;, 4);</span><br><span class="line">car.type;       // =&gt; &#x27;Car&#x27;</span><br><span class="line">car.wheelsCount // =&gt; 4</span><br><span class="line">car === window  // =&gt; true</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>Vehicle</code>ÊòØ‰∏Ä‰∏™Âú®‰∏ä‰∏ãÊñáÂØπË±°‰∏äËÆæÁΩÆ<code>type</code>Âíå<code>wheelsCount</code>Â±ûÊÄßÁöÑÂáΩÊï∞„ÄÇ</p><p>ÂΩìÊâßË°å<code>Vehicle(&#39;Car&#39;Ôºå 4)</code>Êó∂ÔºåËøîÂõû‰∏Ä‰∏™ÂØπË±°<code>Car</code>ÔºåÂÆÉÂÖ∑ÊúâÊ≠£Á°ÆÁöÑÂ±ûÊÄß:<code>Car.type</code> ‰∏∫ <code>Car</code>Âíå<code>Car.wheelsCount</code> ‰∏∫<code>4</code>Ôºå‰Ω†ÂèØËÉΩËÆ§‰∏∫ÂÆÉÂæàÈÄÇÂêàÂàõÂª∫ÂíåÂàùÂßãÂåñÊñ∞ÂØπË±°„ÄÇ</p><p>ÁÑ∂ËÄåÔºåÂú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠Ôºå<code>this</code>ÊòØ<code>window</code>ÂØπË±° ÔºåÂõ†Ê≠§ <code>VehicleÔºà&#39;Car&#39;Ôºå4Ôºâ</code>Âú® <code>window</code> ÂØπË±°‰∏äËÆæÁΩÆÂ±ûÊÄß„ÄÇ ÊòæÁÑ∂ËøôÊòØÈîôËØØÔºåÂÆÉÂπ∂Ê≤°ÊúâÂàõÂª∫Êñ∞ÂØπË±°„ÄÇ</p><p>ÂΩì‰Ω†Â∏åÊúõË∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÁ°Æ‰øù‰Ω†‰ΩøÁî®‰∫Ü<code>new</code>Êìç‰ΩúÁ¨¶Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Vehicle(type, wheelsCount) &#123;</span><br><span class="line">  if (!(this instanceof Vehicle)) &#123;</span><br><span class="line">    throw Error(&#x27;Error: Incorrect invocation&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.type = type;</span><br><span class="line">  this.wheelsCount = wheelsCount;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">// Constructor invocation</span><br><span class="line">const car = new Vehicle(&#x27;Car&#x27;, 4);</span><br><span class="line">car.type               // =&gt; &#x27;Car&#x27;</span><br><span class="line">car.wheelsCount        // =&gt; 4</span><br><span class="line">car instanceof Vehicle // =&gt; true</span><br><span class="line"></span><br><span class="line">// Function invocation. Throws an error.</span><br><span class="line">const brokenCar = Vehicle(&#x27;Broken Car&#x27;, 3);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>new Vehicle(&#39;Car&#39;Ôºå4)</code> ËøêË°åÊ≠£Â∏∏ÔºöÂàõÂª∫Âπ∂ÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞ÂØπË±°ÔºåÂõ†‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®‰∏≠Êó∂‰ΩøÁî®‰∫Ü<code>new</code>ÂÖ≥ÈîÆÂ≠ó„ÄÇ</p><p>Âú®ÊûÑÈÄ†ÂáΩÊï∞ÈáåÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™È™åËØÅ<code>this instanceof Vehicle</code>Êù•Á°Æ‰øùÊâßË°åÁöÑ‰∏ä‰∏ãÊñáÊòØÊ≠£Á°ÆÁöÑÂØπË±°Á±ªÂûã„ÄÇÂ¶ÇÊûú<code>this</code>‰∏çÊòØ<code>Vehicle</code>ÔºåÈÇ£‰πàÂ∞±‰ºöÊä•Èîô„ÄÇËøôÊ†∑ÔºåÂ¶ÇÊûúÊâßË°å<code>Vehicle(&#39;Broken Car&#39;, 3)</code>(Ê≤°Êúâ<code>new</code>)ÔºåÊàë‰ª¨‰ºöÂæóÂà∞‰∏Ä‰∏™ÂºÇÂ∏∏Ôºö<code>Error: Incorrect invocation</code>„ÄÇ</p><h2 id="5-ÈöêÂºèË∞ÉÁî®"><a href="#5-ÈöêÂºèË∞ÉÁî®" class="headerlink" title="5. ÈöêÂºèË∞ÉÁî®"></a>5. ÈöêÂºèË∞ÉÁî®</h2><p>‰ΩøÁî®<code>myFun.call()</code>Êàñ<code>myFun.apply()</code>ÊñπÊ≥ïË∞ÉÁî®ÂáΩÊï∞Êó∂ÔºåÊâßË°åÁöÑÊòØÈöêÂºèË∞ÉÁî®„ÄÇ</p><p>JS‰∏≠ÁöÑÂáΩÊï∞ÊòØÁ¨¨‰∏ÄÁ±ªÂØπË±°ÔºåËøôÊÑèÂë≥ÁùÄÂáΩÊï∞Â∞±ÊòØÂØπË±°ÔºåÂØπË±°ÁöÑÁ±ªÂûã‰∏∫<code>Function</code>„ÄÇ‰ªéÂáΩÊï∞ÂØπË±°ÁöÑÊñπÊ≥ïÂàóË°®‰∏≠Ôºå<code>.call()</code>Âíå<code>.apply()</code>Áî®‰∫éË∞ÉÁî®ÂÖ∑ÊúâÂèØÈÖçÁΩÆ‰∏ä‰∏ãÊñáÁöÑÂáΩÊï∞„ÄÇ</p><ul><li>ÊñπÊ≥ï <code>.call(thisArg[, arg1[, arg2[, ...]]])</code>Â∞ÜÊé•ÂèóÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞<code>thisArg</code>‰Ωú‰∏∫Ë∞ÉÁî®Êó∂ÁöÑ‰∏ä‰∏ãÊñáÔºå<code>arg1, arg2, ...</code>Ëøô‰∫õÂàô‰Ωú‰∏∫ÂèÇÊï∞‰º†ÂÖ•Ë¢´Ë∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ</li><li>ÊñπÊ≥ï<code>.apply(thisArg, [args])</code>Â∞ÜÊé•ÂèóÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞<code>thisArg</code>‰Ωú‰∏∫Ë∞ÉÁî®Êó∂ÁöÑ‰∏ä‰∏ãÊñáÔºåÂπ∂‰∏îÊé•ÂèóÂè¶‰∏Ä‰∏™Á±ª‰ººÊï∞ÁªÑÁöÑÂØπË±°<code>[arg1, arg2, ...]</code>‰Ωú‰∏∫Ë¢´Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÂèÇÊï∞‰º†ÂÖ•„ÄÇ</li></ul><p>‰∏ãÈù¢ÊòØÈöêÂºèË∞ÉÁî®ÁöÑ‰æãÂ≠ê</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function increment(number) &#123;</span><br><span class="line">  return ++number;  </span><br><span class="line">&#125;</span><br><span class="line">increment.call(undefined, 10);    // =&gt; 11</span><br><span class="line">increment.apply(undefined, [10]); // =&gt; 11</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>increment.call()</code>Âíå<code>increment.apply()</code>ÈÉΩÁî®ÂèÇÊï∞<code>10</code>Ë∞ÉÁî®‰∫ÜËøô‰∏™Ëá™Â¢ûÂáΩÊï∞„ÄÇ</p><p>‰∏§ËÄÖÁöÑÂå∫Âà´ÊòØ<code>.call()</code>Êé•Âèó‰∏ÄÁªÑÂèÇÊï∞Ôºå‰æãÂ¶Ç<code>myFunction.call(thisValue, &#39;value1&#39;, &#39;value2&#39;)</code>„ÄÇËÄå<code>.apply()</code>Êé•ÂèóÁöÑ‰∏ÄÁªÑÂèÇÊï∞ÂøÖÈ°ªÊòØ‰∏Ä‰∏™Á±ª‰ººÊï∞ÁªÑÁöÑÂØπË±°Ôºå‰æãÂ¶Ç<code>myFunction.apply(thisValue, [&#39;value1&#39;, &#39;value2&#39;]</code>)„ÄÇ</p><h4 id="5-1-ÈöêÂºèË∞ÉÁî®‰∏≠ÁöÑthis"><a href="#5-1-ÈöêÂºèË∞ÉÁî®‰∏≠ÁöÑthis" class="headerlink" title="5.1. ÈöêÂºèË∞ÉÁî®‰∏≠ÁöÑthis"></a>5.1. ÈöêÂºèË∞ÉÁî®‰∏≠ÁöÑthis</h4><blockquote><p>Âú®ÈöêÂºèË∞ÉÁî®.call()Êàñ.apply()‰∏≠ÔºåthisÊòØÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞</p></blockquote><p>ÂæàÊòéÊòæÔºåÂú®ÈöêÂºèË∞ÉÁî®‰∏≠Ôºå<code>this</code>‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰º†ÈÄíÁªô<code>.call()</code>Êàñ<code>.apply()</code>„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var rabbit = &#123; name: &#x27;White Rabbit&#x27; &#125;;</span><br><span class="line">function concatName(string) &#123;</span><br><span class="line">  console.log(this === rabbit); // =&gt; true</span><br><span class="line">  return string + this.name;</span><br><span class="line">&#125;</span><br><span class="line">concatName.call(rabbit, &#x27;Hello &#x27;);  // =&gt; &#x27;Hello White Rabbit&#x27;</span><br><span class="line">concatName.apply(rabbit, [&#x27;Bye &#x27;]); // =&gt; &#x27;Bye White Rabbit&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÂΩìÂ∫îËØ•‰ΩøÁî®ÁâπÂÆö‰∏ä‰∏ãÊñáÊâßË°åÂáΩÊï∞Êó∂ÔºåÈöêÂºèË∞ÉÁî®ÈùûÂ∏∏ÊúâÁî®„ÄÇ‰æãÂ¶Ç‰∏∫‰∫ÜËß£ÂÜ≥ÊñπÊ≥ïË∞ÉÁî®Êó∂Ôºå<code>this</code>ÊÄªÊòØ<code>window</code>Êàñ‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑ<code>undefined</code>ÁöÑ‰∏ä‰∏ãÊñáÈóÆÈ¢ò„ÄÇÈöêÂºèË∞ÉÁî®ÂèØ‰ª•Áî®‰∫éÊ®°ÊãüÂú®‰∏Ä‰∏™ÂØπË±°‰∏äË∞ÉÁî®Êüê‰∏™ÊñπÊ≥ï„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function Runner(name) &#123;</span><br><span class="line">  console.log(this instanceof Rabbit); // =&gt; true</span><br><span class="line">  this.name = name;  </span><br><span class="line">&#125;</span><br><span class="line">function Rabbit(name, countLegs) &#123;</span><br><span class="line">  console.log(this instanceof Rabbit); // =&gt; true</span><br><span class="line">  Runner.call(this, name);</span><br><span class="line">  this.countLegs = countLegs;</span><br><span class="line">&#125;</span><br><span class="line">const myRabbit = new Rabbit(&#x27;White Rabbit&#x27;, 4);</span><br><span class="line">myRabbit; // &#123; name: &#x27;White Rabbit&#x27;, countLegs: 4 &#125;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>Rabbit</code>‰∏≠ÁöÑ<code>Runner.call(this, name)</code>ÈöêÂºèË∞ÉÁî®‰∫ÜÁà∂Á±ªÁöÑÂáΩÊï∞Êù•ÂàùÂßãÂåñËøô‰∏™ÂØπË±°„ÄÇ</p><h2 id="6-ÁªëÂÆöÂáΩÊï∞"><a href="#6-ÁªëÂÆöÂáΩÊï∞" class="headerlink" title="6. ÁªëÂÆöÂáΩÊï∞"></a>6. ÁªëÂÆöÂáΩÊï∞</h2><p>ÁªëÂÆöÂáΩÊï∞ÊòØ‰∏éÂØπË±°ËøûÊé•ÁöÑÂáΩÊï∞„ÄÇÈÄöÂ∏∏‰ΩøÁî®<code>.bind()</code>ÊñπÊ≥ï‰ªéÂéüÂßãÂáΩÊï∞ÂàõÂª∫„ÄÇÂéüÂßãÂáΩÊï∞ÂíåÁªëÂÆöÂáΩÊï∞ÂÖ±‰∫´Áõ∏ÂêåÁöÑ‰ª£Á†ÅÂíå‰ΩúÁî®ÂüüÔºå‰ΩÜÊâßË°åÊó∂‰∏ä‰∏ãÊñá‰∏çÂêå„ÄÇ</p><p>ÊñπÊ≥ï <code>myFunc.bind(thisArg[, arg1[, arg2[, ...]]])</code>Êé•ÂèóÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞<code>thisArg</code>‰Ωú‰∏∫ÁªëÂÆöÂáΩÊï∞ÊâßË°åÊó∂ÁöÑ‰∏ä‰∏ãÊñáÔºåÂπ∂‰∏îÂÆÉÊé•Âèó‰∏ÄÁªÑÂèØÈÄâÁöÑÂèÇÊï∞ <code>arg1, arg2, ...</code>‰Ωú‰∏∫Ë¢´Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇÂÆÉËøîÂõû‰∏Ä‰∏™ÁªëÂÆö‰∫Ü<code>thisArg</code>ÁöÑÊñ∞ÂáΩÊï∞„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function multiply(number) &#123;</span><br><span class="line">  &#x27;use strict&#x27;;</span><br><span class="line">  return this * number;</span><br><span class="line">&#125;</span><br><span class="line">const double = multiply.bind(2);</span><br><span class="line"></span><br><span class="line">double(3);  // =&gt; 6</span><br><span class="line">double(10); // =&gt; 20</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>bind(2)</code>ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂáΩÊï∞ÂØπË±°<code>double</code>Ôºå<code>double</code> ÁªëÂÆö‰∫ÜÊï∞Â≠ó<code>2</code>„ÄÇ<code>multiply</code>Âíå<code>double</code>ÂÖ∑ÊúâÁõ∏ÂêåÁöÑ‰ª£Á†ÅÂíå‰ΩúÁî®Âüü„ÄÇ</p><p>‰∏é<code>.apply()</code>Âíå<code>.call()</code> ÊñπÊ≥ïÁõ∏ÂèçÔºåÂÆÉ‰∏ç‰ºöÁ´ãÂç≥Ë∞ÉÁî®ËØ•ÂáΩÊï∞Ôºå<code>.bind()</code>ÊñπÊ≥ïÂè™ËøîÂõû‰∏Ä‰∏™Êñ∞ÂáΩÊï∞ÔºåÂú®‰πãÂêéË¢´Ë∞ÉÁî®ÔºåÂè™ÊòØthis<code>Â∑≤Áªè</code>Ë¢´ÊèêÂâçËÆæÁΩÆÂ•Ω‰∫Ü„ÄÇ</p><h4 id="6-1-ÁªëÂÆöÂáΩÊï∞‰∏≠ÁöÑthis"><a href="#6-1-ÁªëÂÆöÂáΩÊï∞‰∏≠ÁöÑthis" class="headerlink" title="6.1. ÁªëÂÆöÂáΩÊï∞‰∏≠ÁöÑthis"></a>6.1. ÁªëÂÆöÂáΩÊï∞‰∏≠ÁöÑthis</h4><blockquote><p>Âú®Ë∞ÉÁî®ÁªëÂÆöÂáΩÊï∞Êó∂Ôºå<code>this</code>ÊòØ<code>.bind()</code>ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ</p></blockquote><p><code>.bind()</code>ÁöÑ‰ΩúÁî®ÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂáΩÊï∞ÔºåË∞ÉÁî®ËØ•ÂáΩÊï∞Êó∂ÔºåÂ∞Ü‰∏ä‰∏ãÊñá‰Ωú‰∏∫‰º†ÈÄíÁªô<code>.bind()</code>ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞„ÄÇÂÆÉÊòØ‰∏ÄÁßçÂº∫Â§ßÁöÑÊäÄÊúØÔºå‰ΩøÂí±‰ª¨ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ÂÆö‰πâ‰∫Ü<code>this</code>ÂÄºÁöÑÂáΩÊï∞„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884dceeb04418?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>Êù•ÁúãÁúãÔºåÂ¶Ç‰ΩïÂú®Â¶Ç‰ΩïÂú®ÁªëÂÆöÂáΩÊï∞ËÆæÁΩÆ <code>this</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const numbers = &#123;</span><br><span class="line">  array: [3, 5, 10],</span><br><span class="line">  getNumbers: function() &#123;</span><br><span class="line">    return this.array;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const boundGetNumbers = numbers.getNumbers.bind(numbers);</span><br><span class="line">boundGetNumbers(); // =&gt; [3, 5, 10]</span><br><span class="line">// Extract method from object</span><br><span class="line">const simpleGetNumbers = numbers.getNumbers;</span><br><span class="line">simpleGetNumbers(); // =&gt; undefined (‰∏•Ê†ºÊ®°Âºè‰∏ãÊä•Èîô)</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>numbers.getNumbers.bind(numbers)</code>ËøîÂõûÁªëÂÆö<code>numbers</code>ÂØπË±°<code>boundGetNumbers</code>ÂáΩÊï∞„ÄÇ<code>boundGetNumbers()</code>Ë∞ÉÁî®Êó∂ÁöÑ<code>this</code>ÊòØ<code>number</code>ÂØπË±°ÔºåÂπ∂ËÉΩÂ§üËøîÂõûÊ≠£Á°ÆÁöÑÊï∞ÁªÑÂØπË±°„ÄÇ</p><p>ÂèØ‰ª•Â∞ÜÂáΩÊï∞<code>numbers.getNumbers</code>ÊèêÂèñÂà∞ÂèòÈáè<code>simpleGetNumbers</code>‰∏≠ËÄå‰∏çËøõË°åÁªëÂÆö„ÄÇÂú®‰πãÂêéÁöÑÂáΩÊï∞Ë∞ÉÁî®‰∏≠<code>simpleGetNumbers()</code>ÁöÑ<code>this</code>ÊòØ<code>window</code>(‰∏•Ê†ºÊ®°Âºè‰∏ã‰∏∫<code>undefined</code>)Ôºå‰∏çÊòØ<code>number</code>ÂØπË±°„ÄÇÂú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÔºå<code>simpleGetNumbers()</code>‰∏ç‰ºöÊ≠£Á°ÆËøîÂõûÊï∞ÁªÑ„ÄÇ</p><h4 id="6-2-Á¥ßÂØÜÁöÑ‰∏ä‰∏ãÊñáÁªëÂÆö"><a href="#6-2-Á¥ßÂØÜÁöÑ‰∏ä‰∏ãÊñáÁªëÂÆö" class="headerlink" title="6.2 Á¥ßÂØÜÁöÑ‰∏ä‰∏ãÊñáÁªëÂÆö"></a>6.2 Á¥ßÂØÜÁöÑ‰∏ä‰∏ãÊñáÁªëÂÆö</h4><p><code>.bind()</code>ÂàõÂª∫‰∏Ä‰∏™Ê∞∏‰πÖÁöÑ‰∏ä‰∏ãÊñáÈìæÊé•ÔºåÂπ∂ÂßãÁªà‰øùÊåÅÂÆÉ„ÄÇ ‰∏Ä‰∏™ÁªëÂÆöÂáΩÊï∞‰∏çËÉΩÈÄöËøá<code>.call()</code>ÊàñËÄÖ<code>.apply()</code>Êù•ÊîπÂèòÂÆÉÁöÑ‰∏ä‰∏ãÊñáÔºåÁîöËá≥ÊòØÂÜçÊ¨°ÁªëÂÆö‰πü‰∏ç‰ºöÊúâ‰ªÄ‰πà‰ΩúÁî®„ÄÇ</p><p>Âè™ÊúâÁªëÂÆöÂáΩÊï∞ÁöÑÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÊâçËÉΩÊõ¥ÊîπÂ∑≤ÁªèÁªëÂÆöÁöÑ‰∏ä‰∏ãÊñáÔºå‰ΩÜÊòØÂæà‰∏çÊé®ËçêÁöÑÂÅöÊ≥ï(ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÂøÖÈ°ª‰ΩøÁî®Â∏∏ËßÑÁöÑÈùûÁªëÂÆöÂáΩÊï∞)„ÄÇ</p><p>‰∏ãÈù¢Á§∫‰æãÂàõÂª∫‰∏Ä‰∏™ÁªëÂÆöÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞ùËØïÊõ¥ÊîπÂÖ∂Â∑≤È¢ÑÂÖàÂÆö‰πâÂ•ΩÁöÑ‰∏ä‰∏ãÊñá</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function getThis() &#123;</span><br><span class="line">  &#x27;use strict&#x27;;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">const one = getThis.bind(1);</span><br><span class="line">// ÁªëÂÆöÂáΩÊï∞Ë∞ÉÁî®</span><br><span class="line">one(); // =&gt; 1</span><br><span class="line">// ‰ΩøÁî®Â∏¶Êúâ.apply()Âíå.call()ÁöÑÁªëÂÆöÂáΩÊï∞</span><br><span class="line">one.call(2);  // =&gt; 1</span><br><span class="line">one.apply(2); // =&gt; 1</span><br><span class="line">// ÂÜçÊ¨°ÁªëÂÆö</span><br><span class="line">one.bind(2)(); // =&gt; 1</span><br><span class="line">// ‰ª•ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂΩ¢ÂºèË∞ÉÁî®ÁªëÂÆöÂáΩÊï∞</span><br><span class="line">new one(); // =&gt; Object</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Âè™Êúâ<code>new one()</code>ÊîπÂèò‰∫ÜÁªëÂÆöÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÔºåÂÖ∂‰ªñÊñπÂºèÁöÑË∞ÉÁî®‰∏≠<code>this</code>ÊÄªÊòØÁ≠â‰∫é1„ÄÇ</p><h2 id="7-ÁÆ≠Â§¥ÂáΩÊï∞"><a href="#7-ÁÆ≠Â§¥ÂáΩÊï∞" class="headerlink" title="7. ÁÆ≠Â§¥ÂáΩÊï∞"></a>7. ÁÆ≠Â§¥ÂáΩÊï∞</h2><p>ÁÆ≠Â§¥ÂáΩÊï∞Áî®‰∫é‰ª•Êõ¥Áü≠ÁöÑÂΩ¢ÂºèÂ£∞ÊòéÂáΩÊï∞ÔºåÂπ∂Âú®ËØçÊ≥ï‰∏äÁªëÂÆö‰∏ä‰∏ãÊñá„ÄÇÂÆÉÂèØ‰ª•ËøôÊ†∑‰ΩøÁî®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const hello = (name) =&gt; &#123;</span><br><span class="line">  return &#x27;Hello &#x27; + name;</span><br><span class="line">&#125;;</span><br><span class="line">hello(&#x27;World&#x27;); // =&gt; &#x27;Hello World&#x27;</span><br><span class="line">// Keep only even numbers</span><br><span class="line">[1, 2, 5, 6].filter(item =&gt; item % 2 === 0); // =&gt; [2, 6]</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÁÆ≠Â§¥ÂáΩÊï∞ËØ≠Ê≥ïÁÆÄÂçïÔºåÊ≤°ÊúâÂÜóÈïøÁöÑ<code>function</code> ÂÖ≥ÈîÆÂ≠ó„ÄÇÂΩìÁÆ≠Â§¥ÂáΩÊï∞Âè™Êúâ‰∏ÄÊù°ËØ≠Âè•Êó∂ÔºåÁîöËá≥ÂèØ‰ª•ÁúÅÁï•<code>return</code>ÂÖ≥ÈîÆÂ≠ó„ÄÇ</p><p>ÁÆ≠Â§¥ÂáΩÊï∞ÊòØÂåøÂêçÁöÑÔºåËøôÊÑèÂë≥ÁùÄ<code>name</code>Â±ûÊÄßÊòØ‰∏Ä‰∏™Á©∫Â≠óÁ¨¶‰∏≤<code>&#39;&#39;</code>„ÄÇËøôÊ†∑ÂÆÉÂ∞±Ê≤°ÊúâËØçÊ≥ï‰∏äÂáΩÊï∞Âêç(ÂáΩÊï∞ÂêçÂØπ‰∫éÈÄíÂΩí„ÄÅÂàÜÁ¶ª‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫èÈùûÂ∏∏ÊúâÁî®)</p><p>ÂêåÊó∂ÔºåË∑üÂ∏∏ËßÑÂáΩÊï∞Áõ∏ÂèçÔºåÂÆÉ‰πü‰∏çÊèê‰æõ<code>arguments</code>ÂØπË±°„ÄÇ‰ΩÜÊòØÔºåËøôÂú®ES6‰∏≠ÈÄöËøá<code>rest parameters</code>‰øÆÂ§ç‰∫Ü:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const sumArguments = (...args) =&gt; &#123;</span><br><span class="line">   console.log(typeof arguments); // =&gt; &#x27;undefined&#x27;</span><br><span class="line">   return args.reduce((result, item) =&gt; result + item);</span><br><span class="line">&#125;;</span><br><span class="line">sumArguments.name      // =&gt; &#x27;&#x27;</span><br><span class="line">sumArguments(5, 5, 6); // =&gt; 16</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><h4 id="7-1-ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÁöÑthis"><a href="#7-1-ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÁöÑthis" class="headerlink" title="7.1. ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÁöÑthis"></a>7.1. ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÁöÑthis</h4><blockquote><p>this ÂÆö‰πâÁÆ≠Â§¥ÂáΩÊï∞ÁöÑÂ∞ÅÈó≠‰∏ä‰∏ãÊñá</p></blockquote><p>ÁÆ≠Â§¥ÂáΩÊï∞‰∏ç‰ºöÂàõÂª∫Ëá™Â∑±ÁöÑÊâßË°å‰∏ä‰∏ãÊñáÔºåËÄåÊòØ‰ªéÂÆö‰πâÂÆÉÁöÑÂ§ñÈÉ®ÂáΩÊï∞‰∏≠Ëé∑Âèñ <code>this</code>„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåÁÆ≠Â§¥ÂáΩÊï∞Âú®ËØçÊ±á‰∏äÁªëÂÆö <code>this</code>„ÄÇ</p><p><img src="https://user-gold-cdn.xitu.io/2019/8/13/16c884dfd5bf33de?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>‰∏ãÈù¢ÁöÑ‰æãÂ≠êËØ¥Êòé‰∫ÜËøô‰∏™‰∏ä‰∏ãÊñáÈÄèÊòéÁöÑÁâπÊÄßÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Point &#123;</span><br><span class="line">  constructor(x, y) &#123;</span><br><span class="line">    this.x = x;</span><br><span class="line">    this.y = y;</span><br><span class="line">  &#125;</span><br><span class="line">  log() &#123;</span><br><span class="line">    console.log(this === myPoint); // =&gt; true</span><br><span class="line">    setTimeout(()=&gt; &#123;</span><br><span class="line">      console.log(this === myPoint);      // =&gt; true</span><br><span class="line">      console.log(this.x + &#x27;:&#x27; + this.y); // =&gt; &#x27;95:165&#x27;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const myPoint = new Point(95, 165);</span><br><span class="line">myPoint.log();</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>setTimeout</code>‰ΩøÁî®‰∏é<code>log()</code>ÊñπÊ≥ïÁõ∏ÂêåÁöÑ‰∏ä‰∏ãÊñá(<code>myPoint</code>ÂØπË±°)Ë∞ÉÁî®ÁÆ≠Â§¥ÂáΩÊï∞„ÄÇÊ≠£Â¶ÇÊâÄËßÅÔºåÁÆ≠Â§¥ÂáΩÊï∞‰ªéÂÆö‰πâÂÆÉÁöÑÂáΩÊï∞ÁªßÊâø‰∏ä‰∏ãÊñá„ÄÇ</p><p>Â¶ÇÊûúÂú®Ëøô‰∏™‰æãÂ≠êÈáåÂ∞ùËØïÁî®Â∏∏ËßÑÂáΩÊï∞,ÂÆÉÂàõÂª∫Ëá™Â∑±ÁöÑ‰∏ä‰∏ãÊñá(<code>window</code>Êàñ‰∏•Ê†ºÊ®°Âºè‰∏ãÁöÑ<code>undefined</code>)„ÄÇÂõ†Ê≠§ÔºåË¶Å‰ΩøÁõ∏ÂêåÁöÑ‰ª£Á†ÅÊ≠£Á°ÆÂú∞‰ΩøÁî®ÂáΩÊï∞Ë°®ËææÂºèÔºåÈúÄË¶ÅÊâãÂä®ÁªëÂÆö‰∏ä‰∏ãÊñá:<code>setTimeout(function()&#123;‚Ä¶&#125;.bind(this))</code>„ÄÇËøôÂæàÂÜóÈïøÔºå‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞ÊòØ‰∏ÄÁßçÊõ¥ÁÆÄÊ¥Å„ÄÅÊõ¥Áü≠ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p><p>Â¶ÇÊûúÁÆ≠Â§¥ÂáΩÊï∞Âú®ÊúÄÈ°∂Â±ÇÁöÑ‰ΩúÁî®Âüü‰∏≠ÂÆö‰πâÔºàÂú®‰ªª‰ΩïÂáΩÊï∞‰πãÂ§ñÔºâÔºåÂàô‰∏ä‰∏ãÊñáÂßãÁªàÊòØÂÖ®Â±ÄÂØπË±°ÔºàÊµèËßàÂô®‰∏≠ÁöÑ windowÔºâÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onst getContext = () =&gt; &#123;</span><br><span class="line">   console.log(this === window); // =&gt; true</span><br><span class="line">   return this;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(getContext() === window); // =&gt; true</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>ÁÆ≠Â§¥ÂáΩÊï∞‰∏ÄÂä≥Ê∞∏ÈÄ∏Âú∞‰∏éËØçÊ±á‰∏ä‰∏ãÊñáÁªëÂÆö„ÄÇ Âç≥‰Ωø‰øÆÊîπ‰∏ä‰∏ãÊñáÔºå<code>this</code>‰πü‰∏çËÉΩË¢´ÊîπÂèòÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2];</span><br><span class="line">(function() &#123;  </span><br><span class="line">  const get = () =&gt; &#123;</span><br><span class="line">    console.log(this === numbers); // =&gt; true</span><br><span class="line">    return this;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(this === numbers); // =&gt; true</span><br><span class="line">  get(); // =&gt; [1, 2]</span><br><span class="line">  // Use arrow function with .apply() and .call()</span><br><span class="line">  get.call([0]);  // =&gt; [1, 2]</span><br><span class="line">  get.apply([0]); // =&gt; [1, 2]</span><br><span class="line">  // Bind</span><br><span class="line">  get.bind([0])(); // =&gt; [1, 2]</span><br><span class="line">&#125;).call(numbers);</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Êó†ËÆ∫Â¶Ç‰ΩïË∞ÉÁî®ÁÆ≠Â§¥ÂáΩÊï∞<code>get</code>ÔºåÂÆÉÊÄªÊòØ‰øùÁïôËØçÊ±á‰∏ä‰∏ãÊñá<code>numbers</code>„ÄÇ Áî®ÂÖ∂‰ªñ‰∏ä‰∏ãÊñáÁöÑÈöêÂºèË∞ÉÁî®(ÈÄöËøá <code>get.call([0])</code>Êàñ<code>get.apply([0])</code>)ÊàñËÄÖÈáçÊñ∞ÁªëÂÆö(ÈÄöËøá<code>.bind()</code>)ÈÉΩ‰∏ç‰ºöËµ∑‰ΩúÁî®„ÄÇ</p><p>ÁÆ≠Â§¥ÂáΩÊï∞‰∏çËÉΩÁî®‰ΩúÊûÑÈÄ†ÂáΩÊï∞„ÄÇ Â∞ÜÂÆÉ‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®(<code>new get()</code>)‰ºöÊäõÂá∫‰∏Ä‰∏™ÈîôËØØÔºö<code>TypeError: get is not a constructor</code>„ÄÇ</p><h4 id="7-2-Èô∑Èò±-Áî®ÁÆ≠Â§¥ÂáΩÊï∞ÂÆö‰πâÊñπÊ≥ï"><a href="#7-2-Èô∑Èò±-Áî®ÁÆ≠Â§¥ÂáΩÊï∞ÂÆö‰πâÊñπÊ≥ï" class="headerlink" title="7.2. Èô∑Èò±: Áî®ÁÆ≠Â§¥ÂáΩÊï∞ÂÆö‰πâÊñπÊ≥ï"></a>7.2. Èô∑Èò±: Áî®ÁÆ≠Â§¥ÂáΩÊï∞ÂÆö‰πâÊñπÊ≥ï</h4><p>‰Ω†ÂèØËÉΩÂ∏åÊúõ‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞Êù•Â£∞Êòé‰∏Ä‰∏™ÂØπË±°‰∏äÁöÑÊñπÊ≥ï„ÄÇÁÆ≠Â§¥ÂáΩÊï∞ÁöÑÂÆö‰πâÁõ∏ÊØî‰∫éÂáΩÊï∞Ë°®ËææÂºèÁü≠ÂæóÂ§öÔºö<code>(param) =&gt; &#123;...&#125; instead of function(param) &#123;..&#125;</code>„ÄÇ</p><p>Êù•ÁúãÁúã‰æãÂ≠êÔºåÁî®ÁÆ≠Â§¥ÂáΩÊï∞Âú®PeriodÁ±ª‰∏äÂÆö‰πâ‰∫Ü<code>format()</code>ÊñπÊ≥ïÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Period (hours, minutes) &#123;  </span><br><span class="line">  this.hours = hours;</span><br><span class="line">  this.minutes = minutes;</span><br><span class="line">&#125;</span><br><span class="line">Period.prototype.format = () =&gt; &#123;</span><br><span class="line">  console.log(this === window); // =&gt; true</span><br><span class="line">  return this.hours + &#x27; hours and &#x27; + this.minutes + &#x27; minutes&#x27;;</span><br><span class="line">&#125;;</span><br><span class="line">const walkPeriod = new Period(2, 30);  </span><br><span class="line">walkPeriod.format(); // =&gt; &#x27;undefined hours and undefined minutes&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p>Áî±‰∫é<code>format</code>ÊòØ‰∏Ä‰∏™ÁÆ≠Â§¥ÂáΩÊï∞ÔºåÂπ∂‰∏îÂú®ÂÖ®Â±Ä‰∏ä‰∏ãÊñáÔºàÊúÄÈ°∂Â±ÇÁöÑ‰ΩúÁî®ÂüüÔºâ‰∏≠ÂÆö‰πâÔºåÂõ†Ê≠§ <code>this</code> ÊåáÂêë<code>window</code>ÂØπË±°„ÄÇ</p><p>Âç≥‰Ωø<code>format</code>‰Ωú‰∏∫ÊñπÊ≥ïÂú®‰∏Ä‰∏™ÂØπË±°‰∏äË¢´Ë∞ÉÁî®Â¶Ç<code>walkPeriod.format()</code>Ôºå<code>window</code>‰ªçÁÑ∂ÊòØËøôÊ¨°Ë∞ÉÁî®ÁöÑ‰∏ä‰∏ãÊñá„ÄÇ‰πãÊâÄ‰ª•‰ºöËøôÊ†∑ÊòØÂõ†‰∏∫ÁÆ≠Â§¥ÂáΩÊï∞ÊúâÈùôÊÄÅÁöÑ‰∏ä‰∏ãÊñáÔºåÂπ∂‰∏ç‰ºöÈöèÁùÄË∞ÉÁî®ÊñπÂºèÁöÑÊîπÂèòËÄåÊîπÂèò„ÄÇ</p><p>ËØ•ÊñπÊ≥ïËøîÂõû<code>&#39;undefined hoursÂíåundefined minutes&#39;</code>ÔºåËøô‰∏çÊòØÂí±‰ª¨ÊÉ≥Ë¶ÅÁöÑÁªìÊûú„ÄÇ</p><p>ÂáΩÊï∞Ë°®ËææÂºèËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºåÂõ†‰∏∫Â∏∏ËßÑÂáΩÊï∞Á°ÆÂÆûËÉΩÊ†πÊçÆÂÆûÈôÖË∞ÉÁî®ÊîπÂèòÂÆÉÁöÑ‰∏ä‰∏ãÊñáÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Period (hours, minutes) &#123;  </span><br><span class="line">  this.hours = hours;</span><br><span class="line">  this.minutes = minutes;</span><br><span class="line">&#125;</span><br><span class="line">Period.prototype.format = function() &#123;</span><br><span class="line">  console.log(this === walkPeriod); // =&gt; true</span><br><span class="line">  return this.hours + &#x27; hours and &#x27; + this.minutes + &#x27; minutes&#x27;;</span><br><span class="line">&#125;;</span><br><span class="line">const walkPeriod = new Period(2, 30);  </span><br><span class="line">walkPeriod.format(); // =&gt; &#x27;2 hours and 30 minutes&#x27;</span><br><span class="line">Â§çÂà∂‰ª£Á†Å</span><br></pre></td></tr></table></figure><p><code>walkPeriod.format()</code>ÊòØ‰∏Ä‰∏™ÂØπË±°‰∏äÁöÑÊñπÊ≥ïË∞ÉÁî®ÔºåÂÆÉÁöÑ‰∏ä‰∏ãÊñáÊòØ<code>walkPeriod</code>ÂØπË±°„ÄÇ<code>this.hours</code>Á≠â‰∫é<code>2</code>Ôºå<code>this.minutes</code>Á≠â‰∫é<code>30</code>ÔºåÊâÄ‰ª•Ëøô‰∏™ÊñπÊ≥ïËøîÂõû‰∫ÜÊ≠£Á°ÆÁöÑÁªìÊûúÔºö<code>&#39;2 hours and 30 minutes&#39;</code>„ÄÇ</p><p><strong>ÂéüÊñáÔºödmitripavlutin.com/gentle-expl‚Ä¶</strong></p><p><strong>‰ª£Á†ÅÈÉ®ÁΩ≤ÂêéÂèØËÉΩÂ≠òÂú®ÁöÑBUGÊ≤°Ê≥ïÂÆûÊó∂Áü•ÈÅìÔºå‰∫ãÂêé‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õBUGÔºåËä±‰∫ÜÂ§ßÈáèÁöÑÊó∂Èó¥ËøõË°ålog Ë∞ÉËØïÔºåËøôËæπÈ°∫‰æøÁªôÂ§ßÂÆ∂Êé®Ëçê‰∏Ä‰∏™Â•ΩÁî®ÁöÑBUGÁõëÊéßÂ∑•ÂÖ∑ Fundebug„ÄÇ</strong></p><h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>‰∏∫ÂáΩÊï∞Ë∞ÉÁî®ÂØπ<code>this</code>ÂΩ±ÂìçÊúÄÂ§ßÔºå‰ªéÁé∞Âú®ÂºÄÂßã‰∏çË¶ÅÈóÆËá™Â∑±Ôºö</p><blockquote><p>this ÊòØ‰ªéÂì™ÈáåÊù•ÁöÑÔºü</p></blockquote><p>ËÄåÊòØË¶ÅÁúãÁúã</p><blockquote><p>ÂáΩÊï∞ÊòØÊÄé‰πàË¢´Ë∞ÉÁî®ÁöÑÔºü</p></blockquote><p>ÂØπ‰∫éÁÆ≠Â§¥ÂáΩÊï∞ÔºåÈúÄË¶ÅÊÉ≥ÊÉ≥</p><blockquote><p>Âú®Ëøô‰∏™ÁÆ≠Â§¥ÂáΩÊï∞Ë¢´ÂÆö‰πâÁöÑÂú∞ÊñπÔºåthisÊòØ‰ªÄ‰πàÔºü</p></blockquote><p>ËøôÊòØÂ§ÑÁêÜ<code>this</code>Êó∂ÁöÑÊ≠£Á°ÆÊÉ≥Ê≥ïÔºåÂÆÉ‰ª¨ÂèØ‰ª•ËÆ©‰Ω†ÂÖç‰∫éÂ§¥Áóõ„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>alt snippet</title>
      <link href="/2019/07/31/alt/"/>
      <url>/2019/07/31/alt/</url>
      
        <content type="html"><![CDATA[<h2 id="dig-mineral"><a href="#dig-mineral" class="headerlink" title="dig mineral"></a>dig mineral</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config.json ÔºàÊåñÁüøÈÖçÁΩÆÔºâ„ÄÅ</span><br><span class="line">sysupdate ÔºàXMR ÊåñÁüøËΩØ‰ª∂Ôºâ„ÄÅ</span><br><span class="line">update.sh ÔºàÊú¨ËÑöÊú¨Ôºâ„ÄÅ</span><br><span class="line">networkservice(scannerÊâ´ÊèèÂπ∂ÂÖ•‰æµÂÖ∂‰ªñÁöÑ‰∏ªÊú∫)„ÄÅ</span><br><span class="line">sysguard(watchdog Áî®‰∫éÁõëÊéßÂπ∂‰øùËØÅÁóÖÊØíÁöÑÊ≠£Â∏∏ËøêË°å‰ª•ÂèäÊõ¥Êñ∞) Âπ∂‰øùËØÅ‰ªñ‰ª¨‰ª• root ÊùÉÈôêËøêË°å„ÄÇ</span><br></pre></td></tr></table></figure><ol><li><p>Êü•ÁúãÁóÖÊØíÁöÑ PID Âè∑</p></li><li><p>Ëé∑ÂèñÁªùÂØπË∑ØÂæÑ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /proc/&#123;pid Âè∑&#125;/exe</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§/tmpÊñá‰ª∂Â§πÁöÑÊâÄÊúâÊñá‰ª∂</p></li><li><p>Ê£ÄÊü•‰∏ãÂÆöÊó∂‰ªªÂä°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l ÊàñËÄÖ cat /var/spool/cron/will</span><br></pre></td></tr></table></figure><p>‰∏äÈù¢ÁöÑwill‰∏∫ÂΩìÂâçÁî®Êà∑Âêç</p><p>Êü•ÁúãÂÆöÊó∂‰ªªÂä°ÁöÑÊó•Âøó</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more /var/<span class="built_in">log</span>/cron <span class="built_in">log</span></span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÂÆöÊó∂‰ªªÂä°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /var/spool/cron/root ÊàñËÄÖ crontab -r Âà†Èô§ÂÆöÊó∂‰ªªÂä°</span><br></pre></td></tr></table></figure></li><li><p>kill ÂëΩ‰ª§Â∞ÜÁõ∏ÂÖ≥ËøõÁ®ãÂπ≤Êéâ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysupdate</span><br><span class="line">networkservice</span><br><span class="line">sysguard</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> alt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java io</title>
      <link href="/2019/07/10/java%20point/"/>
      <url>/2019/07/10/java%20point/</url>
      
        <content type="html"><![CDATA[<h1 id="base"><a href="#base" class="headerlink" title="base"></a>base</h1><h2 id="Á±ªÂûã"><a href="#Á±ªÂûã" class="headerlink" title="Á±ªÂûã"></a>Á±ªÂûã</h2><ul><li><p>intÂèòÈáèËá™Â¢û ÊïàÁéáÈóÆÈ¢ò </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i++;Âíåi += 1;ÂΩ¢ÊàêÁöÑÊåá‰ª§Êï∞ËæÉÂ∞ëÔºå‰∏î‰∏çÈúÄË¶ÅÊìç‰ΩúÊï∞Ê†à„ÄÇÁõ∏ÂØπËÄåË®ÄÔºåi = i+1;ÈúÄË¶ÅËá≥Â∞ë2‰∏™Êìç‰ΩúÊï∞Ê†àÊ∑±Â∫¶ÔºåÂπ∂‰∏îÂΩ¢ÊàêÁöÑÊåá‰ª§Êï∞ËæÉÂ§ö„ÄÇÊïÖÔºåi++;Âíåi+= 1;ÁöÑÊïàÁéá‰∏ÄÊ†∑ÔºåÂπ∂‰∏î‰∫åËÄÖÁöÑÊïàÁéáÈÉΩ‰ºò‰∫éi = i+1;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Ê≥õÂûã"><a href="#Ê≥õÂûã" class="headerlink" title="Ê≥õÂûã"></a>Ê≥õÂûã</h2><p><strong>TÔºåEÔºåKÔºåVÔºåÔºüÊòØËøôÊ†∑Á∫¶ÂÆöÁöÑÔºö</strong></p><ul><li>ÔºüË°®Á§∫‰∏çÁ°ÆÂÆöÁöÑ java Á±ªÂûã</li><li>T (type) Ë°®Á§∫ÂÖ∑‰ΩìÁöÑ‰∏Ä‰∏™javaÁ±ªÂûã</li><li>K V (key value) ÂàÜÂà´‰ª£Ë°®javaÈîÆÂÄº‰∏≠ÁöÑKey Value</li><li>E (element) ‰ª£Ë°®Element</li></ul><p><strong>ÔºüÂíå T ÁöÑÂå∫Âà´</strong>Ôºö</p><p><img src="https://mmbiz.qpic.cn/mmbiz/knmrNHnmCLFRVA73vYfkqVGfia90X5nyEsksfM8Vz6btFZCRd3PCSJC1XkZhaJ0ufxcoohxAdr8X1tykU9CZPUQ/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p>ÔºüÂíå T ÈÉΩË°®Á§∫‰∏çÁ°ÆÂÆöÁöÑÁ±ªÂûãÔºåÂå∫Âà´Âú®‰∫éÊàë‰ª¨ÂèØ‰ª•ÂØπ T ËøõË°åÊìç‰ΩúÔºå‰ΩÜÊòØÂØπ Ôºü‰∏çË°åÔºåÊØîÂ¶ÇÂ¶Ç‰∏ãËøôÁßç Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ÂèØ‰ª•</span><br><span class="line">T t = operate();</span><br><span class="line"></span><br><span class="line">// ‰∏çÂèØ‰ª•</span><br><span class="line">Ôºücar = operate();</span><br></pre></td></tr></table></figure><p>ÁÆÄÂçïÊÄªÁªì‰∏ãÔºö</p><p>T ÊòØ‰∏Ä‰∏™ Á°ÆÂÆöÁöÑ Á±ªÂûãÔºåÈÄöÂ∏∏Áî®‰∫éÊ≥õÂûãÁ±ªÂíåÊ≥õÂûãÊñπÊ≥ïÁöÑÂÆö‰πâÔºåÔºüÊòØ‰∏Ä‰∏™ ‰∏çÁ°ÆÂÆö ÁöÑÁ±ªÂûãÔºåÈÄöÂ∏∏Áî®‰∫éÊ≥õÂûãÊñπÊ≥ïÁöÑË∞ÉÁî®‰ª£Á†ÅÂíåÂΩ¢ÂèÇÔºå‰∏çËÉΩÁî®‰∫éÂÆö‰πâÁ±ªÂíåÊ≥õÂûãÊñπÊ≥ï„ÄÇ</p><p><strong>PECSÔºàProducer Extends Consumer SuperÔºâ</strong>ÂéüÂàôÔºö‰Ωú‰∏∫Áîü‰∫ßËÄÖÊèê‰æõÊï∞ÊçÆÔºàÂæÄÂ§ñËØªÂèñÔºâÊó∂ÔºåÈÄÇÂêàÁî®‰∏äÁïåÈÄöÈÖçÁ¨¶ÔºàextendsÔºâÔºõ‰Ωú‰∏∫Ê∂àË¥πËÄÖÊ∂àË¥πÊï∞ÊçÆÔºàÂæÄÈáåÂÜôÂÖ•ÔºâÊó∂ÔºåÈÄÇÂêàÁî®‰∏ãÁïåÈÄöÈÖçÁ¨¶ÔºàsuperÔºâ„ÄÇ</p><h2 id="Êó∂Èó¥"><a href="#Êó∂Èó¥" class="headerlink" title="Êó∂Èó¥"></a>Êó∂Èó¥</h2><p>Âú® JDK8 ‰ª•ÂêéÔºåÂª∫ËÆÆ‰ΩøÁî® DateTimeFormatter ‰ª£Êõø SimpleDateFormat ÔºåÂõ†‰∏∫ SimpleDateFormat ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåËÄå DateTimeFormatter ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•ÈááÁî®Á¨¨‰∏âÊñπÊèê‰æõÁöÑÁ∫øÁ®ãÂÆâÂÖ®Êó•ÊúüÊ†ºÂºèÂåñÂáΩÊï∞ÔºåÊØîÂ¶Ç apache ÁöÑ DateFormatUtils Â∑•ÂÖ∑Á±ª„ÄÇ</p><h2 id="dynamic-compile"><a href="#dynamic-compile" class="headerlink" title="dynamic compile"></a>dynamic compile</h2><p>ÈùôÊÄÅÁºñËØëÔºöÁºñËØëÊó∂Â∞±ÊääÊâÄÊúâÁî®Âà∞ÁöÑJava‰ª£Á†ÅÂÖ®ÈÉΩÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåÊòØ‰∏ÄÊ¨°ÊÄßÁºñËØë„ÄÇ</p><p>Âä®ÊÄÅÁºñËØëÔºöÂú®JavaÁ®ãÂ∫èËøêË°åÊó∂ÊâçÊääÈúÄË¶ÅÁöÑJava‰ª£Á†ÅÁöÑÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåÊòØÊåâÈúÄÁºñËØë„ÄÇ</p><p>‰ªéJDK1.6ÂºÄÂßãÔºåÂºïÂÖ•‰∫ÜJava‰ª£Á†ÅÈáçÂÜôËøáÁöÑÁºñËØëÂô®Êé•Âè£Ôºå‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•Âú®ËøêË°åÊó∂ÁºñËØëJavaÊ∫ê‰ª£Á†ÅÔºåÁÑ∂ÂêéÂÜçÈÄöËøáÁ±ªÂä†ËΩΩÂô®Â∞ÜÁºñËØëÂ•ΩÁöÑÁ±ªÂä†ËΩΩËøõJVM,ËøôÁßçÂú®ËøêË°åÊó∂ÁºñËØë‰ª£Á†ÅÁöÑÊìç‰ΩúÂ∞±Âè´ÂÅöÂä®ÊÄÅÁºñËØë„ÄÇ</p><hr><p><a href="https://blog.nowcoder.net/n/d2a7554ea2ec4e4b978cf4a74c3c41b2">„ÄêJavaÂä®ÊÄÅÁºñËØë„ÄëÂä®ÊÄÅÁºñËØëÁöÑÂ∫îÁî®_ÁâõÂÆ¢ÂçöÂÆ¢</a></p><p><a href="https://segmentfault.com/a/1190000016842546">JavaÂä®ÊÄÅÊÄß(1) - Âä®ÊÄÅÁºñËØë(DynamicCompile)</a></p><h2 id="IOÊµÅ"><a href="#IOÊµÅ" class="headerlink" title="IOÊµÅ"></a>IOÊµÅ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ÊµÅÂåÖÊã¨Â≠óÁ¨¶ÊµÅÂíåÂ≠óËäÇÊµÅÔºåÊµÅ‰ªéÊ¶ÇÂøµ‰∏äÊù•ËØ¥ÊòØ‰∏Ä‰∏™ËøûÁª≠ÁöÑÊï∞ÊçÆÊµÅ„ÄÇÂΩìÁ®ãÂ∫èÈúÄË¶ÅËØªÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶Å‰ΩøÁî®ËæìÂÖ•ÊµÅËØªÂèñÊï∞ÊçÆÔºåÂΩìÈúÄË¶ÅÂæÄÂ§ñÂÜôÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅËæìÂá∫ÊµÅ</span><br></pre></td></tr></table></figure><ul><li><p>Â≠óËäÇÊµÅÔºöÂ≠óËäÇÊµÅ‰∏ªË¶ÅÁî®Êù•Â§ÑÁêÜÂ≠óËäÇÊàñ‰∫åËøõÂà∂ÂØπË±°<code>InputStream„ÄÅOutputStreamÔºå</code></p><blockquote><p>Âú®‰ΩøÁî®Â≠óËäÇÊµÅÁöÑÊó∂ÂÄôÔºåInputStreamÂíåOutputStreamÈÉΩÊòØÊäΩË±°Á±ªÔºåÊàë‰ª¨ÂÆû‰æãÂåñÁöÑÈÉΩÊòØ‰ªñ‰ª¨ÁöÑÂ≠êÁ±ªÔºåÊØè‰∏Ä‰∏™Â≠êÁ±ªÈÉΩÊúâËá™Â∑±ÁöÑ‰ΩúÁî®ËåÉÂõ¥</p></blockquote><p><img src="https://i.imgur.com/s39Xj3r.png"></p></li><li><p>Â≠óÁ¨¶ÊµÅÔºöÂ≠óÁ¨¶ÊµÅÁî®Êù•Â§ÑÁêÜÂ≠óÁ¨¶ÊñáÊú¨ÊàñÂ≠óÁ¨¶‰∏≤<code>Reader„ÄÅWriter</code></p><blockquote><p>Âú®‰ΩøÁî®Â≠óÁ¨¶ÊµÅÁöÑÊó∂ÂÄô‰πüÊòØÔºåReaderÂíåWriterÈÉΩÊòØÊäΩË±°Á±ªÔºåÊàë‰ª¨ÂÆû‰æãÂåñÁöÑÈÉΩÊòØ‰ªñ‰ª¨ÁöÑÂ≠êÁ±ªÔºåÊØè‰∏Ä‰∏™Â≠êÁ±ªÈÉΩÊúâËá™Â∑±ÁöÑ‰ΩúÁî®ËåÉÂõ¥</p></blockquote><p><img src="https://i.imgur.com/RMD0koG.png"></p></li><li><p>Â≠óËäÇÊµÅËΩ¨Êç¢‰∏∫Â≠óÁ¨¶ÊµÅ</p><blockquote><p>‰ΩøÁî®<code>InputStreamReader„ÄÅOutputStreamWriter</code>ÂèØ‰ª•Â∞ÜËæìÂÖ•Â≠óËäÇÊµÅËΩ¨Âåñ‰∏∫ËæìÂÖ•Â≠óÁ¨¶ÊµÅ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Reader reader  =  <span class="keyword">new</span> InputStreamReader(inputStream);</span><br><span class="line">Writer writer = <span class="keyword">new</span> OutputStreamWriter(outputStream)</span><br></pre></td></tr></table></figure></blockquote></li></ul><p>ËæìÂÖ•Â≠óËäÇÊµÅÔºö<strong>InputStream</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;D:/a.txt&quot;</span>);</span><br><span class="line">    InputStream inputStream = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">    inputStream.read(bytes);</span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(bytes));</span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ËæìÂÖ•Â≠óÁ¨¶ÊµÅÔºö<strong>Reader</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;D:/a.txt&quot;</span>);</span><br><span class="line">    Reader reader = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">    <span class="keyword">char</span>[] bytes = <span class="keyword">new</span> <span class="keyword">char</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">    reader.read(bytes);</span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(bytes));</span><br><span class="line">    reader.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ËæìÂá∫Â≠óËäÇÊµÅÔºö<strong>OutputStream</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    String <span class="keyword">var</span> = <span class="string">&quot;hai this is a test&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;D:/b.txt&quot;</span>);</span><br><span class="line">    OutputStream outputStream = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">    outputStream.write(<span class="keyword">var</span>.getBytes());</span><br><span class="line">    outputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ËæìÂá∫Â≠óÁ¨¶ÊµÅÔºö<strong>Writer</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    String <span class="keyword">var</span> = <span class="string">&quot;hai this is a test&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;D:/b.txt&quot;</span>);</span><br><span class="line">    Writer writer = <span class="keyword">new</span> FileWriter(file);</span><br><span class="line">    writer.write(<span class="keyword">var</span>);</span><br><span class="line">    writer.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>BufferedInputStream</strong></p><blockquote><p>Âú®‰ΩøÁî®InputStreamÁöÑÊó∂ÂÄôÔºåÈÉΩÊòØ‰∏Ä‰∏™Â≠óËäÇ‰∏Ä‰∏™Â≠óËäÇÁöÑËØªÊàñÂÜôÔºåËÄåBufferedInputStream‰∏∫ËæìÂÖ•Â≠óËäÇÊµÅÊèê‰æõ‰∫ÜÁºìÂÜ≤Âå∫ÔºåËØªÊï∞ÊçÆÁöÑÊó∂ÂÄô‰ºö‰∏ÄÊ¨°ËØªÂèñ‰∏ÄÂùóÊï∞ÊçÆÊîæÂà∞ÁºìÂÜ≤Âå∫ÈáåÔºåÂΩìÁºìÂÜ≤Âå∫ÈáåÁöÑÊï∞ÊçÆË¢´ËØªÂÆå‰πãÂêéÔºåËæìÂÖ•ÊµÅ‰ºöÂÜçÊ¨°Â°´ÂÖÖÊï∞ÊçÆÁºìÂÜ≤Âå∫ÔºåÁõ¥Âà∞ËæìÂÖ•ÊµÅË¢´ËØªÂÆåÔºåÊúâ‰∫ÜÁºìÂÜ≤Âå∫Â∞±ËÉΩÂ§üÊèêÈ´òÂæàÂ§öioÈÄüÂ∫¶</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * inputStream ËæìÂÖ•ÊµÅ</span></span><br><span class="line"><span class="comment"> * 1024 ÂÜÖÈÉ®ÁºìÂÜ≤Âå∫Â§ßÂ∞è‰∏∫1024byte</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(inputStream,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedOutputStream</strong></p><blockquote><p>BufferedOutputStreamÂèØ‰ª•‰∏∫ËæìÂá∫Â≠óËäÇÊµÅÊèê‰æõÁºìÂÜ≤Âå∫Ôºå‰ΩúÁî®‰∏éBufferedInputStreamÁ±ª‰ººÔºå‰ΩøÁî®ÊñπÂºèÂ∞ÜËæìÂá∫ÊµÅÂåÖË£ÖÂà∞BufferedOutputStream‰∏≠</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * outputStream ËæìÂá∫ÊµÅ</span></span><br><span class="line"><span class="comment"> * 1024 ÂÜÖÈÉ®ÁºìÂÜ≤Âå∫Â§ßÂ∞è‰∏∫1024byte</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(outputStream,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedReader</strong></p><blockquote><p>‰∏∫ËæìÂÖ•Â≠óÁ¨¶ÊµÅÊèê‰æõÁºìÂÜ≤Âå∫</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(reader,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><p><strong>BufferedWriter</strong></p><blockquote><p>‰∏∫ËæìÂá∫Â≠óÁ¨¶ÊµÅÊèê‰æõÁºìÂÜ≤Âå∫</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(writer,<span class="number">1024</span>);</span><br></pre></td></tr></table></figure><h2 id="ioÊ®°Âûã"><a href="#ioÊ®°Âûã" class="headerlink" title="ioÊ®°Âûã"></a>ioÊ®°Âûã</h2><h3 id="bio"><a href="#bio" class="headerlink" title="bio"></a>bio</h3><blockquote><p>ÂêåÊ≠•ÈòªÂ°ûIOÊ®°Âûã</p><p>JDK 1.4ÁâàÊú¨‰ª•Ââç</p></blockquote><p><img src="https://chenmingyu.top/nio/bio%E7%BA%BF%E7%A8%8B.png"></p><p>Âú®ËøôÁßçÊ®°Âºè‰∏≠ÈÄöÂ∏∏Áî®‰∏Ä‰∏™Á∫øÁ®ãÂéªÊé•ÂèóËØ∑Ê±ÇÔºåÁÑ∂ÂêéÁî®‰∏Ä‰∏™Á∫øÁ®ãÊ±†ÂéªÂ§ÑÁêÜËØ∑Ê±ÇÔºåÁî®ËøôÁßçÊñπÂºèÂπ∂ÂèëÁÆ°ÁêÜÂ§ö‰∏™SocketÂÆ¢Êà∑Á´ØËøûÊé•</p><p><img src="https://chenmingyu.top/nio/BIO%E7%BA%BF%E7%A8%8B+%E7%BA%BF%E7%A8%8B%E6%B1%A0.png"></p><h3 id="nio"><a href="#nio" class="headerlink" title="nio"></a>nio</h3><blockquote><p>ÂêåÊ≠•ÈùûÈòªÂ°ûIOÊ®°Âûã</p><p>JDK 1.4ÁâàÊú¨‰ª•Âêé</p></blockquote><p>ÊàêÁÜüÁöÑÊ°ÜÊû∂ÔºåÊØîÂ¶ÇNetty</p><h3 id="aio"><a href="#aio" class="headerlink" title="aio"></a>aio</h3><blockquote><p>ÂºÇÊ≠•ÈùûÈòªÂ°ûIOÊ®°Âûã</p><p>JDK1.7ÂçáÁ∫ß‰∫ÜNioÁ±ªÂ∫ìÔºåÊàê‰∏∫Nio2.0ÔºåÊúÄ‰∏ªË¶ÅÁöÑÊòØÊèê‰æõ‰∫ÜÂºÇÊ≠•Êñá‰ª∂ÁöÑIOÊìç‰ΩúÔºå‰ª•Âèä‰∫ã‰ª∂È©±Âä®IOÔºåAIOÁöÑÂºÇÊ≠•Â•óÊé•Â≠óÈÄöÈÅìÊòØÁúüÊ≠£ÁöÑÂºÇÊ≠•ÈùûÈòªÂ°ûIO</p></blockquote><p><img src="https://chenmingyu.top/nio/%E5%90%84IO%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94.png"></p><hr><p>ÂèÇËÄÉÔºö</p><p><a href="https://chenmingyu.top/nio/">‰∏ÄÊñáÁúãÊáÇjava ioÁ≥ªÁªü</a></p><h1 id="Web-Application"><a href="#Web-Application" class="headerlink" title="Web Application"></a>Web Application</h1><h3 id="HTML-and-HTTP"><a href="#HTML-and-HTTP" class="headerlink" title="HTML and HTTP"></a>HTML and HTTP</h3><ul><li>HTML:HyperText Markup Language.</li><li>HTTP:HyperText Transfer Protocol<ul><li>HTTP is the communication protocol between server and client. HTTP runs on top of TCP/IP communication protocol.</li><li>Port numbers 0 to 1023 are reserved ports for well known services, for example 80 for HTTP, 443 for HTTPS, 21 for FTP etc.</li></ul></li><li>Java Servlet and JSPs are server side technologies to extend the capability of web servers by providing support for dynamic response and data persistence.</li></ul><h3 id="Web-Container"><a href="#Web-Container" class="headerlink" title="Web Container"></a>Web Container</h3><ul><li>When web container gets the request and if it‚Äôs for servlet then container creates two Objects HTTPServletRequest and HTTPServletResponse. Then it finds the correct servlet based on the URL and creates a thread for the request. Then it invokes the servlet service() method and based on the HTTP method service() method invokes doGet() or doPost() methods. Servlet methods generate the dynamic page and write it to response. Once servlet thread is complete, container converts the response to HTTP response and send it back to client.</li><li>Some of the important work done by web container are:<ul><li>Communication Support ‚Äì Container provides easy way of communication between web server and the servlets and JSPs. Because of container, we don‚Äôt need to build a server socket to listen for any request from web server, parse the request and generate response. All these important and complex tasks are done by container and all we need to focus is on our business logic for our applications.<ul><li>Lifecycle and Resource Management ‚Äì Container takes care of managing the life cycle of servlet. Container takes care of loading the servlets into memory, initializing servlets, invoking servlet methods and destroying them. Container also provides utility like JNDI for resource pooling and management.</li><li>Multithreading Support ‚Äì Container creates new thread for every request to the servlet and when it‚Äôs processed the thread dies. So servlets are not initialized for each request and saves time and memory.</li><li>JSP Support ‚Äì JSPs doesn‚Äôt look like normal java classes and web container provides support for JSP. Every JSP in the application is compiled by container and converted to Servlet and then container manages them like other servlets.</li><li>Miscellaneous Task ‚Äì Web container manages the resource pool, does memory optimizations, run garbage collector, provides security configurations, support for multiple applications, hot deployment and several other tasks behind the scene that makes our life easier.</li></ul></li></ul></li><li>Java Web Applications are packaged as Web Archive (WAR) and it has a defined structure.<br><img src="https://cdn.journaldev.com/wp-content/uploads/2013/08/WAR-directory-structure.png"></li></ul><h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><ul><li>Servlet API Hierarchy<br><img src="https://cdn.journaldev.com/wp-content/uploads/2013/08/Servlet-Hierarchy.png"></li></ul><h2 id="Session-Management"><a href="#Session-Management" class="headerlink" title="Session Management"></a>Session Management</h2><h3 id="What-is-a-Session"><a href="#What-is-a-Session" class="headerlink" title="What is a Session?"></a>What is a Session?</h3><ul><li>HTTP protocol and Web Servers are stateless, what it means is that for web server every request is a new request to process and they can‚Äôt identify if it‚Äôs coming from client that has been sending request previously.</li><li>Session is a conversional state between client and server and it can consists of multiple request and response between client and server. Since HTTP and Web Server both are stateless, the only way to maintain a session is when some unique information about the session (session id) is passed between server and client in every request and response.</li></ul><h3 id="JSESSIONID-Cookie"><a href="#JSESSIONID-Cookie" class="headerlink" title="JSESSIONID Cookie"></a>JSESSIONID Cookie</h3><ul><li>When we use HttpServletRequest getSession() method and it creates a new request, it creates the new HttpSession object and also add a Cookie to the response object with name JSESSIONID and value as session id. This cookie is used to identify the HttpSession object in further requests from client. If the cookies are disabled at client side and we are using URL rewriting then this method uses the jsessionid value from the request URL to find the corresponding session. JSESSIONID cookie is used for session tracking, so we should not use it for our application purposes to avoid any session related issues.</li><li>When a JSP resource is used, container automatically creates a session for it, so we can‚Äôt check if session is null to make sure if user has come through login page, so we are using session attribute to validate request.</li><li>As we saw in last section that we can manage a session with HttpSession but if we disable the cookies in browser, it won‚Äôt work because server will not receive the JSESSIONID cookie from client. </li></ul><h4 id="Cookie-Basics"><a href="#Cookie-Basics" class="headerlink" title="Cookie Basics"></a>Cookie Basics</h4><ul><li>a cookie is a small piece of data stored on the client-side which servers use when communicating with clients.They‚Äôre used to identify a client when sending a subsequent request. They can also be used for passing some data from one servlet to another.</li></ul><h1 id="design-pattern"><a href="#design-pattern" class="headerlink" title="design pattern"></a>design pattern</h1><h2 id="Creational-Design-Patterns"><a href="#Creational-Design-Patterns" class="headerlink" title="Creational Design Patterns"></a>Creational Design Patterns</h2><blockquote><p>These design patterns provide a way to create objects while hiding the creation logic, rather than instantiating objects directly using new operator. This gives program more flexibility in deciding which objects need to be created for a given use case.</p></blockquote><h3 id="Singleton"><a href="#Singleton" class="headerlink" title="Singleton"></a>Singleton</h3><blockquote><p>In Factory pattern, we create object without exposing the creation logic to the client and refer to newly created object using a common interface.</p></blockquote><ul><li><p>different approaches to implement:</p><ul><li>Private constructor to restrict instantiation of the class from other classes.</li><li>Private static variable of the same class that is the only instance of the class.</li><li>Public static method that returns the instance of the class, this is the global access point for outer world to get the instance of the singleton class.</li></ul></li><li><p>design concerns with the implementation</p><ul><li>Eager initialization</li><li>Static block initialization</li><li>Lazy Initialization</li><li>Thread Safe Singleton</li><li>Bill Pugh Singleton Implementation</li><li>Using Reflection to destroy Singleton Pattern</li><li>Enum Singleton</li><li>Serialization and Singleton</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SingleObject.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//create an object of SingleObject</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> SingleObject instance = <span class="keyword">new</span> SingleObject();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//make the constructor private so that this class cannot be</span></span><br><span class="line">   <span class="comment">//instantiated</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">SingleObject</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//Get the only object available</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> instance;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SingletonPatternDemo.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonPatternDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//illegal construct</span></span><br><span class="line">      <span class="comment">//Compile Time Error: The constructor SingleObject() is not visible</span></span><br><span class="line">      <span class="comment">//SingleObject object = new SingleObject();</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//Get the only object available</span></span><br><span class="line">      SingleObject object = SingleObject.getInstance();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//show the message</span></span><br><span class="line">      object.showMessage();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h3><ul><li>Factory design pattern provides approach to code for interface rather than implementation.</li><li>Factory pattern removes the instantiation of actual implementation classes from client code. Factory pattern makes our code more robust, less coupled and easy to extend. For example, we can easily change PC class implementation because client program is unaware of this.</li><li>Factory pattern provides abstraction between implementation and client classes through inheritance.</li></ul><h3 id="Abstract-Factory"><a href="#Abstract-Factory" class="headerlink" title="Abstract Factory"></a>Abstract Factory</h3><ul><li>Abstract Factory design pattern provides approach to code for interface rather than implementation.</li><li>Abstract Factory pattern is ‚Äúfactory of factories‚Äù and can be easily extended to accommodate more products, for example we can add another sub-class Laptop and a factory LaptopFactory.</li><li>Abstract Factory pattern is robust and avoid conditional logic of Factory pattern.</li></ul><h3 id="Builder"><a href="#Builder" class="headerlink" title="Builder"></a>Builder</h3><ul><li>Builder pattern solves the issue with large number of optional parameters and inconsistent state by providing a way to build the object step-by-step and provide a method that will actually return the final Object.</li></ul><h3 id="Prototype"><a href="#Prototype" class="headerlink" title="Prototype"></a>Prototype</h3><ul><li>Prototype design pattern is used when the Object creation is a costly affair and requires a lot of time and resources and you have a similar object already existing.Prototype pattern provides a mechanism to copy the original object to a new object and then modify it according to our needs. Prototype design pattern uses java cloning to copy the object.</li></ul><h2 id="Structural-Design-Patterns"><a href="#Structural-Design-Patterns" class="headerlink" title="Structural Design Patterns"></a>Structural Design Patterns</h2><blockquote><p>These design patterns concern class and object composition. Concept of inheritance is used to compose interfaces and define ways to compose objects to obtain new functionalities.</p></blockquote><h3 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h3><ul><li>Adapter design pattern is one of the structural design pattern and its used so that two unrelated interfaces can work together. The object that joins these unrelated interface is called an Adapter.</li></ul><h3 id="Composite"><a href="#Composite" class="headerlink" title="Composite"></a>Composite</h3><ul><li>Composite design pattern is used when we have to represent a part-whole hierarchy.</li></ul><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><ul><li>Proxy design pattern common uses are to control access or to provide a wrapper implementation for better performance.</li></ul><h3 id="Flyweight"><a href="#Flyweight" class="headerlink" title="Flyweight"></a>Flyweight</h3><ul><li>Use sharing to support large numbers of fine-grained objects efficiently</li></ul><h3 id="Facade"><a href="#Facade" class="headerlink" title="Facade"></a>Facade</h3><ul><li>Provide a unified interface to a set of interfaces in a subsystem. Facade Pattern defines a higher-level interface that makes the subsystem easier to use.</li></ul><h3 id="Bridge"><a href="#Bridge" class="headerlink" title="Bridge"></a>Bridge</h3><ul><li>Decouple an abstraction from its implementation so that the two can vary independently.</li></ul><h3 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h3><ul><li>Decorator design pattern is helpful in providing runtime modification abilities and hence more flexible. Its easy to maintain and extend when the number of choices are more.</li><li>The disadvantage of decorator design pattern is that it uses a lot of similar kind of objects (decorators).</li></ul><h2 id="Behavioral-Design-Patterns"><a href="#Behavioral-Design-Patterns" class="headerlink" title="Behavioral Design Patterns"></a>Behavioral Design Patterns</h2><blockquote><p>These design patterns are specifically concerned with communication between objects.</p></blockquote><h3 id="Template-Method"><a href="#Template-Method" class="headerlink" title="Template Method"></a>Template Method</h3><ul><li>Template method should consists of certain steps whose order is fixed and for some of the methods, implementation differs from base class to subclass. Template method should be final.</li><li>Most of the times, subclasses calls methods from super class but in template pattern, superclass template method calls methods from subclasses, this is known as Hollywood Principle ‚Äì ‚Äúdon‚Äôt call us, we‚Äôll call you.‚Äù.</li><li>Methods in base class with default implementation are referred as Hooks and they are intended to be overridden by subclasses, if you want some of the methods to be not overridden, you can make them final, for example in our case we can make buildFoundation() method final because if we don‚Äôt want subclasses to override it.</li></ul><h3 id="Media"><a href="#Media" class="headerlink" title="Media"></a>Media</h3><ul><li>Allows loose coupling by encapsulating the way disparate sets of objects interact and communicate with each other. Allows for the actions of each object set to vary independently of one another.</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kafka learn</title>
      <link href="/2019/06/11/kafka%20snippet/"/>
      <url>/2019/06/11/kafka%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="portÔºàconfluent-referenceÔºâ"><a href="#portÔºàconfluent-referenceÔºâ" class="headerlink" title="portÔºàconfluent referenceÔºâ"></a>portÔºàconfluent referenceÔºâ</h2><table><thead><tr><th align="left">Component</th><th align="left">Default Port</th></tr></thead><tbody><tr><td align="left">Zookeeper</td><td align="left">2181</td></tr><tr><td align="left">Apache Kafka brokers (plain text)</td><td align="left">9092</td></tr><tr><td align="left">Schema Registry REST API</td><td align="left">8081</td></tr><tr><td align="left">REST Proxy</td><td align="left">8082</td></tr><tr><td align="left">Kafka Connect REST API</td><td align="left">8083</td></tr><tr><td align="left">Confluent Control Center</td><td align="left">9021</td></tr></tbody></table><h2 id="System-Architecture"><a href="#System-Architecture" class="headerlink" title="System Architecture"></a>System Architecture</h2><p><img src="https://i.imgur.com/gG71h6m.png"></p><ul><li><strong>kafka Producer API:</strong> Applications directly producing data (ex: clickstream, logs, IoT).</li><li><strong>Kafka Connect Source API:</strong> Applications bridging between a datastore we don‚Äôt control and Kafka (ex: CDC, Postgres, MongoDB, Twitter, REST API).</li><li><strong>Kafka Streams API / KSQL:</strong> Applications wanting to consume from Kafka and produce back into Kafka, also called stream processing. Use KSQL if you think you can write your real-time job as SQL-like, use Kafka Streams API if you think you‚Äôre going to need to write complex logic for your job.</li><li><strong>Kafka Consumer API:</strong> Read a stream and perform real-time actions on it (e.g. send email‚Ä¶)</li><li><strong>Kafka Connect Sink API</strong>: Read a stream and store it into a target store (ex: Kafka to S3, Kafka to HDFS, Kafka to PostgreSQL, Kafka to MongoDB, etc.)</li></ul><p><img src="https://www.sohamkamani.com/basic_arch-e0b11d2ab5b62a78cb7fd26d3a9d279b.svg"></p><ol><li><strong>Zookeeper</strong> : Which is used by Kafka to maintain state between the nodes of the cluster.</li><li><strong>Kafka brokers</strong> : The ‚Äúpipes‚Äù in our pipeline, which store and emit data.</li><li><strong>Producers</strong> : That insert data into the cluster.</li><li><strong>Consumers</strong> : That read data from the cluster.</li></ol><p><img src="https://kafka.apache.org/22/images/kafka-apis.png"></p><h3 id="Creating-a-topic"><a href="#Creating-a-topic" class="headerlink" title="Creating a topic"></a>Creating a topic</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh \</span><br><span class="line">--create \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--zookeeper localhost:2181 \</span><br><span class="line">--partitions 3 \</span><br><span class="line">--replication-factor 2</span><br></pre></td></tr></table></figure><ul><li>The <code>paritions</code> options lets you decide how many brokers you want your data to be split between. Since we set up 3 brokers, we can set this option to 3.</li><li>The <code>replication-factor</code> describes how many copies of you data you want (in case one of the brokers goes down, you still have your data on the others).</li></ul><h3 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh \</span><br><span class="line">--broker-list localhost:9093,localhost:9094,localhost:9095 \</span><br><span class="line">--topic my-kafka-topic</span><br></pre></td></tr></table></figure><h3 id="Consumers"><a href="#Consumers" class="headerlink" title="Consumers"></a>Consumers</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh \</span><br><span class="line">--bootstrap-server localhost:9093 \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--from-beginning</span><br></pre></td></tr></table></figure><ul><li>The <code>bootstrap-server</code> can be any one of the brokers in the cluster.</li><li>The <code>from-beginning</code> option tells the cluster that you want all the messages that it currently has with it, even messages that we put into it previously.</li></ul><p>Try starting another consumer in a different terminal window:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh \</span><br><span class="line">--bootstrap-server localhost:9093 \</span><br><span class="line">--topic my-kafka-topic \</span><br><span class="line">--from-beginning \</span><br><span class="line">--group group2</span><br></pre></td></tr></table></figure><h2 id="Kafka-as-a-Messaging-System"><a href="#Kafka-as-a-Messaging-System" class="headerlink" title="Kafka as a Messaging System"></a>Kafka as a Messaging System</h2><ul><li><p>As with a queue the consumer group allows you to divide up processing over a collection of processes (the members of the consumer group). As with publish-subscribe, Kafka allows you to broadcast messages to multiple consumer groups.</p><p><img src="https://kafka.apache.org/22/images/consumer-groups.png"></p></li><li><p>Kafka does it better. By having a notion of parallelism‚Äîthe partition‚Äîwithin the topics, Kafka is able to provide both ordering guarantees and load balancing over a pool of consumer processes. This is achieved by assigning the partitions in the topic to the consumers in the consumer group so that each partition is consumed by exactly one consumer in the group. By doing this we ensure that the consumer is the only reader of that partition and consumes the data in order. Since there are many partitions this still balances the load over many consumer instances. Note however that there cannot be more consumer instances in a consumer group than partitions.</p></li><li><p>Each record consists of a key, a value, and a timestamp.</p></li></ul><h2 id="Kafka-as-a-Storage-System"><a href="#Kafka-as-a-Storage-System" class="headerlink" title="Kafka as a Storage System"></a>Kafka as a Storage System</h2><h2 id="Kafka-as-Stream-Processing"><a href="#Kafka-as-Stream-Processing" class="headerlink" title="Kafka as Stream Processing"></a>Kafka as Stream Processing</h2><h2 id="source-code"><a href="#source-code" class="headerlink" title="source code"></a>source code</h2><h3 id="Ê∫êÁ†ÅÊñá‰ª∂ÁªìÊûÑ"><a href="#Ê∫êÁ†ÅÊñá‰ª∂ÁªìÊûÑ" class="headerlink" title="Ê∫êÁ†ÅÊñá‰ª∂ÁªìÊûÑ"></a>Ê∫êÁ†ÅÊñá‰ª∂ÁªìÊûÑ</h3><table><thead><tr><th>ÁõÆÂΩï</th><th>‰ΩúÁî®</th></tr></thead><tbody><tr><td>bin</td><td>Â≠òÊîæÂèØÁõ¥Êé•Âú®LinuxÊàñWindows‰∏äËøêË°åÁöÑ.shÊñá‰ª∂Âíå.batÊñá‰ª∂ÔºåÂåÖÂê´KafkaÂ∏∏Áî®Êìç‰Ωú‰ª•ÂèäZooKeeper‰æøÊç∑ËÑöÊú¨</td></tr><tr><td>checkstyle</td><td>Â≠òÊîæ‰ª£Á†ÅËßÑËåÉÊ£ÄÊü•ÊñáÊ°£</td></tr><tr><td>clients</td><td>ÂÆ¢Êà∑Á´ØÁöÑÂÆûÁé∞</td></tr><tr><td>config</td><td>Â≠òÊîæÈÖçÁΩÆÊñá‰ª∂</td></tr><tr><td>connetct</td><td>Kafka ConnectÂ∑•ÂÖ∑ÁöÑÂÆûÁé∞</td></tr><tr><td>core</td><td>Ê†∏ÂøÉÊ®°Âùó</td></tr><tr><td>docs</td><td>ÂÆòÊñπÊñáÊ°£</td></tr><tr><td>examples</td><td>KafkaÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÁÆÄÂçïDemo</td></tr><tr><td>jmh-benchmarks</td><td>Âü∫ÂáÜÊµãËØïÊ®°Âùó</td></tr><tr><td>log4j-appender</td><td>Êó•ÂøóÊ®°Âùó</td></tr><tr><td>streams</td><td>Kafka StreamsÂÆ¢Êà∑Á´ØÂ∫ì</td></tr><tr><td>tools</td><td>Â∑•ÂÖ∑Á±ª</td></tr></tbody></table><h3 id="Ê†∏ÂøÉÊ®°ÂùóÁªìÊûÑ"><a href="#Ê†∏ÂøÉÊ®°ÂùóÁªìÊûÑ" class="headerlink" title="Ê†∏ÂøÉÊ®°ÂùóÁªìÊûÑ"></a>Ê†∏ÂøÉÊ®°ÂùóÁªìÊûÑ</h3><table><thead><tr><th>ÁõÆÂΩï</th><th>‰ΩúÁî®</th></tr></thead><tbody><tr><td>admin</td><td>ÁÆ°ÁêÜÊ®°ÂùóÔºåÊìç‰ΩúÂíåÁÆ°ÁêÜtopicÔºå broker, consumer groupÔºå recordsÁ≠â</td></tr><tr><td>api</td><td>Â∞ÅË£ÖË∞ÉÁî®</td></tr><tr><td>client</td><td>ProducerÁîü‰∫ßÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÁöÑ‰º†ÈÄí</td></tr><tr><td>cluster</td><td>Â≠òÊ¥ªÁöÑBrokerÈõÜÁæ§„ÄÅÂàÜÂå∫„ÄÅÂâØÊú¨‰ª•Âèä‰ªñ‰ª¨ÁöÑÂ∫ïÂ±ÇÂ±ûÊÄßÂíåÁõ∏‰∫íÂÖ≥Á≥ª</td></tr><tr><td>common</td><td>ÂºÇÂ∏∏Á±ª„ÄÅÊûö‰∏æÁ±ª„ÄÅÊ†ºÂºèÂåñÁ±ª„ÄÅÈÖçÁΩÆÁ±ªÁ≠â</td></tr><tr><td>consumer</td><td>ÊóßÁâàÊú¨ÁöÑÂ∫üÂºÉÊ∂àË¥πËÄÖÁ±ª</td></tr><tr><td>controller</td><td>KafkaÈõÜÁæ§ÊéßÂà∂‰∏≠ÂøÉÁöÑÈÄâ‰∏æÔºåÂàÜÂå∫Áä∂ÊÄÅÁÆ°ÁêÜÔºåÂàÜÂå∫ÂâØÊú¨Áä∂ÊÄÅÁÆ°ÁêÜÔºåÁõëÂê¨ZooKeeperÊï∞ÊçÆÂèòÂåñÁ≠â</td></tr><tr><td>coordinator</td><td>GroupCoordinatorÂ§ÑÁêÜ‰∏ÄËà¨ÁªÑÊàêÂëòËµÑÊ†ºÂíåÂÅèÁßªÈáè„ÄÇtransactionÁÆ°ÁêÜ‰∫ãÂä°</td></tr><tr><td>javaapi</td><td>ÁªôjavaË∞ÉÁî®ÁöÑÁîü‰∫ßËÄÖ„ÄÅÊ∂àË¥πËÄÖ„ÄÅÊ∂àÊÅØÈõÜapi</td></tr><tr><td>log</td><td>ÁÆ°ÁêÜlogÔºåÂÆÉÊòØÊ∂àÊÅØÂ≠òÂÇ®ÁöÑÂΩ¢ÂºèÔºåÂèØÂØπÂ∫îÂà∞Á£ÅÁõò‰∏äÁöÑ‰∏Ä‰∏™Êñá‰ª∂Â§π</td></tr><tr><td>message</td><td>Áî±Ê∂àÊÅØÂ∞ÅË£ÖËÄåÊàêÁöÑ‰∏Ä‰∏™ÂéãÁº©Ê∂àÊÅØÈõÜ</td></tr><tr><td>metrics</td><td>KafkaÁõëÊéßÊ®°Âùó</td></tr><tr><td>network</td><td>ÁΩëÁªúÁÆ°ÁêÜÊ®°ÂùóÔºåÂØπÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑÂ§ÑÁêÜ</td></tr><tr><td>producer</td><td>ÊóßÁâàÊú¨ÁöÑÂ∫üÂºÉÁîü‰∫ßËÄÖÁ±ª</td></tr><tr><td>security</td><td>ÊùÉÈôêÁÆ°ÁêÜ</td></tr><tr><td>serializer</td><td>Ê∂àÊÅØÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÂ§ÑÁêÜ</td></tr><tr><td>server</td><td>ÊúçÂä°Âô®Á´ØÁöÑÂÆûÁé∞</td></tr><tr><td>tools</td><td>ÂêÑÁßçÊéßÂà∂Âè∞Â∑•ÂÖ∑ÁöÑÂÆûÁé∞</td></tr><tr><td>utils</td><td>Â∑•ÂÖ∑Á±ª</td></tr><tr><td>zk</td><td>Êèê‰æõ‰∏éZooKeeper‰∫§‰∫íÁöÑÁÆ°ÁêÜÊñπÊ≥ïÂíåÂú®ÁÆ°ÈÅì‰πã‰∏äÁöÑÊõ¥È´òÁ∫ßÂà´ÁöÑKafkaÁâπÂÆöÊìç‰Ωú</td></tr><tr><td>zookeeper</td><td>‰∏Ä‰∏™‰øÉËøõÁÆ°ÈÅì‰º†ËæìËØ∑Ê±ÇÁöÑZooKeeperÂÆ¢Êà∑Á´Ø</td></tr></tbody></table><h1 id="‰∏ªÈ¢òÂàÜÂå∫"><a href="#‰∏ªÈ¢òÂàÜÂå∫" class="headerlink" title="‰∏ªÈ¢òÂàÜÂå∫"></a>‰∏ªÈ¢òÂàÜÂå∫</h1><ul><li>Ë∞ÉÊï¥ÂàÜÂå∫</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper localhost:2181 --alter --topic my-topic --partitions 10</span><br></pre></td></tr></table></figure><ul><li>Êü•ÁúãÂàÜÂå∫</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper localhost:2181 --describe --topic my-topic</span><br></pre></td></tr></table></figure><h1 id="Restful-API"><a href="#Restful-API" class="headerlink" title="Restful API"></a>Restful API</h1><h2 id="AVRO‰∏ªÈ¢òÁõ∏ÂÖ≥"><a href="#AVRO‰∏ªÈ¢òÁõ∏ÂÖ≥" class="headerlink" title="AVRO‰∏ªÈ¢òÁõ∏ÂÖ≥"></a>AVRO‰∏ªÈ¢òÁõ∏ÂÖ≥</h2><blockquote><p>‰∏ÄËà¨schema registry ÈªòËÆ§Á´ØÂè£ÊòØ8081ÔºàÊúâÊó∂ÂÄôÈÅøÂÖç‰∏éflink-jobmanagerÁ´ØÂè£ÂÜ≤Á™ÅÔºåÊîπ‰∏∫Âà´ÁöÑÁ´ØÂè£Âè∑ 8091Ôºâ</p></blockquote><ul><li><p>Ëé∑ÂèñÊâÄÊúâ‰∏ªÈ¢ò‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET &quot;http://&lt;schema-registry-url&gt;:&lt;port&gt;/subjects&quot;</span><br></pre></td></tr></table></figure></li><li><p>Ê†πÊçÆschema idÊü•‰∏ãÁõ∏ÂÖ≥‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET &quot;http://&lt;schema-registry-url&gt;:&lt;port&gt;/schemas/ids/&lt;schema-id&gt;&quot;</span><br></pre></td></tr></table></figure></li><li><p>Ëé∑ÂèñÊåáÂÆö‰∏ªÈ¢òkey/valueÁõ∏ÂÖ≥schema‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://&lt;schema-registry-url&gt;:&lt;port&gt;/subjects/&lt;topic-name&gt;-value/versions/latest</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://&lt;schema-registry-url&gt;:&lt;port&gt;/subjects/&lt;topic-name&gt;-key/versions/latest</span><br></pre></td></tr></table></figure></li></ul><h1 id="ÂèÇÊï∞Ë∞É‰ºò"><a href="#ÂèÇÊï∞Ë∞É‰ºò" class="headerlink" title="ÂèÇÊï∞Ë∞É‰ºò"></a>ÂèÇÊï∞Ë∞É‰ºò</h1><h1 id="producer"><a href="#producer" class="headerlink" title="producer"></a>producer</h1><ul><li>batch.size ÈªòËÆ§16384</li><li>request.time.ms ÈªòËÆ§30000Ôºà30ÁßíÔºâ</li></ul><h2 id="ÂàÜÂå∫ÂíåÂâØÊú¨"><a href="#ÂàÜÂå∫ÂíåÂâØÊú¨" class="headerlink" title="ÂàÜÂå∫ÂíåÂâØÊú¨"></a>ÂàÜÂå∫ÂíåÂâØÊú¨</h2><p>Kafka‰∏≠ÁöÑÂàÜÂå∫ÔºàPartitionÔºâÂíåÂâØÊú¨ÔºàReplicaÔºâÊòØ‰∏§‰∏™‰∏çÂêåÁöÑÊ¶ÇÂøµÔºåÂÆÉ‰ª¨Âú®Ê∂àÊÅØ‰º†ËæìÂíåÂ≠òÂÇ®ÊñπÈù¢Ëµ∑Âà∞‰∏çÂêåÁöÑ‰ΩúÁî®„ÄÇ</p><ol><li>ÂàÜÂå∫ÔºàPartitionÔºâ</li></ol><p>KafkaÁöÑÊØè‰∏™TopicÈÉΩÂèØ‰ª•Ë¢´ÂàÜÊàêÂ§ö‰∏™PartitionÔºåÊØè‰∏™PartitionÂè™‰ºöË¢´‰∏Ä‰∏™Consumer Group‰∏≠ÁöÑ‰∏Ä‰∏™ConsumerÊ∂àË¥π„ÄÇÂú®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÈÄöËøáÂ∞ÜÊï∞ÊçÆÂàÜÊï£Âà∞Â§ö‰∏™Partition‰∏≠ÔºåÂèØ‰ª•‰ΩøÂæóÂêÑ‰∏™ËäÇÁÇπË¥üËΩΩÂùáË°°ÔºåÂπ∂‰∏îÂèØ‰ª•Â§ÑÁêÜÊõ¥Â§ßÈáèÁ∫ßÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™PartitionÂÜÖÈÉ®Áª¥Êä§‰∫Ü‰∏Ä‰∏™ÈÄíÂ¢ûÁöÑoffsetÔºàÂÅèÁßªÈáèÔºâÔºåÈÄöËøáoffsetÊù•Ê†áËØÜConsumerÂú®ËØ•Partition‰∏≠Â∑≤ÁªèÊ∂àË¥πÁöÑÊ∂àÊÅØ‰ΩçÁΩÆ„ÄÇ</p><ol><li>ÂâØÊú¨ÔºàReplicaÔºâ</li></ol><p>Kafka‰∏≠ÁöÑÂâØÊú¨ÊòØÊåáÊØè‰∏™PartitionÁöÑÂ§á‰ªΩÔºå‰∏Ä‰∏™PartitionÂèØ‰ª•ÊúâÂ§ö‰∏™ÂâØÊú¨ÔºåÊØè‰∏™ÂâØÊú¨ÈÉΩ‰øùÂ≠òÁùÄÂÆåÊï¥ÁöÑÊï∞ÊçÆÂâØÊú¨„ÄÇÂâØÊú¨‰πãÈó¥Êúâ‰∏Ä‰∏™Leader-FollowerÁöÑÂÖ≥Á≥ªÔºåÂÖ∂‰∏≠‰∏Ä‰∏™ÂâØÊú¨‰Ωú‰∏∫LeaderÔºåÂÖ∂‰ªñÂâØÊú¨‰Ωú‰∏∫Follower„ÄÇÂÆ¢Êà∑Á´ØÂè™ËÉΩÂêëLeaderÂèëÈÄÅËØªÂÜôËØ∑Ê±ÇÔºåËÄåFollowerÂè™Áî®‰∫éÂ§á‰ªΩÂíåÂêåÊ≠•Êï∞ÊçÆÔºå‰∏çËÉΩÁõ¥Êé•Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç„ÄÇÂΩìLeaderÂá∫Áé∞ÊïÖÈöúÊó∂ÔºåKafka‰ºöËá™Âä®Â∞ÜFollowerÂçáÁ∫ß‰∏∫Êñ∞ÁöÑLeaderÔºå‰øùËØÅÊúçÂä°ÁöÑÂèØÁî®ÊÄß„ÄÇ</p><p><strong>ÊÄªÁªìÔºöÂàÜÂå∫ÂÆûÁé∞‰∫ÜÊï∞ÊçÆÁöÑÊ∞¥Âπ≥ÂàáÂàÜÂíåË¥üËΩΩÂùáË°°ÔºåËÄåÂâØÊú¨ÂàôÊèê‰æõ‰∫ÜÊï∞ÊçÆÁöÑÂÜó‰ΩôÂ§á‰ªΩÂíåÈ´òÂèØÁî®ÊÄßÔºåÁ°Æ‰øùÊï∞ÊçÆÂÆâÂÖ®Âíå‰∏öÂä°ËøûÁª≠ÊÄß„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÈúÄË¶ÅÊ†πÊçÆÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÈúÄÊ±ÇÂíåÊäÄÊúØËßÑÂàíÊù•ËÆæÁΩÆÂàÜÂå∫ÂíåÂâØÊú¨ÁöÑÊï∞ÈáèÔºå‰ª•ÊèêÈ´òKafkaÊúçÂä°ÁöÑÂèØÈù†ÊÄßÂíåÊÄßËÉΩ„ÄÇ</strong></p><h2 id="Ê∂àË¥πËÄÖ"><a href="#Ê∂àË¥πËÄÖ" class="headerlink" title="Ê∂àË¥πËÄÖ"></a>Ê∂àË¥πËÄÖ</h2><ul><li><p>Ê∂àË¥πsasl_plaintext scram-sha-256ËÆ§ËØÅÁöÑ‰∏ªÈ¢ò</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer.sh --bootstrap-server your_kafka_bootstrap_servers --topic your_topic --group your_consumer_group --consumer.config client-sasl.properties --from-beginning</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠client-sasl.properties‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">security.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism=SCRAM-SHA-256</span><br><span class="line">sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;your_username&quot; password=&quot;your_password&quot;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Ê∂àË¥πËÄÖÁªÑ"><a href="#Ê∂àË¥πËÄÖÁªÑ" class="headerlink" title="Ê∂àË¥πËÄÖÁªÑ"></a>Ê∂àË¥πËÄÖÁªÑ</h2><ul><li><p>Êü•ËØ¢Ê∂àË¥πËÄÖÁªÑÁöÑÂÅèÁßªÈáè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups.sh --bootstrap-server &lt;bootstrap-server&gt; --group &lt;consumer-group&gt; --describe</span><br></pre></td></tr></table></figure></li><li><p>ÊåáÂÆöÊ∂àË¥πËÄÖÁªÑÁöÑÂÅèÁßªÈáè</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups.sh --bootstrap-server &lt;bootstrap-server&gt; --group &lt;consumer-group&gt; --topic &lt;topic&gt; --reset-offsets --to-offset &lt;new-offset&gt; --execute</span><br></pre></td></tr></table></figure></li><li><p>ÊåáÂÆöÊ∂àË¥πÁªÑÂÅèÁßªÈáèÂà∞ÊúÄÊó©</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups.sh --bootstrap-server &lt;bootstrap-server&gt; --group &lt;consumer-group&gt; --reset-offsets --to-earliest --execute --topic your_topic</span><br></pre></td></tr></table></figure></li></ul><h2 id="‰∏ªÈ¢ò"><a href="#‰∏ªÈ¢ò" class="headerlink" title="‰∏ªÈ¢ò"></a>‰∏ªÈ¢ò</h2><ul><li><p>‰Ωø‰∏∫ÁâπÂÆö‰∏ªÈ¢òÔºàtopicÔºâÈÖçÁΩÆÊï∞ÊçÆÁöÑ‰øùÁïôÊó∂Èó¥„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-configs.sh --bootstrap-server &lt;KAFKA_BROKER_ADDRESS&gt; --alter --entity-type topics --entity-name &lt;TOPIC_NAME&gt; --add-config retention.ms=&lt;RETENTION_TIME_IN_MILLISECONDS&gt;</span><br></pre></td></tr></table></figure><p>eg:(ËÆæÁΩÆmy-topic‰∏ªÈ¢ò‰øùÁïô‰∏ÄÂ§©Êï∞ÊçÆ)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-configs.sh --bootstrap-server localhost:9092 --alter --entity-type topics --entity-name my-topic --add-config retention.ms=86400000</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javarevisited</title>
      <link href="/2019/05/24/hadoop%20learn/"/>
      <url>/2019/05/24/hadoop%20learn/</url>
      
        <content type="html"><![CDATA[<p><img src="./img/Hadoop-Multi-node-Cluster.png"></p><p><img src="./img/hdfsarchitecture.gif"></p><h3 id="NameNode"><a href="#NameNode" class="headerlink" title="NameNode"></a>NameNode</h3><ul><li>The <strong>NameNode</strong> executes file system namespace operations like opening, closing, and renaming files and directories.It also determines the mapping of blocks to DataNodes.</li></ul><h3 id="DataNodes"><a href="#DataNodes" class="headerlink" title="DataNodes"></a>DataNodes</h3><ul><li>The <strong>DataNodes</strong> are responsible for serving read and write requests from the file system‚Äôs clients. The DataNodes also perform block creation, deletion, and replication upon instruction from the NameNode.</li><li>The DataNode stores HDFS data in files in its local file system.The DataNode has no knowledge about HDFS files. It stores each block of HDFS data in a separate file in its local file system.</li></ul><h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><ul><li><p>a file is split into one or more blocks and these blocks are stored in a set of DataNodes. </p></li><li><p>all blocks in a file except the last block are the same size.</p></li><li><p>Files in HDFS are write-once and have strictly one writer at any time.</p></li></ul><h3 id="The-Persistence-of-File-System-Metadata"><a href="#The-Persistence-of-File-System-Metadata" class="headerlink" title="The Persistence of File System Metadata"></a>The Persistence of File System Metadata</h3><ul><li>The NameNode uses a transaction log called the <strong>EditLog</strong> to persistently record every change that occurs to file system metadata.</li><li>The entire file system namespace, including the mapping of blocks to files and file system properties, is stored in a file called the <strong>FsImage</strong>. The FsImage is stored as a file in the NameNode‚Äôs local file system too.</li></ul><hr><p><strong>Blockreport</strong>: DataNode scans through its local file system, generates a list of all HDFS data blocks that correspond to each of these local files and sends this report to the NameNode</p><h3 id="Ê∫êÁ†Å"><a href="#Ê∫êÁ†Å" class="headerlink" title="Ê∫êÁ†Å"></a>Ê∫êÁ†Å</h3><p>2.7.3Ê∫êÁ†Å</p><ul><li>ÁºñËØëÈóÆÈ¢ò</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ÈóÆÈ¢òÔºöFailed to parse plugin descriptor for org.apache.hadoop:hadoop-maven-plugins</span><br><span class="line"></span><br><span class="line">Ëß£ÂÜ≥ÔºöcdÂà∞hadoop-maven-pluginsÔºåÊâßË°åmvn clean ÁÑ∂Âêé install ‰∏Ä‰∏ãÔºåÂÜçÊâßË°åÁºñËØëÈÄöËøá</span><br></pre></td></tr></table></figure><h1 id="Á´ØÂè£"><a href="#Á´ØÂè£" class="headerlink" title="Á´ØÂè£"></a>Á´ØÂè£</h1><h1 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h1><h2 id="DataNode"><a href="#DataNode" class="headerlink" title="DataNode"></a>DataNode</h2><pre><code> 50010  dfs.datanode.address   datanodeÊúçÂä°Á´ØÂè£ÔºåÁî®‰∫éÊï∞ÊçÆ‰º†Ëæì50075  dfs.datanode.http.address  httpÊúçÂä°ÁöÑÁ´ØÂè£50475  dfs.datanode.https.address  httpsÊúçÂä°ÁöÑÁ´ØÂè£50020  dfs.datanode.ipc.address   ipcÊúçÂä°ÁöÑÁ´ØÂè£</code></pre><h2 id="NameNode-1"><a href="#NameNode-1" class="headerlink" title="NameNode"></a>NameNode</h2><p>‚Äã     50070  dfs.namenode.http-address  httpÊúçÂä°ÁöÑÁ´ØÂè£ Ôºà<strong>ËÆøÈóÆhadoopÁöÑÁÆ°ÁêÜÈ°µÈù¢</strong>Ôºâ<br>‚Äã    50470  dfs.namenode.https-address  httpsÊúçÂä°ÁöÑÁ´ØÂè£<br>‚Äã    8020   fs.defaultFS   Êé•Êî∂ClientËøûÊé•ÁöÑRPCÁ´ØÂè£ÔºåÁî®‰∫éËé∑ÂèñÊñá‰ª∂Á≥ªÁªümetadata‰ø°ÊÅØ„ÄÇ</p><h2 id="journalnode"><a href="#journalnode" class="headerlink" title="journalnode"></a>journalnode</h2><pre><code> 8485   dfs.journalnode.rpc-address   RPCÊúçÂä° 8480   dfs.journalnode.http-address   HTTPÊúçÂä°</code></pre><h2 id="ZKFC"><a href="#ZKFC" class="headerlink" title="ZKFC"></a>ZKFC</h2><pre><code> 8019   dfs.ha.zkfc.port   ZooKeeper FailoverControllerÔºåÁî®‰∫éNN HA</code></pre><h2 id="YARN"><a href="#YARN" class="headerlink" title="YARN"></a>YARN</h2><h2 id="ResourceManager"><a href="#ResourceManager" class="headerlink" title="ResourceManager"></a>ResourceManager</h2><pre><code>8032  yarn.resourcemanager.address   RMÁöÑapplications manager(ASM)Á´ØÂè£8030  yarn.resourcemanager.scheduler.address  schedulerÁªÑ‰ª∂ÁöÑIPCÁ´ØÂè£8031  yarn.resourcemanager.resource-tracker.address  IPC8033  yarn.resourcemanager.admin.address  IPC8088  yarn.resourcemanager.webapp.address   httpÊúçÂä°Á´ØÂè£Ôºà**ËÆøÈóÆyarnÁöÑÁÆ°ÁêÜÈ°µÈù¢**Ôºâ</code></pre><h2 id="NodeManager"><a href="#NodeManager" class="headerlink" title="NodeManager"></a>NodeManager</h2> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">8040  yarn.nodemanager.localizer.address  localizer IPC</span><br><span class="line">8042  yarn.nodemanager.webapp.address   httpÊúçÂä°Á´ØÂè£Ôºà**‰ªéËäÇÁÇπnodeÁÆ°ÁêÜÁïåÈù¢ÔºåÂèØÊü•ÁúãËäÇÁÇπÁöÑ‰ªªÂä°Â§ÑÁêÜ‰ø°ÊÅØ**Ôºâ</span><br><span class="line">8041  yarn.nodemanager.address   NM‰∏≠container managerÁöÑÁ´ØÂè£</span><br></pre></td></tr></table></figure><h2 id="JobHistory-Server"><a href="#JobHistory-Server" class="headerlink" title="JobHistory Server"></a>JobHistory Server</h2><pre><code>10020   mapreduce.jobhistory.address   IPC19888   mapreduce.jobhistory.webapp.address   httpÊúçÂä°Á´ØÂè£</code></pre><h1 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h1>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Master</span><br><span class="line">    60000   hbase.master.port  IPC</span><br><span class="line">    60010   hbase.master.info.port  httpÊúçÂä°Á´ØÂè£</span><br><span class="line">RegionServer</span><br><span class="line">    60020   hbase.regionserver.port   IPC</span><br><span class="line">    60030   hbase.regionserver.info.port   httpÊúçÂä°Á´ØÂè£</span><br><span class="line">HQuorumPeer</span><br><span class="line">    2181  hbase.zookeeper.property.clientPort   HBase-managed ZK modeÔºå‰ΩøÁî®Áã¨Á´ãÁöÑZooKeeperÈõÜÁæ§Âàô‰∏ç‰ºöÂêØÁî®ËØ•Á´ØÂè£„ÄÇ</span><br><span class="line">    2888  hbase.zookeeper.peerport   HBase-managed ZK modeÔºå‰ΩøÁî®Áã¨Á´ãÁöÑZooKeeperÈõÜÁæ§Âàô‰∏ç‰ºöÂêØÁî®ËØ•Á´ØÂè£„ÄÇ</span><br><span class="line">    3888  hbase.zookeeper.leaderport  HBase-managed ZK modeÔºå‰ΩøÁî®Áã¨Á´ãÁöÑZooKeeperÈõÜÁæ§Âàô‰∏ç‰ºöÂêØÁî®ËØ•Á´ØÂè£„ÄÇ</span><br></pre></td></tr></table></figure><h1 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Metastore</span><br><span class="line">     9083  /etc/default/hive-metastore‰∏≠export PORT=&lt;port&gt;Êù•Êõ¥Êñ∞ÈªòËÆ§Á´ØÂè£   </span><br><span class="line">HiveServer</span><br><span class="line">     10000   /etc/hive/conf/hive-env.sh‰∏≠export HIVE_SERVER2_THRIFT_PORT=&lt;port&gt;Êù•Êõ¥Êñ∞ÈªòËÆ§Á´ØÂè£   </span><br></pre></td></tr></table></figure><h1 id="ZooKeeper"><a href="#ZooKeeper" class="headerlink" title="ZooKeeper"></a>ZooKeeper</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Server</span><br><span class="line">     2181  /etc/zookeeper/conf/zoo.cfg‰∏≠clientPort=&lt;port&gt;  ÂØπÂÆ¢Êà∑Á´ØÊèê‰æõÊúçÂä°ÁöÑÁ´ØÂè£</span><br><span class="line">     2888  /etc/zookeeper/conf/zoo.cfg‰∏≠server.x=[hostname]:nnnnn[:nnnnn]ÔºåÊ†áËìùÈÉ®ÂàÜ  followerÁî®Êù•ËøûÊé•Âà∞leaderÔºåÂè™Âú®leader‰∏äÁõëÂê¨ËØ•Á´ØÂè£„ÄÇ</span><br><span class="line">     3888  /etc/zookeeper/conf/zoo.cfg‰∏≠server.x=[hostname]:nnnnn[:nnnnn]ÔºåÊ†áËìùÈÉ®ÂàÜ  Áî®‰∫éleaderÈÄâ‰∏æÁöÑ„ÄÇÂè™Âú®electionAlgÊòØ1,2Êàñ3(ÈªòËÆ§)Êó∂ÈúÄË¶Å„ÄÇ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop snippet</title>
      <link href="/2019/05/24/hadoop%20snippt/"/>
      <url>/2019/05/24/hadoop%20snippt/</url>
      
        <content type="html"><![CDATA[<h1 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h1><h2 id="1-Create-a-directory-in-HDFS-at-given-path-s"><a href="#1-Create-a-directory-in-HDFS-at-given-path-s" class="headerlink" title="1. Create a directory in HDFS at given path(s)."></a>1. Create a directory in HDFS at given path(s).</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir &lt;paths&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop dfs -mkdir /user/saurzcode/dir1 /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="2-List-the-contents-of-a-directory"><a href="#2-List-the-contents-of-a-directory" class="headerlink" title="2.  List the contents of a directory."></a>2.  List the contents of a directory.</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls &lt;args&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls /user/saurzcode</span><br></pre></td></tr></table></figure><h2 id="3-Upload-and-download-a-file-in-HDFS"><a href="#3-Upload-and-download-a-file-in-HDFS" class="headerlink" title="3. Upload and download a file in HDFS."></a>3. Upload and download a file in HDFS.</h2><p><strong>Upload:</strong></p><p><strong>hdfs fs -put:</strong></p><p>Copy single src file, or multiple src files from local file system to the hdfs data file system</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put &lt;localsrc&gt; ... &lt;HDFS_dest_Path&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put /home/saurzcode/Samplefile.txt  /user/saurzcode/dir3/</span><br></pre></td></tr></table></figure><p><strong>*Download:</strong>*</p><p><strong>hdfs fs -get:</strong></p><p>Copies/Downloads files to the local file system</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get &lt;hdfs_src&gt; &lt;localdst&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get /user/saurzcode/dir3/Samplefile.txt /home/</span><br></pre></td></tr></table></figure><h2 id="4-See-contents-of-a-file"><a href="#4-See-contents-of-a-file" class="headerlink" title="4. See contents of a file"></a>4. See contents of a file</h2><p>Same as unix cat command:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cat &lt;path[filename]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cat /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><h2 id="5-Copy-a-file-from-source-to-destination"><a href="#5-Copy-a-file-from-source-to-destination" class="headerlink" title="5. Copy a file from source to destination"></a>5. Copy a file from source to destination</h2><p>This command allows multiple sources as well in which case the destination must be a directory.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cp &lt;source&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cp /user/saurzcode/dir1/abc.txt /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="6-Copy-a-file-from-To-Local-file-system-to-HDFS"><a href="#6-Copy-a-file-from-To-Local-file-system-to-HDFS" class="headerlink" title="6. Copy a file from/To Local file system to HDFS"></a>6. Copy a file from/To Local file system to HDFS</h2><p><strong>copyFromLocal</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyFromLocal &lt;localsrc&gt; URI</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyFromLocal /home/saurzcode/abc.txt  /user/saurzcode/abc.txt</span><br></pre></td></tr></table></figure><p>Similar to put command, except that the source is restricted to a local file reference.</p><p><strong>copyToLocal</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyToLocal [-ignorecrc] [-crc] URI &lt;localdst&gt;</span><br></pre></td></tr></table></figure><p>Similar to get command, except that the destination is restricted to a local file reference.</p><h2 id="7-Move-file-from-source-to-destination"><a href="#7-Move-file-from-source-to-destination" class="headerlink" title="7. Move file from source to destination."></a>7. Move file from source to destination.</h2><p>Note:- Moving files across filesystem is not permitted.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mv &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mv /user/saurzcode/dir1/abc.txt /user/saurzcode/dir2</span><br></pre></td></tr></table></figure><h2 id="8-Remove-a-file-or-directory-in-HDFS"><a href="#8-Remove-a-file-or-directory-in-HDFS" class="headerlink" title="8. Remove a file or directory in HDFS."></a>8. Remove a file or directory in HDFS.</h2><p>Remove files specified as argument. Deletes directory only when it is empty</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rm &lt;arg&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rm /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><p><strong>*Recursive version of delete.</strong>*</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rmr &lt;arg&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rmr /user/saurzcode/</span><br></pre></td></tr></table></figure><h2 id="9-Display-last-few-lines-of-a-file"><a href="#9-Display-last-few-lines-of-a-file" class="headerlink" title="9. Display last few lines of a file."></a>9. Display last few lines of a file.</h2><p>Similar to tail command in Unix.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -tail &lt;path[filename]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -tail /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><h2 id="10-Display-the-aggregate-length-of-a-file"><a href="#10-Display-the-aggregate-length-of-a-file" class="headerlink" title="10. Display the aggregate length of a file."></a>10. Display the aggregate length of a file.</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage :</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -du &lt;path&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br><span class="line">hdfs dfs -du /user/saurzcode/dir1/abc.txt</span><br></pre></td></tr></table></figure><p>Please comment which of these commands you found most useful while dealing with Hadoop /HDFS.</p><h2 id="11-Êü•ÁúãÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂"><a href="#11-Êü•ÁúãÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂" class="headerlink" title="11. Êü•ÁúãÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂"></a>11. Êü•ÁúãÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -lsr /your/hdfs/directory</span><br></pre></td></tr></table></figure><h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><h2 id="Hadoop-Operation-category-READ-is-not-supported-in-state-standby"><a href="#Hadoop-Operation-category-READ-is-not-supported-in-state-standby" class="headerlink" title="Hadoop Operation category READ is not supported in state standby"></a>Hadoop Operation category READ is not supported in state standby</h2><ul><li><p>Êä•ÈîôÂéüÂõ†<br>hadoopÈõÜÁæ§‰∏≠ÁöÑ‰∏§‰∏™NameNodeÂùá‰∏∫standbyÁä∂ÊÄÅ„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs haadmin -getServiceState nn1</span><br><span class="line">hdfs haadmin -getServiceState nn2</span><br></pre></td></tr></table></figure></li></ul><p>‚Äã        Â¶ÇÊûú‰∏§‰∏™NameNodeÂùá‰∏∫standbyÁä∂ÊÄÅÔºåÈÇ£‰πàÂæàÊúâÂèØËÉΩÊòØDFSZKFailoverControllerÂá∫Áé∞‰∫ÜÈóÆÈ¢ò„ÄÇ</p><ul><li><p>Êä•ÈîôËß£ÂÜ≥</p><ul><li><p>ÊâãÂä®ÊîπÂèòÂÖ∂‰∏≠‰∏Ä‰∏™NameNodeÁöÑÁä∂ÊÄÅ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs haadmin -transitionToActive -forcemanual nn1</span><br></pre></td></tr></table></figure></li><li><p>Â¶ÇÊûúÊâãÂä®ÊîπÂèòÁä∂ÊÄÅ‰∏çËÉΩËß£ÂÜ≥ÈóÆÈ¢òÔºåÈÇ£Â∞±ÈáçÂêØdfs</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stop-dfs.sh</span><br><span class="line">start-dfs.sh</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ÂÜçÊ£ÄÊü•NameNodeÁä∂ÊÄÅ</p><p>Ê≠§Êó∂Ê≠£Â∏∏Áä∂ÊÄÅÊòØnn1‰∏∫activeÔºånn2‰∏∫standby</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmq learn</title>
      <link href="/2019/05/14/rabbitmq/"/>
      <url>/2019/05/14/rabbitmq/</url>
      
        <content type="html"><![CDATA[<ul><li><p>Êü•ËØ¢Â∑≤Êúâqueue</p><p><code>sudo rabbitmqctl list_queues</code></p></li><li><p>Êü•ËØ¢Â∑≤Êúâexchanges</p><p><code>sudo rabbitmqctl list_exchanges</code></p></li></ul><h2 id="Publish-Subscribe"><a href="#Publish-Subscribe" class="headerlink" title="Publish/Subscribe"></a>Publish/Subscribe</h2><ul><li><p>Exchanges</p><p>There are a few exchange types available: <strong>direct</strong>, <strong>topic</strong>, <strong>headers</strong> and <strong>fanout</strong>.</p></li><li><p>Bindings</p><p>A binding is a relationship between an exchange and a queue</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> rabbitmq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bigdata snippet</title>
      <link href="/2019/05/05/bigdata/"/>
      <url>/2019/05/05/bigdata/</url>
      
        <content type="html"><![CDATA[<h2 id="BIG-DATA-What-is-Types-Characteristics-amp-Example"><a href="#BIG-DATA-What-is-Types-Characteristics-amp-Example" class="headerlink" title="BIG DATA: What is, Types, Characteristics &amp; Example"></a>BIG DATA: What is, Types, Characteristics &amp; Example</h2><ul><li>Big Data is defined as data that is huge in size. Bigdata is a term used to describe a collection of data that is huge in size and yet growing exponentially with time.</li><li>Examples of Big Data generation includes stock exchanges, social media sites, jet engines, etc.</li><li>Big Data could be 1) Structured, 2) Unstructured, 3) Semi-structured</li><li>Volume, Variety, Velocity, and Variability are few Characteristics of Bigdata</li><li>Improved customer service, better operational efficiency, Better Decision Making are few advantages of Bigdata</li></ul><h2 id="Hadoop-EcoSystem-and-Components"><a href="#Hadoop-EcoSystem-and-Components" class="headerlink" title="Hadoop EcoSystem and Components"></a>Hadoop EcoSystem and Components</h2><p><img src="./img/061114_0803_LearnHadoop4.png"></p><h3 id="Hadoop-Architecture"><a href="#Hadoop-Architecture" class="headerlink" title="Hadoop Architecture"></a>Hadoop Architecture</h3><p><img src="./img/hadoop-architecture.png"></p><h4 id="HDFS-Architecture"><a href="#HDFS-Architecture" class="headerlink" title="HDFS Architecture"></a>HDFS Architecture</h4><p>HDFS cluster primarily consists of a <strong>NameNode</strong> that manages the file system <strong>Metadata</strong> and a <strong>DataNodes</strong> that stores the <strong>actual data</strong>.</p><ul><li><p>Read Operation In HDFS</p><p><img src="./img/061114_0923_LearnHDFSAB1.png"></p></li><li><p>Write Operation In HDFS</p><p><img src="./img/061114_0923_LearnHDFSAB2.png"></p></li></ul><h4 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h4><p>The whole process goes through four phases of execution namely, splitting, mapping, shuffling, and reducing.</p><p><img src="./img/061114_0930_Introductio1.png"></p><ol><li><strong>Jobtracker</strong>: Acts like a <strong>master</strong> (responsible for complete execution of submitted job)</li><li><strong>Multiple Task Trackers</strong>: Acts like <strong>slaves,</strong> each of them performing the job</li></ol><p><img src="./img/061114_0930_Introductio2.png"></p>]]></content>
      
      
      <categories>
          
          <category> bigdata </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vmware snippet</title>
      <link href="/2019/04/20/vmware/"/>
      <url>/2019/04/20/vmware/</url>
      
        <content type="html"><![CDATA[<h3 id="Áî®Êà∑"><a href="#Áî®Êà∑" class="headerlink" title="Áî®Êà∑"></a>Áî®Êà∑</h3><ul><li><p>Êñ∞Â¢ûÁî®Êà∑</p><p><code>adduser username</code></p><p><code>passwd username</code></p><p><code>usermod -aG wheel username</code></p><p><code>su - username</code></p></li></ul><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><ul><li><p>ÂÆâË£ÖÂÆåÊØï‰πãÂêéÔºåÈúÄË¶ÅËÆæÁΩÆIPÂàÜÈÖç</p><ol><li><p><code>cd /etc/sysconfig/network-scripts/</code></p></li><li><p>ÂÜçËøõÂÖ•ÁºñËæë<code>ifcfg-e**</code> Êñá‰ª∂ ÊâßË°åÂëΩ‰ª§<br><code>vi ifcfg-e**</code></p></li><li><p>‰øÆÊîπONBOOTÈ°π</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ÂÖ∂‰∏≠ÈÉ®ÂàÜÂÜÖÂÆπÂ¶Ç‰∏ãÔºö </span><br><span class="line">DEVICE=eth0 #ËÆæÂ§áÂêçÁß∞ÔºåÂèØÊ†πÊçÆifcofnigÂëΩ‰ª§Êü•ÁúãÂà∞„ÄÇ </span><br><span class="line">BOOTPROTO=dhcp #ËøûÊé•ÊñπÂºèÔºådhcp‰ºöËá™Âä®ÂàÜÈÖçÂú∞ÂùÄÔºåÊ≠§Êó∂‰∏çÈúÄË¶ÅÂú®‰∏ãÈù¢ËÆæÁΩÆipÂíåÁΩëÂÖ≥ </span><br><span class="line">ONBOOT=yes #yesË°®Á§∫ÂêØÂä®Â∞±ÊâßË°åËØ•ÈÖçÁΩÆÔºåÈúÄË¶ÅÊîπ‰∏∫yes</span><br></pre></td></tr></table></figure><ol start="4"><li><p>‰øÆÊîπÂÆåÂêéÈúÄË¶ÅÈáçÂêØÁΩëÁªúËÆæÁΩÆÔºåÊâßË°å</p><p><code>service network restart</code></p></li></ol></li><li><p>ËÆæÁΩÆÈùôÊÄÅIP</p><ul><li><p><a href="https://blog.csdn.net/clevercode/article/details/50574695">ËôöÊãüÊú∫ËÆæÁΩÆ</a></p></li><li><p>ÂÆø‰∏ªÊú∫Âô®ËÆæÁΩÆ</p><p>ÈúÄË¶ÅËÆæÁΩÆvmnet8ÁöÑip‰∏∫Âêå‰∏ÄÁΩëÊÆµÁöÑÈÖçÁΩÆ</p></li></ul></li></ul><h3 id="jdk"><a href="#jdk" class="headerlink" title="jdk"></a>jdk</h3><ul><li><p>ÂÆâË£Öjdk</p><p><code>sudo yum install java-1.8.0-openjdk-devel</code></p><ul><li>find path</li></ul><p><code>update-alternatives --config java</code></p><ul><li>config .bashrc</li></ul><p><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64/jre</code></p></li></ul><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ul><li><p>ÊéàÊùÉÊâÄÊúâÊú∫Âô®ÂèØ‰ª•‰ªéÂ§ñÁïåËÆøÈóÆmysql</p><p><code>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;will&#39;;</code></p><p><code>FLUSH PRIVILEGES;</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> vmware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode</title>
      <link href="/2019/04/12/vscode%20snippet/"/>
      <url>/2019/04/12/vscode%20snippet/</url>
      
        <content type="html"><![CDATA[<h3 id="Skill"><a href="#Skill" class="headerlink" title="Skill"></a>Skill</h3><ul><li><p>open tab in new window</p><ul><li>Press Ctrl + k</li><li>Release the Ctrl and k keys</li><li>press O (the letter O, not Zero).</li></ul></li><li><p>save all</p><ul><li>Press Ctrl + k</li><li>Release the Ctrl and k keys</li><li>Press s</li></ul></li><li><p>copy line</p><p>Shift+Alt+Down and Shift+Alt+Up</p></li></ul><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><ul><li><p>fileheader</p><p><code>ctrl+alt+i</code> can insert comments in the head.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redux learn</title>
      <link href="/2019/04/07/redux%20learn/"/>
      <url>/2019/04/07/redux%20learn/</url>
      
        <content type="html"><![CDATA[<h3 id="Passing-Data-Between-Adjacent-Components"><a href="#Passing-Data-Between-Adjacent-Components" class="headerlink" title="Passing Data Between Adjacent Components"></a>Passing Data Between Adjacent Components</h3><p>If you have components that are siblings and need to share data, the way to do that in React is to pull that data up into a parent component and pass it down with props.</p><p>That can be cumbersome though. Redux can help by giving you one global ‚Äúparent‚Äù where you can store the data, and then you can <code>connect</code> the sibling components to the data with React-Redux.</p><h3 id="redux-vs-react-redux"><a href="#redux-vs-react-redux" class="headerlink" title="redux vs react-redux"></a>redux vs react-redux</h3><p><code>redux</code> knows nothing about React <em>at all</em>. (The <code>redux</code> library can be used outside of a React app too. It‚Äôll work with Vue, Angular, and even backend Node/Express apps.)</p><p><code>react-redux</code> lets you connect pieces of the state to React components.</p><h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p>in charge for orchestrating all the interactions</p><p>the <strong>state</strong> is the data, and the <strong>store</strong> is where it‚Äôs kept.</p><h3 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h3><p>the producer to make the state</p><blockquote><p>(state, action) =&gt; newState</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> letters = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;x&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// `reduce` takes 2 arguments:</span></span><br><span class="line"><span class="comment">//   - a function to do the reducing (you might say, a &quot;reducer&quot;)</span></span><br><span class="line"><span class="comment">//   - an initial value for accumulatedResult</span></span><br><span class="line"><span class="keyword">var</span> word = letters.reduce(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">accumulatedResult, arrayItem</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accumulatedResult + arrayItem;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="string">&#x27;&#x27;</span>); <span class="comment">// &lt;-- notice this empty string argument: it&#x27;s the initial value</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(word) <span class="comment">// =&gt; &quot;redux&quot;</span></span><br></pre></td></tr></table></figure><p>**Important Rule of Reducers **:</p><ul><li>Never return undefined from a reducer.</li><li>Reducers must be pure functions.(This means that they can‚Äôt modify their arguments, and they can‚Äôt have side effects.)</li></ul><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><p>plain JavaScript objects with a property named type. </p><blockquote><p>An action object describes a change you want to make (like ‚Äúplease increment the counter‚Äù) or an event that happenend (like ‚Äúthe request to the server failed with this error‚Äù).</p><p>action don‚Äôt really <em>do</em> anything. Not on their own, anyway.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;add an item&quot;</span>,</span><br><span class="line">  <span class="attr">item</span>: <span class="string">&quot;Apple&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="number">7008</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;INCREMENT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In order to make an action DO something, you need to <strong>dispatch</strong> it.</p><hr><h3 id="redux-tips"><a href="#redux-tips" class="headerlink" title="redux tips"></a>redux tips</h3><h4 id="Redux-avoids-these-problems-with-some-simple-rules"><a href="#Redux-avoids-these-problems-with-some-simple-rules" class="headerlink" title="Redux avoids these problems with some simple rules."></a>Redux avoids these problems with some simple rules.</h4><ul><li>State is read-only, and actions are the only way to modify it.</li><li>Changes happen one way, and one way only: dispatch(action) -&gt; reducer -&gt; new state.</li><li>The reducer function must be ‚Äúpure‚Äù ‚Äì it cannot modify its arguments, and it can‚Äôt have side effects.</li></ul><h4 id="The-most-important-methods"><a href="#The-most-important-methods" class="headerlink" title="The most important methods."></a>The most important methods.</h4><ul><li>getState for <strong>accessing the current state</strong> of the application</li><li>dispatch for <strong>dispatching an action</strong></li><li>subscribe for <strong>listening on state changes</strong></li></ul><h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><h4 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h4><p>By wrapping the entire app with the <code>Provider</code> component, <em>every component</em> in the app tree will be able to access the Redux store if it wants to.</p><h4 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h4><p>all of components can access the Redux store, but not automatically , We‚Äôll need to use the <code>connect</code> function on our components to access the store.</p><h4 id="connects-a-React-component-with-the-Redux-store"><a href="#connects-a-React-component-with-the-Redux-store" class="headerlink" title="connects a React component with the Redux store."></a>connects a React component with the Redux store.</h4><ul><li>the mapStateToProps function</li><li>the mapDispatchToProps function</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&quot;./logo.svg&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; fetching, dog, onRequestDog, error &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ......</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">fetching</span>: state.fetching,</span><br><span class="line">    <span class="attr">dog</span>: state.dog,</span><br><span class="line">    <span class="attr">error</span>: state.error</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">onRequestDog</span>: <span class="function">() =&gt;</span> dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;API_CALL_REQUEST&quot;</span> &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure><h3 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h3><p>It is a <strong>middleware</strong>, basically a plugin for Redux, that enables Redux to deal with actions like <code>getUser()</code>, ie.<code>dispatch(getUser())</code></p><p>thunk: it‚Äôs an action creator that returns a function instead of a plain action object, like this:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doStuff</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">dispatch, getState</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// dispatch actions here</span></span><br><span class="line">    <span class="comment">// or fetch data</span></span><br><span class="line">    <span class="comment">// or whatever</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>the 2 agruments in return function,Most of the time you‚Äôll only need <code>dispatch</code>, but sometimes you want to do something conditionally, based on some value in the Redux state. In that case, call <code>getState()</code> and you‚Äôll have the entire state to read as needed.</p><h4 id="setup-redux-thunk"><a href="#setup-redux-thunk" class="headerlink" title="setup redux thunk"></a>setup redux thunk</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h3><p><code>redux-saga</code> relies on generators, but does a decent amount of the work for us, so (in my fairly limited experience) a deep understanding of them for this use-case isn‚Äôt necessary.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; takeLatest, call, put &#125; <span class="keyword">from</span> <span class="string">&quot;redux-saga/effects&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// watcher saga: watches for actions dispatched to the store, starts worker saga</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span>* <span class="title">watcherSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> takeLatest(<span class="string">&quot;API_CALL_REQUEST&quot;</span>, workerSaga);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function that makes the api request and returns a Promise for response</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchDog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;https://dog.ceo/api/breeds/image/random&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// worker saga: makes the api call when watcher saga sees the action</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">workerSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">yield</span> call(fetchDog);</span><br><span class="line">    <span class="keyword">const</span> dog = response.data.message;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dispatch a success action to the store with the new dog</span></span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">&quot;API_CALL_SUCCESS&quot;</span>, dog &#125;);</span><br><span class="line">  </span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// dispatch a failure action to the store with the error</span></span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">&quot;API_CALL_FAILURE&quot;</span>, error &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> redux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6 learn</title>
      <link href="/2019/04/04/ES6%20learn/"/>
      <url>/2019/04/04/ES6%20learn/</url>
      
        <content type="html"><![CDATA[<h3 id="Let"><a href="#Let" class="headerlink" title="Let"></a>Let</h3><p>let is similar to var but let has scope. let is only accessible in the block level it is defined.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"> <span class="keyword">let</span> a = <span class="number">40</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(a); <span class="comment">//40</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">50</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"> <span class="keyword">let</span> a = <span class="number">60</span>;</span><br><span class="line"> <span class="keyword">var</span> c = <span class="number">10</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(a/c); <span class="comment">// 6</span></span><br><span class="line"> <span class="built_in">console</span>.log(b/c); <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 50</span></span><br></pre></td></tr></table></figure><h3 id="Const"><a href="#Const" class="headerlink" title="Const"></a>Const</h3><p>Const is used to assign a constant value to the variable. And the value cannot be changed. Its fixed.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">50</span>;</span><br><span class="line">a = <span class="number">60</span>; <span class="comment">// shows error. You cannot change the value of const.</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&quot;Constant variable&quot;</span>;</span><br><span class="line">b = <span class="string">&quot;Assigning new value&quot;</span>; <span class="comment">// shows error.</span></span><br></pre></td></tr></table></figure><p>Whenever you define a const variable, Javascript references the address of the value to the variable.</p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LANGUAGES = [<span class="string">&#x27;Js&#x27;</span>, <span class="string">&#x27;Ruby&#x27;</span>, <span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Go&#x27;</span>];</span><br><span class="line">LANGUAGES = <span class="string">&quot;Javascript&quot;</span>; <span class="comment">// shows error.</span></span><br><span class="line">LANGUAGES.push(<span class="string">&#x27;Java&#x27;</span>); <span class="comment">// Works fine.</span></span><br><span class="line"><span class="built_in">console</span>.log(LANGUAGES); <span class="comment">// [&#x27;Js&#x27;, &#x27;Ruby&#x27;, &#x27;Python&#x27;, &#x27;Go&#x27;, &#x27;Java&#x27;]</span></span><br></pre></td></tr></table></figure><p>the variable ‚ÄòLANGUAGES‚Äô actually references to the memory allocated to the array. So you cannot change the variable to reference some other memory location later. Throughout the program it only references to the array.</p><h3 id="Arrow-Function"><a href="#Arrow-Function" class="headerlink" title="Arrow Function"></a>Arrow Function</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Old Syntax</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oldOne</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Hello World..!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// New Syntax</span></span><br><span class="line"><span class="keyword">var</span> newOne = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Hello World..!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> NewOneWithParameters = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(a+b); <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br><span class="line">NewOneWithParameters(<span class="number">10</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure><p>There are two things to explain here.</p><ol><li>If you have a function with single parameter, you don‚Äôt need (). In our case <strong>element</strong> is the parameter.</li><li>And If you have single line as the body of the function you don‚Äôt need {} and also JS will implicitly returns the value after executing the function. You don‚Äôt have to use <strong>return</strong> keyword.</li><li>Arrow functions shine best with anything that requires <code>this</code> to be bound to the context, and not the function itself.</li></ol><h3 id="For-of-loop"><a href="#For-of-loop" class="headerlink" title="For of loop"></a>For of loop</h3><p>for..of iterates through list of elements (i.e) like Array and returns the elements (not their index) one by one.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>and</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string = <span class="string">&quot;Javascript&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> char <span class="keyword">of</span> string) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(char);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">J</span><br><span class="line">a</span><br><span class="line">v</span><br><span class="line">a</span><br><span class="line">s</span><br><span class="line">c</span><br><span class="line">r</span><br><span class="line">i</span><br><span class="line">p</span><br><span class="line">t</span><br></pre></td></tr></table></figure><h3 id="Spread-attributes"><a href="#Spread-attributes" class="headerlink" title="Spread attributes"></a>Spread attributes</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> SumElements = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(arr); <span class="comment">// [10, 20, 40, 60, 90]</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> sum += element;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(sum); <span class="comment">// 220. </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SumElements([<span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">90</span>]);</span><br></pre></td></tr></table></figure><p>consider the same example with spread attributes:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> SumElements = <span class="function">(<span class="params">...arr</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(arr); <span class="comment">// [10, 20, 40, 60, 90]</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> arr) &#123;</span><br><span class="line"> sum += element;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(sum); <span class="comment">// 220. </span></span><br><span class="line">&#125;</span><br><span class="line">SumElements(<span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">90</span>); <span class="comment">// Note we are not passing array here. Instead we are passing the elements as arguments.</span></span><br></pre></td></tr></table></figure><p>Math.max is a simple method that returns the maximum element from given list. It doesn‚Äôt accept an array.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">60</span>];</span><br><span class="line"><span class="built_in">Math</span>.max(arr); <span class="comment">// Shows error. Doesn&#x27;t accept an array.</span></span><br></pre></td></tr></table></figure><p>So lets use our savior:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">60</span>];</span><br><span class="line"><span class="built_in">Math</span>.max(...arr); <span class="comment">// 60</span></span><br></pre></td></tr></table></figure><h3 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h3><p>Map holds key-value pairs. It‚Äôs similar to an array but we can define our own index. And indexes are unique in maps.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;John&#x27;</span>);</span><br><span class="line">map.set(<span class="string">&#x27;id&#x27;</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">map.get(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// John</span></span><br><span class="line">map.get(<span class="string">&#x27;id&#x27;</span>); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">map.size; <span class="comment">// 2. Returns the size of the map.</span></span><br><span class="line">map.keys(); <span class="comment">// outputs only the keys. </span></span><br><span class="line">map.values(); <span class="comment">// outputs only the values.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">name</span><br><span class="line">id</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(key+<span class="string">&quot; - &quot;</span>+value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">name - John</span><br><span class="line">id - <span class="number">10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h3><p>Sets are used to store the unique values of any type.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sets = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">sets.add(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">sets.add(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">sets.add(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// We are adding duplicate value.</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> element <span class="keyword">of</span> sets) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line"></span><br><span class="line">sets.size; <span class="comment">// returns 2. Size of the set.</span></span><br><span class="line">sets.has(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// returns true. </span></span><br><span class="line">sets.has(<span class="string">&#x27;c&#x27;</span>); <span class="comment">// returns false.</span></span><br></pre></td></tr></table></figure><h3 id="Static-methods"><a href="#Static-methods" class="headerlink" title="Static methods"></a>Static methods</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"> <span class="keyword">static</span> <span class="function"><span class="title">Callme</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Static method&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">Example.Callme();</span><br><span class="line">Output:</span><br><span class="line">Static method</span><br></pre></td></tr></table></figure><p> you can call the function without creating any instance for the class.</p><h3 id="Getters-and-Setters"><a href="#Getters-and-Setters" class="headerlink" title="Getters and Setters"></a>Getters and Setters</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">setName</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>.name = name;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> People(<span class="string">&quot;Jon Snow&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.getName());</span><br><span class="line">person.setName(<span class="string">&quot;Dany&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.getName());</span><br><span class="line">Output:</span><br><span class="line">Jon Snow</span><br><span class="line">Dany</span><br></pre></td></tr></table></figure><h3 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h3><p> They are used to make <strong>async</strong> operations such as API request, file handling, downloading images, etc.</p><p>Before promises, programmers used to define <strong>callbacks.</strong> Callbacks are normal functions in Javascript which executes when the async operation is complete.</p><ul><li><p>three states in promises</p><ol><li><strong>Pending</strong>: In this state the promise is just executing the async operation. For example, It‚Äôs making some API request to the server or downloading some images from cdn.  from this state promise can move to either to <strong>Fulfilled</strong> or to <strong>Rejected</strong></li><li><strong>Fulfilled</strong>: If the promise has reached this state, then it means that the async operation is complete and we have the output. For example, we have the response from the API.</li><li><strong>Rejected:</strong> If the promise has reached this state, it means that the async operation is not successful and we have the error which caused the operation to fail.</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> apiCall = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> ( API request to get some data ) &#123;</span><br><span class="line">  resolve(<span class="string">&quot;The request is successful and the response is &quot;</span>+ response);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  reject(<span class="string">&quot;The request is not successful. The error is &quot;</span>+error);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>Then the <strong>resolve</strong> function is called if we get the response from the server. And if there is some error <strong>reject</strong> function is called with the error message.</p></li><li><p>We use <strong>handlers</strong> to get the output from the promise.</p><blockquote><p>Handlers are just functions which executes when some event occurs such as clicking a button, moving the cursor, etc.</p><p>So we can use handlers to handle when the <strong>resolve</strong> function is called or **reject **function is called.</p></blockquote><ul><li>The handler <strong>then</strong> executes its <strong>function parameter</strong> when the <strong>resolve</strong> function is called inside the promise.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calling the promise with some handlers.</span></span><br><span class="line">apiCall.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;<span class="built_in">console</span>.log(x); &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output</span></span><br><span class="line">The request is successful and the response is &#123;<span class="attr">name</span>: <span class="string">&quot;Jon Snow&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>Catch</strong> handler looks out for <strong>reject</strong> function.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">apiCall</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">// Assuming the request is not successful ( reject function is called in the promise. )</span></span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">The request is not successful</span><br></pre></td></tr></table></figure></li></ul><h3 id="Async-Await"><a href="#Async-Await" class="headerlink" title="Async / Await"></a>Async / Await</h3><h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="string">&quot;Hello Promise..!&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The above code is equivalent to the below code:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"> <span class="comment">// executor function body.</span></span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Greater&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Not Greater&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">hello(<span class="number">14</span>, <span class="number">10</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Good..! &quot;</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Oops..! &quot;</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">Oops..! Not Greater. </span><br><span class="line"><span class="comment">// if you call hello(4, 10) you get &quot;Good..! Greater&quot;</span></span><br></pre></td></tr></table></figure><p>Don‚Äôt forget that async function will return a promise. So of course, you can call <strong>resolve</strong> and <strong>reject</strong> function inside <strong>async</strong> function too. </p><p>example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">Max</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">&quot;Success&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">Max(<span class="number">4</span>, <span class="number">10</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Good &quot;</span> + x); </span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&quot;Oops &quot;</span> + x); </span><br><span class="line">&#125;);</span><br><span class="line">Output:</span><br><span class="line">Oops <span class="built_in">Error</span></span><br><span class="line"><span class="comment">// If we pass Max(14, 10) then we should get &quot;Good Success&quot; :)</span></span><br></pre></td></tr></table></figure><h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4><p> It makes the Javascript to wait until you get the response from the endpoint. And then it resumes the execution.</p><p><strong>await can be used only inside async function. It doesn‚Äôt work outside async function</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;https://api.github.com/&#x27;</span>);</span><br><span class="line"> <span class="comment">// above line fetches the response from the given API endpoint.</span></span><br><span class="line"> <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line">hello()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(x); </span><br><span class="line">&#125;);</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">Response <span class="keyword">from</span> the API.</span><br></pre></td></tr></table></figure><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><h4 id="Array-Map"><a href="#Array-Map" class="headerlink" title="Array Map"></a>Array Map</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br></pre></td></tr></table></figure><p>And also note we have to return some value in the end. Which will be the modified value of that element. If you didn‚Äôt return anything then the particular element will be undefined.</p><p>One more thing I like to add is the second and third parameter is only optional. Only the first parameter is mandatory. for example :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>write the map operator with arrow functions:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function">(<span class="params">element, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;index &quot;</span>+index);</span><br><span class="line">  <span class="keyword">return</span> element * <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">index <span class="number">0</span></span><br><span class="line">index <span class="number">1</span></span><br><span class="line">index <span class="number">2</span></span><br><span class="line">index <span class="number">3</span></span><br><span class="line">index <span class="number">4</span></span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br></pre></td></tr></table></figure><p>better:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedArr = arr.map(<span class="function"><span class="params">element</span> =&gt;</span> element * <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br></pre></td></tr></table></figure><h4 id="Array-Filter"><a href="#Array-Filter" class="headerlink" title="Array Filter"></a>Array Filter</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> modifiedArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(modifiedArr);</span><br><span class="line">Output:</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><p>try by arrow function:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> modifiedAarr = arr.filter(<span class="function">(<span class="params">element, index</span>) =&gt;</span> element%<span class="number">2</span> == <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>we have to return a boolean value for each element of the array. If you won‚Äôt return any boolean value at the end then the filter takes it as <strong>false</strong> and deletes the element.</p><h4 id="Array-Reduce"><a href="#Array-Reduce" class="headerlink" title="Array Reduce"></a>Array Reduce</h4><p>Array reduce is used to aggregate all the elements of an array and return a single value.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> total= arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">sum, element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> sum + element;</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;total is &quot;</span>+total);</span><br><span class="line">Output:</span><br><span class="line">total is <span class="number">21</span></span><br></pre></td></tr></table></figure><p>Unlike filter and map, reduce takes a function with four parameters and also a additional element. Unlike filter and map, the first two parameters are mandatory. Other two are optional.</p><p>The first parameter is the aggregator element.In our case it‚Äôs 0. </p><p>Like filter and map you have to return the end result.</p><p>write the same code with arrow functions:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> totalSum = arr.reduce(<span class="function">(<span class="params">sum, element</span>) =&gt;</span> element+sum, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="Template-Literals"><a href="#Template-Literals" class="headerlink" title="Template Literals"></a>Template Literals</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Srebalaji&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> languages = <span class="function">() =&gt;</span> &#123;<span class="keyword">return</span> <span class="string">&quot;Ruby, Js, Java, Python&quot;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string">My age is <span class="subst">$&#123;<span class="number">20</span>+<span class="number">3</span>&#125;</span></span></span><br><span class="line"><span class="string">And I code in <span class="subst">$&#123;languages()&#125;</span>`</span></span><br><span class="line"><span class="attr">Output</span>:</span><br><span class="line">My name is Srebalaji</span><br><span class="line">My age is <span class="number">23</span></span><br><span class="line">And I code <span class="keyword">in</span> Ruby, Js, Java, Python</span><br></pre></td></tr></table></figure><h3 id="Imports-and-Exports"><a href="#Imports-and-Exports" class="headerlink" title="Imports and Exports"></a>Imports and Exports</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">&quot;Jon&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> age = <span class="number">23</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;name, age&#125; <span class="keyword">from</span> <span class="string">&#x27;./app&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.html</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">Jon</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><p>and:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">() =&gt;</span> a+b;</span><br><span class="line"><span class="keyword">export</span> &#123;a,b&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sum</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> variables <span class="keyword">from</span> <span class="string">&#x27;./app&#x27;</span></span><br><span class="line"><span class="keyword">import</span> addition <span class="keyword">from</span> <span class="string">&#x27;./app&#x27;</span> <span class="comment">// default value</span></span><br><span class="line"><span class="built_in">console</span>.log(variables.a);</span><br><span class="line"><span class="built_in">console</span>.log(variables.b);</span><br><span class="line"><span class="built_in">console</span>.log(addition());</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><ol><li><p>If you are using * to import values then you have to use <strong>alias</strong> (i.e) names that will refer to imported values. In our example we have used <strong>variables</strong> as alias.</p></li><li><p>Using * to import values doesn‚Äôt import default value. You have to import it separately.</p><p>for example:<code>import addition, * as variables from &#39;./app&#39;</code></p></li></ol><h3 id="Destructuring-objects-and-arrays"><a href="#Destructuring-objects-and-arrays" class="headerlink" title="Destructuring objects and arrays"></a>Destructuring objects and arrays</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">firstName</span>: <span class="string">&quot;Jon&quot;</span>, <span class="attr">lastName</span>: <span class="string">&quot;Snow&quot;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;firstName, lastName, age&#125; = person</span><br><span class="line"><span class="built_in">console</span>.log(firstName);</span><br><span class="line"><span class="built_in">console</span>.log(lastName);</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line">Output:</span><br><span class="line">Jon</span><br><span class="line">Snow</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><h3 id="Extend-and-Super"><a href="#Extend-and-Super" class="headerlink" title="Extend and Super"></a>Extend and Super</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"> <span class="function"><span class="title">constructor</span>(<span class="params">firstName, lastName, age</span>)</span> &#123;</span><br><span class="line">   <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">   <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">displayName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.firstName&#125;</span> - <span class="subst">$&#123;<span class="built_in">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="title">constructor</span>(<span class="params">firstName, lastName, age, salary</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">super</span>(firstName, lastName, age);</span><br><span class="line">  <span class="built_in">this</span>.salary = salary;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">displaySalary</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.salary&#125;</span>`</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">displayName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">super</span>.displayName();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="title">displayAge</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> manager = <span class="keyword">new</span> Employee(<span class="string">&quot;Jon&quot;</span>, <span class="string">&quot;Snow&quot;</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.log(manager.displaySalary());</span><br><span class="line"><span class="built_in">console</span>.log(manager.displayName());</span><br><span class="line"><span class="built_in">console</span>.log(manager.displayAge());</span><br><span class="line">Output:</span><br><span class="line"><span class="number">100</span></span><br><span class="line">Jon Snow</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><p>And then we have used <strong>super</strong> keyword to call the constructor of the parent class. And we also have called the method declared in the parent class using <strong>super</strong>.</p><h3 id="Generator-functions"><a href="#Generator-functions" class="headerlink" title="Generator functions"></a>Generator functions</h3><ul><li>Generator functions are written using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*"><code>function*</code></a> syntax. When called initially, generator functions do not execute any of their code, instead returning a type of iterator called a Generator. </li><li>When a value is consumed by calling the generator‚Äôs <strong>next</strong> method, the Generator function executes until it encounters the <strong>yield</strong> keyword.<ul><li>Each <code>yield</code> in a generator basically represents an asynchronous step in a more synchronous/sequential process‚Ää‚Äî‚Ääsomewhat like <code>await</code> in an <code>async</code>function.</li></ul></li><li>The function can be called as many times as desired and returns a new Generator each time, however each Generator may only be iterated once.</li></ul><h3 id="some-method"><a href="#some-method" class="headerlink" title="some method"></a>some method</h3><ul><li><p>includes</p><p>construct an array of the items, and use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes"><code>includes</code></a>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>].includes(<span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring boot learn</title>
      <link href="/2019/03/31/regex%20learn/"/>
      <url>/2019/03/31/regex%20learn/</url>
      
        <content type="html"><![CDATA[<p align="center">    <br/>    <a href="https://github.com/ziishaned/learn-regex">        <img src="https://i.imgur.com/bYwl7Vf.png" alt="Learn Regex">    </a>    <br /><br />    <p>        <a href="https://twitter.com/home?status=Learn%20regex%20the%20easy%20way%20by%20%40ziishaned%20http%3A//github.com/ziishaned/learn-regex">            <img src="https://img.shields.io/badge/twitter-tweet-blue.svg?style=flat-square"/>        </a>        <a href="https://twitter.com/ziishaned">            <img src="https://img.shields.io/badge/feedback-@ziishaned-blue.svg?style=flat-square" />        </a>    </p></p>‰ªÄ‰πàÊòØÊ≠£ÂàôË°®ËææÂºè?<blockquote><p>Ê≠£ÂàôË°®ËææÂºèÊòØ‰∏ÄÁªÑÁî±Â≠óÊØçÂíåÁ¨¶Âè∑ÁªÑÊàêÁöÑÁâπÊÆäÊñáÊú¨, ÂÆÉÂèØ‰ª•Áî®Êù•‰ªéÊñáÊú¨‰∏≠ÊâæÂá∫Êª°Ë∂≥‰Ω†ÊÉ≥Ë¶ÅÁöÑÊ†ºÂºèÁöÑÂè•Â≠ê.</p></blockquote><p>‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊòØÂú®‰∏Ä‰∏™‰∏ª‰ΩìÂ≠óÁ¨¶‰∏≤‰∏≠‰ªéÂ∑¶Âà∞Âè≥ÂåπÈÖçÂ≠óÁ¨¶‰∏≤Êó∂ÁöÑ‰∏ÄÁßçÊ†∑Âºè.<br>‚ÄúRegular expression‚ÄùËøô‰∏™ËØçÊØîËæÉÊãóÂè£, Êàë‰ª¨Â∏∏‰ΩøÁî®Áº©ÂÜôÁöÑÊúØËØ≠‚Äùregex‚ÄùÊàñ‚Äùregexp‚Äù.<br>Ê≠£ÂàôË°®ËææÂºèÂèØ‰ª•‰ªé‰∏Ä‰∏™Âü∫Á°ÄÂ≠óÁ¨¶‰∏≤‰∏≠Ê†πÊçÆ‰∏ÄÂÆöÁöÑÂåπÈÖçÊ®°ÂºèÊõøÊç¢ÊñáÊú¨‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÅÈ™åËØÅË°®Âçï„ÄÅÊèêÂèñÂ≠óÁ¨¶‰∏≤Á≠âÁ≠â.</p><p>ÊÉ≥Ë±°‰Ω†Ê≠£Âú®ÂÜô‰∏Ä‰∏™Â∫îÁî®, ÁÑ∂Âêé‰Ω†ÊÉ≥ËÆæÂÆö‰∏Ä‰∏™Áî®Êà∑ÂëΩÂêçÁöÑËßÑÂàô, ËÆ©Áî®Êà∑ÂêçÂåÖÂê´Â≠óÁ¨¶,Êï∞Â≠ó,‰∏ãÂàíÁ∫øÂíåËøûÂ≠óÁ¨¶,‰ª•ÂèäÈôêÂà∂Â≠óÁ¨¶ÁöÑ‰∏™Êï∞,Â•ΩËÆ©ÂêçÂ≠óÁúãËµ∑Êù•Ê≤°ÈÇ£‰πà‰∏ë.<br>Êàë‰ª¨‰ΩøÁî®‰ª•‰∏ãÊ≠£ÂàôË°®ËææÂºèÊù•È™åËØÅ‰∏Ä‰∏™Áî®Êà∑Âêç:</p><p><img src="https://i.imgur.com/H5uDOzW.png"></p><p>‰ª•‰∏äÁöÑÊ≠£ÂàôË°®ËææÂºèÂèØ‰ª•Êé•Âèó <code>john_doe</code>, <code>jo-hn_doe</code>, <code>john12_as</code>.<br>‰ΩÜ‰∏çÂåπÈÖç<code>Jo</code>, Âõ†‰∏∫ÂÆÉÂåÖÂê´‰∫ÜÂ§ßÂÜôÁöÑÂ≠óÊØçËÄå‰∏îÂ§™Áü≠‰∫Ü.</p><h1 id="ÁõÆÂΩï"><a href="#ÁõÆÂΩï" class="headerlink" title="ÁõÆÂΩï"></a>ÁõÆÂΩï</h1><ul><li><a href="#1-%E5%9F%BA%E6%9C%AC%E5%8C%B9%E9%85%8D">1. Âü∫Êú¨ÂåπÈÖç</a></li><li><a href="#2-%E5%85%83%E5%AD%97%E7%AC%A6">2. ÂÖÉÂ≠óÁ¨¶</a><pre><code> * [2.1 ÁÇπËøêÁÆóÁ¨¶ .](#21-ÁÇπËøêÁÆóÁ¨¶-) * [2.2 Â≠óÁ¨¶ÈõÜ](#22-Â≠óÁ¨¶ÈõÜ) * [2.2.1 Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ](#221-Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ)</code></pre><ul><li><a href="#23-%E9%87%8D%E5%A4%8D%E6%AC%A1%E6%95%B0">2.3 ÈáçÂ§çÊ¨°Êï∞</a><ul><li><a href="#231--%E5%8F%B7">2.3.1 * Âè∑</a></li><li><a href="#232--%E5%8F%B7">2.3.2 + Âè∑</a></li><li><a href="#233--%E5%8F%B7">2.3.3 ? Âè∑</a></li></ul></li><li><a href="#24--%E5%8F%B7">2.4 {} Âè∑</a></li><li><a href="#25--%E7%89%B9%E5%BE%81%E6%A0%87%E7%BE%A4">2.5 (‚Ä¶) ÁâπÂæÅÊ†áÁæ§</a></li><li><a href="#26--%E6%88%96%E8%BF%90%E7%AE%97%E7%AC%A6">2.6 | ÊàñËøêÁÆóÁ¨¶</a></li><li><a href="#27-%E8%BD%AC%E7%A0%81%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6">2.7 ËΩ¨Á†ÅÁâπÊÆäÂ≠óÁ¨¶</a></li><li><a href="#28-%E9%94%9A%E7%82%B9">2.8 ÈîöÁÇπ</a><ul><li><a href="#281--%E5%8F%B7">2.8.1 ^ Âè∑</a></li><li><a href="#282--%E5%8F%B7">2.8.2 $ Âè∑</a></li></ul></li></ul></li><li><a href="#3-%E7%AE%80%E5%86%99%E5%AD%97%E7%AC%A6%E9%9B%86">3. ÁÆÄÂÜôÂ≠óÁ¨¶ÈõÜ</a></li><li><a href="#4-%E9%9B%B6%E5%AE%BD%E5%BA%A6%E6%96%AD%E8%A8%80%E5%89%8D%E5%90%8E%E9%A2%84%E6%9F%A5">4. Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®Ä(ÂâçÂêéÈ¢ÑÊü•)</a><ul><li><a href="#41--%E6%AD%A3%E5%85%88%E8%A1%8C%E6%96%AD%E8%A8%80">4.1 ?=‚Ä¶ Ê≠£ÂÖàË°åÊñ≠Ë®Ä</a></li><li><a href="#42--%E8%B4%9F%E5%85%88%E8%A1%8C%E6%96%AD%E8%A8%80">4.2 ?!‚Ä¶ Ë¥üÂÖàË°åÊñ≠Ë®Ä</a></li><li><a href="#43---%E6%AD%A3%E5%90%8E%E5%8F%91%E6%96%AD%E8%A8%80">4.3 ?&lt;= ‚Ä¶ Ê≠£ÂêéÂèëÊñ≠Ë®Ä</a></li><li><a href="#44--%E8%B4%9F%E5%90%8E%E5%8F%91%E6%96%AD%E8%A8%80">4.4 ?&lt;!‚Ä¶ Ë¥üÂêéÂèëÊñ≠Ë®Ä</a></li></ul></li><li><a href="#5-%E6%A0%87%E5%BF%97">5. Ê†áÂøó</a><ul><li><a href="#51-%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99-case-insensitive">5.1 ÂøΩÁï•Â§ßÂ∞èÂÜô (Case Insensitive)</a></li><li><a href="#52-%E5%85%A8%E5%B1%80%E6%90%9C%E7%B4%A2-global-search">5.2 ÂÖ®Â±ÄÊêúÁ¥¢ (Global search)</a></li><li><a href="#53-%E5%A4%9A%E8%A1%8C%E4%BF%AE%E9%A5%B0%E7%AC%A6-multiline">5.3 Â§öË°å‰øÆÈ•∞Á¨¶ (Multiline)</a></li></ul></li><li><a href="#%E9%A2%9D%E5%A4%96%E8%A1%A5%E5%85%85">È¢ùÂ§ñË°•ÂÖÖ</a></li><li><a href="#%E8%B4%A1%E7%8C%AE">Ë¥°ÁåÆ</a></li><li><a href="#%E8%AE%B8%E5%8F%AF%E8%AF%81">ËÆ∏ÂèØËØÅ</a></li></ul><h2 id="1-Âü∫Êú¨ÂåπÈÖç"><a href="#1-Âü∫Êú¨ÂåπÈÖç" class="headerlink" title="1. Âü∫Êú¨ÂåπÈÖç"></a>1. Âü∫Êú¨ÂåπÈÖç</h2><p>Ê≠£ÂàôË°®ËææÂºèÂÖ∂ÂÆûÂ∞±ÊòØÂú®ÊâßË°åÊêúÁ¥¢Êó∂ÁöÑÊ†ºÂºè, ÂÆÉÁî±‰∏Ä‰∫õÂ≠óÊØçÂíåÊï∞Â≠óÁªÑÂêàËÄåÊàê.<br>‰æãÂ¶Ç: ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºè <code>the</code>, ÂÆÉË°®Á§∫‰∏Ä‰∏™ËßÑÂàô: Áî±Â≠óÊØç<code>t</code>ÂºÄÂßã,Êé•ÁùÄÊòØ<code>h</code>,ÂÜçÊé•ÁùÄÊòØ<code>e</code>.</p><pre>"the" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/dmRygT/1">Âú®Á∫øÁªÉ‰π†</a></p><p>Ê≠£ÂàôË°®ËææÂºè<code>123</code>ÂåπÈÖçÂ≠óÁ¨¶‰∏≤<code>123</code>. ÂÆÉÈÄê‰∏™Â≠óÁ¨¶ÁöÑ‰∏éËæìÂÖ•ÁöÑÊ≠£ÂàôË°®ËææÂºèÂÅöÊØîËæÉ.</p><p>Ê≠£ÂàôË°®ËææÂºèÊòØÂ§ßÂ∞èÂÜôÊïèÊÑüÁöÑ, ÊâÄ‰ª•<code>The</code>‰∏ç‰ºöÂåπÈÖç<code>the</code>.</p><pre>"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/1paXsy/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-ÂÖÉÂ≠óÁ¨¶"><a href="#2-ÂÖÉÂ≠óÁ¨¶" class="headerlink" title="2. ÂÖÉÂ≠óÁ¨¶"></a>2. ÂÖÉÂ≠óÁ¨¶</h2><p>Ê≠£ÂàôË°®ËææÂºè‰∏ªË¶Å‰æùËµñ‰∫éÂÖÉÂ≠óÁ¨¶.<br>ÂÖÉÂ≠óÁ¨¶‰∏ç‰ª£Ë°®‰ªñ‰ª¨Êú¨Ë∫´ÁöÑÂ≠óÈù¢ÊÑèÊÄù, ‰ªñ‰ª¨ÈÉΩÊúâÁâπÊÆäÁöÑÂê´‰πâ. ‰∏Ä‰∫õÂÖÉÂ≠óÁ¨¶ÂÜôÂú®ÊñπÊã¨Âè∑‰∏≠ÁöÑÊó∂ÂÄôÊúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÊÑèÊÄù. ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂÖÉÂ≠óÁ¨¶ÁöÑ‰ªãÁªç:</p><table><thead><tr><th align="center">ÂÖÉÂ≠óÁ¨¶</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td align="center">.</td><td>Âè•Âè∑ÂåπÈÖç‰ªªÊÑèÂçï‰∏™Â≠óÁ¨¶Èô§‰∫ÜÊç¢Ë°åÁ¨¶.</td></tr><tr><td align="center">[ ]</td><td>Â≠óÁ¨¶ÁßçÁ±ª. ÂåπÈÖçÊñπÊã¨Âè∑ÂÜÖÁöÑ‰ªªÊÑèÂ≠óÁ¨¶.</td></tr><tr><td align="center">[^ ]</td><td>Âê¶ÂÆöÁöÑÂ≠óÁ¨¶ÁßçÁ±ª. ÂåπÈÖçÈô§‰∫ÜÊñπÊã¨Âè∑ÈáåÁöÑ‰ªªÊÑèÂ≠óÁ¨¶</td></tr><tr><td align="center">*</td><td>ÂåπÈÖç&gt;=0‰∏™ÈáçÂ§çÁöÑÂú®*Âè∑‰πãÂâçÁöÑÂ≠óÁ¨¶.</td></tr><tr><td align="center">+</td><td>ÂåπÈÖç&gt;=1‰∏™ÈáçÂ§çÁöÑ+Âè∑ÂâçÁöÑÂ≠óÁ¨¶.</td></tr><tr><td align="center">?</td><td>Ê†áËÆ∞?‰πãÂâçÁöÑÂ≠óÁ¨¶‰∏∫ÂèØÈÄâ.</td></tr><tr><td align="center">{n,m}</td><td>ÂåπÈÖçnum‰∏™Â§ßÊã¨Âè∑‰πãÂâçÁöÑÂ≠óÁ¨¶ (n &lt;= num &lt;= m).</td></tr><tr><td align="center">(xyz)</td><td>Â≠óÁ¨¶ÈõÜ, ÂåπÈÖç‰∏é xyz ÂÆåÂÖ®Áõ∏Á≠âÁöÑÂ≠óÁ¨¶‰∏≤.</td></tr><tr><td align="center">&#124;</td><td>ÊàñËøêÁÆóÁ¨¶,ÂåπÈÖçÁ¨¶Âè∑ÂâçÊàñÂêéÁöÑÂ≠óÁ¨¶.</td></tr><tr><td align="center">&#92;</td><td>ËΩ¨‰πâÂ≠óÁ¨¶,Áî®‰∫éÂåπÈÖç‰∏Ä‰∫õ‰øùÁïôÁöÑÂ≠óÁ¨¶ <code>[ ] ( ) &#123; &#125; . * + ? ^ $ \ &#124;</code></td></tr><tr><td align="center">^</td><td>‰ªéÂºÄÂßãË°åÂºÄÂßãÂåπÈÖç.</td></tr><tr><td align="center">$</td><td>‰ªéÊú´Á´ØÂºÄÂßãÂåπÈÖç.</td></tr></tbody></table><h2 id="2-1-ÁÇπËøêÁÆóÁ¨¶"><a href="#2-1-ÁÇπËøêÁÆóÁ¨¶" class="headerlink" title="2.1 ÁÇπËøêÁÆóÁ¨¶ ."></a>2.1 ÁÇπËøêÁÆóÁ¨¶ <code>.</code></h2><p><code>.</code>ÊòØÂÖÉÂ≠óÁ¨¶‰∏≠ÊúÄÁÆÄÂçïÁöÑ‰æãÂ≠ê.<br><code>.</code>ÂåπÈÖç‰ªªÊÑèÂçï‰∏™Â≠óÁ¨¶, ‰ΩÜ‰∏çÂåπÈÖçÊç¢Ë°åÁ¨¶.<br>‰æãÂ¶Ç, Ë°®ËææÂºè<code>.ar</code>ÂåπÈÖç‰∏Ä‰∏™‰ªªÊÑèÂ≠óÁ¨¶ÂêéÈù¢Ë∑üÁùÄÊòØ<code>a</code>Âíå<code>r</code>ÁöÑÂ≠óÁ¨¶‰∏≤.</p><pre>".ar" => The <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/xc9GkU/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-2-Â≠óÁ¨¶ÈõÜ"><a href="#2-2-Â≠óÁ¨¶ÈõÜ" class="headerlink" title="2.2 Â≠óÁ¨¶ÈõÜ"></a>2.2 Â≠óÁ¨¶ÈõÜ</h2><p>Â≠óÁ¨¶ÈõÜ‰πüÂè´ÂÅöÂ≠óÁ¨¶Á±ª.<br>ÊñπÊã¨Âè∑Áî®Êù•ÊåáÂÆö‰∏Ä‰∏™Â≠óÁ¨¶ÈõÜ.<br>Âú®ÊñπÊã¨Âè∑‰∏≠‰ΩøÁî®ËøûÂ≠óÁ¨¶Êù•ÊåáÂÆöÂ≠óÁ¨¶ÈõÜÁöÑËåÉÂõ¥.<br>Âú®ÊñπÊã¨Âè∑‰∏≠ÁöÑÂ≠óÁ¨¶ÈõÜ‰∏çÂÖ≥ÂøÉÈ°∫Â∫è.<br>‰æãÂ¶Ç, Ë°®ËææÂºè<code>[Tt]he</code> ÂåπÈÖç <code>the</code> Âíå <code>The</code>.</p><pre>"[Tt]he" => <a href="#learn-regex"><strong>The</strong></a> car parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/2ITLQ4/1">Âú®Á∫øÁªÉ‰π†</a></p><p>ÊñπÊã¨Âè∑ÁöÑÂè•Âè∑Â∞±Ë°®Á§∫Âè•Âè∑.<br>Ë°®ËææÂºè <code>ar[.]</code> ÂåπÈÖç <code>ar.</code>Â≠óÁ¨¶‰∏≤</p><pre>"ar[.]" => A garage is a good place to park a c<a href="#learn-regex"><strong>ar.</strong></a></pre><p><a href="https://regex101.com/r/wL3xtE/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="2-2-1-Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ"><a href="#2-2-1-Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ" class="headerlink" title="2.2.1 Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ"></a>2.2.1 Âê¶ÂÆöÂ≠óÁ¨¶ÈõÜ</h3><p>‰∏ÄËà¨Êù•ËØ¥ <code>^</code> Ë°®Á§∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÂºÄÂ§¥, ‰ΩÜÂÆÉÁî®Âú®‰∏Ä‰∏™ÊñπÊã¨Âè∑ÁöÑÂºÄÂ§¥ÁöÑÊó∂ÂÄô, ÂÆÉË°®Á§∫Ëøô‰∏™Â≠óÁ¨¶ÈõÜÊòØÂê¶ÂÆöÁöÑ.<br>‰æãÂ¶Ç, Ë°®ËææÂºè<code>[^c]ar</code> ÂåπÈÖç‰∏Ä‰∏™ÂêéÈù¢Ë∑üÁùÄ<code>ar</code>ÁöÑÈô§‰∫Ü<code>c</code>ÁöÑ‰ªªÊÑèÂ≠óÁ¨¶.</p><pre>"[^c]ar" => The car <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/nNNlq3/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-3-ÈáçÂ§çÊ¨°Êï∞"><a href="#2-3-ÈáçÂ§çÊ¨°Êï∞" class="headerlink" title="2.3 ÈáçÂ§çÊ¨°Êï∞"></a>2.3 ÈáçÂ§çÊ¨°Êï∞</h2><p>ÂêéÈù¢Ë∑üÁùÄÂÖÉÂ≠óÁ¨¶ <code>+</code>, <code>*</code> or <code>?</code> ÁöÑ, Áî®Êù•ÊåáÂÆöÂåπÈÖçÂ≠êÊ®°ÂºèÁöÑÊ¨°Êï∞.<br>Ëøô‰∫õÂÖÉÂ≠óÁ¨¶Âú®‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÊúâÁùÄ‰∏çÂêåÁöÑÊÑèÊÄù.</p><h3 id="2-3-1-Âè∑"><a href="#2-3-1-Âè∑" class="headerlink" title="2.3.1 * Âè∑"></a>2.3.1 <code>*</code> Âè∑</h3><p><code>*</code>Âè∑ÂåπÈÖç Âú®<code>*</code>‰πãÂâçÁöÑÂ≠óÁ¨¶Âá∫Áé∞<code>Â§ß‰∫éÁ≠â‰∫é0</code>Ê¨°.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>a*</code> ÂåπÈÖç‰ª•0ÊàñÊõ¥Â§ö‰∏™aÂºÄÂ§¥ÁöÑÂ≠óÁ¨¶, Âõ†‰∏∫Êúâ0‰∏™Ëøô‰∏™Êù°‰ª∂, ÂÖ∂ÂÆû‰πüÂ∞±ÂåπÈÖç‰∫ÜÊâÄÊúâÁöÑÂ≠óÁ¨¶. Ë°®ËææÂºè<code>[a-z]*</code> ÂåπÈÖç‰∏Ä‰∏™Ë°å‰∏≠ÊâÄÊúâ‰ª•Â∞èÂÜôÂ≠óÊØçÂºÄÂ§¥ÁöÑÂ≠óÁ¨¶‰∏≤.</p><pre>"[a-z]*" => T<a href="#learn-regex"><strong>he</strong></a> <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>parked</strong></a> <a href="#learn-regex"><strong>in</strong></a> <a href="#learn-regex"><strong>the</strong></a> <a href="#learn-regex"><strong>garage</strong></a> #21.</pre><p><a href="https://regex101.com/r/7m8me5/1">Âú®Á∫øÁªÉ‰π†</a></p><p><code>*</code>Â≠óÁ¨¶Âíå<code>.</code>Â≠óÁ¨¶Êê≠ÈÖçÂèØ‰ª•ÂåπÈÖçÊâÄÊúâÁöÑÂ≠óÁ¨¶<code>.*</code>.<br><code>*</code>ÂíåË°®Á§∫ÂåπÈÖçÁ©∫Ê†ºÁöÑÁ¨¶Âè∑<code>\s</code>ËøûËµ∑Êù•Áî®, Â¶ÇË°®ËææÂºè<code>\s*cat\s*</code>ÂåπÈÖç0ÊàñÊõ¥Â§ö‰∏™Á©∫Ê†ºÂºÄÂ§¥Âíå0ÊàñÊõ¥Â§ö‰∏™Á©∫Ê†ºÁªìÂ∞æÁöÑcatÂ≠óÁ¨¶‰∏≤.</p><pre>"\s*cat\s*" => The fat<a href="#learn-regex"><strong> cat </strong></a>sat on the con<a href="#learn-regex"><strong>cat</strong></a>enation.</pre><p><a href="https://regex101.com/r/gGrwuz/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="2-3-2-Âè∑"><a href="#2-3-2-Âè∑" class="headerlink" title="2.3.2 + Âè∑"></a>2.3.2 <code>+</code> Âè∑</h3><p><code>+</code>Âè∑ÂåπÈÖç<code>+</code>Âè∑‰πãÂâçÁöÑÂ≠óÁ¨¶Âá∫Áé∞ &gt;=1 Ê¨°.<br>‰æãÂ¶ÇË°®ËææÂºè<code>c.+t</code> ÂåπÈÖç‰ª•È¶ñÂ≠óÊØç<code>c</code>ÂºÄÂ§¥‰ª•<code>t</code>ÁªìÂ∞æ,‰∏≠Èó¥Ë∑üÁùÄ‰ªªÊÑè‰∏™Â≠óÁ¨¶ÁöÑÂ≠óÁ¨¶‰∏≤.</p><pre>"c.+t" => The fat <a href="#learn-regex"><strong>cat sat on the mat</strong></a>.</pre><p><a href="https://regex101.com/r/Dzf9Aa/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="2-3-3-Âè∑"><a href="#2-3-3-Âè∑" class="headerlink" title="2.3.3 ? Âè∑"></a>2.3.3 <code>?</code> Âè∑</h3><p>Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÂÖÉÂ≠óÁ¨¶ <code>?</code> Ê†áËÆ∞Âú®Á¨¶Âè∑ÂâçÈù¢ÁöÑÂ≠óÁ¨¶‰∏∫ÂèØÈÄâ, Âç≥Âá∫Áé∞ 0 Êàñ 1 Ê¨°.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>[T]?he</code> ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ <code>he</code> Âíå <code>The</code>.</p><pre>"[T]he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.</pre><p><a href="https://regex101.com/r/cIg9zm/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"[T]?he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in t<a href="#learn-regex"><strong>he</strong></a> garage.</pre><p><a href="https://regex101.com/r/kPpO2x/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-4-Âè∑"><a href="#2-4-Âè∑" class="headerlink" title="2.4 {} Âè∑"></a>2.4 <code>&#123;&#125;</code> Âè∑</h2><p>Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ <code>&#123;&#125;</code> ÊòØ‰∏Ä‰∏™ÈáèËØç, Â∏∏Áî®Êù•‰∏Ä‰∏™Êàñ‰∏ÄÁªÑÂ≠óÁ¨¶ÂèØ‰ª•ÈáçÂ§çÂá∫Áé∞ÁöÑÊ¨°Êï∞.<br>‰æãÂ¶Ç,  Ë°®ËææÂºè <code>[0-9]&#123;2,3&#125;</code> ÂåπÈÖçÊúÄÂ∞ë 2 ‰ΩçÊúÄÂ§ö 3 ‰Ωç 0~9 ÁöÑÊï∞Â≠ó.</p><pre>"[0-9]{2,3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.</pre><p><a href="https://regex101.com/r/juM86s/1">Âú®Á∫øÁªÉ‰π†</a></p><p>Êàë‰ª¨ÂèØ‰ª•ÁúÅÁï•Á¨¨‰∫å‰∏™ÂèÇÊï∞.<br>‰æãÂ¶Ç, <code>[0-9]&#123;2,&#125;</code> ÂåπÈÖçËá≥Â∞ë‰∏§‰Ωç 0~9 ÁöÑÊï∞Â≠ó.</p><p>Â¶ÇÊûúÈÄóÂè∑‰πüÁúÅÁï•ÊéâÂàôË°®Á§∫ÈáçÂ§çÂõ∫ÂÆöÁöÑÊ¨°Êï∞.<br>‰æãÂ¶Ç, <code>[0-9]&#123;3&#125;</code> ÂåπÈÖç3‰ΩçÊï∞Â≠ó</p><pre>"[0-9]{2,}" => The number was 9.<a href="#learn-regex"><strong>9997</strong></a> but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.</pre><p><a href="https://regex101.com/r/Gdy4w5/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"[0-9]{3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to 10.0.</pre><p><a href="https://regex101.com/r/Sivu30/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-5-ÁâπÂæÅÊ†áÁæ§"><a href="#2-5-ÁâπÂæÅÊ†áÁæ§" class="headerlink" title="2.5 (...) ÁâπÂæÅÊ†áÁæ§"></a>2.5 <code>(...)</code> ÁâπÂæÅÊ†áÁæ§</h2><p>ÁâπÂæÅÊ†áÁæ§ÊòØ‰∏ÄÁªÑÂÜôÂú® <code>(...)</code> ‰∏≠ÁöÑÂ≠êÊ®°Âºè. ‰æãÂ¶Ç‰πãÂâçËØ¥ÁöÑ <code>&#123;&#125;</code> ÊòØÁî®Êù•Ë°®Á§∫ÂâçÈù¢‰∏Ä‰∏™Â≠óÁ¨¶Âá∫Áé∞ÊåáÂÆöÊ¨°Êï∞. ‰ΩÜÂ¶ÇÊûúÂú® <code>&#123;&#125;</code> ÂâçÂä†ÂÖ•ÁâπÂæÅÊ†áÁæ§ÂàôË°®Á§∫Êï¥‰∏™Ê†áÁæ§ÂÜÖÁöÑÂ≠óÁ¨¶ÈáçÂ§ç N Ê¨°. ‰æãÂ¶Ç, Ë°®ËææÂºè <code>(ab)*</code> ÂåπÈÖçËøûÁª≠Âá∫Áé∞ 0 ÊàñÊõ¥Â§ö‰∏™ <code>ab</code>.</p><p>Êàë‰ª¨ËøòÂèØ‰ª•Âú® <code>()</code> ‰∏≠Áî®ÊàñÂ≠óÁ¨¶ <code>|</code> Ë°®Á§∫Êàñ. ‰æãÂ¶Ç, <code>(c|g|p)ar</code> ÂåπÈÖç <code>car</code> Êàñ <code>gar</code> Êàñ <code>par</code>.</p><pre>"(c|g|p)ar" => The <a href="#learn-regex"><strong>car</strong></a> is <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.</pre><p><a href="https://regex101.com/r/tUxrBG/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-6-ÊàñËøêÁÆóÁ¨¶"><a href="#2-6-ÊàñËøêÁÆóÁ¨¶" class="headerlink" title="2.6 | ÊàñËøêÁÆóÁ¨¶"></a>2.6 <code>|</code> ÊàñËøêÁÆóÁ¨¶</h2><p>ÊàñËøêÁÆóÁ¨¶Â∞±Ë°®Á§∫Êàñ, Áî®‰ΩúÂà§Êñ≠Êù°‰ª∂.</p><p>‰æãÂ¶Ç <code>(T|t)he|car</code> ÂåπÈÖç <code>(T|t)he</code> Êàñ <code>car</code>.</p><pre>"(T|t)he|car" => <a href="#learn-regex"><strong>The</strong></a> <a href="#learn-regex"><strong>car</strong></a> is parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/fBXyX0/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-7-ËΩ¨Á†ÅÁâπÊÆäÂ≠óÁ¨¶"><a href="#2-7-ËΩ¨Á†ÅÁâπÊÆäÂ≠óÁ¨¶" class="headerlink" title="2.7 ËΩ¨Á†ÅÁâπÊÆäÂ≠óÁ¨¶"></a>2.7 ËΩ¨Á†ÅÁâπÊÆäÂ≠óÁ¨¶</h2><p>ÂèçÊñúÁ∫ø <code>\</code> Âú®Ë°®ËææÂºè‰∏≠Áî®‰∫éËΩ¨Á†ÅÁ¥ßË∑üÂÖ∂ÂêéÁöÑÂ≠óÁ¨¶. Áî®‰∫éÊåáÂÆö <code>&#123; &#125; [ ] / \ + * . $ ^ | ?</code> Ëøô‰∫õÁâπÊÆäÂ≠óÁ¨¶. Â¶ÇÊûúÊÉ≥Ë¶ÅÂåπÈÖçËøô‰∫õÁâπÊÆäÂ≠óÁ¨¶ÂàôË¶ÅÂú®ÂÖ∂ÂâçÈù¢Âä†‰∏äÂèçÊñúÁ∫ø <code>\</code>.</p><p>‰æãÂ¶Ç <code>.</code> ÊòØÁî®Êù•ÂåπÈÖçÈô§Êç¢Ë°åÁ¨¶Â§ñÁöÑÊâÄÊúâÂ≠óÁ¨¶ÁöÑ. Â¶ÇÊûúÊÉ≥Ë¶ÅÂåπÈÖçÂè•Â≠ê‰∏≠ÁöÑ <code>.</code> ÂàôË¶ÅÂÜôÊàê <code>\.</code> ‰ª•‰∏ãËøô‰∏™‰æãÂ≠ê <code>\.?</code>ÊòØÈÄâÊã©ÊÄßÂåπÈÖç<code>.</code></p><pre>"(f|c|m)at\.?" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> sat on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/DOc5Nu/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="2-8-ÈîöÁÇπ"><a href="#2-8-ÈîöÁÇπ" class="headerlink" title="2.8 ÈîöÁÇπ"></a>2.8 ÈîöÁÇπ</h2><p>Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠, ÊÉ≥Ë¶ÅÂåπÈÖçÊåáÂÆöÂºÄÂ§¥ÊàñÁªìÂ∞æÁöÑÂ≠óÁ¨¶‰∏≤Â∞±Ë¶Å‰ΩøÁî®Âà∞ÈîöÁÇπ. <code>^</code> ÊåáÂÆöÂºÄÂ§¥, <code>$</code> ÊåáÂÆöÁªìÂ∞æ.</p><h3 id="2-8-1-Âè∑"><a href="#2-8-1-Âè∑" class="headerlink" title="2.8.1 ^ Âè∑"></a>2.8.1 <code>^</code> Âè∑</h3><p><code>^</code> Áî®Êù•Ê£ÄÊü•ÂåπÈÖçÁöÑÂ≠óÁ¨¶‰∏≤ÊòØÂê¶Âú®ÊâÄÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁöÑÂºÄÂ§¥.</p><p>‰æãÂ¶Ç, Âú® <code>abc</code> ‰∏≠‰ΩøÁî®Ë°®ËææÂºè <code>^a</code> ‰ºöÂæóÂà∞ÁªìÊûú <code>a</code>. ‰ΩÜÂ¶ÇÊûú‰ΩøÁî® <code>^b</code> Â∞ÜÂåπÈÖç‰∏çÂà∞‰ªª‰ΩïÁªìÊûú. Âõ†‰∏∫Âú®Â≠óÁ¨¶‰∏≤ <code>abc</code> ‰∏≠Âπ∂‰∏çÊòØ‰ª• <code>b</code> ÂºÄÂ§¥.</p><p>‰æãÂ¶Ç, <code>^(T|t)he</code> ÂåπÈÖç‰ª• <code>The</code> Êàñ <code>the</code> ÂºÄÂ§¥ÁöÑÂ≠óÁ¨¶‰∏≤.</p><pre>"(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in <a href="#learn-regex"><strong>the</strong></a> garage.</pre><p><a href="https://regex101.com/r/5ljjgB/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"^(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.</pre><p><a href="https://regex101.com/r/jXrKne/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="2-8-2-Âè∑"><a href="#2-8-2-Âè∑" class="headerlink" title="2.8.2 `###  Âè∑"></a>2.8.2 `###  Âè∑</h3><p>ÂêåÁêÜ‰∫é <code>^</code> Âè∑, <code>$</code> Âè∑Áî®Êù•ÂåπÈÖçÂ≠óÁ¨¶ÊòØÂê¶ÊòØÊúÄÂêé‰∏Ä‰∏™.</p><p>‰æãÂ¶Ç, <code>(at\.)$</code> ÂåπÈÖç‰ª• <code>at.</code> ÁªìÂ∞æÁöÑÂ≠óÁ¨¶‰∏≤.</p><pre>"(at\.)" => The fat c<a href="#learn-regex"><strong>at.</strong></a> s<a href="#learn-regex"><strong>at.</strong></a> on the m<a href="#learn-regex"><strong>at.</strong></a></pre><p><a href="https://regex101.com/r/y4Au4D/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"(at\.)$" => The fat cat. sat. on the m<a href="#learn-regex"><strong>at.</strong></a></pre><p><a href="https://regex101.com/r/t0AkOd/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="3-ÁÆÄÂÜôÂ≠óÁ¨¶ÈõÜ"><a href="#3-ÁÆÄÂÜôÂ≠óÁ¨¶ÈõÜ" class="headerlink" title="3. ÁÆÄÂÜôÂ≠óÁ¨¶ÈõÜ"></a>3. ÁÆÄÂÜôÂ≠óÁ¨¶ÈõÜ</h2><p>Ê≠£ÂàôË°®ËææÂºèÊèê‰æõ‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÂ≠óÁ¨¶ÈõÜÁÆÄÂÜô. Â¶Ç‰∏ã:</p><table><thead><tr><th align="center">ÁÆÄÂÜô</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td align="center">.</td><td>Èô§Êç¢Ë°åÁ¨¶Â§ñÁöÑÊâÄÊúâÂ≠óÁ¨¶</td></tr><tr><td align="center">\w</td><td>ÂåπÈÖçÊâÄÊúâÂ≠óÊØçÊï∞Â≠ó, Á≠âÂêå‰∫é <code>[a-zA-Z0-9_]</code></td></tr><tr><td align="center">\W</td><td>ÂåπÈÖçÊâÄÊúâÈùûÂ≠óÊØçÊï∞Â≠ó, Âç≥Á¨¶Âè∑, Á≠âÂêå‰∫é: <code>[^\w]</code></td></tr><tr><td align="center">\d</td><td>ÂåπÈÖçÊï∞Â≠ó: <code>[0-9]</code></td></tr><tr><td align="center">\D</td><td>ÂåπÈÖçÈùûÊï∞Â≠ó: <code>[^\d]</code></td></tr><tr><td align="center">\s</td><td>ÂåπÈÖçÊâÄÊúâÁ©∫Ê†ºÂ≠óÁ¨¶, Á≠âÂêå‰∫é: <code>[\t\n\f\r\p&#123;Z&#125;]</code></td></tr><tr><td align="center">\S</td><td>ÂåπÈÖçÊâÄÊúâÈùûÁ©∫Ê†ºÂ≠óÁ¨¶: <code>[^\s]</code></td></tr><tr><td align="center">\f</td><td>ÂåπÈÖç‰∏Ä‰∏™Êç¢È°µÁ¨¶</td></tr><tr><td align="center">\n</td><td>ÂåπÈÖç‰∏Ä‰∏™Êç¢Ë°åÁ¨¶</td></tr><tr><td align="center">\r</td><td>ÂåπÈÖç‰∏Ä‰∏™ÂõûËΩ¶Á¨¶</td></tr><tr><td align="center">\t</td><td>ÂåπÈÖç‰∏Ä‰∏™Âà∂Ë°®Á¨¶</td></tr><tr><td align="center">\v</td><td>ÂåπÈÖç‰∏Ä‰∏™ÂûÇÁõ¥Âà∂Ë°®Á¨¶</td></tr><tr><td align="center">\p</td><td>ÂåπÈÖç CR/LF (Á≠âÂêå‰∫é <code>\r\n</code>)ÔºåÁî®Êù•ÂåπÈÖç DOS Ë°åÁªàÊ≠¢Á¨¶</td></tr></tbody></table><h2 id="4-Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®Ä-ÂâçÂêéÈ¢ÑÊü•"><a href="#4-Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®Ä-ÂâçÂêéÈ¢ÑÊü•" class="headerlink" title="4. Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®Ä(ÂâçÂêéÈ¢ÑÊü•)"></a>4. Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®Ä(ÂâçÂêéÈ¢ÑÊü•)</h2><p>ÂÖàË°åÊñ≠Ë®ÄÂíåÂêéÂèëÊñ≠Ë®ÄÈÉΩÂ±û‰∫é<strong>ÈùûÊçïËé∑Á∞á</strong>(‰∏çÊçïËé∑ÊñáÊú¨ Ôºå‰πü‰∏çÈíàÂØπÁªÑÂêàËÆ°ËøõË°åËÆ°Êï∞).<br>ÂÖàË°åÊñ≠Ë®ÄÁî®‰∫éÂà§Êñ≠ÊâÄÂåπÈÖçÁöÑÊ†ºÂºèÊòØÂê¶Âú®Âè¶‰∏Ä‰∏™Á°ÆÂÆöÁöÑÊ†ºÂºè‰πãÂâç, ÂåπÈÖçÁªìÊûú‰∏çÂåÖÂê´ËØ•Á°ÆÂÆöÊ†ºÂºè(‰ªÖ‰Ωú‰∏∫Á∫¶Êùü).</p><p>‰æãÂ¶Ç, Êàë‰ª¨ÊÉ≥Ë¶ÅËé∑ÂæóÊâÄÊúâË∑üÂú® <code>$</code> Á¨¶Âè∑ÂêéÁöÑÊï∞Â≠ó, Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ê≠£ÂêéÂèëÊñ≠Ë®Ä <code>(?&lt;=\$)[0-9\.]*</code>.<br>Ëøô‰∏™Ë°®ËææÂºèÂåπÈÖç <code>$</code> ÂºÄÂ§¥, ‰πãÂêéË∑üÁùÄ <code>0,1,2,3,4,5,6,7,8,9,.</code> Ëøô‰∫õÂ≠óÁ¨¶ÂèØ‰ª•Âá∫Áé∞Â§ß‰∫éÁ≠â‰∫é 0 Ê¨°.</p><p>Èõ∂ÂÆΩÂ∫¶Êñ≠Ë®ÄÂ¶Ç‰∏ã:</p><table><thead><tr><th align="center">Á¨¶Âè∑</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td align="center">?=</td><td>Ê≠£ÂÖàË°åÊñ≠Ë®Ä-Â≠òÂú®</td></tr><tr><td align="center">?!</td><td>Ë¥üÂÖàË°åÊñ≠Ë®Ä-ÊéíÈô§</td></tr><tr><td align="center">?&lt;=</td><td>Ê≠£ÂêéÂèëÊñ≠Ë®Ä-Â≠òÂú®</td></tr><tr><td align="center">?&lt;!</td><td>Ë¥üÂêéÂèëÊñ≠Ë®Ä-ÊéíÈô§</td></tr></tbody></table><h3 id="4-1-Ê≠£ÂÖàË°åÊñ≠Ë®Ä"><a href="#4-1-Ê≠£ÂÖàË°åÊñ≠Ë®Ä" class="headerlink" title="4.1 ?=... Ê≠£ÂÖàË°åÊñ≠Ë®Ä"></a>4.1 <code>?=...</code> Ê≠£ÂÖàË°åÊñ≠Ë®Ä</h3><p><code>?=...</code> Ê≠£ÂÖàË°åÊñ≠Ë®Ä, Ë°®Á§∫Á¨¨‰∏ÄÈÉ®ÂàÜË°®ËææÂºè‰πãÂêéÂøÖÈ°ªË∑üÁùÄ <code>?=...</code>ÂÆö‰πâÁöÑË°®ËææÂºè.</p><p>ËøîÂõûÁªìÊûúÂè™ÂåÖÂê´Êª°Ë∂≥ÂåπÈÖçÊù°‰ª∂ÁöÑÁ¨¨‰∏ÄÈÉ®ÂàÜË°®ËææÂºè.<br>ÂÆö‰πâ‰∏Ä‰∏™Ê≠£ÂÖàË°åÊñ≠Ë®ÄË¶Å‰ΩøÁî® <code>()</code>. Âú®Êã¨Âè∑ÂÜÖÈÉ®‰ΩøÁî®‰∏Ä‰∏™ÈóÆÂè∑ÂíåÁ≠âÂè∑: <code>(?=...)</code>. </p><p>Ê≠£ÂÖàË°åÊñ≠Ë®ÄÁöÑÂÜÖÂÆπÂÜôÂú®Êã¨Âè∑‰∏≠ÁöÑÁ≠âÂè∑ÂêéÈù¢.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>(T|t)he(?=\sfat)</code> ÂåπÈÖç <code>The</code> Âíå <code>the</code>, Âú®Êã¨Âè∑‰∏≠Êàë‰ª¨ÂèàÂÆö‰πâ‰∫ÜÊ≠£ÂÖàË°åÊñ≠Ë®Ä <code>(?=\sfat)</code> ,Âç≥ <code>The</code> Âíå <code>the</code> ÂêéÈù¢Á¥ßË∑üÁùÄ <code>(Á©∫Ê†º)fat</code>.</p><pre>"(T|t)he(?=\sfat)" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/IDDARt/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="4-2-Ë¥üÂÖàË°åÊñ≠Ë®Ä"><a href="#4-2-Ë¥üÂÖàË°åÊñ≠Ë®Ä" class="headerlink" title="4.2 ?!... Ë¥üÂÖàË°åÊñ≠Ë®Ä"></a>4.2 <code>?!...</code> Ë¥üÂÖàË°åÊñ≠Ë®Ä</h3><p>Ë¥üÂÖàË°åÊñ≠Ë®Ä <code>?!</code> Áî®‰∫éÁ≠õÈÄâÊâÄÊúâÂåπÈÖçÁªìÊûú, Á≠õÈÄâÊù°‰ª∂‰∏∫ ÂÖ∂Âêé‰∏çË∑üÈöèÁùÄÊñ≠Ë®Ä‰∏≠ÂÆö‰πâÁöÑÊ†ºÂºè.<br><code>Ê≠£ÂÖàË°åÊñ≠Ë®Ä</code>  ÂÆö‰πâÂíå <code>Ë¥üÂÖàË°åÊñ≠Ë®Ä</code> ‰∏ÄÊ†∑, Âå∫Âà´Â∞±ÊòØ <code>=</code> ÊõøÊç¢Êàê <code>!</code> ‰πüÂ∞±ÊòØ <code>(?!...)</code>.</p><p>Ë°®ËææÂºè <code>(T|t)he(?!\sfat)</code> ÂåπÈÖç <code>The</code> Âíå <code>the</code>, ‰∏îÂÖ∂Âêé‰∏çË∑üÁùÄ <code>(Á©∫Ê†º)fat</code>.</p><pre>"(T|t)he(?!\sfat)" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/V32Npg/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="4-3-lt-Ê≠£ÂêéÂèëÊñ≠Ë®Ä"><a href="#4-3-lt-Ê≠£ÂêéÂèëÊñ≠Ë®Ä" class="headerlink" title="4.3 ?&lt;= ... Ê≠£ÂêéÂèëÊñ≠Ë®Ä"></a>4.3 <code>?&lt;= ...</code> Ê≠£ÂêéÂèëÊñ≠Ë®Ä</h3><p>Ê≠£ÂêéÂèëÊñ≠Ë®Ä ËÆ∞‰Ωú<code>(?&lt;=...)</code> Áî®‰∫éÁ≠õÈÄâÊâÄÊúâÂåπÈÖçÁªìÊûú, Á≠õÈÄâÊù°‰ª∂‰∏∫ ÂÖ∂ÂâçË∑üÈöèÁùÄÊñ≠Ë®Ä‰∏≠ÂÆö‰πâÁöÑÊ†ºÂºè.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>(?&lt;=(T|t)he\s)(fat|mat)</code> ÂåπÈÖç <code>fat</code> Âíå <code>mat</code>, ‰∏îÂÖ∂ÂâçË∑üÁùÄ <code>The</code> Êàñ <code>the</code>.</p><pre>"(?<=(T|t)he\s)(fat|mat)" => The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the <a href="#learn-regex"><strong>mat</strong></a>.</pre><p><a href="https://regex101.com/r/avH165/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="4-4-lt-Ë¥üÂêéÂèëÊñ≠Ë®Ä"><a href="#4-4-lt-Ë¥üÂêéÂèëÊñ≠Ë®Ä" class="headerlink" title="4.4 ?&lt;!... Ë¥üÂêéÂèëÊñ≠Ë®Ä"></a>4.4 <code>?&lt;!...</code> Ë¥üÂêéÂèëÊñ≠Ë®Ä</h3><p>Ë¥üÂêéÂèëÊñ≠Ë®Ä ËÆ∞‰Ωú <code>(?&lt;!...)</code> Áî®‰∫éÁ≠õÈÄâÊâÄÊúâÂåπÈÖçÁªìÊûú, Á≠õÈÄâÊù°‰ª∂‰∏∫ ÂÖ∂Ââç‰∏çË∑üÈöèÁùÄÊñ≠Ë®Ä‰∏≠ÂÆö‰πâÁöÑÊ†ºÂºè.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>(?&lt;!(T|t)he\s)(cat)</code> ÂåπÈÖç <code>cat</code>, ‰∏îÂÖ∂Ââç‰∏çË∑üÁùÄ <code>The</code> Êàñ <code>the</code>.</p><pre>"(?&lt;!(T|t)he\s)(cat)" => The cat sat on <a href="#learn-regex"><strong>cat</strong></a>.</pre><p><a href="https://regex101.com/r/8Efx5G/1">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="5-Ê†áÂøó"><a href="#5-Ê†áÂøó" class="headerlink" title="5. Ê†áÂøó"></a>5. Ê†áÂøó</h2><p>Ê†áÂøó‰πüÂè´Ê®°Âºè‰øÆÊ≠£Á¨¶, Âõ†‰∏∫ÂÆÉÂèØ‰ª•Áî®Êù•‰øÆÊîπË°®ËææÂºèÁöÑÊêúÁ¥¢ÁªìÊûú.<br>Ëøô‰∫õÊ†áÂøóÂèØ‰ª•‰ªªÊÑèÁöÑÁªÑÂêà‰ΩøÁî®, ÂÆÉ‰πüÊòØÊï¥‰∏™Ê≠£ÂàôË°®ËææÂºèÁöÑ‰∏ÄÈÉ®ÂàÜ.</p><table><thead><tr><th align="center">Ê†áÂøó</th><th>ÊèèËø∞</th></tr></thead><tbody><tr><td align="center">i</td><td>ÂøΩÁï•Â§ßÂ∞èÂÜô.</td></tr><tr><td align="center">g</td><td>ÂÖ®Â±ÄÊêúÁ¥¢.</td></tr><tr><td align="center">m</td><td>Â§öË°åÁöÑ: ÈîöÁÇπÂÖÉÂ≠óÁ¨¶ <code>^</code> <code>$</code> Â∑•‰ΩúËåÉÂõ¥Âú®ÊØèË°åÁöÑËµ∑Âßã.</td></tr></tbody></table><h3 id="5-1-ÂøΩÁï•Â§ßÂ∞èÂÜô-Case-Insensitive"><a href="#5-1-ÂøΩÁï•Â§ßÂ∞èÂÜô-Case-Insensitive" class="headerlink" title="5.1 ÂøΩÁï•Â§ßÂ∞èÂÜô (Case Insensitive)"></a>5.1 ÂøΩÁï•Â§ßÂ∞èÂÜô (Case Insensitive)</h3><p>‰øÆÈ•∞ËØ≠ <code>i</code> Áî®‰∫éÂøΩÁï•Â§ßÂ∞èÂÜô.<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>/The/gi</code> Ë°®Á§∫Âú®ÂÖ®Â±ÄÊêúÁ¥¢ <code>The</code>, Âú®ÂêéÈù¢ÁöÑ <code>i</code> Â∞ÜÂÖ∂Êù°‰ª∂‰øÆÊîπ‰∏∫ÂøΩÁï•Â§ßÂ∞èÂÜô, ÂàôÂèòÊàêÊêúÁ¥¢ <code>the</code> Âíå <code>The</code>, <code>g</code> Ë°®Á§∫ÂÖ®Â±ÄÊêúÁ¥¢.</p><pre>"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.</pre><p><a href="https://regex101.com/r/dpQyf9/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"/The/gi" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.</pre><p><a href="https://regex101.com/r/ahfiuh/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="5-2-ÂÖ®Â±ÄÊêúÁ¥¢-Global-search"><a href="#5-2-ÂÖ®Â±ÄÊêúÁ¥¢-Global-search" class="headerlink" title="5.2 ÂÖ®Â±ÄÊêúÁ¥¢ (Global search)"></a>5.2 ÂÖ®Â±ÄÊêúÁ¥¢ (Global search)</h3><p>‰øÆÈ•∞Á¨¶ <code>g</code> Â∏∏Áî®‰∫éÊâßË°å‰∏Ä‰∏™ÂÖ®Â±ÄÊêúÁ¥¢ÂåπÈÖç, Âç≥(‰∏ç‰ªÖ‰ªÖËøîÂõûÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑ, ËÄåÊòØËøîÂõûÂÖ®ÈÉ®).<br>‰æãÂ¶Ç, Ë°®ËææÂºè <code>/.(at)/g</code> Ë°®Á§∫ÊêúÁ¥¢ ‰ªªÊÑèÂ≠óÁ¨¶(Èô§‰∫ÜÊç¢Ë°å) + <code>at</code>, Âπ∂ËøîÂõûÂÖ®ÈÉ®ÁªìÊûú.</p><pre>"/.(at)/" => The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the mat.</pre><p><a href="https://regex101.com/r/jnk6gM/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"/.(at)/g" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> <a href="#learn-regex"><strong>sat</strong></a> on the <a href="#learn-regex"><strong>mat</strong></a>.</pre><p><a href="https://regex101.com/r/dO1nef/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="5-3-Â§öË°å‰øÆÈ•∞Á¨¶-Multiline"><a href="#5-3-Â§öË°å‰øÆÈ•∞Á¨¶-Multiline" class="headerlink" title="5.3 Â§öË°å‰øÆÈ•∞Á¨¶ (Multiline)"></a>5.3 Â§öË°å‰øÆÈ•∞Á¨¶ (Multiline)</h3><p>Â§öË°å‰øÆÈ•∞Á¨¶ <code>m</code> Â∏∏Áî®ËØ≠ÊâßË°å‰∏Ä‰∏™Â§öË°åÂåπÈÖç.</p><p>ÂÉè‰πãÂâç‰ªãÁªçÁöÑ <code>(^,$)</code> Áî®‰∫éÊ£ÄÊü•Ê†ºÂºèÊòØÂê¶ÊòØÂú®ÂæÖÊ£ÄÊµãÂ≠óÁ¨¶‰∏≤ÁöÑÂºÄÂ§¥ÊàñÁªìÂ∞æ. ‰ΩÜÊàë‰ª¨Â¶ÇÊûúÊÉ≥Ë¶ÅÂÆÉÂú®ÊØèË°åÁöÑÂºÄÂ§¥ÂíåÁªìÂ∞æÁîüÊïà, Êàë‰ª¨ÈúÄË¶ÅÁî®Âà∞Â§öË°å‰øÆÈ•∞Á¨¶ <code>m</code>.</p><p>‰æãÂ¶Ç, Ë°®ËææÂºè <code>/at(.)?$/gm</code> Ë°®Á§∫Â∞èÂÜôÂ≠óÁ¨¶ <code>a</code> ÂêéË∑üÂ∞èÂÜôÂ≠óÁ¨¶ <code>t</code> , Êú´Â∞æÂèØÈÄâÈô§Êç¢Ë°åÁ¨¶Â§ñ‰ªªÊÑèÂ≠óÁ¨¶. Ê†πÊçÆ <code>m</code> ‰øÆÈ•∞Á¨¶, Áé∞Âú®Ë°®ËææÂºèÂåπÈÖçÊØèË°åÁöÑÁªìÂ∞æ.</p><pre>"/.at(.)?$/" => The fat                cat sat                on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/hoGMkP/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"/.at(.)?$/gm" => The <a href="#learn-regex"><strong>fat</strong></a>                  cat <a href="#learn-regex"><strong>sat</strong></a>                  on the <a href="#learn-regex"><strong>mat.</strong></a></pre><p><a href="https://regex101.com/r/E88WE2/1">Âú®Á∫øÁªÉ‰π†</a></p><h3 id="6-Ë¥™Â©™ÂåπÈÖç‰∏éÊÉ∞ÊÄßÂåπÈÖç-Greedy-vs-lazy-matching"><a href="#6-Ë¥™Â©™ÂåπÈÖç‰∏éÊÉ∞ÊÄßÂåπÈÖç-Greedy-vs-lazy-matching" class="headerlink" title="6. Ë¥™Â©™ÂåπÈÖç‰∏éÊÉ∞ÊÄßÂåπÈÖç (Greedy vs lazy matching)"></a>6. Ë¥™Â©™ÂåπÈÖç‰∏éÊÉ∞ÊÄßÂåπÈÖç (Greedy vs lazy matching)</h3><p>Ê≠£ÂàôË°®ËææÂºèÈªòËÆ§ÈááÁî®Ë¥™Â©™ÂåπÈÖçÊ®°ÂºèÔºåÂú®ËØ•Ê®°Âºè‰∏ãÊÑèÂë≥ÁùÄ‰ºöÂåπÈÖçÂ∞ΩÂèØËÉΩÈïøÁöÑÂ≠ê‰∏≤„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® <code>?</code> Â∞ÜË¥™Â©™ÂåπÈÖçÊ®°ÂºèËΩ¨Âåñ‰∏∫ÊÉ∞ÊÄßÂåπÈÖçÊ®°Âºè„ÄÇ</p><pre>"/(.*at)/" => <a href="#learn-regex"><strong>The fat cat sat on the mat</strong></a>. </pre><p><a href="https://regex101.com/r/AyAdgJ/1">Âú®Á∫øÁªÉ‰π†</a></p><pre>"/(.*?at)/" => <a href="#learn-regex"><strong>The fat</strong></a> cat sat on the mat. </pre><p><a href="https://regex101.com/r/AyAdgJ/2">Âú®Á∫øÁªÉ‰π†</a></p><h2 id="Ë¥°ÁåÆ"><a href="#Ë¥°ÁåÆ" class="headerlink" title="Ë¥°ÁåÆ"></a>Ë¥°ÁåÆ</h2><ul><li>Êä•ÂëäÈóÆÈ¢ò</li><li>ÂºÄÊîæÂêàÂπ∂ËØ∑Ê±Ç</li><li>‰º†Êí≠Ê≠§ÊñáÊ°£</li><li>Áõ¥Êé•ÂíåÊàëËÅîÁ≥ª <a href="mailto:&#x7a;&#x69;&#x69;&#115;&#x68;&#97;&#x6e;&#101;&#x64;&#x40;&#103;&#x6d;&#97;&#105;&#108;&#x2e;&#99;&#111;&#x6d;">&#x7a;&#x69;&#x69;&#115;&#x68;&#97;&#x6e;&#101;&#x64;&#x40;&#103;&#x6d;&#97;&#105;&#108;&#x2e;&#99;&#111;&#x6d;</a> Êàñ <a href="https://twitter.com/ziishaned"><img src="https://img.shields.io/twitter/url/https/twitter.com/ziishaned.svg?style=social&label=Follow%20@ziishaned" alt="Twitter URL"></a></li></ul><h2 id="ËÆ∏ÂèØËØÅ"><a href="#ËÆ∏ÂèØËØÅ" class="headerlink" title="ËÆ∏ÂèØËØÅ"></a>ËÆ∏ÂèØËØÅ</h2><p>MIT &copy; <a href="https://twitter.com/ziishaned">Zeeshan Ahmad</a></p>]]></content>
      
      
      <categories>
          
          <category> spring boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactjs learn</title>
      <link href="/2019/03/29/reactjs%20learn/"/>
      <url>/2019/03/29/reactjs%20learn/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Like any unfamiliar technology, React does have a learning curve. With practice and some patience, you <em>will</em> get the hang of it.</p></blockquote><ul><li>React also streamlines how data is stored and handled, using <strong>state</strong> and <strong>props</strong>.</li></ul><h3 id="create-react-app"><a href="#create-react-app" class="headerlink" title="create react app"></a>create react app</h3><ul><li><code>npm install -g create-react-app</code></li><li><code>npx create-react-app my-app</code> or <code>npm init react-app my-app</code></li></ul><h2 id="JSX-JavaScript-XML"><a href="#JSX-JavaScript-XML" class="headerlink" title="JSX: JavaScript + XML"></a>JSX: JavaScript + XML</h2><blockquote><p>Babel compiles JSX down to <code>React.createElement()</code> calls.</p></blockquote><p>jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> heading = <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&quot;site-heading&quot;</span>&gt;</span>Hello, React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>non-jsx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const heading = React.createElement(&#x27;h1&#x27;, &#123; className: &#x27;site-heading&#x27; &#125;, &#x27;Hello, React!&#x27;)</span><br></pre></td></tr></table></figure><p>the feature of jsx:</p><ul><li><code>className</code> is used instead of <code>class</code> for adding CSS classes, as <code>class</code> is a reserved keyword in JavaScript.</li><li>Properties and methods in JSX are camelCase - <code>onclick</code> will become <code>onClick</code>.</li><li>Self-closing tags <em>must</em> end in a slash - e.g. <code>&lt;img /&gt;</code></li></ul><h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><blockquote><p>Whether you declare a component <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components">as a function or a class</a>, it must never modify its own props. </p></blockquote><h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><p>The simplest way to define a component is to write a JavaScript function:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Class-Components"><a href="#Class-Components" class="headerlink" title="Class Components"></a>Class Components</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Job<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Charlie<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Janitor<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Table</span><br></pre></td></tr></table></figure><h3 id="Simple-Components"><a href="#Simple-Components" class="headerlink" title="Simple Components"></a>Simple Components</h3><blockquote><p>The other type of component in React is the <strong>simple component</strong>, which is a function. This component doesn‚Äôt use the <code>class</code> keyword. Let‚Äôs take our <code>Table</code> and make two simple components for it - a table header, and a table body.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TableHeader = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Job<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TableBody = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Charlie<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Janitor<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">TableHeader</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">TableBody</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>Everything should appear as it did before. As you can see, components can be nested in other components, and simple and class components can be mixed.</p><p><strong>A class component must include <code>render()</code>, and the <code>return</code> can only return one parent element.</strong></p><h3 id="Converting-a-Function-to-a-Class"><a href="#Converting-a-Function-to-a-Class" class="headerlink" title="Converting a Function to a Class"></a>Converting a Function to a Class</h3><p>convert a function component to a class in five steps:</p><ol><li>Create an <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes">ES6 class</a>, with the same name, that extends <code>React.Component</code>.</li><li>Add a single empty method to it called <code>render()</code>.</li><li>Move the body of the function into the <code>render()</code> method.</li><li>Replace <code>props</code> with <code>this.props</code> in the <code>render()</code> body.</li><li>Delete the remaining empty function declaration.</li></ol><h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><blockquote><p>Props are an effective way to pass existing data to a React component, however the component cannot change the props - they‚Äôre read-only. </p></blockquote><ul><li><em>props</em> are a way of passing data from parent to child.</li></ul><h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>State is similar to props, but it is private and fully controlled by the component.</p><p>State is reserved only for interactivity, that is, data that changes over time. </p><blockquote><p>You can think of state as any data that should be saved and modified without necessarily being added to a database - for example, adding and removing items from a shopping cart before confirming your purchase.</p></blockquote><ul><li><p>You must use <code>this.setState()</code> to modify an array. Simply applying a new value to <code>this.state.property</code> will not work.</p><p> ie.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="built_in">this</span>.state.comment = <span class="string">&#x27;Hello&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="built_in">this</span>.setState(&#123;<span class="attr">comment</span>: <span class="string">&#x27;Hello&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure></li></ul><p>tips:</p><p>Because <code>this.props</code> and <code>this.state</code> may be updated asynchronously, you should not rely on their values for calculating the next state.</p><p>ie.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="built_in">this</span>.setState(&#123;</span><br><span class="line">  <span class="attr">counter</span>: <span class="built_in">this</span>.state.counter + <span class="built_in">this</span>.props.increment,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>use a second form of <code>setState()</code> that accepts a function rather than an object. That function will receive the previous state as the first argument, and the props at the time the update is applied as the second argument:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="built_in">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">counter</span>: state.counter + props.increment</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h3 id="The-Data-Flows-Down"><a href="#The-Data-Flows-Down" class="headerlink" title="The Data Flows Down"></a>The Data Flows Down</h3><blockquote><p>If you imagine a component tree as a waterfall of props, each component‚Äôs state is like an additional water source that joins it at an arbitrary point but also flows down.</p></blockquote><p>Neither parent nor child components can know if a certain component is stateful or stateless, and they shouldn‚Äôt care whether it is defined as a function or a class.</p><p>This is why state is often called local or encapsulated. It is not accessible to any component other than the one that owns and sets it.</p><p>This is commonly called a ‚Äútop-down‚Äù or ‚Äúunidirectional‚Äù data flow. Any state is always owned by some specific component, and any data or UI derived from that state can only affect components ‚Äúbelow‚Äù them in the tree.</p><h2 id="Lifecycle-methods"><a href="#Lifecycle-methods" class="headerlink" title="Lifecycle methods"></a>Lifecycle methods</h2><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><blockquote><p>The <code>componentDidMount()</code> method runs after the component output has been rendered to the DOM. </p></blockquote><h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.timerID = <span class="built_in">setInterval</span>(</span><br><span class="line">      <span class="function">() =&gt;</span> <span class="built_in">this</span>.tick(),</span><br><span class="line">      <span class="number">1000</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">tick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      <span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Let‚Äôs quickly recap what‚Äôs going on and the order in which the methods are called:</p><ol><li>When <code>&lt;Clock /&gt;</code> is passed to <code>ReactDOM.render()</code>, React calls the constructor of the <code>Clock</code>component. Since <code>Clock</code> needs to display the current time, it initializes <code>this.state</code> with an object including the current time. We will later update this state.</li><li>React then calls the <code>Clock</code> component‚Äôs <code>render()</code> method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the <code>Clock</code>‚Äôs render output.</li><li>When the <code>Clock</code> output is inserted in the DOM, React calls the <code>componentDidMount()</code> lifecycle method. Inside it, the <code>Clock</code> component asks the browser to set up a timer to call the component‚Äôs <code>tick()</code> method once a second.</li><li>Every second the browser calls the <code>tick()</code> method. Inside it, the <code>Clock</code> component schedules a UI update by calling <code>setState()</code> with an object containing the current time. Thanks to the <code>setState()</code> call, React knows the state has changed, and calls the <code>render()</code> method again to learn what should be on the screen. This time, <code>this.state.date</code> in the <code>render()</code> method will be different, and so the render output will include the updated time. React updates the DOM accordingly.</li><li>If the <code>Clock</code> component is ever removed from the DOM, React calls the <code>componentWillUnmount()</code> lifecycle method so the timer is stopped.</li></ol><p>ÊÄªÁªìÔºöconstructor-&gt;render()-&gt;componentDidMount()</p><p>stateÊîπÂèò-&gt;render()</p><h3 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps"></a>componentWillReceiveProps</h3><p>componentWillReceivePropsÂú®ÂàùÂßãÂåñrenderÁöÑÊó∂ÂÄô‰∏ç‰ºöÊâßË°åÔºåÂÆÉ‰ºöÂú®ComponentÊé•ÂèóÂà∞Êñ∞ÁöÑÁä∂ÊÄÅ(Props)Êó∂Ë¢´Ëß¶ÂèëÔºå‰∏ÄËà¨Áî®‰∫éÁà∂ÁªÑ‰ª∂Áä∂ÊÄÅÊõ¥Êñ∞Êó∂Â≠êÁªÑ‰ª∂ÁöÑÈáçÊñ∞Ê∏≤Êüì„ÄÇ</p><p>Âú®componentWillReceiveProps‰∏≠ÊÉ≥‰Ωú‰ªª‰ΩïÂèòÊõ¥ÊúÄÂ•ΩÈÉΩÂ∞Ü‰∏§‰∏™Áä∂ÊÄÅËøõË°åÊØîËæÉÔºåÂÅáÂ¶ÇÁä∂ÊÄÅÊúâÂºÇÊâçÊâßË°å‰∏ã‰∏ÄÊ≠•„ÄÇ‰∏çÁÑ∂ÂÆπÊòìÈÄ†ÊàêÁªÑ‰ª∂ÁöÑÂ§öÊ¨°Ê∏≤ÊüìÔºåÂπ∂‰∏îËøô‰∫õÊ∏≤ÊüìÈÉΩÊòØÊ≤°ÊúâÊÑè‰πâÁöÑ„ÄÇ</p><h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><h2 id="Conditional-Rendering"><a href="#Conditional-Rendering" class="headerlink" title="Conditional Rendering"></a>Conditional Rendering</h2><blockquote><p>Also remember that whenever conditions become too complex, it might be a good time to <a href="https://reactjs.org/docs/components-and-props.html#extracting-components">extract a component</a>.</p></blockquote><ul><li>Returning <code>null</code> from a component‚Äôs <code>render</code> method does not affect the firing of the component‚Äôs lifecycle methods. For instance <code>componentDidUpdate</code> will still be called.</li></ul><h2 id="Lists-and-Keys"><a href="#Lists-and-Keys" class="headerlink" title="Lists and Keys"></a>Lists and Keys</h2><blockquote><p>Keep in mind that if the <code>map()</code> body is too nested, it might be a good time to <a href="https://reactjs.org/docs/components-and-props.html#extracting-components">extract a component</a>.</p></blockquote><h2 id="Forms"><a href="#Forms" class="headerlink" title="Forms"></a>Forms</h2><h2 id="Lifting-State-Up"><a href="#Lifting-State-Up" class="headerlink" title="Lifting State Up"></a>Lifting State Up</h2><h2 id="Composition-vs-Inheritance"><a href="#Composition-vs-Inheritance" class="headerlink" title="Composition vs Inheritance"></a>Composition vs Inheritance</h2><ul><li>Remember that components may accept arbitrary props, including primitive values, React elements, or functions.</li></ul><h2 id="Thinking-in-React"><a href="#Thinking-in-React" class="headerlink" title="Thinking in React"></a>Thinking in React</h2><ul><li>You can build top-down or bottom-up. That is, you can either start with building the components higher up in the hierarchy or with the ones lower in it. In simpler examples, it‚Äôs usually easier to go top-down, and on larger projects, it‚Äôs easier to go bottom-up and write tests as you build.</li><li><strong>Remember</strong>: React is all about one-way data flow down the component hierarchy. </li></ul>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javascript learn</title>
      <link href="/2019/03/29/javascript%20learn/"/>
      <url>/2019/03/29/javascript%20learn/</url>
      
        <content type="html"><![CDATA[<h3 id="types"><a href="#types" class="headerlink" title="types"></a>types</h3><ul><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>Number</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"><code>Boolean</code></a></p><blockquote><p>false, 0, empty strings (‚Äú‚Äù), NaN, null, and undefined all become false.</p></blockquote></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a> (new in ES2015)</p></li><li><p><code>Object</code></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date"><code>Date</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp"><code>RegExp</code></a></li></ul></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null"><code>null</code></a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a></p><blockquote><p>declare a variable without assigning a value to it. If you do this, the variable‚Äôs type is <code>undefined</code>. <code>undefined</code> is actually a constant.</p></blockquote></li></ul><h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><ul><li><p>let</p><blockquote><p><strong>let</strong> allows you to declare block-level variables. The declared variable is available from the <em>block</em> it is enclosed in.</p></blockquote></li><li><p>const</p><blockquote><p><strong>const</strong> allows you to declare variables whose values are never intended to change. The variable is available from the <em>block</em> it is declared in.</p></blockquote></li><li><p>var</p><blockquote><p>A variable declared with the <strong>var</strong> keyword is available from the written out <em>function</em> (as opposed to an anonymous function) it is declared in.</p></blockquote></li></ul><h3 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h3><blockquote><p><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> , <code>%</code> ,<code>=</code>,<code>+=</code> and <code>-=</code></p></blockquote><h3 id="Control-structures"><a href="#Control-structures" class="headerlink" title="Control structures"></a>Control structures</h3><ul><li><p>Conditional statements are supported by <code>if</code> and <code>else</code></p></li><li><p> <code>while</code> loops and <code>do-while</code> loops.</p></li><li><p> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for"><code>for</code> loop</a> is the same as that in C and Java</p></li></ul>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// Will execute 5 times</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> array) &#123;</span><br><span class="line">  <span class="comment">// do something with value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="comment">// do something with object property</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>&amp;&amp;</code> and <code>||</code> operators</p></li><li><p> a ternary operator for conditional expressions:</p></li></ul><p>  <code>var allowed = (age &gt; 18) ? &#39;yes&#39; : &#39;no&#39;;</code></p><ul><li> <code>switch</code> statement </li></ul><h3 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h3><blockquote><p>objects can be thought of as simple collections of name-value pairs, like HashMaps in Java.</p><p>The ‚Äúname‚Äù part is a JavaScript string, while the value can be any JavaScript value ‚Äî including more objects.</p></blockquote><ul><li><p>two basic ways to create an empty object:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">&#x27;dog&#x27;</span>;</span><br><span class="line">a[<span class="number">1</span>] = <span class="string">&#x27;cat&#x27;</span>;</span><br><span class="line">a[<span class="number">2</span>] = <span class="string">&#x27;hen&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;hen&#x27;</span>];</span><br><span class="line"></span><br><span class="line">a.length; <span class="comment">// 3</span></span><br><span class="line">b.length;<span class="comment">//3</span></span><br></pre></td></tr></table></figure><ul><li><p>terating over an array</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;hen&#x27;</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Do something with currentValue or array[index]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><blockquote><p>A JavaScript function can take 0 or more named parameters. The function body can contain as many statements as you like and can declare its own variables which are local to that function. The <code>return</code> statement can be used to return a value at any time, terminating the function. If no return statement is used (or an empty return with no value), JavaScript returns <code>undefined</code>.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">avg</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> args) &#123;</span><br><span class="line">    sum += value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum / args.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//above defined is equivalent to below</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> avg = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="built_in">arguments</span>.length; i &lt; j; i++) &#123;</span><br><span class="line">    sum += <span class="built_in">arguments</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum / <span class="built_in">arguments</span>.length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">avg(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// 3.5</span></span><br></pre></td></tr></table></figure><h3 id="Custom-objects"><a href="#Custom-objects" class="headerlink" title="Custom objects"></a>Custom objects</h3><blockquote><p>JavaScript uses functions as classes. </p></blockquote><ul><li><p>the way to attach a function to an object.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makePerson</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">first</span>: first,</span><br><span class="line">    <span class="attr">last</span>: last,</span><br><span class="line">    <span class="attr">fullName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.first + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.last;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fullNameReversed</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.last + <span class="string">&#x27;, &#x27;</span> + <span class="built_in">this</span>.first;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = makePerson(<span class="string">&#x27;Simon&#x27;</span>, <span class="string">&#x27;Willison&#x27;</span>);</span><br><span class="line">s.fullName(); <span class="comment">// &quot;Simon Willison&quot;</span></span><br><span class="line">s.fullNameReversed(); <span class="comment">// &quot;Willison, Simon&quot;</span></span><br></pre></td></tr></table></figure><p>good:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.first = first;</span><br><span class="line">  <span class="built_in">this</span>.last = last;</span><br><span class="line">  <span class="built_in">this</span>.fullName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.first + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.last;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">this</span>.fullNameReversed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.last + <span class="string">&#x27;, &#x27;</span> + <span class="built_in">this</span>.first;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Person(<span class="string">&#x27;Simon&#x27;</span>, <span class="string">&#x27;Willison&#x27;</span>);</span><br></pre></td></tr></table></figure><p>better:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">personFullName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.first + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">personFullNameReversed</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.last + <span class="string">&#x27;, &#x27;</span> + <span class="built_in">this</span>.first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.first = first;</span><br><span class="line">  <span class="built_in">this</span>.last = last;</span><br><span class="line">  <span class="built_in">this</span>.fullName = personFullName;</span><br><span class="line">  <span class="built_in">this</span>.fullNameReversed = personFullNameReversed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>best:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.first = first;</span><br><span class="line">  <span class="built_in">this</span>.last = last;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.fullName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.first + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.last;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.fullNameReversed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.last + <span class="string">&#x27;, &#x27;</span> + <span class="built_in">this</span>.first;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>this</code> refers to the current object. </p><blockquote><p>What that actually means is specified by the way in which you called that function.</p><p> If you called it using dot notation or bracket notation on an object, that object becomes <code>this</code>.</p><p> If dot notation wasn‚Äôt used for the call, <code>this</code> refers to the global object.</p></blockquote></li><li><p><code>new</code> is strongly related to <code>this</code>.</p><blockquote><p>Functions that are designed to be called by <code>new</code> are called constructor functions. Common practice is to capitalize these functions as a reminder to call them with <code>new</code>.</p></blockquote></li><li><p><code>Person.prototype</code> is an object shared by all instances of <code>Person</code>.</p><blockquote><p><strong>prototype chain</strong>:any time you attempt to access a property of <code>Person</code> that isn‚Äôt set, JavaScript will check <code>Person.prototype</code> to see if that property exists there instead. As a result, anything assigned to <code>Person.prototype</code> becomes available to all instances of that constructor via the <code>this</code> object.</p></blockquote><ul><li><p>JavaScript lets you modify something‚Äôs prototype at any time in your program, which means you can add extra methods to existing objects at runtime:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Person(<span class="string">&#x27;Simon&#x27;</span>, <span class="string">&#x27;Willison&#x27;</span>);</span><br><span class="line">s.firstNameCaps(); <span class="comment">// TypeError on line 1: s.firstNameCaps is not a function</span></span><br><span class="line"></span><br><span class="line">Person.prototype.firstNameCaps = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.first.toUpperCase();</span><br><span class="line">&#125;;</span><br><span class="line">s.firstNameCaps(); <span class="comment">// &quot;SIMON&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>the prototype forms part of a chain. The root of that chain is <code>Object.prototype</code>, whose methods include <code>toString()</code> ‚Äî it is this method that is called when you try to represent an object as a string. </p></li></ul></li><li><p>The <strong>call()</strong> method calls a function with a given <code>this</code> value and arguments provided individually.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Product</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  Product.call(<span class="built_in">this</span>, name, price);</span><br><span class="line">  <span class="built_in">this</span>.category = <span class="string">&#x27;food&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Food(<span class="string">&#x27;cheese&#x27;</span>, <span class="number">5</span>).name);</span><br><span class="line"><span class="comment">// expected output: &quot;cheese&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>The <strong>apply()</strong> method calls a function with a given <code>this</code> value, and <code>arguments</code> provided as an array (or an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#Working_with_array-like_objects">array-like object</a>).</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, numbers);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(max);</span><br><span class="line"><span class="comment">// expected output: 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, numbers);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(min);</span><br><span class="line"><span class="comment">// expected output: 2</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="Inner-functions"><a href="#Inner-functions" class="headerlink" title="Inner functions"></a>Inner functions</h4><p>ÊñπÊ≥ïÊòØÂ≠òÂÇ®Âú®ÂØπË±°Â±ûÊÄß‰∏≠ÁöÑÂáΩÊï∞</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parentFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">nestedFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">4</span>; <span class="comment">// parentFunc can&#x27;t use this</span></span><br><span class="line">    <span class="keyword">return</span> a + b; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nestedFunc(); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = makeAdder(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> y = makeAdder(<span class="number">20</span>);</span><br><span class="line">x(<span class="number">6</span>); <span class="comment">// returns 11</span></span><br><span class="line">y(<span class="number">7</span>); <span class="comment">// returns 27</span></span><br></pre></td></tr></table></figure><blockquote><p>Scope objects form a chain called the scope chain, similar to the prototype chain used by JavaScript‚Äôs object system.</p></blockquote><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><p><strong>curly braces</strong></p><p>Êã¨Âè∑ÔºàÔºâ</p><p><strong>Spread syntax</strong></p><p>ÁúÅÁï•Âè∑</p><ul><li>The spread syntax is simply three dots: <code>...</code></li><li>It allows an iterable to expand in places where 0+ arguments are expected.</li></ul><h4 id="asterisk"><a href="#asterisk" class="headerlink" title="asterisk"></a>asterisk</h4><p>ÊòüÂè∑ *</p><h3 id="regular-expression"><a href="#regular-expression" class="headerlink" title="regular expression"></a>regular expression</h3><ul><li><p>Ê†°È™åÂê´ÊúâÁ©∫Ê†º</p><p><code>reg = /^((?! ).)*$/;</code></p></li><li><p>Ê†°È™åÂè™ÊúâÊï∞Â≠ó„ÄÅÂ≠óÊØçÂíå‰∏ãÂàíÁ∫ø</p><p><code>reg = /^[_0-9a-z]*$/;</code></p></li></ul><h3 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h3><p>ÂÆöÊó∂Ë∞ÉÂ∫¶</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithms + Data Structures = Programs</title>
      <link href="/2018/12/18/Algorithms%20+%20Data%20Structures%20=%20Programs/"/>
      <url>/2018/12/18/Algorithms%20+%20Data%20Structures%20=%20Programs/</url>
      
        <content type="html"><![CDATA[<h3 id="What-is-a-Data-Structure"><a href="#What-is-a-Data-Structure" class="headerlink" title="What is a Data Structure"></a>What is a Data Structure</h3><blockquote><p>a data structure is a container that stores data in a specific layout. </p></blockquote><h3 id="Why-do-we-need-Data-Structure"><a href="#Why-do-we-need-Data-Structure" class="headerlink" title="Why do we need Data Structure"></a>Why do we need Data Structure</h3><blockquote><p>As data structures are used to store data in an organized form, and since data is the most crucial entity in computer science.</p><p>Based on different scenarios, data needs to be stored in a specific format. We have a handful of data structures that cover our need to store data in different formats.</p></blockquote><h3 id="Commonly-used-Data-Structure"><a href="#Commonly-used-Data-Structure" class="headerlink" title="Commonly used Data Structure"></a>Commonly used Data Structure</h3><h4 id="1-Arrays"><a href="#1-Arrays" class="headerlink" title="1. Arrays"></a>1. Arrays</h4><blockquote><p>An array is the simplest and most widely used data structure. Other data structures like stacks and queues are derived from arrays.</p></blockquote><ul><li>the two types of arrays:<ul><li>One-dimensional arrays</li><li>Multi-dimensional arrays</li></ul></li><li>basic operations<ul><li>Inserts an element at given index</li><li>Get‚Ää‚Äî‚ÄäReturns the element at given index</li><li>Delete‚Ää‚Äî‚ÄäDeletes an element at given index</li><li>Size‚Ää‚Äî‚ÄäGet the total number of elements in array</li></ul></li></ul><h4 id="2-Stacks"><a href="#2-Stacks" class="headerlink" title="2. Stacks"></a>2. Stacks</h4><blockquote><p>LIFO (Last In First Out)</p></blockquote><ul><li>basic operations<ul><li>Push‚Ää‚Äî‚ÄäInserts an element at the top</li><li>Pop‚Ää‚Äî‚ÄäReturns the top element after removing from the stack</li><li>isEmpty‚Ää‚Äî‚ÄäReturns true if the stack is empty</li><li>Top‚Ää‚Äî‚ÄäReturns the top element without removing from the stack</li></ul></li></ul><h4 id="3-Queues"><a href="#3-Queues" class="headerlink" title="3. Queues"></a>3. Queues</h4><blockquote><p>Similar to Stack, Queue is another linear data structure that stores the element in a sequential manner. The only significant difference between Stack and Queue is that instead of using the LIFO method, Queue implements the FIFO method, which is short for First in First Out.</p></blockquote><ul><li>basic operations<ul><li>Enqueue()‚Ää‚Äî‚ÄäInserts element to the end of the queue</li><li>Dequeue()‚Ää‚Äî‚ÄäRemoves an element from the start of the queue</li><li>isEmpty()‚Ää‚Äî‚ÄäReturns true if queue is empty</li><li>Top()‚Ää‚Äî‚ÄäReturns the first element of the queue</li></ul></li></ul><h4 id="4-Linked-List"><a href="#4-Linked-List" class="headerlink" title="4. Linked List"></a>4. Linked List</h4><blockquote><p>A linked list is like a chain of nodes, where each node contains information like data and a pointer to the succeeding node in the chain.</p></blockquote><ul><li>the types of linked lists<ul><li>Singly Linked List (Unidirectional)</li><li>Doubly Linked List (Bi-directional)</li></ul></li><li>basic operations<ul><li><em>InsertAtEnd</em>‚Ää‚Äî‚ÄäInserts given element at the end of the linked list</li><li><em>InsertAtHead</em>‚Ää‚Äî‚ÄäInserts given element at the start/head of the linked list</li><li><em>Delete</em>‚Ää‚Äî‚ÄäDeletes given element from the linked list</li><li><em>DeleteAtHead</em>‚Ää‚Äî‚ÄäDeletes first element of the linked list</li><li><em>Search</em>‚Ää‚Äî‚ÄäReturns the given element from a linked list</li><li><em>isEmpty</em>‚Ää‚Äî‚ÄäReturns true if the linked list is empty</li></ul></li></ul><h4 id="5-Graphs"><a href="#5-Graphs" class="headerlink" title="5. Graphs"></a>5. Graphs</h4><blockquote><p>A graph is a set of nodes that are connected to each other in the form of a network. Nodes are also called vertices. A <strong>pair(x,y)</strong> is called an <strong>edge</strong><em>,</em> which indicates that vertex <strong>x</strong> is connected to vertex <strong>y</strong>. An edge may contain weight/cost, showing how much cost is required to traverse from vertex x to y*.*</p></blockquote><p><img src="https://i.imgur.com/9sHq0Ek.png"></p><ul><li>types of Graphs<ul><li>Undirected Graph</li><li>Directed Graph</li></ul></li></ul><h4 id="6-Trees"><a href="#6-Trees" class="headerlink" title="6. Trees"></a>6. Trees</h4><blockquote><p>A tree is a hierarchical data structure consisting of vertices (nodes) and edges that connect them. Trees are similar to graphs, but the key point that differentiates a tree from the graph is that a cycle cannot exist in a tree.</p></blockquote><p><img src="https://i.imgur.com/R6zwf9U.png"></p><ul><li>the types of trees<ul><li>N-ary Tree</li><li>Balanced Tree</li><li>Binary Tree</li><li>Binary Search Tree</li><li>AVL Tree</li><li>Red Black Tree</li><li>2‚Äì3 Tree</li></ul><blockquote><p>Out of the above, Binary Tree and Binary Search Tree are the most commonly used trees.</p></blockquote></li></ul><h4 id="7-Trie"><a href="#7-Trie" class="headerlink" title="7. Trie"></a>7. Trie</h4><blockquote><p>Trie, which is also known as ‚ÄúPrefix Trees‚Äù, is a tree-like data structure which proves to be quite efficient for solving problems related to strings. It provides fast retrieval, and is mostly used for searching words in a dictionary, providing auto suggestions in a search engine, and even for IP routing.</p></blockquote><h4 id="8-Hash-Table"><a href="#8-Hash-Table" class="headerlink" title="8. Hash Table"></a>8. Hash Table</h4><blockquote><p>Hashing is a process used to uniquely identify objects and store each object at some pre-calculated unique index called its ‚Äúkey.‚Äù</p><p>Hash tables are generally implemented using arrays.</p></blockquote><ul><li>The performance of hashing data structure depends upon these three factors:<ul><li>Hash Function</li><li>Size of the Hash Table</li><li>Collision Handling Method</li></ul></li></ul><p>Here‚Äôs an illustration of how the hash is mapped in an array. The index of this array is calculated through a Hash Function.</p><p><img src="https://i.imgur.com/fkxWuxr.png"></p><p>reference:</p><ul><li><a href="https://www.cnblogs.com/xdecode/p/9321848.html">ÂõæËß£JavaÂ∏∏Áî®Êï∞ÊçÆÁªìÊûÑ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> DSA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rpc vs mq</title>
      <link href="/2018/12/08/rpc%20vs%20mq/"/>
      <url>/2018/12/08/rpc%20vs%20mq/</url>
      
        <content type="html"><![CDATA[<h1 id="Á≥ªÁªüÁªìÊûÑ"><a href="#Á≥ªÁªüÁªìÊûÑ" class="headerlink" title="Á≥ªÁªüÁªìÊûÑ"></a>Á≥ªÁªüÁªìÊûÑ</h1><h2 id="rpc"><a href="#rpc" class="headerlink" title="rpc"></a>rpc</h2><blockquote><p> Remote Procedure CallÔºåËøúÁ®ãËøáÁ®ãË∞ÉÁî®</p></blockquote><p>ÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®Â§ßÂ§öÈááÁî®rpcÁöÑÊñπÂºèË∞ÉÁî®ÔºåÊàñËÄÖÊ∂àÊÅØÈòüÂàóÁöÑÊñπÂºèËøõË°åËß£ËÄ¶„ÄÇ</p><p>RPC‰∏éhttpË∞ÉÁî®ÁöÑÂå∫Âà´<br>rpcÊòØÂü∫‰∫éTCP/IPÂçèËÆÆÁöÑÔºåËÄåHTTPÊúçÂä°‰∏ªË¶ÅÊòØÂü∫‰∫éHTTPÂçèËÆÆÁöÑÔºåËÄåhttpÂçèËÆÆÊòØÂú®‰º†ËæìÂ±ÇÂçèËÆÆTCP‰πã‰∏äÁöÑ„ÄÇÊâÄ‰ª•rpcÊïàÁéáÊõ¥Â•Ω„ÄÇ</p><p>RPCÊòØÊåáËøúÁ®ãËøáÁ®ãË∞ÉÁî®Ôºå‰πüÂ∞±ÊòØËØ¥‰∏§Âè∞ÊúçÂä°Âô®AÔºåBÔºå‰∏Ä‰∏™Â∫îÁî®ÈÉ®ÁΩ≤Âú®AÊúçÂä°Âô®‰∏äÔºåÊÉ≥Ë¶ÅË∞ÉÁî®BÊúçÂä°Âô®‰∏äÂ∫îÁî®Êèê‰æõÁöÑÂáΩÊï∞/ÊñπÊ≥ïÔºå<br>Áî±‰∫é‰∏çÂú®‰∏Ä‰∏™ÂÜÖÂ≠òÁ©∫Èó¥Ôºå‰∏çËÉΩÁõ¥Êé•Ë∞ÉÁî®ÔºåÈúÄË¶ÅÈÄöËøáÁΩëÁªúÊù•Ë°®ËææË∞ÉÁî®ÁöÑËØ≠‰πâÂíå‰º†ËææË∞ÉÁî®ÁöÑÊï∞ÊçÆ„ÄÇ</p><p>Áî±‰∫éËÆ°ÁÆóËÉΩÂäõÈúÄË¶ÅÊ®™ÂêëÊâ©Â±ïÔºåÈúÄË¶ÅÂú®Â§öÂè∞Êú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÈÉ®ÁΩ≤Â∫îÁî®„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Consumer =&gt; Provider</span><br><span class="line">ConsumerË∞ÉÁî®ÁöÑProviderÊèê‰æõÁöÑÊúçÂä°„ÄÇ</span><br></pre></td></tr></table></figure><ul><li>ÂêåÊ≠•Ë∞ÉÁî®ÔºåÂØπ‰∫éË¶ÅÁ≠âÂæÖËøîÂõûÁªìÊûú/Â§ÑÁêÜÁªìÊûúÁöÑÂú∫ÊôØÔºåRPCÊòØÂèØ‰ª•ÈùûÂ∏∏Ëá™ÁÑ∂Áõ¥ËßâÁöÑ‰ΩøÁî®ÊñπÂºè„ÄÇ</li><li>Áî±‰∫éÁ≠âÂæÖÁªìÊûúÔºåConsumerÔºàClientÔºâ‰ºöÊúâÁ∫øÁ®ãÊ∂àËÄó„ÄÇ</li><li>RPC‰πüÂèØ‰ª•ÊòØÂºÇÊ≠•Ë∞ÉÁî®ÔºåÂ¶ÇÊûú‰ª•ÂºÇÊ≠•RPCÁöÑÊñπÂºè‰ΩøÁî®ÔºåConsumerÔºàClientÔºâÁ∫øÁ®ãÊ∂àËÄóÂèØ‰ª•ÂéªÊéâ„ÄÇ‰ΩÜ‰∏çËÉΩÂÅöÂà∞ÂÉèÊ∂àÊÅØ‰∏ÄÊ†∑ÊöÇÂ≠òÊ∂àÊÅØ/ËØ∑Ê±ÇÔºåÂéãÂäõ‰ºöÁõ¥Êé•‰º†ÂØºÂà∞ÊúçÂä°Provider„ÄÇ</li></ul><h2 id="message-queue"><a href="#message-queue" class="headerlink" title="message queue"></a>message queue</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Sender =&gt; Queue &lt;= Receiver</span><br><span class="line">SenderÂèëÈÄÅÊ∂àÊÅØÁªôQueue;Receiver‰ªéQueueÊãøÂà∞Ê∂àÊÅØÊù•Â§ÑÁêÜ</span><br></pre></td></tr></table></figure><ul><li>Message QueueÊääËØ∑Ê±ÇÁöÑÂéãÂäõ‰øùÂ≠ò‰∏Ä‰∏ãÔºåÈÄêÊ∏êÈáäÊîæÂá∫Êù•ÔºåËÆ©Â§ÑÁêÜËÄÖÊåâÁÖßËá™Â∑±ÁöÑËäÇÂ•èÊù•Â§ÑÁêÜ„ÄÇ</li><li>Message QueueÂºïÂÖ•‰∏Ä‰∏ãÊñ∞ÁöÑÁªìÁÇπÔºåËÆ©Á≥ªÁªüÁöÑÂèØÈù†ÊÄß‰ºöÂèóMessage QueueÁªìÁÇπÁöÑÂΩ±Âìç„ÄÇ</li><li>Message QueueÊòØ<strong>ÂºÇÊ≠•ÂçïÂêë</strong>ÁöÑÊ∂àÊÅØ„ÄÇÂèëÈÄÅÊ∂àÊÅØËÆæËÆ°ÊàêÊòØ<strong>‰∏çÈúÄË¶ÅÁ≠âÂæÖ</strong>Ê∂àÊÅØÂ§ÑÁêÜÁöÑÂÆåÊàê„ÄÇ</li></ul><h3 id="view"><a href="#view" class="headerlink" title="view"></a>view</h3><ul><li>Ëøô‰∏§ËÄÖÂèØ‰ª•ÊãøÊù•ÊØîËæÉÔºå‰ΩÜÊòØ‰∏™‰∫∫ÊÑüËßâÂπ∂‰∏çÊòØÂêå‰∏Ä‰∏™Â±ÇÈù¢ÁöÑÈóÆÈ¢ò„ÄÇRPCÊòØÂàÜÂ∏ÉÂºèÊúçÂä°‰πãÈó¥Ë∞ÉÁî®ÁöÑ‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÔºåÊòØÊàë‰ª¨Âú®ÂÅöÊû∂ÊûÑËÆæËÆ°ÂÜ≥Á≠ñÊó∂ÂêåÂàÜÂ∏ÉÂºèÂØπË±°ÔºåRESTÁ≠âÂ±ÇÈù¢ÁöÑ‰∏úË•øÊØîËæÉÔºåÂÜ≥Á≠ñÁöÑ‰∏Ä‰∏™ÊñπÊ°àÔºÅ Ê∂àÊÅØÁ≥ªÁªüÊõ¥Â§öÊòØÊàë‰ª¨‰∏∫‰∫ÜËß£ÂÜ≥Á≥ªÁªü‰πãÈó¥ÁöÑËß£ËÄ¶Ôºå‰ª•ÂèäÊÄßËÉΩÈóÆÈ¢òÁ≠âÊñπÈù¢ÊâÄËÄÉËôëÁöÑÊñπÊ°à„ÄÇ</li></ul>]]></content>
      
      
      <categories>
          
          <category> a vs b </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>words fragment</title>
      <link href="/2018/08/28/words%20fragment/"/>
      <url>/2018/08/28/words%20fragment/</url>
      
        <content type="html"><![CDATA[<h3 id="Ëã±ÊñáÁ¢éÁâá"><a href="#Ëã±ÊñáÁ¢éÁâá" class="headerlink" title="Ëã±ÊñáÁ¢éÁâá"></a>Ëã±ÊñáÁ¢éÁâá</h3><ul><li>Life is measured by thought and action, not by time.</li><li>Books and friends should be few but good.</li><li>Don‚Äôt give your past the power to define your future.</li><li>People will forget what you said, people will forget what you did, but people will never forget how you made them feel.</li><li>Success isn‚Äôt about being the best. It‚Äôs about always getting better.</li><li>Be yourself. Everyone else is already taken.</li><li>It‚Äôs kind of fun to do the impossible.</li><li>‚ÄúSimplicity is the ultimate sophistication.‚ÄùLeonardo da Vinci</li><li>Build a dream and the dream will build you.</li><li>Always make a total effort, even when the odds are against you.</li><li>You can, you should, and if you‚Äôre brave enough to start, you will.</li><li>Never give up, for that is just the place and time that the tide will turn.</li><li>Awareness is the greatest agent for change.</li><li>Nothing can dim the light which shines from within.</li><li>Our dreams can come true if we have the courage to pursue them.</li><li>Patience and perseverance have a magical effect before which difficulties disappear and obstacles vanish.</li><li>What you do makes a difference, and you have to decide what kind of difference you want to make.</li><li>The thing that is really hard, and really amazing, is giving up on being perfect and beginning the work of becoming yourself.</li><li>You are what you do, not what you say you‚Äôll do.</li><li>This is the real secret to life‚Äîto be completely engaged with what you are doing in the here and now. And instead of calling it work, realize it is play.</li><li>I am strong because I‚Äôve been weak. I am fearless because I‚Äôve been afraid. I am wise because I‚Äôve been foolish.</li><li>Every moment you live in the past is a moment you waste in the present.</li><li>Some changes look negative on the surface, but you will soon realize that space is being created in your life for something new to emerge.</li><li>The world breaks everyone and afterward many are strong at the broken places.</li><li>Don‚Äôt bury your failures. Let them inspire you.</li><li>Whether you think you can or you think you can‚Äôt, you are right.</li><li>‚ÄúAn investment in knowledge pays the best interest.‚ÄùBenjamin Franklin</li><li>Be brave. Take risks. Nothing can substitute experience.</li><li>Learn to walk before run</li><li>This is love, deep in the trenches, worthy of respect, admiration and gratitude.</li><li>You will learn more in three days of acting than in six months of researching.</li></ul><h3 id="‰∏≠ÊñáÁ¢éÁâá"><a href="#‰∏≠ÊñáÁ¢éÁâá" class="headerlink" title="‰∏≠ÊñáÁ¢éÁâá"></a>‰∏≠ÊñáÁ¢éÁâá</h3><ul><li><p>ËôΩÂçÉ‰∏á‰∫∫ÔºåÂêæÂæÄÁü£„ÄÇ</p></li><li><p>Âú®‰∏Ä‰∏™Ë∑™‰∏ãÂéªÊâçËÉΩÊ¥ªÁùÄÁöÑÊó∂‰ª£ÔºåËØ∑ÁªôÁ´ôÁùÄÁöÑ‰∫∫‰∏ÄÁÇπÊéåÂ£∞</p></li><li><p>‰∏Ä‰∏™‰∫∫‰∏ÄÊó¶Êé•Ëß¶Âà∞ÁúüÁõ∏Ôºå‰æøÊó†Ê≥ïÂÜçÂõûÂ§¥ÂéªÁõ∏‰ø°Ë∞éË®Ä</p></li><li><p>Á†ÅÂÜú‰∏çÈóÆÂá∫Â§ÑÔºåÂ§ß‰Ω¨‰∏çÁúãÂ≤ÅÊï∞</p></li><li><p>Ëã±ÈõÑ‰∏çÈóÆÂá∫Â§ÑÔºåÊµÅÊ∞ì‰∏çÁúãÂ≤ÅÊï∞</p></li><li><p>ÈïøÂ§öÂ§ßÂ±ÅËÇ°ÔºåÁ©øÂ§öÂ§ßË£§Ë°©</p></li><li><p>Ê≤°ÊúâÊúÄÂ•ΩÁöÑÂºÄÂèëËØ≠Ë®ÄÔºåÂè™ÊúâÊúÄÂ•ΩÁöÑÂºÄÂèëËÄÖ</p></li><li><p>ÊääÊØè‰∏ÄÊ¨°ÁªÉ‰π†ÈÉΩÂΩìÊàê‰∏ÄÊ¨°ËÄÉËØï</p></li></ul><h3 id="Âêç‰∫∫Á¢éÁâá"><a href="#Âêç‰∫∫Á¢éÁâá" class="headerlink" title="Âêç‰∫∫Á¢éÁâá"></a>Âêç‰∫∫Á¢éÁâá</h3><ul><li>ÊûÅÊ∑±ÁöÑÊö¥ÂäõÂΩì‰∏≠ÈöêËóèÁùÄÊûÅËá¥ÁöÑÊ∏©Êüî    (ÂåóÈáéÊ≠¶)</li></ul><h3 id="ÂÖ∂ÂÆÉÁ¢éÁâá"><a href="#ÂÖ∂ÂÆÉÁ¢éÁâá" class="headerlink" title="ÂÖ∂ÂÆÉÁ¢éÁâá"></a>ÂÖ∂ÂÆÉÁ¢éÁâá</h3><ul><li>arithmetic<ul><li>addition, subtraction, multiplication and division calculations</li></ul></li><li>Promise(ÊâøËØ∫)„ÄÅEarnest(ËØöÊåö)„ÄÅRespect(Â∞äÈáç)„ÄÅForgiveness(ÂÆΩÂÆπ)„ÄÅEnioy(‰∫´Âèó)„ÄÅCherish(ÁèçÊÉú)„ÄÅTrust(‰ø°‰ªª)</li><li>In any case, measure, don‚Äôt guess! Only a measurement will tell you if the parallelism is worth it or not.(from stack overflow‚Äôs someone)</li></ul><h3 id="ÊäÄÊúØÁ¢éÁâá"><a href="#ÊäÄÊúØÁ¢éÁâá" class="headerlink" title="ÊäÄÊúØÁ¢éÁâá"></a>ÊäÄÊúØÁ¢éÁâá</h3><ul><li><p>compare two things at different points, this not only makes them easy to compare but also makes it easy to remember differences.</p></li><li><p><strong>WET</strong>(Write everything twice) is a reminder for programmers to strive for excellence in writing readable, well-documented, and maintainable code that benefits both themselves and their colleagues.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> words </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fragment </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2018/06/01/frontend%20snippet/"/>
      <url>/2018/06/01/frontend%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1><h2 id="http-1-0-http-1-1"><a href="#http-1-0-http-1-1" class="headerlink" title="http 1.0 http 1.1"></a>http 1.0 http 1.1</h2><ul><li><p>HTTP1.0ÊúÄÊó©Âú®ÁΩëÈ°µ‰∏≠‰ΩøÁî®ÊòØ1996Âπ¥ÔºåÈÇ£‰∏™Êó∂ÂÄôÂè™ÊòØ‰ΩøÁî®‰∏Ä‰∫õËæÉ‰∏∫ÁÆÄÂçïÁöÑÁΩëÈ°µÂíåÁΩëÁªúÁöÑËØ∑Ê±ÇÔºåÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÈúÄË¶ÅÂª∫Á´ã‰∏Ä‰∏™ÂçïÁã¨ÁöÑËøûÊé•Ôºå‰∏ä‰∏ÄÊ¨°Âíå‰∏ã‰∏ÄÊ¨°ËØ∑Ê±ÇÂÆåÂÖ®ÂàÜÁ¶ª„ÄÇËøôÁßçÂÅöÊ≥ïÔºåÂç≥‰ΩøÊØèÊ¨°ÁöÑËØ∑Ê±ÇÈáèÈÉΩÂæàÂ∞èÔºå‰ΩÜÊòØÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÊØèÊ¨°Âª∫Á´ãTCPËøûÊé•ÂíåÂÖ≥Èó≠TCPËøûÊé•ÈÉΩÊòØÁõ∏ÂØπÊØîËæÉË¥πÊó∂ÁöÑËøáÁ®ãÔºå‰∏•ÈáçÂΩ±ÂìçÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁöÑÊÄßËÉΩ„ÄÇ</p></li><li><p>Âü∫‰∫é‰ª•‰∏äÁöÑÈóÆÈ¢òÔºåHTTP1.1Âú®1999Âπ¥ÂπøÊ≥õÂ∫îÁî®‰∫éÁé∞Âú®ÁöÑÂêÑÂ§ßÊµèËßàÂô®ÁΩëÁªúËØ∑Ê±Ç‰∏≠ÔºåÂêåÊó∂HTTP1.1‰πüÊòØÂΩìÂâç‰ΩøÁî®ÊúÄ‰∏∫ÂπøÊ≥õÁöÑHTTPÂçèËÆÆÔºà2015Âπ¥ËØûÁîü‰∫ÜHTTP2Ôºå‰ΩÜÊòØËøòÊú™Â§ßËßÑÊ®°Â∫îÁî®ÔºâÔºåËøôÈáå‰∏çËØ¶ÁªÜÂØπÊØîHTTP1.1ÈíàÂØπHTTP1.0ÊîπËøõ‰∫Ü‰ªÄ‰πàÔºåÂè™ÊòØÂú®ËøûÊé•ËøôÂùóÔºåHTTP1.1ÊîØÊåÅÂú®‰∏Ä‰∏™TCPËøûÊé•‰∏ä‰º†ÈÄÅÂ§ö‰∏™HTTPËØ∑Ê±ÇÂíåÂìçÂ∫îÔºåÂáèÂ∞ë‰∫ÜÂª∫Á´ãÂíåÂÖ≥Èó≠ËøûÊé•ÁöÑÊ∂àËÄóÂª∂ËøüÔºå‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂº•Ë°•‰∫ÜHTTP1.0ÊØèÊ¨°ËØ∑Ê±ÇÈÉΩË¶ÅÂàõÂª∫ËøûÊé•ÁöÑÁº∫ÁÇπÔºåËøôÂ∞±ÊòØÈïøËøûÊé•ÔºåHTTP1.1ÈªòËÆ§‰ΩøÁî®ÈïøËøûÊé•„ÄÇ</p></li><li><p>ÈÇ£‰πàÔºåÈïøËøûÊé•ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÂë¢ÔºüÈ¶ñÂÖàÔºåÊàë‰ª¨Ë¶ÅÊòéÁ°Æ‰∏Ä‰∏ãÔºåÈïøÁü≠ËøûÊé•ÊòØÈÄö‰ø°Â±ÇÔºàTCPÔºâÁöÑÊ¶ÇÂøµÔºåHTTPÊòØÂ∫îÁî®Â±ÇÂçèËÆÆÔºåÂÆÉÂè™ËÉΩËØ¥ÂëäËØâÈÄö‰ø°Â±ÇÊàëÊâìÁÆó‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÂ§çÁî®TCPÈÄöÈÅìËÄåÊ≤°ÊúâËá™Â∑±ÂéªÂª∫Á´ã„ÄÅÈáäÊîæTCPÈÄöÈÅìÁöÑËÉΩÂäõ„ÄÇ</p></li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQwdKAeT5rjMFfDXeITCDnbwnNXWrFDaIIhBibAk4N83H5dKXAkMNleqewC53Y8WQ6cOhRjA7k4SuMw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><ul><li>httpÁöÑkeep-aliveÂíåtcpÁöÑkeep-aliveÁöÑÂå∫Âà´<ul><li>httpÁöÑkeep-aliveÊòØ‰∏∫‰∫ÜÂ§çÁî®Â∑≤ÊúâËøûÊé•</li><li>tcpÁöÑkeep-aliveÊòØ‰∏∫‰∫Ü‰øùÊ¥ªÔºåÂç≥‰øùËØÅÂØπÁ´ØËøòÂ≠òÊ¥ªÔºå‰∏çÁÑ∂ÂØπÁ´ØÂ∑≤Áªè‰∏çÂú®‰∫ÜÊàëËøôËæπËøòÂç†ÁùÄÂíåÂØπÁ´ØÁöÑËøô‰∏™ËøûÊé•ÔºåÊµ™Ë¥πÊúçÂä°Âô®ËµÑÊ∫êÔºåÂÅöÊ≥ïÊòØÈöî‰∏ÄÊÆµÊó∂Èó¥ÂèëÈÄÅ‰∏Ä‰∏™ÂøÉË∑≥ÂåÖÂà∞ÂØπÁ´ØÊúçÂä°Âô®Ôºå‰∏ÄÊó¶ÈïøÊó∂Èó¥Ê≤°ÊúâÊé•Êî∂Âà∞Â∫îÁ≠îÔºåÂ∞±‰∏ªÂä®ÂÖ≥Èó≠ËøûÊé•</li></ul></li></ul><h2 id="WebSockets"><a href="#WebSockets" class="headerlink" title="WebSockets"></a>WebSockets</h2><p>WebSockets provide a persistent connection between a client and server that both parties can use to start sending data at any time.**</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Create a new WebSocket.</span><br><span class="line">var socket = new WebSocket(&#x27;ws://echo.websocket.org&#x27;);</span><br></pre></td></tr></table></figure><ul><li><p>Once the connection has been established the <code>open</code> event will be fired on your WebSocket instance.</p></li><li><p>ËØ∑Ê±Ç</p><p><code>ws://localhost:9095/webSocket/d72b3660-29a8-4276-9eb1-3373e82fdd92</code></p></li><li><p>ÂêéÂè∞ËØ∑Ê±ÇÁöÑÁªìÊûú‰º†ÂÖ•websocketÊòØÈÄöËøásessionÂª∫Á´ãÂÖ≥ËÅîÁöÑ</p></li></ul><h2 id="SSEÔºàServer-Sent-EventsÔºâ"><a href="#SSEÔºàServer-Sent-EventsÔºâ" class="headerlink" title="SSEÔºàServer-Sent EventsÔºâ"></a>SSEÔºàServer-Sent EventsÔºâ</h2><p><img src="/images/http/overview-sse.webp"></p><h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET/POST /api/v1/live-scores </span><br><span class="line">Accept: text/event-stream</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure><blockquote><p><code>Accept: text/event-stream</code> indicates the client waiting for event stream from the server, <code>Cache-Control: no-cache</code> indicates that disabling the caching and <code>Connection: keep-alive</code> indicates the persistent connection. This request will give us an open connection which we are going to use to fetch updates. After the connection, the server can send messages when the events are ready to send by the server. The important thing is that events are text messages in <code>UTF-8</code> encoding.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl -H &quot;Accept: text/event-stream&quot; -H &quot;Cache-Control: no-cache&quot; -N &lt;SSE_ENDPOINT_URL&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.</span></span><br><span class="line">curl -X POST -H &quot;Accept: text/event-stream&quot; -H &quot;Cache-Control: no-cache&quot; -H &quot;User-Key: dongwei&quot; -H &quot;Authorization: Bearer xxxxx&quot; -H &quot;Content-Type: application/json&quot; -d &#x27;&#123;&quot;content&quot;: &quot;‰Ω†Â•Ω&quot;&#125;&#x27; -N http://xxx/api</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂØπÁÖßÈùûÊµÅÂºè</span></span><br><span class="line">curl -X POST -H &quot;Accept: application/json&quot; -H &quot;User-Key: dongwei&quot; -H &quot;Authorization: Bearer xxxxx&quot; -H &quot;Content-Type: application/json&quot; -d &#x27;&#123;&quot;content&quot;: &quot;‰Ω†ÊúâÂì™‰∫õËÉΩÂäõ&quot;&#125;&#x27; http://xxx/api/</span><br></pre></td></tr></table></figure><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><h3 id="Disadvantages"><a href="#Disadvantages" class="headerlink" title="Disadvantages"></a>Disadvantages</h3><ul><li>One potential downside of using Server-Sent Events is the limitations in data format. Since SSE is restricted to transporting UTF-8 messages, binary data is not supported.</li><li>When not used over HTTP/2, another limitation is the restricted number of concurrent connections per browser. With only six concurrent open SSE connections allowed at any given time, opening multiple tabs with SSE connections can become a bottleneck. (Credit: Dan Messenger)</li></ul><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><ul><li>Cookies are text string stored as key/value</li><li>The server Create the cookie and send it to the user‚Äôs browser where it‚Äôll be stored.</li><li>The Browser will send that cookie every time it send a request to that server.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HttpOnly: Ëøô‰∏™Â±ûÊÄßÁî®Êù•ÈôêÂà∂cookieÂè™ËÉΩÈÄöËøáHTTP(S)ÂçèËÆÆËÆøÈóÆÔºå‰∏çËÉΩÈÄöËøáÂÆ¢Êà∑Á´ØËÑöÊú¨ÔºàÂ¶ÇJavaScriptÔºâËÆøÈóÆ„ÄÇËøô‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂáèÂ∞ëË∑®Á´ôËÑöÊú¨ÊîªÂáªÔºàXSSÔºâÁöÑÈ£éÈô©ÔºåÂõ†‰∏∫ÊîªÂáªËÄÖ‰∏çËÉΩÈÄöËøáËÑöÊú¨ËØªÂèñÂà∞Ëøô‰∫õcookie„ÄÇ</span><br><span class="line"></span><br><span class="line">Max-Age: Ëøô‰∏™Â±ûÊÄßÂÆö‰πâ‰∫ÜcookieÁöÑÁîüÂëΩÂë®ÊúüÔºåÂçï‰ΩçÊòØÁßí„ÄÇÂú®‰Ω†ÁöÑ‰æãÂ≠ê‰∏≠ÔºåMax-Age=3600Ë°®Á§∫cookieÂ∞ÜÂú®3600ÁßíÂêéËøáÊúüÔºåÂç≥1Â∞èÊó∂Âêé„ÄÇËøáÊúüÂêéÔºåcookieÂ∞Ü‰∏çÂÜçÂèëÈÄÅÂà∞ÊúçÂä°Âô®„ÄÇ</span><br><span class="line"></span><br><span class="line">Path: Ëøô‰∏™Â±ûÊÄßÂÆö‰πâ‰∫ÜcookieÁöÑË∑ØÂæÑÔºåÂç≥cookieÂè™ËÉΩË¢´ÂèëÈÄÅÂà∞Ëøô‰∏™Ë∑ØÂæÑÊàñÂÖ∂Â≠êË∑ØÂæÑ‰∏ãÁöÑËØ∑Ê±Ç‰∏≠„ÄÇPath=/Ë°®Á§∫cookieÂØπ‰∫éÊï¥‰∏™ÂüüÂêçÊòØÊúâÊïàÁöÑÔºåÊó†ËÆ∫ËØ∑Ê±ÇÂì™‰∏™Ë∑ØÂæÑ„ÄÇ</span><br><span class="line"></span><br><span class="line">SameSite: Ëøô‰∏™Â±ûÊÄßÁî®Êù•ÊéßÂà∂cookieÁöÑË∑®Á´ôËØ∑Ê±Ç„ÄÇSameSite=laxÊòØ‰∏ÄÁßçËÆæÁΩÆÔºåÂÆÉÂÖÅËÆ∏cookieÂú®È°∂Á∫ßÂØºËà™‰∏≠Ë∑üÈöèË∑®Á´ôËØ∑Ê±ÇÔºå‰ΩÜÂú®Á¨¨‰∏âÊñπËØ∑Ê±Ç‰∏≠‰∏ç‰ºöË∑üÈöè„ÄÇËøôÊòØ‰∏ÄÁßçÊäò‰∏≠ÁöÑÊñπÊ≥ïÔºåÊó®Âú®Êèê‰æõ‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÂÆâÂÖ®ÊÄßÔºåÂêåÊó∂ÂÖÅËÆ∏‰∏Ä‰∫õÂêàÁêÜÁöÑË∑®Á´ôËØ∑Ê±Ç„ÄÇlaxÊ®°ÂºèÊØîstrictÊ®°ÂºèÊõ¥ÂÆΩÊùæÔºå‰ΩÜÊØîÊ≤°ÊúâSameSiteÂ±ûÊÄßÊàñËÆæÁΩÆ‰∏∫NoneÊõ¥ÂÆâÂÖ®„ÄÇ</span><br><span class="line"></span><br><span class="line">Secure: Ëøô‰∏™Â±ûÊÄßÊåáÁ§∫cookieÂè™ËÉΩÈÄöËøáHTTPSÂçèËÆÆ‰º†ËæìÔºå‰∏çËÉΩÈÄöËøáHTTP„ÄÇËøôÂ¢ûÂä†‰∫ÜcookieÁöÑÂÆâÂÖ®ÊÄßÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰∏ç‰ºöË¢´ÊòéÊñá‰º†ËæìÔºåÂáèÂ∞ë‰∫Ü‰∏≠Èó¥‰∫∫ÊîªÂáªÁöÑÈ£éÈô©„ÄÇ</span><br></pre></td></tr></table></figure><h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><ul><li>This session is associated with a randomly generated unique ID, which is created by the server. It‚Äôs called ‚Äúsession ID‚Äù.</li><li>The generated session ID is then sent to the user‚Äôs browser and stored as a cookie, while the session data is stored on the server-side.</li><li>Sessions are often used to store sensitive information such as user credentials and financial data. They are more secure than cookies because the information is stored on the server-side and not on the client-side.</li></ul><h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><ul><li><a href="https://medium.com/deliveryherotechhub/what-is-server-sent-events-sse-and-how-to-implement-it-904938bffd73">https://medium.com/deliveryherotechhub/what-is-server-sent-events-sse-and-how-to-implement-it-904938bffd73</a></li></ul><h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><h2 id="label"><a href="#label" class="headerlink" title="label"></a>label</h2><ul><li><p>chromeÈ°µÈù¢Ë∑≥ËΩ¨ÔºåÈúÄË¶Å‰ΩøÁî® i Ê†áÁ≠æÔºå‰∏çËÉΩ‰ΩøÁî® button Ê†áÁ≠æÔºåÂõ†‰∏∫Âú®buttonÁöÑÁÇπÂáª‰∫ã‰ª∂‰∏≠Ôºåwindow.location.href‰∏çËµ∑‰ΩúÁî®„ÄÇÔºà‰ΩÜfirefoxËµ∑‰ΩúÁî®Ôºâ</p></li><li><p>textareaÊ†áÁ≠æÈáåÈù¢ÁöÑÂ±ûÊÄßË¶ÅÁ¥ßÈù†‰π¶ÂÜôÔºå‰∏î‰∏çË¶ÅÊç¢Ë°åÔºå‰∏çÁÑ∂Ôºå‰ºöÊòæÁ§∫textareaÈªòËÆ§ËµãÂÄº‰∏∫Â§ö‰∏™Á©∫Ê†º</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span><span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span><span class="attr">id</span>=<span class="string">&quot;obj_address&quot;</span><span class="attr">placeholder</span>=<span class="string">&quot;Âú∞ÂùÄÔºàÂøÖÂ°´Ôºâ&quot;</span><span class="attr">name</span>=<span class="string">&quot;address&quot;</span><span class="attr">isvalid</span>=<span class="string">&quot;yes&quot;</span><span class="attr">checkexpession</span>=<span class="string">&quot;NotNull&quot;</span><span class="attr">errormsg</span>=<span class="string">&quot;Âú∞ÂùÄ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><p>ÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÊúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑ display Á±ªÂûã<br>‰∏çËøá‰Ω†ÂèØ‰ª•ÈöèÊó∂ÈöèÂú∞ÁöÑÈáçÂÜôÂÆÉÔºÅÂ¶ÇÂ∏∏ËßÅÁöÑ‰æãÂ≠êÊòØÔºöÊää li ÂÖÉÁ¥†‰øÆÊîπÊàê inlineÔºåÂà∂‰ΩúÊàêÊ∞¥Âπ≥ËèúÂçï„ÄÇ</p><p>pÊ†áÁ≠æÊòØÂùóÁ∫ßÂÖÉÁ¥†ÔºåspanÂÖÉÁ¥†ÊòØË°åÂÜÖÂÖÉÁ¥†„ÄÇÂÜÖÂÖÉÁ¥†ÂèØ‰ª•ÂÜôÂú®ÂùóÁ∫ßÂÖÉÁ¥†ÈáåÈù¢  ÊØîÂ¶Ç<code>&lt;p&gt;&lt;span&gt;ÂÜÖÂÆπ&lt;/span&gt;&lt;/p&gt;</code></p><ul><li>block</li></ul><p>ÂÄº‰∏∫blockÁöÑ‰∏∫ÂùóÁ∫ßÂÖÉÁ¥†Ôºå Â¶ÇÔºöp„ÄÅform„ÄÅheader„ÄÅfooter„ÄÅsection</p><ul><li>inline</li></ul><p>ÂÄº‰∏∫inlineÁöÑ‰∏∫Ë°åÂÜÖÂÖÉÁ¥†</p><h3 id="position"><a href="#position" class="headerlink" title="position"></a>position</h3><ul><li>static</li></ul><p>staticÊòØÈªòËÆ§ÂÄºÔºå‰∏Ä‰∏™staticÂÖÉÁ¥†Ë°®Á§∫ÂÆÉ‰∏ç‰ºöË¢´‚Äùpositioned‚Äù,‰∏Ä‰∏™positionÂ±ûÊÄßË¢´ËÆæÁΩÆ‰∏∫ÂÖ∂ÂÆÉÂÄºÂæóÂÖÉÁ¥†Ë°®Á§∫ÂÆÉ‰ºöË¢´‚Äùpositioned‚Äù</p><ul><li>relative</li></ul><p>relative,Âú®‰∏Ä‰∏™Áõ∏ÂØπÂÆö‰ΩçÔºàpositionÂ±ûÊÄßÁöÑÂÄº‰∏∫relativeÔºâÁöÑÂÖÉÁ¥†‰∏äËÆæÁΩÆ top „ÄÅ right „ÄÅ bottom Âíå left Â±ûÊÄß‰ºö‰ΩøÂÖ∂ÂÅèÁ¶ªÂÖ∂Ê≠£Â∏∏‰ΩçÁΩÆ„ÄÇ<br>ÂÖ∂‰ªñÁöÑÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÂàô‰∏ç‰ºöÂèóËØ•ÂÖÉÁ¥†ÁöÑÂΩ±ÂìçÂèëÁîü‰ΩçÁΩÆÊîπÂèòÊù•Âº•Ë°•ÂÆÉÂÅèÁ¶ªÂêéÂâ©‰∏ãÁöÑÁ©∫Èöô„ÄÇ</p><ul><li>fixed</li></ul><p>fixed,‰∏Ä‰∏™Âõ∫ÂÆöÂÆö‰ΩçÔºàpositionÂ±ûÊÄßÁöÑÂÄº‰∏∫fixedÔºâÂÖÉÁ¥†‰ºöÁõ∏ÂØπ‰∫éËßÜÁ™óÊù•ÂÆö‰ΩçÔºåËøôÊÑèÂë≥ÁùÄÂç≥‰æøÈ°µÈù¢ÊªöÂä®ÔºåÂÆÉËøòÊòØ‰ºöÂÅúÁïôÂú®Áõ∏ÂêåÁöÑ‰ΩçÁΩÆ„ÄÇ<br>Âíå relative ‰∏ÄÊ†∑Ôºå top „ÄÅ right „ÄÅ bottom Âíå left Â±ûÊÄßÈÉΩÂèØÁî®„ÄÇ</p><ul><li>absolute</li></ul><p>absolute, ÂÆÉ‰∏é fixed ÁöÑË°®Áé∞Á±ª‰ººÔºå‰ΩÜÊòØÂÆÉ‰∏çÊòØÁõ∏ÂØπ‰∫éËßÜÁ™óËÄåÊòØÁõ∏ÂØπ‰∫éÊúÄËøëÁöÑ‚Äúpositioned‚ÄùÁ•ñÂÖàÂÖÉÁ¥†„ÄÇ<br>Â¶ÇÊûúÁªùÂØπÂÆö‰ΩçÔºàpositionÂ±ûÊÄßÁöÑÂÄº‰∏∫absoluteÔºâÁöÑÂÖÉÁ¥†Ê≤°Êúâ‚Äúpositioned‚ÄùÁ•ñÂÖàÂÖÉÁ¥†ÔºåÈÇ£‰πàÂÆÉÊòØÁõ∏ÂØπ‰∫éÊñáÊ°£ÁöÑ body ÂÖÉÁ¥†ÔºåÂπ∂‰∏îÂÆÉ‰ºöÈöèÁùÄÈ°µÈù¢ÊªöÂä®ËÄåÁßªÂä®„ÄÇ<br>ËÆ∞‰Ωè‰∏Ä‰∏™‚Äúpositioned‚ÄùÂÖÉÁ¥†ÊòØÊåá position ÂÄº‰∏çÊòØ static ÁöÑÂÖÉÁ¥†„ÄÇ</p><h3 id="mbp"><a href="#mbp" class="headerlink" title="mbp"></a>mbp</h3><p><img src="https://mdn.mozillademos.org/files/13647/box-model-standard-small.png"></p><ul><li><p>margin</p><blockquote><p>ÊòØËÆæÁΩÆ‰∏§‰∏™Ê†áÁ≠æÁöÑÈó¥ÈöîÔºå‰πüÂ∞±ÊòØË∑ùÁ¶ª</p></blockquote></li><li><p>padding</p><blockquote><p>ÊØîÂ¶Ç‰∏Ä‰∏™pÊ†áÁ≠æÔºåÂÆÉÊòØ100px*100px,Êàë‰ª¨‰ΩøÁî®ÁöÑÊó∂ÂÄôpÊ†áÁ≠æÁöÑÊñáÂ≠óÊòØË¥¥ÁùÄpÊ†áÁ≠æÁöÑÊúÄÂ∑¶‰æßÁöÑÔºåÊÉ≥Ë¶ÅÂÆÉÁöÑÊñáÂ≠óË∑ùÁ¶ªËæπÁïåËøú‰∏ÄÁÇπÔºåÂ•ΩÁúã‰∏ÄÁÇπÔºåÂ∞±ÊòØÈúÄË¶ÅÂÅö‰∏Ä‰∏™Ê†∑ÂºèÁöÑË∞ÉÊï¥ÔºåÊàë‰ª¨ÂèØ‰ª•Áî®Âà∞paddingËøô‰∏™Â±ûÊÄßÔºåÂÅáÂ¶ÇËØ¥ËÆæÁΩÆÊòØ10pxÔºåÂ∞±ÊòØËØ¥Ëøô‰∏™pÊ†áÁ≠æÁöÑÂ§ßÂ∞è‰æùÁÑ∂ÊòØ100px*100pxÔºå‰ΩÜÊòØÂÆÉÁöÑÂÜÖÂÆπÊòØÂèòÊàê‰∫Ü90px*90pxÔºõ</p></blockquote></li><li><p>border</p><blockquote><p>boarderÊòØËÆæÁΩÆËæπÊ°ÜÁöÑÊÑèÊÄùÔºå‰ªñÂíåpaddingÁöÑÂå∫Âà´Âú®‰∫éÔºåpaddingÊòØÂú®Ê†áÁ≠æËæπÁºòÂæÄÈáåÁº©ÂáèÔºåËÄåborderÊòØÂú®Ê†áÁ≠æÁöÑËæπÁºòÂæÄÂ§ñÊâ©Â±ïÔºå‰πüÂ∞±ÊòØËØ¥ÊòØ‰∏Ä‰∏™100px*100pxÁöÑÊ†áÁ≠æÔºåÊàëËÆæÁΩÆ‰ªñÁöÑborder‰∏∫20pxÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁúãÂà∞Êï¥‰∏™Ê†áÁ≠æÁöÑÂ§ßÂ∞èÊòØÂèòÊàê‰∫Ü120px*120pxÔºå‰πüÂ∞±ÊòØËØ¥Â§öÂá∫Êù•‰∫Ü120pxÔºåÂÖ∂Ê†áÁ≠æÁöÑÂÜÖÂÆπ‰πüËøòÊòØ100px*100pxÁöÑ</p></blockquote></li></ul><h1 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h1><h2 id="ÁâàÊú¨ÁÆ°ÁêÜ"><a href="#ÁâàÊú¨ÁÆ°ÁêÜ" class="headerlink" title="ÁâàÊú¨ÁÆ°ÁêÜ"></a>ÁâàÊú¨ÁÆ°ÁêÜ</h2><ul><li>ÂèØ‰ª•Áî® nvm ËøõË°åÁÆ°ÁêÜ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vueÈ°πÁõÆÔºö npm run dev  ‰ºöÂú®ÂºÄÂèëÁéØÂ¢É‰∏ã Á´ãÂç≥ÂêØÂä®È°πÁõÆ   </span><br><span class="line"></span><br><span class="line">reactÈ°πÁõÆÔºö npm run start  ‰ºöÂú®ÂºÄÂèëÁéØÂ¢É‰∏ã Á´ãÂç≥ÂêØÂä®È°πÁõÆ</span><br><span class="line"></span><br><span class="line">ÁºñËØëÊâìÂåÖÈ°πÁõÆ:npm run build  </span><br></pre></td></tr></table></figure><h1 id="jquery"><a href="#jquery" class="headerlink" title="jquery"></a>jquery</h1><h2 id="ËØ≠Ê≥ï"><a href="#ËØ≠Ê≥ï" class="headerlink" title="ËØ≠Ê≥ï"></a>ËØ≠Ê≥ï</h2><ul><li><p>ËÆæÁΩÆÊ†áÁ≠æÂ±ûÊÄß</p><p><code>$(&quot;div&quot;).attr(&quot;Â±ûÊÄßÂêç&quot;,&quot;Â±ûÊÄßÂÄº&quot;);</code></p></li><li><p>ËÆæÁΩÆÊ†áÁ≠æÊ†∑Âºè</p><p><code>$(&quot;div&quot;).css(&quot;color&quot;,&quot;yellow&quot;); </code>Êàñ<code>$(&quot;div&quot;).css(&quot;padding-left&quot;))</code></p></li><li><p>ÁßªÈô§Â±ûÊÄß</p><p><code> $(&quot;div&quot;).removeAttr(&quot;id&quot;);</code></p></li><li><p>ÈÅçÂéÜÊï∞ÁªÑ</p><ul><li><p>ÂéüÁîüjsÊúâ‰∏§ÁßçÊñπÊ≥ïÈÉΩÂèØ‰ª•‰ΩøÁî®[for(var i;i&lt;arr.length;i++){},for(var i in arr){}] </p></li><li><p>jqueryÊúâ‰∏§‰∏™ÂáΩÊï∞ÂÖ±ËÆ°ÂõõÁßçÊñπÊ≥ïÈÉΩÂèØ‰ª•‰ΩøÁî®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$.each(arr,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;),</span><br><span class="line">$(arr).each(<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;), </span><br><span class="line">$.map(arr,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;), </span><br><span class="line">$(arr).map(<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ÈÅçÂéÜÂØπË±° </p><ul><li><p>ÂéüÁîüjsÊúâ‰∏ÄÁßçÊñπÊ≥ïÂèØ‰ª•‰ΩøÁî®[for(var i in obj){}] </p></li><li><p>jqueryÊúâ‰∏§‰∏™ÂáΩÊï∞ÂÖ±ËÆ°‰∏§ÁßçÊñπÊ≥ïÂèØ‰ª•‰ΩøÁî®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$.each(obj,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br><span class="line">$.map(obj,<span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Jquery‰∏≠ÁöÑajaxÂú®ÈªòËÆ§‰∏çÂÜôasyncÊÉÖÂÜµ‰∏ãÔºåËØ∑Ê±Ç‰∏∫ÂºÇÊ≠•ËØ∑Ê±ÇÔºõÂç≥Ôºöasync:true</p></li><li><p><code>$(function()&#123; &#125;)</code>ÊòØÂÆö‰πâ‰∏Ä‰∏™ÂåøÂêçÂáΩÊï∞ÔºåÂÆÉÊòØ<code>$(document).ready(function()&#123;&#125;)</code>ÁöÑÁÆÄÂÜô</p></li></ul><h1 id="jpa"><a href="#jpa" class="headerlink" title="jpa"></a>jpa</h1><h2 id="What-is"><a href="#What-is" class="headerlink" title="What is"></a>What is</h2><blockquote><p>Java Persistence API is a collection of classes and methods to persistently store the vast amounts of data into a database which is provided by the Oracle Corporation.</p></blockquote><h2 id="Where-to-use"><a href="#Where-to-use" class="headerlink" title="Where to use"></a>Where to use</h2><blockquote><p>To reduce the burden of writing codes for relational object management, a programmer follows the ‚ÄòJPA Provider‚Äô framework, which allows easy interaction with database instance. Here the required framework is taken over by JPA.</p></blockquote><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_provider.png"></p><ul><li><p>JPA Pro</p><blockquote><p>JPA is an open source API, therefore various enterprise vendors such as Oracle, Redhat, Eclipse, etc. provide new products by adding the JPA persistence flavor in them. Some of these products include:<strong>Hibernate, Eclipselink, Toplink, Spring Data JPA, etc.</strong></p></blockquote></li></ul><h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_class_level_architecture.png"></p><ul><li><p>jpa class relationships</p><p><img src="https://www.tutorialspoint.com/jpa/images/jpa_class_relationships.png"></p></li><li><p>ORM Architecture</p><p><img src="https://www.tutorialspoint.com/jpa/images/object_relational_mapping.png"></p></li><li><p>Entity Relationships</p><ul><li>@ManyToOne Relation</li><li>@OneToMany Relation</li><li>@OneToOne Relation</li><li>@ManyToMany Relation</li></ul></li></ul><h2 id="session-1"><a href="#session-1" class="headerlink" title="session"></a>session</h2><blockquote><p>Session simply means a particular interval of time.<br>Session Tracking is a way to maintain state (data) of an user. It is also known as session management in servlet.</p></blockquote><ul><li><p>HTTP is stateless that means each request is considered as the new request. It is shown in the figure given below:<br><img src="https://www.javatpoint.com/images/newrequest.JPG"></p></li><li><p>There are four techniques used in Session tracking:</p><ul><li>Cookies</li><li>Hidden Form Field</li><li>URL Rewriting</li><li>HttpSession</li></ul></li></ul><h2 id="cookie-1"><a href="#cookie-1" class="headerlink" title="cookie"></a>cookie</h2><blockquote><p>A cookie is a small piece of information that is persisted between the multiple client requests.<br>A cookie has a name, a single value, and optional attributes such as a comment, path and domain qualifiers, a maximum age, and a version number.</p></blockquote><h3 id="how-cookie-work"><a href="#how-cookie-work" class="headerlink" title="how cookie work"></a>how cookie work</h3><p><img src="https://www.javatpoint.com/phppages/images/cookie.png"></p><h3 id="type-of-cookie"><a href="#type-of-cookie" class="headerlink" title="type of cookie"></a>type of cookie</h3><ul><li><p>Non-persistent cookie</p><blockquote><p>It is valid for single session only. It is removed each time when user closes the browser.</p></blockquote></li><li><p>Persistent cookie</p><blockquote><p>It is valid for multiple session . It is not removed each time when user closes the browser. It is removed only if user logout or signout.</p></blockquote></li><li><p>Advantage </p><ul><li>Simplest technique of maintaining the state.</li><li>Cookies are maintained at client side.</li></ul></li><li><p>Disadvantage</p><ul><li>It will not work if cookie is disabled from the browser.</li><li>Only textual information can be set in Cookie object.</li></ul></li></ul><h1 id="HttpSession-Interface"><a href="#HttpSession-Interface" class="headerlink" title="HttpSession Interface"></a>HttpSession Interface</h1><ul><li>An object of HttpSession can be used to perform two tasks:<ul><li>bind objects</li><li>view and manipulate information about a session, such as the session identifier, creation time, and last accessed time.<br><img src="https://www.javatpoint.com/images/httpsession.JPG"></li></ul></li></ul><h1 id="DVA"><a href="#DVA" class="headerlink" title="DVA"></a>DVA</h1><p>dva = React-Router + Redux + Redux-saga</p><ul><li>Ë∑ØÁî±Ôºö <a href="https://github.com/ReactTraining/react-router/tree/v2.8.1">React-Router</a></li><li>Êû∂ÊûÑÔºö <a href="https://github.com/reactjs/redux">Redux</a></li><li>ÂºÇÊ≠•Êìç‰ΩúÔºö <a href="https://github.com/yelouafi/redux-saga">Redux-saga</a></li></ul><p><img src="/Users/dongwei/Documents/hexo/source/_posts/img/PPrerEAKbIoDZYr.png"></p><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>tate Ë°®Á§∫ Model ÁöÑÁä∂ÊÄÅÊï∞ÊçÆ</p><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>Action ÊòØ‰∏Ä‰∏™ÊôÆÈÄö javascript ÂØπË±°ÔºåÂÆÉÊòØÊîπÂèò State ÁöÑÂîØ‰∏ÄÈÄîÂæÑ„ÄÇ</p><ul><li>action ÂøÖÈ°ªÂ∏¶Êúâ <code>type</code> Â±ûÊÄßÊåáÊòéÂÖ∑‰ΩìÁöÑË°å‰∏∫ÔºåÂÖ∂ÂÆÉÂ≠óÊÆµÂèØ‰ª•Ëá™ÂÆö‰πâÔºåÂ¶ÇÊûúË¶ÅÂèëËµ∑‰∏Ä‰∏™ action ÈúÄË¶Å‰ΩøÁî® <code>dispatch</code> ÂáΩÊï∞ÔºõÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ <code>dispatch</code> ÊòØÂú®ÁªÑ‰ª∂ connect Models‰ª•ÂêéÔºåÈÄöËøá props ‰º†ÂÖ•ÁöÑ„ÄÇ</li></ul><h3 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h3><p>dispatching function ÊòØ‰∏Ä‰∏™Áî®‰∫éËß¶Âèë action ÁöÑÂáΩÊï∞</p><ul><li><p>action ÊòØÊîπÂèò State ÁöÑÂîØ‰∏ÄÈÄîÂæÑÔºå‰ΩÜÊòØactionÂè™ÊèèËø∞‰∫Ü‰∏Ä‰∏™Ë°å‰∏∫ÔºåËÄå dipatch ÂèØ‰ª•Áúã‰ΩúÊòØËß¶ÂèëËøô‰∏™Ë°å‰∏∫ÁöÑÊñπÂºèÔºåËÄå Reducer ÂàôÊòØÊèèËø∞Â¶Ç‰ΩïÊîπÂèòÊï∞ÊçÆÁöÑ„ÄÇ</p></li><li><p>connect Model ÁöÑÁªÑ‰ª∂ÈÄöËøá props ÂèØ‰ª•ËÆøÈóÆÂà∞ dispatchÔºåÂèØ‰ª•Ë∞ÉÁî® Model ‰∏≠ÁöÑ Reducer ÊàñËÄÖ Effects.</p></li></ul><h3 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h3><p>ReducerÂáΩÊï∞Êé•Âèó‰∏§‰∏™ÂèÇÊï∞Ôºö‰πãÂâçÂ∑≤ÁªèÁ¥ØÁßØËøêÁÆóÁöÑÁªìÊûúÂíåÂΩìÂâçË¶ÅË¢´Á¥ØÁßØÁöÑÂÄºÔºåËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÁ¥ØÁßØÁªìÊûú„ÄÇËØ•ÂáΩÊï∞Êää‰∏Ä‰∏™ÈõÜÂêàÂΩíÂπ∂Êàê‰∏Ä‰∏™ÂçïÂÄº„ÄÇ</p><ul><li>Âú® dva ‰∏≠Ôºåreducers ËÅöÂêàÁßØÁ¥ØÁöÑÁªìÊûúÊòØÂΩìÂâç model ÁöÑ state ÂØπË±°„ÄÇÈÄöËøá actions ‰∏≠‰º†ÂÖ•ÁöÑÂÄºÔºå‰∏éÂΩìÂâç reducers ‰∏≠ÁöÑÂÄºËøõË°åËøêÁÆóËé∑ÂæóÊñ∞ÁöÑÂÄºÔºà‰πüÂ∞±ÊòØÊñ∞ÁöÑ stateÔºâ„ÄÇ</li></ul><h3 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h3><p>Effect Ë¢´Áß∞‰∏∫ÂâØ‰ΩúÁî®ÔºåÂú®Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠ÔºåÊúÄÂ∏∏ËßÅÁöÑÂ∞±ÊòØÂºÇÊ≠•Êìç‰Ωú„ÄÇ</p><ul><li><p>ÂÆÉÊù•Ëá™‰∫éÂáΩÊï∞ÁºñÁ®ãÁöÑÊ¶ÇÂøµÔºå‰πãÊâÄ‰ª•Âè´ÂâØ‰ΩúÁî®ÊòØÂõ†‰∏∫ÂÆÉ‰ΩøÂæóÊàë‰ª¨ÁöÑÂáΩÊï∞ÂèòÂæó‰∏çÁ∫ØÔºåÂêåÊ†∑ÁöÑËæìÂÖ•‰∏ç‰∏ÄÂÆöËé∑ÂæóÂêåÊ†∑ÁöÑËæìÂá∫„ÄÇ</p></li><li><p>dva ‰∏∫‰∫ÜÊéßÂà∂ÂâØ‰ΩúÁî®ÁöÑÊìç‰ΩúÔºåÂ∞ÜÂºÇÊ≠•ËΩ¨ÊàêÂêåÊ≠•ÂÜôÊ≥ïÔºå‰ªéËÄåÂ∞ÜeffectsËΩ¨‰∏∫Á∫ØÂáΩÊï∞</p></li></ul><h3 id="Subscription"><a href="#Subscription" class="headerlink" title="Subscription"></a>Subscription</h3><p>Subscriptions ÊòØ‰∏ÄÁßç‰ªé <strong>Ê∫ê</strong> Ëé∑ÂèñÊï∞ÊçÆÁöÑÊñπÊ≥ïÔºåÂÆÉÊù•Ëá™‰∫é elm„ÄÇ</p><ul><li>Subscription ËØ≠‰πâÊòØËÆ¢ÈòÖÔºåÁî®‰∫éËÆ¢ÈòÖ‰∏Ä‰∏™Êï∞ÊçÆÊ∫êÔºåÁÑ∂ÂêéÊ†πÊçÆÊù°‰ª∂ dispatch ÈúÄË¶ÅÁöÑ action„ÄÇ</li></ul><h3 id="Êï∞ÊçÆÊµÅÂõæ"><a href="#Êï∞ÊçÆÊµÅÂõæ" class="headerlink" title="Êï∞ÊçÆÊµÅÂõæ"></a>Êï∞ÊçÆÊµÅÂõæ</h3><p><img src="/Users/dongwei/Documents/hexo/source/_posts/img/hUFIivoOFjVmwNXjjfPE.png"></p><ul><li><p>State ÊòØÂÇ®Â≠òÊï∞ÊçÆÁöÑÂú∞ÊñπÔºåÊî∂Âà∞ Action ‰ª•ÂêéÔºå‰ºöÊõ¥Êñ∞Êï∞ÊçÆ„ÄÇ</p></li><li><p>View Â∞±ÊòØ React ÁªÑ‰ª∂ÊûÑÊàêÁöÑ UI Â±ÇÔºå‰ªé State ÂèñÊï∞ÊçÆÂêéÔºåÊ∏≤ÊüìÊàê HTML ‰ª£Á†Å„ÄÇÂè™Ë¶Å State ÊúâÂèòÂåñÔºåView Â∞±‰ºöËá™Âä®Êõ¥Êñ∞„ÄÇ</p></li><li><p>Action ÊòØÁî®Êù•ÊèèËø∞ UI Â±Ç‰∫ã‰ª∂ÁöÑ‰∏Ä‰∏™ÂØπË±°„ÄÇ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;click-submit-button&#x27;</span>,</span><br><span class="line">  <span class="attr">payload</span>: <span class="built_in">this</span>.form.data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>connect ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁªëÂÆö State Âà∞ View„ÄÇ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">todos</span>: state.todos &#125;;</span><br><span class="line">&#125;</span><br><span class="line">connect(mapStateToProps)(App);</span><br></pre></td></tr></table></figure><p>connect ÊñπÊ≥ïËøîÂõûÁöÑ‰πüÊòØ‰∏Ä‰∏™ React ÁªÑ‰ª∂ÔºåÈÄöÂ∏∏Áß∞‰∏∫ÂÆπÂô®ÁªÑ‰ª∂„ÄÇÂõ†‰∏∫ÂÆÉÊòØÂéüÂßã UI ÁªÑ‰ª∂ÁöÑÂÆπÂô®ÔºåÂç≥Âú®Â§ñÈù¢ÂåÖ‰∫Ü‰∏ÄÂ±Ç State„ÄÇ</p></li><li><p>dispatch ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊñπÊ≥ïÔºåÁî®Êù•Â∞Ü Action ÂèëÈÄÅÁªô State„ÄÇ</p><p><strong>Ë¢´ connect ÁöÑ Component ‰ºöËá™Âä®Âú® props ‰∏≠Êã•Êúâ dispatch ÊñπÊ≥ï„ÄÇ</strong></p></li></ul><h3 id="Êï∞ÊçÆÊµÅÂõæ‰∫å"><a href="#Êï∞ÊçÆÊµÅÂõæ‰∫å" class="headerlink" title="Êï∞ÊçÆÊµÅÂõæ‰∫å"></a>Êï∞ÊçÆÊµÅÂõæ‰∫å</h3><p><img src="/Users/dongwei/Documents/hexo/source/_posts/img/pHTYrKJxQHPyJGAYOzMu.png"></p><h3 id="Model-ÂØπË±°ÁöÑÂ±ûÊÄß"><a href="#Model-ÂØπË±°ÁöÑÂ±ûÊÄß" class="headerlink" title="Model ÂØπË±°ÁöÑÂ±ûÊÄß"></a>Model ÂØπË±°ÁöÑÂ±ûÊÄß</h3><blockquote><p>ÊØè‰∏™modelÔºåÂÆûÈôÖ‰∏äÈÉΩÊòØÊôÆÈÄöÁöÑJavaScriptÂØπË±°</p></blockquote><ul><li><p>namespace: ÂΩìÂâç Model ÁöÑÂêçÁß∞„ÄÇÊï¥‰∏™Â∫îÁî®ÁöÑ StateÔºåÁî±Â§ö‰∏™Â∞èÁöÑ Model ÁöÑ State ‰ª• namespace ‰∏∫ key ÂêàÊàê</p></li><li><p>state: ËØ• Model ÂΩìÂâçÁöÑÁä∂ÊÄÅ„ÄÇÊï∞ÊçÆ‰øùÂ≠òÂú®ËøôÈáåÔºåÁõ¥Êé•ÂÜ≥ÂÆö‰∫ÜËßÜÂõæÂ±ÇÁöÑËæìÂá∫</p></li><li><p>reducers: Action Â§ÑÁêÜÂô®ÔºåÂ§ÑÁêÜÂêåÊ≠•Âä®‰ΩúÔºåÁî®Êù•ÁÆóÂá∫ÊúÄÊñ∞ÁöÑ State</p></li><li><p>effectsÔºöAction Â§ÑÁêÜÂô®ÔºåÂ§ÑÁêÜÂºÇÊ≠•Âä®„ÄÇdva Êèê‰æõÂ§ö‰∏™ effect ÂáΩÊï∞ÂÜÖÈÉ®ÁöÑÂ§ÑÁêÜÂáΩÊï∞ÔºåÊØîËæÉÂ∏∏Áî®ÁöÑÊòØ <code>call</code> Âíå <code>put</code>„ÄÇ</p><ul><li>callÔºöÊâßË°åÂºÇÊ≠•ÂáΩÊï∞</li><li>putÔºöÂèëÂá∫‰∏Ä‰∏™ ActionÔºåÁ±ª‰ºº‰∫é dispatch</li></ul></li><li><p>subscriptions</p></li></ul><h1 id="restful"><a href="#restful" class="headerlink" title="restful"></a>restful</h1><ul><li><strong>GET</strong>: A safe read-only method that reads a single or a list of resources.</li><li><strong>POST</strong>: Creates a new resource.</li><li><strong>PUT</strong>: Completely replaces the resource(s) at the given location with the new data.</li><li><strong>PATCH</strong>: Merges the resource(s) at the given location with the new data.</li><li><strong>DELETE</strong>: Deletes the resource(s) at a location.</li><li><strong>HEAD</strong>: Same as GET but only returns the header and no data.</li></ul><p><strong>Áî® URL Ë°®Á§∫Ë¶ÅÊìç‰ΩúÁöÑËµÑÊ∫êÔºåÁî®‰∏çÂêåÁöÑ HTTP ËØ∑Ê±ÇÔºàGETÔºåPOSTÔºåPUTÔºåDELETEÔºâÊèèËø∞ÂØπËµÑÊ∫êÁöÑÊìç‰ΩúÔºåÈÄöËøá HTTP ÁöÑÁä∂ÊÄÅÁ†ÅÊù•Âà§Êñ≠Ê≠§Ê¨°ÂØπËµÑÊ∫êÊìç‰ΩúÁöÑÁªìÊûú</strong>ÔºåËøôÂ∞±ÊòØ RestfulÈ£éÊ†º„ÄÇ </p><ol><li>GET Áî®Êù•Ëé∑ÂèñËµÑÊ∫ê</li><li>POST Áî®Êù•Êñ∞Â¢ûËµÑÊ∫ê</li><li>PUT Áî®Êù•Êõ¥Êñ∞ËµÑÊ∫ê</li><li>DELETE Áî®Êù•Âà†Èô§ËµÑÊ∫ê</li></ol><ul><li>putÂíådeleteËôΩÁÑ∂ÊòØhttpÂçèËÆÆÁöÑËßÑËåÉ ,‰ΩÜÊòØÈÅóÊÜæÁöÑÊòØ,ÊâÄÊúâÁöÑÊó†ËÆ∫ÊòØhtml4ËøòÊòØh5ÈÉΩ‰∏çÊîØÊåÅ,ÊâÄ‰ª•Êàë‰ª¨Âú®ÂÆûÈôÖÂºÄÂºÄÂèëËøáÁ®ãÂΩì‰∏≠Ë¶ÅÊ®°ÊãüËøô‰∏§ÁßçÁä∂ÊÄÅ„ÄÇ </li></ul><h2 id="RestfulÊúâ‰ªÄ‰πàÊÑè‰πâ"><a href="#RestfulÊúâ‰ªÄ‰πàÊÑè‰πâ" class="headerlink" title="RestfulÊúâ‰ªÄ‰πàÊÑè‰πâ"></a>RestfulÊúâ‰ªÄ‰πàÊÑè‰πâ</h2><ul><li>ÁΩëÁªú‰∏äÁöÑÊâÄÊúâÁöÑ‰ø°ÊÅØ‰ΩìÈÉΩÁúã‰Ωú‰∏ÄÁßçËµÑÊ∫êÔºåÂØπÁΩëÁªúËµÑÊ∫êÁöÑÊüêÁßçÊìç‰ΩúÔºåÈÉΩÊòØÈÄöËøá method Êù•Á°ÆÂÆöÁöÑ„ÄÇ </li><li>ÂØπ‰∫éÁé∞Âú®ÁöÑÊï∞ÊçÆÊàñËÄÖËµÑÊ∫êÊèê‰æõÊñπÔºåÂØπÂ§ñÈÄèÈú≤ÁöÑÊé•Âè£‰∏ÄËà¨ÊòØ restful È£éÊ†ºÁöÑÔºåÊúâÂà©‰∫é‰∏çÂêåÁ≥ªÁªü‰πãÈó¥ÁöÑËµÑÊ∫êÂÖ±‰∫´,ËÄå‰∏îÂè™ÈúÄË¶ÅÈÅµÂÆàËßÑËåÉ‰∏çÈúÄË¶ÅÂÅöÂè¶Â§ñÁöÑÈÖçÁΩÆÂ∞±ËÉΩËææÂà∞ËµÑÊ∫êÂÖ±‰∫´„ÄÇ </li></ul><p><strong>restful ÊòØÁî®Êù•Â§ñÊèê‰æõÊé•Âè£ÁöÑÔºå‰∏ªË¶ÅÁî®‰∫éÂú®‰∏çÂêåÁöÑÁ≥ªÁªü‰πãÈó¥ËøõË°åÊï∞ÊçÆÁöÑ‰∫§‰∫í„ÄÇ</strong></p><p><strong>psÔºöÂÖ∂ÂÆûÂú®ÂÅöÂÜÖÈÉ®Á≥ªÁªüÁöÑÊó∂ÂÄôÂπ∂‰∏ç‰ºö‰ΩøÁî® restful È£éÊ†ºÁöÑ url ËØ∑Ê±ÇÔºåÂè™Áî®ÊôÆÈÄöÁöÑ @RequestMapping Êù•ÂåπÈÖçËØ∑Ê±ÇÂ∞±Ë°å‰∫Ü„ÄÇ</strong></p><h2 id="ËøîÂõûÁ†Å"><a href="#ËøîÂõûÁ†Å" class="headerlink" title="ËøîÂõûÁ†Å"></a>ËøîÂõûÁ†Å</h2><p>RESTful API ‰∏≠ÁöÑÊ†áÂáÜËøîÂõûÁ†ÅÈÄöÂ∏∏ÈÅµÂæ™ HTTP Áä∂ÊÄÅÁ†ÅÔºåÂπ∂Ê†πÊçÆ‰∏çÂêåÁöÑÊìç‰ΩúÂíåÁªìÊûúËøîÂõû‰∏çÂêåÁöÑÁä∂ÊÄÅÁ†Å„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑ HTTP Áä∂ÊÄÅÁ†ÅÂèäÂÖ∂ÈÄöÂ∏∏ÁöÑÂê´‰πâÔºö</p><ul><li><strong>200 OK</strong>: Ë°®Á§∫ËØ∑Ê±ÇÊàêÂäü„ÄÇÈÄöÂ∏∏Áî®‰∫é GET ËØ∑Ê±Ç„ÄÇ</li><li><strong>201 Created</strong>: Ë°®Á§∫ÊàêÂäüÂàõÂª∫‰∫ÜÊñ∞ÁöÑËµÑÊ∫ê„ÄÇÈÄöÂ∏∏Áî®‰∫é POST ËØ∑Ê±Ç„ÄÇ</li><li><strong>204 No Content</strong>: Ë°®Á§∫ËØ∑Ê±ÇÊàêÂäüÂ§ÑÁêÜÔºå‰ΩÜÊ≤°ÊúâËøîÂõûÂÜÖÂÆπ„ÄÇÈÄöÂ∏∏Áî®‰∫é DELETE ËØ∑Ê±Ç„ÄÇ</li><li><strong>400 Bad Request</strong>: Ë°®Á§∫ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑËØ∑Ê±ÇÊúâÈîôËØØÔºåÊúçÂä°Âô®Êó†Ê≥ïÁêÜËß£„ÄÇ</li><li><strong>401 Unauthorized</strong>: Ë°®Á§∫ËØ∑Ê±ÇÈúÄË¶ÅÁî®Êà∑ËÆ§ËØÅÔºåÁî®Êà∑Ê≤°ÊúâÊèê‰æõÊúâÊïàÁöÑËÆ§ËØÅ‰ø°ÊÅØ„ÄÇ</li><li><strong>403 Forbidden</strong>: Ë°®Á§∫ÊúçÂä°Âô®ÁêÜËß£ËØ∑Ê±ÇÔºå‰ΩÜÊãíÁªùÊâßË°åÔºåÈÄöÂ∏∏Âõ†‰∏∫ÊùÉÈôêÈóÆÈ¢ò„ÄÇ</li><li><strong>404 Not Found</strong>: Ë°®Á§∫ËØ∑Ê±ÇÁöÑËµÑÊ∫ê‰∏çÂ≠òÂú®„ÄÇ</li><li><strong>405 Method Not Allowed</strong>: Ë°®Á§∫ËØ∑Ê±ÇÊñπÊ≥ï‰∏çË¢´ÂÖÅËÆ∏„ÄÇ</li><li><strong>409 Conflict</strong>: Ë°®Á§∫ËØ∑Ê±ÇÂèØËÉΩÂºïÂèëÂÜ≤Á™ÅÔºå‰æãÂ¶ÇÊõ¥Êñ∞ËµÑÊ∫êÊó∂ÁöÑÁâàÊú¨ÂÜ≤Á™Å„ÄÇ</li><li><strong>500 Internal Server Error</strong>: Ë°®Á§∫ÊúçÂä°Âô®Âú®Â§ÑÁêÜËØ∑Ê±ÇÊó∂ÂèëÁîü‰∫ÜÈîôËØØ„ÄÇ</li><li>502 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502">Bad Gateway</a> - This indicates an invalid response from an upstream server.</li><li>503 Service Unavailable - This indicates that something unexpected happened on server side (It can be anything like server overload, some parts of the system failed, etc.).</li></ul><p>RESTful API ÁöÑËøîÂõûÁ†ÅÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµËøõË°åÈÄÇÂΩìÊâ©Â±ïÂíåË∞ÉÊï¥Ôºå‰ΩÜÈÄöÂ∏∏ÈÅµÂæ™‰ª•‰∏äÂü∫Êú¨ÁöÑ HTTP Áä∂ÊÄÅÁ†ÅÊ†áÂáÜ„ÄÇ</p><h2 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h2><ul><li>url‰∏≠ÂåÖÂê´‰º†ÂèÇÊó∂Ôºå‰æãÂ¶Çdelete  /auth/user/{ÂèÇÊï∞}ÔºåÈÇ£Ê≠§Êó∂ÂÖ∂‰ªñdeleteÊñπÊ≥ï /auth/user/otherÔºå‰ºöÂèëÁîüÂÜ≤Á™ÅÔºåÈúÄË¶ÅÂú®Ë∑ØÂæÑ‰æØÂêéÈù¢Ê∑ªÂä†‚Äú/‚ÄùÔºåÂèòÊàê/auth/user/other/</li></ul><hr><ul><li>reference <a href="https://stackoverflow.blog/2020/03/02/best-practices-for-rest-api-design/">Best practices for REST API design</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java thread</title>
      <link href="/2018/06/01/java%20thread/"/>
      <url>/2018/06/01/java%20thread/</url>
      
        <content type="html"><![CDATA[<p>Á∫øÁ®ãÂÆâÂÖ®ÊòØÁºñÁ®ã‰∏≠ÁöÑÊúØËØ≠ÔºåÊåáÊüê‰∏™ÂáΩÊï∞„ÄÅÂáΩÊï∞Â∫ìÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠Ë¢´Ë∞ÉÁî®Êó∂ÔºåËÉΩÂ§üÊ≠£Á°ÆÂú∞Â§ÑÁêÜÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÂÖ±‰∫´ÂèòÈáèÔºå‰ΩøÁ®ãÂ∫èÂäüËÉΩÊ≠£Á°ÆÂÆåÊàê„ÄÇÂç≥Âú®Â§öÁ∫øÁ®ãÂú∫ÊôØ‰∏ãÔºå‰∏çÂèëÁîüÊúâÂ∫èÊÄß„ÄÅÂéüÂ≠êÊÄß‰ª•ÂèäÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇ</p><h3 id="how-to-avoid-deadlock"><a href="#how-to-avoid-deadlock" class="headerlink" title="how to avoid deadlock"></a>how to avoid deadlock</h3><p><img src="https://2.bp.blogspot.com/-63RZ-BTlAFs/VfGeHMnGdFI/AAAAAAAADuw/gwqtrVliMsM/s400/Deadlock%2Bof%2BThreads.jpg"></p><h3 id="ConcurrentHashMap-faster-than-Hashtable"><a href="#ConcurrentHashMap-faster-than-Hashtable" class="headerlink" title="ConcurrentHashMap faster than Hashtable"></a>ConcurrentHashMap faster than Hashtable</h3><blockquote><p> ConcurrentHashMap is introduced as an alternative of Hashtable in Java 5, it is faster because of its design. ConcurrentHashMap divides the whole map into different segments and only lock a particular segment during the update operation, instead of <a href="http://javarevisited.blogspot.com/2012/01/java-hashtable-example-tutorial-code.html">Hashtable</a>, which locks whole Map.</p></blockquote><p><img src="https://1.bp.blogspot.com/-s28yqJthVWo/V10_G31sSCI/AAAAAAAAGNY/8oJE5cDD5BUa5VBiCI8Bx-UdpD8_MoeSwCLcB/s400/Internal%2Bimplementation%2Bof%2BConcurrentHashMap%2Bin%2BJava.png"></p><h3 id="submit-and-execute-method-of-Executor-and-ExecutorService"><a href="#submit-and-execute-method-of-Executor-and-ExecutorService" class="headerlink" title="submit() and execute() method of Executor and ExecutorService"></a>submit() and execute() method of Executor and ExecutorService</h3><blockquote><p> The main difference between submit and execute method from ExecutorService interface is that former return a result in the form of a Future object, while later doesn‚Äôt return a result. By the way, both are used to submit a task to thread pool in Java but one is defined in Executor interface,while other is added into ExecutorService interface.</p></blockquote><p><img src="https://2.bp.blogspot.com/-ybewy1bWbFs/VxZFewRdKbI/AAAAAAAAFt4/fuAHJBE1r_8nlfUz34YTKI1j70UdqaMiQCLcB/s640/Difference%2Bbetween%2Bsubmit%2Bvs%2Bexecute%2Bmethod%2Bin%2BJava.png"></p><h4 id="when-to-use"><a href="#when-to-use" class="headerlink" title="when to use"></a>when to use</h4><blockquote><ul><li>In general, if you are doing computational task e.g. calculating some risk stats, <a href="http://java67.blogspot.com/2015/09/how-to-use-biginteger-class-in-java.html">calculating factorial of large numbers</a> or doing some time-consuming computation e which results in some value then use the submit() method. It immediately returns a Future object, which can be later queried to get the value of computation by calling get() method.</li></ul></blockquote><blockquote><ul><li>Remember, get() is a <a href="http://javarevisited.blogspot.com/2012/02/what-is-blocking-methods-in-java-and.html">blocking call</a> so always call the version which accepts a timeout. While you can use the execute() method if you just want your code to be run in parallel by worker threads of the thread pool.</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Future future = executorService.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Asynchronous task&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">future.get();  <span class="comment">//returns null if the task has finished correctly.</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Future future = executorService.submit(<span class="keyword">new</span> Callable()&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Asynchronous Callable&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Callable Result&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;future.get() = &quot;</span> + future.get());</span><br></pre></td></tr></table></figure><h3 id="ReentrantLock-vs-synchronized"><a href="#ReentrantLock-vs-synchronized" class="headerlink" title="ReentrantLock vs synchronized"></a>ReentrantLock vs synchronized</h3><h4 id="the-advantages-of-ReentrantLock"><a href="#the-advantages-of-ReentrantLock" class="headerlink" title="the advantages of ReentrantLock"></a>the advantages of ReentrantLock</h4><ol><li><p>Ability to lock interruptibly.</p></li><li><p>Ability to timeout while waiting for lock.</p></li><li><p>Power to create fair lock.</p></li><li><p>API to get list of waiting thread for lock.</p></li><li><p>Flexibility to try for lock without blocking.</p></li></ol><h4 id="the-disadvantages-of-ReentrantLock"><a href="#the-disadvantages-of-ReentrantLock" class="headerlink" title="the disadvantages of ReentrantLock"></a>the disadvantages of ReentrantLock</h4><ol><li><p>  Major drawback of using ReentrantLock in Java is wrapping method body inside <a href="http://javarevisited.blogspot.com/2012/11/difference-between-final-finally-and-finalize-java.html">try-finally block</a>, which makes code unreadable and hides business logic. </p></li><li><p>programmer is responsible for acquiring and releasing lock, which is a power but also opens gate for new subtle bugs, when programmer forget to release the lock in finally block.</p></li></ol><h3 id="ReadWriteLock"><a href="#ReadWriteLock" class="headerlink" title="ReadWriteLock"></a>ReadWriteLock</h3><p><img src="https://4.bp.blogspot.com/-yYqp8m0BGdk/V11A-s0qwVI/AAAAAAAAGNw/LL_qGX5_qD4dHTFMe3kklI4jYWyDHzIyQCLcB/s400/ReadWriteLock%2Bin%2BJava.jpg"></p><h3 id="stop-thread"><a href="#stop-thread" class="headerlink" title="stop thread"></a>stop thread</h3><blockquote><ul><li>There was some control methods in JDK 1.0 e.g. stop(), suspend() and resume() which was deprecated in later releases due to potential deadlock threats, from then Java API designers has not made any effort to provide a consistent, thread-safe and elegant way to stop threads.</li></ul></blockquote><blockquote><ul><li>Programmers mainly rely on the fact that thread stops automatically as soon as they finish execution of run() or call() method. To manually stop, programmers either take advantage of volatile boolean variable and check in every iteration if run method has loops or interrupt threads to abruptly cancel tasks.</li></ul></blockquote><h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><blockquote><ul><li>The <code>ThreadLocal</code> class in Java enables you to create variables that can only be read and written by the same thread. Thus, even if two threads are executing the same code, and the code has a reference to a<code>ThreadLocal</code> variable, then the two threads cannot see each other‚Äôs <code>ThreadLocal</code> variables.</li><li>Each thread holds an exclusive copy of ThreadLocal variable which becomes eligible to Garbage collection after thread finished or died, normally or due to any Exception, Given those ThreadLocal variable doesn‚Äôt have any other live references.</li><li>ThreadLocal variables in Java are generally private static fields in Classes and maintain its state inside Thread.</li></ul></blockquote><h3 id="synchronized-vs-concurrent-collection"><a href="#synchronized-vs-concurrent-collection" class="headerlink" title="synchronized vs concurrent collection"></a>synchronized vs concurrent collection</h3><blockquote><p>later is more scalable than former</p><p> synchronized collections locks the whole collection e.g. whole Map or List while concurrent collection never locks the whole Map or List. They achieve thread safety by using advanced and sophisticated techniques like lock stripping. For example, the ConcurrentHashMap divides the whole map into several segments and locks only the relevant segments, which allows multiple threads to access other segments of same ConcurrentHashMap without locking.</p></blockquote><h4 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a>CopyOnWriteArrayList</h4><blockquote><p> CopyOnWriteArrayList allows multiple reader threads to read without synchronization and when a write happens it copies the whole ArrayList and swap with a newer one.</p></blockquote><h3 id="Stack-and-Heap"><a href="#Stack-and-Heap" class="headerlink" title="Stack and Heap"></a>Stack and Heap</h3><blockquote><ul><li>Each thread has their own stack, which is used to store local variables, method parameters and call stack. Variable stored in one Thread‚Äôs stack is not visible to other.</li><li>heap is a common memory area which is shared by all threads.Objects whether local or at any level is created inside heap.</li></ul></blockquote><ul><li>To improve performance thread tends to cache values from heap into their stack, which can create problems if that variable is modified by more than one thread, this is where volatile variables comes in picture. volatile suggest threads to read value of variable always from main memory. </li><li>If there is no memory left in the stack for storing function call or local variable, JVM will throw java.lang.StackOverFlowError, while if there is no more heap space for creating an object, JVM will throw java.lang.OutOfMemoryError: Java Heap Space</li><li>Variables stored in stacks are only visible to the owner Thread while objects created in the heap are visible to all thread. In other words, stack memory is kind of private memory of Java Threads while heap memory is shared among all threads.</li></ul><h3 id="thread-pool"><a href="#thread-pool" class="headerlink" title="thread pool"></a>thread pool</h3><blockquote><p>Java API provides Executor framework, which allows you to create different types of thread pools e.g. single thread pool, which process one task at a time, fixed thread pool (a pool of fixed number of thread) or cached thread pool (an expandable thread pool suitable for applications with many short lived tasks).</p></blockquote><h4 id="the-benefits"><a href="#the-benefits" class="headerlink" title="the benefits"></a>the benefits</h4><ul><li><p>Use of Thread Pool reduces response time by avoiding thread creation during request or task processing.</p></li><li><p>Use of Thread Pool allows you to change your execution policy as you need. you can go from single thread to multiple threads by just replacing ExecutorService implementation.</p></li><li><p>Thread Pool in Java application increases the stability of the system by creating a configured number of threads decided based on system load and available resource.</p></li><li><p>Thread Pool frees application developer from thread management stuff and allows to focus on business logic.</p></li></ul><h3 id="volatile-vs-atomic-variable"><a href="#volatile-vs-atomic-variable" class="headerlink" title="volatile vs atomic variable"></a>volatile vs atomic variable</h3><blockquote><p>Volatile variable provides you happens-before guarantee that a write will happen before any subsequent write, it doesn‚Äôt guarantee atomicity. For example count++ operation will not become atomic just by declaring count variable as volatile. On the other hand AtomicInteger class provides atomic method to perform such compound operation atomically.</p></blockquote><h3 id="3-multi-threading-best-practice"><a href="#3-multi-threading-best-practice" class="headerlink" title="3 multi-threading best practice"></a>3 multi-threading best practice</h3><ul><li><p>Always give meaningful name to your thread</p></li><li><p>Avoid locking or Reduce scope of Synchronization</p></li><li><p>Prefer Synchronizers over wait and notify</p></li><li><p>Prefer Concurrent Collection over Synchronized Collection</p></li></ul><h3 id="Wait„ÄÅSleep„ÄÅYield"><a href="#Wait„ÄÅSleep„ÄÅYield" class="headerlink" title="Wait„ÄÅSleep„ÄÅYield"></a>Wait„ÄÅSleep„ÄÅYield</h3><ul><li><p>sleep() and yield() methods are defined in thread class while wait() is defined in the Object class</p></li><li><p>The key difference between wait() and sleep() is that former is used for inter-thread communication while later is used to introduced to pause the current thread for a short duration. </p></li><li><p>This difference is more obvious from the fact that, when a thread calls the wait() method, it releases the monitor or lock it was holding on that object, but when a thread calls the sleep() method, it never releases the monitor even if it is holding. </p></li><li><p>yield() just releases the CPU hold by Thread to give another thread an opportunity to run though it‚Äôs not guaranteed who will get the CPU. It totally depends upon thread scheduler and <strong>it‚Äôs even possible that the thread which calls the yield() method gets the CPU again</strong>(ÊúâÂèØËÉΩËá™Â∑±‰ºöÂÜçÊ¨°Ëé∑ÂèñÂà∞cpuÊâßË°åÊó∂Èó¥). Hence, it‚Äôs not reliable to depend upon yield() method, it‚Äôs just on best effort basis.</p><ul><li>If there is no waiting thread or all the waiting threads have a lower priority then the same thread will continue its execution.</li></ul></li></ul><h3 id="Future-and-FutureTask"><a href="#Future-and-FutureTask" class="headerlink" title="Future and FutureTask"></a>Future and FutureTask</h3><blockquote><ul><li>A <strong>Future</strong> interface provides methods <strong>to check if the computation is complete, to wait for its completion and to retrieve the results of the computation</strong>. The result is retrieved using Future‚Äôs get() method when the computation has completed, and it blocks until it is completed.</li><li><strong>FutureTask</strong><pre><code>1. FutureTask implementation Future interface and RunnableFuture Interface, means one can use FutureTask as Runnable and can be submitted to ExecutorService for execution.2. When one call Future.submit() Callable or Runnable objects then most of time ExecutorService creates FutureTask, and one can create it manually also.3. FutureTask acts like a latch.4. Computation represent by FutureTask is implemented with Callable interface.5. It implements Future or Callable interface.6. Behaviour of get() method depends on the state of the task. If tasks are not completed get() method waits or blocks till the task is completed. Once task completed, it returns the result or throws an ExecutionException.</code></pre></li></ul></blockquote><p><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/pool2.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java program do two FutureTask </span></span><br><span class="line"><span class="comment">// using Runnable Interface </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*; </span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level; </span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> waitTime; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyRunnable</span><span class="params">(<span class="keyword">int</span> timeInMillis)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">this</span>.waitTime = timeInMillis; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line"><span class="comment">// sleep for user given millisecond </span></span><br><span class="line"><span class="comment">// before checking again </span></span><br><span class="line">Thread.sleep(waitTime); </span><br><span class="line"></span><br><span class="line"><span class="comment">// return current thread name </span></span><br><span class="line">System.out.println(Thread </span><br><span class="line">.currentThread() </span><br><span class="line">.getName()); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (InterruptedException ex) &#123; </span><br><span class="line">Logger </span><br><span class="line">.getLogger(MyRunnable.class.getName()) </span><br><span class="line">.log(Level.SEVERE, <span class="keyword">null</span>, ex); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Class FutureTaskExample excute two future task </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FutureTaskExample</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="comment">// create two object of MyRunnable class </span></span><br><span class="line"><span class="comment">// for FutureTask and sleep 1000, 2000 </span></span><br><span class="line"><span class="comment">// millisecond before checking again </span></span><br><span class="line">MyRunnable myrunnableobject1 = <span class="keyword">new</span> MyRunnable(<span class="number">1000</span>); </span><br><span class="line">MyRunnable myrunnableobject2 = <span class="keyword">new</span> MyRunnable(<span class="number">2000</span>); </span><br><span class="line"></span><br><span class="line">FutureTask&lt;String&gt; </span><br><span class="line">futureTask1 = <span class="keyword">new</span> FutureTask&lt;&gt;(myrunnableobject1, </span><br><span class="line"><span class="string">&quot;FutureTask1 is complete&quot;</span>); </span><br><span class="line">FutureTask&lt;String&gt; </span><br><span class="line">futureTask2 = <span class="keyword">new</span> FutureTask&lt;&gt;(myrunnableobject2, </span><br><span class="line"><span class="string">&quot;FutureTask2 is complete&quot;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// create thread pool of 2 size for ExecutorService </span></span><br><span class="line">ExecutorService executor = Executors.newFixedThreadPool(<span class="number">2</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// submit futureTask1 to ExecutorService </span></span><br><span class="line">executor.submit(futureTask1); </span><br><span class="line"></span><br><span class="line"><span class="comment">// submit futureTask2 to ExecutorService </span></span><br><span class="line">executor.submit(futureTask2); </span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123; </span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">// if both future task complete </span></span><br><span class="line"><span class="keyword">if</span> (futureTask1.isDone() &amp;&amp; futureTask2.isDone()) &#123; </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;Both FutureTask Complete&quot;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// shut down executor service </span></span><br><span class="line">executor.shutdown(); </span><br><span class="line"><span class="keyword">return</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!futureTask1.isDone()) &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">// wait indefinitely for future </span></span><br><span class="line"><span class="comment">// task to complete </span></span><br><span class="line">System.out.println(<span class="string">&quot;FutureTask1 output = &quot;</span></span><br><span class="line">+ futureTask1.get()); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;Waiting for FutureTask2 to complete&quot;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait if necessary for the computation to complete, </span></span><br><span class="line"><span class="comment">// and then retrieves its result </span></span><br><span class="line">String s = futureTask2.get(<span class="number">250</span>, TimeUnit.MILLISECONDS); </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123; </span><br><span class="line">System.out.println(<span class="string">&quot;FutureTask2 output=&quot;</span> + s); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123; </span><br><span class="line">Sysmtem.out.println(<span class="string">&quot;Exception: &quot;</span> + e); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line"></span><br><span class="line">FutureTask1 output=FutureTask1 is complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">Waiting for FutureTask2 to complete</span><br><span class="line">FutureTask2 output=FutureTask2 is complete</span><br><span class="line">Both FutureTask Complete</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows</title>
      <link href="/2018/05/22/windows%20snippet/"/>
      <url>/2018/05/22/windows%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="ËøõÁ®ãÊìç‰Ωú"><a href="#ËøõÁ®ãÊìç‰Ωú" class="headerlink" title="ËøõÁ®ãÊìç‰Ωú"></a>ËøõÁ®ãÊìç‰Ωú</h2><ul><li>netstat -aon|findstr ‚Äú8080‚Äù </li></ul><p>TCP     127.0.0.1:80       0.0.0.0:0             LISTENING    2448<br>Á´ØÂè£Ë¢´ËøõÁ®ãÂè∑‰∏∫2448ÁöÑËøõÁ®ãÂç†Áî®ÔºåÁªßÁª≠ÊâßË°å‰∏ãÈù¢ÂëΩ‰ª§Ôºö</p><ul><li>tasklist|findstr ‚Äú2448‚Äù </li></ul><p>thread.exe                   2016 Console                 0     16,064 K</p><p>ÂæàÊ∏ÖÊ•öÔºåthreadÂç†Áî®‰∫Ü‰Ω†ÁöÑÁ´ØÂè£,Kill it</p><ul><li>taskkill -F -PID 2448</li></ul><p>Â¶ÇÊûúÁ¨¨‰∫åÊ≠•Êü•‰∏çÂà∞ÔºåÈÇ£Â∞±ÂºÄ‰ªªÂä°ÁÆ°ÁêÜÂô®ÔºåËøõÁ®ã‚ÄîÊü•Áúã‚ÄîÈÄâÊã©Âàó‚ÄîpidÔºàËøõÁ®ã‰ΩçÊ†áËØÜÁ¨¶ÔºâÊâì‰∏™ÂãæÂ∞±ÂèØ‰ª•‰∫Ü</p><h2 id="Êü•ÁúãÊñá‰ª∂md5ÂÄº"><a href="#Êü•ÁúãÊñá‰ª∂md5ÂÄº" class="headerlink" title="Êü•ÁúãÊñá‰ª∂md5ÂÄº"></a>Êü•ÁúãÊñá‰ª∂md5ÂÄº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">certutil -hashfile filename MD5</span><br><span class="line">certutil -hashfile filename SHA1</span><br><span class="line">certutil -hashfile filename SHA256</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>socket snippet</title>
      <link href="/2018/05/09/TCP%20and%20UDP/"/>
      <url>/2018/05/09/TCP%20and%20UDP/</url>
      
        <content type="html"><![CDATA[<h2 id="TCP-and-UDP"><a href="#TCP-and-UDP" class="headerlink" title="TCP and UDP"></a>TCP and UDP</h2><blockquote><ul><li>TCP stands for Transmission Control Protocol and UDP stands for User Datagram Protocol, and both are used extensively to build Internet applications.</li><li>The protocol which is the core of internet, HTTP is based on TCP.</li></ul></blockquote><h3 id="why"><a href="#why" class="headerlink" title="why"></a>why</h3><blockquote><p> why Java developer should understand these two protocols in detail is that Java is extensively used to write multi-threaded, concurrent and scalable servers.</p></blockquote><h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><blockquote><p> While UDP is more suitable for applications that need fast, efficient transmission, such as games. UDP‚Äôs stateless nature is also useful for servers that answer small queries from huge numbers of clients. In practice, TCP is used in finance domain e.g. <a href="http://javarevisited.blogspot.sg/2011/04/fix-protocol-tutorial-for-beginners.html">FIX protocol</a> is a TCP based protocol, UDP is used heavily in gaming and entertainment sites.</p></blockquote><h3 id="how"><a href="#how" class="headerlink" title="how"></a>how</h3><ul><li><p>  TCP is connection oriented, reliable, slow, provides guaranteed delivery and preserves the order of messages</p></li><li><p>  UDP is connectionless, unreliable, no ordering guarantee, but a fast protocol. </p></li><li><p>  TCP overhead is also much higher than UDP, as it transmits more metadata per packet than UDP.  that header size of Transmission control protocol is 20 bytes, compared to 8 bytes header of User Datagram protocol.</p></li><li><p>  Use TCP, if you can‚Äôt afford to lose any message, while UDP is better for high-speed data transmission, where loss of a single packet is acceptable e.g. video streaming or online multiplayer games.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Socket </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hibernate snippet</title>
      <link href="/2018/05/01/hibernate%20snippet/"/>
      <url>/2018/05/01/hibernate%20snippet/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ORM is an acronym for Object/Relational mapping. It is a programming strategy to map object with the data stored in the database. It simplifies data creation, data manipulation, and data access.</p></blockquote><h3 id="The-advantages-of-using-ORM-over-JDBC"><a href="#The-advantages-of-using-ORM-over-JDBC" class="headerlink" title="The advantages of using ORM over JDBC"></a>The advantages of using ORM over JDBC</h3><ul><li>Application development is fast.</li><li>Management of transaction.</li><li>Generates key automatically.</li><li>Details of SQL queries are hidden.</li></ul><h3 id="Hibernate-Architecture"><a href="#Hibernate-Architecture" class="headerlink" title="Hibernate Architecture"></a>Hibernate Architecture</h3><ul><li>Java application layer</li><li>Hibernate framework layer</li><li>Backhand api layer</li><li>Database layer</li></ul><p><img src="https://www.javatpoint.com/images/hibernate/arc2.jpg"></p><p>Hibernate Application ArchitectureÔºö</p><p><img src="https://www.tutorialspoint.com/hibernate/images/hibernate_architecture.jpg"></p><blockquote><p>JDBC (Java Database Connectivity)</p><p>JTA (Java Transaction API) </p><p>JNDI (Java Naming Directory Interface)</p></blockquote><h3 id="Elements-of-Hibernate-Architecture"><a href="#Elements-of-Hibernate-Architecture" class="headerlink" title="Elements of Hibernate Architecture"></a>Elements of Hibernate Architecture</h3><ul><li><p>Configuration</p><ul><li><strong>Database Connection</strong> ‚àí This is handled through one or more configuration files supported by Hibernate. These files are <strong>hibernate.properties</strong> and <strong>hibernate.cfg.xml</strong>.</li><li><strong>Class Mapping Setup</strong> ‚àí This component creates the connection between the Java classes and database tables.</li></ul></li><li><p>SessionFactory</p><blockquote><p>SessionFactory is a thread-safe object, many threads cannot access it simultaneously.</p></blockquote></li><li><p>Session</p><blockquote><ul><li>It maintains a connection between the hibernate application and database.It provides methods to store, update, delete or fetch data from the database such as persist(), update(), delete(), load(), get() etc.</li><li>Session is not a thread-safe object, many threads can access it simultaneously. In other words, you can share it between threads.</li></ul></blockquote></li><li><p>Transaction</p></li><li><p>ConnectionProvider</p></li><li><p>Query</p><blockquote><p>Query objects use SQL or Hibernate Query Language (HQL) string to retrieve data from the database and create objects. A Query instance is used to bind query parameters, limit the number of results returned by the query, and finally to execute the query.</p></blockquote></li><li><p>Criteria</p><blockquote><p>Criteria objects are used to create and execute object oriented criteria queries to retrieve objects.</p></blockquote></li></ul><h3 id="About-SQL"><a href="#About-SQL" class="headerlink" title="About SQL"></a>About SQL</h3><ul><li><p>SQL query created in HibernateÔºàNative sqlÔºâ</p><blockquote><p>Session.createSQLQuery</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createSQLQuery()</span><br><span class="line"><span class="comment">//The method createSQLQuery() creates Query object using the native SQL syntax. </span></span><br><span class="line">Query query = session.createSQLQuery(<span class="string">&quot;Select * from Student&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>HQL query</p><blockquote><p>Session.createQuery</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createQuery()</span><br><span class="line"><span class="comment">//The method createQuery() creates Query object using the HQL syntax. </span></span><br><span class="line">Query query = session.createQuery(<span class="string">&quot;from Student s where s.name like &#x27;k%&#x27;&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>criteria query</p><blockquote><p>Session.createCriteria</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Session.createCriteria()</span><br><span class="line"><span class="comment">//The method createCriteria() creates Criteria object for setting the query parameters. This is more useful feature for those who don&#x27;t want to write the query in hand. You can specify any type of complicated syntax using the Criteria API.</span></span><br><span class="line">Criteria criteria = session.createCriteria(Student.class);</span><br></pre></td></tr></table></figure></li></ul><h3 id="HQL-vs-Criteria"><a href="#HQL-vs-Criteria" class="headerlink" title="HQL vs Criteria"></a>HQL vs Criteria</h3><ul><li>HQL is to perform both select and non-select operations on the data,  but Criteria is only for selecting the data, we cannot perform non-select operations using criteria</li><li>HQL is suitable for executing Static Queries, where as Criteria is suitable for executing Dynamic Queries</li><li>HQL doesn‚Äôt support pagination concept, but we can achieve pagination with Criteria</li><li>Criteria used to take more time to execute then HQL</li><li>With Criteria we are safe with SQL Injection because of its dynamic query generation but in HQL as your queries are either fixed or parametrized, there is no safe from SQL Injection.</li></ul><h3 id="Caching"><a href="#Caching" class="headerlink" title="Caching"></a>Caching</h3><blockquote><p>Cache memory stores recently used data items in order to reduce the number of database hits as much as possible.</p></blockquote><p><img src="https://www.tutorialspoint.com/hibernate/images/hibernate_cache.jpg"></p><ul><li><p>First level Cache</p><blockquote><p>Hibernate first level cache is associated with the Session object. Hibernate first level cache is enabled by default and there is no way to disable it. However hibernate provides methods through which we can delete selected objects from the cache or clear the cache completely.Any object cached in a session will not be visible to other sessions and when the session is closed, all the cached objects will also be lost.</p></blockquote></li><li><p>Second level Cache</p><blockquote><p>Hibernate Second Level cache is disabled by default but we can enable it through configuration. Currently EHCache and Infinispan provides implementation for Hibernate Second level cache and we can use them. </p></blockquote></li><li><p>Query Cache</p><blockquote><p>Hibernate can also cache result set of a query. Hibernate Query Cache doesn‚Äôt cache the state of the actual entities in the cache; it caches only identifier values and results of value type. So it should always be used in conjunction with the second-level cache.</p></blockquote></li></ul><hr><h3 id="types-of-association-mapping"><a href="#types-of-association-mapping" class="headerlink" title="types of association mapping"></a>types of association mapping</h3><ol><li><p>One to One</p></li><li><p>One to Many</p><blockquote><p>Ôºà‰∏ÄÂØπÂ§öÔºâÂçïÂêëÔºö‰ºö‰∫ßÁîü‰∏≠Èó¥Ë°®ÔºåÊ≠§Êó∂ÂèØ‰ª•Áî®@onetoMany @JoincolumnÔºàname=‚Äù ‚ÄúÔºâÈÅøÂÖç‰∫ßÁîü‰∏≠Èó¥Ë°®**ÔºåÂπ∂‰∏îÊåáÂÆö‰∫ÜÂ§ñÈîÆÁöÑÂêçÂ≠óÔºàÂà´Áúã @joincolumnÂú®‰∏Ä‰∏≠ÂÜôÁùÄÔºå‰ΩÜÂÆÉÂ≠òÂú®Âú®Â§öÁöÑÈÇ£‰∏™Ë°®‰∏≠Ôºâ</p></blockquote></li><li><p>Many to One</p><blockquote><p>ÔºàÂ§öÂØπ‰∏ÄÔºâÂçïÂêëÔºö‰∏ç‰∫ßÁîü‰∏≠Èó¥Ë°®Ôºå‰ΩÜÂèØ‰ª•Áî®@JoincolumnÔºàname=‚Äù  ‚ÄúÔºâÊù•ÊåáÂÆöÁîüÊàêÂ§ñÈîÆÁöÑÂêçÂ≠óÔºåÂ§ñÈîÆÂú®Â§öÁöÑ‰∏ÄÊñπË°®‰∏≠‰∫ßÁîüÔºÅ</p></blockquote></li><li><p>Many to Many</p></li></ol><hr><p>ÂèØÂèÇËÄÉ<a href="https://www.jianshu.com/p/54108abb070f">JPAÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞Ñ</a></p><h4 id="‰∏∫‰ªÄ‰πàË¶ÅÊúâÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞Ñ"><a href="#‰∏∫‰ªÄ‰πàË¶ÅÊúâÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞Ñ" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅÊúâÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞Ñ"></a>‰∏∫‰ªÄ‰πàË¶ÅÊúâÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞Ñ</h4><blockquote><p>ÁÆÄÂåñÁºñÁ®ãÊìç‰Ωú„ÄÇÊääÂÜó‰ΩôÁöÑÊìç‰Ωú‰∫§ÁªôÂ∫ïÂ±ÇÊ°ÜÊû∂Êù•Â§ÑÁêÜ„ÄÇ<br> ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊàëË¶ÅÁªô‰∏Ä‰ΩçÊñ∞ÂÖ•Â≠¶ÁöÑÂ≠¶ÁîüÊ∑ªÂä†‰∏Ä‰ΩçÊñ∞ÁöÑËÄÅÂ∏à„ÄÇËÄåËøô‰∏™ËÄÅÂ∏àÂèàÊòØÊñ∞Êù•ÁöÑÔºåÂú®Â≠¶ÁîüÊï∞ÊçÆÂ∫ì‰∏éÊïôÂ∏àÊï∞ÊçÆÂ∫ì‰∏≠Âùá‰∏çÂ≠òÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆ„ÄÇÈÇ£‰πàÊàëÈúÄË¶ÅÂÖàÂú®ÊïôÂ∏àÊï∞ÊçÆÂ∫ì‰∏≠‰øùÂ≠òÊñ∞Êù•ÁöÑËÄÅÂ∏àÁöÑÊï∞ÊçÆÔºåÂêåÊó∂Âú®Â≠¶ÁîüÊï∞ÊçÆÂ∫ì‰∏≠‰øùÂ≠òÊñ∞Â≠¶ÁîüÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂÜçÁªô‰∏§ËÄÖÂª∫Á´ãÂÖ≥ËÅî„ÄÇ<br> ËÄåÂ¶ÇÊûúÊàë‰ª¨‰ΩøÁî®‰∫ÜÂÆû‰ΩìÂÖ≥Á≥ªÊò†Â∞ÑÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜËØ•Êñ∞ÊïôÂ∏àÂÆû‰Ωì‰∫§ÁªôËØ•Â≠¶ÁîüÂÆû‰ΩìÔºåÁÑ∂Âêé‰øùÂ≠òËØ•Â≠¶ÁîüÂÆû‰ΩìÂç≥ÂèØÂÆåÊàê„ÄÇ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hibernate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>design pattern</title>
      <link href="/2018/05/01/design%20pattern/"/>
      <url>/2018/05/01/design%20pattern/</url>
      
        <content type="html"><![CDATA[<h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><ul><li>java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Computer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//required parameters</span></span><br><span class="line"><span class="keyword">private</span> String HDD;</span><br><span class="line"><span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line"><span class="comment">//optional parameters</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> isGraphicsCardEnabled;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> isBluetoothEnabled;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getHDD</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> HDD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getRAM</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> RAM;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isGraphicsCardEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isGraphicsCardEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isBluetoothEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isBluetoothEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Computer</span><span class="params">(ComputerBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.HDD=builder.HDD;</span><br><span class="line">    <span class="keyword">this</span>.RAM=builder.RAM;</span><br><span class="line">    <span class="keyword">this</span>.isGraphicsCardEnabled=builder.isGraphicsCardEnabled;</span><br><span class="line">    <span class="keyword">this</span>.isBluetoothEnabled=builder.isBluetoothEnabled;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Builder Class</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ComputerBuilder</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// required parameters</span></span><br><span class="line">    <span class="keyword">private</span> String HDD;</span><br><span class="line">    <span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// optional parameters</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isGraphicsCardEnabled;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isBluetoothEnabled;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ComputerBuilder</span><span class="params">(String hdd, String ram)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.HDD=hdd;</span><br><span class="line">        <span class="keyword">this</span>.RAM=ram;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ComputerBuilder <span class="title">setGraphicsCardEnabled</span><span class="params">(<span class="keyword">boolean</span> isGraphicsCardEnabled)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isGraphicsCardEnabled = isGraphicsCardEnabled;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ComputerBuilder <span class="title">setBluetoothEnabled</span><span class="params">(<span class="keyword">boolean</span> isBluetoothEnabled)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isBluetoothEnabled = isBluetoothEnabled;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Computer <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Computer(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ComputerBuilder</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.journaldev.design.builder.Computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBuilderPattern</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Using builder to get the object in a single line of code and </span></span><br><span class="line">            <span class="comment">//without any inconsistent state or arguments management issues        </span></span><br><span class="line">    Computer comp = <span class="keyword">new</span> Computer.ComputerBuilder(</span><br><span class="line">            <span class="string">&quot;500 GB&quot;</span>, <span class="string">&quot;2 GB&quot;</span>).setBluetoothEnabled(<span class="keyword">true</span>)</span><br><span class="line">            .setGraphicsCardEnabled(<span class="keyword">true</span>).build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> design pattern </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis snippet</title>
      <link href="/2018/02/16/redis%20snippet/"/>
      <url>/2018/02/16/redis%20snippet/</url>
      
        <content type="html"><![CDATA[<h3 id="Êï∞ÊçÆÁ±ªÂûã"><a href="#Êï∞ÊçÆÁ±ªÂûã" class="headerlink" title="Êï∞ÊçÆÁ±ªÂûã"></a>Êï∞ÊçÆÁ±ªÂûã</h3><ul><li><p>String</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; SET name &quot;runoob&quot;</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; GET name</span><br><span class="line">&quot;runoob&quot;</span><br></pre></td></tr></table></figure></li><li><p>Hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; HMSET myhash field1 &quot;Hello&quot; field2 &quot;World&quot;</span><br><span class="line">&quot;OK&quot;</span><br><span class="line">redis&gt; HGET myhash field1</span><br><span class="line">&quot;Hello&quot;</span><br><span class="line">redis&gt; HGET myhash field2</span><br><span class="line">&quot;World&quot;</span><br></pre></td></tr></table></figure></li><li><p>List</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; lpush runoob redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush runoob mongodb</span><br><span class="line">(integer) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; lpush runoob rabitmq</span><br><span class="line">(integer) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; lrange runoob 0 10</span><br><span class="line">1) &quot;rabitmq&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure></li><li><p>Set</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; sadd runoob redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob rabitmq</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; sadd runoob rabitmq</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; smembers runoob</span><br><span class="line"></span><br><span class="line">1) &quot;redis&quot;</span><br><span class="line">2) &quot;rabitmq&quot;</span><br><span class="line">3) &quot;mongodb&quot;</span><br></pre></td></tr></table></figure></li><li><p>zset(sorted setÔºöÊúâÂ∫èÈõÜÂêà)</p><ul><li><p>Redis zset Âíå set ‰∏ÄÊ†∑‰πüÊòØstringÁ±ªÂûãÂÖÉÁ¥†ÁöÑÈõÜÂêà,‰∏î‰∏çÂÖÅËÆ∏ÈáçÂ§çÁöÑÊàêÂëò„ÄÇ</p><p>‰∏çÂêåÁöÑÊòØÊØè‰∏™ÂÖÉÁ¥†ÈÉΩ‰ºöÂÖ≥ËÅî‰∏Ä‰∏™doubleÁ±ªÂûãÁöÑÂàÜÊï∞„ÄÇredisÊ≠£ÊòØÈÄöËøáÂàÜÊï∞Êù•‰∏∫ÈõÜÂêà‰∏≠ÁöÑÊàêÂëòËøõË°å‰ªéÂ∞èÂà∞Â§ßÁöÑÊéíÂ∫è„ÄÇzsetÁöÑÊàêÂëòÊòØÂîØ‰∏ÄÁöÑ,‰ΩÜÂàÜÊï∞(score)Âç¥ÂèØ‰ª•ÈáçÂ§ç„ÄÇ</p></li><li><p>ÂëΩ‰ª§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member </span><br></pre></td></tr></table></figure></li><li><p>ÂÆû‰æã</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; &gt; ZRANGEBYSCORE runoob 0 1000</span><br><span class="line">1) &quot;mongodb&quot;</span><br><span class="line">2) &quot;rabitmq&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="Êìç‰Ωú"><a href="#Êìç‰Ωú" class="headerlink" title="Êìç‰Ωú"></a>Êìç‰Ωú</h3><ul><li><p>show all keys</p><p><code>KEYS *</code></p></li><li><p>Delete All Keys In Redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  Delete all keys from all Redis databases:</span><br><span class="line">`$ redis-cli FLUSHALL`</span><br><span class="line">Delete all keys of the currently selected Redis database:</span><br><span class="line">`$ redis-cli FLUSHDB`</span><br><span class="line">Delete all keys of the specified Redis database:</span><br><span class="line">`$ redis-cli -n &lt;database_number&gt; FLUSHDB`</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÊåáÂÆöÂâçÁºÄÁöÑÊï∞ÊçÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§ÊåáÂÆöCCR866ÂâçÁºÄÁöÑredisÊï∞ÊçÆ</span></span><br><span class="line">path/to/redis-cli -p 16379 -a Redis6379  -n 1 keys &#x27;CCR866*&#x27; | xargs ./redis-cli -p 16379 -a Redis6379 -n 1 del</span><br></pre></td></tr></table></figure></li><li><p>Âú®ÂêØÂä®ÂëΩ‰ª§‰∏≠Ê∑ªÂä† ‚Äìraw,ÂèØ‰ª•Êü•ÁúãvalueÁöÑ‰∏≠Êñá‰ø°ÊÅØ</p></li></ul><h3 id="ÈóÆÈ¢òËß£ÂÜ≥"><a href="#ÈóÆÈ¢òËß£ÂÜ≥" class="headerlink" title="ÈóÆÈ¢òËß£ÂÜ≥"></a>ÈóÆÈ¢òËß£ÂÜ≥</h3><ul><li><p>RedisConnectionFailureException</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis.conf‰∏≠ÈªòËÆ§ÁöÑÊòØbind 127.0.0.1ÔºåÈúÄË¶ÅÂ∞ÜËøôÊÆµÊ≥®Èáä</span><br><span class="line">ËÆæÁΩÆprotected-mode noÔºåÂõ†‰∏∫Â¶ÇÊûúÊòØyesÁöÑËØùÔºåÂè™ËÉΩËøõË°åÊú¨Âú∞ËÆøÈóÆ„ÄÇÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÂØÜÁ†ÅÂíåbindËøô‰∏™ÂèØ‰ª•ÂºÄÂêØÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÔºåËøô‰∏™Â±ûÊÄßÂèØ‰ª•ËÆæÁΩÆ‰∏∫noÂç≥ÂèØ„ÄÇ</span><br><span class="line">daemonize  yesË°®Á§∫ÂêéÂè∞ËøêË°å</span><br></pre></td></tr></table></figure></li><li><p>ÈúÄË¶ÅÂÆâË£Ögcc</p></li><li><p>makeÊó∂ÔºåÊèêÁ§∫fatal error: jemalloc/jemalloc.h: No such file or directory</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ëß£ÂÜ≥Ôºö   </span><br><span class="line"><span class="built_in">cd</span> src/deps</span><br><span class="line">make hiredis jemalloc linenoise lua geohash-int</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h3 id="Ëá™ÂÆö‰πâÈÖçÁΩÆredis-server"><a href="#Ëá™ÂÆö‰πâÈÖçÁΩÆredis-server" class="headerlink" title="Ëá™ÂÆö‰πâÈÖçÁΩÆredis server"></a>Ëá™ÂÆö‰πâÈÖçÁΩÆredis server</h3><p>Ê∂âÂèäÂà∞ÁöÑÁõÆÂΩïÊàñÊñá‰ª∂Êúâ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ÈÖçÁΩÆÊñá‰ª∂    /etc/redis/xxxx.conf</span><br><span class="line">2.Êó•Âøó„ÄÅÊï∞ÊçÆÊñá‰ª∂    /data/redis/xxxx</span><br><span class="line">3.ÂêØÂä®ËÑöÊú¨    /etc/init.d/redis_xxxx</span><br></pre></td></tr></table></figure></li><li><p>ÂÆ¢Êà∑Á´ØÂêØÂä®Êó∂    redis-cli -p xxxx</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jvm snippet</title>
      <link href="/2018/01/18/JVM%20snippet/"/>
      <url>/2018/01/18/JVM%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="JRE-JVM-JDK"><a href="#JRE-JVM-JDK" class="headerlink" title="JRE JVM JDK"></a>JRE JVM JDK</h2><ul><li>JRE:    java run-time</li></ul><blockquote><p>Java is every where in browser, in mobile, in TV or in set-top boxes and if you are into Java programming language than you know that Java code which is bundled in JAR (Java archive) file require Java virtual machine JVM to execute it. </p></blockquote><ul><li>JVM:    java virtual machine</li></ul><blockquote><p> Java Virtual Machine is get created when you run a java program using java command e.g. java HelloWorld. JVM is responsible for converting byte code into machine specific code</p></blockquote><ul><li>JDK:    java development kit</li></ul><blockquote><p> JDK is also loosely referred as JRE but its lot more than JRE and it provides all the tools and executable require to compile debug and execute Java Program.</p></blockquote><h2 id="basic-architecture-of-the-JVM"><a href="#basic-architecture-of-the-JVM" class="headerlink" title="basic architecture of the JVM"></a>basic architecture of the JVM</h2><img src="https://i.imgur.com/yI8u4Hr.jpg" style="width:50%"><h3 id="Class-Loader-Sub-System"><a href="#Class-Loader-Sub-System" class="headerlink" title="Class Loader Sub System"></a>Class Loader Sub System</h3><h4 id="1-Loading"><a href="#1-Loading" class="headerlink" title="1. Loading"></a>1. Loading</h4><ul><li><p>loading the class file and store inside method area</p><img src="https://i.imgur.com/57IalMb.png" style="width:50%"></li><li><p>Created object is not student object or customer object. It is a predefined class ‚ÄúClass‚Äù object that is presently in java.lang package.</p><img src="https://i.imgur.com/9hHykjw.png" style="width:70%"></li><li><p>For every loaded .class file, only one class ‚ÄúClass‚Äù object will be created by JVM, even though we are using that class multiple times in our program. Example,</p><img src="https://i.imgur.com/KKpqYVn.png" style="width:70%"></li></ul><h4 id="2-Linking"><a href="#2-Linking" class="headerlink" title="2. Linking"></a>2. Linking</h4><ul><li><p><strong>verification</strong> </p><blockquote><p>This Byte Code Verifier is responsible to verify weather .class file is properly formatted or not, structurally correct or not, generated by valid compiler or not.</p></blockquote></li><li><p><strong>preparation</strong> </p><blockquote><p>allocate memory for class level static variables and assigned default values.</p><p>E.g. For int ‚Äî&gt; 0, For double ‚Äî&gt; 0.0, For boolean ‚Äî&gt; false</p></blockquote></li><li><p><strong>Resolution</strong></p><blockquote><p>It is the process of replacing all symbolic references used in our class with original direct references from method area.</p></blockquote><p><img src="https://i.imgur.com/jTM8BJz.png"></p></li><li><p><strong>Initialization</strong></p></li></ul><blockquote><p>In Initialization activity, for class level static variables assigns original values and static blocks will be executed from top to bottom.</p></blockquote><ul><li>Types of class loaders in class loader subsystem<ul><li>Bootstrap class loader/ Primordial class loader</li><li>Extension class loader</li><li>Application class loader/System class loader</li></ul></li></ul><h4 id="3-Class-loader-sub-system-follows-delegation-hierarchy-algorithm"><a href="#3-Class-loader-sub-system-follows-delegation-hierarchy-algorithm" class="headerlink" title="3. Class loader sub system follows delegation hierarchy algorithm"></a>3. Class loader sub system follows delegation hierarchy algorithm</h4><ul><li><strong>Customized class loader</strong>Sometimes we may not satisfy with default class loader mechanism then we can go for Customized class loader. For example:</li></ul><h3 id="Various-Memory-Areas-in-JVM"><a href="#Various-Memory-Areas-in-JVM" class="headerlink" title="Various Memory Areas in JVM"></a>Various Memory Areas in JVM</h3><h4 id="1-Method-Area"><a href="#1-Method-Area" class="headerlink" title="1. Method Area"></a>1. Method Area</h4><ul><li><p>Inside method area class level binary data including static variables will be stored</p></li><li><p>Constant pools of a class will be stored inside method area.</p></li><li><p>Method area can be accessed by multiple threads simultaneously.</p><blockquote><p>All threads share the same method area, so access to the method area‚Äôs data structures must be designed to be thread-safe. </p></blockquote></li></ul><h4 id="2-Heap-Area"><a href="#2-Heap-Area" class="headerlink" title="2. Heap Area"></a>2. Heap Area</h4><blockquote><p><strong>Heap space in Java is used for dynamic memory allocation for Java objects and JRE classes at the runtime</strong>. New objects are always created in heap space and the references to this objects are stored in stack memory.</p></blockquote><p>These objects have global access and can be accessed from anywhere in the application.</p><p>This memory model is further broken into smaller parts called generations, these are:</p><ol><li><strong>Young Generation ‚Äì</strong> this is where all new objects are allocated and aged. A minor Garbage collection occurs when this fills up</li><li><strong>Old or Tenured Generation ‚Äì</strong> this is where long surviving objects are stored. When objects are stored in the Young Generation, a threshold for the object‚Äôs age is set and when that threshold is reached, the object is moved to the old generation</li><li><strong>Permanent Generation ‚Äì</strong> this consists of JVM metadata for the runtime classes and application methods</li></ol><ul><li>It‚Äôs accessed via complex memory management techniques that include Young Generation, Old or Tenured Generation, and Permanent Generation</li><li>If heap space is full, Java throws <em>java.lang.OutOfMemoryError</em></li><li>Access to this memory is relatively slower than stack memory</li><li>This memory, in contrast to stack, isn‚Äôt automatically deallocated. It needs Garbage Collector to free up unused objects so as to keep the efficiency of the memory usage</li><li>Unlike stack, a heap isn‚Äôt threadsafe and needs to be guarded by properly synchronizing the code</li></ul><hr><ul><li><p>Objects and corresponding instance variables will be stored in the heap area.</p></li><li><p>Every array in java is object only hence arrays also will be stored in the heap area.</p></li><li><p>Heap area can be access by multiple threads and hence the data stored in the heap area is not thread safe.</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Set Maximum and Minimum heap size</span><br><span class="line">-Xmx</span><br><span class="line">     To set maximum heap size , i.e., maxMemory</span><br><span class="line">    java -Xmx512m HeapSpaceDemo</span><br><span class="line">     Here mx = maximum size</span><br><span class="line">              512m = 512 MB</span><br><span class="line">              HeapSpaceDemo = Java class name</span><br><span class="line">-Xms</span><br><span class="line">     To set minimum heap size , i.e., total memory </span><br><span class="line">        java -Xms65m HeapSpaceDemo   </span><br><span class="line">      Here ms = minimum size</span><br><span class="line">              65m = 65 MB</span><br><span class="line">              HeapSpaceDemo = Java class name</span><br><span class="line">or, you can set a minimum maximum heap size at a time</span><br><span class="line">java -Xms256m -Xmx1024m HeapSpaceDemo</span><br></pre></td></tr></table></figure><h4 id="3-Stack-Memory"><a href="#3-Stack-Memory" class="headerlink" title="3. Stack Memory"></a>3. Stack Memory</h4><blockquote><p><strong>Stack Memory in Java is used for static memory allocation and the execution of a thread.</strong> It contains primitive values that are specific to a method and references to objects that are in a heap, referred from the method.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Access to this memory is in Last-In-First-Out (LIFO) order. Whenever a new method is called, a new block on top of the stack is created which contains values specific to that method, like primitive variables and references to objects.</span><br><span class="line"></span><br><span class="line">When the method finishes execution, it‚Äôs corresponding stack frame is flushed, the flow goes back to the calling method and space becomes available for the next method.</span><br></pre></td></tr></table></figure><ul><li><p>It grows and shrinks as new methods are called and returned respectively</p></li><li><p>Variables inside stack exist only as long as the method that created them is running</p></li><li><p>It‚Äôs automatically allocated and deallocated when method finishes execution</p></li><li><p>If this memory is full, Java throws <em>java.lang.StackOverFlowError</em></p></li><li><p>Access to this memory is fast when compared to heap memory</p></li><li><p>This memory is threadsafe as each thread operates in its own stack</p></li></ul><hr><ul><li><p>Local Variable Array</p><ul><li><p>It contains all parameters and local variables of the method.</p></li><li><p>the occupied slot </p></li></ul></li><li><p>Operand Stack</p><ul><li><p>JVM uses operand stack as work space.</p></li><li><p>last-in first-out (LIFO) </p></li><li><p>how a Java virtual machine would add two local variables that contain ints and store the int result in a third local variable:</p></li></ul></li><li><p>Frame Data</p></li></ul><p><strong>Stack Memory vs Heap Space</strong></p><table><thead><tr><th>Parameter</th><th>Stack Memory</th><th>Heap Space</th></tr></thead><tbody><tr><td>Application</td><td>Stack is used in parts, one at a time during execution of a thread</td><td>The entire application uses Heap space during runtime</td></tr><tr><td>Size</td><td>Stack has size limits depending upon OS and is usually smaller then Heap</td><td>There is no size limit on Heap</td></tr><tr><td>Storage</td><td>Stores only primitive variables and references to objects that are created in Heap Space</td><td>All the newly created objects are stored here</td></tr><tr><td>Order</td><td>It is accessed using Last-in First-out (LIFO) memory allocation system</td><td>This memory is accessed via complex memory management techniques that include Young Generation, Old or Tenured Generation, and Permanent Generation.</td></tr><tr><td>Life</td><td>Stack memory only exists as long as the current method is running</td><td>Heap space exists as long as the application runs</td></tr><tr><td>Efficiency</td><td>Comparatively much faster to allocate when compared to heap</td><td>Slower to allocate when compared to stack</td></tr><tr><td>Allocation/Deallocation</td><td>This Memory is automatically allocated and deallocated when a method is called and returned respectively</td><td>Heap space is allocated when new objects are created and deallocated by Gargabe Collector when they are no longer referenced</td></tr></tbody></table><h4 id="4-PC-Registers-Program-Counter-Registers"><a href="#4-PC-Registers-Program-Counter-Registers" class="headerlink" title="4. PC Registers(Program Counter Registers)"></a>4. PC Registers(Program Counter Registers)</h4><blockquote><p>For every thread a separate PC register will be created at the time of thread creation. PC register contains address of current executing instruction. Once instruction execution completes automatically PC register will be incremented to hold address of next instruction. An ‚Äúaddress‚Äù can be a native pointer or an offset from the beginning of a method‚Äôs byte codes.   </p></blockquote><h4 id="5-Native-Method-Stacks"><a href="#5-Native-Method-Stacks" class="headerlink" title="5. Native Method Stacks"></a>5. Native Method Stacks</h4><blockquote><p>Here also for every Thread a separate run time stack will be created. It contains all the native methods used in the application. Native method means methods written in a language other than the Java programming language. In other words, it is a stack used to execute C/C++ codes invoked through JNI (Java Native Interface). According to the language, a C stack or C++ stack is created.</p></blockquote><h3 id="Execution-Engine"><a href="#Execution-Engine" class="headerlink" title="Execution Engine"></a>Execution Engine</h3><h4 id="1-Interpreter"><a href="#1-Interpreter" class="headerlink" title="1. Interpreter"></a>1. Interpreter</h4><blockquote><p>It is responsible to read byte code and interpret into machine code (native code) and execute that machine code line by line. </p></blockquote><h4 id="2-JIT-Compiler"><a href="#2-JIT-Compiler" class="headerlink" title="2. JIT Compiler"></a>2. JIT Compiler</h4><blockquote><p>The JIT compiler has been introduced to compensate for the disadvantages of the interpreter. The main purpose of JIT compiler is to improve the performance. Internally JIT compiler maintains a separate count for every method. Whenever JVM across any method call, first that method will be interpreted normally by the interpreter and JIT compiler increments the corresponding count variable. </p></blockquote><ul><li><strong>Profiler</strong> which is the part of JIT compiler is responsible to identify Hotspot(Repeated Used Methods).</li></ul><h3 id="Java-Native-Interface-JNI"><a href="#Java-Native-Interface-JNI" class="headerlink" title="Java Native Interface(JNI)"></a>Java Native Interface(JNI)</h3><blockquote><p>JNI is acts as a bridge (Mediator) for java method calls and corresponding native libraries. </p></blockquote><h3 id="ÂÜÖÂ≠òÂ§ßÂ∞èËÆæÁΩÆ"><a href="#ÂÜÖÂ≠òÂ§ßÂ∞èËÆæÁΩÆ" class="headerlink" title="ÂÜÖÂ≠òÂ§ßÂ∞èËÆæÁΩÆ"></a>ÂÜÖÂ≠òÂ§ßÂ∞èËÆæÁΩÆ</h3><ul><li>Âú®ÂëΩ‰ª§Ë°å‰∏ãÁî®  java -Xmx1200m -XX:Max Perm Size=60m -version ÂëΩ‰ª§Êù•ËøõË°åÊµãËØïÔºåÁÑ∂ÂêéÈÄêÊ∏êÁöÑÂ¢ûÂ§ßXXXXÁöÑÂÄºÔºåÂ¶ÇÊûúÊâßË°åÊ≠£Â∏∏Â∞±Ë°®Á§∫ÊåáÂÆöÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂèØÁî®ÔºåÂê¶Âàô‰ºöÊâìÂç∞ÈîôËØØ‰ø°ÊÅØ„ÄÇ<br>ÊúÄÂêéÂæóÂà∞ÁöÑËôöÊãüÊú∫ÂÆûÈôÖÂàÜÈÖçÂà∞ÁöÑ<br>ÊÄªÂÜÖÂ≠òÂ§ßÂ∞è=Â†ÜÂÜÖÂ≠ò+ÈùûÂ†ÜÂÜÖÂ≠ò<br>1200mÔºö‰∏∫Â†ÜÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÂêéËÄÖÂèÇÊï∞ÂàôÊúâÊúÄÂ§ßÊï∞ÈôêÂà∂ÔºåÁΩë‰∏äÂæàÂ§öÊñáÁ´†ËÆ§‰∏∫ËøôÂ∞±ÊòØJVMÂÜÖÂ≠òÔºå -Xmx‰∏∫ËÆæÁΩÆÊúÄÂ§ßÂ†ÜÂÜÖÂ≠ò<br>60mÔºö ‰∏∫ÈùûÂ†ÜÂÜÖÂ≠òÂ§ßÂ∞èÔºå -XX: Max PermSizeÂÆû‰∏∫ Ê∞∏‰πÖÂüüÂÜÖÂ≠òÔºåÂú®Â†ÜÂÜÖÂ≠ò‰πãÂ§ñÔºåÂ±û‰∫éÈùûÂ†ÜÂÜÖÂ≠òÈÉ®ÂàÜÔºåjdk1.5ÊàëÊµã‰∫ÜÂ•ΩÂÉèÈªòËÆ§‰∏∫62mÔºåÂç≥ÂæóÂà∞ÈùûÂ†ÜÈÉ®ÂàÜÈªòËÆ§ÂÜÖÂ≠òÔºâ</li></ul><h1 id="ËøõÁ®ãÂÜÖÂ≠ò"><a href="#ËøõÁ®ãÂÜÖÂ≠ò" class="headerlink" title="ËøõÁ®ãÂÜÖÂ≠ò"></a>ËøõÁ®ãÂÜÖÂ≠ò</h1><h2 id="Êü•ÁúãËøõÁ®ãÂØπË±°Â§ßÂ∞è"><a href="#Êü•ÁúãËøõÁ®ãÂØπË±°Â§ßÂ∞è" class="headerlink" title="Êü•ÁúãËøõÁ®ãÂØπË±°Â§ßÂ∞è"></a>Êü•ÁúãËøõÁ®ãÂØπË±°Â§ßÂ∞è</h2><ul><li><p><strong>jmap -histo ËøõÁ®ãid</strong>  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmap -histo 123456 | head -n15</span><br></pre></td></tr></table></figure></li></ul><h2 id="Êü•ÁúãÂÜÖÂ≠òÂàÜÂ∏ÉÂèäÂõûÊî∂ÊÉÖÂÜµ"><a href="#Êü•ÁúãÂÜÖÂ≠òÂàÜÂ∏ÉÂèäÂõûÊî∂ÊÉÖÂÜµ" class="headerlink" title="Êü•ÁúãÂÜÖÂ≠òÂàÜÂ∏ÉÂèäÂõûÊî∂ÊÉÖÂÜµ"></a>Êü•ÁúãÂÜÖÂ≠òÂàÜÂ∏ÉÂèäÂõûÊî∂ÊÉÖÂÜµ</h2><ul><li><p><strong>jstat -gc ËøõÁ®ãid ÊØ´Áßí</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gc 1692 5000</span><br></pre></td></tr></table></figure><p>S0C: Young GenerationÁ¨¨‰∏Ä‰∏™survivor spaceÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>S1C: Young GenerationÁ¨¨‰∫å‰∏™survivor spaceÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>S0U: Young GenerationÁ¨¨‰∏Ä‰∏™Survivor spaceÂΩìÂâçÂ∑≤‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>S1U: Young GenerationÁ¨¨‰∫å‰∏™Survivor spaceÂΩìÂâçÂ∑≤Áªè‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>EC: Young Generation‰∏≠eden spaceÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>EU: Young Generation‰∏≠Eden spaceÂΩìÂâçÂ∑≤‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>OC: Old GenerationÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>OU: Old GenerationÂΩìÂâçÂ∑≤‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>MC: Permanent GenerationÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB)<br>MU: Permanent GenerationÂΩìÂâçÂ∑≤‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞è (kB).<br>YGC: ‰ªéÂêØÂä®Âà∞ÈááÊ†∑Êó∂Young Generation GCÁöÑÊ¨°Êï∞<br>YGCT: ‰ªéÂêØÂä®Âà∞ÈááÊ†∑Êó∂Young Generation GCÊâÄÁî®ÁöÑÊó∂Èó¥ (s).<br>FGC: ‰ªéÂêØÂä®Âà∞ÈááÊ†∑Êó∂Old Generation GCÁöÑÊ¨°Êï∞.<br>FGCT: ‰ªéÂêØÂä®Âà∞ÈááÊ†∑Êó∂Old Generation GCÊâÄÁî®ÁöÑÊó∂Èó¥ (s).<br>GCT: ‰ªéÂêØÂä®Âà∞ÈááÊ†∑Êó∂GCÊâÄÁî®ÁöÑÊÄªÊó∂Èó¥ (s).</p></li></ul><h2 id="Êü•ÁúãÂ†ÜÊ†àÂç†Áî®"><a href="#Êü•ÁúãÂ†ÜÊ†àÂç†Áî®" class="headerlink" title="Êü•ÁúãÂ†ÜÊ†àÂç†Áî®"></a>Êü•ÁúãÂ†ÜÊ†àÂç†Áî®</h2><ul><li><p><strong>jmap -heap ËøõÁ®ãid</strong>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">S0Ôºö Êñ∞Áîü‰ª£‰∏≠Survivor space 0Âå∫Â∑≤‰ΩøÁî®Á©∫Èó¥ÁöÑÁôæÂàÜÊØî</span><br><span class="line">S1Ôºö Êñ∞Áîü‰ª£‰∏≠Survivor space 1Âå∫Â∑≤‰ΩøÁî®Á©∫Èó¥ÁöÑÁôæÂàÜÊØî</span><br><span class="line">E ÔºöÊñ∞Áîü‰ª£Â∑≤‰ΩøÁî®Á©∫Èó¥ÁöÑÁôæÂàÜÊØî Eden space</span><br><span class="line">OÔºö ËÄÅÂπ¥‰ª£Â∑≤‰ΩøÁî®Á©∫Èó¥ÁöÑÁôæÂàÜÊØîÔºàP:  Ê∞∏‰πÖÂ∏¶Â∑≤‰ΩøÁî®Á©∫Èó¥ÁöÑÁôæÂàÜÊØîÔºâ</span><br><span class="line"></span><br><span class="line">MÔºö ÂÖÉÁ©∫Èó¥‰ΩøÁî®ÁôæÂàÜÊØî</span><br><span class="line">CCSÔºö ÂéãÁº©Á±ªÁ©∫Èó¥Âà©Áî®Áéá‰∏∫ÁôæÂàÜÊØî</span><br><span class="line">YGCÔºö YGCÊ¨°Êï∞</span><br><span class="line">YGCTÔºö Âπ¥ËΩª‰∏Ä‰ª£ÂûÉÂúæÊî∂ÈõÜÊó∂Èó¥</span><br><span class="line">FGCÔºö FGCÊ¨°Êï∞.</span><br><span class="line">FGCTÔºö ÂÆåÂÖ®ÂûÉÂúæÊî∂ÈõÜÊó∂Èó¥</span><br><span class="line">GCTÔºö ÂûÉÂúæÂõûÊî∂ÊÄªÊó∂Èó¥</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>maven snippet</title>
      <link href="/2018/01/09/maven%20snippet/"/>
      <url>/2018/01/09/maven%20snippet/</url>
      
        <content type="html"><![CDATA[<h3 id="ÂëΩ‰ª§‰ªãÁªç"><a href="#ÂëΩ‰ª§‰ªãÁªç" class="headerlink" title="ÂëΩ‰ª§‰ªãÁªç"></a>ÂëΩ‰ª§‰ªãÁªç</h3><ol><li><strong>mvn compile</strong> ÁºñËØë,Â∞ÜJava Ê∫êÁ®ãÂ∫èÁºñËØëÊàê class Â≠óËäÇÁ†ÅÊñá‰ª∂„ÄÇ</li><li><strong>mvn test</strong> ÊµãËØïÔºåÂπ∂ÁîüÊàêÊµãËØïÊä•Âëä</li><li><strong>mvn clean</strong> Â∞Ü‰ª•ÂâçÁºñËØëÂæóÂà∞ÁöÑÊóßÁöÑ class Â≠óËäÇÁ†ÅÊñá‰ª∂Âà†Èô§</li><li><strong>mvn pakage</strong> ÊâìÂåÖ,Âä®ÊÄÅ webÂ∑•Á®ãÊâì warÂåÖÔºåJavaÂ∑•Á®ãÊâì jar ÂåÖ„ÄÇ</li><li><strong>mvn install</strong> Â∞ÜÈ°πÁõÆÁîüÊàê jar ÂåÖÊîæÂú®‰ªìÂ∫ì‰∏≠Ôºå‰ª•‰æøÂà´ÁöÑÊ®°ÂùóË∞ÉÁî®</li><li><a href="https://www.cnblogs.com/zhangxh20/p/6298062.html">MavenÁöÑÂá†‰∏™Â∏∏Áî®plugin</a></li></ol><h3 id="tomcatÈ°πÁõÆÁöÑÈÉ®ÁΩ≤"><a href="#tomcatÈ°πÁõÆÁöÑÈÉ®ÁΩ≤" class="headerlink" title="tomcatÈ°πÁõÆÁöÑÈÉ®ÁΩ≤"></a>tomcatÈ°πÁõÆÁöÑÈÉ®ÁΩ≤</h3><ul><li>ÂèÇÁÖß <a href="https://blog.csdn.net/u012076316/article/details/46907823">tomcat ËÆæÁΩÆÁÉ≠ÈÉ®ÁΩ≤</a></li><li>ÂèÇÁÖß<a href="http://www.jb51.net/article/117334.htm">warÂíåwar explodedÂå∫Âà´ÂèäÈóÆÈ¢òÊ±áÊÄª</a></li><li>ÂèÇÁÖß<a href="https://www.jianshu.com/p/fb0ed26c35d5">tomcatÈÉ®ÁΩ≤ÁöÑ‰∏çÂêåÊñπÂºè</a></li><li>ÂêØÂä®È°πÁõÆÊó∂ÔºåÂ¶ÇÊûútestÂåÖÈáåÈù¢ÊúâÊµãËØïÁ®ãÂ∫èÔºå‰∏∫‰∫ÜÂøΩÁï•ÁºñËØëtestÊµãËØïÁ®ãÂ∫èÔºåÈúÄË¶ÅËøêË°åÂëΩ‰ª§ÊâìÂåÖ<code>mvn clean package -DskipTests</code>ÔºåÂè¶Â§ñËøêË°åtomcatÁöÑÊó∂ÂÄô‰ª•debugÊ®°ÂºèËøõË°åÂêØÂä®„ÄÇ</li></ul><h3 id="mavenÂ§öÈ°πÁõÆ‰πãÈó¥Áõ∏‰∫íÂºïÁî®"><a href="#mavenÂ§öÈ°πÁõÆ‰πãÈó¥Áõ∏‰∫íÂºïÁî®" class="headerlink" title="mavenÂ§öÈ°πÁõÆ‰πãÈó¥Áõ∏‰∫íÂºïÁî®"></a>mavenÂ§öÈ°πÁõÆ‰πãÈó¥Áõ∏‰∫íÂºïÁî®</h3><ul><li><p>Â∫îËØ•Âú®Áà∂ÁõÆÂΩï‰∏ãËøõË°åmaven installÊìç‰ΩúÔºå‰ºöËá™Âä®ÁîüÊàêÂ≠êÊ®°ÂùóÁöÑjarÊàñwarÂåÖ„ÄÇ</p></li><li><p><strong>Ëß£ÂÜ≥mavenÊó†Ê≥ïÂä†ËΩΩÊú¨Âú∞lib/‰∏ãÁöÑjarÂåÖÈóÆÈ¢ò(Á®ãÂ∫èÂåÖXXX‰∏çÂ≠òÂú®)</strong></p><ul><li><p>ÂéüÂõ†</p><p>Ëã•ËØ•Á®ãÂ∫èÂåÖÊòØÁ¨¨‰∏âÊñπÁöÑjarÔºåËß£ÂÜ≥ÊñπÊ°àÊòØËÆ©mavenÊó¢Âä†ËΩΩmavenÂ∫ì‰∏≠ÁöÑjarÂåÖÔºåÂèàË¶ÅÂä†ËΩΩÊú¨Âú∞WEB-INF/lib‰∏ãÁöÑjarÂåÖ„ÄÇ </p></li><li><p>Ëß£ÂÜ≥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.6.0&lt;/version&gt;</span><br><span class="line">    &lt;configuration&gt;</span><br><span class="line">        &lt;source&gt;1.8&lt;/source&gt;</span><br><span class="line">        &lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">        &lt;encoding&gt;UTF-8&lt;/encoding&gt;</span><br><span class="line">        &lt;compilerArguments&gt;</span><br><span class="line">            &lt;extdirs&gt;$&#123;project.basedir&#125;/src/main/webapp/WEB-INF/lib&lt;/extdirs&gt;</span><br><span class="line">        &lt;/compilerArguments&gt;</span><br><span class="line">    &lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="ÂàõÂª∫Êú¨Âú∞ÂºïÁî®ÂåÖ"><a href="#ÂàõÂª∫Êú¨Âú∞ÂºïÁî®ÂåÖ" class="headerlink" title="ÂàõÂª∫Êú¨Âú∞ÂºïÁî®ÂåÖ"></a>ÂàõÂª∫Êú¨Âú∞ÂºïÁî®ÂåÖ</h2><h4 id="1-Áõ¥Êé•ÂºïÁî®Êú¨Âú∞jar"><a href="#1-Áõ¥Êé•ÂºïÁî®Êú¨Âú∞jar" class="headerlink" title="1.Áõ¥Êé•ÂºïÁî®Êú¨Âú∞jar"></a>1.Áõ¥Êé•ÂºïÁî®Êú¨Âú∞jar</h4><p>Â∞ÜjarÊîæÂú®È°πÁõÆ‰∏≠Ôºå‰æãÂ¶ÇwebÈ°πÁõÆÂ∞±ÊîæÂú® <code>webapp/WEB-INF/lib</code>‰∏ãÈù¢<br>ÁÑ∂ÂêéÂÜç<code>pom.xml</code>‰∏≠Ê∑ªÂä†jarÁöÑ‰æùËµñÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;myjar&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;myjar&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">    &lt;systemPath&gt;$&#123;project.basedir&#125;/webapp/WEB-INF/lib/myjar-1.0.0.jar&lt;/systemPath&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="2-ÂÆâË£ÖÂà∞Êú¨Âú∞‰ªìÂ∫ì"><a href="#2-ÂÆâË£ÖÂà∞Êú¨Âú∞‰ªìÂ∫ì" class="headerlink" title="2.ÂÆâË£ÖÂà∞Êú¨Âú∞‰ªìÂ∫ì"></a>2.ÂÆâË£ÖÂà∞Êú¨Âú∞‰ªìÂ∫ì</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -Dfile=xxx.jar -DgroupId=xx.xxx.xx -DartifactId=xx -Dversion=xx -Dpackaging=jar</span><br><span class="line"></span><br><span class="line">ÂèÇÊï∞ËØ¥Êòé:</span><br><span class="line">-DgroupId:ÂØπÂ∫îdependencyÁöÑgroupId</span><br><span class="line">-DartifactId:ÂØπÂ∫îdependencyÁöÑartifactId</span><br><span class="line">-Dversion:ÂØπÂ∫îdependency‰∏≠ÁöÑversion</span><br><span class="line">-Dpackaging:ÂÆâË£ÖÁöÑÁ±ªÂûãÔºåjarÊàñËÄÖpom</span><br><span class="line">-Dfile:Ë¶ÅÂÆâË£ÖÁöÑjarÊñá‰ª∂ÁöÑË∑ØÂæÑ</span><br></pre></td></tr></table></figure><h2 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h2><ul><li><p>compile<br>ÈªòËÆ§Â∞±ÊòØcompileÔºå‰ªÄ‰πàÈÉΩ‰∏çÈÖçÁΩÆ‰πüÂ∞±ÊòØÊÑèÂë≥ÁùÄcompile„ÄÇcompileË°®Á§∫Ë¢´‰æùËµñÈ°πÁõÆÈúÄË¶ÅÂèÇ‰∏éÂΩìÂâçÈ°πÁõÆÁöÑÁºñËØëÔºåÂΩìÁÑ∂ÂêéÁª≠ÁöÑÊµãËØïÔºåËøêË°åÂë®Êúü‰πüÂèÇ‰∏éÂÖ∂‰∏≠ÔºåÊòØ‰∏Ä‰∏™ÊØîËæÉÂº∫ÁöÑ‰æùËµñ„ÄÇÊâìÂåÖÁöÑÊó∂ÂÄôÈÄöÂ∏∏ÈúÄË¶ÅÂåÖÂê´ËøõÂéª„ÄÇ</p></li><li><p>test<br>scope‰∏∫testË°®Á§∫‰æùËµñÈ°πÁõÆ‰ªÖ‰ªÖÂèÇ‰∏éÊµãËØïÁõ∏ÂÖ≥ÁöÑÂ∑•‰ΩúÔºåÂåÖÊã¨ÊµãËØï‰ª£Á†ÅÁöÑÁºñËØëÔºåÊâßË°å„ÄÇÊØîËæÉÂÖ∏ÂûãÁöÑÂ¶Çjunit„ÄÇ</p></li><li><p>runtime<br>runntimeË°®Á§∫Ë¢´‰æùËµñÈ°πÁõÆÊó†ÈúÄÂèÇ‰∏éÈ°πÁõÆÁöÑÁºñËØëÔºå‰∏çËøáÂêéÊúüÁöÑÊµãËØïÂíåËøêË°åÂë®ÊúüÈúÄË¶ÅÂÖ∂ÂèÇ‰∏é„ÄÇ‰∏écompileÁõ∏ÊØîÔºåË∑≥ËøáÁºñËØëËÄåÂ∑≤ÔºåËØ¥ÂÆûËØùÂú®ÁªàÁ´ØÁöÑÈ°πÁõÆÔºàÈùûÂºÄÊ∫êÔºå‰ºÅ‰∏öÂÜÖÈÉ®Á≥ªÁªüÔºâ‰∏≠ÔºåÂíåcompileÂå∫Âà´‰∏çÊòØÂæàÂ§ß„ÄÇÊØîËæÉÂ∏∏ËßÅÁöÑÂ¶ÇJSR√ó√ó√óÁöÑÂÆûÁé∞ÔºåÂØπÂ∫îÁöÑAPI jarÊòØcompileÁöÑÔºåÂÖ∑‰ΩìÂÆûÁé∞ÊòØruntimeÁöÑÔºåcompileÂè™ÈúÄË¶ÅÁü•ÈÅìÊé•Âè£Â∞±Ë∂≥Â§ü‰∫Ü„ÄÇoracle jdbcÈ©±Âä®Êû∂ÂåÖÂ∞±ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠êÔºå‰∏ÄËà¨scope‰∏∫runntime„ÄÇÂè¶Â§ñrunntimeÁöÑ‰æùËµñÈÄöÂ∏∏ÂíåoptionalÊê≠ÈÖç‰ΩøÁî®Ôºåoptional‰∏∫true„ÄÇÊàëÂèØ‰ª•Áî®AÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®BÂÆûÁé∞„ÄÇ</p></li><li><p>provided<br>providedÊÑèÂë≥ÁùÄÊâìÂåÖÁöÑÊó∂ÂÄôÂèØ‰ª•‰∏çÁî®ÂåÖËøõÂéªÔºåÂà´ÁöÑËÆæÊñΩ(Web Container)‰ºöÊèê‰æõ„ÄÇ‰∫ãÂÆû‰∏äËØ•‰æùËµñÁêÜËÆ∫‰∏äÂèØ‰ª•ÂèÇ‰∏éÁºñËØëÔºåÊµãËØïÔºåËøêË°åÁ≠âÂë®Êúü„ÄÇÁõ∏ÂΩì‰∫écompileÔºå‰ΩÜÊòØÂú®ÊâìÂåÖÈò∂ÊÆµÂÅö‰∫ÜexcludeÁöÑÂä®‰Ωú„ÄÇ</p></li><li><p>system<br>‰ªéÂèÇ‰∏éÂ∫¶Êù•ËØ¥ÔºåÂíåprovidedÁõ∏ÂêåÔºå‰∏çËøáË¢´‰æùËµñÈ°π‰∏ç‰ºö‰ªémaven‰ªìÂ∫ìÊäìÔºåËÄåÊòØ‰ªéÊú¨Âú∞Êñá‰ª∂Á≥ªÁªüÊãøÔºå‰∏ÄÂÆöÈúÄË¶ÅÈÖçÂêàsystemPathÂ±ûÊÄß‰ΩøÁî®</p></li></ul><h2 id="‰æùËµñ‰º†ÈÄíÂéüÂàô"><a href="#‰æùËµñ‰º†ÈÄíÂéüÂàô" class="headerlink" title="‰æùËµñ‰º†ÈÄíÂéüÂàô"></a>‰æùËµñ‰º†ÈÄíÂéüÂàô</h2><p>Âá†‰πéÊâÄÊúâÁöÑJarÂåÖÂÜ≤Á™ÅÈÉΩÂíå‰æùËµñ‰º†ÈÄíÂéüÂàôÊúâÂÖ≥ÔºåÊâÄ‰ª•Êàë‰ª¨ÂÖàËØ¥Maven‰∏≠ÁöÑ‰æùËµñ‰º†ÈÄíÂéüÂàôÔºö</p><p><strong>ÊúÄÁü≠Ë∑ØÂæÑ‰ºòÂÖàÂéüÂàô</strong></p><p>ÂÅáÂ¶ÇÂºïÂÖ•‰∫Ü2‰∏™JarÂåÖAÂíåBÔºåÈÉΩ‰º†ÈÄí‰æùËµñ‰∫ÜZËøô‰∏™JarÂåÖÔºö</p><p>A -&gt; X -&gt; Y -&gt; Z(2.5)<br>B -&gt; X -&gt; Z(2.0)</p><p>ÈÇ£ÂÖ∂ÂÆûÊúÄÁªàÁîüÊïàÁöÑÊòØZ(2.0)Ëøô‰∏™ÁâàÊú¨„ÄÇÂõ†‰∏∫‰ªñÁöÑË∑ØÂæÑÊõ¥Âä†Áü≠„ÄÇÂ¶ÇÊûúÊàëÊú¨Âú∞ÂºïÁî®‰∫ÜZ(3.0)ÁöÑÂåÖÔºåÈÇ£ÁîüÊïàÁöÑÂ∞±ÊòØ3.0ÁöÑÁâàÊú¨„ÄÇ‰∏ÄÊ†∑ÁöÑÈÅìÁêÜ„ÄÇ</p><p><strong>ÊúÄÂÖàÂ£∞Êòé‰ºòÂÖàÂéüÂàô</strong></p><p>Â¶ÇÊûúË∑ØÂæÑÈïøÁü≠‰∏ÄÊ†∑Ôºå‰ºòÂÖàÈÄâÊúÄÂÖàÂ£∞ÊòéÁöÑÈÇ£‰∏™„ÄÇ</p><p>A -&gt; Z(3.0)<br>B -&gt; Z(2.5)</p><p>ËøôÈáåAÊúÄÂÖàÂ£∞ÊòéÔºåÊâÄ‰ª•‰º†ÈÄíËøáÊù•ÁöÑZÈÄâÊã©Áî®3.0ÁâàÊú¨ÁöÑ„ÄÇ</p><h2 id="ÂºïÁî®Êú¨Âú∞jarÂåÖ‰æùËµñ"><a href="#ÂºïÁî®Êú¨Âú∞jarÂåÖ‰æùËµñ" class="headerlink" title="ÂºïÁî®Êú¨Âú∞jarÂåÖ‰æùËµñ"></a>ÂºïÁî®Êú¨Âú∞jarÂåÖ‰æùËµñ</h2><ol><li><p>jarÂåÖÊîæÂÖ•È°πÁõÆÊåáÂÆö‰ΩçÁΩÆ ieÔºö${project.basedir}/src/main/resources/lib/xxx.jar</p></li><li><p>pomÊñá‰ª∂ÂºïÂÖ•‰æùËµñ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdk.core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources/lib/xxx.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>systemPathËøô‰∏™Ë∑ØÂæÑÊòØjarÂåÖÁöÑË∑ØÂæÑ„ÄÇ${project.basedir}Âè™ÊòØ‰∏Ä‰∏™Á≥ªÁªüËá™Â∑±ÁöÑÂ∏∏Èáè„ÄÇ</p></blockquote></li><li><p>Âú®Â∞ÜÈ°πÁõÆÁî®MavenÊâìÂåÖÊòØÈúÄË¶ÅÂú® <plugin> Ê†áÁ≠æ‰∏≠Âä†ÂÖ•:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includeSystemScope</span>&gt;</span>true<span class="tag">&lt;/<span class="name">includeSystemScope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="init-project"><a href="#init-project" class="headerlink" title="init project"></a>init project</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate -DgroupId=brook.hbase -DartifactId=hbase-client -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.4 -DinteractiveMode=false</span><br></pre></td></tr></table></figure><h2 id="ÂëΩ‰ª§ÂêØÂä®springboot"><a href="#ÂëΩ‰ª§ÂêØÂä®springboot" class="headerlink" title="ÂëΩ‰ª§ÂêØÂä®springboot"></a>ÂëΩ‰ª§ÂêØÂä®springboot</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><h2 id="add-git-commit-info-to-jar-package"><a href="#add-git-commit-info-to-jar-package" class="headerlink" title="add git commit info to jar package"></a>add git commit info to jar package</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pl.project13.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>git-commit-id-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>get-the-git-infos<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>revision<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dotGitDirectory</span>&gt;</span>$&#123;project.basedir&#125;/.git<span class="tag">&lt;/<span class="name">dotGitDirectory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prefix</span>&gt;</span>git<span class="tag">&lt;/<span class="name">prefix</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>false<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generateGitPropertiesFile</span>&gt;</span>true&lt;/generateGitPropertiesFile</span><br><span class="line">  <span class="tag">&lt;<span class="name">generateGitPropertiesFilename</span>&gt;</span>$&#123;project.build.outputDirectory&#125;/git.properties<span class="tag">&lt;/<span class="name">generateGitPropertiesFilename</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">format</span>&gt;</span>json<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gitDescribe</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">skip</span>&gt;</span>false<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">always</span>&gt;</span>false<span class="tag">&lt;/<span class="name">always</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dirty</span>&gt;</span>-dirty<span class="tag">&lt;/<span class="name">dirty</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gitDescribe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ÁîüÊàêÁöÑ<code>git.properties</code>‰ºöÂú®jarÂåÖ‰ΩçÁΩÆ <code>BOOT-INF/classes/git.properties</code></p></blockquote><h1 id="Áõ∏ÂÖ≥ÈóÆÈ¢ò"><a href="#Áõ∏ÂÖ≥ÈóÆÈ¢ò" class="headerlink" title="Áõ∏ÂÖ≥ÈóÆÈ¢ò"></a>Áõ∏ÂÖ≥ÈóÆÈ¢ò</h1><ul><li><p><a href="https://www.cnblogs.com/baixiaoshuai/p/8939989.html">idea‰∏≠ÁöÑmavenÊ®°ÂùóÂèòÊàêÁÅ∞Ëâ≤ÁöÑÂèØËÉΩÂéüÂõ†</a></p></li><li><p><a href="https://blog.csdn.net/qq_38663729/article/details/78275209">jarÂåÖÂíåwarÂåÖÁöÑ‰ªãÁªç‰∏éÂå∫Âà´</a></p></li><li><p>Áî±‰∫éÊ≤°Êúâmvn installÊìç‰ΩúÔºåÊ≤°ÊúâÂú®Êú¨Âú∞‰∏ãËΩΩ‰æùËµñÂåÖÂà∞libÁõÆÂΩï‰∏ãÔºåÊâÄ‰ª•ÂêØÂä®È°πÁõÆÔºå‰ºöÊèêÁ§∫java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListenerÈîôËØØ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring aop</title>
      <link href="/2017/12/18/spring%20aop/"/>
      <url>/2017/12/18/spring%20aop/</url>
      
        <content type="html"><![CDATA[<h3 id="Architectural"><a href="#Architectural" class="headerlink" title="Architectural"></a>Architectural</h3><p><img src="https://www.baeldung.com/wp-content/uploads/2017/11/Program_Execution.jpg"></p><h3 id="Business-Object"><a href="#Business-Object" class="headerlink" title="Business Object"></a>Business Object</h3><blockquote><p><strong>A business object is a normal class which has a normal business logic.</strong></p></blockquote><h3 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h3><blockquote><p><strong>An aspect is a modularization of a concern that cuts across multiple classes.</strong></p></blockquote><h3 id="JoinPoint"><a href="#JoinPoint" class="headerlink" title="JoinPoint"></a>JoinPoint</h3><blockquote><p><strong>A Joinpoint is a point during the execution of a program, such as execution of a method or the handling of an exception.</strong></p></blockquote><p>In Spring AOP, a <em>JoinPoint</em> always represents a method execution.</p><h3 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h3><blockquote><p><strong>A Pointcut is a predicate that helps match an <em>Advice</em> to be applied by an <em>Aspect</em> at a particular <em>JoinPoint</em>.</strong></p></blockquote><p>The Advice is often associated with a <em>Pointcut</em> expression and runs at any <em>Joinpoint</em> matched by the Pointcut.</p><h3 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h3><blockquote><p><strong>An advice is an action taken by an aspect at a particular <em>Joinpoint</em>. Different types of advice include <em>‚Äúaround,‚Äù ‚Äúbefore‚Äù</em> and <em>‚Äúafter‚Äù</em> advice.</strong></p></blockquote><p>In Spring, an <em>Advice</em> is modeled as an interceptor, maintaining a chain of interceptors around the <em>Joinpoint</em>.</p><hr><h3 id="Example-Wiring-Business-Object-and-Aspect"><a href="#Example-Wiring-Business-Object-and-Aspect" class="headerlink" title="Example:Wiring Business Object and Aspect"></a>Example:Wiring Business Object and Aspect</h3><ul><li><p>Business Object</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleAdder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>a simple Aspect</p><p>Unified logging can be an example of such cross-cutting concern:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdderAfterReturnAspect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturn</span><span class="params">(Object returnValue)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;value return was &#123;&#125;&quot;</span>,  returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>config excerpt</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sampleAdder&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.xxx.SampleAdder&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;doAfterReturningAspect&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;org.xxx.AdderAfterReturnAspect&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;aspects&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;doAfterReturningAspect&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointCutAfterReturning&quot;</span> <span class="attr">expression</span>=</span></span><br><span class="line"><span class="tag">         <span class="string">&quot;execution(* org.xxx.SampleAdder+.*(..))&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturn&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">returning</span>=<span class="string">&quot;returnValue&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCutAfterReturning&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><blockquote><p>‰æùËµñÊ≥®ÂÖ•DIÊúâÂä©‰∫éÂ∫îÁî®ÂØπË±°‰πãÈó¥ÁöÑËß£ËÄ¶ÔºåËÄåAOPÂèØ‰ª•ÂÆûÁé∞Ê®™ÂàáÂÖ≥Ê≥®ÁÇπ‰∏éÂÆÉ‰ª¨ÊâÄÂΩ±ÂìçÁöÑÂØπË±°‰πãÈó¥ÁöÑËß£ËÄ¶</p></blockquote><ul><li><p>ÈÄöÁü•Advice</p><blockquote><p>ÂàáÈù¢ÁöÑÂ∑•‰ΩúË¢´Áß∞‰∏∫ÈÄöÁü•ÔºåÈÄöÁü•ÂÆö‰πâ‰∫ÜÂàáÈù¢ÊòØ‰ªÄ‰πà‰ª•Âèä‰ΩïÊó∂‰ΩøÁî®„ÄÇ</p></blockquote><ul><li>ÂâçÁΩÆÈÄöÁü•ÔºàBeforeÔºâÔºöÂú®ÁõÆÊ†áÊñπÊ≥ïË¢´Ë∞ÉÁî®‰πãÂâçË∞ÉÁî®ÈÄöÁü•ÂäüËÉΩ</li><li>ÂêéÁΩÆÈÄöÁü•ÔºàAfterÔºâÔºöÂú®ÁõÆÊ†áÊñπÊ≥ïÂÆåÊàê‰πãÂêéË∞ÉÁî®ÈÄöÁü•ÔºåÊ≠§Êó∂‰∏ç‰ºöÂÖ≥ÂøÉÊñπÊ≥ïÁöÑËæìÂá∫</li><li>ËøîÂõûÈÄöÁü•ÔºàAfter-returningÔºâÔºöÂú®ÁõÆÊ†áÊñπÊ≥ïÊàêÂäüÊâßË°å‰πãÂêéË∞ÉÁî®ÈÄöÁü•</li><li>ÂºÇÂ∏∏ÈÄöÁü•ÔºàAfter-throwingÔºâÔºöÂú®ÁõÆÊ†áÊñπÊ≥ïÊäõÂá∫ÂºÇÂ∏∏ÂêéË∞ÉÁî®ÈÄöÁü•</li><li>ÁéØÁªïÈÄöÁü•ÔºàAroundÔºâÔºöÈÄöÁü•ÂåÖË£π‰∫ÜË¢´ÈÄöÁü•ÁöÑÊñπÊ≥ïÔºåÂú®Ë¢´ÈÄöÁü•ÁöÑÊñπÊ≥ïË∞ÉÁî®‰πãÂâçÂíåË∞ÉÁî®‰πãÂêéÊâßË°åËá™ÂÆö‰πâÁöÑË°å‰∏∫„ÄÇ</li></ul></li><li><p>ËøûÊé•ÁÇπJoin point</p><blockquote><p>ËøûÊé•ÁÇπÊòØÂ∫îÁî®Á®ãÂ∫èÁöÑÁÇπÔºåÂèØ‰æõÊèíÂÖ•ÂàáÈù¢</p><p>ÊàëÁêÜËß£ÁöÑÊòØÁ®ãÂ∫èÁöÑÊüêÂ§ÑÔºåÊàñËÄÖ‰ªªÊÑè‰∏ÄÂ§ÑÈÉΩÂèØ‰ª•Áß∞‰Ωú‰∏∫ËøûÊé•ÁÇπ</p></blockquote></li><li><p>ÂàáÁÇπPointcut</p><blockquote><p>ÂàáÁÇπÊúâÂä©‰∫éÁº©Â∞èÂàáÈù¢ÊâÄÈÄöÁü•ÁöÑËøûÊé•ÁÇπÁöÑËåÉÂõ¥</p><p>Â¶ÇÊûúAdviceÂÆö‰πâ‰∫ÜÂàáÈù¢ÁöÑwhatÂíåwhen,ÈÇ£‰πàpointcutÂ∞±ÂÆö‰πâ‰∫Üwhere</p></blockquote></li><li><p>ÂàáÈù¢Aspect</p><blockquote><p>AspectÊòØAdviceÂíåPointcutÁöÑÁªìÂêà</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue snippet</title>
      <link href="/2017/12/07/vue%20snippet/"/>
      <url>/2017/12/07/vue%20snippet/</url>
      
        <content type="html"><![CDATA[<ul><li><p>vueÂÆû‰æãÂàùÂßãÂåñËøáÁ®ãÔºö</p><ul><li>ËÆæÁΩÆÊï∞ÊçÆÁõëÂê¨</li><li>ÁºñËØëÊ®°Êùø</li><li>Â∞ÜÂÆû‰æãÊåÇËΩΩÂà∞DOMÂπ∂Âú®Êï∞ÊçÆÂèòÂåñÊó∂Êõ¥Êñ∞DOMÁ≠â</li></ul></li><li><p>ÁîüÂëΩÂë®ÊúüÈí©Â≠êÔºöÊèê‰æõÁî®Êà∑Âú®‰∏çÂêåÈò∂ÊÆµÊ∑ªÂä†Ëá™Â∑±ÁöÑ‰ª£Á†ÅÁöÑÊú∫‰ºö</p><ul><li>createdÔºåÁî®Êù•ÂÆû‰æãË¢´ÂàõÂª∫‰πãÂêéÊâßË°å‰ª£Á†Å</li><li>mounted,</li><li>updated,</li><li>destoryed</li></ul></li><li><p>Êåá‰ª§ÔºàDirectivesÔºâÊòØÂ∏¶Êúâ<code>v-</code>ÂâçÁºÄÁöÑÁâπÊÆäÁâπÊÄß„ÄÇÊåá‰ª§ÁâπÊÄßÁöÑÂÄºÈ¢ÑÊúüÊòØÂçï‰∏™JavaScriptË°®ËææÂºèÔºà<code>v-for</code>ÊòØ‰æãÂ§ñÊÉÖÂÜµÔºâÔºåÊåá‰ª§ÁöÑËÅåË¥£ÊòØÔºöÂΩìË°®ËææÂºèÁöÑÂÄºÊîπÂèòÊó∂ÔºåÂ∞ÜÂÖ∂‰∫ßÁîüÁöÑËøûÂ∏¶ÂΩ±ÂìçÔºåÂìçÂ∫îÂºèÂú∞‰ΩúÁî®‰∫éDOM„ÄÇ</p><ul><li><p><code>v-bind</code>ÔºåÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™ÂèÇÊï∞ÔºåÁî®‰∫éÂìçÂ∫îÂºèÂú∞Êõ¥Êñ∞HTMLÁâπÊÄß„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ÂÆåÊï¥ËØ≠Ê≥ï --&gt;</span><br><span class="line">&lt;a v-bind:href=&quot;url&quot;&gt;...&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Áº©ÂÜô --&gt;</span><br><span class="line">&lt;a :href=&quot;url&quot;&gt;...&lt;/a&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>v-on</code>ÔºåÁî®‰∫éÁõëÂê¨DOM‰∫ã‰ª∂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ÂÆåÊï¥ËØ≠Ê≥ï --&gt;</span><br><span class="line">&lt;a v-on:click=&quot;doSomething&quot;&gt;...&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Áº©ÂÜô --&gt;</span><br><span class="line">&lt;a @click=&quot;doSomething&quot;&gt;...&lt;/a&gt;</span><br></pre></td></tr></table></figure></li><li><p>‰øÆÈ•∞Á¨¶<code>v-on:submit.prevent</code>,<code>.prevent</code> ‰øÆÈ•∞Á¨¶ÂëäËØâ <code>v-on</code> Êåá‰ª§ÂØπ‰∫éËß¶ÂèëÁöÑ‰∫ã‰ª∂Ë∞ÉÁî® <code>event.preventDefault()</code>„ÄÇ</p></li></ul></li></ul><hr><ul><li><p>ËÆ°ÁÆóÂ±ûÊÄß</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;example&quot;&gt;</span><br><span class="line">  &lt;p&gt;Original message: &quot;&#123;&#123; message &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &#x27;#example&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: &#x27;Hello&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // ËÆ°ÁÆóÂ±ûÊÄßÁöÑ getter</span><br><span class="line">    reversedMessage: function () &#123;</span><br><span class="line">      // `this` ÊåáÂêë vm ÂÆû‰æã</span><br><span class="line">      return this.message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>ËÆ°ÁÆóÂ±ûÊÄßÁºìÂ≠òvsÊñπÊ≥ï</p><p>Âú®ÊñπÊ≥ï‰∏≠ÂÆûÁé∞ÂêåËÆ°ÁÆóÂ±ûÊÄßÂêåÊ†∑ÁöÑÊïàÊûú</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Reversed message: &quot;&#123;&#123; reversedMessage() &#125;&#125;&quot;&lt;/p&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Âú®ÁªÑ‰ª∂‰∏≠</span><br><span class="line">methods: &#123;</span><br><span class="line">  reversedMessage: function () &#123;</span><br><span class="line">    return this.message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ËÆ°ÁÆóÂ±ûÊÄßÊòØÂü∫‰∫éÂÆÉ‰ª¨ÁöÑ‰æùËµñËøõË°åÁºìÂ≠òÁöÑ</strong>„ÄÇÂè™Âú®Áõ∏ÂÖ≥‰æùËµñÂèëÁîüÊîπÂèòÊó∂ÂÆÉ‰ª¨Êâç‰ºöÈáçÊñ∞Ê±ÇÂÄº„ÄÇ </p></li><li><p>ËÆ°ÁÆóÂ±ûÊÄßvs‰æ¶Âê¨Â±ûÊÄß</p><p>‰æ¶Âê¨Â±ûÊÄßÁöÑÁî®Ê≥ïÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;demo&quot;&gt;&#123;&#123; fullName &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &#x27;#demo&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#x27;Foo&#x27;,</span><br><span class="line">    lastName: &#x27;Bar&#x27;,</span><br><span class="line">    fullName: &#x27;Foo Bar&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    firstName: function (val) &#123;</span><br><span class="line">      this.fullName = val + &#x27; &#x27; + this.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    lastName: function (val) &#123;</span><br><span class="line">      this.fullName = this.firstName + &#x27; &#x27; + val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>‰∏éËÆ°ÁÆóÂ±ûÊÄßÁöÑÁâàÊú¨ËøõË°åÂØπÊØîÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &#x27;#demo&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#x27;Foo&#x27;,</span><br><span class="line">    lastName: &#x27;Bar&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    fullName: function () &#123;</span><br><span class="line">      return this.firstName + &#x27; &#x27; + this.lastName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ËÆ°ÁÆóÂ±ûÊÄßÁöÑsetter</p><p>ËÆ°ÁÆóÂ±ûÊÄßÈªòËÆ§Âè™Êúâ getter Ôºå‰∏çËøáÂú®ÈúÄË¶ÅÊó∂‰Ω†‰πüÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™ setter Ôºö </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// ...</span><br><span class="line">computed: &#123;</span><br><span class="line">  fullName: &#123;</span><br><span class="line">    // getter</span><br><span class="line">    get: function () &#123;</span><br><span class="line">      return this.firstName + &#x27; &#x27; + this.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    // setter</span><br><span class="line">    set: function (newValue) &#123;</span><br><span class="line">      var names = newValue.split(&#x27; &#x27;)</span><br><span class="line">      this.firstName = names[0]</span><br><span class="line">      this.lastName = names[names.length - 1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// ...</span><br></pre></td></tr></table></figure><p>Áé∞Âú®ÂÜçËøêË°å <code>vm.fullName = &#39;John Doe&#39;</code> Êó∂Ôºåsetter ‰ºöË¢´Ë∞ÉÁî®Ôºå<code>vm.firstName</code> Âíå <code>vm.lastName</code> ‰πü‰ºöÁõ∏Â∫îÂú∞Ë¢´Êõ¥Êñ∞„ÄÇ </p></li></ul></li><li><p>‰æ¶Âê¨Âô®</p><p>‰ΩøÁî®Âú∫ÊôØÔºöÂΩìÈúÄË¶ÅÂú®Êï∞ÊçÆÂèòÂåñÊó∂ÊâßË°åÂºÇÊ≠•ÊàñÂºÄÈîÄËæÉÂ§ßÁöÑÊìç‰ΩúÊó∂ </p></li></ul><hr><ul><li><p>Êù°‰ª∂Ê∏≤Êüì</p><p><code>v-if</code></p></li><li><p>Â±ïÁ§∫ÂÖÉÁ¥†</p><p><code>v-show</code>ÔºåÂÆÉÂè™ÊòØÁÆÄÂçïÂú∞ÂàáÊç¢ÂÖÉÁ¥†ÁöÑcssÂ±ûÊÄß<code>display</code></p><p>**<em>Ê≥®ÊÑè</em>Ôºö<code>v-show</code> ‰∏çÊîØÊåÅ <code>&lt;template&gt;</code> ÂÖÉÁ¥†Ôºå‰πü‰∏çÊîØÊåÅ <code>v-else</code>„ÄÇ </p><ul><li><p><code>v-if</code>vs<code>v-show</code></p><p>‰∏ÄËà¨Êù•ËØ¥Ôºå<code>v-if</code> ÊúâÊõ¥È´òÁöÑÂàáÊç¢ÂºÄÈîÄÔºåËÄå <code>v-show</code> ÊúâÊõ¥È´òÁöÑÂàùÂßãÊ∏≤ÊüìÂºÄÈîÄ„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÈúÄË¶ÅÈùûÂ∏∏È¢ëÁπÅÂú∞ÂàáÊç¢ÔºåÂàô‰ΩøÁî® <code>v-show</code> ËæÉÂ•ΩÔºõÂ¶ÇÊûúÂú®ËøêË°åÊó∂Êù°‰ª∂ÂæàÂ∞ëÊîπÂèòÔºåÂàô‰ΩøÁî® <code>v-if</code> ËæÉÂ•Ω„ÄÇ </p></li></ul></li><li><p>ÂàóË°®Ê∏≤Êüì</p><p><code>v-for</code></p><ul><li><p>ÂÆû‰æã‰∏Ä</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;example-1&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">    &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var example1 = new Vue(&#123;</span><br><span class="line">  el: &#x27;#example-1&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [</span><br><span class="line">      &#123; message: &#x27;Foo&#x27; &#125;,</span><br><span class="line">      &#123; message: &#x27;Bar&#x27; &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ÂÆû‰æã‰∫å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;example-2&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;(item, index) in items&quot;&gt;</span><br><span class="line">    &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var example2 = new Vue(&#123;</span><br><span class="line">  el: &#x27;#example-2&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    parentMessage: &#x27;Parent&#x27;,</span><br><span class="line">    items: [</span><br><span class="line">      &#123; message: &#x27;Foo&#x27; &#125;,</span><br><span class="line">      &#123; message: &#x27;Bar&#x27; &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ÂèØ‰ª•Áî® of Êõø‰ª£ in ‰Ωú‰∏∫ÂàÜÈöîÁ¨¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;item of items&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li><p>ÂÆû‰æã‰∏â</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#x27;#v-for-object&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    object: &#123;</span><br><span class="line">      firstName: &#x27;John&#x27;,</span><br><span class="line">      lastName: &#x27;Doe&#x27;,</span><br><span class="line">      age: 30</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;v-for-object&quot; class=&quot;demo&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;value in object&quot;&gt;</span><br><span class="line">    &#123;&#123; value &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;(value, key) in object&quot;&gt;</span><br><span class="line">  &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;(value, key, index) in object&quot;&gt;</span><br><span class="line">  &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>Êï∞ÁªÑÊõ¥Êñ∞Ê£ÄÊµã</p><ul><li>ÂèòÂºÇÊñπÊ≥ïÔºå‰ºöÊîπÂèòË¢´Ëøô‰∫õÊñπÊ≥ïË∞ÉÁî®ÁöÑÂéüÂßãÊï∞ÁªÑ <ul><li><code>push()</code></li><li><code>pop()</code></li><li><code>shift()</code></li><li><code>unshift()</code></li><li><code>splice()</code></li><li><code>sort()</code></li><li><code>reverse()</code></li></ul></li><li>‰πüÊúâÈùûÂèòÂºÇ (non-mutating method) ÊñπÊ≥ïÔºå‰æãÂ¶ÇÔºö<code>filter()</code>, <code>concat()</code> Âíå <code>slice()</code> „ÄÇËøô‰∫õ‰∏ç‰ºöÊîπÂèòÂéüÂßãÊï∞ÁªÑÔºå‰ΩÜ<strong>ÊÄªÊòØËøîÂõû‰∏Ä‰∏™Êñ∞Êï∞ÁªÑ</strong>„ÄÇ</li></ul><hr></li><li><p>vueÁªÑ‰ª∂ÂÆû‰æã</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ÂÆö‰πâ‰∏Ä‰∏™Âêç‰∏∫ button-counter ÁöÑÊñ∞ÁªÑ‰ª∂</span><br><span class="line">Vue.component(&#x27;button-counter&#x27;, &#123;</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: &#x27;&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>propÂèØ‰ª•Âú®ÁªÑ‰ª∂‰∏äÊ≥®ÂÜåÁöÑ‰∏Ä‰∫õËá™ÂÆö‰πâÁâπÊÄß</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;blog-post&#x27;, &#123;</span><br><span class="line">  props: [&#x27;title&#x27;],</span><br><span class="line">  template: &#x27;&lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post title=&quot;My journey with Vue&quot;&gt;&lt;/blog-post&gt;</span><br><span class="line">&lt;blog-post title=&quot;Blogging with Vue&quot;&gt;&lt;/blog-post&gt;</span><br><span class="line">&lt;blog-post title=&quot;Why Vue is so fun&quot;&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></table></figure></li><li><p>Ë∞ÉÁî®ÂÜÖÂª∫ÁöÑ <a href="https://cn.vuejs.org/v2/api/#vm-emit"><strong>$emit</strong> ÊñπÊ≥ï</a>Âπ∂‰º†ÂÖ•‰∫ã‰ª∂ÁöÑÂêçÂ≠óÔºåÊù•ÂêëÁà∂Á∫ßÁªÑ‰ª∂Ëß¶Âèë‰∏Ä‰∏™‰∫ã‰ª∂Ôºö </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&quot;$emit(&#x27;enlarge-text&#x27;)&quot;&gt;</span><br><span class="line">  Enlarge text</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>ÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•Áî® <code>v-on</code> Âú®ÂçöÊñáÁªÑ‰ª∂‰∏äÁõëÂê¨Ëøô‰∏™‰∫ã‰ª∂ÔºåÂ∞±ÂÉèÁõëÂê¨‰∏Ä‰∏™ÂéüÁîü DOM ‰∫ã‰ª∂‰∏ÄÊ†∑ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post</span><br><span class="line">...</span><br><span class="line">v-on:enlarge-text=&quot;postFontSize += 0.1&quot;</span><br><span class="line">&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="ÁªÑ‰ª∂Ê≥®ÂÜå"><a href="#ÁªÑ‰ª∂Ê≥®ÂÜå" class="headerlink" title="ÁªÑ‰ª∂Ê≥®ÂÜå"></a>ÁªÑ‰ª∂Ê≥®ÂÜå</h3><ul><li><p>ÂÖ®Â±ÄÊ≥®ÂÜå</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;my-component-name&#x27;, &#123;</span><br><span class="line">  // ... ÈÄâÈ°π ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>Â±ÄÈÉ®Ê≥®ÂÜå</p><p>ÂÆö‰πâÁªÑ‰ª∂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var ComponentA = &#123; /* ... */ &#125;</span><br><span class="line">var ComponentB = &#123; /* ... */ &#125;</span><br><span class="line">var ComponentC = &#123; /* ... */ &#125;</span><br></pre></td></tr></table></figure><p>‰ΩøÁî®ÁªÑ‰ª∂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">el: &#x27;#app&#x27;,</span><br><span class="line">components: &#123;</span><br><span class="line">  &#x27;component-a&#x27;: ComponentA,</span><br><span class="line">  &#x27;component-b&#x27;: ComponentB</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p><strong>ÂÖ®Â±ÄÊ≥®ÂÜåÁöÑË°å‰∏∫ÂøÖÈ°ªÂú®Ê†π Vue ÂÆû‰æã (ÈÄöËøá new Vue) ÂàõÂª∫‰πãÂâçÂèëÁîü</strong> </p><hr><h3 id="Ëá™ÂÆö‰πâ‰∫ã‰ª∂"><a href="#Ëá™ÂÆö‰πâ‰∫ã‰ª∂" class="headerlink" title="Ëá™ÂÆö‰πâ‰∫ã‰ª∂"></a>Ëá™ÂÆö‰πâ‰∫ã‰ª∂</h3>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>editor</title>
      <link href="/2017/09/07/editor/"/>
      <url>/2017/09/07/editor/</url>
      
        <content type="html"><![CDATA[<h1 id="sublime"><a href="#sublime" class="headerlink" title="sublime"></a>sublime</h1><ul><li><p>ÂÆâË£ÖÊèí‰ª∂</p><p><code>CTRL + SHIFT + PÂπ∂‰∏îËæìÂÖ•Package Control: Install Package  </code></p></li><li><p>htmlÊ†ºÂºèÂåñ</p><p><code>ËæìÂÖ•ÔºÅÔºåÁÑ∂ÂêéÊåâ TAB</code></p></li><li><p>Pretty JSONÊèí‰ª∂</p><p><code>Ê†ºÂºèÂåñ  CTRL + ALT + J</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux snippet</title>
      <link href="/2017/05/09/linux%20snippet/"/>
      <url>/2017/05/09/linux%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><ul><li>/bin/    Áî®‰ª•Â≠òÂÇ®‰∫åËøõÂà∂ÂèØÊâßË°åÂëΩ‰ª§Êñá‰ª∂Ôºå/usr/bin/‰πüÂ≠òÂÇ®‰∫Ü‰∏Ä‰∫õÂü∫‰∫éÁî®Êà∑ÁöÑÂëΩ‰ª§Êñá‰ª∂„ÄÇ</li><li>/sbin/    ËÆ∏Â§öÁ≥ªÁªüÂëΩ‰ª§ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºå/usr/sbin/‰∏≠‰πüÂåÖÊã¨‰∫ÜËÆ∏Â§öÂëΩ‰ª§„ÄÇ</li><li>/root/    Ë∂ÖÁ∫ßÁî®Êà∑ÔºåÂç≥Ê†πÁî®Êà∑ÁöÑ‰∏ªÁõÆÂΩï„ÄÇ</li><li>/home/    ÊôÆÈÄöÁî®Êà∑ÁöÑÈªòËÆ§ÁõÆÂΩïÔºåÂú®ËØ•ÁõÆÂΩï‰∏ãÔºåÊØè‰∏™Áî®Êà∑Êã•Êúâ‰∏Ä‰∏™‰ª•Áî®Êà∑ÂêçÂëΩÂêçÁöÑÊñá‰ª∂Â§π„ÄÇ</li><li>/boot/    Â≠òÊîæUbuntuÂÜÖÊ†∏ÂíåÁ≥ªÁªüÂêØÂä®Êñá‰ª∂„ÄÇ</li><li>/mnt/     ÈÄöÂ∏∏ÂåÖÊã¨Á≥ªÁªüÂºïÂØºÂêéË¢´ÊåÇËΩΩÁöÑÊñá‰ª∂Á≥ªÁªüÁöÑÊåÇËΩΩÁÇπ„ÄÇ</li><li>/dev/    Â≠òÂÇ®ËÆæÂ§áÊñá‰ª∂ÔºåÂåÖÊã¨ËÆ°ÁÆóÊú∫ÁöÑÊâÄÊúâÂ§ñÈÉ®ËÆæÂ§áÔºåÂ¶ÇÁ°¨Áõò„ÄÅÊòØ„ÄÅÈîÆÁõò„ÄÅÈº†Ê†áÁ≠â„ÄÇ</li><li>/etc/    Â≠òÊîæÊñá‰ª∂ÁÆ°ÁêÜÈÖçÁΩÆÊñá‰ª∂ÂíåÁõÆÂΩï„ÄÇ</li><li>/lib/    Â≠òÂÇ®ÂêÑÁßçÁ®ãÂ∫èÊâÄÈúÄË¶ÅÁöÑÂÖ±‰∫´Â∫ìÊñá‰ª∂„ÄÇ</li><li>/lost+found/    ‰∏ÄËà¨‰∏∫Á©∫ÔºåÂΩìÈùûÊ≥ïÂÖ≥Êú∫Êó∂Ôºå‰ºöÂ≠òÊîæ‰∏Ä‰∫õÈõ∂Êï£ÁöÑÊñá‰ª∂„ÄÇ</li><li>/var/    Áî®‰∫éÂ≠òÊîæÂæàÂ§ö‰∏çÊñ≠ÂèòÂåñÁöÑÊñá‰ª∂Ôºå‰æãÂ¶ÇÊó•ÂøóÊñá‰ª∂Á≠â„ÄÇ</li><li>/usr/    ÂåÖÊã¨‰∏éÁ≥ªÁªüÁî®Êà∑Áõ¥Êé•ÊúâÂÖ≥ÁöÑÊñá‰ª∂ÂíåÁõÆÂΩï</li><li>/media/    Â≠òÊîæUbuntuÁ≥ªÁªüËá™Âä®ÊåÇËΩΩÁöÑËÆæÂ§áÊñá‰ª∂„ÄÇ</li><li>/proc/    ËøôÊòØ‰∏Ä‰∏™ËôöÊãüÁõÆÂΩïÔºåÂÆÉÊòØÂÜÖÂ≠òÁöÑÊò†Â∞ÑÔºåÂåÖÊã¨Á≥ªÁªü‰ø°ÊÅØÂíåËøõÁ®ã‰ø°ÊÅØ„ÄÇ</li><li>/tmp/    Â≠òÂÇ®Á≥ªÁªüÂíåÁî®Êà∑ÁöÑ‰∏¥Êó∂‰ø°ÊÅØ„ÄÇ</li><li>/initrd/    Áî®Êù•Âä†ËΩΩÂêØÂä®Êó∂‰∏¥Êó∂ÊåÇËΩΩÁöÑinitrd.imgÊò†ÂÉèÊñá‰ª∂Ôºå‰ª•ÂèäËΩΩÂÖ•ÊâÄË¶ÅÁöÑËÆæÂ§áÊ®°ÂùóÁõÆÂΩï„ÄÇ</li><li>/opt/    ‰Ωú‰∏∫ÂèØÈÄâÊñá‰ª∂ÂíåÁ®ãÂ∫èÁöÑÂ≠òÊîæÁõÆÂΩïÔºåÂê¶ÂàôÂ∞ÜÊó†Ê≥ïÂºïÂØºËÆ°ÁÆóÊú∫ËøõÂÖ•Êìç‰ΩúÁ≥ªÁªü„ÄÇ</li><li>/srv/    Â≠òÂÇ®Á≥ªÁªüÊèê‰æõÁöÑÊúçÂä°Êï∞ÊçÆ„ÄÇ</li><li>/sys/    Á≥ªÁªüËÆæÂ§áÂíåÊñá‰ª∂Â±ÇÊ¨°ÁªìÊûÑÔºåÂπ∂ÂêëÁî®Êà∑Á®ãÂ∫èÊèê‰æõËØ¶ÁªÜÁöÑÂÜÖÊ†∏Êï∞ÊçÆ‰ø°ÊÅØ„ÄÇ</li></ul><h1 id="point"><a href="#point" class="headerlink" title="point"></a>point</h1><h2 id="native-lib-config"><a href="#native-lib-config" class="headerlink" title="native lib config"></a>native lib config</h2><ul><li><code>/lib</code> contain ‚Äúessential‚Äù libraries that may be needed even in single-user (admin-only) mode and without /usr mounted</li><li><code>/usr/lib</code> are the libraries for the normal user-programs, that mostly can be found under /usr.</li><li><code>/usr/local/lib</code> are the libraries for locally installed programs and packages ie. things you‚Äôve compiled and installed from source-packages yourself.</li></ul><h2 id="shell-and-export"><a href="#shell-and-export" class="headerlink" title="shell and export"></a>shell and export</h2><p>Áî®Êà∑ÁôªÂΩïÂà∞LinuxÁ≥ªÁªüÂêéÔºåÁ≥ªÁªüÂ∞ÜÂêØÂä®‰∏Ä‰∏™Áî®Êà∑shell„ÄÇÂú®Ëøô‰∏™shell‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®shellÂëΩ‰ª§ÊàñÂ£∞ÊòéÂèòÈáèÔºå‰πüÂèØ‰ª•ÂàõÂª∫Âπ∂ËøêË°å shellËÑöÊú¨Á®ãÂ∫è„ÄÇËøêË°åshellËÑöÊú¨Á®ãÂ∫èÊó∂ÔºåÁ≥ªÁªüÂ∞ÜÂàõÂª∫‰∏Ä‰∏™Â≠êshell„ÄÇÊ≠§Êó∂ÔºåÁ≥ªÁªü‰∏≠Â∞ÜÊúâ‰∏§‰∏™shellÔºå‰∏Ä‰∏™ÊòØÁôªÂΩïÊó∂Á≥ªÁªüÂêØÂä®ÁöÑshellÔºåÂè¶‰∏Ä ‰∏™ÊòØÁ≥ªÁªü‰∏∫ËøêË°åËÑöÊú¨Á®ãÂ∫èÂàõÂª∫ÁöÑshell„ÄÇÂΩì‰∏Ä‰∏™ËÑöÊú¨Á®ãÂ∫èËøêË°åÂÆåÊØïÔºåÂÆÉÁöÑËÑöÊú¨shellÂ∞ÜÁªàÊ≠¢ÔºåÂèØ‰ª•ËøîÂõûÂà∞ÊâßË°åËØ•ËÑöÊú¨‰πãÂâçÁöÑshell„ÄÇ‰ªéËøôÁßçÊÑè‰πâ‰∏äÊù• ËØ¥ÔºåÁî®Êà∑ÂèØ‰ª•ÊúâËÆ∏Â§ö shellÔºåÊØè‰∏™shellÈÉΩÊòØÁî±Êüê‰∏™shellÔºàÁß∞‰∏∫Áà∂shellÔºâÊ¥æÁîüÁöÑ„ÄÇ</p><p>Âú®Â≠ê shell‰∏≠ÂÆö‰πâÁöÑÂèòÈáèÂè™Âú®ËØ•Â≠êshellÂÜÖÊúâÊïà„ÄÇÂ¶ÇÊûúÂú®‰∏Ä‰∏™shellËÑöÊú¨Á®ãÂ∫è‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂèòÈáèÔºåÂΩìËØ•ËÑöÊú¨Á®ãÂ∫èËøêË°åÊó∂ÔºåËøô‰∏™ÂÆö‰πâÁöÑÂèòÈáèÂè™ÊòØËØ•ËÑöÊú¨Á®ãÂ∫èÂÜÖ ÁöÑ‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáèÔºåÂÖ∂‰ªñÁöÑshell‰∏çËÉΩÂºïÁî®ÂÆÉÔºåË¶Å‰ΩøÊüê‰∏™ÂèòÈáèÁöÑÂÄºÂèØ‰ª•Âú®ÂÖ∂‰ªñshell‰∏≠Ë¢´ÊîπÂèòÔºåÂèØ‰ª•‰ΩøÁî®exportÂëΩ‰ª§ÂØπÂ∑≤ÂÆö‰πâÁöÑÂèòÈáèËøõË°åËæìÂá∫„ÄÇ exportÂëΩ‰ª§Â∞Ü‰ΩøÁ≥ªÁªüÂú®ÂàõÂª∫ÊØè‰∏Ä‰∏™Êñ∞ÁöÑshellÊó∂ÂÆö‰πâËøô‰∏™ÂèòÈáèÁöÑ‰∏Ä‰∏™Êã∑Ë¥ù„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰πã‰∏∫ÂèòÈáèËæìÂá∫„ÄÇ</p><ul><li><p>Êìç‰ΩúÊñá‰ª∂Âêç‰∏≠Âê´Êúâ‚Äú-‚ÄùÁöÑÊñá‰ª∂</p><p>‰ΩøÁî®ËΩ¨ÁßªÂ≠óÁ¨¶ ‚Äú‚Äì‚ÄùÔºå ÊØîÂ¶ÇÊü•ÁúãÊñá‰ª∂‚Äú-abc.txt‚ÄúÔºåÂëΩ‰ª§‰∏∫ <code>vim -- -abc.txt</code></p></li><li><p><code>/etc/environment</code>ÊòØËÆæÁΩÆÊï¥‰∏™Á≥ªÁªüÁöÑÁéØÂ¢ÉÔºåËÄå<code>/etc/profile</code>ÊòØËÆæÁΩÆÊâÄÊúâÁî®Êà∑ÁöÑÁéØÂ¢É </p></li></ul><h2 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h2><p>KVM ÁöÑÂÖ®Áß∞ÊòØÔºöKernel-based Virtual MachineÔºåÁÆÄÂçï‰∏ÄÂè•ËØùÊ¶ÇÊã¨ÔºåÂ∞±ÊòØ‰∏Ä‰∏™Âü∫‰∫é Linux ÂÜÖÊ†∏ÁöÑËôöÊãüÂåñÁÆ°ÁêÜÁ≥ªÁªü„ÄÇ</p><h2 id="java-config"><a href="#java-config" class="headerlink" title="java config"></a>java config</h2><ul><li>use <code>java -XshowSettings:properties</code> to show the java.library.path (and others) value.</li></ul><h1 id="practice"><a href="#practice" class="headerlink" title="practice"></a>practice</h1><h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><ol><li><p>ËøõÂÖ•ÁõÆÂΩï<code> /root/.ssh</code></p></li><li><p>ÊâßË°åÂëΩ‰ª§Ôºö<code>ssh-keygen -t rsa</code>Ôºå‰ºöÁîüÊàêÊñá‰ª∂id_rsaÂíåid_rsa.pub</p></li><li><p>Â∞ÜÂÖ¨Èí•ÂÜôÂÖ•Êñá‰ª∂ authorized_keysÔºå<code>cat id_rsa.pub &gt;&gt; authorized_keys</code></p></li><li><p>Âú®ÂÖ∂ÂÆÉÊú∫Âô®ÈáçÂ§ç‰∏äËø∞Êìç‰Ωú</p></li><li><p>Â∞ÜÂÖ∂ÂÆÉÊú∫Âô®ÁöÑÂÖ¨Èí•Êã∑Ë¥ùÂà∞Á¨¨‰∏ÄÂè∞Êú∫Âô®ÁöÑauthorized_keysÊñá‰ª∂‰∏≠</p><p><code>ssh-copy-id -i id_rsa.pub Áî®Êà∑@ip</code></p><blockquote><p>Ê≥®ÊÑèÔºå‰∏ÄÂÆö‰∏çË¶Å‰ΩøÁî®Â§çÂà∂Êã∑Ë¥ùÁöÑÊñπÂºèÊääÂÖ¨Èí•Â§çÂà∂Âà∞authorized_keysÊñá‰ª∂‰∏≠ÔºåÂõ†‰∏∫Â§çÂà∂ÁöÑÊó∂ÂÄô‰ºöÊúâÁâπÊÆäÂ≠óÁ¨¶ÁöÑÂä†ÂÖ•ÔºåÂèØ‰ª•Âú®vim‰∏≠‰ΩøÁî®<code>:set list</code>ËøõË°åÈ™åËØÅ</p></blockquote></li><li><p>Â∞ÜÁ¨¨‰∏ÄÂè∞Êú∫Âô®ÁöÑauthorized_keysÂ§çÂà∂Âà∞ÂÖ∂ÂÆÉÊú∫Âô®‰∏ä</p><p><code>scp authorized_keys Áî®Êà∑@ip:/Ë∑ØÂæÑ/.ssh/</code></p><p>Ê≥®ÊÑèÁÇπ</p></li></ol><ul><li>authorized_keys ÁöÑÊùÉÈôêÊòØ600ÔºåÂç≥ËØªÂíåÂÜôÔºàÂ¶ÇÊûúÈªòËÆ§‰∏çÊòØÁöÑËØùÔºåÈúÄË¶Å‰øÆÊîπÔºâ</li></ul><h2 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -x &lt;shellName&gt;</span><br></pre></td></tr></table></figure><h1 id="troubleshoot"><a href="#troubleshoot" class="headerlink" title="troubleshoot"></a>troubleshoot</h1><h2 id="vmware-centos-ip-config"><a href="#vmware-centos-ip-config" class="headerlink" title="vmware centos ip config"></a>vmware centos ip config</h2><ol><li><code> vi /etc/sysconfig/network-scripts/ifcfg-ens33</code>,ËÆæÁΩÆ<code>ONBOOT=yes</code></li><li><code>service network restart </code></li><li><code>ip a</code>Êü•Áúãip</li></ol><h2 id="ÁïåÈù¢Âç°Ê≠ª"><a href="#ÁïåÈù¢Âç°Ê≠ª" class="headerlink" title="ÁïåÈù¢Âç°Ê≠ª"></a>ÁïåÈù¢Âç°Ê≠ª</h2><ol><li><p>‰ΩøÁî® Ctrl+Alt+F1ÊàñF2ÊàñÂà∞F6ÔºåËøõÂÖ•ttyÁªàÁ´ØÔºàËæìÂÖ•Áî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºâ</p></li><li><p>ÊâßË°åÂëΩ‰ª§Ê≥®ÈîÄÊ°åÈù¢ÈáçÊñ∞ÁôªÂΩï</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pkill Xorg</span><br><span class="line">Êàñ</span><br><span class="line">sudo restart lightdm</span><br></pre></td></tr></table></figure></li></ol><h2 id="Ë£ÖÊú∫ÈóÆÈ¢ò"><a href="#Ë£ÖÊú∫ÈóÆÈ¢ò" class="headerlink" title="Ë£ÖÊú∫ÈóÆÈ¢ò"></a>Ë£ÖÊú∫ÈóÆÈ¢ò</h2><ul><li>Wifi Not Enabled Acer Aspire 4750</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">~$</span><span class="bash"> rfkill list all</span></span><br><span class="line">0: phy0: Wireless LAN</span><br><span class="line">Soft blocked: no</span><br><span class="line">Hard blocked: yes</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">~$</span><span class="bash"> sudo rmmod acer-wmi</span></span><br><span class="line">‚Äã```</span><br><span class="line"></span><br><span class="line">add below line at the end of the file : /etc/modprobe.d/blacklist.conf</span><br><span class="line">blacklist acer-wmi</span><br><span class="line"></span><br><span class="line">Then restart the system.</span><br><span class="line"><span class="meta">~$</span><span class="bash"> rfkill list all</span></span><br><span class="line">0: phy0: Wireless LAN</span><br><span class="line">Soft blocked: no</span><br><span class="line">Hard blocked: no</span><br></pre></td></tr></table></figure><h2 id="Êú∫Âô®ÊéâÁ∫ø"><a href="#Êú∫Âô®ÊéâÁ∫ø" class="headerlink" title="Êú∫Âô®ÊéâÁ∫ø"></a>Êú∫Âô®ÊéâÁ∫ø</h2><h3 id="ÁΩëÂç°ÊéâÁ∫ø"><a href="#ÁΩëÂç°ÊéâÁ∫ø" class="headerlink" title="ÁΩëÂç°ÊéâÁ∫ø"></a>ÁΩëÂç°ÊéâÁ∫ø</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check</span></span><br><span class="line">ip a</span><br><span class="line">cat /etc/netplan/xxx.yaml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> resolve</span></span><br><span class="line">vim /etc/netplan/xxx.yaml</span><br><span class="line">netplan --debug apply</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux network command</title>
      <link href="/2017/05/09/linux%20cmd:%20network/"/>
      <url>/2017/05/09/linux%20cmd:%20network/</url>
      
        <content type="html"><![CDATA[<h2 id="port"><a href="#port" class="headerlink" title="port"></a>port</h2><ul><li><p>Check the listening ports</p><p>Run any one of the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo lsof -i -P -n | grep LISTEN </span><br><span class="line">sudo netstat -tulpn | grep LISTEN</span><br><span class="line">sudo nmap -sTU -O IP-address-Here</span><br></pre></td></tr></table></figure></li><li><p>checking <strong>remote system</strong> tcp 80 port status</p><ol><li><p>Telnet</p></li><li><p>nc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> nc -zvw10 192.168.0.1 22</span><br><span class="line">ÂÖ∂‰∏≠ÂèÇÊï∞Ôºö</span><br><span class="line">z: zero-I/O mode which is used for scanning</span><br><span class="line">v: for verbose output</span><br><span class="line">w10: timeout wait seconds</span><br></pre></td></tr></table></figure></li></ol></li></ul><ol start="3"><li>nmap<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">telnet myserver.com 80 </span><br><span class="line">nc -v myserver.com 80</span><br><span class="line">nc -vn 192.168.40.146 2424</span><br><span class="line">nmap myserver.com 80 </span><br></pre></td></tr></table></figure></li></ol><ul><li>ÈÄöËøáËøõÁ®ãÂêçÊü•ÁúãÂç†Áî®Á´ØÂè£<ul><li><p>ÂÖàÊü•ÁúãËøõÁ®ãpid    <code>ps -ef | grep ËøõÁ®ãÂêç </code></p></li><li><p>ÂÜçÈÄöËøápidÊü•ÁúãÂç†Áî®Á´ØÂè£  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -nap | grep &lt;pid&gt;</span><br><span class="line">lsof -p &lt;pid&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li>ÈÄöËøáÁ´ØÂè£Êü•ÁúãËøõÁ®ã<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep &lt;portnumber&gt;</span><br><span class="line">lsof -i:&lt;portnumber&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="pid"><a href="#pid" class="headerlink" title="pid"></a>pid</h2><ul><li><p>Ê†πÊçÆËøõÁ®ãÂè∑Êü•ÁúãÂêØÂä®Êñá‰ª∂ÊâÄÂú®‰ΩçÁΩÆ</p><p><code>readlink /proc/&lt;Á∫øÁ®ãID&gt;/exe</code></p></li><li><p>Êü•ÁúãËøõÁ®ãÁöÑÂêØÂä®ÂëΩ‰ª§</p><p><code>cat /proc/&lt;Á∫øÁ®ãID&gt;/cmdline</code></p></li><li><p>Ê†πÊçÆPIDÊü•ÁúãÂ≠êËøõÁ®ã</p><p><code>netstat -lntp |grep PID</code></p></li></ul><h2 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h2><ul><li><p>Êü•ÁúãÊú¨Âú∞ÁΩëÁªú‰ª£ÁêÜ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export | grep -i proxy</span><br></pre></td></tr></table></figure></li><li><p>ÂÖ≥Èó≠‰ª£ÁêÜ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset http_proxy </span><br></pre></td></tr></table></figure></li></ul><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><ul><li><p>pretty json </p><p>curl ‚Äòaddress:port‚Äô | json_pp</p></li></ul><h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p>Ê£ÄÊµãÁ´ØÂè£ÊòØÂê¶ÂÖÅËÆ∏ËøúÁ®ãËÆøÈóÆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep &lt;port&gt;</span><br><span class="line"></span><br><span class="line">Êü•ÁúãËæìÂá∫ÁªìÊûú„ÄÇÂ¶ÇÊûúËæìÂá∫ÁªìÊûú‰∏≠Êúâ 0.0.0.0:&lt;port&gt; ÊàñËÄÖ :::&lt;port&gt;ÔºåË°®Á§∫ËØ•Á´ØÂè£ÂÖÅËÆ∏ËøúÁ®ãËÆøÈóÆÔºõ</span><br><span class="line">Â¶ÇÊûúËæìÂá∫ÁªìÊûú‰∏≠Âè™Êúâ 127.0.0.1:&lt;port&gt; ÊàñËÄÖ ::1:&lt;port&gt;ÔºåË°®Á§∫ËØ•Á´ØÂè£Âè™ÂÖÅËÆ∏Êú¨Âú∞ËÆøÈóÆ</span><br></pre></td></tr></table></figure><ul><li>Âú® Ubuntu ‰∏≠ÔºåË¶ÅÂºÄÂêØÊåáÂÆöÁ´ØÂè£ÁöÑËøúÁ®ãËÆøÈóÆÔºåÈúÄË¶ÅËøõË°å‰ª•‰∏ãÊ≠•È™§Ôºö</li></ul><ol><li><p>Á°ÆËÆ§Á´ØÂè£ÊòØÂê¶Â∑≤ÁªèÂºÄÂêØÔºö‰ΩøÁî® <code>netstat</code> ÂëΩ‰ª§Ê£ÄÊü•Ë¶ÅÂºÄÂêØÁöÑÁ´ØÂè£ÊòØÂê¶Â∑≤ÁªèÂú®ÁõëÂê¨Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÂ∑≤ÁªèÂú®ÁõëÂê¨Áä∂ÊÄÅÔºåÂàôÂèØ‰ª•Áõ¥Êé•ËøõË°å‰∏ã‰∏ÄÊ≠•Êìç‰ΩúÔºõÂ¶ÇÊûúÊ≤°ÊúâÂú®ÁõëÂê¨Áä∂ÊÄÅÔºåÂàôÈúÄË¶ÅÂÖàÂêØÂä®ÂØπÂ∫îÁöÑÊúçÂä°Á®ãÂ∫è„ÄÇ</p></li><li><p>‰øÆÊîπÈò≤ÁÅ´Â¢ôËßÑÂàôÔºö‰ΩøÁî® <code>ufw</code> ÂëΩ‰ª§‰øÆÊîπÈò≤ÁÅ´Â¢ôËßÑÂàôÔºåÂºÄÊîæÊåáÂÆöÁ´ØÂè£„ÄÇ‰æãÂ¶ÇÔºåË¶ÅÂºÄÊîæÁ´ØÂè£Âè∑‰∏∫ 80 ÁöÑÁ´ØÂè£ÔºåÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 80/tcp</span><br></pre></td></tr></table></figure><p>Ëøô‰∏™ÂëΩ‰ª§‰ºöÂ∞ÜÁ´ØÂè£Âè∑‰∏∫ 80 ÁöÑÁ´ØÂè£Âä†ÂÖ•Âà∞Èò≤ÁÅ´Â¢ôËßÑÂàô‰∏≠ÔºåÂπ∂ÂÖÅËÆ∏ TCP ÂçèËÆÆÈÄöËøáËØ•Á´ØÂè£ËøõË°åËÆøÈóÆ„ÄÇ</p></li><li><p>ÈáçÂêØÈò≤ÁÅ´Â¢ôÊúçÂä°ÔºöÂú®‰øÆÊîπÈò≤ÁÅ´Â¢ôËßÑÂàôÂêéÔºåÈúÄË¶ÅÈáçÂêØÈò≤ÁÅ´Â¢ôÊúçÂä°ÊâçËÉΩ‰Ωø‰øÆÊîπÁîüÊïà„ÄÇÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÈáçÂêØÈò≤ÁÅ´Â¢ôÊúçÂä°Ôºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service ufw restart</span><br></pre></td></tr></table></figure></li><li><p>Á°ÆËÆ§Èò≤ÁÅ´Â¢ôËßÑÂàôÊòØÂê¶Ê≠£Á°ÆÔºö‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÁöÑÈò≤ÁÅ´Â¢ôËßÑÂàôÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status numbered</span><br></pre></td></tr></table></figure></li></ol><h2 id="subnet-mask"><a href="#subnet-mask" class="headerlink" title="subnet mask"></a>subnet mask</h2><blockquote><p>Â≠êÁΩëÊé©Á†Å</p></blockquote><p>xx.xx.xx.xx/24</p><p>Âú®ÁΩëÁªú‰∏≠ÔºåIPÂú∞ÂùÄÁî±‰∏§‰∏™ÈÉ®ÂàÜÁªÑÊàêÔºöÁΩëÁªúÂú∞ÂùÄÂíå‰∏ªÊú∫Âú∞ÂùÄ„ÄÇIPÂú∞ÂùÄÁöÑÁΩëÁªúÈÉ®ÂàÜÁî®‰∫éÊ†áËØÜÁΩëÁªúÔºåËÄå‰∏ªÊú∫ÈÉ®ÂàÜÁî®‰∫éÊ†áËØÜÁâπÂÆöÁöÑËÆæÂ§áÊàñ‰∏ªÊú∫„ÄÇ</p><p>CIDRÔºàÊó†Á±ªÂà´ÂüüÈó¥Ë∑ØÁî±ÔºâË°®Á§∫Ê≥ïÈÄöÂ∏∏Áî®‰∫éÊåáÂÆöIPÂú∞ÂùÄÁöÑÂ≠êÁΩëÊé©Á†ÅÔºå‰ª•Á°ÆÂÆöÁΩëÁªúÂú∞ÂùÄÂíå‰∏ªÊú∫Âú∞ÂùÄÁöÑËæπÁïå„ÄÇCIDRË°®Á§∫Ê≥ï‰ΩøÁî®ÊñúÁ∫øÂêéÈù¢ÁöÑÊï∞Â≠óÊù•Ë°®Á§∫ÁΩëÁªúÂú∞ÂùÄ‰∏≠ÂâçÂ§öÂ∞ë‰ΩçÊòØÂõ∫ÂÆöÁöÑÔºåÂç≥ÁΩëÁªúÂâçÁºÄÈïøÂ∫¶„ÄÇ‰æãÂ¶ÇÔºå/24 Ë°®Á§∫Ââç 24 ‰ΩçÊòØÁΩëÁªúÂú∞ÂùÄÔºåÂâ©‰∏ãÁöÑ 8 ‰ΩçÂàôÊòØ‰∏ªÊú∫Âú∞ÂùÄ„ÄÇ</p><p>ÂØπ‰∫é IPv4 Âú∞ÂùÄÔºåÊØè‰∏™ IP Âú∞ÂùÄÈÉΩÁî± 32 ‰Ωç‰∫åËøõÂà∂Êï∞Ë°®Á§∫„ÄÇÈÄöËøáÂ∞ÜÂâç 24 ‰Ωç‰Ωú‰∏∫ÁΩëÁªúÂú∞ÂùÄÂπ∂‰øùÁïôÊúÄÂêé 8 ‰Ωç‰Ωú‰∏∫‰∏ªÊú∫Âú∞ÂùÄÔºåÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ 256 ‰∏™ÂèØËÉΩ‰∏ªÊú∫Âú∞ÂùÄÁöÑÁΩëÁªú„ÄÇËøôË¢´Áß∞‰∏∫ ‚Äú24 ‰ΩçÁΩëÁªú‚Äù Êàñ ‚Äú24 ‰ΩçÂ≠êÁΩë‚ÄùÔºåÂÆÉÁöÑÂ≠êÁΩëÊé©Á†ÅÊòØ 255.255.255.0„ÄÇ</p><p>Âõ†Ê≠§ÔºåÂΩì‰Ω†ÈÖçÁΩÆ‰∏Ä‰∏™ IP Âú∞ÂùÄÂπ∂Ê∑ªÂä† /24 ÂêéÁºÄÊó∂Ôºå‰Ω†Ê≠£Âú®ÊåáÂÆöËØ•Âú∞ÂùÄÊâÄÂ±ûÁöÑÁΩëÁªúÂíåÂ≠êÁΩëÊé©Á†Å„ÄÇËøôÊ†∑ÂèØ‰ª•Â∏ÆÂä©Á°ÆÂÆöËØ•Âú∞ÂùÄÊâÄÂú®ÁöÑÁΩëÁªúÔºåÂπ∂Á°Æ‰øù‰∏éÂÖ∂‰ªñËÆæÂ§áËøõË°åÈÄö‰ø°Êó∂ÔºåÊï∞ÊçÆÂåÖËÉΩÂ§üÊ≠£Á°ÆÂú∞Ë∑ØÁî±Âà∞ÁõÆÊ†áËÆæÂ§á„ÄÇ</p><h1 id="route"><a href="#route" class="headerlink" title="route"></a>route</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check existed ip route</span></span><br><span class="line">ip route</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete specify ip route</span></span><br><span class="line">sudo ip route del 172.21.0.0/16</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete specify ip link</span></span><br><span class="line">sudo ip link delete br-900457b8a29e</span><br></pre></td></tr></table></figure><h1 id="bond"><a href="#bond" class="headerlink" title="bond"></a>bond</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check bond slave</span></span><br><span class="line">cat /proc/net/bonding/bond0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cache snippet</title>
      <link href="/2017/03/07/cache%20snippet/"/>
      <url>/2017/03/07/cache%20snippet/</url>
      
        <content type="html"><![CDATA[<ul><li>what is cache ?    why use cache ?<ol><li>CacheÊòØÈ´òÈÄüÁºìÂÜ≤Â≠òÂÇ®Âô® ‰∏ÄÁßçÁâπÊÆäÁöÑÂ≠òÂÇ®Âô®Â≠êÁ≥ªÁªüÔºåÂÖ∂‰∏≠Â§çÂà∂‰∫ÜÈ¢ëÁπÅ‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰ª•Âà©‰∫éÂø´ÈÄüËÆøÈóÆ</li><li>Âá°ÊòØ‰Ωç‰∫éÈÄüÂ∫¶Áõ∏Â∑ÆËæÉÂ§ßÁöÑ‰∏§ÁßçÁ°¨‰ª∂/ËΩØ‰ª∂‰πãÈó¥ÁöÑÔºåÁî®‰∫éÂçèË∞É‰∏§ËÄÖÊï∞ÊçÆ‰º†ËæìÈÄüÂ∫¶Â∑ÆÂºÇÁöÑÁªìÊûÑÔºåÂùáÂèØÁß∞‰πã‰∏∫ Cache </li></ol></li><li>ÁºìÂ≠òÁöÑÂàÜÁ±ª<ul><li>Êìç‰ΩúÁ≥ªÁªüÁ£ÅÁõòÁºìÂ≠ò-&gt;ÂáèÂ∞ëÁ£ÅÁõòÊú∫Ê¢∞Êìç‰Ωú</li><li>Êï∞ÊçÆÂ∫ìÁºìÂ≠ò-&gt;ÂáèÂ∞ëÊñá‰ª∂Á≥ªÁªüI/O</li><li>Â∫îÁî®Á®ãÂ∫èÁºìÂ≠ò-&gt;ÂáèÂ∞ëÂØπÊï∞ÊçÆÂ∫ìÁöÑÊü•ËØ¢ </li><li>WebÊúçÂä°Âô®ÁºìÂ≠ò-&gt;ÂáèÂ∞ëÂ∫îÁî®ÊúçÂä°Âô®ËØ∑Ê±Ç</li><li>ÂÆ¢Êà∑Á´ØÊµèËßàÂô®ÁºìÂ≠ò-&gt;ÂáèÂ∞ëÂØπÁΩëÁ´ôÁöÑËÆøÈóÆ</li></ul></li></ul><h3 id="ÊäÄÊúØÊ°ÜÊû∂"><a href="#ÊäÄÊúØÊ°ÜÊû∂" class="headerlink" title="ÊäÄÊúØÊ°ÜÊû∂"></a>ÊäÄÊúØÊ°ÜÊû∂</h3><ul><li><strong>Encache</strong><ul><li>ËÆæËÆ°‰∫éÊèêÈ´òÂú®Êï∞ÊçÆ‰ªéRDBMS‰∏≠ÂèñÂá∫Êù•ÁöÑÈ´òËä±Ë¥π„ÄÅÈ´òÂª∂ËøüÈááÂèñÁöÑ‰∏ÄÁßçÁºìÂ≠òÊñπÊ°à </li><li>javaÁºñÂÜôÔºåÁõ¥Êé•Âú®jvmËôöÊãüÊú∫‰∏≠ÁºìÂ≠òÔºåÈÄüÂ∫¶Âø´ÔºåÊïàÁéáÈ´òÔºõ‰ΩÜÊòØÁºìÂ≠òÂÖ±‰∫´È∫ªÁÉ¶ÔºåÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏çÊñπ‰æø„ÄÇ</li><li>ÁâπÁÇπÔºö<ul><li>Âø´</li><li>ÁÆÄÂçï</li><li>Ë¢ñÁèç</li><li>ËΩªÈáè</li><li>Êâ©Â±ï</li><li>ÁõëÂê¨Âô®</li></ul></li></ul></li><li><strong>memcache</strong><ul><li>‰∏ÄÁßçÈ´òÊÄßËÉΩ„ÄÅÂàÜÂ∏ÉÂºèÂØπË±°ÁºìÂ≠òÁ≥ªÁªüÔºåÊúÄÂàùËÆæËÆ°‰∫éÁºìËß£Âä®ÊÄÅÁΩëÁ´ôÊï∞ÊçÆÂ∫ìÂä†ËΩΩÊï∞ÊçÆÁöÑÂª∂ËøüÊÄßÔºå‰Ω†ÂèØ‰ª•ÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™Â§ßÁöÑÂÜÖÂ≠òHashTableÔºåÂ∞±ÊòØ‰∏Ä‰∏™key-valueÈîÆÂÄºÁºìÂ≠ò„ÄÇ</li><li>CËØ≠Ë®ÄÁºñÂÜô</li><li>ÁâπÁÇπÔºö<ul><li>‰æùËµñ</li><li>Â§öÁ∫øÁ®ãÊîØÊåÅ</li><li>È´òÊÄßËÉΩ</li></ul></li></ul></li><li><strong>redis</strong><ul><li>ÈÄöËøásocketËÆøÈóÆÂà∞ÁºìÂ≠òÊúçÂä°ÔºåÊïàÁéáÊØîencache‰ΩéÔºåÊØîÊï∞ÊçÆÂ∫ìË¶ÅÂø´ÂæàÂ§öÔºåÂ§ÑÁêÜÈõÜÁæ§ÂíåÂàÜÂ∏ÉÂºèÁºìÂ≠òÊñπ‰æøÔºåÊúâÊàêÁÜüÁöÑÊñπÊ°à„ÄÇ</li><li>ÁâπÊÄßÔºö<ul><li>ÊîØÊåÅÊåÅ‰πÖÂåñ</li><li>‰∏∞ÂØåÁöÑÊï∞ÊçÆÁ±ªÂûã</li><li>È´òÊÄßËÉΩ</li><li>‰∏ª‰ªéÂ§çÂà∂</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> cache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jetbrains</title>
      <link href="/2016/12/16/jetbrains%20idea/"/>
      <url>/2016/12/16/jetbrains%20idea/</url>
      
        <content type="html"><![CDATA[<h1 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h1><h2 id="Êèí‰ª∂"><a href="#Êèí‰ª∂" class="headerlink" title="Êèí‰ª∂"></a>Êèí‰ª∂</h2><ul><li><p>ÂèÇÁÖß<a href="https://blog.csdn.net/q547550831/article/details/79129311">‰∏ÄÂ§ßÂù®Êèí‰ª∂</a></p></li><li><p>Áé∞Âú®Â∑≤ÂÆâË£ÖÁöÑÊèí‰ª∂Ôºö</p><ul><li>Translation(ÁøªËØëÂ∑•ÂÖ∑)</li><li>CheckStyle-IDEAÔºà‰ª£Á†ÅËßÑËåÉÔºâ</li><li>FindBugs-IDEA(ÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑)</li><li>BashSupportÔºàLinux BashÊîØÊåÅÔºåÂØπbashËØ≠Ê≥ïÁöÑÈ´ò‰∫ÆÊîØÊåÅÔºâ</li><li>CodeGlanceÔºàÁ±ª‰ººSublimeTextÁöÑMini MapÊèí‰ª∂ Ôºâ</li><li>Key promoterÔºàÊèêÁ§∫ÂäüËÉΩÂø´Êç∑ÈîÆÔºâ</li><li>GsonFormatÔºàÊöÇÊú™ÂÆâË£ÖÔºåÂÖ∂ÂäüËÉΩ‰∏∫ÊääjsonÊ†ºÂºèÁöÑÂÜÖÂÆπËΩ¨ÊàêObjectÔºâ</li><li>jRebelÔºàÊöÇÊú™ÂÆâË£ÖÔºåÁÉ≠ÈÉ®ÁΩ≤Êèí‰ª∂Ôºâ</li></ul></li><li><p><strong>scratchesËçâÁ®øÂäüËÉΩ</strong></p><ul><li><p>ÂèÇÁÖß<a href="https://blog.csdn.net/theape/article/details/70194185">Âº∫Â§ßÁöÑËçâÁ®øÂäüËÉΩ</a></p></li><li><p>scratch‰∏≠Êñá‰π±Á†ÅËß£ÂÜ≥ÂäûÊ≥ï</p><p>ÈúÄË¶ÅÂú®<code>C:\Users\Administrator\.IntelliJIdea2019.1\config</code>‰∏≠‰øÆÊîπÊñá‰ª∂<code>idea64.exe.vmoptions</code>,Âú®ÂêéÈù¢Âä†‰∏äËÆæÁΩÆ<code>-Dfile.encoding=UTF-8</code></p></li></ul></li><li><p>**Lombok **Êèí‰ª∂</p><p>ÊèêÈ´òÁºñÁ†ÅÊïàÁéá</p></li></ul><h2 id="‰∏≠ÊñáÁºñÁ†ÅÈÖçÁΩÆ"><a href="#‰∏≠ÊñáÁºñÁ†ÅÈÖçÁΩÆ" class="headerlink" title="‰∏≠ÊñáÁºñÁ†ÅÈÖçÁΩÆ"></a>‰∏≠ÊñáÁºñÁ†ÅÈÖçÁΩÆ</h2><ul><li>ÊúâÂÖ≥PropertiesÊñá‰ª∂‰∏≠ÁöÑ‰∏≠ÊñáunicodeËΩ¨Á†ÅÈóÆÈ¢òÂú®IDEA‰∏≠ÂàõÂª∫‰∫ÜpropertiesÊñá‰ª∂ÔºåÂèëÁé∞ÈªòËÆ§‰∏≠Êñá‰∏ç‰ºöËá™Âä®ËøõË°åunicodeËΩ¨Á†ÅÔºåÈúÄË¶ÅÈÖçÁΩÆ<img src="https://i.imgur.com/W2a0nMR.jpg"></li></ul><h2 id="grep-console"><a href="#grep-console" class="headerlink" title="grep console"></a>grep console</h2><ul><li>ÂéªÊéâÊåáÂÆöÊó•ÂøóÁ∫ßÂà´ÊòæÁ§∫<img src=""></li></ul><h1 id="keymap"><a href="#keymap" class="headerlink" title="keymap"></a>keymap</h1><h3 id="Â∏∏Áî®"><a href="#Â∏∏Áî®" class="headerlink" title="Â∏∏Áî®"></a>Â∏∏Áî®</h3><ul><li>ctrl + P<br>ÂàóÂá∫ÂèÇÊï∞ÂàóË°®Ôºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>ctrl + shift + enter<br>ÂΩìÂú®Êã¨Âè∑ÈáåËæìÂÖ•ÂÆåÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞Êó∂ÂÄô‰ªñ‰ºöÁõ¥Êé•ÂÖâÊ†áË∑≥Âà∞ÊúÄÂêéÂπ∂‰∏îÊ∑ªÂä†ÂàÜÂè∑Ôºå‰∏çÈúÄË¶ÅËá™Â∑±ÊåâÂêëÂ∑¶ÈîÆÁßªÂä®ÂÖâÊ†á„ÄÇÔºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ<br>ctrl + enter Âêë‰∏ãÊèíÂÖ•‰∏ÄË°åÔºåÂÖâÊ†á‰ΩçÁΩÆ‰∏çÂèò</li><li>shift + enter<br>Âêë‰∏ãÊèíÂÖ•‰∏ÄË°å„ÄÇÂÖâÊ†á‰ΩçÁΩÆËøõÂÖ•‰∏ã‰∏ÄË°åÔºàÂèØ‰ª•Âú®‰∏ÄË°åÁöÑ‰ªª‰Ωï‰ΩçÁΩÆÊç¢Ë°åÔºåËÄå‰∏çÂøÖÂ∞ÜÂÖâÊ†áÁßªÂä®Âà∞Ë°åÂ∞æÔºå‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>ctrl+left/right<br>Âú®ÂçïËØçÈó¥Ë∑≥Âä®ÂÖâÊ†áÔºåÂü∫Êú¨Âú®ÊâÄÊúâÁöÑÁºñËæëÂô®‰∏≠ÈÉΩÊòØÈÄÇÁî® Ôºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>ctr+shitf+left/right<br>Âø´ÈÄüÈÄâ‰∏≠ÔºåÂü∫Êú¨Âú®ÊâÄÊúâÁöÑÁºñËæëÂô®‰∏≠ÈÉΩÊòØÈÄÇÁî®ÔºàshiftÈÄâ‰∏≠Ôºåctrl+left/rightÂú®ÂçïËØç‰∏≠Âø´ÈÄüË∑≥Âä®Ôºå‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>Alt+left/rightÔºåÂàáÊç¢‰ª£Á†ÅËßÜÂõæÔºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>Alt+Up/DownÔºåÂú®ÊñπÊ≥ïÈó¥Âø´ÈÄüÁßªÂä®ÂÆö‰ΩçÔºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>F2 Êàñ Shift+F2ÔºåÈ´ò‰∫ÆÈîôËØØÊàñË≠¶ÂëäÂø´ÈÄüÂÆö‰ΩçÔºà‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>Ctrl+Alt+T<br>ÂèØ‰ª•Êää‰ª£Á†ÅÂåÖÂú®‰∏Ä‰∏™ÂùóÂÜÖÔºå‰æãÂ¶ÇÔºötry/catchÔºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>Ctrl+FÔºåÂ§Ñ‰∫éÊü•ÊâæÁä∂ÊÄÅ‰∏ãÊåâdownÂêë‰∏ãÊü•ÊâæÔºåupÂêë‰∏äÊü•ÊâæÔºà‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>Ctrl+F12ÔºåÂèØ‰ª•ÊòæÁ§∫ÂΩìÂâçÊñá‰ª∂ÁöÑÁªìÊûÑÔºàÂø´ÈÄüÊü•ÊâæÂΩìÂâçÁ±ª‰∏≠Êüê‰∏™ÊñπÊ≥ïÔºå‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>Ctrl+Shift+WÔºåÂèñÊ∂àÈÄâÊã©ÂÖâÊ†áÊâÄÂú®ËØçÔºà‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>Ctrl+[ OR ]ÔºåÂèØ‰ª•Ë∑ëÂà∞Â§ßÊã¨Âè∑ÁöÑÂºÄÂ§¥‰∏éÁªìÂ∞æ</li><li>Ctrl+Shift +[ OR ]ÔºåÈÄâÊã©Â§ßÊã¨Âè∑‰∏≠ÁöÑÂÜÖÂÆπ</li><li>alt + 1 Âêå‰∏äÔºàÂú®Â∑•Á®ãÁõÆÂΩïÂíåÁºñËæëÈ°µÈù¢Èó¥ÂàáÊç¢Ôºå‰ΩøÁî®ÊØîËæÉÂ§öÔºâ</li><li>Ctrl+Alt+OÔºå‰ºòÂåñÂØºÂÖ•ÁöÑÁ±ªÂíåÂåÖ(ÂéªÊéâÊ≤°Êúâ‰ΩøÁî®ÁöÑimportÔºå‰ΩøÁî®ÊØîËæÉÂ§ö )</li><li>Shift+F6ÔºåÈáçÊûÑ - ÈáçÂëΩÂêçÔºà‰ΩøÁî®ÊØîËæÉÂ§ö Ôºâ</li><li>Ctrl+GÔºåÂÆö‰ΩçË°å</li><li>Ctrl+HÔºåÊòæÁ§∫Á±ªÁªìÊûÑÂõæÔºàÁ±ªÁöÑÁªßÊâøÂ±ÇÊ¨°Ôºâ</li><li>Ctrl+UÔºåËΩ¨Âà∞Áà∂Á±ª</li><li>Ctrl+‚Äù+/-‚ÄúÔºåÂΩìÂâçÊñπÊ≥ïÂ±ïÂºÄ„ÄÅÊäòÂè†</li><li>Ctrl+Shift+‚Äù+/-‚ÄúÔºåÂÖ®ÈÉ®Â±ïÂºÄ„ÄÅÊäòÂè†</li><li>Ctrl+Shift+JÔºåÊï¥Âêà‰∏§Ë°å</li><li>ctrl + shift + space<br>ÂΩìnew ‰∏Ä‰∏™ÂèòÈáèÁöÑÊó∂ÂÄôÔºåÂ∑≤ÁªèÂÜô‰∫ÜÂèòÈáèÁ±ªÂûãÔºåÊâì‰∫ÜÁ≠âÂè∑‰πãÂêéÊåâËøô‰∏™ÂèØ‰ª•Âø´ÈÄüÂÆåÊàê„ÄÇ</li></ul><hr><h2 id="Compile-and-Run"><a href="#Compile-and-Run" class="headerlink" title="Compile and Run"></a>Compile and Run</h2><p><a href="https://imgchr.com/i/nRX0JI"><img src="https://s2.ax1x.com/2019/09/16/nRX0JI.jpg" alt="nRX0JI.jpg"></a></p><h2 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h2><p><a href="https://imgchr.com/i/nRXhYn"><img src="https://s2.ax1x.com/2019/09/16/nRXhYn.jpg" alt="nRXhYn.jpg"></a></p><h2 id="Editing"><a href="#Editing" class="headerlink" title="Editing"></a>Editing</h2><p><a href="https://imgchr.com/i/nRXwFA"><img src="https://s2.ax1x.com/2019/09/16/nRXwFA.jpg" alt="nRXwFA.jpg"></a></p><h2 id="General"><a href="#General" class="headerlink" title="General"></a>General</h2><p><a href="https://imgchr.com/i/nRX2wQ"><img src="https://s2.ax1x.com/2019/09/16/nRX2wQ.jpg" alt="nRX2wQ.jpg"></a></p><h2 id="Live-Templates"><a href="#Live-Templates" class="headerlink" title="Live Templates"></a>Live Templates</h2><p><a href="https://imgchr.com/i/nRXRoj"><img src="https://s2.ax1x.com/2019/09/16/nRXRoj.jpg" alt="nRXRoj.jpg"></a></p><h2 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h2><p><a href="https://imgchr.com/i/nRXBWt"><img src="https://s2.ax1x.com/2019/09/16/nRXBWt.jpg" alt="nRXBWt.jpg"></a></p><h2 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h2><p><a href="https://imgchr.com/i/nRXsQf"><img src="https://s2.ax1x.com/2019/09/16/nRXsQf.jpg" alt="nRXsQf.jpg"></a></p><h2 id="Search-Replace"><a href="#Search-Replace" class="headerlink" title="Search/Replace"></a>Search/Replace</h2><p><a href="https://imgchr.com/i/nRXrSP"><img src="https://s2.ax1x.com/2019/09/16/nRXrSP.jpg" alt="nRXrSP.jpg"></a></p><h2 id="Usage-Search"><a href="#Usage-Search" class="headerlink" title="Usage Search"></a>Usage Search</h2><p><a href="https://imgchr.com/i/nRXyy8"><img src="https://s2.ax1x.com/2019/09/16/nRXyy8.jpg" alt="nRXyy8.jpg"></a></p><h2 id="VCS-Local-History"><a href="#VCS-Local-History" class="headerlink" title="VCS/Local History"></a>VCS/Local History</h2><p><a href="https://imgchr.com/i/nRX6OS"><img src="https://s2.ax1x.com/2019/09/16/nRX6OS.jpg" alt="nRX6OS.jpg"></a></p>]]></content>
      
      
      <categories>
          
          <category> jetbrains </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tomcat snippet</title>
      <link href="/2016/12/16/tomcat%20snippet/"/>
      <url>/2016/12/16/tomcat%20snippet/</url>
      
        <content type="html"><![CDATA[<h3 id="ÈÖçÁΩÆÈ°π"><a href="#ÈÖçÁΩÆÈ°π" class="headerlink" title="ÈÖçÁΩÆÈ°π"></a>ÈÖçÁΩÆÈ°π</h3><ul><li>È°πÁõÆÈÉ®ÁΩ≤Âà∞linuxÁöÑtomcat‰∏≠ÔºåÈ™åËØÅÁ†ÅÂú®È°µÈù¢‰∏≠Âà∑Êñ∞‰∏ç‰∫ÜÔºåÈúÄË¶Å‰øÆÊîπ<code>catalina.sh</code>,Ê∑ªÂä†<code>JAVA_OPTS=&quot;$JAVA_OPTS -Djava.awt.headless=true&quot;</code>ÈÖçÁΩÆ</li></ul><h3 id="ËÆæÁΩÆËôöÊãüË∑ØÂæÑÁöÑ‰∏§ÁßçÊñπÊ≥ï"><a href="#ËÆæÁΩÆËôöÊãüË∑ØÂæÑÁöÑ‰∏§ÁßçÊñπÊ≥ï" class="headerlink" title="ËÆæÁΩÆËôöÊãüË∑ØÂæÑÁöÑ‰∏§ÁßçÊñπÊ≥ï"></a>ËÆæÁΩÆËôöÊãüË∑ØÂæÑÁöÑ‰∏§ÁßçÊñπÊ≥ï</h3><ul><li>‰ΩøÁî®tomcatËá™Ë∫´ËÆæÁΩÆËôöÊãüË∑ØÂæÑ</li></ul><ol><li><p>Âú®tomcatÁöÑserver.xmlÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÈÖçÁΩÆcontextÊ†áÁ≠æ</p><p>ContextÊ†áÁ≠æ‰∏≠ÁöÑÁõ∏ÂÖ≥Â±ûÊÄßÔºö</p><ul><li>path: ÊåáÂÆöËÆøÈóÆËØ•webÂ∫îÁî®ÁöÑURLÂÖ•Âè£ÔºåÂç≥ËôöÊãüÊñá‰ª∂ÁõÆÂΩï</li><li>docBase:‰∏∫ËÆøÈóÆÁöÑÁúüÂÆûË∑ØÂæÑ</li><li>reloadable:Â¶ÇÊûúËøô‰∏™Â±ûÊÄßËÆæ‰∏∫trueÔºåtomcatÊúçÂä°Âô®Âú®ËøêË°åÁä∂ÊÄÅ‰∏ã‰ºöÁõëËßÜÂú®WEB-INF/classesÂíåWEB-INF/libÁõÆÂΩï‰∏ãclassÊñá‰ª∂ÁöÑÊîπÂä®Ôºå Â¶ÇÊûúÁõëÊµãÂà∞ÊúâclassÊñá‰ª∂Ë¢´Êõ¥Êñ∞ÁöÑÔºåÊúçÂä°Âô®‰ºöËá™Âä®ÈáçÊñ∞Âä†ËΩΩWebÂ∫îÁî®„ÄÇ </li></ul></li><li><p>Â¶ÇÊûúËøô‰∫ã‰ΩøÁî®ideaÂêØÂä®È°πÁõÆÔºåÈúÄË¶ÅÂ∞ÜDeploy applications configured in Tomcat instanceÂãæ‰∏ä </p></li></ol><ul><li><p>ÂçïÁã¨ËÆæÁΩÆIDEAËøõË°åËÆæÁΩÆËôöÊãüË∑ØÂæÑ</p><ol><li><p>‰∏äÂõæÁöÑ‰∏≠<code>Deploy applications configured in Tomcat instance</code>‰∏çË¶ÅÂãæ‰∏ä </p></li><li><p>ÈÄâ‰∏≠<code>edit configurations</code>ÔºåÁÇπÂáªÂä†Âè∑ÊåâÈíÆÔºåÈÄâÊã©ÂÆûÈôÖË∑ØÂæÑÔºåÂπ∂Âú®<code>Appication context</code>‰∏≠Â°´ÂÜôËôöÊãüË∑ØÂæÑ„ÄÇ</p></li></ol></li></ul><h3 id="ËÆæÁΩÆURLËØ∑Ê±ÇÂèÇÊï∞ÈïøÂ∫¶"><a href="#ËÆæÁΩÆURLËØ∑Ê±ÇÂèÇÊï∞ÈïøÂ∫¶" class="headerlink" title="ËÆæÁΩÆURLËØ∑Ê±ÇÂèÇÊï∞ÈïøÂ∫¶"></a>ËÆæÁΩÆURLËØ∑Ê±ÇÂèÇÊï∞ÈïøÂ∫¶</h3><ul><li><p>ÈóÆÈ¢òÊèèËø∞</p><p>postËØ∑Ê±ÇÔºåÊú¨Ë∫´ËØ∑Ê±ÇÂèÇÊï∞Êó†Â§ßÂ∞èÈôêÂà∂Ôºå‰ΩÜÊòØ‰∏ÄËà¨ÁöÑÊúçÂä°Âô®ÂÉètomcatÈÉΩÊúâÈªòËÆ§Â§ßÂ∞èÔºåÂ¶ÇÊûú‰º†ËæìÁöÑÂèÇÊï∞Ë∂ÖËøá‰∫ÜÈªòËÆ§Â§ßÂ∞èÔºåÂàô‰ºöÊä•Èîô<code>http post request header is too large</code></p></li><li><p>Ëß£ÂÜ≥ÂäûÊ≥ï</p><p>Âú®server.xml‰∏≠<code>&lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;  </code>ÔºåÊ∑ªÂä†ËÆæÁΩÆÈ°π<code>maxHttpHeaderSize =&quot;102400&quot; </code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring snippet</title>
      <link href="/2016/10/16/spring%20snippet/"/>
      <url>/2016/10/16/spring%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="Áü•ËØÜÁÇπ"><a href="#Áü•ËØÜÁÇπ" class="headerlink" title="Áü•ËØÜÁÇπ"></a>Áü•ËØÜÁÇπ</h1><h2 id="‰º†JSONÂ≠óÁ¨¶‰∏≤-RequestBodyÊé•Êî∂"><a href="#‰º†JSONÂ≠óÁ¨¶‰∏≤-RequestBodyÊé•Êî∂" class="headerlink" title="‰º†JSONÂ≠óÁ¨¶‰∏≤+@RequestBodyÊé•Êî∂"></a>‰º†JSONÂ≠óÁ¨¶‰∏≤+@RequestBodyÊé•Êî∂</h2><p>ÂâçÁ´Ø</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">icheckDelete</span><span class="params">(url)</span></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> parms = &#123;</span><br><span class="line">      list : array <span class="comment">//ËøôÊòØ‰∏™Êï∞ÁªÑ</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">      dataType: <span class="string">&quot;JSON&quot;</span>,</span><br><span class="line">      contentType:<span class="string">&#x27;application/json;charset=UTF-8&#x27;</span>,<span class="comment">//ÂÖ≥ÈîÆÊòØË¶ÅÂä†‰∏äËøôË°å</span></span><br><span class="line">      traditional:<span class="keyword">true</span>,<span class="comment">//Ëøô‰ΩøjsonÊ†ºÂºèÁöÑÂ≠óÁ¨¶‰∏ç‰ºöË¢´ËΩ¨Á†Å</span></span><br><span class="line">      data: JSON.stringify(parms),</span><br><span class="line">      type: <span class="string">&quot;DELETE&quot;</span>, </span><br><span class="line">      timeout: <span class="number">20000</span>,</span><br><span class="line">      url: url,</span><br><span class="line">      success : function () &#123;</span><br><span class="line">          alert(<span class="string">&quot;Âà†Èô§ÊàêÂäüÔºÅ&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      error : function (data)&#123;</span><br><span class="line">          alert(data.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>}</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- ÂêéÁ´Ø</span><br><span class="line">Controller:</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;deleteList&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">(<span class="meta">@RequestBody</span> DeleteListRequest request)</span> <span class="keyword">throws</span> WebTransException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ÈÄªËæë‰ª£Á†Å */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="RESTFUL"><a href="#RESTFUL" class="headerlink" title="RESTFUL"></a>RESTFUL</h2><ul><li> <code>@RestController</code> class level annotation and then add the following <code>@RequestMapping</code> to the class</li></ul><h1 id="springboot"><a href="#springboot" class="headerlink" title="springboot"></a>springboot</h1><h2 id="ÈÖçÁΩÆÊñá‰ª∂"><a href="#ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="ÈÖçÁΩÆÊñá‰ª∂"></a>ÈÖçÁΩÆÊñá‰ª∂</h2><ul><li><p>```<br>bootstrap.ymlÔºàbootstrap.propertiesÔºâÁî®Êù•Á®ãÂ∫èÂºïÂØºÊó∂ÊâßË°åÔºåÂ∫îÁî®‰∫éÊõ¥Âä†Êó©ÊúüÈÖçÁΩÆ‰ø°ÊÅØËØªÂèñÔºåÂ¶ÇÂèØ‰ª•‰ΩøÁî®Êù•ÈÖçÁΩÆapplication.yml‰∏≠‰ΩøÁî®Âà∞ÂèÇÊï∞Á≠â</p><p>application.ymlÔºàapplication.properties) Â∫îÁî®Á®ãÂ∫èÁâπÊúâÈÖçÁΩÆ‰ø°ÊÅØÔºåÂèØ‰ª•Áî®Êù•ÈÖçÁΩÆÂêéÁª≠ÂêÑ‰∏™Ê®°Âùó‰∏≠ÈúÄ‰ΩøÁî®ÁöÑÂÖ¨ÂÖ±ÂèÇÊï∞Á≠â„ÄÇ</p><p>Âä†ËΩΩÈ°∫Â∫èÔºöbootstrap.yml &gt; application.yml &gt; application-dev(prod).yml </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">## ÈóÆÈ¢òÈöèËÆ∞</span><br><span class="line"></span><br><span class="line">### Spring BootÈÄöËøáMybatisÔºå‰ΩøÁî®mapperÊé•Âè£ÂíåxmlÈÖçÁΩÆsqlÔºåËøûÊé•Êï∞ÊçÆÂ∫ì</span><br><span class="line"></span><br><span class="line">- È¶ñÂÖàÂú®ÈÖçÁΩÆÊñá‰ª∂application.properties</span><br><span class="line"></span><br><span class="line">  ```properties</span><br><span class="line">  spring.datasource.url=jdbc:mysql://localhost:3306/test</span><br><span class="line">  spring.datasource.username=***</span><br><span class="line">  spring.datasource.password=***</span><br><span class="line">  spring.datasource.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">  </span><br><span class="line">  #mybatis.typeAliasesPackageÔºö‰∏∫ÂÆû‰ΩìÂØπË±°ÊâÄÂú®ÁöÑÂåÖÔºåË∑üÊï∞ÊçÆÂ∫ìË°®‰∏Ä‰∏ÄÂØπÂ∫î</span><br><span class="line">  #mybatis.mapperLocationsÔºömapperÊñá‰ª∂ÁöÑ‰ΩçÁΩÆ</span><br><span class="line">  </span><br><span class="line">  mybatis.typeAliasesPackage=com.xxx.model</span><br><span class="line">  mybatis.mapperLocations=classpath:mybatis/mapper/*Mapper.xml</span><br></pre></td></tr></table></figure></li><li><p>Âú®ÂêØÂä®Á±ªApplication.java‰∏≠ÂÜô‰∏äÈÖçÁΩÆ‰ø°ÊÅØ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.xxx.dao&quot;)</span> <span class="comment">// mybatisÊâ´ÊèèË∑ØÂæÑÔºåÈíàÂØπÁöÑÊòØÊé•Âè£MapperÁ±ª</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DailyreportApplication</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DailyreportApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>mysqlËøûÊé•ÂºÇÂ∏∏<code>java.sql.SQLException: Value &#39;0000-00-00&#39; can not be represented as java.sql.Date</code></li></ol><ul><li><p>Ëß£ÂÜ≥ÂäûÊ≥ï</p><p><code>jdbc:mysql://yourserver:3306/yourdatabase?zeroDateTimeBehavior=convertToNull </code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java Concept of The Day</title>
      <link href="/2016/10/16/Java%20Concept%20of%20The%20Day/"/>
      <url>/2016/10/16/Java%20Concept%20of%20The%20Day/</url>
      
        <content type="html"><![CDATA[<ul><li><p>Stack is used only for execution purpose. Heap is used for storage purpose.</p><h3 id="Non-Static-Members-And-Their-Memory-Management-In-Java"><a href="#Non-Static-Members-And-Their-Memory-Management-In-Java" class="headerlink" title="Non-Static Members And Their Memory Management In Java"></a>Non-Static Members And Their Memory Management In Java</h3></li><li><p>Non-Static variables and Non-Static methods are non-static components of a class. These are also called instance components of a class. Non-static components are stored inside the object memory. Each object will have their own copy of non-static components. But,  static components are common to all objects of that class.</p><h3 id="IIB-Instance-Initialization-Block"><a href="#IIB-Instance-Initialization-Block" class="headerlink" title="IIB-Instance Initialization Block"></a>IIB-Instance Initialization Block</h3></li><li><p>IIB is used to initialize instance variables or non-static variables.</p></li><li><p>IIB blocks will not be called from the constructor in which this() statement is written as a first statement. </p><h3 id="super-and-this-keywords-in-java"><a href="#super-and-this-keywords-in-java" class="headerlink" title="super and this keywords in java"></a>super and this keywords in java</h3></li><li><p>super class constructor is called by super() calling statement. You can‚Äôt use super() calling statement outside the constructor. By default, super() calling statement is the first statement in any constructor. </p></li><li><p>this() is the calling statement to same class constructor. It must be used within constructor only. If it is used, it must be the first statement in the constructor.</p></li><li><p>You can‚Äôt use super and this keywords in a static method and in a static initialization block even though you are referring static members.</p><h3 id="10-Points-Every-Java-Programmer-Should-Know-About-final-keyword-in-java"><a href="#10-Points-Every-Java-Programmer-Should-Know-About-final-keyword-in-java" class="headerlink" title="10 Points Every Java Programmer Should Know About final keyword in java"></a>10 Points Every Java Programmer Should Know About final keyword in java</h3></li><li><p> Any class or any method can be either abstract or final but not both. abstract and final are totally opposite. Because, abstract class or abstract method must be implemented or modified in the sub classes but final does not allow this. This creates an ambiguity.</p></li><li><p> The global variable which is declared as final and static remains unchanged for the whole execution. Because, Static members are stored in the class memory and they are loaded only once in the whole execution. They are common to all objects of the class. If you declare static variables as final, any of the objects can‚Äôt change their value as it is final. Therefore, variables declared as final and static are sometimes referred to as Constants. All fields of interfaces are referred as constants, because they are final and static by default.</p><h3 id="Garbage-Collection-And-finalize-method-In-Java"><a href="#Garbage-Collection-And-finalize-method-In-Java" class="headerlink" title="Garbage Collection And finalize() method In Java"></a>Garbage Collection And finalize() method In Java</h3></li><li><p>Whenever you run a java program, JVM creates three threads. 1) main thread   2) Thread Scheduler   3) Garbage Collector Thread. In these three threads, main thread is a user thread and remaining two are daemon threads which run in background.</p><h3 id="Access-Modifiers-In-Java"><a href="#Access-Modifiers-In-Java" class="headerlink" title="Access Modifiers In Java"></a>Access Modifiers In Java</h3></li><li><p>Class can not be a private except inner classes. Inner classes are nothing but again members of outer class. So members of a class (field, method, constructor and inner class) can be private but not the class itself.<br><img src="https://i.imgur.com/6h3llC0.jpg"></p><h3 id="What-Are-Access-And-Non-Access-Modifiers-In-Java"><a href="#What-Are-Access-And-Non-Access-Modifiers-In-Java" class="headerlink" title="What Are Access And Non-Access Modifiers In Java?"></a>What Are Access And Non-Access Modifiers In Java?</h3><p><img src="https://i.imgur.com/nB7eV1i.jpg"></p><h3 id="Type-Casting-In-Java"><a href="#Type-Casting-In-Java" class="headerlink" title="Type Casting In Java"></a>Type Casting In Java</h3><p>Please note that by using casting, data can not be modified but only type of data can be modified.</p></li><li><p>Primitive Casting.</p><ul><li>memory size <code>byte &lt; short &lt; int &lt; long &lt; float &lt; double.</code><ul><li>Auto Widening</li><li>Explicit Narrowing</li></ul></li></ul></li><li><p>Derived Casting</p><ul><li>Auto-up Casting<ul><li>Explicit Down Casting<h3 id="Abstraction-In-Java"><a href="#Abstraction-In-Java" class="headerlink" title="Abstraction In Java"></a>Abstraction In Java</h3></li></ul></li></ul></li><li><p>Abstract classes contain abstract methods (you can refer them as ideas) so that they can be implemented in sub classes according to their requirements. They are also called as incomplete classes as they have some unimplemented abstract methods(ideas).</p><h3 id="Interfaces-In-Java"><a href="#Interfaces-In-Java" class="headerlink" title="Interfaces In Java"></a>Interfaces In Java</h3></li><li><p>Interfaces in java are very much similar to abstract classes but interfaces contain only abstract methods (you can refer to them as only ideas). Abstract classes may contain both abstract methods as well as concrete methods. But interfaces must contain only abstract methods. Concrete methods are not allowed in interfaces. Therefore, Interfaces show 100% abstractness.</p><h3 id="Auto-Widening-Vs-Auto-Boxing-Vs-Auto-UpCasting-In-Java"><a href="#Auto-Widening-Vs-Auto-Boxing-Vs-Auto-UpCasting-In-Java" class="headerlink" title="Auto-Widening Vs Auto-Boxing Vs Auto-UpCasting In Java"></a>Auto-Widening Vs Auto-Boxing Vs Auto-UpCasting In Java</h3><p><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/widening-Vs-boxing.png?x70034"></p><h3 id="Exception-Handing"><a href="#Exception-Handing" class="headerlink" title="Exception Handing"></a>Exception Handing</h3><p>java.lang.Throwable is the super class of all errors and exceptions in java.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/Exceptions.png?x70034"><br><img src="https://i.imgur.com/xHC2xQo.jpg"></p></li><li><p>java.lang.Error class represents the errors which are mainly caused by the environment in which application is running. For example, OutOfMemoryError occurs when JVM runs out of memory or StackOverflowError occurs when stack overflows.</p></li><li><p>Where as java.lang.Exception class represents the exceptions which are mainly caused by the application itself. For example, NullPointerException occurs when an application tries to access null object or ClassCastException occurs when an application tries to cast incompatible class types. </p><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3></li><li><p>Array can hold the references to any type of objects. It is important to note that array can contain only references to the objects, not the objects itself. </p><h3 id="Threads"><a href="#Threads" class="headerlink" title="Threads"></a>Threads</h3></li><li><p>Processes and threads can be diagrammatically represented as this<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/ThreadsAndProcesses.png?x70034"></p></li><li><p>User threads are threads which are created by the application or user.</p></li><li><p>Daemon threads are threads which are mostly created by the JVM.</p></li><li><p>There are three constant fields in java.lang.Thread class related to priority of a thread. They are,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> MIN_PRIORITY   ‚Äî&gt; It defines the lowest priority that a thread can have and It‚Äôs value is 1.</span><br><span class="line">NORM_PRIORITY  ‚Äî&gt; It defines the normal priority that a thread can have and it‚Äôs value is 5.</span><br><span class="line">MAX_PRIORITY  ‚Äî&gt; It defines the highest priority that a thread can have and it‚Äôs value is 10.</span><br></pre></td></tr></table></figure><p>  The priority of a main thread, if explicitly not set, is always 5 i.e NORM_PRIORITY.</p></li><li><p>avoid thread interference </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> By declaring the method as synchronized.</span><br><span class="line">By declaring the variables as final.</span><br><span class="line">By declaring the variable as volatile.</span><br><span class="line">By creating the immutable objects.</span><br><span class="line">By using Atomic operations.</span><br><span class="line">By restricting the access to same object by multiple threads.</span><br></pre></td></tr></table></figure></li><li><p>The Logic Behind The Synchronization In Java :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  The synchronization in java is built around an entity called object lock or monitor. Here is the brief description about lock or monitor.</span><br><span class="line">- Whenever an object is created to any class, an object lock is created and is stored inside the object.</span><br><span class="line">- One object will have only one object lock associated with it.</span><br><span class="line">- Any thread wants to enter into synchronized methods or blocks of any object, they must acquire object lock associated with that object and release the lock after they are done with the execution.</span><br><span class="line">- The other threads which wants to enter into synchronized methods of that object have to wait until the currently executing thread releases the object lock.</span><br><span class="line">- To enter into static synchronized methods or blocks, threads have to acquire class lock associated with that class as static members are stored inside the class memory.</span><br></pre></td></tr></table></figure></li><li><p>mutex</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Shared</span><br><span class="line">&#123;</span><br><span class="line">    static void staticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (Shared.class)</span><br><span class="line">        &#123;</span><br><span class="line">            //static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void NonStaticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (this)</span><br><span class="line">        &#123;</span><br><span class="line">            //Non-static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void anotherNonStaticMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        synchronized (new Shared())</span><br><span class="line">        &#123;</span><br><span class="line">            //Non-static synchronized block</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>10 Points-To-Remember About Synchronization In Java :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. You can use synchronized keyword only with methods but not with variables, constructors, static initializer and instance initializers.</span><br><span class="line">2. Constructors, Static initializer and instance initializer can‚Äôt be declared with synchronized keyword, but they can contain synchronized blocks.</span><br><span class="line">3. Both static and non-static methods can use synchronized keyword. For static methods, thread need class level lock and for non-static methods, thread need object level lock.</span><br><span class="line">4. It is possible that both static synchronized and non-static synchronized methods can run simultaneously. Because, static methods need class level lock and non-static methods need object level lock.</span><br><span class="line">5. A method can contain any number of synchronized blocks. This is like synchronizing multiple parts of a method.</span><br><span class="line">6. Synchronization blocks can be nested.</span><br><span class="line">7. Lock acquired by the thread before executing a synchronized method or block must be released after the completion of execution, no matter whether execution is completed normally or abnormally (due to exceptions).</span><br><span class="line">8. Synchronization in java is Re-entrant in nature. A thread can not acquire a lock that is owned by another thread. But, a thread can acquire a lock that it already owns. That means if a synchronized method gives a call to another synchronized method which needs same lock, then currently executing thread can directly enter into that method or block without acquiring the lock.</span><br><span class="line">9. synchronized method or block is very slow. They decrease the performance of an application. So, special care need to be taken while using synchronization. Use synchronization only when you needed it the most.</span><br><span class="line">10. Use synchronized blocks instead of synchronized methods. Because, synchronizing some part of a method improves the performance than synchronizing the whole method.</span><br></pre></td></tr></table></figure></li><li><p>wait(), notify() and notifyAll()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">These methods are final methods of java.lang.Object class. That means every class in java will have these methods. Below is the method signatures of these methods.</span><br><span class="line">1. public final void wait() throws InterruptedException</span><br><span class="line">This method tells the currently executing thread to release the lock of this object and wait until some other thread acquires the same lock and notify it using either notify() or notifyAll() methods. This method throws InterruptedException if waiting thread is interrupted.</span><br><span class="line">2. public final void notify()</span><br><span class="line">This method wakes up one thread randomly that called wait() method on this object.</span><br><span class="line">3. public final void notifyAll()</span><br><span class="line">This method wakes up all the threads that called wait() method on this object. But, only one thread will acquire lock of this object depending upon the priority.</span><br><span class="line"></span><br><span class="line">Important Note : These three methods must be called within synchronized method or block. Any thread which calls these methods must have lock of that object.</span><br></pre></td></tr></table></figure></li><li><p>Some Things-To-Remember About wait(), notify() and notifyAll() :</p><ul><li>If a thread calls notify() method and more than one threads are waiting for the object lock, then only one thread will be notified randomly.</li><li>When a thread calls notifyAll() method on an object, it notifies all the threads which are waiting for this object lock. But, only one thread will acquire this object lock depending upon priority.</li><li>When you call sleep() method on a thread, thread goes to sleep with holding the object lock with it. But, if you call wait() method, thread releases the object lock and goes for sleep. This is the main difference between wait() and sleep() methods.</li><li>wait(), notify() and notifyAll() are final methods of java.lang.Object class not java.lang.Thread class.</li><li>wait(), notify() and notifyAll() ‚Äì all these three methods throw IllegalMonitorStateException if the calling thread does not owns the object lock.</li><li>wait() method is overloaded in Object class. There are two more wait() methods available in Object class.</li></ul></li><li><p>Thread Life Cycle OR Thread States In Java</p><ul><li>NEW,    A thread will be in this state before calling start() method.<ul><li>RUNNABLE, A thread will be in this state after calling the start() method.</li><li>BLOCKED, A thread will be in this state when a thread is waiting for object lock to enter into synchronized method/block or a thread will be in this state if deadlock occurs. </li><li>WAITING, A thread will be in this state when wait() or join() method is called.</li><li>TIMED_WAITING, A thread will be in this state when thread is sleeping. i.e A thread will be in this state when sleep() or wait() with timeOut or join() with timeOut is called.</li><li>TERMINATED, A thread will be in this state once it finishes it‚Äôs execution.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/JavaThreadLifeCycle.png?x70034"></li></ul></li></ul></li><li><p>7 Things Every Java Programmer Should Know About Threads In Java</p><ul><li><strong>Runnable interface vs Thread class</strong> : I am of opinion that when multiple threads need to execute same task, then use Runnable interface. If multiple threads need to execute different tasks, then go for Thread class.</li></ul></li><li><p>Difference Between wait() and sleep() Methods In Java</p><ul><li><p><strong>wait()</strong>:  releases the lock or monitor</p><ul><li><strong>sleep()</strong>: not  releases the lock or monitor</li></ul><p><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/02/WaitAndSleep.png"></p></li></ul></li><li><p>Extends Thread Vs Implements Runnable In Java<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/12/RunnableVsThread.png"><br>From the above all findings, it is clear that ‚ÄúImplements Runnable‚Äù is the preferred method to create the threads in java.</p></li><li><p>How To Stop A Thread In Java</p><ul><li>One is using boolean variable and second one is using interrupt() method. In this post, we will discuss both of these methods.</li></ul></li><li><p>Difference Between notify And notifyAll In Java</p><ul><li>wait(), notify() and notifyAll() must be called within synchronized method or synchronized block.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/03/NotifyVsNotifyAll.png"></li></ul></li><li><p>Difference Between BLOCKED Vs WAITING States In Java</p><ul><li>There are six thread states in java. They are <strong>NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING and TERMINATED</strong>.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/06/WaitingVsBlocked.png"></li></ul></li></ul><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><ul><li>strings are treated as objects.</li><li>JVM allocates some memory specially meant for string literals. This part of the heap memory is called String Constant Pool.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String s1 = &quot;abc&quot;; </span><br><span class="line">String s2 = &quot;xyz&quot;;</span><br><span class="line">String s3 = &quot;123&quot;;</span><br><span class="line">String s4 = &quot;A&quot;;</span><br><span class="line">   String s5 = new String(&quot;abc&quot;);</span><br><span class="line">char[] c = &#123;&#x27;J&#x27;, &#x27;A&#x27;, &#x27;V&#x27;, &#x27;A&#x27;&#125;;</span><br><span class="line">String s6 = new String(c);</span><br><span class="line">String s7 = new String(new StringBuffer());</span><br></pre></td></tr></table></figure><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/String-Constant-Pool.png"></li><li>String Constant Pool is allocated to an object depending upon it‚Äôs content. There will be no two objects in the pool having the same content.</li><li>```<br>‚ÄúWhen you create a string object using string literal, JVM first checks the content of to be created object. If there exist an object in the pool with the same content,     then it returns the reference of that object. It doesn‚Äôt create new object. If the content is different from the existing objects then only it creates new object.‚Äù<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">In simple words, there can not be two string objects with same content in the string constant pool. But, there can be two string objects with the same content in the heap memory.</span><br></pre></td></tr></table></figure></li><li>Immutability is the fundamental property of string objects. In whatever way you create the string objects, either using string literals or using new operator, they are immutable.</li></ul><h3 id="Generic"><a href="#Generic" class="headerlink" title="Generic"></a>Generic</h3><ul><li><p>Defining Generic Class</p><ul><li>Generics Work Only With Derived Types</li></ul></li><li><p>Rules To Follow While Implementing Generic Interfaces</p><ul><li>Only generic classes can implement generic interfaces.<br><code>class GenericClass&lt;T&gt; implements GenericInterface&lt;T&gt;</code><br>-A normal class can implement a generic interface if type parameter of generic interface is a wrapper class. For example, below implementation of GenericInterface is legal.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface GenericInterface&lt;Integer&gt;&#123;</span><br><span class="line">    //Generic interface with Integer as type parameter</span><br><span class="line">&#125;</span><br><span class="line">class NormalClass implements GenericInterface&lt;Integer&gt;&#123;</span><br><span class="line">    //Normal class implementing generic interface</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>Class implementing generic interface at least must have same number and same type of parameters and at most can have any number and any type of parameters.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class GenericClass2&lt;T, V&gt; implements GenericInterface&lt;T&gt;&#123;</span><br><span class="line">  //Class with two type parameters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Define Methods And Constructors As Generic</p><ul><li>Generic Methods:<br><code>&lt;type-Parameters&gt; return_type method_name(parameter list)</code></li><li>Constructors As Generics,As we all know that constructors are like methods but without return types</li></ul></li><li><p>Bounded Types</p><ul><li>the syntax for declaring Bounded type parameters.<br><code>&lt;T extends SuperClass&gt;</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T extends Number&gt; void printNumbers(T[] t)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Wildcard arguments </p><ul><li>The syntax for declaring this type of wildcard arguments is:<code>GenericType&lt;?&gt;</code></li><li>To specify an upper bound for wildcards:<code>GenericType&lt;? extends SuperClass&gt;</code></li><li>specify a lower bound for wildcard argument using super clause:<code>GenericType&lt;? super SubClass&gt;</code></li></ul></li><li><p>Type Erasure</p></li></ul><h3 id="Collection-Framework"><a href="#Collection-Framework" class="headerlink" title="Collection Framework"></a>Collection Framework</h3><ul><li><p>Collection Framework ‚Äì Class Hierarchy</p><ul><li>All classes and interfaces related to Collection Framework are placed in java.util package.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/CollectionHierarchy.png"></li></ul></li><li><p>Collection Framework ‚Äì Collection Interface<br>  <img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/CollectionInterface.png"></p><ul><li>equals() and hashcode() methods in the Collection interface are not the methods of java.lang.Object class. Because, interfaces does not inherit from Object class. Only classes in java are inherited from Object class. Any classes implementing Collection interface must provide their own version of equals() and hashcode() methods or they can retain default version inherited from Object class.</li></ul></li><li><p>Collection Framework ‚Äì List Interface</p><ul><li>the class diagram of List interfaceÔºö<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/ListInterface.png"></li></ul></li><li><p>Collection Framework ‚Äì The ArrayList Class</p><ul><li>Default initial capacity of an ArrayList is 10.<ul><li>the hierarchy diagram of ArrayList class.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/ArrayListClass.png"></li><li>Properties Of ArrayList :<ul><li>Size of the ArrayList is not fixed. It can increase and decrease dynamically as we add or delete the elements.<ul><li>ArrayList can have any number of null elements.</li><li>ArrayList can have duplicate elements.</li><li>As ArrayList implements RandomAccess, you can get, set, insert and remove elements of the ArrayList from  any arbitrary position.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/ArrayListTemplateNew.png"></li></ul></li></ul></li></ul></li></ul></li><li><p>Differences Between Array Vs ArrayList In Java</p><ul><li>Array is static in nature,ArrayList is dynamic in nature<ul><li>when you try to add elements to ArrayList beyond its capacity, it creates the new array with increased size and copies the elements from old array to new array.</li><li>if adding an element requires resizing of an ArrayList, then it gets slightly slower as it involves creating a new array in the background and copying all elements from old array to new array.</li><li>Array can hold both primitive data types (int, float‚Ä¶.) as well as objects. Where as ArrayList can hold only objects. If you try to insert primitive data into ArrayList, data is automatically boxed into corresponding wrapper class.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/09/ArrayVsArrayList.png"></li><li>ArrayList to Array,<strong>toArray()</strong> method returns an array containing all elements of the ArrayList.<code> Object[] array = list.toArray();</code></li><li>Array To ArrayList:<ul><li>Arrays.asList() <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(array));</span><br></pre></td></tr></table></figure><ul><li>Collection.addAll()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">Collections.addAll(list, array);</span><br></pre></td></tr></table></figure></li><li>ArrayList.addAll()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">list.addAll(Arrays.asList(array));</span><br></pre></td></tr></table></figure></li><li>Using streams from java 8<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] array = new String[] &#123;&quot;ANDROID&quot;, &quot;JSP&quot;, &quot;JAVA&quot;, &quot;STRUTS&quot;, &quot;HADOOP&quot;, &quot;JSF&quot;&#125;;</span><br><span class="line">List&lt;Object&gt; list = Arrays.stream(array).collect(Collectors.toList());</span><br></pre></td></tr></table></figure><img src="https://javaconceptoftheday.com/wp-content/uploads/2016/07/ArrayToArrayList.png"></li></ul></li></ul></li></ul></li></ul></li><li><p>Remove Duplicate Elements From ArrayList</p><ul><li>Using HashSet<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HashSet&lt;String&gt; set = new HashSet&lt;String&gt;(listWithDuplicateElements);</span><br><span class="line">ArrayList&lt;String&gt; listWithoutDuplicateElements = new ArrayList&lt;String&gt;(set);</span><br></pre></td></tr></table></figure><ul><li>Using LinkedHashSet<br><code>LinkedHashSet&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(listWithDuplicateElements);</code><br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/07/RemovingDuplicateElementsFromArrayList.png"></li></ul></li></ul></li><li><p>Collection Framework ‚Äì The Vector Class</p><ul><li>Vector class is synchronized. <ul><li>All methods of Vector class are synchronized </li><li>capacity of the vector will be doubled whenever size exceeds capacity.</li><li>Why Not To Use Vector Class In Your Code<ul><li>you can achieve thread safe ArrayList by using synchronizedList() method of Collections class. </li></ul></li></ul></li></ul></li><li><p>Java Collection Framework ‚Äì The LinkedList Class</p><ul><li>In general terms, LinkedList is a data structure where each element consist of three things. First one is the reference to previous element, second one is the actual value of the element and last one is the reference to next element.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/12/HowLinkedListWorks.png"></li></ul></li><li><p>Collection Framework ‚Äì The Queue Interface</p><ul><li>First-In-First-Out.<ul><li>You can‚Äôt add or get or set elements at an arbitrary position in the queues.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/HowQueueWorks.png"></li><li>Properties Of Queue :<ul><li>Null elements are not allowed in the queue. <ul><li>Queue can have duplicate elements.</li><li>Unlike a normal list, queue is not random access. i.e you can‚Äôt set or insert or get elements at an arbitrary positions.</li><li>In the Queue Interface, there are two methods to obtain and remove the elements from the head of the queue. They are poll() and remove(). The difference between them is, poll() returns null if the queue is empty and remove() throws an exception if the queue is empty.</li><li>There are two methods in the Queue interface to obtain the elements but don‚Äôt remove. They are peek() and element(). peek() returns null if the queue is empty and element() throws an exception if the queue is empty.</li></ul></li></ul></li></ul></li></ul></li><li><p>Collection Framework ‚Äì The Deque Interface</p><ul><li>the hierarchy diagram of Deque interfaceÔºö<br>  <img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/Deque.png"></li><li>The main advantage of Deque is that you can use it as both Queue (FIFO) as well as Stack (LIFO).</li><li>Deque is nothing but the double ended queue. That means, you can insert, retrieve and remove the elements from both the ends.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2014/11/HowDequeWorks.png"></li></ul></li><li><p>Collection Framework ‚Äì The Set Interface</p><ul><li>Order of elements in a set is implementation dependent. HashSet elements are ordered on hash code of elements. TreeSet elements are ordered according to supplied Comparator (If no Comparator is supplied, elements will be placed in ascending order) and LinkedHashSet maintains insertion order.</li><li>The HashSet internally uses HashMap to store the objects. The elements you insert in HashSet will be stored as keys of that HashMap object and their values will be a constant called PRESENT. This constant is defined as private static final Object PRESENT = new Object() in the source code of HashSet class.</li><li>HashSet can have maximum one null element.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/01/HowHashSetWorks.png"></li><li>LinkedHashSet internally uses LinkedHashMap to store it‚Äôs elements just like HashSet which internally uses HashMap to store it‚Äôs elements.</li><li>LinkedHashSet maintains insertion order. This is the main difference between LinkedHashSet and HashSet.</li><li>SortedSet elements are sorted according to supplied Comparator. If you don‚Äôt mention any Comparator while creating a SortedSet, elements will be placed in ascending order.</li><li>SortedSet Inserted elements must be of Comparable type and they must be mutually Comparable.</li><li>Elements inserted in the TreeSet must be of Comparable type and elements must be mutually comparable. </li><li>TreeSet internally uses TreeMap to store it‚Äôs elements just like HashSet and LinkedHashSet which use HashMap and LinkedHashMap respectively to store their elements.</li></ul></li><li><p>Java Collection Framework ‚Äì The Map Interface<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/01/MapInterface.png"></p><ul><li>Each key-value pairs of the map are stored as Map.Entry objects. Map.Entry is an inner interface of Map interface.</li><li>HashMap doesn‚Äôt maintain any order of elements. LinkedHashMap maintains insertion order of elements. Where as TreeMap places the elements according to supplied Comparator.</li><li>Default initial capacity of HashMap is 16.</li><li>Hashing is nothing but the function or algorithm or method which when applied on any object/variable returns an unique integer value representing that object/variable.</li><li>The capacity of an HashMap is the number of buckets in the hash table. The initial capacity is the capacity of an HashMap at the time of its creation. The default initial capacity of the HashMap is 24 i.e 16. The capacity of the HashMap is doubled each time it reaches the threshold. i.e the capacity is increased to 25=32, 26=64, 27=128‚Ä¶.. when the threshold is reached.</li><li>HashMap internally uses an array of Entry&lt;K, V&gt; objects to store the data.</li><li>HashTable is a legacy class. It is almost considered as due for deprecation. Since JDK 1.5, ConcurrentHashMap is considered as better option than the HashTable.</li></ul></li></ul><h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><ul><li><p>Java Database Connectivity API which is used by the java application to interact with the database.</p><ul><li>JDBC API not directly interacts with the database. It uses JDBC driver of that database to interact with the database.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/06/JavaJDBCDriverDatabase.png"></li><li>JDBC driver is a software component provided along with the database which is required by the JDBC API to interact with the database. Each database will have its own JDBC driver.</li></ul><blockquote><p>In simple terms, JDBC drivers are nothing but the implementations of interfaces provided in the JDBC API (java.sql and javax.sql packages) with respect to a particular database. These implementations are bundled in a JAR file and supplied along with the database. These implementations are used by the JDBC API to interact with that database.</p></blockquote></li></ul><h3 id="Big-O-Notations"><a href="#Big-O-Notations" class="headerlink" title="Big O Notations"></a>Big O Notations</h3><ul><li>Big O notations consist of O and an expression enclosed within ( ). Expression within ( ) represents the number of computations a particular algorithm has to perform to solve a given problem.</li><li><strong>O(1)</strong> represents an algorithm which has to perform exact one computation to solve a problem. O(1) represents an algorithm which takes same time to execute for any size of input data. In other words, O(1) denotes an algorithm which performance is not affected by the size of the input data. <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">boolean isFirstElementZero(int[] inputData)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[0] == 0)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>O(N)</strong> represents an algorithm which has to perform ‚ÄòN‚Äô computations to solve a problem. Where ‚ÄòN‚Äô is the number of elements in input data. That means algorithm will take more time as number of elements in input data increases. In the other words, O(N) denotes an algorithm whose performance is directly proportional to size of the input data.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">boolean searchForElement(int[] inputData, int n)</span><br><span class="line">&#123;</span><br><span class="line">for (int i = 0; i &lt; inputData.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[i] == n)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>O(N^2)</strong> denotes an algorithm which has to perform N^2 computations to solve a problem. Where N is the number of elements in input data. In the other words, O(N^2) represents an algorithm whose performance is directly proportional to square of the size of the input data. The algorithms which have nested iterations over the input data will give O(N^2) performance. Further deeper iterations over the input data will give O(N^3), O(N^4) and so on.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">boolean findDuplicates(int[] inputData)</span><br><span class="line">&#123;</span><br><span class="line">for (int i = 0; i &lt; inputData.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">for (int j = 0; j &lt; inputData.length; j++)</span><br><span class="line">&#123;</span><br><span class="line">if(inputData[i] == inputData[j] &amp;&amp; i!=j)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>O(log N)</strong> represents an algorithm whose number of computations grows linearly as input data grows exponentially. i.e O(log N) represents the algorithms whose execution time grows linearly as input data grows exponentially. That means if an algorithm takes 1 second to compute 10 elements, then it will take 2 seconds to compute 100 elements, 3 seconds to compute 1000 elements and so on. The best example for O(log N) is binary search algorithm which uses divide and conquer rule to search for an element.</li><li><strong>O(2N)</strong> represents an algorithm whose execution time is doubled for every extra element in the input data. For example, if an algorithm takes 4 seconds to compute 2 elements, then it will take 8 seconds to compute 3 elements, 16 seconds for 4 elements, 32 seconds for 5 elements and so on.</li><li><strong>O(N!)</strong> represents an algorithm which has to perform N! computations to solve a problem. Where N is the number of elements in the input data. For example, if an algorithm takes 2 seconds to compute 2 elements, then it will take 6 seconds to compute 3 elements, 24 seconds to compute 4 elements and so on.<br><img src="https://javaconceptoftheday.com/wp-content/uploads/2015/05/Big-O-Notation.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux file command</title>
      <link href="/2016/10/16/linux%20cmd:%20file/"/>
      <url>/2016/10/16/linux%20cmd:%20file/</url>
      
        <content type="html"><![CDATA[<h1 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h1><h2 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -aP &lt;sourceDir&gt; &lt;targetDir&gt;</span><br><span class="line"></span><br><span class="line">cp -r &lt;sourceDir&gt; &lt;targetDir&gt;</span><br></pre></td></tr></table></figure><h3 id="rclone"><a href="#rclone" class="headerlink" title="rclone"></a>rclone</h3><blockquote><p>Built-in retry and performance options</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rclone copy dir1 dir2 \</span><br><span class="line">  --transfers=32 --checkers=32 \</span><br><span class="line">  --fast-list --no-traverse \</span><br><span class="line">  --log-file=rclone_copy.log --progress</span><br></pre></td></tr></table></figure><h3 id="parallel"><a href="#parallel" class="headerlink" title="parallel"></a>parallel</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/source/ -maxdepth 1 -type d | parallel -j 8 &#x27;rclone copy &#123;&#125; /path/to/target/&#123;/&#125; --transfers=32 --checkers=32 --fast-list --buffer-size=512M --max-backlog=100000 --use-mmap --no-traverse --stats=30s --log-file=rclone_&#123;/&#125;.log&#x27;</span><br></pre></td></tr></table></figure><ul><li><p>find Part</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-maxdepth 1 -type d: Finds top-level directories under point3r/ (excludes files at this level and the root itself).</span><br></pre></td></tr></table></figure></li><li><p>parallel Part</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-j 8: Runs 8 parallel rclone jobs, one per subdirectory.</span><br><span class="line">&#123;&#125;: Placeholder for each directory from find.</span><br><span class="line">&#123;/&#125;: Basename of the directory (e.g., subdir1 from the full path).</span><br></pre></td></tr></table></figure></li><li><p>rclone copy Part</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--transfers=16: 16 concurrent file transfers per rclone job.</span><br><span class="line">--checkers=32: 32 concurrent file checks (e.g., verifying existence or integrity).</span><br><span class="line">--fast-list: Uses a single API call to list files (faster for remote filesystems like CephFS).</span><br><span class="line">--buffer-size=512M: 512 MB buffer per transfer (reduces disk I/O waits).</span><br><span class="line">--max-backlog=100000: Allows up to 100,000 files to queue before processing.</span><br><span class="line">--use-mmap: Uses memory-mapped I/O for reads (can speed up large files).</span><br><span class="line">--no-traverse: Skips directory traversal for remote sources, relying on listings.</span><br><span class="line">--stats=30s: Shows progress every 30 seconds.</span><br><span class="line">--log-file=rclone_&#123;/&#125;.log: Logs each job to a file named after the subdirectory (e.g., rclone_subdir1.log).</span><br></pre></td></tr></table></figure></li></ul><h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">du -h --max-depth=1 --exclude=&#x27;proc&#x27; --exclude=&#x27;home&#x27; --exclude=&#x27;mnt&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check actual disk usage</span></span><br><span class="line">du -sh /path/to/mountpoint</span><br></pre></td></tr></table></figure><h2 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd if=&lt;input&gt; of=&lt;output&gt; [options]</span><br></pre></td></tr></table></figure><p>‚Äã    ‚Ä¢    if: Specifies the <strong>input file</strong> or device (e.g., /dev/sda or /path/to/file).</p><p>‚Äã    ‚Ä¢    of: Specifies the <strong>output file</strong> or device (e.g., /dev/sdb or /path/to/file).</p><p>‚Äã    ‚Ä¢    <strong>bs=SIZE</strong>: Block size, defining how much data to read and write at a time. It can be set to values like 512, 4M, etc. Example: bs=1M reads and writes 1 megabyte at a time.</p><p>‚Äã    ‚Ä¢    <strong>count=N</strong>: Limits the number of blocks copied. For example, count=100 copies 100 blocks of the size specified by bs.</p><p>‚Äã    ‚Ä¢    <strong>status=progress</strong>: Shows real-time progress while copying.</p><p>‚Äã    ‚Ä¢    <strong>conv=notrunc</strong>: Prevents truncation of the output file (useful when appending).</p><p>‚Äã    ‚Ä¢    <strong>conv=sync</strong>: Pads the input to the full block size with null bytes if necessary.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Copy specify file to specify path</span></span><br><span class="line">sudo dd if=/path/to/image.iso of=/dev/sdX bs=4M status=progress</span><br><span class="line">‚Ä¢if=/path/to/image.iso: Input is an ISO file.</span><br><span class="line">‚Ä¢of=/dev/sdX: Output is the target USB device (e.g., /dev/sdb).</span><br><span class="line">‚Ä¢bs=4M: Sets block size to 4MB for faster copying.</span><br><span class="line">‚Ä¢status=progress: Shows copy progress.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clone a disk or partition to an image file</span></span><br><span class="line">sudo dd if=/dev/sda of=/path/to/backup.img bs=1M status=progress</span><br><span class="line">‚Ä¢This creates a raw image backup of /dev/sda (entire disk).</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Restore the image created <span class="keyword">in</span> the above example</span></span><br><span class="line">sudo dd if=/path/to/backup.img of=/dev/sda bs=1M status=progress</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Erase a Disk (Overwrite with Zeros)</span></span><br><span class="line">sudo dd if=/dev/zero of=/dev/sdX bs=1M status=progress</span><br><span class="line">‚Ä¢if=/dev/zero: Fills the disk with zeros.</span><br><span class="line">‚Ä¢of=/dev/sdX: Target disk to be wiped.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Create a File of a Specific Size</span></span><br><span class="line">dd if=/dev/urandom of=randomfile.bin bs=1M count=1024  # Create a 1GB file of random data</span><br><span class="line">‚Ä¢if=/dev/urandom: Input is random data.</span><br><span class="line">‚Ä¢of=randomfile.bin: Output file.</span><br><span class="line">‚Ä¢bs=1M count=1024: Creates a 1GB file (1024 blocks of 1MB each).</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Test Disk Write Speed</span></span><br><span class="line">dd if=/dev/zero of=testfile bs=1M count=1024 conv=fdatasync status=progress # Measure disk performance by writing a 1GB file</span><br><span class="line">‚Ä¢conv=fdatasync: Ensures data is fully written to disk before timing stops.</span><br></pre></td></tr></table></figure><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><ul><li>ÂéªÈô§ÂåÖÂê´ÁâπÂÆöÂ≠óÁ¨¶‰∏≤ÁöÑË°åÔºö</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v &quot;pattern&quot; inputfile &gt; outputfile</span><br></pre></td></tr></table></figure><p>ÂèÇÊï∞ <code>-v</code> ÊòØÁî®Êù•ÂèçÂêëÂåπÈÖçÁöÑÈÄâÈ°πÔºåÂÆÉ‰ºöÂ∞Ü‰∏çÂåπÈÖçÊåáÂÆöÊ®°ÂºèÁöÑË°åËæìÂá∫</p><ul><li>Êü•ÊâæÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂÜÖÂÆπ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -rn &quot;info&quot; *</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊåáÂÆöÊ£ÄÁ¥¢ÁõÆÂΩïÔºåÊåáÂÆöÊéíÂá∫ÁõÆÂΩïÔºàexclude-dirÂèØÂ§öÊ¨°‰ΩøÁî®Ôºâ</span></span><br><span class="line">grep -rn &quot;info&quot; /home/rdx --exclude-dir=&quot;log&quot;</span><br></pre></td></tr></table></figure><ul><li>Êü•ËØ¢Â§ßÊñá‰ª∂ÈáåÈù¢ÁöÑÂÜÖÂÆπ</li></ul><p>Ê†ºÂºèÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ‰ΩøÁî®ÁÆ°ÈÅìÁ¨¶ÂèØ‰ª•ÂÆûÁé∞ËøáÊª§Êó¢Êª°Ë∂≥Êó∂Èó¥ÂèàÊª°Ë∂≥ipÁöÑË°å„ÄÇ</span><br><span class="line">grep -n -e ‚Äú10.198.2.133‚Äù prometheus.log |grep -e ‚Äú2019-09-24‚Äù|head -n 3</span><br></pre></td></tr></table></figure><p>ÂèÇÊï∞Ëß£ÈáäÔºö<br>-n ÂèÇÊï∞ÁöÑ‰ΩúÁî®ÊòØÊòæÁ§∫Êü•ÊâæÁªìÊûúÁöÑÊâÄÂú®Ë°åÂè∑<br>-e ÂèÇÊï∞Ë°®Á§∫Êàë‰ª¨ÈúÄË¶ÅÊêúÁ¥¢ÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂ§ö‰∏™ÂÖ≥ÈîÆÂ≠óÂ∞±Áî®Â§ö‰∏™ -e ÂèÇÊï∞<br>prometheus.log Ë°®Á§∫ÂæÖÊêúÁ¥¢ÁöÑÂ§ßÊó•ÂøóÊñá‰ª∂<br>head -n 3 Ë°®Á§∫ÊòæÁ§∫ÂâçÈù¢Êü•ËØ¢ÁªìÊûúÁöÑÂâç‰∏âÊù°ËÆ∞ÂΩï</p><ul><li>ÊéíÈô§ÊåáÂÆöÂÜÖÂÆπ</li></ul><p>Ë¶Å‰ªÖÊâìÂç∞‰∏éÊêúÁ¥¢Ê®°Âºè‰∏çÂåπÈÖçÁöÑË°åÔºåÂèØ‰ª•‰ΩøÁî®grepÁöÑ<code>-v</code>Êàñ<code>--invert-match</code>ÈÄâÈ°π„ÄÇËøõË°åÂèçËΩ¨ÁöÑÂåπÈÖç„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v xxx</span><br></pre></td></tr></table></figure><ul><li><p>ÈôêÂÆöÊü•ËØ¢ÁªìÊûú‰πãÂêéÁöÑÂâçÂá†Ë°å</p><p> <code>grep -m 10 &lt;pattern&gt; &lt;file&gt; </code></p></li><li><p>ÈôêÂÆöÊü•ËØ¢ÁªìÊûúÂÄíÊï∞ÁöÑÂá†Ë°å</p><p> <code>grep &lt;pattern&gt; &lt;file&gt; | tail -10</code></p></li></ul><h2 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h2><p><strong>1.</strong>¬†To delete all files in a directory except filename, type the command below:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !(&quot;filename&quot;)</span><br></pre></td></tr></table></figure><p><strong>2.</strong>¬†To delete all files with the exception of¬†<strong>filename1</strong>¬†and¬†<strong>filename2</strong>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !(&quot;filename1&quot;|&quot;filename2&quot;) </span><br></pre></td></tr></table></figure><p><strong>3.</strong>¬†The example below shows how to remove all files other than all¬†<code>.zip</code>¬†files interactively:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -i !(*.zip)</span><br></pre></td></tr></table></figure><p><strong>4.</strong>¬†Next, you can delete all files in a directory apart from all¬†<code>.zip</code>¬†and¬†<code>.odt</code>¬†files as follows, while displaying what is being done:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -v !(*.zip|*.odt)</span><br></pre></td></tr></table></figure><p><strong>5.</strong> Âà†Èô§ÊåáÂÆöÁõÆÂΩï‰∏ãÊåáÂÆöÊó•ÊúüÁöÑÁõÆÂΩïÔºåÂèØ‰ª•‰ΩøÁî® <code>find</code> Âíå <code>rm</code> ÂëΩ‰ª§Êù•Âà†Èô§ÊåáÂÆöÁõÆÂΩï‰∏ãÊåáÂÆöÊó•ÊúüÁöÑÁõÆÂΩï</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type d -mtime +365 -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure><p><strong>6</strong>. Âà†Èô§ÊåáÂÆöÁõÆÂΩï‰∏ãÂâç‰∏Ä‰∏™ÊòüÊúüÁöÑÊñá‰ª∂ÔºåÂèØ‰ª•‰ΩøÁî® <code>find</code> Âíå <code>rm</code> ÂëΩ‰ª§Êù•Âà†Èô§ÊåáÂÆöÁõÆÂΩï‰∏ãÊåáÂÆöÊó•ÊúüÁöÑÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -mtime +7 -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -mtime +7 -delete</span><br></pre></td></tr></table></figure><ul><li><p>ÂèØÊåáÂÆöÁõ∏ÂÖ≥ÂêçÁß∞</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/log -name &quot;*.log&quot; -type f -mtime +30 </span><br></pre></td></tr></table></figure></li></ul><h2 id="AWK"><a href="#AWK" class="headerlink" title="AWK"></a>AWK</h2><ul><li><p><code>awk -v FS=&quot;ËæìÂÖ•ÂàÜÈöîÁ¨¶&quot; -v OFS=&#39;ËæìÂá∫ÂàÜÈöîÁ¨¶&#39; &#39;&#123;if($1==$5) print $1,$5,$10&#125;&#39; filename</code></p><p>Êü•ÊâæfilenameÊñá‰ª∂ÔºàÊñá‰ª∂‰∏≠ÂàóÁöÑÂàÜÈöîÁ¨¶‰∏∫‚ÄúËæìÂÖ•ÂàÜÈöîÁ¨¶‚ÄùÔºâ‰∏≠ÔºåÊØè‰∏ÄË°åÁ¨¨‰∏ÄÂàóÂíåÁ¨¨‰∫îÂàóÁõ∏Á≠âÁöÑË°åÔºåÂπ∂ËæìÂá∫Á¨¨‰∏ÄÂàó„ÄÅÁ¨¨‰∫îÂàó„ÄÅÁ¨¨ÂçÅÂàóÔºåÂàáËæìÂá∫Â≠óÊÆµÂàÜÈöîÁ¨¶‰∏∫‚ÄúËæìÂá∫ÂàÜÈöîÁ¨¶‚Äù„ÄÇÂ¶ÇÊûú‰∏çÈÖçÁΩÆFSÂíåOFSÔºåÈÇ£‰πàËæìÂÖ•ËæìÂá∫ÂàÜÈöîÁ¨¶ÂùáÈªòËÆ§‰∏∫Á©∫</p></li><li><p><a href="https://www.commandlinefu.com/commands/view/6872/exclude-a-column-with-awk">exclude a column with awk</a>, ÊØîÂ¶ÇÊâìÂç∞Èô§Á¨¨5ÂàóÁöÑÂÖ∂ÂÆÉÊâÄÊúâÂàó</p><p>awk ‚Äò{ $5=‚Äù‚Äù; print }‚Äô file</p></li></ul><h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><ul><li>ËØ≠Ê≥ï</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ËØ≠Ê≥ïÔºöwc [ÈÄâÈ°π] Êñá‰ª∂‚Ä¶</span><br><span class="line">  - c ÁªüËÆ°Â≠óËäÇÊï∞„ÄÇ</span><br><span class="line">  - l ÁªüËÆ°Ë°åÊï∞„ÄÇ</span><br><span class="line">  - w ÁªüËÆ°Â≠óÊï∞„ÄÇ</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÁªüËÆ°ÁõÆÂΩï‰∏ãÊâÄÊúâÊñá‰ª∂Êï∞Èáè</span></span><br><span class="line">find /path/to/directory -type f | wc -l</span><br></pre></td></tr></table></figure><h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><p>‰ΩøÊñá‰ª∂ÂèØ‰ª•Áõ¥Êé•ÊâßË°åÁöÑÂëΩ‰ª§Ôºöchmod +x filename</p><p>‰ΩøÊâÄÊúâÁî®Êà∑ÂØπÁõÆÂΩïÈÉΩÊúâËØªÂÜôÊùÉÈôêÔºösudo chmod ugo+rw /opt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r=4Ôºåw=2Ôºåx=1</span><br><span class="line">Ëã•Ë¶ÅrwxÂ±ûÊÄßÂàô4+2+1=7Ôºõ</span><br><span class="line">Ëã•Ë¶Årw-Â±ûÊÄßÂàô4+2=6Ôºõ</span><br><span class="line">Ëã•Ë¶År-xÂ±ûÊÄßÂàô4+1=7</span><br></pre></td></tr></table></figure><h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;hello_world&quot; | cut -c1-5   # Output: hello</span><br></pre></td></tr></table></figure><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><ul><li>Êü•ÊâæÂÖ∑‰ΩìÊñá‰ª∂    </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name Êñá‰ª∂ÂêçÁß∞</span><br></pre></td></tr></table></figure><ul><li>Êü•ÊâæÊåáÂÆöÁî®Êà∑ÁöÑÊñá‰ª∂</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./* -user Áî®Êà∑Âêç</span><br></pre></td></tr></table></figure><ul><li>Êü•ÊâæÊåáÂÆöÁî®Êà∑ÁªÑÁöÑÊñá‰ª∂</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./* -group Áî®Êà∑ÁªÑ</span><br></pre></td></tr></table></figure><ul><li><p>ÂåπÈÖçÊü•ÊâæÈô§‰∫ÜÊüê‰∏™ÁâπÂÆöÊñá‰ª∂Á±ªÂûã‰ª•Â§ñÁöÑÊâÄÊúâÊñá‰ª∂ÔºåÂπ∂Â∞ÜÁªìÊûú‰º†ÈÄíÁªô <code>rm</code> ÂëΩ‰ª§ËøõË°åÂà†Èô§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . ! -name &quot;*.txt&quot; -delete</span><br></pre></td></tr></table></figure></li><li><p>ÂåπÈÖçÂ§ö‰∏™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . ! \( -name &quot;log4j*&quot; -o -name &quot;flink*&quot; \)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ÊåáÂÆöÂ§©Êï∞Êï∞ÊçÆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•Êâæ30Â§©‰πãÂâçÁöÑÊñá‰ª∂</span></span><br><span class="line">find &lt;directory&gt; -type f -name &quot;*.tar.gz&quot; -mtime +30</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•Êâæ30Â§©‰πãÂÜÖÁöÑÊñá‰ª∂</span></span><br><span class="line">find &lt;directory&gt; -type f -name &quot;*.tar.gz&quot; -mtime -30</span><br></pre></td></tr></table></figure></li></ul><h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p><code>ls -lh</code>‰ª•ÂèØËØªÊÄßG„ÄÅMÊü•ÁúãÊñá‰ª∂ÁöÑÂ§ßÂ∞è</p><h2 id="SED"><a href="#SED" class="headerlink" title="SED"></a>SED</h2><ul><li><p>ÊõøÊç¢Â≠óÁ¨¶</p><p>linuxÁéØÂ¢ÉÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/Search_String/Replacement_String/g&#x27; Input_File</span><br></pre></td></tr></table></figure><p>macÁéØÂ¢ÉÔºàÈúÄË¶ÅËÆæÁΩÆÂ§á‰ªΩÔºå‰ª•Èò≤Êñá‰ª∂ÊçüÂùèÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i .bak &#x27;s/Search_String/Replacement_String/g&#x27; Input_File</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÊåáÂÆöÂ§öË°å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;1,5d&#x27; example.txt</span><br></pre></td></tr></table></figure></li></ul><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><ul><li><p>c ‚Äì Creates a new .tar archive file.</p></li><li><p>x ‚Äî to untar or extract a tar file</p></li><li><p>v ‚Äì Verbosely show the .tar file progress.</p></li><li><p>f ‚Äì File name type of the archive file.</p></li><li><p>z ‚Äî gzip archive file</p></li><li><p>j ‚Äî  bz2 feature compress and create archive file</p></li><li><p>t ‚Äî to list the contents of tar archive file</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> extract files to a specific destination directory</span></span><br><span class="line">tar -xvf &lt;archive.tar&gt; -C &lt;destination_directory&gt;</span><br></pre></td></tr></table></figure><h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><ul><li>‰∏ãËΩΩÊåáÂÆöÁõÆÂΩï</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -r --no-parent http://abc.tamu.edu/projects/tzivi/repository/revisions/2/raw/tzivi/</span><br></pre></td></tr></table></figure><h2 id="link"><a href="#link" class="headerlink" title="link"></a>link</h2><ul><li><p>ÂàõÂª∫ËΩØËøûÊé•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln  -s  [Ê∫êÊñá‰ª∂ÊàñÁõÆÂΩï]  [ÁõÆÊ†áÊñá‰ª∂ÊàñÁõÆÂΩï]</span><br></pre></td></tr></table></figure></li><li><p>Êü•ÊâæÊåáÂÆöÁõÆÂΩïÁöÑËΩØËøûÊé•Êñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -alR | grep ^l</span><br></pre></td></tr></table></figure></li><li><p>relink</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -sf &lt;new_target&gt; &lt;link_name&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> -s: Create a symbolic link.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f: Force overwriting an existing link.</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort --parallel=8 -S 4G -T /data -k2,3 largefile.txt &gt; sorted_file.txt</span><br></pre></td></tr></table></figure><blockquote><p>‰ΩøÁî®‰∫Ü8‰∏™Á∫øÁ®ãÂπ∂Ë°åÊéíÂ∫èÔºåÂπ∂‰∏îsortÂëΩ‰ª§Âú®ÊéíÂ∫èËøáÁ®ã‰∏≠ÊúÄÂ§ö‰ΩøÁî®4GBÁöÑÂÜÖÂ≠òÁºìÂÜ≤Âå∫„ÄÇÊàë‰ª¨Ëøò‰ΩøÁî®‰∫Ü<code>-T /data</code>ÈÄâÈ°πÔºåÊåáÂÆösortÂëΩ‰ª§‰ΩøÁî®/dataÁõÆÂΩïÊù•Â≠òÂÇ®‰∏¥Êó∂Êñá‰ª∂ÔºåËÄå‰∏çÊòØÈªòËÆ§Ë∑ØÂæÑ„ÄÇ</p><p>‚Äú-k1,2‚ÄùË°®Á§∫ÂÖàÊåâÁÖßÁ¨¨1ÂàóÊéíÂ∫èÔºåËã•Á¨¨1ÂàóÁõ∏ÂêåÂàôÊåâÁÖßÁ¨¨2ÂàóÊéíÂ∫è„ÄÇ</p></blockquote><h2 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h2><ul><li><p>Ëß£Á†Å</p><p><code>echo [base64-encoded-string] | base64 --decode</code></p></li><li><p>ÁºñÁ†Å</p><p><code>echo &quot;your string&quot; | base64</code></p></li></ul><h2 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h2><p>tr ‚Äì translate or delete characters </p><ul><li><p>Â§ßÂ∞èÂÜôËΩ¨Êç¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr A-Z a-z </span><br><span class="line">cat file | tr a-z A-Z</span><br></pre></td></tr></table></figure></li></ul><h1 id="senario"><a href="#senario" class="headerlink" title="senario"></a>senario</h1><h2 id="Êñá‰ª∂Á≥ªÁªü"><a href="#Êñá‰ª∂Á≥ªÁªü" class="headerlink" title="Êñá‰ª∂Á≥ªÁªü"></a>Êñá‰ª∂Á≥ªÁªü</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Check filesystem <span class="built_in">type</span></span></span><br><span class="line">df -T /path/to/mountpoint</span><br></pre></td></tr></table></figure><h2 id="ÂàõÂª∫Êñá‰ª∂"><a href="#ÂàõÂª∫Êñá‰ª∂" class="headerlink" title="ÂàõÂª∫Êñá‰ª∂"></a>ÂàõÂª∫Êñá‰ª∂</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> method 2</span></span><br><span class="line">fallocate -l 1G fileName</span><br></pre></td></tr></table></figure><h3 id="dd-1"><a href="#dd-1" class="headerlink" title="dd"></a>dd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero of=/path/to/directory/filename bs=block_size count=number_of_blocks</span><br><span class="line"><span class="meta">#</span><span class="bash"> Create a 100MB File <span class="keyword">in</span> /tmp/</span></span><br><span class="line">dd if=/dev/zero of=/tmp/testfile.img bs=1M count=100</span><br></pre></td></tr></table></figure><ul><li><strong><code>if=/dev/zero</code></strong>: Input file (<code>/dev/zero</code> provides null bytes; use <code>/dev/urandom</code> for random data).</li><li><strong><code>of=/path/to/directory/filename</code></strong>: Output file path and name.</li><li><strong><code>bs</code></strong>: Block size (e.g., <code>1K</code>, <code>1M</code>, <code>1G</code>).</li><li><strong><code>count</code></strong>: Number of blocks to write</li></ul><h2 id="Êñá‰ª∂ÂàÜÂâ≤"><a href="#Êñá‰ª∂ÂàÜÂâ≤" class="headerlink" title="Êñá‰ª∂ÂàÜÂâ≤"></a>Êñá‰ª∂ÂàÜÂâ≤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">split [-a] [-b] [-C] [-l] [Ë¶ÅÂàÜÂâ≤ÁöÑÊñá‰ª∂Âêç] [ÂàÜÂâ≤ÂêéÁöÑÊñá‰ª∂ÂêçÂâçÁºÄ]</span><br><span class="line">‚Äìversion ÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØ</span><br><span class="line">‚Äì ÊàñËÄÖ-l,ÊåáÂÆöÊØèÂ§öÂ∞ëË°åÂàáÂâ≤‰∏ÄÊ¨°ÔºåÁî®‰∫éÊñáÊú¨Êñá‰ª∂ÂàÜÂâ≤</span><br><span class="line">-b ÊåáÂÆöÂàáÂâ≤Êñá‰ª∂Â§ßÂ∞è,Âçï‰Ωç m Êàñ k</span><br><span class="line">-C ‰∏é-bÁ±ª‰ººÔºå‰ΩÜÂ∞ΩÈáèÁª¥ÊåÅÊØèË°åÂÆåÊï¥ÊÄß</span><br><span class="line">-d ‰ΩøÁî®Êï∞Â≠óËÄå‰∏çÊòØÂ≠óÊØç‰Ωú‰∏∫ÂêéÁºÄÂêç</span><br><span class="line">-a ÊåáÂÆöÂêéÁºÄÂêçÁöÑÈïøÂ∫¶ÔºåÈªòËÆ§‰∏∫2‰Ωç</span><br></pre></td></tr></table></figure><p>Â∞ÜÂ§ö‰∏™ÂàÜÂâ≤ÁöÑÊñá‰ª∂ËøõË°åÂêàÂπ∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat files_name_1 files_name_2 files_name_3 &gt; files_name</span><br></pre></td></tr></table></figure><ul><li><p>ÊåâË°åÊï∞ÂàÜÂâ≤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split -l 10000 bigfile.txt smallfile</span><br></pre></td></tr></table></figure><blockquote><p>ÂàÜÂâ≤‰πãÂêéÁöÑÊñá‰ª∂‰∏çÂΩ±ÂìçËØªÂèñ</p></blockquote></li><li><p>ÁªüËÆ°Êüê‰∏™Êñá‰ª∂‰∏≠ÁöÑÂ≠óÁ¨¶Êï∞ÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÊñá‰ª∂‰∏≠ÂåÖÂê´Â§öÂ≠óËäÇÂ≠óÁ¨¶ÔºàÂ¶Ç‰∏≠ÊñáÔºâÔºåÂàôÊØè‰∏™Â≠óÁ¨¶Â∞ÜË¢´ËßÜ‰∏∫Â§ö‰∏™Â≠óÁ¨¶Êù•ËÆ°ÁÆó„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc -c /path/to/file</span><br></pre></td></tr></table></figure><p>Âú®ËøôÂü∫Á°Ä‰∏äÔºåÁªüËÆ°ÂÜÖÂÆπÊâÄÂç†KB</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc -c /path/to/file | awk &#x27;&#123;print $1/1024&#125;&#x27;</span><br></pre></td></tr></table></figure></li><li><p>awkÂØπÊñá‰ª∂ÊåâÁÖßÊåáÂÆöÂ§öÂàóÁöÑÂÜÖÂÆπËøõË°åÊéíÂ∫è</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $0&#125;&#x27; head_100.csv | sort -t &#x27;,&#x27; -k2,3 &gt; head_100_sort.csv</span><br></pre></td></tr></table></figure><blockquote><p>Âπ∂Áî®<code>sort</code>ÂëΩ‰ª§Ê†πÊçÆÊåáÂÆöÂàóÁöÑÂÜÖÂÆπËøõË°åÊéíÂ∫è„ÄÇ<code>-t</code>ÈÄâÈ°πË°®Á§∫‰ΩøÁî®Âà∂Ë°®Á¨¶‰Ωú‰∏∫Â≠óÊÆµÂàÜÈöîÁ¨¶Ôºå<code>[ÂàóÊï∞]</code>ÊòØ‰Ω†Ë¶ÅÊéíÂ∫èÁöÑÈÇ£‰∏ÄÂàóÔºå‚Äú-k1,2‚ÄùË°®Á§∫ÂÖàÊåâÁÖßÁ¨¨1ÂàóÊéíÂ∫èÔºåËã•Á¨¨1ÂàóÁõ∏ÂêåÂàôÊåâÁÖßÁ¨¨2ÂàóÊéíÂ∫è„ÄÇ</p></blockquote></li><li><p>ÁªüËÆ°Â≠óÁ¨¶ÁöÑÈïøÂ∫¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo Â≠óÁ¨¶ | wc -m</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÊâπÈáèÊõøÊç¢Êñá‰ª∂Âêç"><a href="#ÊâπÈáèÊõøÊç¢Êñá‰ª∂Âêç" class="headerlink" title="ÊâπÈáèÊõøÊç¢Êñá‰ª∂Âêç"></a>ÊâπÈáèÊõøÊç¢Êñá‰ª∂Âêç</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename -n -e <span class="string">&#x27;s/ÂæÖÊõøÊç¢Â≠óÁ¨¶‰∏≤/ÊõøÊç¢Â≠óÁ¨¶‰∏≤/&#x27;</span>  *.png</span><br></pre></td></tr></table></figure><h2 id="ËΩ¨Êç¢Êñá‰ª∂ÁºñÁ†ÅÊ†ºÂºè"><a href="#ËΩ¨Êç¢Êñá‰ª∂ÁºñÁ†ÅÊ†ºÂºè" class="headerlink" title="ËΩ¨Êç¢Êñá‰ª∂ÁºñÁ†ÅÊ†ºÂºè"></a>ËΩ¨Êç¢Êñá‰ª∂ÁºñÁ†ÅÊ†ºÂºè</h2><ul><li><p>Êü•ÁúãÁºñÁ†Å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim</span></span><br><span class="line">:set fileencoding</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> file</span></span><br><span class="line">file -i filename</span><br></pre></td></tr></table></figure></li><li><p>ËΩ¨Êç¢ÁºñÁ†Å</p></li></ul><p>ÁÑ∂Âêé‰ΩøÁî® <code>iconv</code> ËøõË°åÁºñÁ†ÅÊ†ºÂºèÁöÑËΩ¨Êç¢ÔºåÊØîÂ¶ÇÂ∞Ü‰∏Ä‰∏™ utf-8 ÁºñÁ†ÅÁöÑÊñá‰ª∂ËΩ¨Êç¢Êàê GBK ÁºñÁ†ÅÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> iconv -f UTF-8 -t GBK input.file -o output.file</span></span><br></pre></td></tr></table></figure><ul><li><p>Â¶ÇÊûúÈÅáÂà∞]iconv: Êú™Áü•xxxxÂ§ÑÁöÑÈùûÊ≥ïËæìÂÖ•Â∫èÂàó,‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ≥ïÊòØÂä†ÂÖ• -cÈÄâÈ°πÔºöÂøΩÁï•Êó†ÊïàÂ≠óÁ¨¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iconv -c  -f gb2312 -t utf8 test.txt -o output.file</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iconv -f gb18030 -t UTF-8 input.file -o output.file</span><br><span class="line"></span><br><span class="line">gb18030</span><br></pre></td></tr></table></figure><h2 id="Ê†ºÂºèÂåñjson"><a href="#Ê†ºÂºèÂåñjson" class="headerlink" title="Ê†ºÂºèÂåñjson"></a>Ê†ºÂºèÂåñjson</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;&#123;&quot;kind&quot;: &quot;Service&quot;, &quot;apiVersion&quot;: &quot;v1&quot;, &quot;status&quot;: &#123;&quot;loadBalancer&quot;: true&#125;&#125;&#x27;|jq .</span><br></pre></td></tr></table></figure><h2 id="Âä†ÂØÜ"><a href="#Âä†ÂØÜ" class="headerlink" title="Âä†ÂØÜ"></a>Âä†ÂØÜ</h2><p>Áî®zipÂëΩ‰ª§ÂØπÊñá‰ª∂Âä†ÂØÜÂéãÁº©ÂíåËß£Âéã</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip -re filename.zip filename </span><br><span class="line">ÂõûËΩ¶ÔºåËæìÂÖ•2Ê¨°ÂØÜÁ†Å</span><br></pre></td></tr></table></figure><h2 id="markdownËΩ¨word"><a href="#markdownËΩ¨word" class="headerlink" title="markdownËΩ¨word"></a>markdownËΩ¨word</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandoc -o output.docx -f markdown -t docx filename.md</span><br></pre></td></tr></table></figure><h2 id="Ê∏ÖÁêÜÊåáÂÆöÊó•Êúü‰πãÂâçÁöÑÊñá‰ª∂"><a href="#Ê∏ÖÁêÜÊåáÂÆöÊó•Êúü‰πãÂâçÁöÑÊñá‰ª∂" class="headerlink" title="Ê∏ÖÁêÜÊåáÂÆöÊó•Êúü‰πãÂâçÁöÑÊñá‰ª∂"></a>Ê∏ÖÁêÜÊåáÂÆöÊó•Êúü‰πãÂâçÁöÑÊñá‰ª∂</h2><h1 id="troubleshooting"><a href="#troubleshooting" class="headerlink" title="troubleshooting"></a>troubleshooting</h1><h2 id="Á£ÅÁõòÂ±ïÁ§∫Á©∫Èó¥ÂíåÂÆûÈôÖÁ©∫Èó¥‰∏çÁ¨¶"><a href="#Á£ÅÁõòÂ±ïÁ§∫Á©∫Èó¥ÂíåÂÆûÈôÖÁ©∫Èó¥‰∏çÁ¨¶" class="headerlink" title="Á£ÅÁõòÂ±ïÁ§∫Á©∫Èó¥ÂíåÂÆûÈôÖÁ©∫Èó¥‰∏çÁ¨¶"></a>Á£ÅÁõòÂ±ïÁ§∫Á©∫Èó¥ÂíåÂÆûÈôÖÁ©∫Èó¥‰∏çÁ¨¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check deleted process</span></span><br><span class="line">sudo lsof | grep deleted</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Analyzing the Output</span></span><br><span class="line">wsssr_def 1368270 1368507 wsssr_def            root    7w      REG              259,3         0    1180232 /usr/local/wsssr_defence_agent/agent_init (deleted)</span><br><span class="line"></span><br><span class="line">Breaking it down:</span><br><span class="line">Command: wsssr_def (shortened process name, likely wsssr_defence_agent or similar).</span><br><span class="line">PID: 1368270 (process ID).</span><br><span class="line">PPID: 1368507 (parent process ID).</span><br><span class="line">User: root (running as root).</span><br><span class="line">FD: 7w (file descriptor 7, open for writing).</span><br><span class="line">Type: REG (regular file).</span><br><span class="line">Device: 259,3 (device number, matching /dev/nvme0n1p2‚Äîyour root partition).</span><br><span class="line">Size: 0 (reported size is 0 bytes‚Äîsee below for why this is misleading).</span><br><span class="line">Node: 1180232 (inode number).</span><br><span class="line">File: /usr/local/wsssr_defence_agent/agent_init (deleted) (the deleted file).</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux system command</title>
      <link href="/2016/10/16/linux%20cmd:%20system/"/>
      <url>/2016/10/16/linux%20cmd:%20system/</url>
      
        <content type="html"><![CDATA[<h1 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h1><p><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners">Bash Scripting Tutorial for Beginners</a></p><h3 id="Bash-Shell-Scripting-Definition"><a href="#Bash-Shell-Scripting-Definition" class="headerlink" title="Bash Shell Scripting Definition"></a>Bash Shell Scripting Definition</h3><ul><li>Bash:Bourne-Again SHell<br>Bash is a command language interpreter. <h2 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h2>Do not be afraid to break things as that is perfectly normal. Troubleshooting and fixing code is perhaps the best booster for you to enhance your understanding of bash scripting and to improve your ability.</li></ul><p><a href="https://linuxconfig.org/bash-scripting-tutorial#h24-stdout-to-screen">Bash scripting Tutorial</a></p><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1: generate ssh-key <span class="keyword">in</span> all nodes</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"> step2: <span class="keyword">in</span> first node</span></span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class="line"><span class="meta">#</span><span class="bash"> step3: <span class="keyword">in</span> other node</span></span><br><span class="line">ssh-copy-id -i id_rsa.pub Áî®Êà∑@&lt;first_node&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> step4: <span class="keyword">in</span> first node</span></span><br><span class="line">scp authorized_keys Áî®Êà∑@&lt;other_node&gt;:~/.ssh/</span><br></pre></td></tr></table></figure><h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- kill seesion </span><br><span class="line">screen -X -S [session # you want to kill] quit</span><br><span class="line">- Êñ∞Âª∫screen‰ºöËØù</span><br><span class="line">screen -S xxx</span><br><span class="line">- ÊÅ¢Â§çÊåáÂÆö‰ºöËØù</span><br><span class="line">screen -r xxx</span><br><span class="line">- Êü•ÁúãÊâÄÊúâ‰ºöËØù</span><br><span class="line">screen -ls</span><br><span class="line">- Âà†Èô§ÊåáÂÆö‰ºöËØù</span><br><span class="line">screen -S xxx -X quit</span><br><span class="line">- ÂõûÂà∞ÁªàÁ´Ø</span><br><span class="line">Ctrl-a d</span><br></pre></td></tr></table></figure><h3 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a>firewall</h3><ul><li><p>check status : <code>sudo ufw status</code></p></li><li><p>enable firewall: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ufw <span class="built_in">enable</span></span><br><span class="line">Command may disrupt existing ssh connections. Proceed with operation (y|n)? y</span><br><span class="line">Firewall is active and enabled on system startup</span><br></pre></td></tr></table></figure></li><li><p>disable firewall</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ufw <span class="built_in">disable</span></span><br><span class="line">Firewall stopped and disabled on system startup</span><br></pre></td></tr></table></figure></li></ul><h3 id="Á£ÅÁõòÁõ∏ÂÖ≥"><a href="#Á£ÅÁõòÁõ∏ÂÖ≥" class="headerlink" title="Á£ÅÁõòÁõ∏ÂÖ≥"></a>Á£ÅÁõòÁõ∏ÂÖ≥</h3><ul><li><p>Êü•ÁúãÁ≥ªÁªüÁ£ÅÁõòÂç†Áî®ÊÉÖÂÜµ    <code> df -h</code></p></li><li><p>Êü•ÁúãÁõÆÂΩï‰∏ãÊñá‰ª∂Â§ßÂ∞è        <code>du -sh</code></p></li><li><p>Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ã‰∏ÄÁ∫ßÂ≠êÊñá‰ª∂ÂíåÂ≠êÁõÆÂΩïÂç†Áî®ÁöÑÁ£ÅÁõòÂÆπÈáè: <code>du -h --max-depth=1 </code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ãuserÁõÆÂΩïÁöÑÂ§ßÂ∞èÔºåÂπ∂‰∏çÊÉ≥ÁúãÂÖ∂‰ªñÁõÆÂΩï‰ª•ÂèäÂÖ∂Â≠êÁõÆÂΩïÔºö</span><br><span class="line">du -sh user</span><br><span class="line">-sË°®Á§∫ÊÄªÁªìÁöÑÊÑèÊÄùÔºåÂç≥Âè™ÂàóÂá∫‰∏Ä‰∏™ÊÄªÁªìÁöÑÂÄº</span><br><span class="line">du -h --max-depth=0 user</span><br><span class="line">--max-depth=nË°®Á§∫Âè™Ê∑±ÂÖ•Âà∞Á¨¨nÂ±ÇÁõÆÂΩïÔºåÊ≠§Â§ÑËÆæÁΩÆ‰∏∫0ÔºåÂç≥Ë°®Á§∫‰∏çÊ∑±ÂÖ•Âà∞Â≠êÁõÆÂΩï„ÄÇ</span><br></pre></td></tr></table></figure></li><li><p>ÊÄªÁªìduÂ∏∏Áî®ÂëΩ‰ª§</p><p><strong>du -h ‚Äìmax-depth=1 |grep ‚ÄòG‚Äô |sort   #Êü•Áúã‰∏äGÁõÆÂΩïÂπ∂ÊéíÂ∫è</strong></p><p>du -h ‚Äìmax-depth=1 |grep [TG] |sort   #Êü•Êâæ‰∏äGÂíåTÁöÑÁõÆÂΩïÂπ∂ÊéíÂ∫è<br>du -sh ‚Äìmax-depth=1  #Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ãÊâÄÊúâ‰∏ÄÁ∫ßÂ≠êÁõÆÂΩïÊñá‰ª∂Â§πÂ§ßÂ∞è</p></li><li><p>Ê∏ÖÁêÜÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂</p><p>‰æãÂ¶ÇÈúÄË¶ÅÊ†πÊçÆÊó∂Èó¥Âà†Èô§Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂Ôºå/tmpÔºåÊ∏ÖÁêÜÊéâ20Â§©‰πãÂâçÁöÑÊó†ÊïàÊï∞ÊçÆ„ÄÇÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢‰∏ÄÊù°ÂëΩ‰ª§ÂéªÂÆåÊàêÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find /tmp -mtime +21 -name &quot;*&quot; -exec rm -Rf &#123;&#125; \;</span><br><span class="line">- /tmp ÔºöÂáÜÂ§áË¶ÅËøõË°åÊ∏ÖÁêÜÁöÑ‰ªªÊÑèÁõÆÂΩï</span><br><span class="line">- -mtimeÔºöÊ†áÂáÜËØ≠Âè•ÂÜôÊ≥ï</span><br><span class="line">- Ôºã10ÔºöÊü•Êâæ10Â§©ÂâçÁöÑÊñá‰ª∂ÔºåËøôÈáåÁî®Êï∞Â≠ó‰ª£Ë°®Â§©Êï∞ÔºåÔºã30Ë°®Á§∫Êü•Êâæ30Â§©ÂâçÁöÑÊñá‰ª∂</span><br><span class="line">- &quot;*&quot;ÔºöÂ∏åÊúõÊü•ÊâæÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå&quot;.jpg&quot;Ë°®Á§∫Êü•ÊâæÊâ©Â±ïÂêç‰∏∫jpgÁöÑÊâÄÊúâÊñá‰ª∂Ôºå&quot;&quot;Ë°®Á§∫Êü•ÊâæÊâÄÊúâÊñá‰ª∂</span><br><span class="line">- -execÔºöÂõ∫ÂÆöÂÜôÊ≥ï</span><br><span class="line">- rm -RfÔºöÂº∫Âà∂Âà†Èô§Êñá‰ª∂ÔºåÂåÖÊã¨ÁõÆÂΩï(Ê≥®ÊÑèRÂ§ßÂÜôÔºåfÂ∞èÂÜô)</span><br><span class="line">-  &#123;&#125; \; Âõ∫ÂÆöÂÜôÊ≥ïÔºå‰∏ÄÂØπÂ§ßÊã¨Âè∑+Á©∫Ê†º+\+; </span><br></pre></td></tr></table></figure></li></ul><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p>Êü•ÁúãÂéÜÂè≤ÂëΩ‰ª§ÔºåÊîØÊåÅ grepËøáÊª§Êìç‰Ωú</p><h3 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> temp</span></span><br><span class="line">sudo swapoff -a</span><br><span class="line"><span class="meta">#</span><span class="bash"> persistent</span></span><br><span class="line">sudo sed -i &#x27;/[[:space:]]swap[[:space:]]/s/^/#/&#x27; /etc/fstab</span><br></pre></td></tr></table></figure><h1 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h1><h2 id="OOM"><a href="#OOM" class="headerlink" title="OOM"></a>OOM</h2><h3 id="ÁßØÂàÜÊú∫Âà∂"><a href="#ÁßØÂàÜÊú∫Âà∂" class="headerlink" title="ÁßØÂàÜÊú∫Âà∂"></a>ÁßØÂàÜÊú∫Âà∂</h3><blockquote><p>OOMÔºàOut-Of-MemoryÔºâÁßØÂàÜÊú∫Âà∂ÊòØ Linux ÂÜÖÊ†∏Âú®Á≥ªÁªüÂÜÖÂ≠òËÄóÂ∞ΩÊó∂ÔºåÈÄöËøáËØÑ‰º∞ËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÂíåÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµÔºåÈÄâÊã©‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËøõÁ®ãÁªàÊ≠¢‰ª•ÈáäÊîæÂÜÖÂ≠òÁöÑ‰∏ÄÁßçÊú∫Âà∂„ÄÇÂÖ∂Ê†∏ÂøÉÁõÆÊ†áÊòØÂú®ÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÊúÄÂ∞èÂåñÁ≥ªÁªüÂ¥©Ê∫ÉÈ£éÈô©Âπ∂‰ºòÂÖà‰øùÁïôÂÖ≥ÈîÆËøõÁ®ã„ÄÇ</p></blockquote><p><strong>OOM ÁßØÂàÜÊú∫Âà∂ÁöÑÂ∑•‰ΩúÂéüÁêÜ</strong></p><ol><li><strong><code>oom_score</code> ËÆ°ÁÆó</strong><br>ÊØè‰∏™ËøõÁ®ãÁöÑ <code>oom_score</code>Ôºà‰Ωç‰∫é <code>/proc/&lt;pid&gt;/oom_score</code>ÔºâÂÜ≥ÂÆö‰∫ÜÂÆÉË¢´ OOM Killer ÈÄâ‰∏≠ÁöÑÊ¶ÇÁéá„ÄÇÂàÜÊï∞Ë∂äÈ´òÔºåËøõÁ®ãË∂äÂèØËÉΩË¢´ÁªàÊ≠¢„ÄÇËÆ°ÁÆó‰æùÊçÆÂåÖÊã¨Ôºö<ul><li><strong>ÂÜÖÂ≠ò‰ΩøÁî®Èáè</strong>ÔºöËøõÁ®ãÂç†Áî®ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂíå‰∫§Êç¢ÂàÜÂå∫ÔºàSwapÔºâÁöÑÊÄªÂíå„ÄÇ</li><li><strong>ËøêË°åÊó∂Èó¥</strong>ÔºöÈïøÊó∂Èó¥ËøêË°åÁöÑËøõÁ®ãÂèØËÉΩË¢´ÈÄÇÂΩì‰øùÊä§ÔºàÈÄöËøá <code>oom_score_adj</code> Ë∞ÉÊï¥Ôºâ„ÄÇ</li><li><strong>ËøõÁ®ã‰ºòÂÖàÁ∫ß</strong>Ôºö‰Ωé‰ºòÂÖàÁ∫ßÔºàÈ´ò <code>nice</code> ÂÄºÔºâÁöÑËøõÁ®ãÊõ¥ÊòìË¢´ÁªàÊ≠¢„ÄÇ</li><li><strong>Â≠êËøõÁ®ãÂÜÖÂ≠ò</strong>ÔºöÁà∂ËøõÁ®ãÁöÑÂ≠êËøõÁ®ãÂÜÖÂ≠òÂèØËÉΩËÆ°ÂÖ•Áà∂ËøõÁ®ãÁöÑËØÑÂàÜ„ÄÇ</li><li><strong>Áî®Êà∑ÊùÉÈôê</strong>ÔºöÁâπÊùÉËøõÁ®ãÔºàÂ¶Ç root Áî®Êà∑ËøõÁ®ãÔºâÂèØËÉΩË¢´‰øùÊä§„ÄÇ</li></ul></li><li><strong><code>oom_score_adj</code> Ë∞ÉÊï¥Âõ†Â≠ê</strong><br>Áî®Êà∑ÂèØÈÄöËøá <code>/proc/&lt;pid&gt;/oom_score_adj</code> Êñá‰ª∂ÔºàËåÉÂõ¥Ôºö<code>-1000</code> Âà∞ <code>1000</code>ÔºâÊâãÂä®Âπ≤È¢ÑËØÑÂàÜÔºö<ul><li><strong>Ë¥üÂÄº</strong>ÔºöÈôç‰ΩéË¢´ÁªàÊ≠¢Ê¶ÇÁéáÔºàÂ¶Ç <code>-1000</code> Ë°®Á§∫ÂÖçÁñ´ OOM KillerÔºâ„ÄÇ</li><li><strong>Ê≠£ÂÄº</strong>ÔºöÂ¢ûÂä†Ë¢´ÁªàÊ≠¢Ê¶ÇÁéá„ÄÇ</li></ul></li></ol><p><strong>Ë∞ÉÊï¥ OOM ÂèÇÊï∞ÁöÑÂ∏∏ËßÅÊñπÊ≥ï</strong></p><ul><li><p><strong>‰øùÊä§ÂÖ≥ÈîÆËøõÁ®ã</strong>Ôºö<br>ÈÄöËøá‰øÆÊîπ <code>oom_score_adj</code> Èôç‰ΩéÂÖ∂Ë¢´ÁªàÊ≠¢ÁöÑÊ¶ÇÁéáÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -1000 &gt; /proc/&lt;pid&gt;/oom_score_adj  # ‰ΩøËøõÁ®ãÂÖçÁñ´ OOM Killer</span><br></pre></td></tr></table></figure></li><li><p><strong>Â¢ûÂ§ßËøõÁ®ãÁªàÊ≠¢Ê¶ÇÁéá</strong>Ôºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 500 &gt; /proc/&lt;pid&gt;/oom_score_adj     # Â¢ûÂ§ßÁªàÊ≠¢Ê¶ÇÁéá</span><br></pre></td></tr></table></figure></li></ul><h1 id="process"><a href="#process" class="headerlink" title="process"></a>process</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> check specify process <span class="built_in">limit</span> info</span></span><br><span class="line">cat /proc/&lt;pid&gt;/limits</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check total-vm / anon-rss</span></span><br><span class="line">cat /proc/&lt;pid&gt;/status</span><br></pre></td></tr></table></figure><ul><li><p>check memory limit</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Get the Cgroup Path</span></span><br><span class="line">cat /proc/&lt;pid&gt;/cgroup</span><br><span class="line"><span class="meta">#</span><span class="bash"> eg.</span></span><br><span class="line">cat /proc/51683/cgroup print</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0::/system.slice/dingofs-mount.service</span></span><br><span class="line">cgroup_path=&quot;/sys/fs/cgroup/system.slice/dingofs-mount.service&quot;</span><br><span class="line">cat &quot;$cgroup_path/memory.max&quot;</span><br></pre></td></tr></table></figure></li></ul><h1 id="operate"><a href="#operate" class="headerlink" title="operate"></a>operate</h1><h3 id="hostname"><a href="#hostname" class="headerlink" title="hostname"></a>hostname</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo hostnamectl set-hostname &lt;new-hostname&gt;</span><br><span class="line">sudo hostnamectl status</span><br></pre></td></tr></table></figure><h3 id="user"><a href="#user" class="headerlink" title="user"></a>user</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudoÊùÉÈôêÁî®Êà∑ÂàáÊç¢Êàêroot</span></span><br><span class="line">sudo -i</span><br><span class="line">sudo su -</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add user</span></span><br><span class="line">sudo useradd -m -s /bin/bash &lt;username&gt;</span><br><span class="line"></span><br><span class="line">  dingofs ALL=(ALL) NOPASSWD:ALL</span><br><span class="line"><span class="meta">#</span><span class="bash">-m: Creates a home directory <span class="keyword">for</span> the user.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-s /bin/bash: Sets the default shell to /bin/bash.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config password</span></span><br><span class="line">passwd &lt;username&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add user to sudo group</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> opitional-1 ubuntu/debian</span></span><br><span class="line">usermod -aG sudo &lt;username&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> opitional-2 edit visudo</span></span><br><span class="line">visudo</span><br><span class="line">&lt;username&gt; ALL=(ALL) NOPASSWD:ALL</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete user</span></span><br><span class="line">userdel &lt;username&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> uid:65535 to nobody base on gid: nobody 65534</span> </span><br><span class="line">sudo useradd -u 65535 -g 65534 -d /nonexistent -s /usr/sbin/nologin nobody65535</span><br></pre></td></tr></table></figure><h3 id="Âç∏ËΩΩÂÆâË£ÖÁöÑËΩØ‰ª∂"><a href="#Âç∏ËΩΩÂÆâË£ÖÁöÑËΩØ‰ª∂" class="headerlink" title="Âç∏ËΩΩÂÆâË£ÖÁöÑËΩØ‰ª∂"></a>Âç∏ËΩΩÂÆâË£ÖÁöÑËΩØ‰ª∂</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ÊµèËßàÂ∑≤ÂÆâË£ÖÁöÑÁ®ãÂ∫è    dpkg --list</span><br><span class="line">Âç∏ËΩΩÁ®ãÂ∫èÂíåÊâÄÊúâÈÖçÁΩÆÊñá‰ª∂    sudo apt-get --purge remove &lt;programname&gt;</span><br><span class="line">Âè™Âç∏ËΩΩÁ®ãÂ∫è    sudo apt-get remove &lt;programname&gt;</span><br></pre></td></tr></table></figure><h3 id="ÂÆâË£ÖdebÊñá‰ª∂Âá∫ÈîôÊó∂"><a href="#ÂÆâË£ÖdebÊñá‰ª∂Âá∫ÈîôÊó∂" class="headerlink" title="ÂÆâË£ÖdebÊñá‰ª∂Âá∫ÈîôÊó∂"></a>ÂÆâË£ÖdebÊñá‰ª∂Âá∫ÈîôÊó∂</h3><p>‰ΩøÁî®<code>apt-get -f -y install</code>‰øÆÂ§ç‰πãÂêéÔºåÂÜçËøõË°åÂÆâË£Ö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ÊâßË°åÂëΩ‰ª§sudo dpkg„ÄÄ-i„ÄÄXXX.deb„ÄÄËøîÂõû‰æùËµñÂÖ≥Á≥ªÈîôËØØÊèêÁ§∫</span><br><span class="line">2.ÊâßË°åsudo apt-get -f install„ÄÄËøôÊù°ÂëΩ‰ª§Â∞ÜËá™Âä®ÂÆâË£ÖÈúÄË¶ÅÁöÑ‰æùËµñÂåÖÔºé</span><br><span class="line">3.ÂÜçÊ¨°ÊâßË°åÂëΩ‰ª§sudo dpkg„ÄÄ-i„ÄÄXXX.deb„ÄÄÂÆâË£ÖÊàêÂäü</span><br></pre></td></tr></table></figure><h3 id="centosÂÆâË£ÖÁ¶ªÁ∫ø‰æùËµñ"><a href="#centosÂÆâË£ÖÁ¶ªÁ∫ø‰æùËµñ" class="headerlink" title="centosÂÆâË£ÖÁ¶ªÁ∫ø‰æùËµñ"></a>centosÂÆâË£ÖÁ¶ªÁ∫ø‰æùËµñ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh name.rpm</span><br></pre></td></tr></table></figure><h3 id="ÂÖâÊ†á"><a href="#ÂÖâÊ†á" class="headerlink" title="ÂÖâÊ†á"></a>ÂÖâÊ†á</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+aÔºöÂÖâÊ†áÂõûÂà∞ÂëΩ‰ª§Ë°åÈ¶ñ„ÄÇ ÔºàaÔºöaheadÔºâ</span><br><span class="line">Ctrl+eÔºöÂÖâÊ†áÂõûÂà∞ÂëΩ‰ª§Ë°åÂ∞æ„ÄÇ ÔºàeÔºöendÔºâ</span><br><span class="line">Ctrl+bÔºöÂÖâÊ†áÂêëË°åÈ¶ñÁßªÂä®‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ ÔºàbÔºöbackwardsÔºâ</span><br><span class="line">Ctrl+fÔºöÂÖâÊ†áÂêëË°åÂ∞æÁßªÂä®‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ ÔºàfÔºöforwardsÔºâ</span><br><span class="line">Ctrl+w: Âà†Èô§ÂÖâÊ†áÂ§ÑÂà∞Ë°åÈ¶ñÁöÑÂ≠óÁ¨¶„ÄÇ</span><br><span class="line">Ctrl+kÔºöÂà†Èô§ÂÖâÊ†áÂ§ÑÂà∞Ë°åÂ∞æÁöÑÂ≠óÁ¨¶„ÄÇ</span><br><span class="line">Ctrl+uÔºöÂà†Èô§Êï¥‰∏™ÂëΩ‰ª§Ë°åÊñáÊú¨Â≠óÁ¨¶„ÄÇ</span><br><span class="line">Ctrl+hÔºöÂêëË°åÈ¶ñÂà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ</span><br><span class="line">Ctrl+dÔºöÂêëË°åÂ∞æÂà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ</span><br><span class="line"></span><br><span class="line">Ctrl + xx ÔºöÂú®ÂëΩ‰ª§Ë°åÂ∞æÂíåÂÖâÊ†á‰πãÈó¥ÁßªÂä®</span><br></pre></td></tr></table></figure><h3 id="Êó∂Âå∫"><a href="#Êó∂Âå∫" class="headerlink" title="Êó∂Âå∫"></a>Êó∂Âå∫</h3><p><a href="https://www.cnblogs.com/zhangeamon/p/5500744.html">CentOS 7 Êó∂Âå∫ËÆæÁΩÆ</a></p><ul><li><p>UTCÔºàCoordinated Universal Time ÔºâÊòØÂõΩÈôÖÊó∂Èó¥Ê†áÂáÜÔºåÈÄöÂ∏∏‰∏éGMTÁõ∏ÂêåÔºå‰ΩÜÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåUTCÂèØËÉΩ‰ºöÊúâÈó∞ÁßíÁöÑË∞ÉÊï¥„ÄÇ</p><ul><li><p>UTC is the global standard for timekeeping.</p></li><li><p>It does not observe Daylight Saving Time (DST).</p></li><li><p>Used as a reference for time zones worldwide.</p></li><li><p>Offset: UTC is the baseline, so its offset is <strong>0 hours</strong>.</p></li></ul></li><li><p>GMTÔºàGreenwich Mean TimeÔºâÊòØÊ†ºÊûóÂ∞ºÊ≤ªÊó∂Èó¥ÔºåÊ≤°ÊúâÂ§è‰ª§Êó∂Ë∞ÉÊï¥„ÄÇ</p><ul><li>GMT was historically the global time standard but has largely been replaced by UTC.</li></ul></li><li><p>UTC+N or GMT+N</p><ul><li>In most practical cases, <strong>UTC+N</strong> and <strong>GMT+N</strong> are equivalent.</li><li>Refers to a time zone that is <strong>N hours ahead of UTC (Coordinated Universal Time)</strong>.</li><li><strong>UTC+N</strong> is the modern term and is more precise in technical or scientific contexts (e.g., aviation, computing, telecommunications).</li><li><strong>GMT+N</strong> is an older term that is still widely recognized but less commonly used in formal applications.</li></ul></li></ul><h3 id="Êó•Êúü"><a href="#Êó•Êúü" class="headerlink" title="Êó•Êúü"></a>Êó•Êúü</h3><ul><li><p>Âà§Êñ≠„ÄÄday of year     </p><p><code>doy=$(date +%j)</code></p></li><li><p>Âà∂ÂÆöÊó•ÊúüÂáè‰∏ÄÂ§©</p><p><code>date -d&quot;20140101 -1 days&quot; +&quot;%Y%m%d&quot;</code></p></li><li><p>ÂΩìÂâçÊó∂Èó¥Êà≥ÔºàÁßíÔºâ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date +%s</span><br></pre></td></tr></table></figure></li></ul><h3 id="Ââ™ÂàáÊùø"><a href="#Ââ™ÂàáÊùø" class="headerlink" title="Ââ™ÂàáÊùø"></a>Ââ™ÂàáÊùø</h3><p>Â∞ÜÂâ™ÂàáÊùø‰∏≠ÁöÑÂÜÖÂÆπËæìÂá∫Âà∞Êñá‰ª∂     echo $(xsel ‚Äìclipboard) &gt;&gt; a.txt </p><p>Â∞ÜÊñá‰ª∂ÁöÑÂÜÖÂÆπÂ§çÂà∂Âà∞Ââ™ÂàáÊùø         cat a.txt | xsel ‚Äìclipboard</p><h3 id="securtCRT"><a href="#securtCRT" class="headerlink" title="securtCRT"></a>securtCRT</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">‰∏ãËΩΩÊúçÂä°Âô®Êñá‰ª∂  sz filename</span><br><span class="line">‰∏ä‰º†Êú¨Âú∞Êñá‰ª∂   rz filename</span><br></pre></td></tr></table></figure><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><ul><li><p>‚Äú1‚Äù</p><p>Êü•ÁúãÊâÄÊúâCPUÊ†∏ÁöÑ‰ΩøÁî®ÊÉÖÂÜµ</p></li><li><p>‚Äúc‚Äù</p><p>Êü•ÁúãÂÖ∑‰ΩìËøõÁ®ãÁöÑË∑ØÂæÑ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">l- ÂºÄÂêØÊàñÂÖ≥Èó≠Á¨¨‰∏ÄÈÉ®ÂàÜÁ¨¨‰∏ÄË°åtop‰ø°ÊÅØÊòæÁ§∫</span><br><span class="line">t - ÂºÄÂêØÊàñÂÖ≥Èó≠Á¨¨‰∏ÄÈÉ®ÂàÜÁ¨¨‰∫åË°åTasksÂíåÁ¨¨‰∏âË°å Cpu(s)¬†‰ø°ÊÅØÊòæÁ§∫</span><br><span class="line">m - ÂºÄÂêØÊàñÂÖ≥Èó≠Á¨¨‰∏ÄÈÉ®ÂàÜÁ¨¨ÂõõË°å Mem Âíå Á¨¨‰∫îË°å Swap ‰ø°ÊÅØÊòæÁ§∫</span><br><span class="line">N - ‰ª• PID ÁöÑÂ§ßÂ∞èÁöÑÈ°∫Â∫èÊéíÂàóË°®Á§∫ËøõÁ®ãÂàóË°®</span><br><span class="line">P - ‰ª• CPU Âç†Áî®ÁéáÂ§ßÂ∞èÁöÑÈ°∫Â∫èÊéíÂàóËøõÁ®ãÂàóË°®</span><br><span class="line">M - ‰ª•ÂÜÖÂ≠òÂç†Áî®ÁéáÂ§ßÂ∞èÁöÑÈ°∫Â∫èÊéíÂàóËøõÁ®ãÂàóË°®</span><br><span class="line">h - ÊòæÁ§∫Â∏ÆÂä©</span><br><span class="line">n - ËÆæÁΩÆÂú®ËøõÁ®ãÂàóË°®ÊâÄÊòæÁ§∫ËøõÁ®ãÁöÑÊï∞ÈáèÔºàÊåâÂÆånÔºåÂÜçËæìÂÖ•‰∏™Êï∞Ôºâ</span><br><span class="line">q - ÈÄÄÂá∫ top</span><br><span class="line">s - ËÆæÁΩÆÊòæÁ§∫‰ø°ÊÅØÁöÑÂà∑Êñ∞È¢ëÁéáÔºàÁî±‰∫éÊòØÂëΩ‰ª§Ë°åÊ®°ÂºèÔºåÊòæÁ§∫ÁöÑËøáÁ®ãÂÖ∂ÂÆûÊòØÂà∑Â±èÁöÑËøáÁ®ãÔºâ</span><br></pre></td></tr></table></figure><ul><li><p>ËøõÁ®ãCPUÂç†Áî®Áéá</p><p>topÊòæÁ§∫Êüê‰∏™ËøõÁ®ãÂç†Áî®cpuËææÂà∞100%ÔºåÂàôË°®ÊòéËØ•ËøõÁ®ãÊ≠£Âú®‰ΩøÁî®ÊâÄÊúâÂèØÁî®ÁöÑ CPU ËµÑÊ∫ê„ÄÇËøôÈÄöÂ∏∏ÊòØÂõ†‰∏∫ËØ•ËøõÁ®ãÊâßË°åÁöÑ‰ªªÂä°ÈùûÂ∏∏ËÄóË¥π CPU ËµÑÊ∫êÔºåÊàñËÄÖËØ•ËøõÁ®ãÂ≠òÂú®Êüê‰∫õÈóÆÈ¢òÂØºËá¥ CPU ‰ΩøÁî®ÁéáÂºÇÂ∏∏È´ò„ÄÇ</p><p>Âú® Linux Á≥ªÁªü‰∏≠ÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÂè™ËÉΩÂú®Âçï‰∏™ CPU Ê†∏ÂøÉ‰∏äËøêË°å„ÄÇ‰ΩÜÊòØÔºåÁ≥ªÁªüÂèØ‰ª•ÈÄöËøáË∞ÉÂ∫¶Á®ãÂ∫èÔºàschedulerÔºâÂú®Â§ö‰∏™ CPU Ê†∏ÂøÉ‰πãÈó¥ËΩÆÊç¢ËøêË°åËøõÁ®ãÔºå‰ªéËÄåËææÂà∞ËÆ©Â§ö‰∏™ËøõÁ®ãÂêåÊó∂ÊâßË°åÁöÑÊïàÊûú„ÄÇ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">### cpu</span><br><span class="line">usÔºöÁî®Êà∑ÊÄÅ‰ΩøÁî®ÁöÑcpuÊó∂Èó¥ÊØî</span><br><span class="line">syÔºöÁ≥ªÁªüÊÄÅ‰ΩøÁî®ÁöÑcpuÊó∂Èó¥ÊØî</span><br><span class="line">niÔºöÁî®ÂÅöniceÂä†ÊùÉÁöÑËøõÁ®ãÂàÜÈÖçÁöÑÁî®Êà∑ÊÄÅcpuÊó∂Èó¥ÊØî</span><br><span class="line">idÔºöÁ©∫Èó≤ÁöÑcpuÊó∂Èó¥ÊØî</span><br><span class="line">waÔºöcpuÁ≠âÂæÖÁ£ÅÁõòÂÜôÂÖ•ÂÆåÊàêÊó∂Èó¥</span><br><span class="line">hiÔºöÁ°¨‰∏≠Êñ≠Ê∂àËÄóÊó∂Èó¥</span><br><span class="line">siÔºöËΩØ‰∏≠Êñ≠Ê∂àËÄóÊó∂Èó¥</span><br><span class="line">stÔºöËôöÊãüÊú∫ÂÅ∑ÂèñÊó∂Èó¥</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ËøáÊª§ÊåáÂÆöËøõÁ®ã</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step1</span> </span><br><span class="line">o</span><br><span class="line"><span class="meta">#</span><span class="bash"> step2</span></span><br><span class="line">COMMAND=&lt;process_name&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Êü•ÁúãÊåáÂÆöÊúçÂä°ÁöÑËøêË°åÊÉÖÂÜµ"><a href="#Êü•ÁúãÊåáÂÆöÊúçÂä°ÁöÑËøêË°åÊÉÖÂÜµ" class="headerlink" title="Êü•ÁúãÊåáÂÆöÊúçÂä°ÁöÑËøêË°åÊÉÖÂÜµ"></a>Êü•ÁúãÊåáÂÆöÊúçÂä°ÁöÑËøêË°åÊÉÖÂÜµ</h3><ul><li><code>journalctl -u xxx.service</code></li><li><code>journalctl -xe</code> Êü•ÁúãÊúÄËøëÁ≥ªÁªüÊúçÂä°Êó•Âøó</li></ul><h3 id="ËµÑÊ∫êÂç†Áî®"><a href="#ËµÑÊ∫êÂç†Áî®" class="headerlink" title="ËµÑÊ∫êÂç†Áî®"></a>ËµÑÊ∫êÂç†Áî®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep ÊúçÂä°ÂêçÁß∞Êàñpid</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊòæÁ§∫</span></span><br><span class="line">root  19496  0.0  2.4 4826152 1603360 ?     Sl    2020 503:15 java -jar -Xms1024m -Xmx1024m jenkins.war --httpPort=55555</span><br><span class="line"></span><br><span class="line">19496 ‰∏∫PID</span><br><span class="line">0.0 ‰∏∫CPUÂç†Áî®ÁôæÂàÜÊØîÔºàÊ≥®ÊÑèÔºöÂ¶ÇÊûúÊúâ‰∏§‰∏™CPUÔºå32Ê†∏64Á∫øÁ®ãÔºåÈÇ£‰πàÊÄªÂç†ÊØîÊòØ6400%ÔºåÂç†Áî®‰∏ÄÁ∫øÁ®ãÔºåcpuÂç†ÊØîÊòØ100%Ôºâ</span><br><span class="line">2.4 ‰∏∫ÂÜÖÂ≠òÂç†Áî®ÁôæÂàÜÊØî</span><br></pre></td></tr></table></figure><h1 id="system"><a href="#system" class="headerlink" title="system"></a>system</h1><h2 id="kernel-dumps"><a href="#kernel-dumps" class="headerlink" title="kernel dumps"></a>kernel dumps</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Changing Kernel Crash Dump Directory (<span class="keyword">for</span> kdump)</span></span><br><span class="line">sudo vi /etc/kdump.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Look <span class="keyword">for</span> the line starting with path and change it to your desired directory</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default: /var/crash</span></span><br><span class="line">path /new/crash/directory</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Restart the kdump service:</span></span><br><span class="line">sudo systemctl restart kdump</span><br></pre></td></tr></table></figure><h2 id="core-dumps"><a href="#core-dumps" class="headerlink" title="core dumps"></a>core dumps</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊñπÂºè‰∏ÄÔºöËÆæÁΩÆ core Êñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ</span></span><br><span class="line">echo &quot;/core/core.%e.%p&quot; &gt; /proc/sys/kernel/core_pattern</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">%e is replaced by the executable name.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">%p is replaced by the process ID.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊñπÂºè‰∫åÔºö</span></span><br><span class="line">sudo vim /etc/sysctl.conf</span><br><span class="line">kernel.core_pattern=/core/core-%e-%p-%t</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Apply the changes</span></span><br><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><table><thead><tr><th>Feature</th><th>Kernel Dumps</th><th>Core Dumps</th></tr></thead><tbody><tr><td>Source</td><td>Kernel crashes (kernel panic)</td><td>User-space process crashes</td></tr><tr><td>Trigger</td><td>Kernel panic</td><td>Process signals (e.g., SIGSEGV)</td></tr><tr><td>Contents</td><td>Entire (or partial) system memory</td><td>Process memory</td></tr><tr><td>Tools</td><td>kdump, crash</td><td>gdb, apport, ABRT</td></tr><tr><td>Debugging Scope</td><td>Kernel-level debugging</td><td>User-level application debugging</td></tr><tr><td>Location</td><td>Typically /var/crash</td><td>Specified by core_pattern (/proc/sys/kernel/core_pattern)</td></tr></tbody></table><h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><ul><li><p>unning duration or uptime</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> option 1</span></span><br><span class="line">uptime</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> option 2</span></span><br><span class="line">who -b</span><br></pre></td></tr></table></figure></li></ul><h2 id="process-1"><a href="#process-1" class="headerlink" title="process"></a>process</h2><ul><li><p>Tree view all process</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree -g</span><br></pre></td></tr></table></figure></li></ul><h2 id="Êü•ÁúãÁ≥ªÁªüÈÖçÁΩÆ"><a href="#Êü•ÁúãÁ≥ªÁªüÈÖçÁΩÆ" class="headerlink" title="Êü•ÁúãÁ≥ªÁªüÈÖçÁΩÆ"></a>Êü•ÁúãÁ≥ªÁªüÈÖçÁΩÆ</h2><ul><li><p>Êü•ÁúãÁ≥ªÁªü</p><ul><li><code>cat /etc/os-release</code></li></ul></li><li><p>Êü•ÁúãÂÜÖÊ†∏</p><ul><li><code>cat /proc/version</code></li><li><code>uname -a</code></li></ul></li><li><p>Êü•ÁúãlinuxÁâàÊú¨</p><ul><li><code>lsb_release -a</code></li><li><code>cat /etc/issue</code></li></ul></li><li><blockquote><p>ÊÄªÊ†∏Êï∞ = Áâ©ÁêÜCPU‰∏™Êï∞ X ÊØèÈ¢óÁâ©ÁêÜCPUÁöÑÊ†∏Êï∞ </p><p>ÊÄªÈÄªËæëCPUÊï∞ = Áâ©ÁêÜCPU‰∏™Êï∞ X ÊØèÈ¢óÁâ©ÁêÜCPUÁöÑÊ†∏Êï∞ X Ë∂ÖÁ∫øÁ®ãÊï∞</p></blockquote><ul><li><p>Êü•ÁúãÁâ©ÁêÜCPU‰∏™Êï∞</p><ol><li>topÂëΩ‰ª§ÔºåÁÑ∂ÂêéËæìÂÖ•Êï∞Â≠ó1Êü•ÁúãÔºåÂêÑÈ°πÂèÇÊï∞Â¶Ç‰∏ã<ul><li><code>us</code>ÔºöÁî®Êà∑Á©∫Èó¥Âç†Áî® CPU ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>sy</code>ÔºöÂÜÖÊ†∏Á©∫Èó¥Âç†Áî® CPU ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>ni</code>ÔºöË∞ÉÊï¥Ëøá‰ºòÂÖàÁ∫ßÁöÑËøõÁ®ãÂç†Áî® CPU ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>id</code>ÔºöÁ©∫Èó≤ CPU ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>wa</code>ÔºöÁ≠âÂæÖ I/O ÁöÑ CPU Êó∂Èó¥ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>hi</code>ÔºöÁ°¨‰∏≠Êñ≠Ôºàhardware interruptÔºâÂç†Áî® CPU ÁöÑÊó∂Èó¥ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>si</code>ÔºöËΩØ‰∏≠Êñ≠Ôºàsoftware interruptÔºâÂç†Áî® CPU ÁöÑÊó∂Èó¥ÁöÑÁôæÂàÜÊØî„ÄÇ</li><li><code>st</code>ÔºöËôöÊãüÊú∫ÊàñËÄÖËøêË°åÂú®ÂÆÉ‰∏äÈù¢ÁöÑËôöÊãü CPU Âç†Áî® CPU ÁöÑÊó∂Èó¥ÁöÑÁôæÂàÜÊØî„ÄÇ</li></ul></li><li>ËæìÂÖ•mpstatÊü•Áúã</li><li>ËæìÂÖ•‰ª•‰∏ãÂëΩ‰ª§</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br></pre></td></tr></table></figure></li><li><p>Êü•ÁúãÊØè‰∏™Áâ©ÁêÜCPU‰∏≠coreÁöÑ‰∏™Êï∞(Âç≥Ê†∏Êï∞)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq</span><br></pre></td></tr></table></figure></li><li><p>Êü•ÁúãÈÄªËæëCPUÁöÑÊÄªÊï∞</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="Ê∏ÖÁêÜÂÜÖÂ≠ò"><a href="#Ê∏ÖÁêÜÂÜÖÂ≠ò" class="headerlink" title="Ê∏ÖÁêÜÂÜÖÂ≠ò"></a>Ê∏ÖÁêÜÂÜÖÂ≠ò</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sync; echo 1 &gt; /proc/sys/vm/drop_caches</span><br></pre></td></tr></table></figure><h2 id="Êü•Áúãbuff-cache"><a href="#Êü•Áúãbuff-cache" class="headerlink" title="Êü•Áúãbuff/cache"></a>Êü•Áúãbuff/cache</h2><ul><li>Â∑•ÂÖ∑Êé®Ëçê <a href="https://github.com/silenceshell/hcache">https://github.com/silenceshell/hcache</a></li></ul><h1 id="troubleshooting"><a href="#troubleshooting" class="headerlink" title="troubleshooting"></a>troubleshooting</h1><h2 id="Èº†Ê†áÊåâÈîÆ‰ºöÂú®ÁªàÁ´ØËæìÂÖ•‰π±Á†Å"><a href="#Èº†Ê†áÊåâÈîÆ‰ºöÂú®ÁªàÁ´ØËæìÂÖ•‰π±Á†Å" class="headerlink" title="Èº†Ê†áÊåâÈîÆ‰ºöÂú®ÁªàÁ´ØËæìÂÖ•‰π±Á†Å"></a>Èº†Ê†áÊåâÈîÆ‰ºöÂú®ÁªàÁ´ØËæìÂÖ•‰π±Á†Å</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> the `reset` <span class="built_in">command</span> helps restore the terminal to a known good state, <span class="built_in">which</span> can be helpful <span class="keyword">in</span> troubleshooting issues or clearing screen clutter.</span></span><br><span class="line">reset</span><br></pre></td></tr></table></figure><h2 id="received-disconnect-from-x-port-22-2-Too-many-authentication-failures"><a href="#received-disconnect-from-x-port-22-2-Too-many-authentication-failures" class="headerlink" title="received disconnect from x port 22:2: Too many authentication failures"></a>received disconnect from x port 22:2: Too many authentication failures</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Remove all keys from the agent</span></span><br><span class="line">ssh-add -D</span><br></pre></td></tr></table></figure><h2 id="etc-hosts-Êñá‰ª∂Êó†Ê≥ïÁºñËæë"><a href="#etc-hosts-Êñá‰ª∂Êó†Ê≥ïÁºñËæë" class="headerlink" title="/etc/hosts Êñá‰ª∂Êó†Ê≥ïÁºñËæë"></a>/etc/hosts Êñá‰ª∂Êó†Ê≥ïÁºñËæë</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> the file may have the immutable attribute <span class="built_in">set</span>. Check with:</span></span><br><span class="line">lsattr /etc/hosts</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  remove i flag</span></span><br><span class="line">sudo chattr -i /etc/hosts</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> restore</span></span><br><span class="line">sudo chattr +i /etc/hosts</span><br></pre></td></tr></table></figure><h2 id="Cannot-create-a-temporary-file"><a href="#Cannot-create-a-temporary-file" class="headerlink" title="Cannot create a temporary file"></a>Cannot create a temporary file</h2><blockquote><p>Cannot create a temporary file /var/tmp/sclhOLz2G: No space left on device</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Áé∞Ë±°</span></span><br><span class="line">‰ªª‰ΩïÊìç‰ΩúÂùá‰ºöÊèêÁ§∫ ‰ª•‰∏äÊä•Èîô</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂéüÂõ†</span></span><br><span class="line">Á≥ªÁªüÁõòÂ∑≤Êª°</span><br><span class="line"><span class="meta">#</span><span class="bash"> Ëß£ÂÜ≥</span></span><br><span class="line">ÂàáÊç¢Âà∞rootÁî®Êà∑ÔºåÊ∏ÖÁêÜ‰∏Ä‰∫õÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÔºåÂ∞§ÂÖ∂ÊéíÊü•‰∏ã core Êñá‰ª∂</span><br></pre></td></tr></table></figure><h2 id="root-filesystem-xxx-UNEXPECTED-INCONSISTENCY-RUN-fsck-MANUALLY"><a href="#root-filesystem-xxx-UNEXPECTED-INCONSISTENCY-RUN-fsck-MANUALLY" class="headerlink" title="root filesystem xxx UNEXPECTED INCONSISTENCY; RUN fsck MANUALLY"></a>root filesystem xxx UNEXPECTED INCONSISTENCY; RUN fsck MANUALLY</h2><ul><li><p>issuse</p><img src="/images/linux/issuse-root_filesystem.png"></li><li><p>resolve</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fsck /dev/mapper/ubuntu--vg-ubuntu--lv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">When prompted, <span class="built_in">type</span> y to accept each fix suggestion, or a to fix all.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Once fsck completes successfully, reboot the system:</span></span><br><span class="line">exec reboot -f</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2016/08/05/git/"/>
      <url>/2016/08/05/git/</url>
      
        <content type="html"><![CDATA[<h1 id="architecture"><a href="#architecture" class="headerlink" title="architecture"></a>architecture</h1><img src="/images/git/git flow.JPG" style="zoom:50%"><p><strong>command</strong></p><img src="/images/git/git command.JPG" style="zoom:100%"><h2 id="Êñá‰ª∂Áõ∏ÂÖ≥"><a href="#Êñá‰ª∂Áõ∏ÂÖ≥" class="headerlink" title="Êñá‰ª∂Áõ∏ÂÖ≥"></a>Êñá‰ª∂Áõ∏ÂÖ≥</h2><ul><li><p>Êèê‰∫§Âçï‰∏™Êñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit &lt;file&gt; -m &quot;your comment&quot; </span><br><span class="line">git pull</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li><li><p>Êèê‰∫§Â§ö‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØÈúÄË¶ÅÊéíÈô§ÊåáÂÆöÁöÑÊñá‰ª∂</p><ul><li>method a</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add -u</span><br><span class="line">git reset -- main/dontcheckmein.txt</span><br><span class="line">ÁÑ∂ÂêéËøõË°åcommit„ÄÅpullÁ≠âÊìç‰Ωú</span><br></pre></td></tr></table></figure><ul><li>method b</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add . &#x27;:!&lt;file-to-exclude&gt;&#x27;</span><br></pre></td></tr></table></figure></li><li><p>ÊØîËæÉÊñá‰ª∂ÔºåÂú®‰∏çÂêåÁâàÊú¨ÁöÑÂå∫Âà´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> uncommited file to HEAD</span></span><br><span class="line">git diff &lt;path&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> uncommited file to before last commit</span></span><br><span class="line">git diff HEAD^ -- &lt;path&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">last commit to before last commit</span></span><br><span class="line">git diff HEAD^ HEAD -- &lt;path&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">difference between HEAD and n-th grandparent</span></span><br><span class="line">git diff HEAD~n HEAD -- &lt;path&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Another cool feature is whatchanged <span class="built_in">command</span></span></span><br><span class="line">git whatchanged -- &lt;path&gt;</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ËøúÁ®ã‰ªìÂ∫ìÊñá‰ª∂Ôºå‰ΩÜ‰øùÁïôÊú¨Âú∞Êñá‰ª∂Á≥ªÁªüÁöÑÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êñá‰ª∂</span></span><br><span class="line">git rm --cached path/to/file</span><br><span class="line"><span class="meta">#</span><span class="bash"> ÁõÆÂΩï</span></span><br><span class="line">git rm -r --cached path/to/directory</span><br></pre></td></tr></table></figure></li><li><p>Êí§ÈîÄ‰ª£Á†Å‰øÆÊîπ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git restore &lt;file&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  reset all tracked files</span></span><br><span class="line">git restore .</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§Êú™Ë¢´ËøΩË∏™ÁöÑÊñá‰ª∂ÊàñÁõÆÂΩï</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂ∞ÜË¶ÅÂà†Èô§ÁöÑÊñá‰ª∂</span></span><br><span class="line">git clean -n</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§Êú™ËøΩË∏™ÁöÑÊñá‰ª∂</span></span><br><span class="line">git clean -f</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§Êú™ËøΩË∏™ÁöÑÊñá‰ª∂ÂíåÁõÆÂΩï</span></span><br><span class="line">git clean -fd</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Âà†Èô§Êú™ËøΩË∏™ÁöÑÊñá‰ª∂„ÄÅÁõÆÂΩïÂíåÂøΩÁï•ÁöÑÊñá‰ª∂</span></span><br><span class="line">git clean -fdx</span><br></pre></td></tr></table></figure></li><li><p>Êü•ÁúãÊåáÂÆöcommitÊèê‰∫§ÁöÑÊñá‰ª∂‰ø°ÊÅØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git show --name-only &lt;commit-hash&gt;</span><br><span class="line">git show --name-status &lt;commit-hash&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="fork-Áõ∏ÂÖ≥"><a href="#fork-Áõ∏ÂÖ≥" class="headerlink" title="fork Áõ∏ÂÖ≥"></a>fork Áõ∏ÂÖ≥</h2><p>Git forkÂêéÁöÑÂàÜÊîØÔºåÊõ¥Êñ∞ÊúÄÊñ∞ÁöÑÊ∫ê‰ª£Á†Å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sourcer‰∏∫Ê∫êÈ°πÁõÆ‰ª£Á†Å</span><br><span class="line">forker‰∏∫fork‰πãÂêéÁöÑÈ°πÁõÆ‰ª£Á†Å</span><br><span class="line"></span><br><span class="line">1„ÄÅÊâæ‰∏Ä‰∏™Á©∫ÁöÑÁõÆÂΩï‰∏ãÁ≠æÂá∫ fork ÂêéÁöÑ‰ª£Á†Å</span><br><span class="line">git clone https://github.com/sourcer/demo.git</span><br><span class="line">Êü•Áúã remote ‰ø°ÊÅØ</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">2„ÄÅÁÑ∂ÂêéÊ∑ªÂä†Ê∫êÈ°πÁõÆÂú∞ÂùÄÔºàË∑ùÁ¶ªÂÆö‰πâ‰∏∫ sourceÔºâ</span><br><span class="line">git remote add source https://github.com/forker/demo.git</span><br><span class="line">Êü•Áúã remote ‰ø°ÊÅØÔºåÂèØ‰ª•ÁúãÂà∞Êñ∞Â¢û‰∏§Êù°‰ø°ÊÅØ</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">3„ÄÅfetch Ê∫êÈ°πÁõÆ</span><br><span class="line">git fetch source</span><br><span class="line"></span><br><span class="line">4„ÄÅÂêàÂπ∂‰ª£Á†Å</span><br><span class="line">git merge source/master</span><br><span class="line"></span><br><span class="line">5„ÄÅÊääÂêàÂπ∂ÊúÄÊñ∞ÁöÑ‰ª£Á†ÅÊé®ÈÄÅÂà∞‰Ω†ÁöÑforkÈ°πÁõÆ‰∏ä</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h2 id="commitÁõ∏ÂÖ≥"><a href="#commitÁõ∏ÂÖ≥" class="headerlink" title="commitÁõ∏ÂÖ≥"></a>commitÁõ∏ÂÖ≥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÊØè‰∏ÄË°åÊòØÂì™Ê¨°Êèê‰∫§ÊúÄÂêé‰øÆÊîπÁöÑ</span></span><br><span class="line">git blame filename </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÂàóÂá∫Êñá‰ª∂ÁöÑÊâÄÊúâ‰øÆÊîπËÆ∞ÂΩï</span></span><br><span class="line">git log -p filename</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ‰ª•ÂçïË°åÂàóÂá∫commit‰ø°ÊÅØ</span></span><br><span class="line">git log --oneline</span><br></pre></td></tr></table></figure><h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><ul><li><p>config commit identity</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> Setting these values with --global applies them to all repositories on your machine. You can also <span class="built_in">set</span> them at the repository level by omitting --global, <span class="keyword">in</span> <span class="built_in">which</span> <span class="keyword">case</span> they will override the global settings <span class="keyword">for</span> that specific project.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g.</span></span><br><span class="line">git config  user.email &quot;jackblack369@163.com&quot;</span><br><span class="line">git config  user.name &quot;Wei Dong&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Git automatically converts CRLF to LF when committing and back to CRLF when checking out.</span></span><br><span class="line">git config --global core.autocrlf</span><br></pre></td></tr></table></figure></li><li><p>commit info</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure></li><li><p>Type</p><blockquote><p>You can use your own commit types, but here are the most common use cases:</p></blockquote><ul><li><p>feat: a new feature, or change to an existing feature.</p></li><li><p>fix: Fixing a bug or known issue in code.</p></li><li><p>test: Adding additional tests for existing features.</p></li><li><p>chore: Updating build tools, like webpack, gulp, ascripts, etc.</p></li><li><p>docs: Update to documentation like README, wiki, etc.</p></li></ul></li><li><p>Scope</p><blockquote><p>The scope of the commit can be kept as granular as required and is bound to change based on the complexity of the project. If you are starting off a project, it might not seem necessary at the beginning, although, it is highly recommended as it makes you think twice and harder about the changes that you are about to push.</p></blockquote></li><li><p>reference <a href="https://hackernoon.com/7-rules-for-writing-a-good-commit-message">7 Rules for Writing a Good Commit Message</a></p></li></ul><h3 id="amend"><a href="#amend" class="headerlink" title="amend"></a>amend</h3><blockquote><p>In Git, the ‚Äìamend option is used with the git commit command to modify the most recent commit. It allows you to make changes to the last commit without creating a new one, which is helpful for fixing small mistakes such as a missing file, a typo in the commit message, or an incorrect change.</p></blockquote><ul><li><p><strong>Example 1: Fixing a Commit Message</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Suppose you made a commit but realized there was a typo <span class="keyword">in</span> the message:</span></span><br><span class="line">git commit -m &quot;Fixing a bugg in login&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To correct the message, This will update the last commit with the corrected message.</span></span><br><span class="line">git commit --amend -m &quot;Fixing a bug in login&quot;</span><br></pre></td></tr></table></figure></li><li><p><strong>Example 2: Adding Missing Changes</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> You commit some changes but forgot to include a file:</span></span><br><span class="line">git commit -m &quot;Add login functionality&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Later, you realize that you forgot to add auth.js. To fix this:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.Stage the missing file:</span></span><br><span class="line">git add auth.js</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.Amend the commit:</span></span><br><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><p>Git will open an editor to let you modify the commit message if needed. Save and close the editor to complete the process.</p></li></ul><p><strong>Important Notes</strong></p><ol><li><strong>Avoid amending commits that have already been pushed</strong></li></ol><p>Amending changes the commit‚Äôs hash, which can lead to problems if others have already pulled the original commit.</p><ol start="2"><li><strong>Use in Local Development</strong></li></ol><p><code>git commit --amend</code> is best used in local branches before pushing changes to a shared repository.</p><h2 id="ÂõûÊªö"><a href="#ÂõûÊªö" class="headerlink" title="ÂõûÊªö"></a>ÂõûÊªö</h2><ul><li><p>method 1: ÈáçÁΩÆÂΩìÂâçÂàÜÊîØÁöÑ HEAD ÊåáÈíà‰ª•ÂèäÂ∑•‰ΩúÁõÆÂΩïÂíåÊöÇÂ≠òÂå∫ÁöÑÂÜÖÂÆπÂà∞ÊåáÂÆöÁöÑÊèê‰∫§ÔºåÊì¶Èô§‰∫ÜÁõÆÊ†áÊèê‰∫§‰πãÂêéÁöÑÊâÄÊúâÊèê‰∫§ÂéÜÂè≤„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit-id&gt;</span><br></pre></td></tr></table></figure></li><li><p>Method 2: Âè™ÊÉ≥ÂõûÊªöÂà∞ÊåáÂÆöÊèê‰∫§ÔºåÂπ∂‰øùÁïôÂêéÁª≠Êèê‰∫§ÂéÜÂè≤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert &lt;commit-id&gt;</span><br></pre></td></tr></table></figure></li><li><p>ÂõûÊªöËøúÁ®ãÂàÜÊîØ</p><ul><li>Êú¨Âú∞‰ª£Á†ÅÂõûÊªöÂà∞‰∏ä‰∏ÄÁâàÊú¨ <code>git reset --hard HEAD~1</code></li><li>ÂõûÊªöÂà∞ÊåáÂÆöÁâàÊú¨commitId  <code>git reset --hard commitId</code></li></ul></li></ul><p>Âä†ÂÖ•-fÂèÇÊï∞ÔºåÂº∫Âà∂Êèê‰∫§ÔºåËøúÁ®ãÁ´ØÂ∞ÜÂº∫Âà∂Ë∑üÊñ∞Âà∞resetÁâàÊú¨</p><blockquote><p> git push -f</p></blockquote><h2 id="ÂàÜÊîØ"><a href="#ÂàÜÊîØ" class="headerlink" title="ÂàÜÊîØ"></a>ÂàÜÊîØ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂàÜÊîØÊèê‰∫§ÂéÜÂè≤</span></span><br><span class="line">git log --oneline --graph --decorate</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êü•ÁúãÂàÜÊîØÂØπÂ∫îÁöÑËøúÁ®ãÂàÜÊîØ</span></span><br><span class="line">git branch -vv</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êõ¥ÊîπÂΩìÂâçÂàÜÊîØÂØπÂ∫îÁöÑËøúÁ®ãÂàÜÊîØ</span></span><br><span class="line">git branch -u origin/develop</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÈáçÂëΩÂêçÂàÜÊîØ</span></span><br><span class="line">git branch -m new-branch-name</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Â§á‰ªΩÂàÜÊîØ</span></span><br><span class="line">git branch bk-dev HEAD</span><br></pre></td></tr></table></figure><ul><li><p>ÊãâÂèñËøúÁ®ãÂàÜÊîØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> First, fetch the remote branches:</span></span><br><span class="line">git fetch origin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Next, checkout the branch you want. In this <span class="keyword">case</span>, the branch we want is called ‚Äúbranchxyz‚Äù.</span></span><br><span class="line">git checkout -b branchxyz origin/branchxyz**</span><br></pre></td></tr></table></figure></li><li><p>Êñ∞Âª∫ÂàÜÊîØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> To create a new branch from a branch you <span class="keyword">do</span> NOT have checked out:</span></span><br><span class="line">git branch new_branch from_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To create a new branch from the branch you DO have checked out:</span></span><br><span class="line">git branch new_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To create *and check out* a new branch from the branch you DO have checked out:</span></span><br><span class="line">git checkout -b new_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To create *and check out* a new branch from a branch you <span class="keyword">do</span> NOT have checked out:</span></span><br><span class="line">git checkout -b new_branch from_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Create a new branch from that commit by using the commit <span class="built_in">hash</span></span></span><br><span class="line">git checkout -b new-branch-name commit-id</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To rename a branch</span></span><br><span class="line">git branch -m old_name new_name</span><br></pre></td></tr></table></figure></li><li><p>Êé®ÈÄÅÊñ∞ÂàÜÊîØÂà∞ËøúÁ®ã</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. Â∞ÜdevelopÂàÜÊîØÊé®ÈÄÅÂà∞ËøúÁ®ã</span></span><br><span class="line">git push origin new_branch:new_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. Âª∫Á´ãÊú¨Âú∞Ëá≥‰∏äÊ∏∏ÔºàËøúÁ®ãÔºâÂàÜÊîØÁöÑÈìæÊé•</span></span><br><span class="line">git branch --set-upstream-to=origin/new_branch new_branch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Â¶ÇÊûúË¶ÅÊé®ÈÄÅÂà∞ÁöÑËøúÁ®ãÂàÜÊîØ origin/new_branch ‰∏éÊú¨Âú∞ÂàÜÊîØ new_branch ÂêçÂ≠óÁõ∏ÂêåÔºåÈÇ£ÂèØ‰ª•‰ΩøÁî®</span></span><br><span class="line">git branch --set-upstream-to origin new_branch</span><br></pre></td></tr></table></figure></li><li><p>Âà†Èô§ÂàÜÊîØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> delete branch locally (Â¶ÇÊûúË¶ÅÂà†Èô§Ëøô‰∏™ÂàÜÊîØÁöÑËØùÔºåÈúÄË¶ÅË∑≥ËΩ¨Ëá≥ÂÖ∂‰ªñÂàÜÊîØÂêéËøõË°åÂà†Èô§Êìç‰Ωú)</span></span><br><span class="line">git branch -d localBranchName</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete branch remotely</span></span><br><span class="line">git push origin --delete remoteBranchName</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If someone <span class="keyword">else</span> has already deleted the branch, you just <span class="keyword">do</span> below</span></span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure></li></ul><h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><ul><li><p>ÊãâÂèñÂπ∂ÂàáÊç¢ÊåáÂÆötag ÂàÜÊîØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  git fetch --all --tags</span><br><span class="line">  git tag  # list all tag</span><br><span class="line">  git checkout &lt;tag_name&gt;</span><br><span class="line"></span><br><span class="line">- ÂØπÊåáÂÆöcommitËøõË°åÊ†áËÆ∞tag</span><br><span class="line"></span><br><span class="line">  ```shell</span><br><span class="line">  git tag &lt;tag_name&gt; &lt;commit_hash&gt;</span><br><span class="line">  git push origin &lt;tag_name&gt;</span><br><span class="line">  </span><br><span class="line"><span class="meta">  #</span><span class="bash"> push remote upstream repo</span></span><br><span class="line">  git push upstream &lt;tag_name&gt;</span><br><span class="line"><span class="meta">  #</span><span class="bash"> ËØ•ÂëΩ‰ª§‰ºöËá™Âä®Ëß¶Âèëupstream repoÁöÑgithub workflow</span></span><br></pre></td></tr></table></figure></li><li><p>Ê†πÊçÆtagÂàõÂª∫ÂàÜÊîØ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new_branch_name&gt; &lt;tag_name&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="conflict"><a href="#conflict" class="headerlink" title="conflict"></a>conflict</h2><ul><li><p>Êü•ÁúãÂÜ≤Á™ÅÊñá‰ª∂</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Highlight conflicts within files</span></span><br><span class="line">git diff</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> List conflict files directly</span></span><br><span class="line">git diff --name-only --diff-filter=U</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Check merge conflicts interactively</span></span><br><span class="line">git mergetool</span><br></pre></td></tr></table></figure></li></ul><h2 id="ÊöÇÂ≠òÂå∫"><a href="#ÊöÇÂ≠òÂå∫" class="headerlink" title="ÊöÇÂ≠òÂå∫"></a>ÊöÇÂ≠òÂå∫</h2><ul><li><p>Êü•ÁúãÊöÇÂ≠òÂÜÖÂÆπÁöÑÂ∑ÆÂºÇÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure></li><li><p>ÈáçÁΩÆÊöÇÂ≠òÂå∫ÔºàÂØπ‰∫éÊâÄÊúâÊñá‰ª∂ÔºâÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset</span><br></pre></td></tr></table></figure></li></ul><h2 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h2><p>Âú®Git‰∏≠Ôºå<code>stash</code>ÂëΩ‰ª§Áî®‰∫éÊöÇÂ≠òÂΩìÂâçÊú™Êèê‰∫§ÁöÑ‰ª£Á†Å‰øÆÊîπÔºå‰ª•‰æøÂú®ÂêéÁª≠Êó∂ÂàªÂÜçÊ¨°Â∫îÁî®ÂÆÉ‰ª¨„ÄÇÂÆÉÂèØ‰ª•ÊöÇÂ≠òÂ∑≤‰øÆÊîπ‰ΩÜËøòÊú™Ê∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫ÁöÑÊñá‰ª∂Ôºå‰πüÂèØ‰ª•ÊöÇÂ≠òÂ∑≤ÁªèÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫‰ΩÜËøòÊú™Êèê‰∫§ÁöÑÊñá‰ª∂„ÄÇ</p><p>‰ª•‰∏ãÊòØ<code>stash</code>ÂëΩ‰ª§ÁöÑ‰ΩøÁî®ÊñπÂºèÔºö</p><ol><li><p>ÊöÇÂ≠òÂΩìÂâç‰øÆÊîπÔºö(Ëøô‰∏™ÂëΩ‰ª§Â∞ÜÂΩìÂâçÁöÑ‰øÆÊîπÊöÇÂ≠òËµ∑Êù•ÔºåËÆ©‰Ω†ÁöÑÂ∑•‰ΩúÁõÆÂΩïÂèòÊàêÂπ≤ÂáÄÁöÑÁä∂ÊÄÅ„ÄÇ)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure></li><li><p>ÊÅ¢Â§çÊöÇÂ≠òÁöÑ‰øÆÊîπÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure><p>Ëøô‰∏™ÂëΩ‰ª§Â∞Ü‰πãÂâçÊöÇÂ≠òÁöÑ‰øÆÊîπÂ∫îÁî®Âà∞ÂΩìÂâçÂàÜÊîØ‰∏ä„ÄÇÂ¶ÇÊûú‰Ω†ÊúâÂ§ö‰∏™stashÔºåÂèØ‰ª•‰ΩøÁî®<code>git stash apply stash@&#123;n&#125;</code>Êù•ÊåáÂÆöÊÅ¢Â§çÊüê‰∏™ÁâπÂÆöÁöÑstash„ÄÇ</p></li><li><p>Âà†Èô§stashÔºö</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop</span><br></pre></td></tr></table></figure><p>Ëøô‰∏™ÂëΩ‰ª§‰ºöÂà†Èô§ÊúÄËøëÁöÑ‰∏Ä‰∏™stash„ÄÇ</p></li><li><p>ÂàóÂá∫ÊâÄÊúâstashÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure></li><li><p>Â∫îÁî®Âπ∂Âà†Èô§stashÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p>Ëøô‰∏™ÂëΩ‰ª§Áõ∏ÂΩì‰∫é<code>git stash apply</code>Âíå<code>git stash drop</code>ÁöÑÁªÑÂêàÔºåÂÆÉ‰ºöÂ∞ÜÊúÄËøëÁöÑ‰∏Ä‰∏™stashÂ∫îÁî®Âà∞ÂΩìÂâçÂàÜÊîØÔºåÂπ∂Â∞ÜÂÖ∂Âà†Èô§„ÄÇ</p></li><li><p>ÊöÇÂ≠òÁâπÂÆöÁöÑÊñá‰ª∂Ôºö</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash push path/to/file</span><br></pre></td></tr></table></figure><p>Ëøô‰∏™ÂëΩ‰ª§ÂèØ‰ª•Â∞ÜÊåáÂÆöÁöÑÊñá‰ª∂ÊöÇÂ≠òËµ∑Êù•ÔºåËÄå‰∏çÊòØÊöÇÂ≠òÊï¥‰∏™Â∑•‰ΩúÁõÆÂΩï„ÄÇ</p></li><li><p>ÁªôstashÊ∑ªÂä†ÊèèËø∞Ôºö</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash save <span class="string">&quot;stash message&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h2><p><a href="https://waynerv.com/posts/git-rebase-intro/">git rebase Áî®Ê≥ïËØ¶Ëß£‰∏éÂ∑•‰ΩúÂéüÁêÜ</a></p><p><a href="https://johneverettcase.com/git-how-to-rebase-a-fork">How to Rebase a Fork</a></p><ol><li><p><strong>Êõ¥Êñ∞Êú¨Âú∞‰∏ªÂàÜÊîØÔºàÈÄöÂ∏∏ÊòØ master Êàñ mainÔºâ:</strong> Ëé∑ÂèñÂéüÂßã‰ªìÂ∫ìÁöÑÊúÄÊñ∞Êõ¥ÊîπÂπ∂ÂêàÂπ∂Âà∞‰Ω†ÁöÑÊú¨Âú∞‰∏ªÂàÜÊîØÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master  # ÂàáÊç¢Âà∞‰Ω†ÁöÑÊú¨Âú∞‰∏ªÂàÜÊîØ</span><br><span class="line">git pull upstream master  # ‰ªéÂéüÂßã‰ªìÂ∫ìÊãâÂèñÊúÄÊñ∞Êõ¥ÊîπÂà∞Êú¨Âú∞‰∏ªÂàÜÊîØ</span><br></pre></td></tr></table></figure><p>Êàñ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch upstream</span><br></pre></td></tr></table></figure></li><li><p><strong>ÂàáÊç¢Âà∞‰Ω†ÁöÑÂàÜÊîØÂπ∂ËøõË°å rebase:</strong> ÂàáÊç¢Âà∞‰Ω†ÁöÑÂàÜÊîØÂπ∂Â∞ÜÂÖ∂ rebase Âà∞‰∏ªÂàÜÊîØ‰∏äÔºö</p><ul><li>Â¶ÇÊûúÊòØÊñ∞ÂàÜÊîØ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;Êñ∞ÂàÜÊîØ&gt;</span><br><span class="line">git rebase master  # Â∞ÜÊñ∞ÂàÜÊîØ rebase Âà∞‰Ω†ÁöÑÊú¨Âú∞‰∏ªÂàÜÊîØ</span><br></pre></td></tr></table></figure><ul><li>Â¶ÇÊûúÊòØÂ∑≤ÊúâÂàÜÊîØ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;Â∑≤ÊúâÂàÜÊîØ&gt;</span><br><span class="line">git rebase upstream/master</span><br></pre></td></tr></table></figure></li><li><p><strong>Ëß£ÂÜ≥ÂÜ≤Á™ÅÔºàÂ¶ÇÊûúÊúâÔºâ:</strong> Â¶ÇÊûúÂú® rebase ËøáÁ®ã‰∏≠Âá∫Áé∞ÂÜ≤Á™ÅÔºå‰Ω†ÈúÄË¶ÅÊâãÂä®Ëß£ÂÜ≥ÂÜ≤Á™ÅÔºåÁÑ∂Âêé‰ΩøÁî® <code>git add</code> Ê†áËÆ∞‰∏∫Â∑≤Ëß£ÂÜ≥„ÄÇ</p><ul><li>Â±ïÁ§∫ÂÜ≤Á™Å‰ª£Á†ÅÔºàÂèØÁúÅÁï•Ôºâ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --name-only --diff-filter=U</span><br></pre></td></tr></table></figure><ul><li>Ëß£ÂÜ≥‰ª£Á†ÅÂÜ≤Á™Å<ul><li>IDEÊâãÂä®Ëß£ÂÜ≥</li><li>vimdiffËß£ÂÜ≥</li><li>meldËß£ÂÜ≥</li></ul></li><li>Ëß£ÂÜ≥‰πãÂêé</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .  # resolve conflict, always use add &amp; commit üö®</span><br><span class="line">git commit -m &quot;xxx&quot;</span><br><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure><ul><li>ÁªàÊ≠¢rebase</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --abort</span><br></pre></td></tr></table></figure></li><li><p><strong>Êé®ÈÄÅÊõ¥ÊîπÂà∞ËøúÁ®ã‰ªìÂ∫ì:</strong> Êé®ÈÄÅ‰Ω†ÁöÑÊõ¥ÊîπÂà∞ËøúÁ®ã‰ªìÂ∫ìÔºö</p><ul><li>Â¶ÇÊûúÊòØÊñ∞ÂàÜÊîØ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;ÂàÜÊîØ&gt; --force  # Âº∫Âà∂Êé®ÈÄÅÂà∞‰Ω†ÁöÑ fork ‰ªìÂ∫ìÁöÑÊñ∞ÂàÜÊîØ‰∏ä</span><br><span class="line">Êàñ</span><br><span class="line">git push -f origin &lt;ÂàÜÊîØ&gt;</span><br></pre></td></tr></table></figure><p>ËØ∑Ê≥®ÊÑèÔºö‰ΩøÁî® <code>--force</code> ÂèÇÊï∞ËøõË°åÂº∫Âà∂Êé®ÈÄÅÊó∂ÔºåËØ∑Á°Æ‰øù‰Ω†‰∫ÜËß£ÂÆÉÁöÑÂΩ±Âìç„ÄÇÂÆÉÂèØËÉΩ‰ºöË¶ÜÁõñËøúÁ®ãÂàÜÊîØÁöÑÂéÜÂè≤ËÆ∞ÂΩïÔºåÂõ†Ê≠§Âä°ÂøÖÂ∞èÂøÉÊìç‰Ωú„ÄÇ</p><ul><li>Â¶ÇÊûúÊòØÂ∑≤ÊúâÂàÜÊîØ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure></li><li><p><strong>ÂàõÂª∫ Pull Request:</strong> Âú®‰Ω†ÁöÑ fork ‰ªìÂ∫ì‰∏≠Ôºå‰ªéÊñ∞ÂàÜÊîØÂàõÂª∫‰∏Ä‰∏™ Pull RequestÔºàPRÔºâÔºåÂ∞Ü‰Ω†ÁöÑÊõ¥ÊîπÂêàÂπ∂Âà∞ÂéüÂßã‰ªìÂ∫ìÁöÑÁõÆÊ†áÂàÜÊîØ</p></li></ol><h2 id="squash-reword-commit"><a href="#squash-reword-commit" class="headerlink" title="squash/reword commit"></a>squash/reword commit</h2><blockquote><p>ÊèêÂâçÂ§á‰ªΩÂæÖÊìç‰ΩúÁöÑÂàÜÊîØ git branch bk-dev HEAD</p></blockquote><ol><li><p>merge the last 3 commits into a single commit.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~3</span><br></pre></td></tr></table></figure></li><li><p>replace all those <code>pick</code> with <code>squash</code> (or simply <code>s</code>) apart from the first one.</p><img src="https://www.freecodecamp.org/news/content/images/2023/03/Screenshot-2023-03-22-at-11.28.12.png" style="zoom:40%"><p><strong>Note:</strong> <code>pick</code> or <code>p</code> will only use those commits, but <code>squash</code> or <code>s</code> will use them and combine them all together.</p><p>The first commit is the one you will combine them into without losing your changes.</p><blockquote><p>Ê≥®ÊÑèÔºå‰∏ÄËà¨ÈúÄË¶Å squashÁöÑÊòØÂêéÈù¢ÁöÑcommitÔºåÈúÄË¶Å‰øùËØÅÁ¨¨‰∏ÄÊù°ÔºàÊúÄÊó©ÁöÑÔºâcommit ‰ø°ÊÅØ‰∏çË¢´ squash</p></blockquote></li><li><p>After doing that, save the file and close it. Git will open up another editor where you can see the new commit message it generates for you.</p><img src="https://www.freecodecamp.org/news/content/images/2023/03/Screenshot-2023-03-22-at-11.36.02.png"   style="zoom:40%;"/><p>You can get rid of all of them and add your custom message:</p><img src="https://www.freecodecamp.org/news/content/images/2023/03/Screenshot-2023-03-22-at-11.37.45.png" style="zoom:44%;"><p> Or you can leave it as is. If you add a new commit message, save the file and close it.</p></li><li><p>Pushing changes, You should run git push to add a new commit to the remote origin. If you have already pushed your commits, then you should force push them using the git push command with ‚Äî force flag (suppose, the name of remote is origin, which is by default)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --force origin HEAD</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>‰∏≠ÈÄîÂ¶ÇÈúÄÁªàÊ≠¢rebaseÔºåËøêË°å git rebase ‚Äìabort</p></blockquote><ol start="5"><li><p>ÂÖ∂ÂÆÉÁªìÂêà</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- ÂÖàËøõË°å `git rebase upstream/v1` ÂèØ‰ª•Á°Æ‰øù‰Ω†ÁöÑÂàÜÊîØÊòØÂü∫‰∫éÊúÄÊñ∞ÁöÑ‰∏äÊ∏∏‰ª£Á†Å„ÄÇ</span><br><span class="line"></span><br><span class="line">- ÁÑ∂ÂêéËøõË°å `git rebase -i HEAD~2` ËÆ©‰Ω†ÂèØ‰ª•Âú®ÊúÄÊñ∞‰ª£Á†ÅÁöÑÂü∫Á°Ä‰∏ä‰øÆÊîπ‰Ω†ÁöÑÊèê‰∫§„ÄÇ</span><br><span class="line"></span><br><span class="line">  Ëøô‰∏™È°∫Â∫èÂèØ‰ª•ÂáèÂ∞ëÂÜ≤Á™ÅÁöÑÂèØËÉΩÊÄßÔºåÂõ†‰∏∫‰Ω†ÂÖàÂ∞Ü‰Ω†ÁöÑ‰ª£Á†ÅÂü∫‰∫éÊúÄÊñ∞ÁöÑ‰∏äÊ∏∏‰ª£Á†ÅÔºåÁÑ∂ÂêéÂÜç‰øÆÊîπ‰Ω†Ëá™Â∑±ÁöÑÊèê‰∫§„ÄÇ</span><br></pre></td></tr></table></figure></li></ol><h2 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h2><p><a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork">docs.github.com</a></p><ul><li><strong>ÂàùÂßãÂåñ‰ªìÂ∫ì</strong></li></ul><ol><li><p>List the current configured remote repository for your fork.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> origin  https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> origin  https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)</span></span><br></pre></td></tr></table></figure></li><li><p>Specify a new remote <em>upstream</em> repository that will be synced with the fork.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git</span><br></pre></td></tr></table></figure></li><li><p>Verify the new upstream repository you‚Äôve specified for your fork.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> origin    https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> origin    https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> upstream  https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> upstream  https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push)</span></span><br></pre></td></tr></table></figure></li></ol><ul><li><strong>ÂêåÊ≠•‰ª£Á†Å</strong></li></ul><ol><li><p>Change the current working directory to your local project.</p></li><li><p>Fetch the branches and their respective commits from the upstream repository. Commits to <code>BRANCHNAME</code> will be stored in the local branch <code>upstream/BRANCHNAME</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch upstream</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> remote: Counting objects: 75, <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> remote: Compressing objects: 100% (53/53), <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> remote: Total 62 (delta 27), reused 44 (delta 9)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Unpacking objects: 100% (62/62), <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  * [new branch]      main     -&gt; upstream/main</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊåáÂÆöfetchÊüê‰∏™ÂàÜÊîØ</span></span><br><span class="line">git fetch &lt;remote&gt; &lt;branch&gt;</span><br></pre></td></tr></table></figure></li><li><p>Check out your fork‚Äôs local default branch - in this case, we use <code>main</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout main</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Switched to branch <span class="string">&#x27;main&#x27;</span></span></span><br></pre></td></tr></table></figure></li><li><p>Merge the changes from the upstream default branch - in this case, <code>upstream/main</code> - into your local default branch. This brings your fork‚Äôs default branch into sync with the upstream repository, without losing your local changes.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge upstream/main</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Updating a422352..5fdff0f</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Fast-forward</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  README                    |    9 -------</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  README.md                 |    7 ++++++</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  2 files changed, 7 insertions(+), 9 deletions(-)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  delete mode 100644 README</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  create mode 100644 README.md</span></span><br></pre></td></tr></table></figure><p>If your local branch didn‚Äôt have any unique commits, Git will perform a fast-forward. For more information, see <a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">Basic Branching and Merging</a> in the Git documentation.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge upstream/main</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Updating 34e91da..16c56ad</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Fast-forward</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  README.md                 |    5 +++--</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  1 file changed, 3 insertions(+), 2 deletions(-)</span></span><br></pre></td></tr></table></figure><p>If your local branch had unique commits, you may need to resolve conflicts. For more information, see ‚Äú<a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/addressing-merge-conflicts">Addressing merge conflicts</a>.‚Äù</p></li></ol><h2 id="submodule"><a href="#submodule" class="headerlink" title="submodule"></a>submodule</h2><blockquote><p>ÂØπ‰∫éÈ°πÁõÆ‰∏≠ÂåÖÂê´Â≠êÈ°πÁõÆÁöÑgitÈ°πÁõÆ</p><p>reference</p><p><a href="https://www.git-scm.com/book/en/v2/Git-Tools-Submodules">https://www.git-scm.com/book/en/v2/Git-Tools-Submodules</a></p><p> <a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97">https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97</a></p></blockquote><ul><li><p>Â¶ÇÊûúÊòØÈ¶ñÊ¨°ÂÖãÈöÜÔºåÂàùÂßãÂåñ‰ª£Á†ÅÈúÄË¶Å <code>git clone --recurse-submodules https://github.com/chaconinc/MainProject</code></p><p>ÊàñÂ¶ÇÊûúÈ¶ñÊ¨°Ê≤°Êúâ‰ΩøÁî®<code>--recurse-submodules</code>ÔºåÈÇ£ÂêéÈù¢ÂèØ‰ª•ÈÄöËøá <code>git submodule init</code>Âíå<code>git submodule update</code>ÔºåËøõË°åÂ≠êÊ®°ÂùóÁöÑÊãâÂèñÊõ¥Êñ∞</p></li></ul><ul><li><p>Â¶Ç‰ΩïË¶ÅÂØπÂ≠êÊ®°ÂùóÁöÑ‰ª£Á†Å‰πüÁî®ÂÖãÈöÜÂú∞ÂùÄ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config -f .gitmodules -e    # opens editor, update URLs for your forks`</span><br><span class="line">git submodule sync</span><br></pre></td></tr></table></figure></li><li><p>ÂêéÊúü‰ªéËøúÁ®ã‰ªìÂ∫ìÊõ¥Êñ∞submodule‰ª£Á†Å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --remote</span><br></pre></td></tr></table></figure></li><li><p>Âú®Â∑≤ÊúâÈ°πÁõÆÊ∑ªÂä†Â≠êÊ®°Âùó</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> add the submodule</span></span><br><span class="line">git submodule add https://github.com/example/submodule.git submodule-dir</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> fetch and checkout the specific tag</span></span><br><span class="line">cd submodule-dir</span><br><span class="line">git fetch --tags</span><br><span class="line">git checkout &lt;xxx&gt;</span><br><span class="line">cd ..</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check submodule</span></span><br><span class="line">git submodule status</span><br></pre></td></tr></table></figure></li></ul><h1 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry pick"></a>cherry pick</h1><p>If the new commits (commit-4, commit-5, commit-6) are in the feat-alpha branch and you want to cherry-pick them into a clean branch based on upstream/main, here‚Äôs how to do it:</p><p><strong>1. Fetch the Latest Changes from Upstream</strong></p><p>First, ensure you have the latest changes from the upstream repository:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch upstream</span><br><span class="line">git checkout main</span><br><span class="line">git merge upstream/main</span><br></pre></td></tr></table></figure><p><strong>2. Create a Clean Branch Based on upstream/main</strong></p><p>Create a new branch starting from the updated upstream/main. This branch will hold only the cherry-picked commits.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b new-feature-branch upstream/main</span><br></pre></td></tr></table></figure><p><strong>3. Cherry-Pick Commits from feat-alpha</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Locate the <span class="built_in">hash</span> IDs of commit-4, commit-5, and commit-6 <span class="keyword">in</span> the feat-alpha branch using:</span></span><br><span class="line">git log feat-alpha --oneline</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Once you have the commit hashes, cherry-pick them into the new branch:</span></span><br><span class="line">git cherry-pick &lt;commit-4-hash&gt;</span><br><span class="line">git cherry-pick &lt;commit-5-hash&gt;</span><br><span class="line">git cherry-pick &lt;commit-6-hash&gt;</span><br></pre></td></tr></table></figure><p><strong>4. Resolve Any Conflicts</strong> (optional)</p><p>If there are conflicts during the cherry-pick process:</p><p>‚Äã    1.    Git will stop and list the conflicting files.</p><p>‚Äã    2.    Open the conflicting files and manually resolve the conflicts.</p><p>‚Äã    3.    After resolving the conflicts, mark them as resolved:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add &lt;file&gt;</span><br><span class="line">git cherry-pick --continue</span><br></pre></td></tr></table></figure><p>If you encounter multiple conflicts, repeat this process for each one.</p><p>If you decide to abort the cherry-pick entirely:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick --abort</span><br></pre></td></tr></table></figure><p><strong>5. Push the Clean Branch</strong></p><p>Once all desired commits are cherry-picked and conflicts are resolved, push the new branch to your forked repository:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin new-feature-branch</span><br></pre></td></tr></table></figure><p><strong>Why This Approach Works</strong></p><p>‚Äã    1.    <strong>Selective Commits</strong>: Cherry-picking ensures only the necessary commits from feat-alpha are included.</p><p>‚Äã    2.    <strong>Conflict Management</strong>: Conflicts, if any, are resolved once during cherry-picking.</p><p>‚Äã    3.    <strong>Clean PR</strong>: The new branch has a clear history, free from irrelevant or duplicate commits.</p><p>This ensures a smooth and conflict-free pull request to the upstream repository.</p><h1 id="ÂÖ∂ÂÆÉ"><a href="#ÂÖ∂ÂÆÉ" class="headerlink" title="ÂÖ∂ÂÆÉ"></a>ÂÖ∂ÂÆÉ</h1><h2 id="ÂêàÂπ∂Á≠ñÁï•"><a href="#ÂêàÂπ∂Á≠ñÁï•" class="headerlink" title="ÂêàÂπ∂Á≠ñÁï•"></a>ÂêàÂπ∂Á≠ñÁï•</h2><p>warning: ‰∏çÂª∫ËÆÆÂú®Ê≤°Êúâ‰∏∫ÂÅèÁ¶ªÂàÜÊîØÊåáÂÆöÂêàÂπ∂Á≠ñÁï•Êó∂ÊâßË°åpullÊìç‰Ωú„ÄÇ<br>ÊÇ®ÂèØ‰ª•Âú®ÊâßË°å‰∏ã‰∏ÄÊ¨°pullÊìç‰Ωú‰πãÂâçÊâßË°å‰∏ãÈù¢‰∏ÄÊù°ÂëΩ‰ª§Êù•ÊäëÂà∂Êú¨Ê∂àÊÅØÔºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config pull.rebase false # ÂêàÂπ∂ÔºàÁº∫ÁúÅÁ≠ñÁï•Ôºâ  </span><br><span class="line">git config pull.rebase true # ÂèòÂü∫  </span><br><span class="line">git config pull.ff only # ‰ªÖÂø´Ëøõ</span><br></pre></td></tr></table></figure><p>ÊÇ®ÂèØ‰ª•Â∞Ü ‚Äúgit config‚Äù ÊõøÊç¢‰∏∫ ‚Äúgit config ‚Äìglobal‚Äù ‰ª•‰æø‰∏∫ÊâÄÊúâ‰ªìÂ∫ìËÆæÁΩÆ<br>Áº∫ÁúÅÁöÑÈÖçÁΩÆÈ°π„ÄÇÊÇ®‰πüÂèØ‰ª•Âú®ÊØèÊ¨°ÊâßË°å pull ÂëΩ‰ª§Êó∂Ê∑ªÂä† ‚Äìrebase„ÄÅ‚Äìno-rebaseÔºå<br>ÊàñËÄÖ ‚Äìff-only ÂèÇÊï∞Ë¶ÜÁõñÁº∫ÁúÅËÆæÁΩÆ„ÄÇ</p><h2 id="Êé®ÈÄÅÊú¨Âú∞Á¶ªÁ∫øÈ°πÁõÆÂà∞ËøúÁ®ãgithub"><a href="#Êé®ÈÄÅÊú¨Âú∞Á¶ªÁ∫øÈ°πÁõÆÂà∞ËøúÁ®ãgithub" class="headerlink" title="Êé®ÈÄÅÊú¨Âú∞Á¶ªÁ∫øÈ°πÁõÆÂà∞ËøúÁ®ãgithub"></a>Êé®ÈÄÅÊú¨Âú∞Á¶ªÁ∫øÈ°πÁõÆÂà∞ËøúÁ®ãgithub</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir my_project</span><br><span class="line">cd my_project</span><br><span class="line">touch .gitignore</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br><span class="line">git remote add origin youruser@yourserver.com:/path/to/my_project.git</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h2 id="Êõ¥ÊîπhttpsÂçèËÆÆËøõË°åÊé®ÈÄÅ"><a href="#Êõ¥ÊîπhttpsÂçèËÆÆËøõË°åÊé®ÈÄÅ" class="headerlink" title="Êõ¥ÊîπhttpsÂçèËÆÆËøõË°åÊé®ÈÄÅ"></a>Êõ¥ÊîπhttpsÂçèËÆÆËøõË°åÊé®ÈÄÅ</h2><blockquote><p>Â¶ÇÊûú‰πãÂâçÊòØ‰ΩøÁî®sshÂçèËÆÆËøõË°åÊé®ÈÄÅÔºåÁé∞Êîπ‰∏∫httpÂçèËÆÆ</p></blockquote><ol><li><p>Êü•ÁúãÂΩìÂâçGitÈ°πÁõÆÁöÑËøúÁ®ãÂú∞ÂùÄ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>ËØ•ÂëΩ‰ª§‰ºöÂàóÂá∫ÊâÄÊúâÂ∑≤ÈÖçÁΩÆÁöÑËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄÔºåÂπ∂ÊòæÁ§∫ÂÆÉ‰ª¨ÁöÑËØªÂèñÂíåÂÜôÂÖ•ËÆøÈóÆURL„ÄÇÁ§∫‰æãËæìÂá∫Â¶Ç‰∏ãÊâÄÁ§∫Ôºö</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">origin  https://github.com/username/repository.git (fetch)</span><br><span class="line">origin  https://github.com/username/repository.git (push)</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠Ôºå<code>origin</code>ÊòØËøúÁ®ã‰ªìÂ∫ìÁöÑÂêçÁß∞Ôºå<code>https://github.com/username/repository.git</code>ÊòØËøúÁ®ã‰ªìÂ∫ìÁöÑÂú∞ÂùÄÔºå<code>(fetch)</code>Âíå<code>(push)</code>ÂàÜÂà´Ë°®Á§∫ËØªÂèñÂíåÂÜôÂÖ•ËÆøÈóÆURL„ÄÇ</p></li><li><p>Â∞ÜGit‰ªìÂ∫ìÁöÑURLÊõøÊç¢‰∏∫HTTPÂçèËÆÆÁöÑURL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin http://gitlab.xxx.com/username/repository.git</span><br></pre></td></tr></table></figure></li><li><p>ÁÑ∂Âêé‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ËøõË°åGit pushÊìç‰Ωú</p></li></ol><p>ÂêéËÆ∞ÔºöÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰ΩøÁî®HTTPÂçèËÆÆËøõË°åGit pushÊìç‰ΩúÁöÑÈÄüÂ∫¶ÂèØËÉΩ‰ºöÊØî‰ΩøÁî®SSHÂçèËÆÆÊÖ¢‰∏Ä‰∫õÔºåÂõ†‰∏∫HTTPÂçèËÆÆÈúÄË¶ÅÂª∫Á´ãTCPËøûÊé•„ÄÅÂèëÈÄÅHTTPËØ∑Ê±Ç„ÄÅÊé•Êî∂HTTPÂìçÂ∫îÁ≠âËøáÁ®ã„ÄÇÂêåÊó∂ÔºåHTTPÂçèËÆÆÁöÑÂÆâÂÖ®ÊÄß‰πüÊØîSSHÂçèËÆÆÁ®ç‰ΩéÔºåÂõ†Ê≠§Âú®ÂÆâÂÖ®ÊÄßË¶ÅÊ±ÇËæÉÈ´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂª∫ËÆÆ‰ΩøÁî®SSHÂçèËÆÆËøõË°åGit pushÊìç‰Ωú„ÄÇ</p><h2 id="Git‰øÆÊîπ-gitignore‰∏çÁîüÊïà"><a href="#Git‰øÆÊîπ-gitignore‰∏çÁîüÊïà" class="headerlink" title="Git‰øÆÊîπ.gitignore‰∏çÁîüÊïà"></a>Git‰øÆÊîπ.gitignore‰∏çÁîüÊïà</h2><ul><li><p>Âú®git‰∏≠ÔºåÂ¶ÇÊûúÊÉ≥ÂøΩÁï•Êüê‰∏™Êñá‰ª∂Ôºå‰∏çËÆ©Ëøô‰∏™Êñá‰ª∂Êèê‰∫§Âà∞ÁâàÊú¨Â∫ì‰∏≠ÔºåÂèØ‰ª•‰øÆÊîπÊ†πÁõÆÂΩï‰∏≠ÁöÑ.gitignoreÊñá‰ª∂</p><p>‰ΩÜÊúâÊó∂ÂÄôÊääÊüê‰∫õÁõÆÂΩïÊàñËÄÖÊñá‰ª∂Âä†ÂÖ•ÂøΩÁï•ËßÑÂàôÔºåÂèëÁé∞Âπ∂Êú™ÁîüÊïà</p></li><li><p>Êú™ÁîüÊïàÂéüÂõ†Ôºö.gitignoreÂè™ËÉΩÂøΩÁï•ÈÇ£‰∫õÂéüÊù•Ê≤°ÊúâË¢´ËøΩË∏™(track)ÁöÑÊñá‰ª∂ÔºåÂ¶ÇÊûúÊüê‰∫õÊñá‰ª∂Â∑≤ÁªèË¢´Á∫≥ÂÖ•‰∫ÜÁâàÊú¨ÁÆ°ÁêÜ‰∏≠ÔºåÂàô‰øÆÊîπ.gitignoreÊòØÊó†ÊïàÁöÑ</p></li><li><p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÂÖàÊääÊú¨Âú∞ÁºìÂ≠òÂà†Èô§ÔºàÊîπÂèòÊàêÊú™trackÁä∂ÊÄÅÔºâÔºåÁÑ∂ÂêéÊèê‰∫§„ÄÇ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached &lt;Ë¶ÅÂøΩÁï•ÁöÑÂÖ∑‰ΩìÊñá‰ª∂ÊàñËÄÖÁõÆÂΩï&gt; ÊàñËÄÖ git rm -r --cached . </span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;update .gitignore&quot;</span><br></pre></td></tr></table></figure><h1 id="github"><a href="#github" class="headerlink" title="github"></a>github</h1><h2 id="https"><a href="#https" class="headerlink" title="https"></a>https</h2><ul><li>‰ΩøÁî® https ÂçèËÆÆÊãâÂèñÈ°πÁõÆ‰ª£Á†Å</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config credential.helper cache</span><br><span class="line">git config credential.helper store</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> global (optional)</span></span><br><span class="line">git config --global credential.helper cache</span><br><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure><h2 id="ISSUES"><a href="#ISSUES" class="headerlink" title="ISSUES"></a>ISSUES</h2><h2 id="search"><a href="#search" class="headerlink" title="search"></a>search</h2><p><code>searchKeyWord is:issue is:closed repo:Alamofire/Alamofire</code>¬†</p><p>ËøôÊù°ÊêúÁ¥¢ÔºåsearchKeyWordÊòØÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó,¬†<code>is:issue</code>¬†Ë°®Á§∫Êàë‰ª¨Ë¶ÅÊêúÁ¥¢ issueÔºå¬†<code>is:closed</code>¬†Ë°®Á§∫Â∑≤ÁªèÂÖ≥Èó≠ÁöÑ issueÔºå¬†<code>repo:Alamofire/Alamofire</code>¬†Ë°®Á§∫Êàë‰ª¨Âè™ÊêúÁ¥¢Ëøô‰∏™‰ªìÂ∫ìËåÉÂõ¥ÁöÑ issue</p><h2 id="workflow"><a href="#workflow" class="headerlink" title="workflow"></a>workflow</h2><blockquote><p>GitHub Actions is a continuous integration and continuous delivery (CI/CD) platform that allows you to automate your build, test, and deployment pipeline.</p></blockquote><ul><li><p><a href="https://docs.github.com/en/actions/using-github-hosted-runners/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources">runner host</a></p></li><li><p>home</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊÉÖÂÜµ‰∏Ä</span></span><br><span class="line">runs-on: ubuntu-latest</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HOME=/home/runner/work/&lt;projectName&gt;/&lt;projectName&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊÉÖÂÜµ‰∫å</span></span><br><span class="line">runs-on: ubuntu-latest</span><br><span class="line">container: dingodatabase/dingo-eureka:rocky9</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HOME=/__w/&lt;projectName&gt;/&lt;projectName&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>disk usage</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ÊÉÖÂÜµ‰∏ÄÔºö</span></span><br><span class="line">runs-on: ubuntu-latest</span><br><span class="line"></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/root        72G   47G   26G  65% /</span><br><span class="line">tmpfs           3.9G   84K  3.9G   1% /dev/shm</span><br><span class="line">tmpfs           1.6G  1.1M  1.6G   1% /run</span><br><span class="line">tmpfs           5.0M     0  5.0M   0% /run/lock</span><br><span class="line">/dev/sda16      881M   59M  761M   8% /boot</span><br><span class="line">/dev/sda15      105M  6.1M   99M   6% /boot/efi</span><br><span class="line">tmpfs           794M   12K  794M   1% /run/user/1001</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ÊÉÖÂÜµ‰∫åÔºö</span></span><br><span class="line">runs-on: ubuntu-latest</span><br><span class="line">container: dingodatabase/dingo-eureka:rocky9</span><br><span class="line"></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">overlay          73G   60G   14G  82% /</span><br><span class="line">tmpfs            64M     0   64M   0% /dev</span><br><span class="line">shm              64M     0   64M   0% /dev/shm</span><br><span class="line">/dev/root        73G   60G   14G  82% /__w</span><br><span class="line">tmpfs           1.6G  1.2M  1.6G   1% /run/docker.sock</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /proc/acpi</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /proc/scsi</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /sys/firmware</span><br></pre></td></tr></table></figure></li><li><p>event</p></li></ul><ul><li><p>env</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GITHUB_OUTPUT</span><br><span class="line">GITHUB_STATE</span><br><span class="line">GITHUB_ENV</span><br></pre></td></tr></table></figure><p><a href="https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/passing-information-between-jobs">Passing information between jobs</a></p></li></ul><h2 id="github-cli"><a href="#github-cli" class="headerlink" title="github cli"></a>github cli</h2><p><strong>install</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install &#x27;dnf-command(config-manager)&#x27;</span><br><span class="line">sudo dnf config-manager --add-repo https://cli.github.com/packages/rpm/gh-cli.repo</span><br><span class="line">sudo dnf install gh --repo gh-cli</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Êàñ Áõ¥Êé•‰∏ãËΩΩ‰∫åËøõÂà∂Êñá‰ª∂ËøõË°åÂÆâË£Ö</span></span><br><span class="line">https://github.com/cli/cli/releases</span><br></pre></td></tr></table></figure><p><strong>security</strong></p><ul><li><p>create/check gh_token</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> githubÁΩëÁ´ôËÆæÁΩÆ</span></span><br><span class="line">settings/Developer Settings/Personal access tokens (classic)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>senario</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> senario 1 Âú®git pushÁöÑÊó∂ÂÄôÔºåËæìÂÖ•passwordÁöÑÊó∂ÂÄôÔºåÁõ¥Êé•Â§çÂà∂‰∏äÈù¢ÁöÑtokensÂç≥ÂèØ</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> senario 2 Âú®workflow‰∏≠‰ΩøÁî®</span></span><br><span class="line">gh secret set SECRET_NAME</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line">gh secret set SECRET_NAME &lt; secret.txt</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>use</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> login</span></span><br><span class="line">gh auth login</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span></span></span><br><span class="line">gh secret set DOCKERHUB_USERNAME </span><br><span class="line">gh secret set DOCKERHUB_TOKEN </span><br><span class="line">gh secret set GH_TOKEN </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> check</span></span><br><span class="line">gh secret list</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Latin alphabet</title>
      <link href="/2016/05/16/Latin%20alphabet/"/>
      <url>/2016/05/16/Latin%20alphabet/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1 Œë Œ± alpha a:lf ÈòøÂ∞îÊ≥ï</span><br><span class="line">2 Œí Œ≤ beta bet Ë¥ùÂ°î</span><br><span class="line">3 Œì Œ≥ gamma ga:m ‰ºΩÈ©¨</span><br><span class="line">4 Œî Œ¥ delta delt Âæ∑Â∞îÂ°î</span><br><span class="line">5 Œï Œµ epsilon ep`silon ‰ºäÊôÆË•øÈæô</span><br><span class="line">6 Œñ Œ∂ zeta zat Êà™Â°î</span><br><span class="line">7 Œó Œ∑ eta eit ËâæÂ°î</span><br><span class="line">8 Œò Œ∏ theta Œ∏it Ë•øÂ°î</span><br><span class="line">9 Œô Œπ iota aiot Á∫¶Â°î</span><br><span class="line">10Œö Œ∫ kappa kap Âç°Â∏ï</span><br><span class="line">11‚àß Œª lambda lambd ÂÖ∞Â∏ÉËææ</span><br><span class="line">12Œú Œº mu mju Áº™</span><br><span class="line">13Œù ŒΩ nu nju Á∫Ω</span><br><span class="line">14Œû Œæ xi ksi ÂÖãË•ø</span><br><span class="line">15Œü Œø omicron omik`ron Â••ÂØÜÂÖãÊàé</span><br><span class="line">16‚àè œÄ pi pai Ê¥æ</span><br><span class="line">17Œ° œÅ rho rou ËÇâ</span><br><span class="line">18‚àë œÉ sigma `sigma Ë•øÊ†ºÈ©¨</span><br><span class="line">19Œ§ œÑ tau tau Â•ó</span><br><span class="line">20 Œ• œÖ upsilon ju:p`sailon ÂÆáÊôÆË•øÈæô</span><br><span class="line">21 Œ¶ œÜ phi fai ‰ΩõÁà±</span><br><span class="line">22 Œß œá chi phai Ë•ø</span><br><span class="line">23 Œ® œà psi psai ÊôÆË•ø</span><br><span class="line">24 Œ© œâ omega o`miga Ê¨ßÁ±≥‰ºΩ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Latin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo</title>
      <link href="/2016/05/01/z-hexo/"/>
      <url>/2016/05/01/z-hexo/</url>
      
        <content type="html"><![CDATA[<h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><h3 id="Clean"><a href="#Clean" class="headerlink" title="Clean"></a>Clean</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p><h1 id="image-reference"><a href="#image-reference" class="headerlink" title="image reference"></a>image reference</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> markdown syntax</span></span><br><span class="line">![](/images/flink/flink_schedule_architecture.png)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> html</span></span><br><span class="line">&lt;img src=&quot;/images/minio/cert.jpg&quot; style=&quot;zoom: 60%&quot;&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> style support below config</span></span><br><span class="line">style=&quot;float: left; width: 40%; zoom: 60%; margin-right: 20px;</span><br></pre></td></tr></table></figure><h1 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h1><h2 id="next"><a href="#next" class="headerlink" title="next"></a>next</h2><h3 id="ÂÆâË£ÖËØÑËÆ∫"><a href="#ÂÆâË£ÖËØÑËÆ∫" class="headerlink" title="ÂÆâË£ÖËØÑËÆ∫"></a>ÂÆâË£ÖËØÑËÆ∫</h3><p><a href="https://zhuanlan.zhihu.com/p/33617273">Êù•ÂøÖÂäõËØÑËÆ∫</a></p><p><a href="https://sjq597.github.io/2018/05/18/Hexo-%E4%BD%BF%E7%94%A8Gitment%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/">‰ΩøÁî®GitmentËØÑËÆ∫ÂäüËÉΩ</a></p><h3 id="ÁΩÆÈ°∂ÂäüËÉΩ"><a href="#ÁΩÆÈ°∂ÂäüËÉΩ" class="headerlink" title="ÁΩÆÈ°∂ÂäüËÉΩ"></a>ÁΩÆÈ°∂ÂäüËÉΩ</h3><p><a href="https://donlex.cn/archives/caeb67e2.html">Ê∑ªÂä†ÁΩÆÈ°∂</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>java backend</title>
      <link href="/2016/03/01/backend%20snippet/"/>
      <url>/2016/03/01/backend%20snippet/</url>
      
        <content type="html"><![CDATA[<h1 id="filter-in-servlet"><a href="#filter-in-servlet" class="headerlink" title="filter in servlet"></a>filter in servlet</h1><blockquote><p>A filter is an object that is invoked at the preprocessing and postprocessing of a request.</p></blockquote><ul><li>It is mainly used to perform filtering tasks such as conversion, logging, compression, encryption and decryption, input validation etc.</li><li>The servlet filter is pluggable, i.e. its entry is defined in the web.xml file, if we remove the entry of filter from the web.xml file, filter will be removed automatically and we don‚Äôt need to change the servlet.</li></ul><p><img src="https://www.javatpoint.com/images/filter.JPG"></p><h3 id="Usage-of-Filter"><a href="#Usage-of-Filter" class="headerlink" title="Usage of Filter"></a>Usage of Filter</h3><ul><li>recording all incoming requests</li><li>logs the IP addresses of the computers from which the requests originate</li><li>conversion</li><li>data compression</li><li>encryption and decryption</li><li>input validation etc.</li></ul><h3 id="Advantage-of-Fliter"><a href="#Advantage-of-Fliter" class="headerlink" title="Advantage of Fliter"></a>Advantage of Fliter</h3><ul><li>Filter is pluggable.</li><li>One filter don‚Äôt have dependency onto another resource.</li><li>Less Maintenance</li></ul><h3 id="Filter-API"><a href="#Filter-API" class="headerlink" title="Filter API"></a>Filter API</h3><ul><li><p>Filter</p><blockquote><p>For creating any filter, you must implement the Filter interface. Filter interface provides the life cycle methods for a filter.</p></blockquote></li><li><p>FilterChain</p><blockquote><p>The object of FilterChain is responsible to invoke the next filter or resource in the chain.This object is passed in the doFilter method of Filter interface.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp,  </span></span></span><br><span class="line"><span class="params"><span class="function">      FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;  </span><br><span class="line"></span><br><span class="line">          PrintWriter out=resp.getWriter();  </span><br><span class="line">          out.print(<span class="string">&quot;filter is invoked before&quot;</span>);  </span><br><span class="line"></span><br><span class="line">          chain.doFilter(req, resp);<span class="comment">//sends request to next resource  </span></span><br><span class="line"></span><br><span class="line">          out.print(<span class="string">&quot;filter is invoked after&quot;</span>);  </span><br><span class="line">      &#125;  </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;  </span><br><span class="line">&#125;      </span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- FilterConfig</span><br></pre></td></tr></table></figure><h1 id="Event-and-Listen"><a href="#Event-and-Listen" class="headerlink" title="Event and Listen"></a>Event and Listen</h1><blockquote><p>Events are basically occurrence of something. Changing the state of an object is known as an event.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">We can perform some important tasks at the occurrence of these exceptions, such as counting total and current logged-in users, creating tables of the database at time of deploying the project, creating database connection object etc.</span><br></pre></td></tr></table></figure><h3 id="Event-classes"><a href="#Event-classes" class="headerlink" title="Event classes"></a>Event classes</h3><ul><li>ServletRequestEvent</li><li>ServletContextEvent</li><li>ServletRequestAttributeEvent</li><li>ServletContextAttributeEvent</li><li>HttpSessionEvent</li><li>HttpSessionBindingEvent</li></ul><h3 id="Event-interfaces"><a href="#Event-interfaces" class="headerlink" title="Event interfaces"></a>Event interfaces</h3><ul><li>ServletRequestListener</li><li>ServletRequestAttributeListener</li><li>ServletContextListener</li><li>ServletContextAttributeListener</li><li>HttpSessionListener</li><li>HttpSessionAttributeListener</li><li>HttpSessionBindingListener</li><li>HttpSessionActivationListener</li></ul><hr><h3 id="ServletContextEvent-and-ServletContextListener"><a href="#ServletContextEvent-and-ServletContextListener" class="headerlink" title="ServletContextEvent and ServletContextListener"></a>ServletContextEvent and ServletContextListener</h3><ul><li>The ServletContextEvent is notified when web application is deployed on the server.</li><li>If you want to perform some action at the time of deploying the web application such as creating database connection, creating all the tables of the project etc, you need to implement ServletContextListener interface and provide the implementation of its methods.</li></ul><p><code>Web application &gt; ServletContextEvent &gt; ServletContextListener</code></p><h3 id="HttpSessionEvent-and-HttpSessionListener"><a href="#HttpSessionEvent-and-HttpSessionListener" class="headerlink" title="HttpSessionEvent and HttpSessionListener"></a>HttpSessionEvent and HttpSessionListener</h3><ul><li>The HttpSessionEvent is notified when session object is changed. The corresponding Listener interface for this event is HttpSessionListener.</li><li>We can perform some operations at this event such as counting total and current logged-in users, maintaing a log of user details such as login time, logout time etc.</li></ul><p><code>session object &gt; HttpSessionEvent &gt; HttpSessionListener</code></p><h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><h3 id="generate-code-based-proto-file"><a href="#generate-code-based-proto-file" class="headerlink" title="generate code based proto file"></a>generate code based proto file</h3><p><code>protoc --proto_path=Êâ´ÊèèÁõÆÂΩï --java_out=‰ª£Á†ÅÁîüÊàêÁõÆÂΩï protoÊñá‰ª∂ÁõÆÂΩï</code></p><blockquote><p>protoc ‚Äìproto_path=src ‚Äìjava_out=build/gen src/foo.proto</p></blockquote><h3 id="Spring-provides-three-way-of-scheduling"><a href="#Spring-provides-three-way-of-scheduling" class="headerlink" title="Spring provides three way of scheduling:"></a>Spring provides three way of scheduling:</h3><ul><li>@Scheduled</li><li>Via Quartz</li><li>Via JDK Timer</li></ul><hr><h3 id="one-word"><a href="#one-word" class="headerlink" title="one word"></a>one word</h3><ul><li>\xÂØπÂ∫îÁöÑÊòØUTF-8ÁºñÁ†ÅÁöÑÊï∞ÊçÆ</li></ul>]]></content>
      
      
      <categories>
          
          <category> java backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java code snippet</title>
      <link href="/2016/02/16/java%20code%20snippet/"/>
      <url>/2016/02/16/java%20code%20snippet/</url>
      
        <content type="html"><![CDATA[<h2 id="base64ToByte"><a href="#base64ToByte" class="headerlink" title="base64ToByte"></a>base64ToByte</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String string = <span class="string">&quot;SmF2YWNvZGVnZWVrcw==&quot;</span>;</span><br><span class="line"><span class="comment">// Get bytes from string</span></span><br><span class="line"><span class="keyword">byte</span>[] byteArray = Base64.decodeBase64(string.getBytes());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print the decoded array</span></span><br><span class="line">System.out.println(Arrays.toString(byteArray));</span><br><span class="line"><span class="comment">// Print the decoded string </span></span><br><span class="line">String decodedString = <span class="keyword">new</span> String(byteArray);</span><br><span class="line">System.out.println(string + <span class="string">&quot; = &quot;</span> + decodedString);</span><br></pre></td></tr></table></figure><h2 id="TimeConvert"><a href="#TimeConvert" class="headerlink" title="TimeConvert"></a>TimeConvert</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//date format</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateFormatUtils;</span><br><span class="line">String timeStr = DateFormatUtils.format(dateDate,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">Date dateTime = DateUtils.parseDate(dateTimeStr,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">Date dateWithoutTime = sdf.parse(sdf.format(<span class="keyword">new</span> Date()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//capitalize the first letter of word</span></span><br><span class="line">String output = input.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + input.substring(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//measure the time cost</span></span><br><span class="line"><span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line"><span class="keyword">long</span> used = end-start;</span><br><span class="line">System.out.println(<span class="string">&quot;used:&quot;</span>+TimeUnit.NANOSECONDS.toMillis(used)+<span class="string">&quot; ms&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//stream read database   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStreamRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        oracleSqlSessionTemplate.select(<span class="string">&quot;xxxx.OracleMapper.getPersonInfos&quot;</span>, <span class="keyword">new</span> ResultHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleResult</span><span class="params">(ResultContext resultContext)</span> </span>&#123;</span><br><span class="line">                PersonInfo personInfo = (PersonInfo) resultContext.getResultObject();</span><br><span class="line">                LOG.debug(<span class="string">&quot;result count:[&#123;&#125;],result info:[&#123;&#125;]&quot;</span>, resultContext.getResultCount(), personInfo.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStreamRead2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        oracleSqlSessionTemplate.select(<span class="string">&quot;xxxx.OracleMapper.getPersonInfos&quot;</span>,</span><br><span class="line">                resultContext -&gt; &#123;</span><br><span class="line">                    PersonInfo personInfo = (PersonInfo) resultContext.getResultObject();</span><br><span class="line">                    LOG.debug(<span class="string">&quot;result count:[&#123;&#125;],result info:[&#123;&#125;]&quot;</span>, resultContext.getResultCount(), personInfo.getName());</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//iterate list</span></span><br><span class="line">myFinalList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">myListToParse.stream()</span><br><span class="line">        .filter(elt -&gt; elt != <span class="keyword">null</span>)</span><br><span class="line">        .forEach(elt -&gt; myFinalList.add(doSomething(elt)));</span><br><span class="line"><span class="comment">//prefer</span></span><br><span class="line">myFinalList = myListToParse.stream()</span><br><span class="line">        .filter(elt -&gt; elt != <span class="keyword">null</span>)</span><br><span class="line">        .map(elt -&gt; doSomething(elt))</span><br><span class="line">        .collect(Collectors.toList()); </span><br></pre></td></tr></table></figure><h2 id="thread"><a href="#thread" class="headerlink" title="thread"></a>thread</h2><h3 id="notify-thread"><a href="#notify-thread" class="headerlink" title="notify thread"></a>notify thread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shared</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">waitMethod</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">&quot; is releasing the lock and going to wait&quot;</span>);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            wait();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">&quot; has been notified and acquired the lock back&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">notifyOneThread</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">         </span><br><span class="line">        notify();</span><br><span class="line">         </span><br><span class="line">        System.out.println(t.getName()+<span class="string">&quot; has notified one thread waiting for this object lock&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Shared s = <span class="keyword">new</span> Shared();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t1 will be waiting for lock of object &#x27;s&#x27;</span></span><br><span class="line">         </span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t1.start();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t2 will be waiting for lock of object &#x27;s&#x27;</span></span><br><span class="line">         </span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        t2.start();</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t3 will be waiting for lock of object &#x27;s&#x27;</span></span><br><span class="line">         </span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.waitMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t3.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//Thread t4 will notify only one thread which is waiting for lock of object &#x27;s&#x27;</span></span><br><span class="line">         </span><br><span class="line">        Thread t4 = <span class="keyword">new</span> Thread() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                s.notifyOneThread();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t4.start(); </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="stop-thread"><a href="#stop-thread" class="headerlink" title="stop thread"></a>stop thread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//Initially setting the flag as true</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//This method will set flag as false</span></span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopRunning</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        flag = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//Keep the task in while loop</span></span><br><span class="line">         </span><br><span class="line">        <span class="comment">//This will make thread continue to run until flag becomes false</span></span><br><span class="line">         </span><br><span class="line">        <span class="keyword">while</span> (flag)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;I am running....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(<span class="string">&quot;Stopped Running....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        MyThread thread = <span class="keyword">new</span> MyThread();</span><br><span class="line">         </span><br><span class="line">        thread.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//call stopRunning() method whenever you want to stop a thread</span></span><br><span class="line">         </span><br><span class="line">        thread.stopRunning();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (!Thread.interrupted())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;I am running....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(<span class="string">&quot;Stopped Running.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        MyThread thread = <span class="keyword">new</span> MyThread();</span><br><span class="line">         </span><br><span class="line">        thread.start();</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//interrupting the thread</span></span><br><span class="line">         </span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="try-catch-finally"><a href="#try-catch-finally" class="headerlink" title="try-catch-finally"></a>try-catch-finally</h3><ol><li>‰∏çÁÆ°ÊúâÊú®ÊúâÂá∫Áé∞ÂºÇÂ∏∏ÔºåfinallyÂùó‰∏≠‰ª£Á†ÅÈÉΩ‰ºöÊâßË°å** </li><li><strong>ÂΩìtryÂíåcatch‰∏≠ÊúâreturnÊó∂Ôºåfinally‰ªçÁÑ∂‰ºöÊâßË°å</strong> </li><li><strong>finallyÊòØÂú®returnÂêéÈù¢ÁöÑË°®ËææÂºèËøêÁÆóÂêéÊâßË°åÁöÑÔºàÊ≠§Êó∂Âπ∂Ê≤°ÊúâËøîÂõûËøêÁÆóÂêéÁöÑÂÄºÔºåËÄåÊòØÂÖàÊääË¶ÅËøîÂõûÁöÑÂÄº‰øùÂ≠òËµ∑Êù•ÔºåÁÆ°finally‰∏≠ÁöÑ‰ª£Á†ÅÊÄé‰πàÊ†∑ÔºåËøîÂõûÁöÑÂÄºÈÉΩ‰∏ç‰ºöÊîπÂèòÔºå‰ªçÁÑ∂ÊòØ‰πãÂâç‰øùÂ≠òÁöÑÂÄºÔºâÔºåÊâÄ‰ª•ÂáΩÊï∞ËøîÂõûÂÄºÊòØÂú®finallyÊâßË°åÂâçÁ°ÆÂÆöÁöÑÔºõ</strong> </li><li><strong>finally‰∏≠ÊúÄÂ•Ω‰∏çË¶ÅÂåÖÂê´returnÔºåÂê¶ÂàôÁ®ãÂ∫è‰ºöÊèêÂâçÈÄÄÂá∫ÔºåËøîÂõûÂÄº‰∏çÊòØtryÊàñcatch‰∏≠‰øùÂ≠òÁöÑËøîÂõûÂÄº„ÄÇ</strong> </li><li>‰ªª‰ΩïÊâßË°åtry ÊàñËÄÖcatch‰∏≠ÁöÑreturnËØ≠Âè•‰πãÂâçÔºåÈÉΩ‰ºöÂÖàÊâßË°åfinallyËØ≠Âè•ÔºåÂ¶ÇÊûúfinally‰∏≠ÊúâreturnËØ≠Âè•ÔºåÈÇ£‰πàÁ®ãÂ∫èÂ∞±return‰∫ÜÔºåÊâÄ‰ª•finally‰∏≠ÁöÑreturnÊòØ‰∏ÄÂÆö‰ºöË¢´returnÁöÑ„ÄÇ</li></ol><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Java program to show, how to use ReentrantLock in Java.</span></span><br><span class="line"><span class="comment"> * Reentrant lock is an alternative way of locking</span></span><br><span class="line"><span class="comment"> * apart from implicit locking provided by synchronized keyword in Java.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  Javin Paul</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLockHowto</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//Locking using Lock and ReentrantLock</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; gets Count: &quot;</span> + count);</span><br><span class="line">            <span class="keyword">return</span> count++;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//Implicit locking using synchronized keyword</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">getCountTwo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> count++;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ThreadTest counter = <span class="keyword">new</span> ThreadTest();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (counter.getCount() &amp;lt; <span class="number">6</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">                        ex.printStackTrace();                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      </span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (counter.getCount() &amp;lt; <span class="number">6</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">                        ex.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      </span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line">Thread-0 gets Count: 0</span><br><span class="line">Thread-1 gets Count: 1</span><br><span class="line">Thread-1 gets Count: 2</span><br><span class="line">Thread-0 gets Count: 3</span><br><span class="line">Thread-1 gets Count: 4</span><br><span class="line">Thread-0 gets Count: 5</span><br><span class="line">Thread-0 gets Count: 6</span><br><span class="line">Thread-1 gets Count: 7</span><br></pre></td></tr></table></figure><h2 id="stream"><a href="#stream" class="headerlink" title="stream"></a>stream</h2><h3 id="Creating-Java-Streams"><a href="#Creating-Java-Streams" class="headerlink" title="Creating Java Streams"></a>Creating Java Streams</h3><ol><li>We can use Stream.of() to create a stream from similar type of data. For example, we can create Java Stream of integers from a group of int or Integer objects.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>We can use Stream.of() with an array of Objects to return the stream. Note that it doesn‚Äôt support autoboxing, so we can‚Äôt pass primitive type array.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.of(<span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;); </span><br><span class="line"><span class="comment">//works fine</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; stream1 = Stream.of(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;); </span><br><span class="line"><span class="comment">//Compile time error, Type mismatch: cannot convert from Stream&lt;int[]&gt; to Stream&lt;Integer&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>We can use Collection stream() to create sequential stream and parallelStream() to create parallel stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; myList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) myList.add(i);</span><br><span class="line"></span><br><span class="line"><span class="comment">//sequential stream</span></span><br><span class="line">Stream&lt;Integer&gt; sequentialStream = myList.stream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//parallel stream</span></span><br><span class="line">Stream&lt;Integer&gt; parallelStream = myList.parallelStream();</span><br></pre></td></tr></table></figure><ol start="4"><li>We can use Stream.generate() and Stream.iterate() methods to create Stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream1 = Stream.generate(() -&gt; &#123;<span class="keyword">return</span> <span class="string">&quot;abc&quot;</span>;&#125;);</span><br><span class="line">Stream&lt;String&gt; stream2 = Stream.iterate(<span class="string">&quot;abc&quot;</span>, (i) -&gt; i);</span><br></pre></td></tr></table></figure><ol start="5"><li>Using Arrays.stream() and String.chars() methods.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LongStream is = Arrays.stream(<span class="keyword">new</span> <span class="keyword">long</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;);</span><br><span class="line">IntStream is2 = <span class="string">&quot;abc&quot;</span>.chars();</span><br></pre></td></tr></table></figure><h3 id="Converting-Java-Stream-to-Collection-or-Array"><a href="#Converting-Java-Stream-to-Collection-or-Array" class="headerlink" title="Converting Java Stream to Collection or Array"></a>Converting Java Stream to Collection or Array</h3><ol><li>We can use java Stream collect() method to get List, Map or Set from stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">List&lt;Integer&gt; intList = intStream.collect(Collectors.toList());</span><br><span class="line">System.out.println(intList); <span class="comment">//prints [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>); <span class="comment">//stream is closed, so we need to create it again</span></span><br><span class="line">Map&lt;Integer,Integer&gt; intMap = intStream.collect(Collectors.toMap(i -&gt; i, i -&gt; i+<span class="number">10</span>));</span><br><span class="line">System.out.println(intMap); <span class="comment">//prints &#123;1=11, 2=12, 3=13, 4=14&#125;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>We can use stream toArray() method to create an array from the stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; intStream = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">Integer[] intArray = intStream.toArray(Integer[]::<span class="keyword">new</span>);</span><br><span class="line">System.out.println(Arrays.toString(intArray)); <span class="comment">//prints [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><h3 id="Java-Stream-Intermediate-Operations"><a href="#Java-Stream-Intermediate-Operations" class="headerlink" title="Java Stream Intermediate Operations"></a>Java Stream Intermediate Operations</h3><ol><li>Stream filter() : We can use filter() method to test stream elements for a condition and generate filtered list.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; myList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) myList.add(i);</span><br><span class="line">Stream&lt;Integer&gt; sequentialStream = myList.stream();</span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; highNums = sequentialStream.filter(p -&gt; p &gt; <span class="number">90</span>); <span class="comment">//filter numbers greater than 90</span></span><br><span class="line">System.out.print(<span class="string">&quot;High Nums greater than 90=&quot;</span>);</span><br><span class="line">highNums.forEach(p -&gt; System.out.print(p+<span class="string">&quot; &quot;</span>));</span><br><span class="line"><span class="comment">//prints &quot;High Nums greater than 90=91 92 93 94 95 96 97 98 99 &quot;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Stream map() : We can use map() to apply functions to an stream. Let‚Äôs see how we can use it to apply upper case function to a list of Strings.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names = Stream.of(<span class="string">&quot;aBc&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;ef&quot;</span>);</span><br><span class="line">System.out.println(names.map(s -&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> s.toUpperCase();</span><br><span class="line">&#125;).collect(Collectors.toList()));</span><br><span class="line"><span class="comment">//prints [ABC, D, EF]</span></span><br></pre></td></tr></table></figure><ol start="3"><li>Stream sorted() : We can use sorted() to sort the stream elements by passing Comparator argument.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names2 = Stream.of(<span class="string">&quot;aBc&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;ef&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">List&lt;String&gt; reverseSorted = names2.sorted(Comparator.reverseOrder()).collect(Collectors.toList());</span><br><span class="line">System.out.println(reverseSorted); <span class="comment">// [ef, d, aBc, 123456]</span></span><br><span class="line"></span><br><span class="line">Stream&lt;String&gt; names3 = Stream.of(<span class="string">&quot;aBc&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;ef&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">List&lt;String&gt; naturalSorted = names3.sorted().collect(Collectors.toList());</span><br><span class="line">System.out.println(naturalSorted); <span class="comment">//[123456, aBc, d, ef]</span></span><br></pre></td></tr></table></figure><ol start="4"><li>Stream flatMap() : We can use flatMap() to create a stream from the stream of list. Let‚Äôs see a simple example to clear this doubt.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;List&lt;String&gt;&gt; namesOriginalList = Stream.of(</span><br><span class="line">Arrays.asList(<span class="string">&quot;Pankaj&quot;</span>), </span><br><span class="line">Arrays.asList(<span class="string">&quot;David&quot;</span>, <span class="string">&quot;Lisa&quot;</span>),</span><br><span class="line">Arrays.asList(<span class="string">&quot;Amit&quot;</span>));</span><br><span class="line"><span class="comment">//flat the stream from List&lt;String&gt; to String stream</span></span><br><span class="line">Stream&lt;String&gt; flatStream = namesOriginalList</span><br><span class="line">.flatMap(strList -&gt; strList.stream());</span><br><span class="line"></span><br><span class="line">flatStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure><h3 id="Java-Stream-Terminal-Operations"><a href="#Java-Stream-Terminal-Operations" class="headerlink" title="Java Stream Terminal Operations"></a>Java Stream Terminal Operations</h3><ol><li>Stream reduce() example: We can use reduce() to perform a reduction on the elements of the stream, using an associative accumulation function, and return an Optional. Let‚Äôs see how we can use it multiply the integers in a stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">Optional&lt;Integer&gt; intOptional = numbers.reduce((i,j) -&gt; &#123;<span class="keyword">return</span> i*j;&#125;);</span><br><span class="line"><span class="keyword">if</span>(intOptional.isPresent()) System.out.println(<span class="string">&quot;Multiplication = &quot;</span>+intOptional.get()); <span class="comment">//120</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Stream count() example: We can use this terminal operation to count the number of items in the stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers1 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Number of elements in stream=&quot;</span>+numbers1.count()); <span class="comment">//5</span></span><br></pre></td></tr></table></figure><ol start="3"><li>Stream forEach() example: This can be used for iterating over the stream. We can use this in place of iterator. Let‚Äôs see how to use it for printing all the elements of the stream.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers2 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">numbers2.forEach(i -&gt; System.out.print(i+<span class="string">&quot;,&quot;</span>)); <span class="comment">//1,2,3,4,5,</span></span><br></pre></td></tr></table></figure><ol start="4"><li>Stream match() examples: Let‚Äôs see some of the examples for matching methods in Stream API.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; numbers3 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Stream contains 4? &quot;</span>+numbers3.anyMatch(i -&gt; i==<span class="number">4</span>));</span><br><span class="line"><span class="comment">//Stream contains 4? true</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; numbers4 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Stream contains all elements less than 10? &quot;</span>+numbers4.allMatch(i -&gt; i&lt;<span class="number">10</span>));</span><br><span class="line"><span class="comment">//Stream contains all elements less than 10? true</span></span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; numbers5 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Stream doesn&#x27;t contain 10? &quot;</span>+numbers5.noneMatch(i -&gt; i==<span class="number">10</span>));</span><br><span class="line"><span class="comment">//Stream doesn&#x27;t contain 10? true</span></span><br></pre></td></tr></table></figure><ol start="5"><li>Stream findFirst() :This is a short circuiting terminal operation, let‚Äôs see how we can use it to find the first string from a stream starting with D.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; names4 = Stream.of(<span class="string">&quot;Pankaj&quot;</span>,<span class="string">&quot;Amit&quot;</span>,<span class="string">&quot;David&quot;</span>, <span class="string">&quot;Lisa&quot;</span>);</span><br><span class="line">Optional&lt;String&gt; firstNameWithD = names4.filter(i -&gt; i.startsWith(<span class="string">&quot;D&quot;</span>)).findFirst();</span><br><span class="line"><span class="keyword">if</span>(firstNameWithD.isPresent())&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;First Name starting with D=&quot;</span>+firstNameWithD.get()); <span class="comment">//David</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="some-example"><a href="#some-example" class="headerlink" title="some example"></a>some example</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//merge collection</span></span><br><span class="line">List&lt;String&gt; resultPersonnos = Stream.of(list1, list2)</span><br><span class="line">                .flatMap(Collection::stream)</span><br><span class="line">                .distinct()</span><br><span class="line">                .sorted()</span><br><span class="line">                .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vim command</title>
      <link href="/2015/08/16/vim%20command/"/>
      <url>/2015/08/16/vim%20command/</url>
      
        <content type="html"><![CDATA[<h1 id="config"><a href="#config" class="headerlink" title="config"></a>config</h1><p><code>~/.vimrc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&quot; Tab and Indentation Settings</span><br><span class="line">set tabstop=4        &quot; Number of spaces a tab counts for</span><br><span class="line">set shiftwidth=4     &quot; Number of spaces to use for each step of auto indent</span><br><span class="line">set expandtab        &quot; Use spaces instead of tabs</span><br><span class="line">set smarttab         &quot; Insert tabs on the start of a line according to shiftwidth</span><br><span class="line">set autoindent       &quot; Copy indent from current line when starting a new line</span><br><span class="line">set smartindent      &quot; Smart autoindenting when starting a new line</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot; General Settings</span><br><span class="line">set number           &quot; Show line numbers</span><br><span class="line">set relativenumber   &quot; Show relative line numbers</span><br><span class="line">set ruler            &quot; Show cursor position</span><br><span class="line">set encoding=utf-8   &quot; Set UTF-8 encoding</span><br><span class="line">set scrolloff=5      &quot; Keep 5 lines visible above/below cursor</span><br><span class="line"></span><br><span class="line">&quot; Search Settings</span><br><span class="line">set ignorecase       &quot; Ignore case when searching</span><br><span class="line">set smartcase        &quot; Override ignorecase if search contains uppercase</span><br><span class="line">set hlsearch         &quot; Highlight search results</span><br><span class="line">set incsearch        &quot; Show search matches as you type</span><br><span class="line"></span><br><span class="line">&quot; Syntax and Appearance</span><br><span class="line">syntax enable        &quot; Enable syntax highlighting</span><br><span class="line">set background=dark  &quot; Dark background mode</span><br><span class="line">colorscheme default  &quot; Choose a color scheme</span><br><span class="line"></span><br><span class="line">&quot; File Handling</span><br><span class="line">set autoread         &quot; Automatically read files changed outside of Vim</span><br><span class="line">set nobackup         &quot; Don&#x27;t create backup files</span><br><span class="line">set noswapfile       &quot; Don&#x27;t use swap files</span><br></pre></td></tr></table></figure><ul><li><p>format script</p><ol><li>   Move to the top of the file using <code>gg</code>.</li><li>   Re-indent the file:  <code>gg=G</code></li></ol></li></ul>  <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">set</span> <span class="keyword">filetype</span>=<span class="keyword">sh</span>  # optional</span><br><span class="line">:<span class="keyword">set</span> autoindent</span><br><span class="line">:<span class="keyword">set</span> tabstop=<span class="number">4</span>       <span class="comment">&quot; Number of spaces per tab</span></span><br><span class="line">:<span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span>    <span class="comment">&quot; Number of spaces for indentation</span></span><br><span class="line">:<span class="keyword">set</span> expandtab       <span class="comment">&quot; Use spaces instead of tabs</span></span><br></pre></td></tr></table></figure><ul><li><p>format json</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%!jq .</span><br></pre></td></tr></table></figure></li><li><p>formate xml</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%!xmllint --format %</span><br></pre></td></tr></table></figure></li><li><p>ÊòæÁ§∫‰∏çÂèØËßÅÂ≠óÁ¨¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:set list</span><br></pre></td></tr></table></figure></li><li><p>ÁªüËÆ°Â≠óÁ¨¶Âá∫Áé∞Ê¨°Êï∞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/Â≠óÁ¨¶‰∏≤//ng</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Â§ßÂ∞èÂÜôËΩ¨Êç¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ÈÄâÊã©ÊñáÊú¨‰πãÂêéÔºåÊâßË°å g~~ ËøõË°åÂ§ßÂ∞èÂÜôÁöÑËΩ¨Êç¢</span><br></pre></td></tr></table></figure></li><li><p>ÂÖ®ÊñáÈÄâÊã©</p></li><li><p>Â§öË°åÊìç‰Ωú</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Êåâ‰∏ã Ctrl + v ËøõÂÖ•ÂèØËßÜÂùóÊ®°Âºè„ÄÇ</span><br><span class="line">‰ΩøÁî®‰∏ä‰∏ãÁÆ≠Â§¥ÈîÆÊàñ j Âíå k ÈîÆÈÄâÊã©Ë¶ÅÁºñËæëÁöÑË°å„ÄÇ</span><br><span class="line">Êåâ‰∏ã Shift + i ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè„ÄÇ</span><br><span class="line">ËæìÂÖ•Ë¶ÅÊèíÂÖ•ÁöÑÊñáÊú¨„ÄÇ</span><br><span class="line">Êåâ‰∏ã Esc ÈîÆÈÄÄÂá∫ÊèíÂÖ•Ê®°ÂºèÔºåÊâÄÊúâÈÄâÂÆöÁöÑË°åÈÉΩÂ∞ÜË¢´‰øÆÊîπ„ÄÇ</span><br></pre></td></tr></table></figure></li></ul><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="type-M"><a href="#type-M" class="headerlink" title="type ^M"></a>type <code>^M</code></h2><blockquote><p>equal <code>\r</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Ctrl-V Ctrl-M</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
